/*! For license information please see main.d898473c.chunk.js.LICENSE.txt */
(this["webpackJsonpdev-workspaces-frame"]=this["webpackJsonpdev-workspaces-frame"]||[]).push([[0],{17:function(e,n,t){},20:function(e,n,t){"use strict";(function(e){var r=t(9),o=t(0),i=t.n(o),l=t(2),a=t(3),u=t(4),s=t(1),c=t.n(s),d=t(7),f=t(11),p=t.n(f),h=function(e,n){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};function _(e,n){function t(){this.constructor=e}h(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var g=function(){return(g=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function m(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}function w(e,n,t,r){return new(t||(t=Promise))((function(o,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(l,a)}u((r=r.apply(e,n||[])).next())}))}function v(e,n){var t,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((o=(o=l.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function b(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var r=Array(e),o=0;for(n=0;n<t;n++)for(var i=arguments[n],l=0,a=i.length;l<a;l++,o++)r[o]=i[l];return r}var y=function(e){var n=e.appName,t=e.onClick;return c.a.createElement("a",{onClick:function(e){if(e.preventDefault(),"function"==typeof t)return t(e)},className:"list-group-item list-group-item-action px-3"},n)},k=function(e){var n=e.glue,t=e.inLane,r=e.parent,o=e.hidePopup,i=e.searchTerm,l=e.updatePopupHeight,a=e.filterApps||function(e){return!e.isActivity&&!e.isShell&&function(e){return!e.type||"activity"!==e.type&&"canvas"!==e.type&&"workspaces"!==e.type&&"node"!==e.type}(e)&&function(e){var n,t,r;return null!==(t=null===(n=null==e?void 0:e.userProperties)||void 0===n?void 0:n.includeInWorkspaces)&&void 0!==t?t:null===(r=null==e?void 0:e.userProperties)||void 0===r?void 0:r.includeInCanvas}(e)},u=n.appManager.applications().filter(a);return Object(s.useEffect)((function(){l()}),[]),c.a.createElement("nav",{id:"applicationsList",className:"nav list-group"},u.filter((function(e){return-1!==(e.title||e.name).toLowerCase().indexOf(i.toLowerCase())})).map((function(e,n){return c.a.createElement(y,{key:n,onClick:function(){var n;(n=e.name,function(){return w(void 0,void 0,void 0,(function(){var e,i,l,a,u;return v(this,(function(s){switch(s.label){case 0:return l=function(n){e?e.id===n.id&&(n.focus(),i()):i()},r.type?[3,2]:[4,r.onWindowLoaded(l)];case 1:return i=s.sent(),[3,4];case 2:return[4,r.workspace.onWindowLoaded(l)];case 3:i=s.sent(),s.label=4;case 4:return s.trys.push([4,11,,12]),"group"===r.type&&t?[4,r.parent.addGroup({type:"group",children:[{type:"window",appName:n}]})]:[3,6];case 5:return a=s.sent(),e=a.children[0],[3,10];case 6:return"group"===r.type||t?[3,8]:[4,r.addGroup({type:"group",children:[{type:"window",appName:n}]})];case 7:return a=s.sent(),e=a.children[0],[3,10];case 8:return[4,r.addWindow({type:"window",appName:n})];case 9:e=s.sent(),s.label=10;case 10:return[3,12];case 11:return u=s.sent(),console.warn(u),[3,12];case 12:return o(),[2]}}))}))})()},appName:e.title||e.name})})))},C=function(e){var n=e.inLane,t=e.setInLane,r=e.parent,o="";if(r.type?"group"!==r.type||r.children.length?"group"===r.type&&(o=""+(r.parent.type||"")):o="":o="workspace",Object(s.useEffect)((function(){o&&"workspace"!==o||t(!1)}),[o]),!o||"workspace"===o)return null;var i="This "+(o[0].toUpperCase()+o.substring(1));return c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"Application placement"},"Application Placement"),c.a.createElement("div",{className:"btn-group d-flex mb-2",role:"group","aria-label":"Application placement"},c.a.createElement("button",{onClick:function(){return t(!0)},type:"button",id:"laneButton",className:"btn btn-outline-primary w-100 "+(n?"active":"")},i),c.a.createElement("button",{onClick:function(){return t(!1)},type:"button",id:"tabGroupButton",className:"btn btn-outline-primary w-100 "+(n?"":"active")},"This Tab Group")))},I=function(e){return function(n){var t=n.glue||window.glue||Object(s.useContext)(d.a);if(!t)throw new Error("An instance of Glue is not provided");return c.a.createElement(e,g({},Object.assign({},n,{glue:t})))}},x=I((function(e){var n=e.workspaceId,t=e.boxId,r=e.hidePopup,o=e.resizePopup,i=e.glue,l=(e.frameId,e.filterApps),a=m(e,["workspaceId","boxId","hidePopup","resizePopup","glue","frameId","filterApps"]),u=Object(s.useState)(!1),d=u[0],f=u[1],p=Object(s.useState)(void 0),h=p[0],_=p[1],w=Object(s.useState)(""),v=w[0],b=w[1],y=c.a.createRef();Object(s.useEffect)((function(){var e=!0;return i.workspaces.getAllWorkspaces().then((function(r){var o=r.find((function(e){return e.id===n})),i=o.getBox((function(e){return e.id===t}))||o;e&&_(i)})),function(){e=!1}}),[t,n]);var I=function(){var e,n=null===(e=y.current)||void 0===e?void 0:e.getBoundingClientRect().height;o({width:300,height:n})};return Object(s.useEffect)((function(){I()}),[v,h]),c.a.createElement("div",g({},a,{ref:y,className:"container-fluid add-application"}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h5",{className:"border-bottom border-secondary pb-1 my-3"},"Add Application"))),c.a.createElement("div",{id:"applicationPlacementSection",className:"row"},c.a.createElement("div",{className:"col"},h&&c.a.createElement(C,{inLane:d,setInLane:f,parent:h}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("div",{className:"input-group position-relative mb-2"},c.a.createElement("input",{type:"text",id:"appSearch",className:"form-control pr-4",placeholder:"Search \u0430pplication",value:v,onChange:function(e){return b(e.target.value)},"aria-label":"Search \u0430pplication","aria-describedby":""}),c.a.createElement("div",{className:"icon-search"})))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("div",{className:"applications mb-2"},c.a.createElement(k,{glue:i,hidePopup:r,inLane:d,parent:h,searchTerm:v,filterApps:l,updatePopupHeight:function(){I()}})))))})),E=function(e){var n=function(e){var n=/Inner message:\s+(.+)/gm.exec(e);return n&&n[1]||e}(e.errMessage);return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("div",{id:"feedbackContainer",className:"d-flex flex-row pb-2"},c.a.createElement("div",{className:"invalid-feedback mt-0 d-block"},n||"Something went wrong."))))},S=function(e){var n=e.name,t=e.onClick,r=e.onCloseClick;return c.a.createElement("a",{onClick:function(e){if(e.preventDefault(),"function"==typeof t)return t(e)},className:"list-group-item list-group-item-action ry-2"},c.a.createElement("div",{className:"align-items-center workspace d-flex flex-row"},c.a.createElement("div",{className:"workspace__icon mr-2"}),c.a.createElement("div",{className:"workspace__description"},c.a.createElement("h5",{className:"mb-0 text-truncate"},n)),c.a.createElement("div",{onClick:r,className:"close-icon ml-auto"})))},D=function(e){var n=e.glue,t=e.frameId,r=e.showFeedback,o=e.hidePopup,i=e.resizePopup,l=Object(s.useState)([]),a=l[0],u=l[1],d=function(){return n.workspaces.layouts.getSummaries()};return Object(s.useEffect)((function(){var e=!0;return d().then((function(n){e&&u(n)})),function(){e=!1}}),[]),Object(s.useEffect)((function(){i()}),[a]),c.a.createElement("nav",{id:"workspacesList",className:"nav flex-column"},a.map((function(e,i){return c.a.createElement(S,{key:i,name:e.name,onClick:function(){return(i=e.name,function(){n.workspaces.restoreWorkspace(i,{frameId:t,title:i}).catch((function(e){r(e.message)})).finally((function(){o()}))})();var i},onCloseClick:function(t){var o;t.stopPropagation(),(o=e.name,function(){n.workspaces.layouts.delete(o).catch((function(e){r(e.message)})).then((function(){d().then((function(e){u(e)}))}))})()}})})))},R=I((function(e){var n=e.frameId,t=e.hidePopup,r=e.resizePopup,o=e.glue,i=m(e,["frameId","hidePopup","resizePopup","glue"]),l=Object(s.useState)(void 0),a=l[0],u=l[1],d=c.a.createRef(),f=function(){var e,n=null===(e=d.current)||void 0===e?void 0:e.getBoundingClientRect().height;r({width:300,height:n})};return Object(s.useEffect)((function(){f()}),[a]),c.a.createElement("div",g({},i,{ref:d,className:"container-fluid add-workspace"}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h5",{className:"border-bottom border-secondary pb-1 my-3"},"Add Workspace"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h5",{onClick:function(){o.workspaces.createWorkspace({children:[],frame:{reuseFrameId:n}}),t()},itemType:"h5",id:"createNewButton",className:"btn btn-primary mb-3 w-100"},"Create New"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h3",null,"Load Workspace"),c.a.createElement("div",{className:"workspaces mb-2"},c.a.createElement(D,{frameId:n,glue:o,showFeedback:u,hidePopup:t,resizePopup:f})))),a&&c.a.createElement(E,{errMessage:a}))})),O=function(e){var n=e.changeChecked,t=e.refreshHeight,r=c.a.createRef();return Object(s.useEffect)((function(){t()}),[]),c.a.createElement("div",{className:"form-check"},c.a.createElement("input",{onChange:function(){(null==r?void 0:r.current)&&n(r.current.checked)},ref:r,className:"form-check-input",type:"checkbox",value:"",id:"saveContextCheckbox"}),c.a.createElement("label",{className:"form-check-label",htmlFor:"saveContextCheckbox"},"Save context"))},A=function(e){var n=e.workspaceId,t=e.inputValue,r=e.clearInput,o=e.showFeedback,i=e.shouldSaveContext,l=e.hideFeedback,a=e.glue,u=e.hidePopup,d=e.buildMode,f=Object(s.useState)(!1),p=f[0],h=f[1];return Object(s.useEffect)((function(){if(p){var e,l=!0,s=t;return a.workspaces.getAllWorkspaces().then((function(t){return e=t.find((function(e){return e.id===n})),a.workspaces.layouts.save({name:s,workspaceId:e.id,saveContext:i})})).then((function(){return e.setTitle(s)})).catch((function(e){l&&o(e.message)})).finally((function(){l&&(r(),h(!1),u())})),function(){l=!1}}}),[p]),c.a.createElement("button",{onClick:function(){var e=t;if(n&&!d){if(l(),!e)return void o("Please provide a valid name");if(p)return;h(!0)}else n&&function(e,n){return w(void 0,void 0,void 0,(function(){var t,r;return v(this,(function(o){switch(o.label){case 0:return t=a.agm.instance,r={operation:"generateLayout",operationArguments:{name:e,workspaceId:n}},[4,a.agm.invoke("T42.Workspaces.Control",r,t||"best")];case 1:return[2,o.sent().returned]}}))}))}(e,n).then((function(n){!function(e,n){var t=document.createElement("a"),r="text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));document.body.append(t),t.setAttribute("href","data:"+r),t.setAttribute("download",n+".txt"),t.click(),t.remove()}(n,e)})).catch((function(e){o(e.message)}))},id:"saveButton",type:"button",className:"btn btn-primary"},d?"Download":"Save")},T=I((function(e){var n=e.workspaceId,t=e.resizePopup,r=e.hidePopup,o=e.buildMode,i=e.glue,l=m(e,["workspaceId","resizePopup","hidePopup","buildMode","glue"]),a=c.a.createRef(),u=c.a.createRef(),d=Object(s.useState)(!1),f=d[0],p=d[1],h=Object(s.useState)(""),_=h[0],w=h[1],v=Object(s.useState)(""),b=v[0],y=v[1],k=function(){if(null==u?void 0:u.current){var e=u.current.getBoundingClientRect();t({height:e.height,width:300})}};return Object(s.useEffect)((function(){k()}),[_,n]),Object(s.useEffect)((function(){var e=!0;return i.workspaces.getAllWorkspaces().then((function(t){var r=t.find((function(e){return e.id===n}));e&&y(r.layoutName||"")})),function(){e=!1}}),[n]),c.a.createElement("div",g({},l,{onClick:function(e){return e.stopPropagation()},ref:u,className:"container-fluid save-workspace"}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h5",{className:"border-bottom border-secondary pb-1 my-3"},"Save Workspace"))),c.a.createElement("div",{className:"row mb-2"},c.a.createElement("div",{className:"col"},c.a.createElement("input",{ref:a,value:b,onChange:function(e){return y(e.target.value)},onClick:function(e){return w("")},className:"form-control mr-1",type:"text",placeholder:"Workspace name",id:"js-workspace-name"}))),c.a.createElement("div",{className:"row  align-items-center pb-2"},c.a.createElement("div",{className:"col"},!o&&c.a.createElement(O,{changeChecked:function(e){return p(e)},refreshHeight:k})),c.a.createElement("div",{className:"col  text-right"},c.a.createElement(A,{clearInput:function(){y("")},inputValue:b,workspaceId:n,shouldSaveContext:f,showFeedback:w,hideFeedback:function(){return w("")},hidePopup:r,buildMode:o,glue:i}))),_&&c.a.createElement(E,{errMessage:_}))}));function M(e,n,t,r){return new(t||(t=Promise))((function(o,i){function l(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(l,a)}u((r=r.apply(e,n||[])).next())}))}var P="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function j(e,n,t){return e(t={path:n,exports:{},require:function(e,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&t.path)}},t.exports),t.exports}var W=j((function(e,n){!function(n){var t={config:{},container:{},controls:{},errors:{},items:{},utils:{}};t.utils.F=function(){},t.utils.extend=function(e,n){e.prototype=t.utils.createObject(n.prototype),e.prototype.contructor=e},t.utils.createObject=function(e){return"function"==typeof Object.create?Object.create(e):(t.utils.F.prototype=e,new t.utils.F)},t.utils.objectKeys=function(e){var n,t;if("function"==typeof Object.keys)return Object.keys(e);for(t in n=[],e)n.push(t);return n},t.utils.getHashValue=function(e){var n=location.hash.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},t.utils.getQueryStringParam=function(e){if(window.location.hash)return t.utils.getHashValue(e);if(!window.location.search)return null;var n,r,o=window.location.search.substr(1).split("&"),i={};for(r=0;r<o.length;r++)i[(n=o[r].split("="))[0]]=n[1];return i[e]||null},t.utils.copy=function(e,n){for(var t in n)e[t]=n[t];return e},t.utils.animFrame=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)})((function(){e()}))},t.utils.indexOf=function(e,n){if(!(n instanceof Array))throw new Error("Haystack is not an Array");if(n.indexOf)return n.indexOf(e);for(var t=0;t<n.length;t++)if(n[t]===e)return t;return-1},"object"!=typeof Int8Array?t.utils.isFunction=function(e){return"function"==typeof e||!1}:t.utils.isFunction=function(e){return"[object Function]"===toString.call(e)},t.utils.fnBind=function(e,n,t){if(void 0!==Function.prototype.bind)return Function.prototype.bind.apply(e,[n].concat(t||[]));var r=function r(){var o=(t||[]).concat(Array.prototype.slice.call(arguments,0));if(!(this instanceof r))return e.apply(n,o);e.apply(this,o)};return r.prototype=e.prototype,r},t.utils.removeFromArray=function(e,n){var r=t.utils.indexOf(e,n);if(-1===r)throw new Error("Can't remove item from array. Item is not in the array");n.splice(r,1)},t.utils.now=function(){return"function"==typeof Date.now?Date.now():(new Date).getTime()},t.utils.getUniqueId=function(){return(1e15*Math.random()).toString(36).replace(".","")},t.utils.filterXss=function(e,n){var t=e.replace(/javascript/gi,"j&#97;vascript").replace(/expression/gi,"expr&#101;ssion").replace(/onload/gi,"onlo&#97;d").replace(/script/gi,"&#115;cript").replace(/onerror/gi,"on&#101;rror");return!0===n?t:t.replace(/>/g,"&gt;").replace(/</g,"&lt;")},t.utils.stripTags=function(e){return n.trim(e.replace(/(<([^>]+)>)/gi,""))},t.utils.EventEmitter=function(){this._mSubscriptions={},this._mSubscriptions[t.utils.EventEmitter.ALL_EVENT]=[],this.on=function(e,n,r){if(!t.utils.isFunction(n))throw new Error("Tried to listen to event "+e+" with non-function callback "+n);this._mSubscriptions[e]||(this._mSubscriptions[e]=[]),this._mSubscriptions[e].push({fn:n,ctx:r})},this.emit=function(e){var n,r,o;o=Array.prototype.slice.call(arguments,1);var i=this._mSubscriptions[e];if(i)for(i=i.slice(),n=0;n<i.length;n++)r=i[n].ctx||{},i[n].fn.apply(r,o);o.unshift(e);var l=this._mSubscriptions[t.utils.EventEmitter.ALL_EVENT].slice();for(n=0;n<l.length;n++)r=l[n].ctx||{},l[n].fn.apply(r,o)},this.unbind=function(e,n,t){if(this._mSubscriptions[e]){var r,o=!1;for(r=0;r<this._mSubscriptions[e].length;r++)n&&this._mSubscriptions[e][r].fn!==n||t&&t!==this._mSubscriptions[e][r].ctx||(this._mSubscriptions[e].splice(r,1),o=!0);if(!1===o)throw new Error("Nothing to unbind for "+e)}},this.off=this.unbind,this.trigger=this.emit},t.utils.EventEmitter.ALL_EVENT="__all",t.utils.DragListener=function(e,r){t.utils.EventEmitter.call(this),this._eElement=n(e),this._oDocument=n(document),this._eBody=n(document.body),this._nButtonCode=r||0,this._nDelay=200,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._bDragging=!1,this._fMove=t.utils.fnBind(this.onMouseMove,this),this._fUp=t.utils.fnBind(this.onMouseUp,this),this._fDown=t.utils.fnBind(this.onMouseDown,this),this._eElement.on("mousedown touchstart",this._fDown)},t.utils.DragListener.timeout=null,t.utils.copy(t.utils.DragListener.prototype,{destroy:function(){this._eElement.unbind("mousedown touchstart",this._fDown),this._oDocument.unbind("mouseup touchend",this._fUp),this._eElement=null,this._oDocument=null,this._eBody=null},onMouseDown:function(e){if(e.preventDefault(),0==e.button||"touchstart"===e.type){var n=this._getCoordinates(e);this._nOriginalX=n.x,this._nOriginalY=n.y,this._oDocument.on("mousemove touchmove",this._fMove),this._oDocument.one("mouseup touchend",this._fUp),this._timeout=setTimeout(t.utils.fnBind((function(){this._startDrag(e)}),this),this._nDelay)}},onMouseMove:function(e){if(null!=this._timeout){e.preventDefault();var n=this._getCoordinates(e);this._nX=n.x-this._nOriginalX,this._nY=n.y-this._nOriginalY,!1===this._bDragging&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&(clearTimeout(this._timeout),this._startDrag(e)),this._bDragging&&this.emit("drag",this._nX,this._nY,e)}},onMouseUp:function(e){null!=this._timeout&&(clearTimeout(this._timeout),this._eBody.removeClass("lm_dragging"),this._eElement.removeClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events",""),this._oDocument.unbind("mousemove touchmove",this._fMove),this._oDocument.unbind("mouseup touchend",this._fUp),!0===this._bDragging&&(this._bDragging=!1,this.emit("dragStop",e,this._nOriginalX+this._nX)))},_startDrag:function(e){this._bDragging=!0,this._eBody.addClass("lm_dragging"),this._eElement.addClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events","none"),this.emit("dragStart",this._nOriginalX,this._nOriginalY,e)},_getCoordinates:function(e){return{x:(e=e.originalEvent&&e.originalEvent.touches?e.originalEvent.touches[0]:e).pageX,y:e.pageY}}}),t.LayoutManager=function(e,r,o){if(!n&&window.$&&(n=window.$),!n||"function"!=typeof n.noConflict)throw new Error('jQuery is missing as dependency for GoldenLayout. Please either expose $ on GoldenLayout\'s scope (e.g. window) or add "jquery" to your paths when using RequireJS/AMD');t.utils.EventEmitter.call(this),this.isInitialised=!1,this._isFullPage=!1,this._resizeTimeoutId=null,this._components={"lm-react-component":t.utils.ReactComponentHandler},this._itemAreas=[],this._resizeFunction=t.utils.fnBind(this._onResize,this),this._unloadFunction=t.utils.fnBind(this._onUnload,this),this._maximizedItem=null,this._maximizePlaceholder=n('<div class="lm_maximise_place"></div>'),this._creationTimeoutPassed=!1,this._subWindowsCreated=!1,this._dragSources=[],this._dragProxies=[],this._updatingColumnsResponsive=!1,this._firstLoad=!0,this._componentFactory=o,this.width=null,this.height=null,this.root=null,this.openPopouts=[],this.selectedItem=null,this.isSubWindow=!1,this.eventHub=new t.utils.EventHub(this),this.config=this._createConfig(e),this.container=r,this.dropTargetIndicator=null,this.transitionIndicator=null,this.tabDropPlaceholder=n('<div class="lm_drop_tab_placeholder"></div>'),!0===this.isSubWindow&&n("body").css("visibility","hidden"),this._typeToItem={column:t.utils.fnBind(t.items.RowOrColumn,this,[!0]),row:t.utils.fnBind(t.items.RowOrColumn,this,[!1]),stack:t.items.Stack,component:t.items.Component}},t.LayoutManager.__lm=t,t.LayoutManager.minifyConfig=function(e){return(new t.utils.ConfigMinifier).minifyConfig(e)},t.LayoutManager.unminifyConfig=function(e){return(new t.utils.ConfigMinifier).unminifyConfig(e)},t.utils.copy(t.LayoutManager.prototype,{registerComponent:function(e,n){if("function"!=typeof n)throw new Error("Please register a constructor function");if(void 0!==this._components[e])throw new Error("Component "+e+" is already registered");this._components[e]=n},toConfig:function(e){var n,r,o;if(!1===this.isInitialised)throw new Error("Can't create config, layout not yet initialised");if(e&&!(e instanceof t.items.AbstractContentItem))throw new Error("Root must be a ContentItem");for((n={settings:t.utils.copy({},this.config.settings),dimensions:t.utils.copy({},this.config.dimensions),labels:t.utils.copy({},this.config.labels),context:t.utils.copy({},this.config.context),workspacesOptions:t.utils.copy({},this.config.workspacesOptions)}).content=[],(r=function(e,n){var t,o;for(t in n.config)"content"!==t&&(e[t]=n.config[t]);if(n.contentItems.length)for(e.content=[],o=0;o<n.contentItems.length;o++)e.content[o]={},r(e.content[o],n.contentItems[o])})(n,e?{contentItems:[e]}:this.root),this._$reconcilePopoutWindows(),n.openPopouts=[],o=0;o<this.openPopouts.length;o++)n.openPopouts.push(this.openPopouts[o].toConfig());return n.maximizedItemId=this._maximizedItem?"__glMaximised":null,n},getComponent:function(e){if(void 0===this._components[e])throw new t.errors.ConfigurationError('Unknown component "'+e+'"');return this._components[e]},init:function(){if(!1===this._subWindowsCreated&&(this._createSubWindows(),this._subWindowsCreated=!0),"loading"!==document.readyState&&null!==document.body){if(!0===this.isSubWindow&&!1===this._creationTimeoutPassed)return setTimeout(t.utils.fnBind(this.init,this),7),void(this._creationTimeoutPassed=!0);!0===this.isSubWindow&&this._adjustToWindowMode(),this._setContainer(),this.dropTargetIndicator=new t.controls.DropTargetIndicator(this.container),this.transitionIndicator=new t.controls.TransitionIndicator,this.updateSize(),this._create(this.config),this._bindEvents(),this.isInitialised=!0,this._adjustColumnsResponsive(),this.emit("initialised")}else n(document).ready(t.utils.fnBind(this.init,this))},updateSize:function(e,n){2===arguments.length?(this.width=e,this.height=n):(this.width=this.container.width(),this.height=this.container.height()),!0===this.isInitialised&&(this.root.callDownwards("setSize",[this.width,this.height]),this._maximizedItem&&(this._maximizedItem.element.width(e),this._maximizedItem.element.height(n),this._maximizedItem.callDownwards("setSize")),this._adjustColumnsResponsive())},destroy:function(){!1!==this.isInitialised&&(this._onUnload(),n(window).off("resize",this._resizeFunction),n(window).off("unload beforeunload",this._unloadFunction),this.root.callDownwards("_$destroy",[],!0),this.root.contentItems=[],this.tabDropPlaceholder.remove(),this.dropTargetIndicator.destroy(),this.transitionIndicator.destroy(),this.eventHub.destroy(),this._dragSources.forEach((function(e){"function"==typeof e._dragListener.destroy&&e._dragListener.destroy(),e._element=null,e._itemConfig=null,e._dragListener=null})),this._dragSources=[])},createContentItem:function(e,n){var r;if("string"!=typeof e.type)throw new t.errors.ConfigurationError("Missing parameter 'type'",e);if("react-component"===e.type&&(e.type="component",e.componentName="lm-react-component"),!this._typeToItem[e.type])throw r="Unknown type '"+e.type+"'. Valid types are "+t.utils.objectKeys(this._typeToItem).join(","),new t.errors.ConfigurationError(r);return"component"!==e.type||n instanceof t.items.Stack||!n||!0===this.isSubWindow&&n instanceof t.items.Root||(e={type:"stack",width:e.width,height:e.height,content:[e]}),new this._typeToItem[e.type](this,e,n)},createPopout:function(e,n,r,o){var i,l,a,u,s,c,d=e,f=e instanceof t.items.AbstractContentItem,p=this;if(r=r||null,f){for(d=this.toConfig(e).content,r=t.utils.getUniqueId(),u=e.parent,s=e;1===u.contentItems.length&&!u.isRoot;)u=u.parent,s=s.parent;u.addId(r),isNaN(o)&&(o=t.utils.indexOf(s,u.contentItems))}else d instanceof Array||(d=[d]);return!n&&f&&(i=window.screenX||window.screenLeft,l=window.screenY||window.screenTop,n={left:i+(a=e.element.offset()).left,top:l+a.top,width:e.element.width(),height:e.element.height()}),n||f||(n={left:window.screenX||window.screenLeft+20,top:window.screenY||window.screenTop+20,width:500,height:309}),f&&e.remove(),(c=new t.controls.BrowserPopout(d,n,r,o,this)).on("initialised",(function(){p.emit("windowOpened",c)})),c.on("closed",(function(){p._$reconcilePopoutWindows()})),this.openPopouts.push(c),c},createDragSource:function(e,r,o){this.config.settings.constrainDragToContainer=!1;var i=new t.controls.DragSource(n(e),r,this,o);return this._dragSources.push(i),i},selectItem:function(e,n){if(!0!==this.config.settings.selectionEnabled)throw new Error("Please set selectionEnabled to true to use this feature");e!==this.selectedItem&&(null!==this.selectedItem&&this.selectedItem.deselect(),e&&!0!==n&&e.select(),this.selectedItem=e,this.emit("selectionChanged",e))},_$maximiseItem:function(e){null!==this._maximizedItem&&this._$minimizeItem(this._maximizedItem),this._maximizedItem=e,this._maximizedItem.addId("__glMaximised"),e.element.addClass("lm_maximised"),e.element.after(this._maximizePlaceholder),this.root.element.prepend(e.element),e.element.width(this.container.width()),e.element.height(this.container.height()),e.callDownwards("setSize"),this._maximizedItem.emit("maximized"),this.emit("stateChanged")},_$minimiseItem:function(e){e.element.removeClass("lm_maximised"),e.removeId("__glMaximised"),this._maximizePlaceholder.after(e.element),this._maximizePlaceholder.remove(),e.parent.callDownwards("setSize"),this._maximizedItem=null,e.emit("minimized"),this.emit("stateChanged")},_$closeWindow:function(){window.setTimeout((function(){window.close()}),1)},_$getArea:function(e,n){var t,r,o=1/0,i=null;for(t=0;t<this._itemAreas.length;t++)e>(r=this._itemAreas[t]).x1&&e<r.x2&&n>r.y1&&n<r.y2&&o>r.surface&&(o=r.surface,i=r);return i},_$createRootItemAreas:function(){var e={y2:0,x2:0,y1:"y2",x1:"x2"};for(var n in e){var t=this.root._$getArea();t.side=n,t[n]=e[n]?t[e[n]]-50:"y2"===n?50+this.root.element.offset().top:50,t.surface=(t.x2-t.x1)*(t.y2-t.y1),this._itemAreas.push(t)}},_$calculateItemAreas:function(){var e,n,r=this._getAllContentItems();if(this._itemAreas=[],1!==r.length){for(this._$createRootItemAreas(),e=0;e<r.length;e++)if(r[e].isStack&&null!==(n=r[e]._$getArea()))if(n instanceof Array)this._itemAreas=this._itemAreas.concat(n);else{this._itemAreas.push(n);var o={};t.utils.copy(o,n),t.utils.copy(o,n.contentItem._contentAreaDimensions.header.highlightArea),o.surface=(o.x2-o.x1)*(o.y2-o.y1),this._itemAreas.push(o)}"workspace"===this.config.settings.mode&&(this._itemAreas=[this._itemAreas[this._itemAreas.length-1]])}else this._itemAreas.push(this.root._$getArea())},_$normalizeContentItem:function(e,r){if(!e)throw new Error("No content item defined");if(t.utils.isFunction(e)&&(e=e()),e instanceof t.items.AbstractContentItem)return e;if(n.isPlainObject(e)&&e.type){var o=this.createContentItem(e,r);return o.callDownwards("_$init"),o}throw new Error("Invalid contentItem")},_$reconcilePopoutWindows:function(){var e,n=[];for(e=0;e<this.openPopouts.length;e++)!1===this.openPopouts[e].getWindow().closed?n.push(this.openPopouts[e]):this.emit("windowClosed",this.openPopouts[e]);this.openPopouts.length!==n.length&&(this.emit("stateChanged"),this.openPopouts=n)},_getAllContentItems:function(){var e=[];return function n(t){if(e.push(t),t.contentItems instanceof Array)for(var r=0;r<t.contentItems.length;r++)n(t.contentItems[r])}(this.root),e},_bindEvents:function(){this._isFullPage&&n(window).resize(this._resizeFunction),n(window).on("unload beforeunload",this._unloadFunction)},_onResize:function(){clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout(t.utils.fnBind(this.updateSize,this),100)},_createConfig:function(e){var r=t.utils.getQueryStringParam("gl-window");r&&(this.isSubWindow=!0,e=localStorage.getItem(r),e=JSON.parse(e),e=(new t.utils.ConfigMinifier).unminifyConfig(e),localStorage.removeItem(r));return function e(n){for(var t in n)"props"!==t&&"object"==typeof n[t]?e(n[t]):"type"===t&&"react-component"===n[t]&&(n.type="component",n.componentName="lm-react-component")}(e=n.extend(!0,{},t.config.defaultConfig,e)),!1===e.settings.hasHeaders&&(e.dimensions.headerHeight=0),e},_adjustToWindowMode:function(){var e=n('<div class="lm_popin" title="'+this.config.labels.popin+'"><div class="lm_icon"></div><div class="lm_bg"></div></div>');e.click(t.utils.fnBind((function(){this.emit("popIn")}),this)),document.title=t.utils.stripTags(this.config.content[0].title),n("head").append(n("body link, body style, template, .gl_keep")),this.container=n("body").html("").css("visibility","visible").append(e),document.body.offsetHeight,window.__glInstance=this},_createSubWindows:function(){var e,n;for(e=0;e<this.config.openPopouts.length;e++)n=this.config.openPopouts[e],this.createPopout(n.content,n.dimensions,n.parentId,n.indexInParent)},_setContainer:function(){var e=n(this.container||"body");if(0===e.length)throw new Error("GoldenLayout container not found");if(e.length>1)throw new Error("GoldenLayout more than one container element specified");e[0]===document.body&&(this._isFullPage=!0,n("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"})),this.container=e},_create:function(e){var n;if(!(e.content instanceof Array))throw n=void 0===e.content?"Missing setting 'content' on top level of configuration":"Configuration parameter 'content' must be an array",new t.errors.ConfigurationError(n,e);if(e.content.length>1)throw n="Top level content can't contain more then one element.",new t.errors.ConfigurationError(n,e);this.root=new t.items.Root(this,{content:e.content},this.container),this.root.callDownwards("_$init"),"__glMaximised"===e.maximizedItemId&&this.root.getItemsById(e.maximizedItemId)[0].toggleMaximise()},_onUnload:function(){if(!0===this.config.settings.closePopoutsOnUnload)for(var e=0;e<this.openPopouts.length;e++)this.openPopouts[e].close()},_adjustColumnsResponsive:function(){if(this._useResponsiveLayout()&&!this._updatingColumnsResponsive&&this.config.dimensions&&this.config.dimensions.minItemWidth&&0!==this.root.contentItems.length&&this.root.contentItems[0].isRow){this._firstLoad=!1;var e=this.root.contentItems[0].contentItems.length;if(!(e<=1)){var n=this.config.dimensions.minItemWidth;if(!(e*n<=this.width)&&this.container.is(":visible")){this._updatingColumnsResponsive=!0;for(var t=e-Math.max(Math.floor(this.width/n),1),r=this.root.contentItems[0],o=this._findAllStackContainers()[0],i=0;i<t;i++){var l=r.contentItems[r.contentItems.length-1];this._addChildContentItemsToContainer(o,l)}this._updatingColumnsResponsive=!1}}}else this._firstLoad=!1},_useResponsiveLayout:function(){return this.config.settings&&("always"==this.config.settings.responsiveMode||"onload"==this.config.settings.responsiveMode&&this._firstLoad)},_addChildContentItemsToContainer:function(e,n){"stack"===n.type?n.contentItems.forEach((function(t){e.addChild(t),n.removeChild(t,!0)})):n.contentItems.forEach(t.utils.fnBind((function(n){this._addChildContentItemsToContainer(e,n)}),this))},_findAllStackContainers:function(){var e=[];return this._findAllStackContainersRecursive(e,this.root),e},_findAllStackContainersRecursive:function(e,n){n.contentItems.forEach(t.utils.fnBind((function(n){"stack"==n.type?e.push(n):n.isComponent||this._findAllStackContainersRecursive(e,n)}),this))}}),t.LayoutManager.default=t.LayoutManager,e.exports=t.LayoutManager,window.GoldenLayout=t.LayoutManager,t.config.defaultConfig={openPopouts:[],settings:{hasHeaders:!0,constrainDragToContainer:!0,reorderEnabled:!0,selectionEnabled:!1,popoutWholeStack:!1,blockedPopoutsThrowError:!0,closePopoutsOnUnload:!0,showMinimizeIcon:!1,showPopoutIcon:!0,showMaximizeIcon:!0,showCloseIcon:!0,responsiveMode:"always",tabOverlapAllowance:0,reorderOnTabMenuClick:!0,tabControlOffset:10,mode:"default"},dimensions:{borderWidth:5,borderGrabWidth:15,minItemHeight:10,minItemWidth:10,headerHeight:20,dragProxyWidth:500,dragProxyHeight:500},labels:{close:"close",maximize:"maximize",restore:"restore",minimize:"minimize",popout:"eject",popin:"pop in",tabDropdown:"additional tabs"},workspacesOptions:{}},t.config.itemDefaultConfig={isClosable:!0,reorderEnabled:!0,title:"",workspacesConfig:{}},t.container.ItemContainer=function(e,r,o){t.utils.EventEmitter.call(this),this.width=null,this.height=null,this.title=e.componentName,this.parent=r,this.layoutManager=o,this.isHidden=!1,this._config=e,this._element=n(['<div class="lm_item_container">','<div class="lm_content"></div>',"</div>"].join("")),this._contentElement=this._element.find(".lm_content")},t.utils.copy(t.container.ItemContainer.prototype,{getElement:function(){return this._contentElement},hide:function(){this.emit("hide"),this.isHidden=!0,this._element.hide()},show:function(){this.emit("show"),this.isHidden=!1,this._element.show(),0==this.height&&0==this.width||this.emit("shown")},setSize:function(e,n){for(var t,r,o,i,l=this.parent,a=this;!l.isColumn&&!l.isRow;)if(a=l,(l=l.parent).isRoot)return!1;for(t=("height"==(r=l.isColumn?"height":"width")?n:e)/(this[r]*(1/(a.config[r]/100)))*100,o=(a.config[r]-t)/(l.contentItems.length-1),i=0;i<l.contentItems.length;i++)l.contentItems[i]===a?l.contentItems[i].config[r]=t:l.contentItems[i].config[r]+=o;return l.callDownwards("setSize"),!0},close:function(){this._config.isClosable&&(this.emit("close"),this.parent.close())},getState:function(){return this._config.componentState},extendState:function(e){this.setState(n.extend(!0,this.getState(),e))},setState:function(e){this._config.componentState=e,this.parent.emitBubblingEvent("stateChanged")},setTitle:function(e){this.parent.setTitle(e)},_$setSize:function(e,n){if(e!==this.width||n!==this.height){this.width=e,this.height=n;var t=this._contentElement[0],r=t.offsetWidth-t.clientWidth,o=t.offsetHeight-t.clientHeight;this._contentElement.width(this.width-r).height(this.height-o),this.emit("resize")}}}),t.controls.BrowserPopout=function(e,n,r,o,i){t.utils.EventEmitter.call(this),this.isInitialised=!1,this._config=e,this._dimensions=n,this._parentId=r,this._indexInParent=o,this._layoutManager=i,this._popoutWindow=null,this._id=null,this._createWindow()},t.utils.copy(t.controls.BrowserPopout.prototype,{toConfig:function(){if(!1===this.isInitialised)throw new Error("Can't create config, layout not yet initialised");return{dimensions:{width:this.getGlInstance().width,height:this.getGlInstance().height,left:this._popoutWindow.screenX||this._popoutWindow.screenLeft,top:this._popoutWindow.screenY||this._popoutWindow.screenTop},content:this.getGlInstance().toConfig().content,parentId:this._parentId,indexInParent:this._indexInParent}},getGlInstance:function(){return this._popoutWindow.__glInstance},getWindow:function(){return this._popoutWindow},close:function(){if(this.getGlInstance())this.getGlInstance()._$closeWindow();else try{this.getWindow().close()}catch(e){}},popIn:function(){var e,t;this._indexInParent,this._parentId&&(e=n.extend(!0,{},this.getGlInstance().toConfig()).content[0],(t=this._layoutManager.root.getItemsById(this._parentId)[0])||(t=this._layoutManager.root.contentItems.length>0?this._layoutManager.root.contentItems[0]:this._layoutManager.root)),t.addChild(e,this._indexInParent),this.close()},_createWindow:function(){var e,r=this._createUrl(),o=Math.floor(1e6*Math.random()).toString(36),i=this._serializeWindowOptions({width:this._dimensions.width,height:this._dimensions.height,innerWidth:this._dimensions.width,innerHeight:this._dimensions.height,menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"});if(this._popoutWindow=window.open(r,o,i),this._popoutWindow)n(this._popoutWindow).on("load",t.utils.fnBind(this._positionWindow,this)).on("unload beforeunload",t.utils.fnBind(this._onClose,this)),e=setInterval(t.utils.fnBind((function(){this._popoutWindow.__glInstance&&this._popoutWindow.__glInstance.isInitialised&&(this._onInitialised(),clearInterval(e))}),this),10);else if(!0===this._layoutManager.config.settings.blockedPopoutsThrowError){var l=new Error("Popout blocked");throw l.type="popoutBlocked",l}},_serializeWindowOptions:function(e){var n,t=[];for(n in e)t.push(n+"="+e[n]);return t.join(",")},_createUrl:function(){var e,n={content:this._config},r="gl-window-config-"+t.utils.getUniqueId();n=(new t.utils.ConfigMinifier).minifyConfig(n);try{localStorage.setItem(r,JSON.stringify(n))}catch(e){throw new Error("Error while writing to localStorage "+e.toString())}return 1===(e=document.location.href.split("?")).length?e[0]+"?gl-window="+r:document.location.href+"&gl-window="+r},_positionWindow:function(){this._popoutWindow.moveTo(this._dimensions.left,this._dimensions.top),this._popoutWindow.focus()},_onInitialised:function(){this.isInitialised=!0,this.getGlInstance().on("popIn",this.popIn,this),this.emit("initialised")},_onClose:function(){setTimeout(t.utils.fnBind(this.emit,this,["closed"]),50)}}),t.controls.DragProxy=function(e,r,o,i,l,a){t.utils.EventEmitter.call(this),this._dragListener=o,this._layoutManager=i,this._contentItem=l,this._originalParent=a,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",this._onDrag,this),this._dragListener.on("dragStop",this._onDrop,this),this.element=n(t.controls.DragProxy._template),a&&a._side&&(this._sided=a._sided,this.element.addClass("lm_"+a._side),["right","bottom"].indexOf(a._side)>=0&&this.element.find(".lm_content").after(this.element.find(".lm_header"))),this.element.css({left:e,top:r}),this.element.find(".lm_tab").attr("title",t.utils.stripTags(this._contentItem.config.title)),this.element.find(".lm_title").html(this._contentItem.config.title),this.childElementContainer=this.element.find(".lm_content"),this.childElementContainer.append(l.element),this._originalParent&&this._originalParent.layoutManager.config&&this._originalParent.layoutManager.config.settings&&this._originalParent.layoutManager.config.settings.disableDragProxy&&this.element.find(".lm_content").css("display","none"),this._updateTree(),this._layoutManager._$calculateItemAreas(),this._setDimensions(),n(document.body).append(this.element);var u=this._layoutManager.container.offset();this._minX=u.left,this._minY=u.top,this._maxX=this._layoutManager.container.width()+this._minX,this._maxY=this._layoutManager.container.height()+this._minY,this._width=this._layoutManager.config.dimensions.dragProxyWidth,this._height=this._layoutManager.config.dimensions.dragProxyHeight,this._setDropPosition(e,r)},t.controls.DragProxy._template='<div class="lm_dragProxy"><div class="lm_header"><ul class="lm_tabs"><li class="lm_tab lm_active"><i class="lm_left"></i><span class="lm_title"></span><i class="lm_right"></i></li></ul></div><div class="lm_content"></div></div>',t.utils.copy(t.controls.DragProxy.prototype,{_onDrag:function(e,n,t){var r=(t=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0]:t).pageX,o=t.pageY;(r>this._minX&&r<this._maxX&&o>this._minY&&o<this._maxY||!0!==this._layoutManager.config.settings.constrainDragToContainer)&&this._setDropPosition(r,o)},_setDropPosition:function(e,n){this.element.css({left:e,top:n}),this._area=this._layoutManager._$getArea(e,n),null!==this._area&&(this._lastValidArea=this._area,this._area.contentItem._$highlightDropZone(e,n,this._area))},_onDrop:function(e){this._layoutManager.dropTargetIndicator.hide(),this.element.find(".lm_content").css("display",""),null===this._area||e&&e.canceled?null===this._lastValidArea||e&&e.canceled?!this._originalParent||e&&e.canceled?this._contentItem._$destroy():this._originalParent.addChild(this._contentItem):this._lastValidArea.contentItem._$onDrop(this._contentItem,this._lastValidArea):(this._area.contentItem._$onDrop(this._contentItem,this._area),this._originalParent&&this._area.contentItem!==this._originalParent&&this._layoutManager.emit("parentChanged",this._contentItem,this._originalParent)),this.element.remove();var n=this._layoutManager._dragProxies.indexOf(this);n>-1&&this._layoutManager._dragProxies.splice(n,1),this._layoutManager.emit("itemDropped",this._contentItem)},_updateTree:function(){this._contentItem.parent&&this._contentItem.parent.removeChild(this._contentItem,!0),this._contentItem._$setParent(this)},_setDimensions:function(){this._contentItem.callDownwards("_$show")}}),t.controls.DragSource=function(e,n,t,r){this._element=e,this._itemConfig=n,this._layoutManager=t,this._dragListener=null,this._createDragListener(r)},t.utils.copy(t.controls.DragSource.prototype,{_createDragListener:function(e){null!==this._dragListener&&this._dragListener.destroy(),this._dragListener=e||new t.utils.DragListener(this._element),"function"==typeof this._dragListener.on&&(this._dragListener.on("dragStart",this._onDragStart,this),this._dragListener.on("dragStop",this._createDragListener,this))},_onDragStart:function(e,r){var o=this._itemConfig;t.utils.isFunction(o)&&(o=o());var i=this._layoutManager._$normalizeContentItem(n.extend(!0,{},o)),l=new t.controls.DragProxy(e,r,this._dragListener,this._layoutManager,i,null);this._layoutManager.transitionIndicator.transitionElements(this._element,l.element)}}),t.controls.DropTargetIndicator=function(){this.element=n(t.controls.DropTargetIndicator._template),n(document.body).append(this.element)},t.controls.DropTargetIndicator._template='<div class="lm_dropTargetIndicator"><div class="lm_inner"><span></span><span></span><span></span></div></div>',t.utils.copy(t.controls.DropTargetIndicator.prototype,{destroy:function(){this.element.remove()},highlight:function(e,n,t,r){this.highlightArea({x1:e,y1:n,x2:t,y2:r})},highlightArea:function(e){this.element.css({left:e.x1,top:e.y1,width:e.x2-e.x1,height:e.y2-e.y1}).show()},hide:function(){this.element.hide()}}),t.controls.Header=function(e,r){if(t.utils.EventEmitter.call(this),this.layoutManager=e,this.element=n(t.controls.Header._template),!0===this.layoutManager.config.settings.selectionEnabled&&(this.element.addClass("lm_selectable"),this.element.on("click touchstart",t.utils.fnBind(this._onHeaderClick,this))),"workspace"===this.layoutManager.config.settings.mode&&this.element.addClass("header_double"),"workspace"===this.layoutManager.config.settings.mode&&this.layoutManager._componentFactory){var o=this.element.children(".lm_controls")[0],i=this.element.children(".lm_workspace_controls")[0],l=this.element.children(".lm_logo")[0];this.layoutManager._componentFactory.createLogo&&this.layoutManager._componentFactory.createLogo({domNode:l}),this.layoutManager._componentFactory.createAddWorkspace&&this.layoutManager._componentFactory.createAddWorkspace({domNode:i}),this.layoutManager._componentFactory.createSystemButtons&&this.layoutManager._componentFactory.createSystemButtons({domNode:o})}this.tabsContainer=this.element.find(".lm_tabs"),this.tabDropdownContainer=this.element.find(".lm_tabdropdown_list"),this.tabDropdownContainer.hide(),this.controlsContainer=this.element.find(".lm_controls"),this.workspaceControlsContainer="workspace"===this.layoutManager.config.settings.mode?this.element.find(".lm_workspace_controls"):void 0,this.tabsControlsContainer="workspace"!==this.layoutManager.config.settings.mode?this.element.find(".lm_tabs_controls"):void 0,this.parent=r,this.parent.on("resize",this._updateTabSizesWithoutDropdown,this),this.tabs=[],this.activeContentItem=null,this.closeButton=null,this.tabDropdownButton=null,this.hideAdditionalTabsDropdown=t.utils.fnBind(this._hideAdditionalTabsDropdown,this),n(document).mouseup(this.hideAdditionalTabsDropdown),this._lastVisibleTabIndex=-1,this._tabControlOffset=this.layoutManager.config.settings.tabControlOffset,"workspace"===this.layoutManager.config.settings.mode&&this.layoutManager._componentFactory&&this.layoutManager._componentFactory.createSystemButtons||this._createControls()},t.controls.Header._template=['<div class="lm_header">','<div class="lm_logo"></div>','<ul class="lm_tabs"></ul>','<ul class="lm_workspace_controls"></ul>','<ul class="lm_tabs_controls"></ul>','<div class="move_area"></div>','<ul class="lm_controls"></ul>','<ul class="lm_tabdropdown_list"></ul>',"</div>"].join(""),t.utils.copy(t.controls.Header.prototype,{createTab:function(e,n){var r,o;for(o=0;o<this.tabs.length;o++)if(this.tabs[o].contentItem===e)return;if(r=new t.controls.Tab(this,e),0===this.tabs.length)return this.tabs.push(r),void this.tabsContainer.append(r.element);void 0===n&&(n=this.tabs.length),n>0?this.tabs[n-1].element.after(r.element):this.tabs[0].element.before(r.element),this.tabs.splice(n,0,r),this._updateTabSizesWithoutDropdown()},removeTab:function(e){for(var n=0;n<this.tabs.length;n++)if(this.tabs[n].contentItem===e)return this.tabs[n]._$destroy(),void this.tabs.splice(n,1);throw new Error("contentItem is not controlled by this header")},setActiveContentItem:function(e){var n,t,r,o;for(n=0;n<this.tabs.length;n++)r=this.tabs[n].contentItem===e,this.tabs[n].setActive(r),!0===r&&(this.activeContentItem=e,this.parent.config.activeItemIndex=n);if(this.layoutManager.config.settings.reorderOnTabMenuClick&&-1!==this._lastVisibleTabIndex&&this.parent.config.activeItemIndex>this._lastVisibleTabIndex){for(o=this.tabs[this.parent.config.activeItemIndex],t=this.parent.config.activeItemIndex;t>0;t--)this.tabs[t]=this.tabs[t-1];this.tabs[0]=o,this.parent.config.activeItemIndex=0}this._updateTabSizesWithoutDropdown(),this.parent.emitBubblingEvent("stateChanged")},position:function(e){var n=this.parent._header.show;return n&&!this.parent._side&&(n="top"),void 0!==e&&this.parent._header.show!=e&&(this.parent._header.show=e,this.parent._setupHeaderPosition()),n},_$setClosable:function(e){return!(!this.closeButton||!this._isClosable()||(this.closeButton.element[e?"show":"hide"](),0))},_$destroy:function(){this.emit("destroy",this);for(var e=0;e<this.tabs.length;e++)this.tabs[e]._$destroy();n(document).off("mouseup",this.hideAdditionalTabsDropdown),this.element.remove()},_getHeaderSetting:function(e){if(e in this.parent._header)return this.parent._header[e]},_createControls:function(){var e,n,r,o,i,l,a,u,s;s=t.utils.fnBind(this._showAdditionalTabsDropdown,this),u=this.layoutManager.config.labels.tabDropdown,this.tabDropdownButton=new t.controls.HeaderButton(this,u,"lm_tabdropdown",s),this.tabDropdownButton.element.hide(),this._getHeaderSetting("popout")&&(n=t.utils.fnBind(this._onPopoutClick,this),r=this._getHeaderSetting("popout"),new t.controls.HeaderButton(this,r,"lm_popout",n)),this._getHeaderSetting("minimize")&&(minimizeLabel=this._getHeaderSetting("minimize"),minimizeButton=new t.controls.HeaderButton(this,minimizeLabel,"lm_minimise",void 0)),this._getHeaderSetting("maximize")&&("workspace"!==this.layoutManager.config.settings.mode&&(l=t.utils.fnBind(this.parent.toggleMaximise,this.parent)),o=this._getHeaderSetting("maximize"),a=new t.controls.HeaderButton(this,o,"lm_maximise",l),i=this._getHeaderSetting("restore"),this.parent.on("maximized",(function(){a.element.attr("title",i)})),this.parent.on("minimized",(function(){a.element.attr("title",o)}))),this._isClosable()&&("workspace"!==this.layoutManager.config.settings.mode&&(e=t.utils.fnBind(this.parent.remove,this.parent)),r=this._getHeaderSetting("close"),this.closeButton=new t.controls.HeaderButton(this,r,"lm_close",e))},_showAdditionalTabsDropdown:function(){this.tabDropdownContainer.show()},_hideAdditionalTabsDropdown:function(e){this.tabDropdownContainer.hide()},_isClosable:function(){return this.parent.config.isClosable&&this.layoutManager.config.settings.showCloseIcon},_onPopoutClick:function(){this.parent.emit("popoutRequested")},_onHeaderClick:function(e){e.target===this.element[0]&&this.parent.select()},_updateTabSizes:function(e){if(0!==this.tabs.length){this.tabDropdownButton.element.toggle(!0===e),this.element.css(this.parent._sided?"height":"width","");var n,t,r,o,i=this.element.outerWidth()-this.controlsContainer.outerWidth()-this._tabControlOffset,l=0,a=0,u=0,s=this.layoutManager.config.settings.tabOverlapAllowance,c=!1,d=this.activeContentItem?this.tabs.indexOf(this.activeContentItem.tab):0,f=this.tabs[d];for(this.parent._sided&&(i=this.element.outerHeight()-this.controlsContainer.outerHeight()-this._tabControlOffset),this._lastVisibleTabIndex=-1,t=0;t<this.tabs.length;t++)if(n=this.tabs[t].element,this.tabsContainer.append(n),l+=n.outerWidth()+parseInt(n.css("margin-right"),10),(a=d<=t?l:l+f.element.outerWidth()+parseInt(f.element.css("margin-right"),10))>i){if(c)t===d&&(n.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(n));else if((u=d>0&&d<=t?(a-i)/(t-1):(a-i)/t)<s){for(r=0;r<=t;r++)o=r!==d&&0!==r?"-"+u+"px":"",this.tabs[r].element.css({"z-index":t-r,"margin-left":o});this._lastVisibleTabIndex=t,this.tabsContainer.append(n)}else c=!0;if(c&&t!==d){if(!e)return void this._updateTabSizes(!0);n.css({"z-index":"auto","margin-left":""}),this.tabDropdownContainer.append(n)}}else this._lastVisibleTabIndex=t,n.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(n)}},_updateTabSizesWithoutDropdown:function(e){if(0!==this.tabs.length){this.element.css(this.parent._sided?"height":"width",""),this.element.outerWidth(),this.controlsContainer.outerWidth(),this._tabControlOffset;var n,t,r=(this.layoutManager.config.settings.tabOverlapAllowance,this.activeContentItem?this.tabs.indexOf(this.activeContentItem.tab):0),o=this.tabs[r];for(this.parent._sided&&(this.element.outerHeight(),this.controlsContainer.outerHeight(),this._tabControlOffset),t=0;t<this.tabs.length;t++)n=this.tabs[t].element,this.tabsContainer.append(n),n.outerWidth(),parseInt(n.css("margin-right"),10),r<=t||(o.element.outerWidth(),parseInt(o.element.css("margin-right"),10)),n.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(n)}}}),t.controls.HeaderButton=function(e,t,r,o){this._header=e,this.element=n('<li class="'+r+'" title="'+t+'"></li>'),this._header.on("destroy",this._$destroy,this),this._action=o,this.element.on("click touchstart",this._action),this._header.controlsContainer.append(this.element)},t.utils.copy(t.controls.HeaderButton.prototype,{_$destroy:function(){this.element.off(),this.element.remove()}}),t.controls.Splitter=function(e,n,r){this._isVertical=e,this._size=n,this._grabSize=r<n?n:r,this.element=this._createElement(),this._dragListener=new t.utils.DragListener(this.element)},t.utils.copy(t.controls.Splitter.prototype,{on:function(e,n,t){this._dragListener.on(e,n,t)},_$destroy:function(){this.element.remove()},_createElement:function(){var e=n('<div class="lm_drag_handle"></div>'),t=n('<div class="lm_splitter"></div>');t.append(e);var r=this._grabSize-this._size,o=r/2;return this._isVertical?(e.css("top",-o),e.css("height",this._size+r),t.addClass("lm_vertical"),t.height(this._size)):(e.css("left",-o),e.css("width",this._size+r),t.addClass("lm_horizontal"),t.width(this._size)),t}}),t.controls.Tab=function(e,r){this.header=e,this.contentItem=r,this.element=n(t.controls.Tab._template),this.titleElement=this.element.find(".lm_title"),this.closeElement=this.element.find(".lm_close_tab"),this.closeElement[r.config.isClosable?"show":"hide"](),this.isActive=!1,this.setTitle(r.config.title),this.contentItem.on("titleChanged",this.setTitle,this),this._layoutManager=this.contentItem.layoutManager,!0===this._layoutManager.config.settings.reorderEnabled&&!0===r.config.reorderEnabled&&(this._dragListener=new t.utils.DragListener(this.element),this._dragListener.on("dragStart",this._onDragStart,this),this.contentItem.on("destroy",this._dragListener.destroy,this._dragListener)),this._onTabClickFn=t.utils.fnBind(this._onTabClick,this),this._onCloseClickFn=t.utils.fnBind(this._onCloseClick,this),"workspace"===this._layoutManager.config.settings.mode&&r.config.noTabHeader&&this.element.hide(),this.element.on("mousedown touchstart",this._onTabClickFn),this.contentItem.config.isClosable?(this.closeElement.on("click touchstart",this._onCloseClickFn),this.closeElement.on("mousedown",this._onCloseMousedown)):this.closeElement.remove(),this.contentItem.tab=this,this.contentItem.emit("tab",this),this.contentItem.layoutManager.emit("tabCreated",this),this.contentItem.isComponent&&(this.contentItem.container.tab=this,this.contentItem.container.emit("tab",this))},t.controls.Tab._template='<li class="lm_tab"><i class="lm_left"></i><span class="lm_title"></span><div class="lm_close_tab"></div><i class="lm_right"></i></li>',t.utils.copy(t.controls.Tab.prototype,{setTitle:function(e){this.element.attr("title",t.utils.stripTags(e)),this.titleElement.html(e)},onCloseClick:void 0,setActive:function(e){e!==this.isActive&&(this.isActive=e,e?this.element.addClass("lm_active"):this.element.removeClass("lm_active"))},_$destroy:function(){this.element.off("mousedown touchstart",this._onTabClickFn),this.closeElement.off("click touchstart",this._onCloseClickFn),this._dragListener&&(this.contentItem.off("destroy",this._dragListener.destroy,this._dragListener),this._dragListener.off("dragStart",this._onDragStart),this._dragListener=null),this.element.remove()},_onDragStart:function(e,n){!0===this.contentItem.parent.isMaximized&&this.contentItem.parent.toggleMaximise();var r="workspace"===this.contentItem.layoutManager.config.settings.mode,o=this.contentItem.parent.header.tabs.length<2,i=!this.contentItem.config.windowId&&this.contentItem.config.componentState&&!this.contentItem.config.componentState.windowId;if((!r||!o)&&(r||!i)){var l=new t.controls.DragProxy(e,n,this._dragListener,this._layoutManager,this.contentItem,this.header.parent);this._layoutManager._dragProxies.push(l)}},_onTabClick:function(e){if(0===e.button||"touchstart"===e.type){var n=this.header.parent.getActiveContentItem();this.contentItem!==n&&this.header.parent.setActiveContentItem(this.contentItem)}else 1===e.button&&this.contentItem.config.isClosable&&this._onCloseClick(e)},_onCloseClick:function(e){this.contentItem.layoutManager.emit("tabCloseRequested",this),this.onCloseClick&&this.onCloseClick(e)},_onCloseMousedown:function(e){e.stopPropagation()}}),t.controls.TransitionIndicator=function(){this._element=n('<div class="lm_transition_indicator"></div>'),n(document.body).append(this._element),this._toElement=null,this._fromDimensions=null,this._totalAnimationDuration=200,this._animationStartTime=null},t.utils.copy(t.controls.TransitionIndicator.prototype,{destroy:function(){this._element.remove()},transitionElements:function(e,n){},_nextAnimationFrame:function(){var e,n=this._measure(this._toElement),r=(t.utils.now()-this._animationStartTime)/this._totalAnimationDuration,o={};if(r>=1)this._element.hide();else{for(e in n.opacity=0,this._fromDimensions)o[e]=this._fromDimensions[e]+(n[e]-this._fromDimensions[e])*r;this._element.css(o),t.utils.animFrame(t.utils.fnBind(this._nextAnimationFrame,this))}},_measure:function(e){var n=e.offset();return{left:n.left,top:n.top,width:e.outerWidth(),height:e.outerHeight()}}}),t.errors.ConfigurationError=function(e,n){Error.call(this),this.name="Configuration Error",this.message=e,this.node=n},t.errors.ConfigurationError.prototype=new Error,t.items.AbstractContentItem=function(e,n,r){t.utils.EventEmitter.call(this),this.config=this._extendItemNode(n),this.type=n.type,this.contentItems=[],this.parent=r,this.isInitialised=!1,this.isMaximized=!1,this.isRoot=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.isVisible=!0,this.layoutManager=e,this._pendingEventPropagations={},this._throttledEvents=["stateChanged"],this.on(t.utils.EventEmitter.ALL_EVENT,this._propagateEvent,this),n.content&&this._createContentItems(n)},t.utils.copy(t.items.AbstractContentItem.prototype,{setSize:function(){throw new Error("Abstract Method")},callDownwards:function(e,n,t,r){var o;for(!0!==t&&!0!==r&&this[e].apply(this,n||[]),o=0;o<this.contentItems.length;o++)this.contentItems[o].callDownwards(e,n,t);!0===t&&!0!==r&&this[e].apply(this,n||[])},removeChild:function(e,n){var r=t.utils.indexOf(e,this.contentItems);if(-1===r)throw new Error("Can't remove child item. Unknown content item");!0!==n&&this.contentItems[r]._$destroy(),this.contentItems.splice(r,1),this.config.content.splice(r,1),this.contentItems.length>0?this.callDownwards("setSize"):this instanceof t.items.Root||!0!==this.config.isClosable||this.parent.removeChild(this)},addChild:function(e,n){void 0===n&&(n=this.contentItems.length),this.contentItems.splice(n,0,e),void 0===this.config.content&&(this.config.content=[]),this.config.content.splice(n,0,e.config),e.parent=this,!0===e.parent.isInitialised&&!1===e.isInitialised&&e._$init()},replaceChild:function(e,n,r){n=this.layoutManager._$normalizeContentItem(n);var o=t.utils.indexOf(e,this.contentItems),i=e.element[0].parentNode;if(-1===o)throw new Error("Can't replace child. oldChild is not child of this");i.replaceChild(n.element[0],e.element[0]);var l=e.isVisible;!0===r&&(e.parent=null,e._$destroy()),this.contentItems[o]=n,n.parent=this,this.isStack&&(this.header.tabs[o].contentItem=n),!0===n.parent.isInitialised&&!1===n.isInitialised&&n._$init(),l||n._$hide(),this.callDownwards("setSize")},remove:function(){this.parent.removeChild(this)},popout:function(){var e=this.layoutManager.createPopout(this);return this.emitBubblingEvent("stateChanged"),e},toggleMaximise:function(e){e&&e.preventDefault(),!0===this.isMaximized?this.layoutManager._$minimiseItem(this):this.layoutManager._$maximiseItem(this),this.isMaximized=!this.isMaximized,this.emitBubblingEvent("stateChanged")},select:function(){this.layoutManager.selectedItem!==this&&(this.layoutManager.selectItem(this,!0),this.element.addClass("lm_selected"))},deselect:function(){this.layoutManager.selectedItem===this&&(this.layoutManager.selectedItem=null,this.element.removeClass("lm_selected"))},setTitle:function(e){this.config.title=e,this.emit("titleChanged",e),this.emit("stateChanged")},hasId:function(e){return!!this.config.id&&("string"==typeof this.config.id?this.config.id===e:this.config.id instanceof Array?-1!==t.utils.indexOf(e,this.config.id):void 0)},addId:function(e){this.hasId(e)||(this.config.id?"string"==typeof this.config.id?this.config.id=[this.config.id,e]:this.config.id instanceof Array&&this.config.id.push(e):this.config.id=e)},removeId:function(e){if(!this.hasId(e))throw new Error("Id not found");if("string"==typeof this.config.id)delete this.config.id;else if(this.config.id instanceof Array){var n=t.utils.indexOf(e,this.config.id);this.config.id.splice(n,1)}},getItemsByFilter:function(e){var n=[];return function t(r){for(var o=0;o<r.contentItems.length;o++)!0===e(r.contentItems[o])&&n.push(r.contentItems[o]),t(r.contentItems[o])}(this),n},getItemsById:function(e){return this.getItemsByFilter((function(n){return n.config.id instanceof Array?-1!==t.utils.indexOf(e,n.config.id):n.config.id===e}))},getItemsByType:function(e){return this._$getItemsByProperty("type",e)},getComponentsByName:function(e){var n,t=this._$getItemsByProperty("componentName",e),r=[];for(n=0;n<t.length;n++)r.push(t[n].instance&&0!==Object.keys(t[n].instance).length?t[n].instance:t[n]);return r},_$getItemsByProperty:function(e,n){return this.getItemsByFilter((function(t){return t[e]===n}))},_$setParent:function(e){this.parent=e},_$highlightDropZone:function(e,n,t){this.layoutManager.dropTargetIndicator.highlightArea(t)},_$onDrop:function(e){this.addChild(e)},_$hide:function(){this._callOnActiveComponents("hide"),this.element.hide(),this.isVisible=!1,this.layoutManager.updateSize()},_$show:function(){this._callOnActiveComponents("show"),this.element.show(),this.isVisible=!0,this.layoutManager.updateSize()},_callOnActiveComponents:function(e){var n,t,r=this.getItemsByType("stack");for(t=0;t<r.length;t++)(n=r[t].getActiveContentItem())&&n.isComponent&&n.container[e]()},_$destroy:function(){this.emitBubblingEvent("beforeItemDestroyed"),this.callDownwards("_$destroy",[],!0,!0),this.element.remove(),this.emitBubblingEvent("itemDestroyed")},_$getArea:function(e){var n=(e=e||this.element).offset(),t=e.width(),r=e.height();return{x1:n.left,y1:n.top,x2:n.left+t,y2:n.top+r,surface:t*r,contentItem:this}},_$init:function(){var e;for(this.setSize(),e=0;e<this.contentItems.length;e++)this.childElementContainer.append(this.contentItems[e].element);this.isInitialised=!0,this.emitBubblingEvent("itemCreated"),this.emitBubblingEvent(this.type+"Created")},emitBubblingEvent:function(e){var n=new t.utils.BubblingEvent(e,this);this.emit(e,n)},_createContentItems:function(e){var n,r;if(!(e.content instanceof Array))throw new t.errors.ConfigurationError("content must be an Array",e);for(r=0;r<e.content.length;r++)n=this.layoutManager.createContentItem(e.content[r],this),this.contentItems.push(n)},_extendItemNode:function(e){for(var n in t.config.itemDefaultConfig)void 0===e[n]&&(e[n]=t.config.itemDefaultConfig[n]);return e},_propagateEvent:function(e,n){n instanceof t.utils.BubblingEvent&&!1===n.isPropagationStopped&&!0===this.isInitialised&&(!1===this.isRoot&&this.parent?this.parent.emit.apply(this.parent,Array.prototype.slice.call(arguments,0)):this._scheduleEventPropagationToLayoutManager(e,n))},_scheduleEventPropagationToLayoutManager:function(e,n){-1===t.utils.indexOf(e,this._throttledEvents)?this.layoutManager.emit(e,n.origin):!0!==this._pendingEventPropagations[e]&&(this._pendingEventPropagations[e]=!0,t.utils.animFrame(t.utils.fnBind(this._propagateEventToLayoutManager,this,[e,n])))},_propagateEventToLayoutManager:function(e,n){this._pendingEventPropagations[e]=!1,this.layoutManager.emit(e,n)}}),t.items.Component=function(e,r,o){t.items.AbstractContentItem.call(this,e,r,o);var i=e.getComponent(this.config.componentName),l=n.extend(!0,{},this.config.componentState||{});l.componentName=this.config.componentName,this.componentName=this.config.componentName,""===this.config.title&&(this.config.title=this.config.componentName),this.isComponent=!0,this.container=new t.container.ItemContainer(this.config,this,e),this.instance=new i(this.container,l),this.element=this.container._element},t.utils.extend(t.items.Component,t.items.AbstractContentItem),t.utils.copy(t.items.Component.prototype,{close:function(){this.parent.removeChild(this)},setSize:function(){this.element.is(":visible")&&(this.emit("size-changed",{width:this.element.width(),height:this.element.height()}),this.container._$setSize(this.element.width(),this.element.height()))},_$init:function(){t.items.AbstractContentItem.prototype._$init.call(this),this.container.emit("open")},_$hide:function(){this.container.hide(),t.items.AbstractContentItem.prototype._$hide.call(this)},_$show:function(){this.container.show(),t.items.AbstractContentItem.prototype._$show.call(this)},_$shown:function(){this.container.shown(),t.items.AbstractContentItem.prototype._$shown.call(this)},_$destroy:function(){this.container.emit("destroy",this),t.items.AbstractContentItem.prototype._$destroy.call(this)},_$getArea:function(){return null}}),t.items.Root=function(e,r,o){t.items.AbstractContentItem.call(this,e,r,null),this.isRoot=!0,this.type="root",this.element=n('<div class="lm_goldenlayout lm_item lm_root"></div>'),this.childElementContainer=this.element,this._containerElement=o,this._containerElement.append(this.element)},t.utils.extend(t.items.Root,t.items.AbstractContentItem),t.utils.copy(t.items.Root.prototype,{addChild:function(e){if(this.contentItems.length>0)throw new Error("Root node can only have a single child");e=this.layoutManager._$normalizeContentItem(e,this),this.childElementContainer.append(e.element),t.items.AbstractContentItem.prototype.addChild.call(this,e),this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(e,n){e=void 0===e?this._containerElement.width():e,n=void 0===n?this._containerElement.height():n,this.element.width(e),this.element.height(n),this.contentItems[0]&&(this.contentItems[0].element.width(e),this.contentItems[0].element.height(n))},_$highlightDropZone:function(e,n,r){this.layoutManager.tabDropPlaceholder.remove(),t.items.AbstractContentItem.prototype._$highlightDropZone.apply(this,arguments)},_$onDrop:function(e,n){var r;if(e.isComponent&&((r=this.layoutManager.createContentItem({type:"stack",header:e.config.header||{}},this))._$init(),r.addChild(e),e=r),this.contentItems.length){var o="x"==n.side[0]?"row":"column",i="x"==n.side[0]?"width":"height",l="2"==n.side[1],a=this.contentItems[0];if(!a instanceof t.items.RowOrColumn||a.type!=o){var u=this.layoutManager.createContentItem({type:o},this);this.replaceChild(a,u),u.addChild(e,l?0:void 0,!0),u.addChild(a,l?void 0:0,!0),a.config[i]=50,e.config[i]=50,u.callDownwards("setSize")}else{var s=a.contentItems[l?0:a.contentItems.length-1];a.addChild(e,l?0:void 0,!0),s.config[i]*=.5,e.config[i]=s.config[i],a.callDownwards("setSize")}}else this.addChild(e)}}),t.items.RowOrColumn=function(e,r,o,i){t.items.AbstractContentItem.call(this,r,o,i),this.isRow=!e,this.isColumn=e,this.element=n('<div class="lm_item lm_'+(e?"column":"row")+'"></div>'),this.childElementContainer=this.element,this._splitterSize=r.config.dimensions.borderWidth,this._splitterGrabSize=r.config.dimensions.borderGrabWidth,this._isColumn=e,this._dimension=e?"height":"width",this._splitter=[],this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null,this._layoutManager=r},t.utils.extend(t.items.RowOrColumn,t.items.AbstractContentItem),t.utils.copy(t.items.RowOrColumn.prototype,{addChild:function(e,n,r){var o,i,l,a;if(e=this.layoutManager._$normalizeContentItem(e,this),void 0===n&&(n=this.contentItems.length),this.contentItems.length>0?(a=this._createSplitter(Math.max(0,n-1)).element,n>0?(this.contentItems[n-1].element.after(a),a.after(e.element)):(this.contentItems[0].element.before(a),a.before(e.element))):this.childElementContainer.append(e.element),t.items.AbstractContentItem.prototype.addChild.call(this,e,n),o=1/this.contentItems.length*100,!0!==r){for(l=0;l<this.contentItems.length;l++)this.contentItems[l]===e?e.config[this._dimension]=o:(i=this.contentItems[l].config[this._dimension]*=(100-o)/100,this.contentItems[l].config[this._dimension]=i);this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")}else this.emitBubblingEvent("stateChanged")},removeChild:function(e,n){var r,o,i=e.config[this._dimension],l=t.utils.indexOf(e,this.contentItems),a=Math.max(l-1,0);if(-1===l)throw new Error("Can't remove child. ContentItem is not child of this Row or Column");for(this._splitter[a]&&(this._splitter[a]._$destroy(),this._splitter.splice(a,1)),r=0;r<this.contentItems.length;r++)this.contentItems[r]!==e&&(this.contentItems[r].config[this._dimension]+=i/(this.contentItems.length-1));t.items.AbstractContentItem.prototype.removeChild.call(this,e,n),1===this.contentItems.length&&!0===this.config.isClosable?(o=this.contentItems[0],this.contentItems=[],this.parent.replaceChild(this,o,!0)):(this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged"))},replaceChild:function(e,n){var r=e.config[this._dimension];n.config=n.config||{},n.config[this._dimension]=r,t.items.AbstractContentItem.prototype.replaceChild.call(this,e,n),this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(){this.contentItems.length>0&&(this._calculateRelativeSizes(),this._setAbsoluteSizes()),this.emitBubblingEvent("stateChanged"),this.emit("resize")},_$init:function(){var e;if(!0!==this.isInitialised)for(t.items.AbstractContentItem.prototype._$init.call(this),e=0;e<this.contentItems.length-1;e++)this.contentItems[e].element.after(this._createSplitter(e).element)},_setAbsoluteSizes:function(){var e,n=this._calculateAbsoluteSizes();for(e=0;e<this.contentItems.length;e++)n.additionalPixel-e>0&&n.itemSizes[e]++,this._isColumn?(this.contentItems[e].element.width(n.totalWidth),this.contentItems[e].element.height(n.itemSizes[e])):(this.contentItems[e].element.width(n.itemSizes[e]),this.contentItems[e].element.height(n.totalHeight))},_calculateAbsoluteSizes:function(){var e,n,t=(this.contentItems.length-1)*this._splitterSize,r=this.element.width(),o=this.element.height(),i=0,l=[];for(this._isColumn?o-=t:r-=t,e=0;e<this.contentItems.length;e++)i+=n=this._isColumn?Math.floor(o*(this.contentItems[e].config.height/100)):Math.floor(r*(this.contentItems[e].config.width/100)),l.push(n);return{itemSizes:l,additionalPixel:Math.floor((this._isColumn?o:r)-i),totalWidth:r,totalHeight:o}},_calculateRelativeSizes:function(){var e,n=0,t=[],r=this._isColumn?"height":"width";for(e=0;e<this.contentItems.length;e++)void 0!==this.contentItems[e].config[r]?n+=this.contentItems[e].config[r]:t.push(this.contentItems[e]);if(100!==Math.round(n))if(Math.round(n)<100&&t.length>0){for(e=0;e<t.length;e++)t[e].config[r]=(100-n)/t.length;this._respectMinItemWidth()}else{if(Math.round(n)>100)for(e=0;e<t.length;e++)t[e].config[r]=50,n+=50;for(e=0;e<this.contentItems.length;e++)this.contentItems[e].config[r]=this.contentItems[e].config[r]/n*100;this._respectMinItemWidth()}else this._respectMinItemWidth()},_respectMinItemWidth:function(){var e,n,t,r,o=this.layoutManager.config.dimensions&&this.layoutManager.config.dimensions.minItemWidth||0,i=[],l=0,a=0,u=0,s=0,c=[];if(!(this._isColumn||!o||this.contentItems.length<=1)){e=this._calculateAbsoluteSizes();for(var d=0;d<this.contentItems.length;d++)this.contentItems[d],(s=e.itemSizes[d])<o?(a+=o-s,r={width:o}):(l+=s-o,r={width:s},i.push(r)),c.push(r);if(!(0===a||a>l)){for(n=a/l,u=a,d=0;d<i.length;d++)r=i[d],u-=t=Math.round((r.width-o)*n),r.width-=t;for(0!==u&&(c[c.length-1].width-=u),d=0;d<this.contentItems.length;d++)this.contentItems[d].config.width=c[d].width/e.totalWidth*100}}},_createSplitter:function(e){var n;return(n=new t.controls.Splitter(this._isColumn,this._splitterSize,this._splitterGrabSize)).on("drag",t.utils.fnBind(this._onSplitterDrag,this,[n]),this),n.on("dragStop",t.utils.fnBind(this._onSplitterDragStop,this,[n]),this),n.on("dragStart",t.utils.fnBind(this._onSplitterDragStart,this,[n]),this),this._splitter.splice(e,0,n),n},_getItemsForSplitter:function(e){var n=t.utils.indexOf(e,this._splitter);return{before:this.contentItems[n],after:this.contentItems[n+1]}},_getMinimumDimensions:function(e){for(var n=0,t=0,r=0;r<e.length;++r)n=Math.max(e[r].minWidth||0,n),t=Math.max(e[r].minHeight||0,t);return{horizontal:n,vertical:t}},_onSplitterDragStart:function(e){var n=this._getItemsForSplitter(e),t=this.layoutManager.config.dimensions[this._isColumn?"minItemHeight":"minItemWidth"],r=this._getMinimumDimensions(n.before.config.content),o=this._isColumn?r.vertical:r.horizontal,i=this._getMinimumDimensions(n.after.config.content),l=this._isColumn?i.vertical:i.horizontal;this._splitterPosition=0,this._splitterMinPosition=-1*(n.before.element[this._dimension]()-(o||t)),this._splitterMaxPosition=n.after.element[this._dimension]()-(l||t)},_onSplitterDrag:function(e,n,t){var r=this._isColumn?t:n;r>this._splitterMinPosition&&r<this._splitterMaxPosition&&(this._splitterPosition=r,e.element.css(this._isColumn?"top":"left",r)),this._layoutManager.emit("splitterDragged",e)},_onSplitterDragStop:function(e){var n=this._getItemsForSplitter(e),r=n.before.element[this._dimension](),o=n.after.element[this._dimension](),i=(this._splitterPosition+r)/(r+o),l=n.before.config[this._dimension]+n.after.config[this._dimension];n.before.config[this._dimension]=i*l,n.after.config[this._dimension]=(1-i)*l,e.element.css({top:0,left:0}),t.utils.animFrame(t.utils.fnBind(this.callDownwards,this,["setSize"])),this._layoutManager.emit("splitterDragStopped",e)}}),t.items.Stack=function(e,r,o){t.items.AbstractContentItem.call(this,e,r,o),this.element=n('<div class="lm_item lm_stack"></div>'),this._activeContentItem=null;var i=e.config;this._header={show:!0===i.settings.hasHeaders&&!1!==r.hasHeaders,popout:i.settings.showPopoutIcon&&i.labels.popout,maximize:i.settings.showMaximizeIcon&&i.labels.maximize,minimize:i.settings.showMinimizeIcon&&i.labels.minimize,close:i.settings.showCloseIcon&&i.labels.close},i.header&&t.utils.copy(this._header,i.header),r.header&&t.utils.copy(this._header,r.header),r.content&&r.content[0]&&r.content[0].header&&t.utils.copy(this._header,r.content[0].header),this._dropZones={},this._dropSegment=null,this._contentAreaDimensions=null,this._dropIndex=null,this.isStack=!0,this.childElementContainer=n('<div class="lm_items"></div>'),this.header=new t.controls.Header(e,this),this.element.append(this.header.element),this.element.append(this.childElementContainer),this._setupHeaderPosition(),this._$validateClosability()},t.utils.extend(t.items.Stack,t.items.AbstractContentItem),t.utils.copy(t.items.Stack.prototype,{setSize:function(){var e,n=this._header.show?this.header.element.height():0,t=this.element.width()-(this._sided?n:0),r=this.element.height()-(this._sided?0:n);for(this.childElementContainer.width(t),this.childElementContainer.height(r),e=0;e<this.contentItems.length;e++)this.contentItems[e].element.width(t).height(r);this.emit("resize"),this.emitBubblingEvent("stateChanged")},_$init:function(){var e,n;if(!0!==this.isInitialised){for(t.items.AbstractContentItem.prototype._$init.call(this),e=0;e<this.contentItems.length;e++)this.header.createTab(this.contentItems[e]),this.contentItems[e]._$hide();if(this.contentItems.length>0){if(!(n=this.contentItems[this.config.activeItemIndex||0]))throw new Error("Configured activeItemIndex out of bounds");this.setActiveContentItem(n)}}},setActiveContentItem:function(e){if(-1===t.utils.indexOf(e,this.contentItems))throw new Error("contentItem is not a child of this stack");var n=this._activeContentItem;null!==this._activeContentItem&&this._activeContentItem._$hide(),this._activeContentItem=e,this.header.setActiveContentItem(e),e._$show(),this.emit("activeContentItemChanged",e),this.layoutManager.emit("activeContentItemChanged",e),n&&n.emit("focusLost"),this.emitBubblingEvent("stateChanged")},getActiveContentItem:function(){return this.header.activeContentItem},addChild:function(e,r){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=this.layoutManager._$normalizeContentItem(e,this),t.items.AbstractContentItem.prototype.addChild.call(this,e,r),this.childElementContainer.append(e.element),this.header.createTab(e,r),n(this.layoutManager.container).is(":visible")&&o?this.setActiveContentItem(e):e._$hide(),this.callDownwards("setSize"),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},removeChild:function(e,n){var r=t.utils.indexOf(e,this.contentItems);t.items.AbstractContentItem.prototype.removeChild.call(this,e,n),this.header.removeTab(e),this.header.activeContentItem===e&&(this.contentItems.length>0?this.setActiveContentItem(this.contentItems[Math.max(r-1,0)]):this._activeContentItem=null),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},_$validateClosability:function(){var e,n,t;for(e=this.header._isClosable(),t=0,n=this.contentItems.length;t<n&&e;t++)e=this.contentItems[t].config.isClosable;this.header._$setClosable(e)},_$destroy:function(){t.items.AbstractContentItem.prototype._$destroy.call(this),this.header._$destroy()},_$onDrop:function(e){if("header"===this._dropSegment)return this._resetHeaderDropZone(),void this.addChild(e,this._dropIndex);if("body"!==this._dropSegment){var n,r,o,i="top"===this._dropSegment||"bottom"===this._dropSegment,l="left"===this._dropSegment||"right"===this._dropSegment,a="top"===this._dropSegment||"left"===this._dropSegment,u=i&&this.parent.isColumn||l&&this.parent.isRow,s=i?"column":"row",c=i?"height":"width";e.isComponent&&((r=this.layoutManager.createContentItem({type:"stack",header:e.config.header||{}},this))._$init(),r.addChild(e),e=r),u?(n=t.utils.indexOf(this,this.parent.contentItems),this.parent.addChild(e,a?n:n+1,!0),this.config[c]*=.5,e.config[c]=this.config[c],this.parent.callDownwards("setSize")):(s=i?"column":"row",o=this.layoutManager.createContentItem({type:s},this),this.parent.replaceChild(this,o),o.addChild(e,a?0:void 0,!0),o.addChild(this,a?void 0:0,!0),this.config[c]=50,e.config[c]=50,o.callDownwards("setSize"))}else this.addChild(e)},_$highlightDropZone:function(e,n){var t,r;for(t in this._contentAreaDimensions)if((r=this._contentAreaDimensions[t].hoverArea).x1<e&&r.x2>e&&r.y1<n&&r.y2>n)return void("header"===t?(this._dropSegment="header",this._highlightHeaderDropZone(this._sided?n:e)):(this._resetHeaderDropZone(),this._highlightBodyDropZone(t)))},_$getArea:function(){if(!1===this.element.is(":visible"))return null;var e=t.items.AbstractContentItem.prototype._$getArea,n=e.call(this,this.header.element),r=e.call(this,this.childElementContainer),o=r.x2-r.x1,i=r.y2-r.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},highlightArea:{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2}}},this._activeContentItem&&!1===this._activeContentItem.isComponent?n:0===this.contentItems.length?(this._contentAreaDimensions.body={hoverArea:{x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},highlightArea:{x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2}},e.call(this,this.element)):("workspace"!==this.layoutManager.config.settings.mode&&(this._contentAreaDimensions.left={hoverArea:{x1:r.x1,y1:r.y1,x2:r.x1+.25*o,y2:r.y2},highlightArea:{x1:r.x1,y1:r.y1,x2:r.x1+.5*o,y2:r.y2}},this._contentAreaDimensions.top={hoverArea:{x1:r.x1+.25*o,y1:r.y1,x2:r.x1+.75*o,y2:r.y1+.5*i},highlightArea:{x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y1+.5*i}},this._contentAreaDimensions.right={hoverArea:{x1:r.x1+.75*o,y1:r.y1,x2:r.x2,y2:r.y2},highlightArea:{x1:r.x1+.5*o,y1:r.y1,x2:r.x2,y2:r.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:r.x1+.25*o,y1:r.y1+.5*i,x2:r.x1+.75*o,y2:r.y2},highlightArea:{x1:r.x1,y1:r.y1+.5*i,x2:r.x2,y2:r.y2}}),e.call(this,this.element))},_highlightHeaderDropZone:function(e){var n,t,r,o,i,l,a,u,s=this.header.tabs.length,c=!1;if(0===s)return a=this.header.element.offset(),void this.layoutManager.dropTargetIndicator.highlightArea({x1:a.left,x2:a.left+100,y1:a.top+this.header.element.height()-20,y2:a.top+this.header.element.height()});for(n=0;n<s;n++)if(i=(t=this.header.tabs[n].element).offset(),this._sided?(o=i.top,r=i.left,u=t.height()):(o=i.left,r=i.top,u=t.width()),e>o&&e<o+u){c=!0;break}if(!(!1===c&&e<o)){if(e<o+u/2?(this._dropIndex=n,t.before(this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(n+1,s),t.after(this.layoutManager.tabDropPlaceholder)),this._sided)return placeHolderTop=this.layoutManager.tabDropPlaceholder.offset().top,void this.layoutManager.dropTargetIndicator.highlightArea({x1:r,x2:r+t.innerHeight(),y1:placeHolderTop,y2:placeHolderTop+this.layoutManager.tabDropPlaceholder.width()});l=this.layoutManager.tabDropPlaceholder.offset().left,this.layoutManager.dropTargetIndicator.highlightArea({x1:l,x2:l+this.layoutManager.tabDropPlaceholder.width(),y1:r,y2:r+t.innerHeight()})}},_resetHeaderDropZone:function(){this.layoutManager.tabDropPlaceholder.remove()},_setupHeaderPosition:function(){var e=["right","left","bottom"].indexOf(this._header.show)>=0&&this._header.show;if(this.header.element.toggle(!!this._header.show),this._side=e,this._sided=["right","left"].indexOf(this._side)>=0,this.element.removeClass("lm_left lm_right lm_bottom"),this._side&&this.element.addClass("lm_"+this._side),this.element.find(".lm_header").length&&this.childElementContainer){var n=["right","bottom"].indexOf(this._side)>=0?"before":"after";this.header.element[n](this.childElementContainer),this.callDownwards("setSize")}},_highlightBodyDropZone:function(e){var n=this._contentAreaDimensions[e].highlightArea;this.layoutManager.dropTargetIndicator.highlightArea(n),this._dropSegment=e}}),t.utils.BubblingEvent=function(e,n){this.name=e,this.origin=n,this.isPropagationStopped=!1},t.utils.BubblingEvent.prototype.stopPropagation=function(){this.isPropagationStopped=!0},t.utils.ConfigMinifier=function(){if(this._keys=["settings","hasHeaders","constrainDragToContainer","selectionEnabled","dimensions","borderWidth","minItemHeight","minItemWidth","headerHeight","dragProxyWidth","dragProxyHeight","labels","close","maximize","minimize","popout","content","componentName","componentState","id","width","type","height","isClosable","title","popoutWholeStack","openPopouts","parentId","activeItemIndex","reorderEnabled","borderGrabWidth"],this._keys.length>36)throw new Error("Too many keys in config minifier map");this._values=[!0,!1,"row","column","stack","component","close","maximize","minimize","open in new window"]},t.utils.copy(t.utils.ConfigMinifier.prototype,{minifyConfig:function(e){var n={};return this._nextLevel(e,n,"_min"),n},unminifyConfig:function(e){var n={};return this._nextLevel(e,n,"_max"),n},_nextLevel:function(e,n,t){var r,o;for(r in e)e instanceof Array&&(r=parseInt(r,10)),e.hasOwnProperty(r)&&(o=this[t](r,this._keys),"object"==typeof e[r]?(n[o]=e[r]instanceof Array?[]:{},this._nextLevel(e[r],n[o],t)):n[o]=this[t](e[r],this._values))},_min:function(e,n){if("string"==typeof e&&1===e.length)return"___"+e;var r=t.utils.indexOf(e,n);return-1===r?e:r.toString(36)},_max:function(e,n){return"string"==typeof e&&1===e.length?n[parseInt(e,36)]:"string"==typeof e&&"___"===e.substr(0,3)?e[3]:e}}),t.utils.EventHub=function(e){t.utils.EventEmitter.call(this),this._layoutManager=e,this._dontPropagateToParent=null,this._childEventSource=null,this.on(t.utils.EventEmitter.ALL_EVENT,t.utils.fnBind(this._onEventFromThis,this)),this._boundOnEventFromChild=t.utils.fnBind(this._onEventFromChild,this),n(window).on("gl_child_event",this._boundOnEventFromChild)},t.utils.EventHub.prototype._onEventFromThis=function(){var e=Array.prototype.slice.call(arguments);this._layoutManager.isSubWindow&&e[0]!==this._dontPropagateToParent&&this._propagateToParent(e),this._propagateToChildren(e),this._dontPropagateToParent=null,this._childEventSource=null},t.utils.EventHub.prototype._$onEventFromParent=function(e){this._dontPropagateToParent=e[0],this.emit.apply(this,e)},t.utils.EventHub.prototype._onEventFromChild=function(e){this._childEventSource=e.originalEvent.__gl,this.emit.apply(this,e.originalEvent.__glArgs)},t.utils.EventHub.prototype._propagateToParent=function(e){var n,t="gl_child_event";document.createEvent?(n=window.opener.document.createEvent("HTMLEvents")).initEvent(t,!0,!0):(n=window.opener.document.createEventObject()).eventType=t,n.eventName=t,n.__glArgs=e,n.__gl=this._layoutManager,document.createEvent?window.opener.dispatchEvent(n):window.opener.fireEvent("on"+n.eventType,n)},t.utils.EventHub.prototype._propagateToChildren=function(e){var n,t;for(t=0;t<this._layoutManager.openPopouts.length;t++)(n=this._layoutManager.openPopouts[t].getGlInstance())&&n!==this._childEventSource&&n.eventHub._$onEventFromParent(e)},t.utils.EventHub.prototype.destroy=function(){n(window).off("gl_child_event",this._boundOnEventFromChild)},t.utils.ReactComponentHandler=function(e,n){this._reactComponent=null,this._originalComponentWillUpdate=null,this._container=e,this._initialState=n,this._reactClass=this._getReactClass(),this._container.on("open",this._render,this),this._container.on("destroy",this._destroy,this)},t.utils.copy(t.utils.ReactComponentHandler.prototype,{_render:function(){this._reactComponent=ReactDOM.render(this._getReactComponent(),this._container.getElement()[0]),this._originalComponentWillUpdate=this._reactComponent.componentWillUpdate||function(){},this._reactComponent.componentWillUpdate=this._onUpdate.bind(this),this._container.getState()&&this._reactComponent.setState(this._container.getState())},_destroy:function(){ReactDOM.unmountComponentAtNode(this._container.getElement()[0]),this._container.off("open",this._render,this),this._container.off("destroy",this._destroy,this)},_onUpdate:function(e,n){this._container.setState(n),this._originalComponentWillUpdate.call(this._reactComponent,e,n)},_getReactClass:function(){var e,n=this._container._config.component;if(!n)throw new Error("No react component name. type: react-component needs a field `component`");if(!(e=this._container.layoutManager.getComponent(n)))throw new Error('React component "'+n+'" not found. Please register all components with GoldenLayout using `registerComponent(name, component)`');return e},_getReactComponent:function(){var e={glEventHub:this._container.layoutManager.eventHub,glContainer:this._container},t=n.extend(e,this._container._config.props);return React.createElement(this._reactClass,t)}})}(window.$)}));function Q(e){if(e&&e.errorHandling&&"function"!=typeof e.errorHandling&&"log"!==e.errorHandling&&"silent"!==e.errorHandling&&"throw"!==e.errorHandling)throw new Error('Invalid options passed to createRegistry. Prop errorHandling should be ["log" | "silent" | "throw" | (err) => void], but '+typeof e.errorHandling+" was passed");var n=e&&"function"==typeof e.errorHandling&&e.errorHandling,t={};function r(t,r){var o=t instanceof Error?t:new Error(t);if(n)n(o);else{var i='[ERROR] callback-registry: User callback for key "'+r+'" failed: '+o.stack;if(e)switch(e.errorHandling){case"log":return console.error(i);case"silent":return;case"throw":throw new Error(i)}console.error(i)}}return{add:function(e,n,o){var i=t[e];return i||(i=[],t[e]=i),i.push(n),o&&setTimeout((function(){o.forEach((function(o){var i;if(null===(i=t[e])||void 0===i?void 0:i.includes(n))try{Array.isArray(o)?n.apply(void 0,o):n.apply(void 0,[o])}catch(n){r(n,e)}}))}),0),function(){var r=t[e];r&&(0===(r=r.reduce((function(e,t,r){return t===n&&e.length===r||e.push(t),e}),[])).length?delete t[e]:t[e]=r)}},execute:function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=t[e];if(!i||0===i.length)return[];var l=[];return i.forEach((function(t){try{var o=t.apply(void 0,n);l.push(o)}catch(n){l.push(void 0),r(n,e)}})),l},clear:function(){t={}},clearKey:function(e){t[e]&&delete t[e]}}}Q.default=Q;var N,G,F,L=Q,B=function(e){return Array.isArray(e)?e[0]:e},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=function e(n){return"component"===n.type?n.id?[n]:[]:n.content.reduce((function(n,t){return[].concat(Object(u.a)(n),Object(u.a)(e(t)))}),[])};return e.reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(n(t)))}),[])},z=function(e){var n=$(e)[0].getBoundingClientRect();return{x:Math.round(n.x),y:Math.round(n.y),left:Math.round(n.left),top:Math.round(n.top),width:Math.round(n.width),height:Math.round(n.height)}},J=function(e){return"___workspace___"+e},U=new(function(){function e(){Object(l.a)(this,e),this._idToLayout={}}return Object(a.a)(e,[{key:"getWorkspaceLayoutItemById",value:function(e){return this.workspaceLayout.root.getItemsById(e)[0]}},{key:"getById",value:function(e){return e=B(e),this._idToLayout[e]}},{key:"getByContainerId",value:function(e){return this._idToLayout[e]||this.getByContainerIdCore(e)}},{key:"getWorkspaceTitle",value:function(e){var n=this.workspaceLayout.root.getItemsById(e)[0];return(null==n?void 0:n.tab.titleElement[0].innerText)||(null==n?void 0:n.config.title)}},{key:"removeById",value:function(e){delete this._idToLayout[e]}},{key:"removeLayout",value:function(e){var n;null===(n=this._idToLayout[e].layout)||void 0===n||n.destroy(),this._idToLayout[e].layout=void 0}},{key:"addOrUpdate",value:function(e,n,t){var r=this.getById(e);if(r)return r.layout=t,void(r.windows=this.mergeWindows(r.windows,n));this._idToLayout[e]={id:e,windows:n,layout:t}}},{key:"getWindow",value:function(e){var n=B(e);return this.layouts.reduce((function(e,t){return e||t.windows.find((function(e){return e.id===n||e.windowId===n}))}),void 0)}},{key:"getActiveWorkspace",value:function(){var e=this.workspaceLayout.root.contentItems[0].getActiveContentItem().config.id;return this.getById(e)}},{key:"addWindow",value:function(e,n){var t=this.getById(n);t.windows=t.windows.filter((function(n){return n.id!==e.id})),t.windows.push(e)}},{key:"getByWindowId",value:function(e){return e=B(e),this.layouts.find((function(n){return n.windows.some((function(n){return n.id===e||n.windowId===e}))}))}},{key:"getWindowContentItem",value:function(e){var n=this.layouts.filter((function(e){return e.layout})).reduce((function(n,t){return n||t.layout.root.getItemsById(e)[0]}),void 0);if(n&&n.isComponent)return n;var t=this.layouts.filter((function(e){return e.layout})).reduce((function(n,t){return n||t.layout.root.getItemsByFilter((function(n){return n.isComponent&&n.config.componentState.windowId===e}))[0]}),void 0);return(null==t?void 0:t.isComponent)?t:void 0}},{key:"getContainer",value:function(e){return this.layouts.reduce((function(e,n){return n.layout&&e.push(n.layout),e}),[]).reduce((function(n,t){return n||t.root.getItemsById(e)[0]}),void 0)}},{key:"getWorkspaceContext",value:function(e){var n,t,r,o=this.getById(e);return null===(r=null===(t=null===(n=null==o?void 0:o.layout)||void 0===n?void 0:n.config)||void 0===t?void 0:t.workspacesOptions)||void 0===r?void 0:r.context}},{key:"getWorkspaceContentItem",value:function(e){return this.workspaceLayout.root.getItemsById(e)[0]}},{key:"getByContainerIdCore",value:function(e){return this.layouts.reduce((function(e,n){return n.layout&&e.push(n),e}),[]).find((function(n){return n.layout.root.getItemsById(e)[0]}))}},{key:"mergeWindows",value:function(e,n){return n.map((function(n){var t=n.windowId;if(!t){var r=e.find((function(e){return e.id===n.id}));t=null==r?void 0:r.windowId}return Object.assign(Object.assign({},n),{windowId:t})}))}},{key:"layouts",get:function(){return Object.values(this._idToLayout)}},{key:"workspaceIds",get:function(){return Object.keys(this._idToLayout)}},{key:"workspaceTitles",get:function(){var e=this;return this.workspaceIds.map((function(n){return e.getWorkspaceTitle(n)}))}},{key:"workspaceLayout",set:function(e){this._workspaceLayout=e},get:function(){return this._workspaceLayout}},{key:"workspaceLayoutHeader",get:function(){return this._workspaceLayout.root.contentItems[0].header}}]),e}()),V=function(){function e(){Object(l.a)(this,e)}return Object(a.a)(e,[{key:"init",value:function(e){this.containerElement=$(e)[0],this.setupEvents()}},{key:"setupEvents",value:function(){var e=this,n=new MutationObserver((function(n){Array.from(n).forEach((function(n){if("childList"===n.type&&n.target.classList.contains("lm_tabs")){var t=$(n.target);e.handleTabCountChanged(t,Array.from(n.removedNodes))}else if("attributes"===n.type&&n.target.classList.contains("lm_stack")&&"style"===n.attributeName){var r=$(n.target);e.handleTabHeaderResized(r)}}))}));return n.observe(this.containerElement,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"],attributeOldValue:!1,characterData:!1,characterDataOldValue:!1}),function(){n.disconnect()}}},{key:"handleTabCountChanged",value:function(e,n){var t=this,r=e.children(),o=this.visibleTabs($(e));e.css("max-width",200*o.length+"px");var i=e.width()/o.length;Array.from(r).forEach((function(e){$(e).children(".lm_title").css("max-width",.75*i+"px"),n.length&&t.refreshTabClasses(e)}))}},{key:"handleTabHeaderResized",value:function(e){var n=this,t=e.children(".lm_header").children(".lm_tabs"),r=this.visibleTabs($(t)),o=t.width()/r.length;Array.from(t.children()).forEach((function(e){$(e).children(".lm_title").css("max-width",.65*o+"px"),n.refreshTabClasses(e)}))}},{key:"refreshTabClasses",value:function(e){var n=$(e).outerWidth(),t=e.classList;n>=25&&n<35?(t.contains("lm_tab_mini")&&t.remove("lm_tab_mini"),t.add("lm_tab_small")):n>=35?(t.remove("lm_tab_small"),t.contains("lm_tab_mini")&&t.remove("lm_tab_mini")):n<25&&(t.remove("lm_tab_small"),t.add("lm_tab_mini"))}},{key:"visibleTabs",value:function(e){return Array.from(e.children()).filter((function(e){return $(e).is(":visible")}))}}]),e}(),H=new(function(){function e(){var n=this;Object(l.a)(this,e),this.visibilityState={logo:void 0,addWorkspace:void 0,systemButtons:void 0,workspaceContents:[]},this.componentsFactory={},this._decoratedFactory={},this.callbackRegistry=L(),this.observer=new MutationObserver((function(e){Array.from(e).forEach((function(e){var t=e.target,r=n.getWorkspaceIdFromContents(t),o="none"===t.style.display?"workspace-contents-hidden":"workspace-contents-shown";n.callbackRegistry.execute(o,r)}))}))}return Object(a.a)(e,[{key:"init",value:function(e,n){var t=this;this.componentsFactory=n,(null==n?void 0:n.createAddWorkspace)&&(this.decoratedFactory.createAddWorkspace=function(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t.visibilityState.addWorkspace=[].concat(o,[e]),(n=t.componentsFactory).createAddWorkspace.apply(n,Object(u.a)(t.visibilityState.addWorkspace))}),(null==n?void 0:n.createLogo)&&(this.decoratedFactory.createLogo=function(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t.visibilityState.logo=[].concat(o,[e]),(n=t.componentsFactory).createLogo.apply(n,Object(u.a)(t.visibilityState.logo))}),(null==n?void 0:n.createSystemButtons)&&(this.decoratedFactory.createSystemButtons=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t.visibilityState.systemButtons=[].concat(o,[e]),n.createSystemButtons.apply(n,Object(u.a)(t.visibilityState.systemButtons))}),(null==n?void 0:n.createWorkspaceContents)&&(this.decoratedFactory.createWorkspaceContents=function(){for(var e,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t.visibilityState.workspaceContents.push([].concat(o)),t.subscribeForWorkspaceContentsVisibility(null===(e=o[0])||void 0===e?void 0:e.workspaceId),n.createWorkspaceContents.apply(n,o)})}},{key:"reInitialize",value:function(e){(null==e?void 0:e.createAddWorkspace)&&this.visibilityState.addWorkspace&&e.createAddWorkspace.apply(e,Object(u.a)(this.visibilityState.addWorkspace)),(null==e?void 0:e.createLogo)&&this.visibilityState.logo&&e.createLogo.apply(e,Object(u.a)(this.visibilityState.logo)),(null==e?void 0:e.createSystemButtons)&&this.visibilityState.systemButtons&&e.createSystemButtons.apply(e,Object(u.a)(this.visibilityState.systemButtons)),(null==e?void 0:e.createWorkspaceContents)&&this.visibilityState.workspaceContents.forEach((function(n){e.createWorkspaceContents.apply(e,Object(u.a)(n))})),this.componentsFactory=e}},{key:"onWorkspaceContentsShown",value:function(e){this.callbackRegistry.add("workspace-contents-shown",e)}},{key:"onWorkspaceContentsHidden",value:function(e){this.callbackRegistry.add("workspace-contents-hidden",e)}},{key:"subscribeForWorkspaceContentsVisibility",value:function(e){var n=document.getElementById("nestHere"+e);n&&this.observer.observe(n,{attributes:!0,attributeFilter:["style"]})}},{key:"getWorkspaceIdFromContents",value:function(e){return e.id.split("nestHere")[1]}},{key:"decoratedFactory",get:function(){return this._decoratedFactory}}]),e}()),K=t(18).default||t(18),X=function(){function e(n,t,r,o){Object(l.a)(this,e),this._maximizedId="__glMaximised",this._workspaceLayoutElementId="#outter-layout-container",this._registry=L(),this._emptyVisibleWindowName="emptyVisibleWindow",this._stackMaximizeLabel="maximize",this._stackRestoreLabel="restore",this._options=r,this._emitter=n,this._stateResolver=t,this._configFactory=o}return Object(a.a)(e,[{key:"init",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t=this;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this._frameId=e.frameId,(new V).init(this._workspaceLayoutElementId),n.next=4,this.initWorkspaceConfig(e.workspaceLayout);case 4:return this.refreshLayoutSize(),n.next=7,Promise.all(e.workspaceConfigs.map((function(e){return M(t,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.initWorkspaceContents(e.id,e.config);case 2:this.emitter.raiseEvent("workspace-added",{workspace:U.getById(e.id)});case 3:case"end":return n.stop()}}),n,this)})))})));case 7:this.setupOuterLayout(),U.workspaceIds.forEach((function(e){t.setupContentLayouts(e)}));case 9:case"end":return n.stop()}}),n,this)})))}},{key:"addWindow",value:function(e,n){return M(this,void 0,void 0,i.a.mark((function t(){var r,o,l,a,u,s,c=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=n||B(U.workspaceLayout.root.contentItems[0].getActiveContentItem().config.id),(r=U.getByContainerId(n)).layout){t.next=7;break}return this.hideAddButton(r.id),t.next=6,this.initWorkspaceContents(r.id,e);case 6:return t.abrupt("return",void t.sent);case 7:return(o=r.layout._maximizedItem)&&o.toggleMaximise(),l=r.layout.root.getItemsByFilter((function(e){return e.isColumn||e.isRow}))[0],n&&n!==r.id&&(l=r.layout.root.getItemsById(n)[0]),l||(l=r.layout.root.getItemsByFilter((function(e){return e.isStack}))[0]),a=this.getWindowInfoFromConfig(e),u=a.placementId,a.windowId,a.url,a.appName,this.registerWindowComponent(r.layout,B(u)),s=l.getComponentsByName(this._emptyVisibleWindowName)[0],t.abrupt("return",new Promise((function(n){var t,o=c.emitter.onContentComponentCreated((function(e){e.config.id===u&&(o(),n())}));if("stack"===r.layout.root.contentItems[0].type&&"component"!==e.type&&(e=q([e])[0]),s&&!(null===(t=s.parent.config.workspacesConfig)||void 0===t?void 0:t.wrapper)){var i=c._configFactory.wrapInGroup([e]);return i.workspacesConfig.wrapper=!1,void s.parent.parent.replaceChild(s.parent,i)}s?s.parent.replaceChild(s,e):l.addChild(e)})));case 15:case"end":return t.stop()}}),t,this)})))}},{key:"addContainer",value:function(e,n){var t;return M(this,void 0,void 0,i.a.mark((function r(){var o,l,a,u,s,c,d=this;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((o=U.getByContainerId(n)).layout){r.next=8;break}return l=e.id||this._configFactory.getId(),e&&(e.id=l),this.hideAddButton(o.id),r.next=7,this.initWorkspaceContents(o.id,e);case 7:return r.abrupt("return",B(l));case 8:if((a=o.layout._maximizedItem)&&a.toggleMaximise(),u=o.layout.root.getItemsByFilter((function(e){return e.isColumn||e.isRow}))[0],n&&(u=o.layout.root.getItemsById(n)[0]),u||(u=o.layout.root.getItemsByFilter((function(e){return e.isStack}))[0]),o.id===n&&("column"===e.type||"stack"===e.type?this.bundleWorkspace(o.id,"row"):"row"===e.type&&this.bundleWorkspace(o.id,"column"),u=o.layout.root.contentItems[0]),e.content&&q(e.content).forEach((function(e){d.registerWindowComponent(o.layout,B(e.id))})),"component"!==u.type){r.next=13;break}throw new Error("The target item for add container can't be a component");case 13:return s=u.contentItems.find((function(e){return"stack"===e.type&&!0===e.config.workspacesConfig.wrapper})),c=(null===(t=null==s?void 0:s.contentItems[0])||void 0===t?void 0:t.config.componentName)===this._emptyVisibleWindowName,r.abrupt("return",new Promise((function(n,t){var r=function(){},i=setTimeout((function(){r(),t("Component with id ".concat(e.id," could not be created in 10000ms"))}),1e4);if(r=d.emitter.onContentItemCreated((function(t,l){t===o.id&&l.type===e.type&&(n(B(l.config.id)),r(),clearTimeout(i))})),1===(null==s?void 0:s.contentItems.length)&&c){var l=u.getComponentsByName(d._emptyVisibleWindowName)[0];l.parent.replaceChild(l,e)}else u.addChild(e)})));case 15:case"end":return r.stop()}}),r,this)})))}},{key:"closeContainer",value:function(e){(U.getByContainerId(e)||U.getByWindowId(e)).layout.root.getItemsById(e)[0].remove()}},{key:"bundleWorkspace",value:function(e,n){var t=this,r=U.getById(e),o=r.layout.root.contentItems.map((function(e){return t._stateResolver.getContainerConfig(e.config.id)})),i=r.layout.root.contentItems[0],l={type:n,content:o,workspacesConfig:{}};r.layout.root.replaceChild(i,l)}},{key:"hideAddButton",value:function(e){$("#nestHere"+e).children(".add-button").hide()}},{key:"showAddButton",value:function(e){$("#nestHere"+e).children(".add-button").show()}},{key:"addWorkspace",value:function(e,n){var t,r;return M(this,void 0,void 0,i.a.mark((function o(){var l,a;return i.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=U.workspaceLayout.root.getItemsByFilter((function(e){return e.isStack}))[0],a={componentName:this._configFactory.getWorkspaceLayoutComponentName(e),type:"component",workspacesConfig:{},id:e,noTabHeader:null===(t=n.workspacesOptions)||void 0===t?void 0:t.noTabHeader,title:(null===(r=null==n?void 0:n.workspacesOptions)||void 0===r?void 0:r.title)||this._configFactory.getWorkspaceTitle(U.workspaceTitles)},this.registerWorkspaceComponent(e),l.addChild(a,void 0,!a.noTabHeader),o.next=5,this.initWorkspaceContents(e,n);case 5:this.setupContentLayouts(e),this.emitter.raiseEvent("workspace-added",{workspace:U.getById(e)});case 7:case"end":return o.stop()}}),o,this)})))}},{key:"reinitializeWorkspace",value:function(e,n){var t;return U.removeLayout(e),(null===(t=n.workspacesOptions)||void 0===t?void 0:t.reuseWorkspaceId)&&delete n.workspacesOptions.reuseWorkspaceId,this.initWorkspaceContents(e,n)}},{key:"removeWorkspace",value:function(e){var n=U.getWorkspaceLayoutItemById(e);if(!n)throw new Error("Could find workspace to remove with id "+e);U.removeById(e),n.remove()}},{key:"changeTheme",value:function(e){var n=document.getElementsByTagName("html")[0];"light"===e?n.classList.contains(e)||(n.classList.remove("dark"),n.classList.add(e)):n.classList.contains(e)||(n.classList.remove("light"),n.classList.add(e));var t=$("link[href='./dist/glue42-light-theme.css']");(0===t.length?$("link[href='./dist/glue42-dark-theme.css']"):t).attr("href","./dist/glue42-".concat(e,"-theme.css"))}},{key:"getDragElement",value:function(){return $(".lm_dragProxy")[0]}},{key:"setDragElementSize",value:function(e,n){var t=this,r=this.getDragElement();if(r){r.setAttribute("width",e+"px"),r.setAttribute("height",n+"px");var o=$(r).children(".lm_content").children(".lm_item_container")[0];o.setAttribute("width",e+"px"),o.setAttribute("height",n+"px"),o.setAttribute("style","")}else{var i=new MutationObserver((function(r){var o;Array.from(r).forEach((function(e){var n=$(e.addedNodes);o||(o=n.find(".lm_dragProxy"))})),o&&(i.disconnect(),t.setDragElementSize(e,n))}));i.observe($("body")[0],{childList:!0,subtree:!0})}}},{key:"removeLayoutElement",value:function(e){var n;return U.layouts.filter((function(e){return e.layout})).forEach((function(t){var r=t.layout.root.getItemsById(e)[0];r&&t.windows.find((function(n){return n.id===e}))&&(t.windows=t.windows.filter((function(n){return n.id!==e})),r.remove(),n=t)})),n}},{key:"setWindowTitle",value:function(e,n){var t=U.getWindowContentItem(e);t.setTitle(n),t.config.componentState.title=n}},{key:"setWorkspaceTitle",value:function(e,n){U.getWorkspaceLayoutItemById(e).setTitle(n)}},{key:"focusWindow",value:function(e){var n=U.getByWindowId(e);if(!n)throw new Error("Could not find workspace for window "+e);var t=n.layout.root.getItemsById(e)[0];t.parent.setActiveContentItem(t)}},{key:"focusWorkspace",value:function(e){var n=U.getWorkspaceLayoutItemById(e);n.parent.setActiveContentItem(n)}},{key:"maximizeWindow",value:function(e){var n=U.getByWindowId(e);if(!n)throw new Error("Could not find workspace for window "+e);var t=n.layout.root.getItemsById(e)[0];t.parent.hasId(this._maximizedId)||t.parent.toggleMaximise()}},{key:"restoreWindow",value:function(e){var n=U.getByWindowId(e);if(!n)throw new Error("Could not find workspace for window "+e);var t=n.layout.root.getItemsById(e)[0];t.parent.hasId(this._maximizedId)&&t.parent.toggleMaximise()}},{key:"showLoadedWindow",value:function(e,n){return M(this,void 0,void 0,i.a.mark((function t(){var r,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.waitForWindowContainer(e);case 2:r=U.getWindowContentItem(e),o=U.getByWindowId(e),(l=r.config).componentState.windowId=n,o.windows.find((function(n){return n.id===e})).windowId=n,r.parent.replaceChild(r,l);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"isWindowVisible",value:function(e){return e=B(e),U.getWindowContentItem(e).parent.getActiveContentItem().config.id===e}},{key:"initWorkspaceContents",value:function(e,n){var t=this;if(!n||"component"!==n.type&&!n.content.length)return U.addOrUpdate(e,[]),this.showAddButton(e),Promise.resolve();var r=function(e,n){var t,r,o=0,i=setTimeout((function(){r()}),1e4);return{reject:function(e){clearTimeout(i),r(e)},signal:function(){++o>=2&&(clearTimeout(i),t())},promise:new Promise((function(e,n){t=e,r=n}))}}();n.settings||(n.settings=this._configFactory.getDefaultWorkspaceSettings()),n.type&&"workspace"!==n.type&&(n={settings:this._configFactory.getDefaultWorkspaceSettings(),content:[{type:"column",content:[n],workspacesConfig:{}}]}),"component"!==n.type&&"stack"===n.content[0].type&&(n=Object.assign(Object.assign({},n),{content:[{type:"column",content:n.content,workspacesConfig:{}}]}));var o=new W(n,$("#nestHere"+e));U.addOrUpdate(e,[]),this.registerEmptyWindowComponent(o,e),q(n.content).forEach((function(e){t.registerWindowComponent(o,B(e.id))}));var i=$("#nestHere"+e);return o.on("initialised",(function(){var n=q(o.toConfig().content);U.addOrUpdate(e,n.map((function(e){var n=o.root.getItemsById(B(e.id))[0].element;return{id:B(e.id),bounds:z(n),windowId:e.componentState.windowId}})),o),t.emitter.raiseEventWithDynamicName("content-layout-initialised-"+e),t.emitter.raiseEvent("content-layout-init",{layout:o});var l=i.width(),a=i.height();o.updateSize(l,a),r.signal()})),o.on("stateChanged",(function(){t.emitter.raiseEvent("content-layout-state-changed",{layoutId:e})})),o.on("itemCreated",(function(n){var r;if(n.isComponent)n.on("size-changed",(function(){var r=U.getById(e).windows.find((function(e){return e.id===n.config.id}));r&&(r.bounds=z(n.element));var o=n.config.id;t.emitter.raiseEvent("content-item-resized",{target:n.element[0],id:B(o)})})),(n.config.componentName===t._emptyVisibleWindowName||(null===(r=n.parent)||void 0===r?void 0:r.config.workspacesConfig.wrapper))&&n.tab.header.position(!1);else{if(n.isRoot)return void(n.id&&n.id.length||n.addId(e));n.config.id&&n.config.id.length||n.addId(t._configFactory.getId())}t.emitter.raiseEvent("content-item-created",{workspaceId:e,item:n})})),o.on("stackCreated",(function(n){var r=document.createElement("li");r.classList.add("lm_add_button"),r.onclick=function(o){o.stopPropagation(),t.emitter.raiseEvent("add-button-clicked",{args:{laneId:B(n.config.id),workspaceId:e,bounds:z(r)}})};var o=$(n.element).children(".lm_header").children(".lm_controls").children(".lm_maximise");o.addClass("workspace_content"),n.on("maximized",(function(){o.addClass("lm_restore"),o.attr("title",t._stackRestoreLabel),t.emitter.raiseEvent("stack-maximized",{stack:n})})),n.on("minimized",(function(){o.removeClass("lm_restore"),o.attr("title",t._stackMaximizeLabel),t.emitter.raiseEvent("stack-restored",{stack:n})})),t._options.disableCustomButtons||n.header.controlsContainer.prepend($(r)),n.on("activeContentItemChanged",(function(){var e=n.getActiveContentItem();if(e.isComponent){var r=e.config.id,o=[{id:B(e.config.id),bounds:z(e.element),windowId:e.config.componentState.windowId,appName:e.config.componentState.appName,url:e.config.componentState.url}],i=n.header.tabs.reduce((function(e,n){var t=n.contentItem.config;if("component"===t.type){var r={id:B(t.id),bounds:z(n.contentItem.element),windowId:t.componentState.windowId,appName:t.componentState.appName,url:t.componentState.url};e.push(r)}return e}),[]).filter((function(e){return e.id!==r}));t.emitter.raiseEvent("selection-changed",{toBack:i,toFront:o})}})),n.on("popoutRequested",(function(){var e=n.getActiveContentItem();t.emitter.raiseEvent("eject-requested",{item:e})}))})),o.on("tabCreated",(function(e){e._dragListener.on("drag",(function(){t.emitter.raiseEvent("tab-drag",{tab:e})})),e._dragListener.on("dragStart",(function(){t.emitter.raiseEvent("tab-drag-start",{tab:e})})),e._dragListener.on("dragEnd",(function(){t.emitter.raiseEvent("tab-drag-end",{tab:e})})),e.element.mousedown((function(){t.emitter.raiseEvent("tab-element-mouse-down",{tab:e})})),t.refreshTabSizeClass(e)})),o.on("tabCloseRequested",(function(e){t.emitter.raiseEvent("tab-close-requested",{item:e.contentItem})})),o.on("componentCreated",(function(n){var o=t.emitter.raiseEvent("content-component-created",{component:n,workspaceId:e});Array.isArray(o)?Promise.all(o).then((function(){r.signal()})).catch((function(e){return r.reject(e)})):o.then((function(){r.signal()})).catch((function(e){return r.reject(e)}))})),o.init(),r.promise}},{key:"initWorkspaceConfig",value:function(e){var n=this;return new Promise((function(t){e.settings.selectionEnabled=!0,U.workspaceLayout=new W(e,$(n._workspaceLayoutElementId),H.decoratedFactory),new K((function(e){Array.from(e).forEach((function(e){n.emitter.raiseEvent("outer-layout-container-resized",{target:e.target})}))})).observe($("#outter-layout-container")[0]),e.content[0].content.forEach((function(e){var t=e.id;n.registerWorkspaceComponent(B(t))})),U.workspaceLayout.on("initialised",(function(){n.emitter.raiseEvent("workspace-layout-initialised",{}),t()})),U.workspaceLayout.on("stackCreated",(function(e){var t,r=e.header.controlsContainer.children(".lm_close")[0];r&&(r.onclick=function(){n.emitter.raiseEvent("close-frame",{})});var o=e.header.element[0];if(new MutationObserver((function(){var e=n.getElementByClass(o,"lm_add_button");e&&H.decoratedFactory.createAddWorkspace&&(e.onclick=function(t){t.stopPropagation(),n.emitter.raiseEvent("workspace-add-button-clicked",{bounds:z(e)})})})).observe(e.header.element[0],{attributes:!1,childList:!0,subtree:!0}),!n._options.disableCustomButtons&&!(null===(t=H.decoratedFactory)||void 0===t?void 0:t.createAddWorkspace)){var l=document.createElement("li");l.classList.add("lm_add_button"),l.onclick=function(e){e.stopPropagation(),n._emitter.raiseEvent("workspace-add-button-clicked",{})},e.header.workspaceControlsContainer.prepend($(l))}if(!H.decoratedFactory.createLogo){var a=document.createElement("span");a.classList.add("logo_type");var s=e.header.element[0].getElementsByClassName("lm_logo")[0];s&&s.appendChild(a)}e.on("activeContentItemChanged",(function(){return M(n,void 0,void 0,i.a.mark((function n(){var t,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==U.workspaceIds.length){n.next=2;break}return n.abrupt("return");case 2:return t=e.getActiveContentItem().config.id,n.next=5,this.waitForLayout(B(t));case 5:r=U.workspaceIds.reduce((function(e,n){return[].concat(Object(u.a)(e),Object(u.a)(U.getById(n).windows))}),[]),this.emitter.raiseEvent("workspace-selection-changed",{workspace:U.getById(t),toBack:r});case 7:case"end":return n.stop()}}),n,this)})))}))})),U.workspaceLayout.on("itemCreated",(function(e){e.isComponent&&e.on("size-changed",(function(){n.emitter.raiseEvent("workspace-content-container-resized",{target:e,id:B(e.config.id)}),n.emitter.raiseEventWithDynamicName("workspace-content-container-resized-"+e.config.id,e)}))})),U.workspaceLayout.on("tabCreated",(function(e){var t=document.createElement("div");t.classList.add("lm_saveButton"),t.onclick=function(t){n.emitter.raiseEvent("workspace-save-requested",{workspaceId:B(e.contentItem.config.id)})},n._options.disableCustomButtons||(e.element[0].prepend(t),e.element[0].onclick=function(e){-1!==e.composedPath().indexOf(t)&&document.activeElement.blur(),e.stopPropagation()}),n.refreshTabSizeClass(e)})),U.workspaceLayout.on("tabCloseRequested",(function(e){n.emitter.raiseEvent("workspace-tab-close-requested",{workspace:U.getById(e.contentItem.config.id)})})),U.workspaceLayout.init()}))}},{key:"setupOuterLayout",value:function(){this.emitter.onOuterLayoutContainerResized((function(e){U.workspaceLayout.updateSize($(e).width(),$(e).height())}))}},{key:"setupContentLayouts",value:function(e){this.emitter.onContentContainerResized((function(n){var t=U.getById(e).layout;t&&t.updateSize($(n.element).width(),$(n.element).height())}),e)}},{key:"registerWindowComponent",value:function(e,n){this.registerComponent(e,"app"+n,(function(e){var t=document.createElement("div");t.setAttribute("style","height:100%;"),t.id="app"+n,e.getElement().append(t)}))}},{key:"registerEmptyWindowComponent",value:function(e,n){var t=this;this.registerComponent(e,this._emptyVisibleWindowName,(function(e){var r=document.createElement("div");r.classList.add("empty-container-background");var o=document.createElement("button");o.classList.add("add-button"),o.onclick=function(r){r.stopPropagation();var i=e.tab.contentItem,l="stack"===i.parent.type?"group":i.parent.type;i.parent.config.workspacesConfig.wrapper?t.emitter.raiseEvent("add-button-clicked",{args:{laneId:B(i.parent.parent.config.id),workspaceId:n,parentType:i.parent.parent.type,bounds:z(o)}}):t.emitter.raiseEvent("add-button-clicked",{args:{laneId:B(i.parent.config.id),workspaceId:n,parentType:l,bounds:z(o)}})},r.append(o),e.getElement().append(r)}))}},{key:"registerWorkspaceComponent",value:function(e){var n=this;this.registerComponent(U.workspaceLayout,this._configFactory.getWorkspaceLayoutComponentName(e),(function(t){var r,o,i=document.createElement("div");i.setAttribute("style","height:calc(100% - 1px); width:calc(100% - 1px);"),i.id="nestHere"+e;var l=document.createElement("button");l.classList.add("add-button"),l.onclick=function(r){r.stopPropagation();var o=t.tab.contentItem;n.emitter.raiseEvent("add-button-clicked",{args:{laneId:B(o.parent.id),workspaceId:e,bounds:z(l)}})},i.appendChild(l),(null===(r=H.decoratedFactory)||void 0===r?void 0:r.createWorkspaceContents)?(document.body.append(i),i.style.display="none",null===(o=H.decoratedFactory)||void 0===o||o.createWorkspaceContents({workspaceId:e,domNode:t.getElement()[0]})):t.getElement().append(i),$(l).hide()}))}},{key:"registerComponent",value:function(e,n,t){try{e.registerComponent(n,(function(e,n){t&&t(e,n)}))}catch(e){console.log("Tried to register and already existing component - "+n)}}},{key:"waitForLayout",value:function(e){var n=this;return new Promise((function(t){var r=n._registry.add("content-layout-initialised-"+e,(function(){t(),r()}));U.getById(e)&&(t(),r())}))}},{key:"waitForWindowContainer",value:function(e){var n=this;return new Promise((function(t){var r=n.emitter.onContentComponentCreated((function(n){n.config.id===e&&(t(),r())}));U.getWindowContentItem(e)&&(t(),r())}))}},{key:"getWindowInfoFromConfig",value:function(e){return"component"!==e.type?this.getWindowInfoFromConfig(e.content[0]):{placementId:B(e.id),windowId:e.componentState.windowId,appName:e.componentState.appName,url:e.componentState.url}}},{key:"refreshLayoutSize",value:function(){var e=z($(this._workspaceLayoutElementId));U.workspaceLayout.updateSize(e.width,e.height)}},{key:"refreshTabSizeClass",value:function(e){var n=e.header.tabs,t=n.map((function(e){return e.element})).some((function(e){return e.hasClass("lm_tab_small")})),r=n.map((function(e){return e.element})).some((function(e){return e.hasClass("lm_tab_mini")}));t&&e.element.addClass("lm_tab_small"),r&&e.element.addClass("lm_tab_mini")}},{key:"getElementByClass",value:function(e,n){var t=e.getElementsByClassName(n);if(t.length>1)throw new Error("Multiple elements with class ".concat(n," in element with id ").concat(e.id," and class ").concat(e.className," are not supported"));return t[0]}},{key:"emitter",get:function(){return this._emitter}},{key:"bounds",get:function(){return z(document.getElementById("outter-layout-container"))}}]),e}(),Z=function(){function e(n){Object(l.a)(this,e),this._registry=n}return Object(a.a)(e,[{key:"onWorkspaceLayoutInit",value:function(e){return this._registry.add("workspace-layout-initialised",e)}},{key:"onContentLayoutInit",value:function(e){return this._registry.add("content-layout-init",e)}},{key:"onOuterLayoutContainerResized",value:function(e){return this._registry.add("outer-layout-container-resized",e)}},{key:"onContentContainerResized",value:function(e,n){return n?this._registry.add("workspace-content-container-resized-"+n,e):this._registry.add("workspace-content-container-resized",e)}},{key:"onContentItemResized",value:function(e){return this._registry.add("content-item-resized",e)}},{key:"onContentComponentCreated",value:function(e){return this._registry.add("content-component-created",e)}},{key:"onFrameCloseRequested",value:function(e){return this._registry.add("close-frame",e)}},{key:"onRestoreRequested",value:function(e){return this._registry.add("restore-frame",e)}},{key:"onMaximizeRequested",value:function(e){return this._registry.add("maximize-frame",e)}},{key:"onMinimizeRequested",value:function(e){return this._registry.add("minimize-frame",e)}},{key:"onMoveAreaChanged",value:function(e){return this._registry.add("move-area-changed",e)}},{key:"onTabCloseRequested",value:function(e){return this._registry.add("tab-close-requested",e)}},{key:"onTabDragStart",value:function(e){return this._registry.add("tab-drag-start",e)}},{key:"onTabDrag",value:function(e){return this._registry.add("tab-drag",e)}},{key:"onTabDragEnd",value:function(e){return this._registry.add("tab-drag-end",e)}},{key:"onTabElementMouseDown",value:function(e){return this._registry.add("tab-element-mouse-down",e)}},{key:"onSelectionChanged",value:function(e){return this._registry.add("selection-changed",e)}},{key:"onWorkspaceAdded",value:function(e){return this._registry.add("workspace-added",e)}},{key:"onWorkspaceSelectionChanged",value:function(e){return this._registry.add("workspace-selection-changed",e)}},{key:"onWorkspaceTabCloseRequested",value:function(e){return this._registry.add("workspace-tab-close-requested",e)}},{key:"onAddButtonClicked",value:function(e){return this._registry.add("add-button-clicked",e)}},{key:"onContentLayoutStateChanged",value:function(e){return this._registry.add("content-layout-state-changed",e)}},{key:"onContentItemCreated",value:function(e){return this._registry.add("content-item-created",e)}},{key:"onWorkspaceAddButtonClicked",value:function(e){return this._registry.add("workspace-add-button-clicked",e)}},{key:"onWorkspaceSaveRequested",value:function(e){return this._registry.add("workspace-save-requested",e)}},{key:"onStackMaximized",value:function(e){return this._registry.add("stack-maximized",e)}},{key:"onStackRestored",value:function(e){return this._registry.add("stack-restored",e)}},{key:"onEjectRequested",value:function(e){return this._registry.add("eject-requested",e)}},{key:"raiseEvent",value:function(e,n){var t,r=(t=this._registry).execute.apply(t,[e].concat(Object(u.a)(Object.values(n))));return Array.isArray(r)&&r.some((function(e){return e&&e.then}))||r&&!Array.isArray(r)&&r.then?r:Promise.resolve(r)}},{key:"raiseEventWithDynamicName",value:function(e){for(var n,t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];(n=this._registry).execute.apply(n,[e].concat(r))}}]),e}(),Y=1,ee=function(){return(Y=(9301*Y+49297)%233280)/233280},ne="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function te(){F=!1}function re(e){if(e){if(e!==N){if(e.length!==ne.length)throw new Error("Custom alphabet for shortid must be "+ne.length+" unique characters. You submitted "+e.length+" characters: "+e);var n=e.split("").filter((function(e,n,t){return n!==t.lastIndexOf(e)}));if(n.length)throw new Error("Custom alphabet for shortid must be "+ne.length+" unique characters. These characters were not unique: "+n.join(", "));N=e,te()}}else N!==ne&&(N=ne,te())}function oe(){return F||(F=function(){N||re(ne);for(var e,n=N.split(""),t=[],r=ee();n.length>0;)r=ee(),e=Math.floor(r*n.length),t.push(n.splice(e,1)[0]);return t.join("")}())}var ie,le,ae,ue={get:function(){return N||ne},characters:function(e){return re(e),N},seed:function(e){(function(e){Y=e})(e),G!==e&&(te(),G=e)},lookup:function(e){return oe()[e]},shuffled:oe},se="object"==typeof window&&(window.crypto||window.msCrypto),ce=se&&se.getRandomValues?function(e){return se.getRandomValues(new Uint8Array(e))}:function(e){for(var n=[],t=0;t<e;t++)n.push(Math.floor(256*Math.random()));return n},de=function(e,n,t){for(var r=(2<<Math.log(n.length-1)/Math.LN2)-1,o=-~(1.6*r*t/n.length),i="";;)for(var l=e(o),a=o;a--;)if((i+=n[l[a]&r]||"").length===+t)return i},fe=function(e){for(var n,t=0,r="";!n;)r+=de(ce,ue.get(),1),n=e<Math.pow(16,t+1),t++;return r},pe=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+ue.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))},he=j((function(e){var n=0;function t(){return function(e){var n="",t=Math.floor(.001*(Date.now()-1567752802062));return t===le?ie++:(ie=0,le=t),n+=fe(7),n+=fe(e),ie>0&&(n+=fe(ie)),n+fe(t)}(n)}e.exports=t,e.exports.generate=t,e.exports.seed=function(n){return ue.seed(n),e.exports},e.exports.worker=function(t){return n=t,e.exports},e.exports.characters=function(e){return void 0!==e&&ue.characters(e),ue.shuffled()},e.exports.isValid=pe})),_e=function(){function e(n){Object(l.a)(this,e),this._registry=L(),this._idToFrame={},this._glue=n}return Object(a.a)(e,[{key:"startFrame",value:function(e,n,t,r){return M(this,void 0,void 0,i.a.mark((function t(){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=r||he.generate(),!this._idToFrame[e]){t.next=2;break}return t.abrupt("return",this._idToFrame[e]);case 2:if(n){t.next=4;break}throw new Error("The url of window with itemId ".concat(e," is undefined"));case 4:return(o=document.createElement("iframe")).name=r+"#wsp",o.src=n,document.body.appendChild(o),this._registry.execute("frameLoaded",e),o.setAttribute("id",e),$(o).css("position","absolute"),this._idToFrame[e]=o,t.next=14,this.waitForWindow(r);case 14:return t.abrupt("return",o);case 15:case"end":return t.stop()}}),t,this)})))}},{key:"moveFrame",value:function(e,n){var t=this._idToFrame[e],r=$(t);r.css("top",n.top+"px"),r.css("left",n.left+"px"),r.css("width",n.width+"px"),r.css("height",n.height+"px")}},{key:"selectionChanged",value:function(e,n){var t=this;n.forEach((function(e){$(t._idToFrame[e]).css("z-index","-1")})),e.forEach((function(e){$(t._idToFrame[e]).hasClass("maximized-active-tab")?$(t._idToFrame[e]).css("z-index","42"):$(t._idToFrame[e]).css("z-index","19")}))}},{key:"maximizeTab",value:function(e){$(this._idToFrame[e]).addClass("maximized-active-tab")}},{key:"restoreTab",value:function(e){$(this._idToFrame[e]).removeClass("maximized-active-tab")}},{key:"selectionChangedDeep",value:function(e,n){var t=this;n.forEach((function(e){$(t._idToFrame[e]).css("z-index","-1")})),e.forEach((function(e){$(t._idToFrame[e]).hasClass("maximized-active-tab")?$(t._idToFrame[e]).css("z-index","42"):$(t._idToFrame[e]).css("z-index","19")}))}},{key:"bringToFront",value:function(e){$(this._idToFrame[e]).css("z-index","999")}},{key:"remove",value:function(e){var n=this._idToFrame[e];if(n){delete this._idToFrame[e];try{n.contentWindow.dispatchEvent(new Event("beforeunload"))}catch(e){}n.remove()}}},{key:"onFrameLoaded",value:function(e){return this._registry.add("frameLoaded",e)}},{key:"onFrameContentClicked",value:function(e){return this._registry.add("frame-content-clicked",e)}},{key:"onWindowTitleChanged",value:function(e){return this._registry.add("window-title-changed",e)}},{key:"waitForWindow",value:function(e){var n=this;return new Promise((function(t,r){var o=function(){},i=setTimeout((function(){r("Window with id ".concat(e," did not appear in 5000ms")),o()}),5e3);o=n._glue.windows.onWindowAdded((function(n){n.id===e&&(o(),t(),clearTimeout(i))})),n._glue.windows.list().find((function(n){return n.id===e}))&&(t(),o(),clearTimeout(i))}))}}]),e}(),ge=new(function(){function e(){Object(l.a)(this,e),this.LAST_SESSION_KEY="lastSession"}return Object(a.a)(e,[{key:"get",value:function(e){return JSON.parse(localStorage.getItem(e))}},{key:"set",value:function(e,n){localStorage.setItem(e,JSON.stringify(n))}}]),e}()),me=new(function(){function e(){Object(l.a)(this,e)}return Object(a.a)(e,[{key:"loadConfig",value:function(){var e,n=new URLSearchParams(window.location.search),t=n.get("emptyFrame"),r=n.get("disableCustomButtons"),o=n.get("workspaceName"),i=n.get("workspaceNames"),l=n.get("context"),a=n.get("build"),u=[];try{u=JSON.parse(i)||u}catch(n){}try{e=JSON.parse(l)}catch(n){}o&&u.push(o);var s={emptyFrame:null!=t&&void 0!==t,disableCustomButtons:null!=r&&void 0!==r,workspaceNames:u,context:e,build:null!=a};return this._config=s,this.cleanUpUrl(),s}},{key:"cleanUpUrl",value:function(){var e=this.removeQueryParams(window.location.search,["emptyFrame"]);window.history.replaceState(null,document.title,window.location.origin+window.location.pathname+e)}},{key:"removeQueryParams",value:function(e,n){return n.forEach((function(n){var t=new URLSearchParams(e),r=t.get(n);Array.from(t.keys()).indexOf(n)>-1&&(e=e.replace("".concat(n,"=").concat(r),""))})),"&"===e[e.length-1]&&(e=e.substr(0,e.length-1)),e=(e=e.replace("&&","&")).replace("?&","?")}},{key:"config",get:function(){return this._config}}]),e}()),we=function(){function e(n,t,r,o){Object(l.a)(this,e),this.resolver=n,this._glue=t,this._configFactory=r,this._configConverter=o,this._layoutsType="Workspace",this._layoutComponentType="Workspace"}return Object(a.a)(e,[{key:"getInitialConfig",value:function(){var e;return M(this,void 0,void 0,i.a.mark((function n(){var t,r,o,l=this;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._initialWorkspaceConfig){n.next=2;break}return n.abrupt("return",this._configFactory.generateInitialConfig([this._initialWorkspaceConfig]));case 2:if(!(t=me.config).workspaceNames||!t.workspaceNames.length){n.next=11;break}return n.next=6,Promise.all(t.workspaceNames.map((function(e){return M(l,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getWorkspaceByName(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))})));case 6:if(!(r=n.sent.map((function(e){return e.config.workspacesOptions=e.config.workspacesOptions||{},e.config.workspacesOptions.context=e.layoutData.context,e.config})).filter((function(e){return e}))).length){n.next=9;break}return n.abrupt("return",(r.forEach((function(e,n){e.id=l._configFactory.getId(),e.workspacesOptions=e.workspacesOptions||{},t.context&&e.workspacesOptions.context?e.workspacesOptions.context=Object.assign(e.workspacesOptions.context,t.context):t.context&&(e.workspacesOptions.context=t.context),e.workspacesOptions.layoutName=t.workspaceNames[n]})),this._configFactory.generateInitialConfig(r)));case 9:n.next=15;break;case 11:if(null===(e=me.config)||void 0===e?void 0:e.build){n.next=15;break}if(!(o=this.getLastSession())||!o.length){n.next=15;break}return n.abrupt("return",(o.forEach((function(e){e&&(e.id=l._configFactory.getId())})),this._configFactory.generateInitialConfig(o)));case 15:return n.abrupt("return",this._configFactory.getDefaultFrameConfig());case 16:case"end":return n.stop()}}),n,this)})))}},{key:"getLastSession",value:function(){var e=this;return(ge.get(ge.LAST_SESSION_KEY)||[]).map((function(n){return e.addWorkspaceIds(n),e.addWindowIds(n),e._configConverter.convertToRendererConfig(n)}))}},{key:"getSavedWorkspaceNames",value:function(){return M(this,void 0,void 0,i.a.mark((function e(){var n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._glue.layouts.getAll(this._layoutsType);case 2:return e.abrupt("return",e.sent.filter((function(e){return e.type===n._layoutsType})).map((function(e){return e.name})));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"export",value:function(){return M(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._glue.layouts.export(this._layoutsType));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getWorkspaceByName",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._glue.layouts.get(e,this._layoutsType);case 2:return t=n.sent,r=t.components[0].state,o=this._configConverter.convertToRendererConfig(r),n.abrupt("return",(this.addWorkspaceIds(o),this.addWindowIds(o),{config:o,layoutData:{metadata:t.metadata,name:e,context:r.context}}));case 6:case"end":return n.stop()}}),n,this)})))}},{key:"delete",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._glue.layouts.remove(this._layoutsType,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"save",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r,o,l,a,u,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.workspace,r=e.title,o=e.name,l=e.saveContext,t.layout){n.next=3;break}throw new Error("An empty layout cannot be saved");case 3:return t.layout.config.workspacesOptions.name=o,n.next=6,this.saveWorkspaceCore(t);case 6:if(a=n.sent,r&&(a.config.title=r),u=void 0,!l){n.next=18;break}return n.prev=10,n.next=13,this.getWorkspaceContext(t.id);case 13:u=n.sent,n.next=18;break;case 16:n.prev=16,n.t0=n.catch(10);case 18:return s={name:o,type:this._layoutsType,metadata:{},components:[{type:this._layoutComponentType,state:{children:a.children,config:a.config,context:u}}]},n.next=21,this._glue.layouts.import([s],"merge");case 21:return n.abrupt("return",s);case 22:case"end":return n.stop()}}),n,this,[[10,16]])})))}},{key:"generateLayout",value:function(e,n){return M(this,void 0,void 0,i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.layout){t.next=2;break}throw new Error("An empty layout cannot be generated");case 2:return n.layout.config.workspacesOptions.name=e,t.next=5,this.saveWorkspaceCore(n);case 5:return r=t.sent,t.abrupt("return",{name:e,type:this._layoutsType,metadata:{},components:[{type:this._layoutComponentType,state:{children:r.children,config:r.config,context:{}}}]});case 7:case"end":return t.stop()}}),t,this)})))}},{key:"saveWorkspacesFrame",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r,o=this;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.map((function(e){return o.saveWorkspaceCoreSync(e)})),n.next=3,Promise.all(t);case 3:r=n.sent,ge.set(ge.LAST_SESSION_KEY,r);case 5:case"end":return n.stop()}}),n)})))}},{key:"setInitialWorkspaceConfig",value:function(e){this._initialWorkspaceConfig=e}},{key:"saveWorkspaceCore",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.layout){n.next=2;break}return n.abrupt("return");case 2:return(t=this.resolver.getWorkspaceConfig(e.id)).workspacesOptions.layoutName&&delete t.workspacesOptions,this.removeWorkspaceIds(t),n.next=7,this.applyWindowLayoutState(t);case 7:return r=this._configConverter.convertToAPIConfig(t),n.abrupt("return",(this.removeWorkspaceItemIds(r),this.windowSummariesToWindowLayout(r),this.addWindowUrlsToWindows(r),this.workspaceSummaryToWorkspaceLayout(r),r));case 9:case"end":return n.stop()}}),n,this)})))}},{key:"saveWorkspaceCoreSync",value:function(e){if(e.layout){var n=this.resolver.getWorkspaceConfig(e.id);this.removeWorkspaceIds(n);var t=this._configConverter.convertToAPIConfig(n);return this.removeWorkspaceItemIds(t),this.windowSummariesToWindowLayout(t),this.addWindowUrlsToWindows(t),this.workspaceSummaryToWorkspaceLayout(t),t}}},{key:"windowSummariesToWindowLayout",value:function(e){!function e(n){if("window"===n.type)return delete n.config.isMaximized,delete n.config.isLoaded,delete n.config.isFocused,delete n.config.windowId,delete n.config.workspaceId,delete n.config.frameId,delete n.config.positionIndex,void(n.config.appName&&delete n.config.url);n.children.forEach((function(n){return e(n)}))}(e)}},{key:"addWindowContexts",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r=this;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=function e(n){return M(r,void 0,void 0,i.a.mark((function t(){var r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("window"===n.type){t.next=5;break}return t.next=3,Promise.all(n.children.map((function(n){return e(n)})));case 3:t.next=12;break;case 5:if(!n.config.windowId){t.next=12;break}if(!(r=this._glue.windows.findById(n.config.windowId))){t.next=12;break}return t.next=10,r.getContext();case 10:o=t.sent,n.config.context=Object.assign({},n.config.context||{},o);case 12:case"end":return t.stop()}}),t,this)})))},n.next=3,t(e);case 3:case"end":return n.stop()}}),n)})))}},{key:"workspaceSummaryToWorkspaceLayout",value:function(e){(null==e?void 0:e.config)&&(delete e.config.frameId,delete e.config.positionIndex)}},{key:"addWindowUrlsToWindows",value:function(e){var n=this;!function e(t){var r,o;if("window"!==t.type||t.config.url||t.config.appName)"window"!==t.type&&t.children.forEach((function(n){return e(n)}));else{var i=n._glue.appManager.application(t.config.appName);t.config.url=null===(o=null===(r=null==i?void 0:i.userProperties)||void 0===r?void 0:r.details)||void 0===o?void 0:o.url}}(e)}},{key:"addWorkspaceIds",value:function(e){var n=this;if(e){!function e(t){t.id=n._configFactory.getId(),t.type&&"component"===t.type&&(t.componentName="app"+t.id),"component"!==t.type&&t.content&&t.content.forEach((function(n){return e(n)}))}(e)}}},{key:"addWindowIds",value:function(e){var n=this;if(e){!function e(t){"component"===t.type&&(t.componentState.windowId=n._configFactory.getId()),"component"!==t.type&&t.content&&t.content.forEach((function(n){return e(n)}))}(e)}}},{key:"removeWorkspaceIds",value:function(e){!function e(n){"id"in n&&delete n.id,"component"===(null==n?void 0:n.type)&&(n.componentName="placeHolderId",n.title="placeHolderId"),"component"!==n.type&&n.content&&n.content.forEach((function(n){return e(n)}))}(e)}},{key:"removeWorkspaceItemIds",value:function(e){!function e(n){var t;"id"in n&&delete n.id,"window"!==n.type&&(null===(t=n.children)||void 0===t||t.forEach((function(n){return e(n)})))}(e)}},{key:"applyWindowLayoutState",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r=this;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=function e(n){return M(r,void 0,void 0,i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("component"!==n.type){t.next=7;break}return t.next=3,this.getWindowLayoutState(n.windowId);case 3:r=t.sent,n.componentState.layoutState=r,t.next=8;break;case 7:n.content.forEach((function(n){return e(n)}));case 8:case"end":return t.stop()}}),t,this)})))},n.next=3,Promise.all(e.content.map((function(e){return M(r,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(e);case 2:case"end":return n.stop()}}),n)})))})));case 3:case"end":return n.stop()}}),n)})))}},{key:"getWorkspaceContext",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._glue.contexts.get(J(e));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"getWindowLayoutState",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.resolve({windowId:e}));case 1:case"end":return n.stop()}}),n)})))}}]),e}(),ve=function(){function e(n,t){Object(l.a)(this,e),this._frameId=n,this._layoutEventEmitter=t}return Object(a.a)(e,[{key:"getWindowSummary",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=Array.isArray(e)?e[0]:e,t=U.getWindowContentItem(e),n.t0=t,n.t0){n.next=7;break}return n.next=6,this.waitForWindowContentItem(e);case 6:t=U.getWindowContentItem(e);case 7:return n.abrupt("return",this.getWindowSummaryCore(t,e));case 8:case"end":return n.stop()}}),n,this)})))}},{key:"getWindowSummarySync",value:function(e,n){e=Array.isArray(e)?e[0]:e;var t=n||U.getWindowContentItem(e);return this.getWindowSummaryCore(t,e)}},{key:"getWorkspaceConfig",value:function(e){var n=U.getById(e);if(!n)throw new Error("Could find workspace to remove with id "+e);var t=n.layout?n.layout.toConfig():{workspacesOptions:{},content:[],id:e};return t.workspacesOptions.frameId=this._frameId,t.workspacesOptions.positionIndex=this.getWorkspaceTabIndex(e),t.workspacesOptions.title||(t.workspacesOptions.title=U.getWorkspaceTitle(e)),t.workspacesOptions.name=t.workspacesOptions.name||t.workspacesOptions.title,this.transformComponentsToWindowSummary(t),this.transformParentsToContainerSummary(t),t}},{key:"getWorkspaceSummary",value:function(e){var n=this.getWorkspaceConfig(e),t=this.getWorkspaceTabIndex(e),r={frameId:this._frameId,positionIndex:t,title:U.getWorkspaceTitle(e),name:n.workspacesOptions.name||U.getWorkspaceTitle(e)};return n.workspacesOptions.layoutName&&(r.layoutName=n.workspacesOptions.layoutName),{config:r,id:e}}},{key:"isWindowMaximized",value:function(e){var n=B(e),t=U.getWindowContentItem(n);return!!(null==t?void 0:t.parent.isMaximized)}},{key:"isWindowSelected",value:function(e){var n=B(e),t=U.getWindowContentItem(n);return(null==t?void 0:t.parent.getActiveContentItem().config.id)===n}},{key:"getContainerSummary",value:function(e){var n;e=B(e);var t=U.getByContainerId(e),r=U.getContainer(e),o=null===(n=r.parent)||void 0===n?void 0:n.contentItems.indexOf(r);return{itemId:e,config:{workspaceId:t.id,frameId:this._frameId,positionIndex:o||0}}}},{key:"getContainerSummaryByReference",value:function(e,n){var t,r=null===(t=e.parent)||void 0===t?void 0:t.contentItems.indexOf(e);return{itemId:B(e.config.id),config:{workspaceId:n,frameId:this._frameId,positionIndex:r||0}}}},{key:"getContainerConfig",value:function(e){e=B(e);var n=(U.getByContainerId(e)||U.getByWindowId(e)).layout.toConfig();return this.findElementInConfig(e,n)}},{key:"isWindowInWorkspace",value:function(e){return!!U.getWindowContentItem(e)}},{key:"getFrameSnapshot",value:function(){var e=this,n=U.workspaceIds.map((function(n){return e.getWorkspaceSummary(n)}));return{id:this._frameId,config:{},workspaces:n}}},{key:"getSnapshot",value:function(e){try{return this.getWorkspaceConfig(e)}catch(e){return this.getFrameSnapshot()}}},{key:"findElementInConfig",value:function(e,n){return function n(t){return t.id===e?[t]:("component"!==t.type?t.content:[]).reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(n(t)))}),[])}(n).find((function(e){return e.id}))}},{key:"getWorkspaceTabIndex",value:function(e){var n,t=null===(n=U.workspaceLayout.root.getItemsById(e)[0])||void 0===n?void 0:n.parent;return t?t.header.tabs.findIndex((function(n){return n.contentItem.config.id===e})):0}},{key:"getWindowSummaryCore",value:function(e,n){var t,r=e.parent.getActiveContentItem().config.id===e.config.id,o=void 0!==e.config.componentState.windowId,i=this.getWindowPositionIndex(e),l=null===(t=U.getByWindowId(n))||void 0===t?void 0:t.id,a=e.config.componentState,u=a.appName,s=a.url,c=a.windowId,d=this.getUserFriendlyParent(e);return{itemId:B(e.config.id),parentId:B(d.config.id),config:{frameId:this._frameId,isFocused:r,isLoaded:o,positionIndex:i,workspaceId:l,windowId:c,isMaximized:this.isWindowMaximized(c),appName:u,url:s,title:e.config.title}}}},{key:"getWindowPositionIndex",value:function(e){var n=e.parent.contentItems.indexOf(e);return-1===n?e.parent.contentItems.length:n}},{key:"getUserFriendlyParent",value:function(e){return e.parent?e.parent.config.workspacesConfig.wrapper?this.getUserFriendlyParent(e.parent):e.parent:e}},{key:"transformComponentsToWindowSummary",value:function(e){var n,t=this;if("component"!==e.type||"emptyVisibleWindow"!==e.componentName){if("component"===e.type){var r=this.getWindowSummarySync(e.id);return e.workspacesConfig=e.workspacesConfig||{},void(e.workspacesConfig=Object.assign(Object.assign({},e.workspacesConfig),r.config))}null===(n=e.content)||void 0===n||n.map((function(e){return t.transformComponentsToWindowSummary(e)}))}}},{key:"transformParentsToContainerSummary",value:function(e){var n,t=this;if("component"!==e.type){if("stack"===e.type||"row"===e.type||"column"===e.type){var r=this.getContainerSummary(e.id);e.workspacesConfig=e.workspacesConfig||{},e.workspacesConfig=Object.assign(Object.assign({},e.workspacesConfig),r.config)}null===(n=e.content)||void 0===n||n.map((function(e){return t.transformParentsToContainerSummary(e)}))}}},{key:"waitForWindowContentItem",value:function(e){var n=this;return new Promise((function(t){var r=n._layoutEventEmitter.onContentComponentCreated((function(n){n.config.id===e&&(r(),t())}));U.getWindowContentItem(e)&&(r(),t())}))}}]),e}(),be=function(){function e(){Object(l.a)(this,e),this._pattern=/^Untitled ([0-9]+)$/}return Object(a.a)(e,[{key:"getTitle",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.filter((function(e){return n._pattern.test(e)})).map((function(e){return parseInt(n._pattern.exec(e)[1],10)}));return"Untitled "+((r.length?r.sort((function(e,n){return e-n}))[r.length-1]:0)+1+t)}}]),e}(),ye=function(){function e(n){Object(l.a)(this,e),this._titleGenerator=new be,this._defaultWorkspaceLayoutSettings={showCloseIcon:!1,showMaximizeIcon:!1,showPopoutIcon:!1,disableDragProxy:!0,mode:"workspace"},this._glue=n}return Object(a.a)(e,[{key:"createEmptyVisibleWindowConfig",value:function(){return Object.assign(Object.assign({},this.createWindowConfigurationCore()),{componentState:{header:!1}})}},{key:"createGDWindowConfig",value:function(e){var n=this.createWindowConfigurationCore(e.id);return Object.assign(Object.assign({},n),{componentName:"app"+n.id,windowId:e.windowId,title:e.title,componentState:{windowId:e.windowId,appName:e.appName,url:e.url,title:e.title,context:e.context}})}},{key:"createApiWindow",value:function(e){return{id:Array.isArray(e.id)?e.id[0]:e.id,type:"window",config:{windowId:e.windowId,isMaximized:e.isMaximized,isLoaded:void 0!==e.windowId,isFocused:e.isFocused,appName:e.appName,url:e.url,title:e.title,workspaceId:e.workspaceId,frameId:e.frameId,positionIndex:e.positionIndex}}}},{key:"getWorkspaceLayoutComponentName",value:function(e){return"workspace"+e}},{key:"getWorkspaceTitle",value:function(e){return this._titleGenerator.getTitle(e)}},{key:"getId",value:function(){return he.generate()}},{key:"getDefaultWorkspaceSettings",value:function(){return{mode:"default",showCloseIcon:!1,showPopoutIcon:!0}}},{key:"getDefaultFrameConfig",value:function(){var e=he.generate();return{frameId:void 0,workspaceConfigs:[{id:e,config:this.getDefaultWorkspaceConfig()}],workspaceLayout:{settings:this._defaultWorkspaceLayoutSettings,content:[{type:"stack",content:[{type:"component",id:e,componentName:this.getWorkspaceLayoutComponentName(e),componentState:{},workspacesConfig:{},title:this.getWorkspaceTitle(U.workspaceTitles)}],workspacesConfig:{}}]}}}},{key:"getDefaultWorkspaceConfig",value:function(){}},{key:"generateInitialConfig",value:function(e){var n=this,t={settings:this._defaultWorkspaceLayoutSettings,content:[{type:"stack",content:e.map((function(e){var t,r,o,i=he.generate();return{workspacesConfig:{},type:"component",id:(null==e?void 0:e.id)||i,componentName:n.getWorkspaceLayoutComponentName(B(null==e?void 0:e.id)||i),componentState:{},noTabHeader:null===(t=null==e?void 0:e.workspacesOptions)||void 0===t?void 0:t.noTabHeader,title:(null===(r=null==e?void 0:e.workspacesOptions)||void 0===r?void 0:r.title)||(null===(o=null==e?void 0:e.workspacesOptions)||void 0===o?void 0:o.name)||n.getWorkspaceTitle(U.workspaceIds)}})),workspacesConfig:{}}]};return{frameId:void 0,workspaceConfigs:e.map((function(e,n){var r=null==e?void 0:e.id;return r||"component"===t.content[0].type||(r=t.content[0].content[n].id),{id:r,config:e}})),workspaceLayout:t}}},{key:"wrapInGroup",value:function(e){return this.wrap(e,"stack")}},{key:"getAppNameFromWindowId",value:function(e){var n=this._glue.appManager.instances().find((function(n){return n.agm.windowId===e}));return null==n?void 0:n.application.name}},{key:"createWindowConfigurationCore",value:function(e){return{workspacesConfig:{},type:"component",id:e||this.getId(),componentName:"emptyVisibleWindow"}}},{key:"wrap",value:function(e,n){return{workspacesConfig:{wrapper:!0},type:n,content:e}}}]),e}(),ke=function(){function e(){Object(l.a)(this,e),this.registry=L()}return Object(a.a)(e,[{key:"onFrameEvent",value:function(e){return this.registry.add("frame",e)}},{key:"onWindowEvent",value:function(e){return this.registry.add("window",e)}},{key:"onContainerEvent",value:function(e){return this.registry.add("container",e)}},{key:"onWorkspaceEvent",value:function(e){return this.registry.add("workspace",e)}},{key:"raiseFrameEvent",value:function(e){this.registry.execute("frame",e.action,e.payload)}},{key:"raiseWindowEvent",value:function(e){this.registry.execute("window",e.action,e.payload)}},{key:"raiseContainerEvent",value:function(e){this.registry.execute("container",e.action,e.payload)}},{key:"raiseWorkspaceEvent",value:function(e){this.registry.execute("workspace",e.action,e.payload)}}]),e}(),Ce=function(){function e(n){Object(l.a)(this,e),this._configFactory=n,this.flat=function(e){return e.reduce((function(e,n){return[].concat(Object(u.a)(e),Object(u.a)(Array.isArray(n)?n:[n]))}),[])}}return Object(a.a)(e,[{key:"convertToRendererConfig",value:function(e){if(e)return this.convertToRendererConfigCore(e,void 0)}},{key:"convertToAPIConfig",value:function(e){if(e)return this.convertToApiConfigCore(e)}},{key:"convertToRendererConfigCore",value:function(e,n){var t,r,o,i,l,a,s,c=this,d={type:e.type,content:[],workspacesOptions:e.config||{}};if("workspace"!==e.type&&e.type||(d=this.applyDefaultRendererConfig({content:[],workspacesOptions:e.config})),"workspace"===e.type||!e.type){var f,p=e,h=p.children;return h.length>1&&h.every((function(e){return"column"===e.type}))?d.content.push(this.wrap(h.map((function(e){return c.convertToRendererConfigCore(e,p)})),"row")):h.length>1&&h.every((function(e){return"row"===e.type}))?d.content.push(this.wrap(h.map((function(e){return c.convertToRendererConfigCore(e,p)})),"column")):(f=d.content).push.apply(f,Object(u.a)(h.map((function(e){return c.convertToRendererConfigCore(e,p)})))),d}if("column"===e.type||"row"===e.type)return(t=d.content).push.apply(t,Object(u.a)(e.children.map((function(n){return c.convertToRendererConfigCore(n,e)})))),0===d.content.length&&d.content.push(this.getGroupWithEmptyVisibleWindow()),d;if("group"===e.type)return d.type="stack",(r=d.content).push.apply(r,Object(u.a)(e.children.map((function(n){return c.convertToRendererConfigCore(n,e)})))),0===d.content.length&&d.content.push(this._configFactory.createEmptyVisibleWindowConfig()),d;if("window"===e.type){var _=(null===(o=e.config)||void 0===o?void 0:o.appName)||e.appName,g=null===(i=e.config)||void 0===i?void 0:i.windowId;!_&&g&&(_=this._configFactory.getAppNameFromWindowId(g));var m=this._configFactory.createGDWindowConfig({windowId:g,id:e.id,appName:_,url:(null===(l=e.config)||void 0===l?void 0:l.url)||e.url,title:(null===(a=e.config)||void 0===a?void 0:a.title)||e.title,context:(null===(s=e.config)||void 0===s?void 0:s.context)||e.context});return"group"!==n.type?(m.componentState.header=!1,this.wrap([m],"stack")):m}}},{key:"convertToApiConfigCore",value:function(e){var n=this;if(!e.type||"workspace"===e.type){e=e;var t=this.flat(e.content.map((function(e){return n.convertToApiConfigCore(e)})));return{id:B(e.id),config:e.workspacesOptions,children:t}}if("component"===e.type&&"emptyVisibleWindow"===e.componentName)return[];if("component"!==e.type&&e.workspacesConfig&&e.workspacesConfig.wrapper)return this.flat(e.content.map((function(e){return n.convertToApiConfigCore(e)})));if("component"===e.type){var r=e.workspacesConfig;return this._configFactory.createApiWindow({id:e.id,isFocused:!1,isMaximized:r.isMaximized,windowId:e.componentState.windowId,appName:e.componentState.appName,url:e.componentState.url,frameId:r.frameId,workspaceId:r.workspaceId,title:r.title,positionIndex:r.positionIndex})}return{id:B(e.id),type:"stack"===e.type?"group":e.type,children:this.flat(e.content.map((function(e){return n.convertToApiConfigCore(e)}))),config:{}}}},{key:"wrap",value:function(e,n){return{workspacesConfig:{wrapper:!0},type:n,content:e}}},{key:"applyDefaultRendererConfig",value:function(e){return Object.assign({settings:Object.assign({},this._configFactory.getDefaultWorkspaceSettings())},e)}},{key:"getGroupWithEmptyVisibleWindow",value:function(){return this.wrap([this._configFactory.createEmptyVisibleWindowConfig()],"stack")}}]),e}(),Ie=function(){function e(n,t,r){Object(l.a)(this,e),this._externalPopupManager=n,this._componentPopupManager=t,this._componentFactory=r}return Object(a.a)(e,[{key:"showAddWindowPopup",value:function(e,n){var t;return M(this,void 0,void 0,i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(null===(t=this._componentFactory)||void 0===t?void 0:t.createAddApplicationPopup)?this._componentPopupManager.showAddWindowPopup(e,n):this._externalPopupManager.showAddWindowPopup(e,n));case 1:case"end":return r.stop()}}),r,this)})))}},{key:"showOpenWorkspacePopup",value:function(e,n){var t;return M(this,void 0,void 0,i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(null===(t=this._componentFactory)||void 0===t?void 0:t.createAddWorkspacePopup)?this._componentPopupManager.showOpenWorkspacePopup(e):this._externalPopupManager.showOpenWorkspacePopup(e,n));case 1:case"end":return r.stop()}}),r,this)})))}},{key:"showSaveWorkspacePopup",value:function(e,n){var t;return M(this,void 0,void 0,i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(null===(t=this._componentFactory)||void 0===t?void 0:t.createSaveWorkspacePopup)?this._componentPopupManager.showSaveWorkspacePopup(e,n):this._externalPopupManager.showSaveWorkspacePopup(e,n));case 1:case"end":return r.stop()}}),r,this)})))}},{key:"hidePopup",value:function(){this._externalPopupManager.hidePopup(),this._componentFactory&&this._componentPopupManager.hidePopup()}}]),e}(),xe=function(){function e(n){Object(l.a)(this,e),this._addApplicationType="addApplication",this._openWorkspaceType="openWorkspace",this._saveWorkspaceType="saveWorkspace",this._showPopupMethod="T42.Workspaces.ShowPopup",this._glue=n,this.initPopup(),this.registerHideMethod(),this.registerResizeMethod()}return Object(a.a)(e,[{key:"showAddWindowPopup",value:function(e,n){return M(this,void 0,void 0,i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.hidePopup(),t.next=3,this.getPopupSize(this._addApplicationType,n);case 3:r=t.sent,this.showElement(this._popup,e,r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"showOpenWorkspacePopup",value:function(e,n){return M(this,void 0,void 0,i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.hidePopup(),t.next=3,this.getPopupSize(this._openWorkspaceType,n);case 3:r=t.sent,this.showElement(this._popup,e,r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"showSaveWorkspacePopup",value:function(e,n){return M(this,void 0,void 0,i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.hidePopup(),t.next=3,this.getPopupSize(this._saveWorkspaceType,n);case 3:r=t.sent,this.showElement(this._popup,e,r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"hidePopup",value:function(){$(this._popup).css("visibility","hidden")}},{key:"initPopup",value:function(){}},{key:"showElement",value:function(e,n,t){$(e).css("visibility","visible").css("top",n.top+"px").css("left",n.left+"px"),t.height&&$(e).css("height",t.height+"px"),t.width&&$(e).css("width",t.width+"px");var r=e.getBoundingClientRect(),o=document.body.getBoundingClientRect(),i=o.width-r.right-10,l=o.height-r.bottom-10;i<0&&$(e).css("left",n.left+i),l<0&&$(e).css("top",n.top+l)}},{key:"resizePopup",value:function(e){var n=$(this._popup);e.height&&n.css("height",e.height+"px"),e.width&&n.css("width",e.width+"px");var t=this._popup.getBoundingClientRect(),r=document.body.getBoundingClientRect(),o=r.width-t.right-10,i=r.height-t.bottom-10;if(o<0){var l=n.css("left"),a=parseInt(l.substring(0,l.length-2));n.css("left",a+o)}if(i<0){var u=n.css("top"),s=parseInt(u.substring(0,u.length-2));n.css("top",s+i)}}},{key:"getPopupSize",value:function(e,n){return M(this,void 0,void 0,i.a.mark((function t(){var r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getPopupInteropId(),o=this._glue.agm.servers().find((function(e){return e.windowId===r})),t.next=3,this._glue.agm.invoke(this._showPopupMethod,{type:e,payload:n},o);case 3:return t.abrupt("return",t.sent.returned);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"registerHideMethod",value:function(){}},{key:"registerResizeMethod",value:function(){}},{key:"getPopupInteropId",value:function(){try{return this._popup.contentWindow.interopId||"best"}catch(e){console.warn("Could not get the popup interop id using best")}return"best"}},{key:"getPopupWindowTemplate",value:function(e){return'<iframe id="popup" src="'.concat(e,'" class="popup"></iframe>')}}]),e}(),Ee=function(){function e(n,t){var o,i=this;Object(l.a)(this,e),this._addApplicationType="addApplication",this._openWorkspaceType="openWorkspace",this._saveWorkspaceType="saveWorkspace",this._popupSizes=(o={},Object(r.a)(o,this._addApplicationType,{height:200,width:200}),Object(r.a)(o,this._openWorkspaceType,{height:200,width:200}),Object(r.a)(o,this._saveWorkspaceType,{height:200,width:200}),o),this.hidePopup=function(){return document.body.onclick=void 0,$(i._popup).css("visibility","hidden"),new Promise((function(e){var n;(null===(n=i._componentFactory)||void 0===n?void 0:n.hideSystemPopups)?i._componentFactory.hideSystemPopups(e):e()}))},this._componentFactory=n,this._frameId=t,this.initPopup()}return Object(a.a)(e,[{key:"showAddWindowPopup",value:function(e,n){var t=n.workspaceId,r=n.parentType,o=n.boxId;return M(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.showInternalAddAppPopup(e,o,t,r);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"showOpenWorkspacePopup",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.showInternalOpenWorkspacePopup(e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"showSaveWorkspacePopup",value:function(e,n){return M(this,void 0,void 0,i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.showInternalSaveWorkspacePopup(e,n);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"showInternalSaveWorkspacePopup",value:function(e,n){return M(this,void 0,void 0,i.a.mark((function t(){var r,o=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.hidePopup();case 2:r=this.getPopupSize(this._saveWorkspaceType),this.showElement(this._popup,e,r),this._componentFactory.createSaveWorkspacePopup({domNode:this._popup,resizePopup:function(e){return o.resizePopup(e,o._saveWorkspaceType,$(o._popup))},hidePopup:this.hidePopup,workspaceId:n.workspaceId,buildMode:n.buildMode});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"showInternalOpenWorkspacePopup",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r=this;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.hidePopup();case 2:t=this.getPopupSize(this._openWorkspaceType),this.showElement(this._popup,e,t),this._componentFactory.createAddWorkspacePopup({domNode:this._popup,frameId:this._frameId,hidePopup:this.hidePopup,resizePopup:function(e){return r.resizePopup(e,r._openWorkspaceType,$(r._popup))}});case 4:case"end":return n.stop()}}),n,this)})))}},{key:"showInternalAddAppPopup",value:function(e,n,t,r){return M(this,void 0,void 0,i.a.mark((function r(){var o,l=this;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.hidePopup();case 2:o=this.getPopupSize(this._addApplicationType),this.showElement(this._popup,e,o),this._componentFactory.createAddApplicationPopup({domNode:this._popup,boxId:n,resizePopup:function(e){return l.resizePopup(e,l._addApplicationType,$(l._popup))},hidePopup:this.hidePopup,workspaceId:t,frameId:this._frameId});case 4:case"end":return r.stop()}}),r,this)})))}},{key:"initPopup",value:function(){this._popup=document.createElement("div"),this._popup.classList.add("workspaces-system-popup"),document.body.appendChild(this._popup)}},{key:"showElement",value:function(e,n,t){var r=this;document.body.onclick=function(e){-1===e.composedPath().indexOf(r._popup)&&r.hidePopup()},document.body.onblur=function(e){"iframe"===document.activeElement.tagName.toLowerCase()&&r.hidePopup()},$(e).css("visibility","visible").css("top",n.top+"px").css("left",n.left+"px"),t.height&&$(e).css("height",t.height+"px"),t.width&&$(e).css("width",t.width+"px");var o=e.getBoundingClientRect(),i=document.body.getBoundingClientRect(),l=i.width-o.right-10,a=i.height-o.bottom-10;l<0&&$(e).css("left",n.left+l),a<0&&$(e).css("top",n.top+a)}},{key:"resizePopup",value:function(e,n,t){e.height&&(t.css("height",e.height+"px"),this._popupSizes[n].height=e.height),e.width&&(t.css("width",e.width+"px"),this._popupSizes[n].width=e.width);var r=t[0].getBoundingClientRect(),o=document.body.getBoundingClientRect(),i=o.width-r.right-10,l=o.height-r.bottom-10;if(i<0){var a=t.css("left"),u=parseInt(a.substring(0,a.length-2),10);t.css("left",u+i)}if(l<0){var s=t.css("top"),c=parseInt(s.substring(0,s.length-2),10);t.css("top",c+l)}}},{key:"getPopupSize",value:function(e){return this._popupSizes[e]}}]),e}(),Se=new(function(){function e(){var n=this;Object(l.a)(this,e),this._isLayoutInitialized=!1,this._initPromise=Promise.resolve(),this._workspacesEventEmitter=new ke,this._titleGenerator=new be,this.getComponentBounds=function(){return n._controller.bounds},this.subscribeForWindowClicked=function(e){return n._frameController.onFrameContentClicked(e)},this.cleanUp=function(){var e;if(n._isDisposing=!0,!(null===(e=me.config)||void 0===e?void 0:e.build)){var t=[],r=U.workspaceIds.map((function(e){var r=U.getById(e);return t.push.apply(t,Object(u.a)(r.windows.map((function(e){return n.stateResolver.getWindowSummarySync(e.id)})))),n.stateResolver.getWorkspaceSummary(e)}));t.forEach((function(e){n.notifyFrameWillClose(e.config.windowId,e.config.appName).catch((function(e){})),n.workspacesEventEmitter.raiseWindowEvent({action:"removed",payload:{windowSummary:e}})})),r.forEach((function(e){n.workspacesEventEmitter.raiseWorkspaceEvent({action:"closed",payload:{frameSummary:{id:n._frameId},workspaceSummary:e}})}));var o=U.layouts.filter((function(e){var n,t,r;return!(null===(r=null===(t=null===(n=e.layout)||void 0===n?void 0:n.config)||void 0===t?void 0:t.workspacesOptions)||void 0===r?void 0:r.noTabHeader)}));n._layoutsManager.saveWorkspacesFrame(o),n.workspacesEventEmitter.raiseFrameEvent({action:"closed",payload:{frameSummary:{id:n._frameId}}})}}}return Object(a.a)(e,[{key:"init",value:function(e,n,t,r){this._glue=e,this._facade=t;var o=me.loadConfig();if(!this._initialized){this._initialized=!0,this._frameId=n,this._configFactory=new ye(e);var i=new Ce(this._configFactory);H.init(this._frameId,r);var l=new Z(L());return this._stateResolver=new ve(this._frameId,l),this._controller=new X(l,this._stateResolver,o,this._configFactory),this._frameController=new _e(e),this._layoutsManager=new we(this.stateResolver,e,this._configFactory,i),this._popupManager=new Ie(new xe(e),new Ee(r,n),r),o.emptyFrame||this.initLayout(),{cleanUp:this.cleanUp}}H.reInitialize(r)}},{key:"saveWorkspace",value:function(e,n,t){return M(this,void 0,void 0,i.a.mark((function r(){var o,l;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=U.getById(n)||U.getActiveWorkspace(),r.next=3,this._layoutsManager.save({name:e,workspace:o,title:U.getWorkspaceTitle(o.id),saveContext:t});case 3:return l=r.sent,r.abrupt("return",(o.layout.config.workspacesOptions.layoutName=e,o.layout.config.workspacesOptions.noTabHeader&&delete o.layout.config.workspacesOptions.noTabHeader,l));case 5:case"end":return r.stop()}}),r,this)})))}},{key:"openWorkspace",value:function(e,n){var t;return M(this,void 0,void 0,i.a.mark((function r(){var o,l,a=this;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this._layoutsManager.getWorkspaceByName(e);case 2:if(o=r.sent,(l=o.config).workspacesOptions.context=o.layoutData.context,(null==n?void 0:n.context)&&l.workspacesOptions.context?l.workspacesOptions.context=Object.assign(o.layoutData.context,null==n?void 0:n.context):(null==n?void 0:n.context)&&(l.workspacesOptions.context=null==n?void 0:n.context),(null==n?void 0:n.title)&&(l.workspacesOptions.title=null==n?void 0:n.title),l&&l.workspacesOptions&&!l.workspacesOptions.name&&(l.workspacesOptions.name=e),l&&(l.workspacesOptions=l.workspacesOptions||{},l.workspacesOptions.layoutName=o.layoutData.name),l&&void 0!==(null==n?void 0:n.noTabHeader)&&(l.workspacesOptions=l.workspacesOptions||{},l.workspacesOptions.noTabHeader=null==n?void 0:n.noTabHeader),!this._isLayoutInitialized){r.next=32;break}if(!e){r.next=28;break}if(l.id=(null==n?void 0:n.reuseWorkspaceId)||this._configFactory.getId(),!(null==n?void 0:n.reuseWorkspaceId)){r.next=23;break}return U.getById(l.id).windows.map((function(e){return U.getWindowContentItem(e.id)})).filter((function(e){return e})).map((function(e){return a.closeTab(e,!1)})),r.next=17,this._controller.reinitializeWorkspace(l.id,l);case 17:if(r.t2=null===(t=l.workspacesOptions)||void 0===t?void 0:t.context,!r.t2){r.next=21;break}return r.next=21,this._glue.contexts.set(J(l.id),l.workspacesOptions.context);case 21:r.next=25;break;case 23:return r.next=25,this.addWorkspace(B(l.id),l);case 25:r.t1=B(l.id),r.next=29;break;case 28:r.t1=void 0;case 29:r.t0=r.t1,r.next=37;break;case 32:return this._layoutsManager.setInitialWorkspaceConfig(l),this._initPromise=this.initLayout(),r.next=36,this._initPromise;case 36:r.t0=B(l.id);case 37:return r.abrupt("return",r.t0);case 38:case"end":return r.stop()}}),r,this)})))}},{key:"exportAllLayouts",value:function(){return this._layoutsManager.export()}},{key:"deleteLayout",value:function(e){this._layoutsManager.delete(e)}},{key:"maximizeItem",value:function(e){this._controller.maximizeWindow(e)}},{key:"restoreItem",value:function(e){this._controller.restoreWindow(e)}},{key:"closeItem",value:function(e){var n=this,t=U.getWindow(e),r=U.getContainer(e);if(this._frameId===e)U.workspaceIds.forEach((function(e){return n.closeWorkspace(U.getById(e))}));else if(t){var o=U.getWindowContentItem(e);this.closeTab(o)}else if(r)this._controller.closeContainer(e);else{var i=U.getById(e);this.closeWorkspace(i)}}},{key:"addContainer",value:function(e,n){return this._controller.addContainer(e,n)}},{key:"addWindow",value:function(e,n){var t=U.getContainer(n);return t&&"stack"===t.type||"component"!==e.type||(e=this._configFactory.wrapInGroup([e])),this._controller.addWindow(e,n)}},{key:"setItemTitle",value:function(e,n){U.getById(e)?this._controller.setWorkspaceTitle(e,n):this._controller.setWindowTitle(e,n)}},{key:"eject",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r,o,l,a,u,s,c,d;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.config.componentState,r=t.appName,o=t.url,l=t.windowId,a=U.getWorkspaceContext(U.getByWindowId(e.config.id).id),!(u=this._glue.windows.findById(l))){n.next=12;break}return n.next=9,u.getContext();case 9:n.t0=n.sent,n.next=13;break;case 12:n.t0=a;case 13:if(s=n.t0,this.closeItem(B(e.config.id)),!r){n.next=20;break}return c=l?{reuseId:l}:void 0,n.next=18,this._glue.appManager.application(r).start(s,c);case 18:return n.t1=n.sent.id,n.abrupt("return",{windowId:n.t1});case 20:return d=this.getUrlByAppName(r)||o,n.next=23,this._glue.windows.open("".concat(r,"_").concat(l),d,{context:s,windowId:l});case 23:return n.t2=n.sent.id,n.abrupt("return",{windowId:n.t2});case 25:case"end":return n.stop()}}),n,this)})))}},{key:"createWorkspace",value:function(e){var n,t;return M(this,void 0,void 0,i.a.mark((function r(){var o,l=this;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this._isLayoutInitialized){r.next=7;break}return e.id=this._configFactory.getId(),this._layoutsManager.setInitialWorkspaceConfig(e),this._initPromise=this.initLayout(),r.next=6,this._initPromise;case 6:return r.abrupt("return",B(e.id));case 7:if(o=(null===(n=e.workspacesOptions)||void 0===n?void 0:n.reuseWorkspaceId)||this._configFactory.getId(),!(null===(t=e.workspacesOptions)||void 0===t?void 0:t.reuseWorkspaceId)){r.next=18;break}return U.getById(o).windows.map((function(e){return U.getWindowContentItem(e.id)})).filter((function(e){return e})).map((function(e){return l.closeTab(e,!1)})),r.next=12,this._controller.reinitializeWorkspace(o,e);case 12:if(r.t0=e.workspacesOptions.context,!r.t0){r.next=16;break}return r.next=16,this._glue.contexts.set(J(o),e.workspacesOptions.context);case 16:r.next=20;break;case 18:return r.next=20,this.addWorkspace(o,e);case 20:return r.abrupt("return",o);case 21:case"end":return r.stop()}}),r,this)})))}},{key:"loadWindow",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r,o=this;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=U.getWindowContentItem(e),r=t.config.componentState.windowId,n.t0=r,n.t0){n.next=7;break}return n.next=5,this.waitForFrameLoaded(e);case 5:t=U.getWindowContentItem(e),r=t.config.componentState.windowId;case 7:return n.abrupt("return",new Promise((function(n,t){r||t("The window id of ".concat(e," is missing"));var i=function(){},l=setTimeout((function(){t("Could not load window ".concat(r," for 5000ms")),i()}),5e3);i=o._glue.windows.onWindowAdded((function(e){e.id===r&&(n({windowId:r}),i(),clearTimeout(l))})),o._glue.windows.list().find((function(e){return e.id===r}))&&(n({windowId:r}),i(),clearTimeout(l))})));case 8:case"end":return n.stop()}}),n,this)})))}},{key:"focusItem",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=U.getById(e),this._frameId!==e){n.next=6;break}return n.next=4,this._glue.windows.my().focus();case 4:n.next=7;break;case 6:t?this._controller.focusWorkspace(t.id):this._controller.focusWindow(e);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"bundleWorkspace",value:function(e,n){this._controller.bundleWorkspace(e,n)}},{key:"move",value:function(e){return this._glue.windows.my().moveTo(e.y,e.x)}},{key:"getFrameSummary",value:function(e){var n=U.getByContainerId(e)||U.getByWindowId(e)||U.getById(e),t=this._frameId===e;return{id:n||t?this._frameId:"none"}}},{key:"moveWindowTo",value:function(e,n){return M(this,void 0,void 0,i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(U.getByContainerId(n)||U.getById(n)){t.next=2;break}throw new Error("Could not find container ".concat(n," in frame ").concat(this._frameId));case 2:if(r=U.getWindowContentItem(e)){t.next=5;break}throw new Error("Could not find window ".concat(e," in frame ").concat(this._frameId));case 5:return t.abrupt("return",(this.closeTab(r),this._controller.addWindow(r.config,n)));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"generateWorkspaceLayout",value:function(e,n){var t=U.getById(n);if(!t)throw new Error("Could not find workspace with id "+n);return this._layoutsManager.generateLayout(e,t)}},{key:"unmount",value:function(){try{this._popupManager.hidePopup()}catch(e){console.warn(e)}}},{key:"initLayout",value:function(){return M(this,void 0,void 0,i.a.mark((function e(){var n,t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._layoutsManager.getInitialConfig();case 2:return n=e.sent,this.subscribeForPopups(),this.subscribeForLayout(),this._isLayoutInitialized=!0,e.next=8,Promise.all(n.workspaceConfigs.map((function(e){var n,r;return t._glue.contexts.set(J(e.id),(null===(r=null===(n=e.config)||void 0===n?void 0:n.workspacesOptions)||void 0===r?void 0:r.context)||{})})));case 8:return e.next=10,this._controller.init({frameId:this._frameId,workspaceLayout:n.workspaceLayout,workspaceConfigs:n.workspaceConfigs});case 10:U.layouts.map((function(e){return e.layout})).filter((function(e){return e})).forEach((function(e){return t.reportLayoutStructure(e)})),me.config.emptyFrame&&this._workspacesEventEmitter.raiseFrameEvent({action:"opened",payload:{frameSummary:{id:this._frameId}}});case 12:case"end":return e.stop()}}),e,this)})))}},{key:"subscribeForLayout",value:function(){var e=this;this._controller.emitter.onContentComponentCreated((function(n,t){return M(e,void 0,void 0,i.a.mark((function e(){var r,o,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,y,k,C=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("emptyVisibleWindow"!==n.config.componentName){e.next=2;break}return e.abrupt("return");case 2:if(l=U.getById(t),a=z(n.element),u=n.config.componentState,s=u.title,c=u.appName,d=u.windowId,f=B(n.config.id),p=this.getTitleByAppName(c),h=this.vaidateTitle(s)||this.vaidateTitle(p)||this.vaidateTitle(c)||"Glue",_=null===(r=null==n?void 0:n.config.componentState)||void 0===r?void 0:r.context,g=this.getUrlByAppName(u.appName)||u.url,console.log("WINDow title",h),console.log("componentState",n.config),m=!U.getWindow(f),U.addWindow({id:f,bounds:a,windowId:d,url:g,appName:c},l.id),g||!d){e.next=14;break}return w=this._glue.windows.list().find((function(e){return e.id===d})),e.next=12,w.getURL();case 12:g=e.sent,U.getWindow(f).url=g;case 14:if(d=d||he.generate(),(null===(o=n.config.componentState)||void 0===o?void 0:o.context)&&delete n.config.componentState.context,n.config.componentState.url=g,h&&n.setTitle(h),!m){e.next=26;break}if(v=this.stateResolver.getWindowSummarySync(f,n),this.workspacesEventEmitter.raiseWindowEvent({action:"added",payload:{windowSummary:v}}),!(b=this._glue.windows.findById(d))){e.next=26;break}return e.prev=19,e.next=22,b.close();case 22:e.next=26;break;case 24:e.prev=24,e.t0=e.catch(19);case 26:return e.prev=26,e.next=29,this.notifyFrameWillStart(d,c,_,h);case 29:return e.next=31,this._frameController.startFrame(f,g,void 0,d);case 31:if(y=U.getWindow(f),n.config.componentState.windowId=d,y.windowId=d,this._glue.windows.findById(d).getTitle().then((function(e){C.vaidateTitle(h)&&n.setTitle(e)})).catch((function(e){console.warn("Failed while setting the window title",e)})),this._frameController.moveFrame(f,z(n.element)),e.t1=m,!e.t1){e.next=45;break}return e.t2=this._workspacesEventEmitter,e.next=41,this.stateResolver.getWindowSummary(f);case 41:e.t3=e.sent,e.t4={windowSummary:e.t3},e.t5={action:"loaded",payload:e.t4},e.t2.raiseWindowEvent.call(e.t2,e.t5);case 45:if(c){e.next=50;break}if(k=this.getAppNameByWindowId(d),n.config.componentState){e.next=49;break}throw new Error("Invalid state - the created component ".concat(f," with windowId ").concat(d," is missing its state object"));case 49:n.config.componentState.appName=k,y.appName=k;case 50:e.next=56;break;case 52:if(e.prev=52,e.t6=e.catch(26),n.config.componentState.windowId=void 0,g?this._frameController.moveFrame(f,z(n.element)):this.closeTab(n,!1),U.getById(t)){e.next=56;break}throw new Error("Workspace ".concat(t," failed ot initialize because none of the specified windows were able to load\n                    Internal error: ").concat(e.t6));case 56:case"end":return e.stop()}}),e,this,[[19,24],[26,52]])})))})),this._controller.emitter.onContentItemResized((function(n,t){e._frameController.moveFrame(t,z(n))})),this._controller.emitter.onTabCloseRequested((function(n){return M(e,void 0,void 0,i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=U.getByWindowId(B(n.config.id)),this.closeTab(n),this._controller.removeLayoutElement(B(n.config.id)),this._frameController.remove(B(n.config.id)),t.windows.length||this.checkForEmptyWorkspace(t);case 2:case"end":return e.stop()}}),e,this)})))})),this._controller.emitter.onWorkspaceTabCloseRequested((function(n){e.closeWorkspace(n)})),this._controller.emitter.onTabElementMouseDown((function(n){var t=z(n.contentItem.element),r=Math.min(t.width,800),o=Math.min(t.height,600);e._controller.setDragElementSize(r,o)})),this._controller.emitter.onTabDragStart((function(n){var t=e._controller.getDragElement();new MutationObserver((function(t){Array.from(t).forEach((function(t){if("attributes"===t.type){var r=$(e._controller.getDragElement()).children(".lm_content").children(".lm_item_container"),o=z(r[0]),i=B(n.contentItem.config.id);e._frameController.moveFrame(i,o),e._frameController.bringToFront(i)}}))})).observe(t,{attributes:!0})})),this._controller.emitter.onTabDragEnd((function(n){var t=n.header.tabs.filter((function(e){return e.contentItem.config.id!==n.contentItem.config.id}));e._frameController.selectionChanged([B(n.contentItem.id)],t.map((function(e){return B(e.contentItem.id)})))})),this._controller.emitter.onSelectionChanged((function(n,t){return M(e,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._popupManager.hidePopup(),this._frameController.selectionChanged(t.map((function(e){return e.id})),n.map((function(e){return e.id})));case 1:case"end":return e.stop()}}),e,this)})))})),this._controller.emitter.onWorkspaceAdded((function(n){var t,r=U.workspaceIds.filter((function(e){return e!==n.id})).reduce((function(e,n){return[].concat(Object(u.a)(e),Object(u.a)(U.getById(n).windows))}),[]);if(e._workspacesEventEmitter.raiseWorkspaceEvent({action:"opened",payload:{frameSummary:{id:e._frameId},workspaceSummary:e.stateResolver.getWorkspaceSummary(n.id)}}),U.getActiveWorkspace().id===n.id){if(e._workspacesEventEmitter.raiseWorkspaceEvent({action:"selected",payload:{frameSummary:{id:e._frameId},workspaceSummary:e.stateResolver.getWorkspaceSummary(n.id)}}),!n.layout)return void e._frameController.selectionChangedDeep([],r.map((function(e){return e.id})));var o=q(n.layout.toConfig().content);e._frameController.selectionChangedDeep(o.map((function(e){return B(e.id)})),r.map((function(e){return e.id})))}if(n.layout){var i=n.layout.config.workspacesOptions,l=i.title||i.name;l&&(null===(t=U.getWorkspaceLayoutItemById(n.id))||void 0===t||t.setTitle(l))}})),this._controller.emitter.onWorkspaceSelectionChanged((function(n,t){if(e._popupManager.hidePopup(),!n.layout)return e._frameController.selectionChangedDeep([],t.map((function(e){return e.id}))),void e._workspacesEventEmitter.raiseWorkspaceEvent({action:"selected",payload:{frameSummary:{id:e._frameId},workspaceSummary:e.stateResolver.getWorkspaceSummary(n.id)}});var r=q(n.layout.toConfig().content).filter((function(n){return e._controller.isWindowVisible(n.id)}));e._frameController.selectionChangedDeep(r.map((function(e){return B(e.id)})),t.map((function(e){return e.id}))),e._workspacesEventEmitter.raiseWorkspaceEvent({action:"selected",payload:{frameSummary:{id:e._frameId},workspaceSummary:e.stateResolver.getWorkspaceSummary(n.id)}})})),this._controller.emitter.onAddButtonClicked((function(n){var t=n.laneId,r=n.workspaceId,o=n.bounds,l=n.parentType;return M(e,void 0,void 0,i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={boxId:t,workspaceId:r,parentType:l,frameId:this._frameId,peerId:this._glue.agm.instance.peerId,domNode:void 0,resizePopup:void 0,hidePopup:void 0},e.next=3,this._popupManager.showAddWindowPopup(o,n);case 3:case"end":return e.stop()}}),e,this)})))})),this._controller.emitter.onContentLayoutInit((function(n){e.reportLayoutStructure(n)})),this._controller.emitter.onWorkspaceAddButtonClicked((function(){return M(e,void 0,void 0,i.a.mark((function e(){var n,t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={frameId:this._frameId,peerId:this._glue.agm.instance.windowId},t=U.workspaceLayoutHeader.element.find(".lm_workspace_controls").find(".lm_add_button"),r=z(t),e.next=3,this._popupManager.showOpenWorkspacePopup(r,n);case 3:case"end":return e.stop()}}),e,this)})))})),this._controller.emitter.onWorkspaceSaveRequested((function(n){return M(e,void 0,void 0,i.a.mark((function e(){var t,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={frameId:this._frameId,workspaceId:n,peerId:this._glue.agm.instance.peerId,buildMode:me.config.build,domNode:void 0,resizePopup:void 0,hidePopup:void 0},r=U.getWorkspaceLayoutItemById(n).tab.element.find(".lm_saveButton"),o=z(r),e.next=3,this._popupManager.showSaveWorkspacePopup(o,t);case 3:case"end":return e.stop()}}),e,this)})))})),this._controller.emitter.onStackMaximized((function(n){var t=n.getActiveContentItem(),r=n.contentItems.map((function(e){return B(e.config.id)}));n.contentItems.forEach((function(n){e._frameController.maximizeTab(B(n.config.id))})),e._frameController.selectionChanged([B(t.config.id)],r)})),this._controller.emitter.onStackRestored((function(n){var t=n.getActiveContentItem(),r=n.contentItems.map((function(e){return B(e.config.id)}));n.contentItems.forEach((function(n){e._frameController.restoreTab(B(n.config.id))})),e._frameController.selectionChanged([B(t.config.id)],r)})),this._controller.emitter.onEjectRequested((function(n){if(!n.isComponent)throw new Error("Can't eject item of type "+n.type);return e.eject(n)})),H.onWorkspaceContentsShown((function(n){var t=U.getActiveWorkspace();if((null==t?void 0:t.layout)&&n===t.id){var r=U.getWorkspaceContentItem(n),o=z(r.element);t.layout.updateSize(o.width,o.height);var i=t.layout.root.getItemsByFilter((function(e){return"stack"===e.type}));e._frameController.selectionChangedDeep(i.map((function(e){return B(e.getActiveContentItem().config.id)})),[])}})),H.onWorkspaceContentsHidden((function(n){var t=U.getById(n);(null==t?void 0:t.layout)&&n===t.id&&e._frameController.selectionChangedDeep([],t.windows.map((function(e){return e.id})))}))}},{key:"subscribeForPopups",value:function(){var e=this;this._frameController.onFrameContentClicked((function(){e._popupManager.hidePopup()})),this._frameController.onWindowTitleChanged((function(n,t){e.setItemTitle(n,t)}))}},{key:"reportLayoutStructure",value:function(e){var n=this;q(e.toConfig().content).forEach((function(t){var r=e.root.getItemsById(t.id)[0];n._frameController.moveFrame(B(r.config.id),z(r.element))}))}},{key:"closeTab",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=B(e.config.id),r=U.getByWindowId(t),o=this.stateResolver.getWindowSummarySync(t);this._controller.removeLayoutElement(t),this._frameController.remove(t),this.notifyFrameWillClose(o.config.windowId,o.config.appName).catch((function(e){})),this.workspacesEventEmitter.raiseWindowEvent({action:"removed",payload:{windowSummary:o}}),!r.windows.length&&n&&this.checkForEmptyWorkspace(r)}},{key:"closeWorkspace",value:function(e){var n=this;if(!e)throw new Error("Could not find a workspace to close");var t=this.stateResolver.getWorkspaceSummary(e.id),r=e.windows.map((function(e){if(U.getWindowContentItem(e.id))return n.stateResolver.getWindowSummarySync(e.id)})).filter((function(e){return e}));e.windows.forEach((function(e){return n._frameController.remove(e.id)}));var o=this.checkForEmptyWorkspace(e);r.forEach((function(e){n.notifyFrameWillClose(e.config.windowId,e.config.appName).catch((function(e){})),n.workspacesEventEmitter.raiseWindowEvent({action:"removed",payload:{windowSummary:e}})})),o||this.workspacesEventEmitter.raiseWorkspaceEvent({action:"closed",payload:{workspaceSummary:t,frameSummary:{id:this._frameId}}})}},{key:"addWorkspace",value:function(e,n){var t;return M(this,void 0,void 0,i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this._glue.contexts.set(J(e),(null===(t=null==n?void 0:n.workspacesOptions)||void 0===t?void 0:t.context)||{});case 2:return r.next=4,this._controller.addWorkspace(e,n);case 4:case"end":return r.stop()}}),r,this)})))}},{key:"checkForEmptyWorkspace",value:function(e){var n;if(1===U.layouts.length){try{if(this._isLayoutInitialized)return this._facade.executeAfterControlIsDone((function(){window.close()})),!0}catch(e){}e.windows=[],null===(n=e.layout)||void 0===n||n.destroy(),e.layout=void 0,this._controller.showAddButton(e.id);var t=U.getWorkspaceTitle(e.id),r=this._configFactory.getWorkspaceTitle(U.workspaceTitles.filter((function(e){return e!==t})));this._controller.setWorkspaceTitle(e.id,r)}else this._controller.removeWorkspace(e.id);return!1}},{key:"waitForFrameLoaded",value:function(e){var n=this;return new Promise((function(t,r){var o=function(){},i=setTimeout((function(){o(),r("Did not hear frame loaded for ".concat(e," in 5000ms"))}),5e3);o=n.workspacesEventEmitter.onWindowEvent((function(n,r){"loaded"===n&&r.windowSummary.itemId===e&&(t(),clearTimeout(i),o())}))}))}},{key:"getUrlByAppName",value:function(e){var n,t,r,o;if(e)return null===(o=null===(r=null===(t=null===(n=this._glue.appManager)||void 0===n?void 0:n.application(e))||void 0===t?void 0:t.userProperties)||void 0===r?void 0:r.details)||void 0===o?void 0:o.url}},{key:"getTitleByAppName",value:function(e){var n,t;if(e)return null===(t=null===(n=this._glue.appManager)||void 0===n?void 0:n.application(e))||void 0===t?void 0:t.title}},{key:"getAppNameByWindowId",value:function(e){var n,t,r,o;return null===(o=null===(r=null===(t=null===(n=this._glue.appManager)||void 0===n?void 0:n.instances())||void 0===t?void 0:t.find((function(n){return n.id===e})))||void 0===r?void 0:r.application)||void 0===o?void 0:o.name}},{key:"notifyFrameWillStart",value:function(e,n,t,r){return this._glue.interop.invoke("T42.Web.Platform.Control",{domain:n?"appManager":"windows",operation:n?"registerWorkspaceApp":"registerWorkspaceWindow",data:{name:"".concat(n||"window","_").concat(e),windowId:e,frameId:this.frameId,appName:n,context:t,title:r}})}},{key:"notifyFrameWillClose",value:function(e,n){return this._glue.interop.invoke("T42.Web.Platform.Control",{domain:n?"appManager":"windows",operation:n?"unregisterWorkspaceApp":"unregisterWorkspaceWindow",data:{windowId:e}})}},{key:"vaidateTitle",value:function(e){if(null==e?void 0:e.length)return e}},{key:"stateResolver",get:function(){return this._stateResolver}},{key:"workspacesEventEmitter",get:function(){return this._workspacesEventEmitter}},{key:"initPromise",get:function(){return this._initPromise}},{key:"initialized",get:function(){return this._initialized}},{key:"frameId",get:function(){return this._frameId}}]),e}()),De=new(function(){function e(){var n=this;Object(l.a)(this,e),this._workspacesControlMethod="T42.Workspaces.Control",this._workspacesEventMethod="T42.Workspaces.Events",this._inDisposing=!1,this.handleControlCore=function(e,t,r,o){return M(n,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Se.initPromise;case 3:n.t0=e.operation,n.next="isWindowInWorkspace"===n.t0?6:"addWindow"===n.t0?8:"addContainer"===n.t0?14:"getWorkspaceSnapshot"===n.t0?20:"openWorkspace"===n.t0?22:"saveLayout"===n.t0?28:"exportAllLayouts"===n.t0?34:"deleteLayout"===n.t0?40:"getAllWorkspacesSummaries"===n.t0?42:"maximizeItem"===n.t0?44:"restoreItem"===n.t0?46:"closeItem"===n.t0?48:"setItemTitle"===n.t0?50:"addWorkspaceChildren"===n.t0?54:"ejectWindow"===n.t0?58:"createWorkspace"===n.t0?64:"forceLoadWindow"===n.t0?70:"focusItem"===n.t0?76:"bundleWorkspace"===n.t0?80:"getFrameSummary"===n.t0?82:"moveFrame"===n.t0?88:"getFrameSnapshot"===n.t0?92:"getSnapshot"===n.t0?98:"moveWindowTo"===n.t0?104:"generateLayout"===n.t0?108:"ping"===n.t0?114:116;break;case 6:return r(this.handleIsWindowInWorkspace(e.operationArguments)),n.abrupt("break",117);case 8:return n.t1=r,n.next=11,this.handleAddWindow(e.operationArguments);case 11:return n.t2=n.sent,(0,n.t1)(n.t2),n.abrupt("break",117);case 14:return n.t3=r,n.next=17,this.handleAddContainer(e.operationArguments);case 17:return n.t4=n.sent,(0,n.t3)(n.t4),n.abrupt("break",117);case 20:return r(this.handleGetWorkspaceSnapshot(e.operationArguments)),n.abrupt("break",117);case 22:return n.t5=r,n.next=25,this.handleOpenWorkspace(e.operationArguments);case 25:return n.t6=n.sent,(0,n.t5)(n.t6),n.abrupt("break",117);case 28:return n.t7=r,n.next=31,this.handleSaveLayout(e.operationArguments);case 31:return n.t8=n.sent,(0,n.t7)(n.t8),n.abrupt("break",117);case 34:return n.t9=r,n.next=37,this.handleExportAllLayouts();case 37:return n.t10=n.sent,(0,n.t9)(n.t10),n.abrupt("break",117);case 40:return this.handleDeleteLayout(e.operationArguments),r(void 0),n.abrupt("break",117);case 42:return r(this.handleGetAllWorkspaceSummaries()),n.abrupt("break",117);case 44:return this.handleMaximizeItem(e.operationArguments),r(void 0),n.abrupt("break",117);case 46:return this.handleRestoreItem(e.operationArguments),r(void 0),n.abrupt("break",117);case 48:return this.handleCloseItem(e.operationArguments),r(void 0),n.abrupt("break",117);case 50:return n.next=52,this.handleSetItemTitle(e.operationArguments);case 52:return r(void 0),n.abrupt("break",117);case 54:return n.next=56,this.handleAddWorkspaceChildren(e.operationArguments);case 56:return r(void 0),n.abrupt("break",117);case 58:return n.t11=r,n.next=61,this.handleEject(e.operationArguments);case 61:return n.t12=n.sent,(0,n.t11)(n.t12),n.abrupt("break",117);case 64:return n.t13=r,n.next=67,this.handleCreateWorkspace(e.operationArguments);case 67:return n.t14=n.sent,(0,n.t13)(n.t14),n.abrupt("break",117);case 70:return n.t15=r,n.next=73,this.handleForceLoadWindow(e.operationArguments);case 73:return n.t16=n.sent,(0,n.t15)(n.t16),n.abrupt("break",117);case 76:return n.next=78,this.handleFocusItem(e.operationArguments);case 78:return r(void 0),n.abrupt("break",117);case 80:return this.handleBundleWorkspace(e.operationArguments),r(void 0),n.abrupt("break",117);case 82:return n.t17=r,n.next=85,this.handleGetFrameSummary(e.operationArguments);case 85:return n.t18=n.sent,(0,n.t17)(n.t18),n.abrupt("break",117);case 88:return n.next=90,this.handleMoveFrame(e.operationArguments);case 90:return r(void 0),n.abrupt("break",117);case 92:return n.t19=r,n.next=95,this.handleGetFrameSnapshot();case 95:return n.t20=n.sent,(0,n.t19)(n.t20),n.abrupt("break",117);case 98:return n.t21=r,n.next=101,this.handleGetSnapshot(e.operationArguments);case 101:return n.t22=n.sent,(0,n.t21)(n.t22),n.abrupt("break",117);case 104:return n.next=106,this.handleMoveWindowTo(e.operationArguments);case 106:return r(void 0),n.abrupt("break",117);case 108:return n.t23=r,n.next=111,this.handleGenerateLayout(e.operationArguments);case 111:return n.t24=n.sent,(0,n.t23)(n.t24),n.abrupt("break",117);case 114:return r(this.handlePing()),n.abrupt("break",117);case 116:o("Invalid operation - "+e.operation);case 117:n.next=122;break;case 119:n.prev=119,n.t25=n.catch(0),o(n.t25.message);case 122:case"end":return n.stop()}}),n,this,[[0,119]])})))},this.handleControl=function(e,t,r,o){return M(n,void 0,void 0,i.a.mark((function n(){var l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=this.handleControlCore(e,t,r,o),this._controlPromise=l,n.next=4,l;case 4:case"end":return n.stop()}}),n,this)})))}}return Object(a.a)(e,[{key:"init",value:function(e,n){return M(this,void 0,void 0,i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._frameId=n,this._glue=e,this._configFactory=new ye(e),this._converter=new Ce(this._configFactory),t.t0=this._glue,!t.t0){t.next=8;break}return t.next=8,this.registerAgmMethods();case 8:case"end":return t.stop()}}),t,this)})))}},{key:"dispose",value:function(){this._inDisposing=!0}},{key:"subscribeForWorkspaceEvents",value:function(){var e=this;Se.workspacesEventEmitter.onFrameEvent((function(n,t){e.publishEventData(n,t,"frame")})),Se.workspacesEventEmitter.onWindowEvent((function(n,t){e.publishEventData(n,t,"window")})),Se.workspacesEventEmitter.onWorkspaceEvent((function(n,t){e.publishEventData(n,t,"workspace")})),Se.workspacesEventEmitter.onContainerEvent((function(n,t){e.publishEventData(n,t,"box")}))}},{key:"executeAfterControlIsDone",value:function(e){this._controlPromise.finally((function(){return e()}))}},{key:"registerAgmMethods",value:function(){return M(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._glue.agm.registerAsync({name:this._workspacesControlMethod},this.handleControl);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"handleOpenWorkspace",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Se.openWorkspace(e.name,e.restoreOptions);case 2:return t=n.sent,r=Se.stateResolver.getWorkspaceConfig(t),o=this._converter.convertToAPIConfig(r),n.abrupt("return",{id:o.id,children:o.children,config:o.config,frameSummary:{id:this._frameId}});case 6:case"end":return n.stop()}}),n,this)})))}},{key:"handleExportAllLayouts",value:function(){return M(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.exportAllLayouts();case 2:return e.t0=e.sent,e.abrupt("return",{layouts:e.t0});case 4:case"end":return e.stop()}}),e)})))}},{key:"handleSaveLayout",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Se.saveWorkspace(e.name,e.workspaceId,e.saveContext);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))}},{key:"handleDeleteLayout",value:function(e){Se.deleteLayout(e.name)}},{key:"handleGetWorkspaceSnapshot",value:function(e){var n=U.getById(e.itemId),t=Se.stateResolver.getWorkspaceConfig(n.id),r=this._converter.convertToAPIConfig(t);return{id:r.id,children:r.children,config:r.config,frameSummary:{id:this._frameId}}}},{key:"handleGetAllWorkspaceSummaries",value:function(){return{summaries:U.layouts.map((function(e){return Se.stateResolver.getWorkspaceSummary(e.id)}))}}},{key:"handleCloseItem",value:function(e){Se.closeItem(e.itemId)}},{key:"handleRestoreItem",value:function(e){Se.restoreItem(e.itemId)}},{key:"handleMaximizeItem",value:function(e){Se.maximizeItem(e.itemId)}},{key:"handleAddContainer",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("workspace"!==(t=this._converter.convertToRendererConfig(e.definition)).type){n.next=3;break}throw new Error("Unsuccessful conversion");case 3:return r={id:B(t.id),content:t.content,type:t.type,workspacesConfig:t.workspacesConfig},n.next=6,Se.addContainer(r,e.parentId);case 6:return n.t0=n.sent,n.abrupt("return",{itemId:n.t0});case 8:case"end":return n.stop()}}),n,this)})))}},{key:"handleAddWindow",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=this._configFactory.createGDWindowConfig({windowId:e.definition.windowId,id:void 0,appName:e.definition.appName,url:e.definition.url,context:e.definition.context}),!e.definition.windowId){n.next=7;break}return r=this._glue.windows.list().find((function(n){return n.id===e.definition.windowId})),n.next=5,r.getURL();case 5:o=n.sent,t.componentState.url=o,t.componentState.appName=this._configFactory.getAppNameFromWindowId(r.id);case 7:return n.next=9,Se.addWindow(t,e.parentId);case 9:return n.abrupt("return",{itemId:B(t.id)});case 10:case"end":return n.stop()}}),n,this)})))}},{key:"handleSetItemTitle",value:function(e){Se.setItemTitle(e.itemId,e.title)}},{key:"handleAddWorkspaceChildren",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r,o,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.children.some((function(e){return"row"===e.type})),!(r=e.children.some((function(e){return"column"===e.type})))||!t){n.next=3;break}throw new Error("Can't add both row and column workspace children");case 3:return o={type:"column",children:e.children},r&&(o={type:"row",children:e.children}),l=this._converter.convertToRendererConfig(o),n.next=8,Se.addContainer(l,e.workspaceId);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"handleEject",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=U.getWindowContentItem(e.itemId)){n.next=3;break}throw new Error("Could not find item "+e.itemId);case 3:return n.next=5,Se.eject(t);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))}},{key:"handleCreateWorkspace",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){var t,r,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.config||(e.config={}),e.config.context=e.config.context||e.context,t=this._converter.convertToRendererConfig(e),n.next=4,Se.createWorkspace(t);case 4:return r=n.sent,o=this._converter.convertToAPIConfig(Se.stateResolver.getWorkspaceConfig(r)),n.abrupt("return",{id:o.id,children:o.children,config:o.config,frameSummary:{id:this._frameId}});case 7:case"end":return n.stop()}}),n,this)})))}},{key:"handleForceLoadWindow",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Se.loadWindow(e.itemId);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))}},{key:"handleFocusItem",value:function(e){return Se.focusItem(e.itemId)}},{key:"handleBundleWorkspace",value:function(e){return Se.bundleWorkspace(e.workspaceId,e.type)}},{key:"handleIsWindowInWorkspace",value:function(e){return{inWorkspace:Se.stateResolver.isWindowInWorkspace(e.itemId)}}},{key:"handleGetFrameSummary",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Se.getFrameSummary(e.itemId));case 1:case"end":return n.stop()}}),n)})))}},{key:"handleMoveFrame",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Se.move(e.location);case 2:case"end":return n.stop()}}),n)})))}},{key:"handleGetFrameSnapshot",value:function(){return Se.stateResolver.getFrameSnapshot()}},{key:"handleGetSnapshot",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Se.stateResolver.getSnapshot(e.itemId));case 1:case"end":return n.stop()}}),n)})))}},{key:"handleMoveWindowTo",value:function(e){return M(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Se.moveWindowTo(e.itemId,e.containerId));case 1:case"end":return n.stop()}}),n)})))}},{key:"handleGenerateLayout",value:function(e){return Se.generateWorkspaceLayout(e.name,e.workspaceId)}},{key:"handlePing",value:function(){return{live:!this._inDisposing}}},{key:"publishEventData",value:function(e,n,t){var r=this;if(this._glue.agm.methods().some((function(e){return e.name===r._workspacesEventMethod}))){var o={action:e,type:t,payload:n};this._glue.agm.invoke(this._workspacesEventMethod,o).catch((function(){}))}}}]),e}()),Re=j((function(e){var n,t;n="undefined"!=typeof window?window:P,t=function(e,n){var t=[],r=Object.getPrototypeOf,o=t.slice,i=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},l=t.push,a=t.indexOf,u={},s=u.toString,c=u.hasOwnProperty,d=c.toString,f=d.call(Object),p={},h=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},_=function(e){return null!=e&&e===e.window},g=e.document,m={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,n,t){var r,o,i=(t=t||g).createElement("script");if(i.text=e,n)for(r in m)(o=n[r]||n.getAttribute&&n.getAttribute(r))&&i.setAttribute(r,o);t.head.appendChild(i).parentNode.removeChild(i)}function v(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[s.call(e)]||"object":typeof e}var b="3.5.1",y=function e(n,t){return new e.fn.init(n,t)};function k(e){var n=!!e&&"length"in e&&e.length,t=v(e);return!h(e)&&!_(e)&&("array"===t||0===n||"number"==typeof n&&n>0&&n-1 in e)}y.fn=y.prototype={jquery:b,constructor:y,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var n=y.merge(this.constructor(),e);return n.prevObject=this,n},each:function(e){return y.each(this,e)},map:function(e){return this.pushStack(y.map(this,(function(n,t){return e.call(n,t,n)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(y.grep(this,(function(e,n){return(n+1)%2})))},odd:function(){return this.pushStack(y.grep(this,(function(e,n){return n%2})))},eq:function(e){var n=this.length,t=+e+(e<0?n:0);return this.pushStack(t>=0&&t<n?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},y.extend=y.fn.extend=function(){var e,n,t,r,o,i,l=arguments[0]||{},a=1,u=arguments.length,s=!1;for("boolean"==typeof l&&(s=l,l=arguments[a]||{},a++),"object"==typeof l||h(l)||(l={}),a===u&&(l=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(n in e)r=e[n],"__proto__"!==n&&l!==r&&(s&&r&&(y.isPlainObject(r)||(o=Array.isArray(r)))?(t=l[n],i=o&&!Array.isArray(t)?[]:o||y.isPlainObject(t)?t:{},o=!1,l[n]=y.extend(s,i,r)):void 0!==r&&(l[n]=r));return l},y.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var n,t;return!(!e||"[object Object]"!==s.call(e)||(n=r(e))&&("function"!=typeof(t=c.call(n,"constructor")&&n.constructor)||d.call(t)!==f))},isEmptyObject:function(e){var n;for(n in e)return!1;return!0},globalEval:function(e,n,t){w(e,{nonce:n&&n.nonce},t)},each:function(e,n){var t,r=0;if(k(e))for(t=e.length;r<t&&!1!==n.call(e[r],r,e[r]);r++);else for(r in e)if(!1===n.call(e[r],r,e[r]))break;return e},makeArray:function(e,n){var t=n||[];return null!=e&&(k(Object(e))?y.merge(t,"string"==typeof e?[e]:e):l.call(t,e)),t},inArray:function(e,n,t){return null==n?-1:a.call(n,e,t)},merge:function(e,n){for(var t=+n.length,r=0,o=e.length;r<t;r++)e[o++]=n[r];return e.length=o,e},grep:function(e,n,t){for(var r=[],o=0,i=e.length,l=!t;o<i;o++)!n(e[o],o)!==l&&r.push(e[o]);return r},map:function(e,n,t){var r,o,l=0,a=[];if(k(e))for(r=e.length;l<r;l++)null!=(o=n(e[l],l,t))&&a.push(o);else for(l in e)null!=(o=n(e[l],l,t))&&a.push(o);return i(a)},guid:1,support:p}),"function"==typeof Symbol&&(y.fn[Symbol.iterator]=t[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,n){u["[object "+n+"]"]=n.toLowerCase()}));var C=function(e){var n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b="sizzle"+1*new Date,y=e.document,k=0,C=0,I=ue(),x=ue(),E=ue(),S=ue(),D=function(e,n){return e===n&&(d=!0),0},R={}.hasOwnProperty,O=[],A=O.pop,T=O.push,M=O.push,P=O.slice,j=function(e,n){for(var t=0,r=e.length;t<r;t++)if(e[t]===n)return t;return-1},$="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",W="[\\x20\\t\\r\\n\\f]",Q="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",N="\\[[\\x20\\t\\r\\n\\f]*("+Q+")(?:"+W+"*([*^$|!~]?=)"+W+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Q+"))|)"+W+"*\\]",G=":("+Q+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",F=new RegExp(W+"+","g"),L=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),B=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),z=new RegExp(W+"|>"),J=new RegExp(G),U=new RegExp("^"+Q+"$"),V={ID:new RegExp("^#("+Q+")"),CLASS:new RegExp("^\\.("+Q+")"),TAG:new RegExp("^("+Q+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+G),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+$+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},H=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,ne=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),te=function(e,n){var t="0x"+e.slice(1)-65536;return n||(t<0?String.fromCharCode(t+65536):String.fromCharCode(t>>10|55296,1023&t|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,n){return n?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){f()},le=be((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{M.apply(O=P.call(y.childNodes),y.childNodes),O[y.childNodes.length].nodeType}catch(e){M={apply:O.length?function(e,n){T.apply(e,P.call(n))}:function(e,n){for(var t=e.length,r=0;e[t++]=n[r++];);e.length=t-1}}}function ae(e,n,r,o){var i,a,s,c,d,h,m,w=n&&n.ownerDocument,y=n?n.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==y&&9!==y&&11!==y)return r;if(!o&&(f(n),n=n||p,_)){if(11!==y&&(d=Y.exec(e)))if(i=d[1]){if(9===y){if(!(s=n.getElementById(i)))return r;if(s.id===i)return r.push(s),r}else if(w&&(s=w.getElementById(i))&&v(n,s)&&s.id===i)return r.push(s),r}else{if(d[2])return M.apply(r,n.getElementsByTagName(e)),r;if((i=d[3])&&t.getElementsByClassName&&n.getElementsByClassName)return M.apply(r,n.getElementsByClassName(i)),r}if(t.qsa&&!S[e+" "]&&(!g||!g.test(e))&&(1!==y||"object"!==n.nodeName.toLowerCase())){if(m=e,w=n,1===y&&(z.test(e)||q.test(e))){for((w=ee.test(e)&&me(n.parentNode)||n)===n&&t.scope||((c=n.getAttribute("id"))?c=c.replace(re,oe):n.setAttribute("id",c=b)),a=(h=l(e)).length;a--;)h[a]=(c?"#"+c:":scope")+" "+ve(h[a]);m=h.join(",")}try{return M.apply(r,w.querySelectorAll(m)),r}catch(n){S(e,!0)}finally{c===b&&n.removeAttribute("id")}}}return u(e.replace(L,"$1"),n,r,o)}function ue(){var e=[];return function n(t,o){return e.push(t+" ")>r.cacheLength&&delete n[e.shift()],n[t+" "]=o}}function se(e){return e[b]=!0,e}function ce(e){var n=p.createElement("fieldset");try{return!!e(n)}catch(e){return!1}finally{n.parentNode&&n.parentNode.removeChild(n),n=null}}function de(e,n){for(var t=e.split("|"),o=t.length;o--;)r.attrHandle[t[o]]=n}function fe(e,n){var t=n&&e,r=t&&1===e.nodeType&&1===n.nodeType&&e.sourceIndex-n.sourceIndex;if(r)return r;if(t)for(;t=t.nextSibling;)if(t===n)return-1;return e?1:-1}function pe(e){return function(n){return"input"===n.nodeName.toLowerCase()&&n.type===e}}function he(e){return function(n){var t=n.nodeName.toLowerCase();return("input"===t||"button"===t)&&n.type===e}}function _e(e){return function(n){return"form"in n?n.parentNode&&!1===n.disabled?"label"in n?"label"in n.parentNode?n.parentNode.disabled===e:n.disabled===e:n.isDisabled===e||n.isDisabled!==!e&&le(n)===e:n.disabled===e:"label"in n&&n.disabled===e}}function ge(e){return se((function(n){return n=+n,se((function(t,r){for(var o,i=e([],t.length,n),l=i.length;l--;)t[o=i[l]]&&(t[o]=!(r[o]=t[o]))}))}))}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(n in t=ae.support={},i=ae.isXML=function(e){var n=e.namespaceURI,t=(e.ownerDocument||e).documentElement;return!H.test(n||t&&t.nodeName||"HTML")},f=ae.setDocument=function(e){var n,o,l=e?e.ownerDocument||e:y;return l!=p&&9===l.nodeType&&l.documentElement?(h=(p=l).documentElement,_=!i(p),y!=p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ie,!1):o.attachEvent&&o.attachEvent("onunload",ie)),t.scope=ce((function(e){return h.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),t.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),t.getElementsByTagName=ce((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),t.getElementsByClassName=Z.test(p.getElementsByClassName),t.getById=ce((function(e){return h.appendChild(e).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),t.getById?(r.filter.ID=function(e){var n=e.replace(ne,te);return function(e){return e.getAttribute("id")===n}},r.find.ID=function(e,n){if(void 0!==n.getElementById&&_){var t=n.getElementById(e);return t?[t]:[]}}):(r.filter.ID=function(e){var n=e.replace(ne,te);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},r.find.ID=function(e,n){if(void 0!==n.getElementById&&_){var t,r,o,i=n.getElementById(e);if(i){if((t=i.getAttributeNode("id"))&&t.value===e)return[i];for(o=n.getElementsByName(e),r=0;i=o[r++];)if((t=i.getAttributeNode("id"))&&t.value===e)return[i]}return[]}}),r.find.TAG=t.getElementsByTagName?function(e,n){return void 0!==n.getElementsByTagName?n.getElementsByTagName(e):t.qsa?n.querySelectorAll(e):void 0}:function(e,n){var t,r=[],o=0,i=n.getElementsByTagName(e);if("*"===e){for(;t=i[o++];)1===t.nodeType&&r.push(t);return r}return i},r.find.CLASS=t.getElementsByClassName&&function(e,n){if(void 0!==n.getElementsByClassName&&_)return n.getElementsByClassName(e)},m=[],g=[],(t.qsa=Z.test(p.querySelectorAll))&&(ce((function(e){var n;h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+$+")"),e.querySelectorAll("[id~="+b+"-]").length||g.push("~="),(n=p.createElement("input")).setAttribute("name",""),e.appendChild(n),e.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var n=p.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(t.matchesSelector=Z.test(w=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ce((function(e){t.disconnectedMatch=w.call(e,"*"),w.call(e,"[s!='']:x"),m.push("!=",G)})),g=g.length&&new RegExp(g.join("|")),m=m.length&&new RegExp(m.join("|")),n=Z.test(h.compareDocumentPosition),v=n||Z.test(h.contains)?function(e,n){var t=9===e.nodeType?e.documentElement:e,r=n&&n.parentNode;return e===r||!(!r||1!==r.nodeType||!(t.contains?t.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,n){if(n)for(;n=n.parentNode;)if(n===e)return!0;return!1},D=n?function(e,n){if(e===n)return d=!0,0;var r=!e.compareDocumentPosition-!n.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(n.ownerDocument||n)?e.compareDocumentPosition(n):1)||!t.sortDetached&&n.compareDocumentPosition(e)===r?e==p||e.ownerDocument==y&&v(y,e)?-1:n==p||n.ownerDocument==y&&v(y,n)?1:c?j(c,e)-j(c,n):0:4&r?-1:1)}:function(e,n){if(e===n)return d=!0,0;var t,r=0,o=e.parentNode,i=n.parentNode,l=[e],a=[n];if(!o||!i)return e==p?-1:n==p?1:o?-1:i?1:c?j(c,e)-j(c,n):0;if(o===i)return fe(e,n);for(t=e;t=t.parentNode;)l.unshift(t);for(t=n;t=t.parentNode;)a.unshift(t);for(;l[r]===a[r];)r++;return r?fe(l[r],a[r]):l[r]==y?-1:a[r]==y?1:0},p):p},ae.matches=function(e,n){return ae(e,null,null,n)},ae.matchesSelector=function(e,n){if(f(e),t.matchesSelector&&_&&!S[n+" "]&&(!m||!m.test(n))&&(!g||!g.test(n)))try{var r=w.call(e,n);if(r||t.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){S(n,!0)}return ae(n,p,null,[e]).length>0},ae.contains=function(e,n){return(e.ownerDocument||e)!=p&&f(e),v(e,n)},ae.attr=function(e,n){(e.ownerDocument||e)!=p&&f(e);var o=r.attrHandle[n.toLowerCase()],i=o&&R.call(r.attrHandle,n.toLowerCase())?o(e,n,!_):void 0;return void 0!==i?i:t.attributes||!_?e.getAttribute(n):(i=e.getAttributeNode(n))&&i.specified?i.value:null},ae.escape=function(e){return(e+"").replace(re,oe)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var n,r=[],o=0,i=0;if(d=!t.detectDuplicates,c=!t.sortStable&&e.slice(0),e.sort(D),d){for(;n=e[i++];)n===e[i]&&(o=r.push(i));for(;o--;)e.splice(r[o],1)}return c=null,e},o=ae.getText=function(e){var n,t="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)t+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;n=e[r++];)t+=o(n);return t},(r=ae.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,te),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var n,t=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":t&&J.test(t)&&(n=l(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(e[0]=e[0].slice(0,n),e[2]=t.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var n=e.replace(ne,te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===n}},CLASS:function(e){var n=I[e+" "];return n||(n=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+W+"|$)"))&&I(e,(function(e){return n.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,n,t){return function(r){var o=ae.attr(r,e);return null==o?"!="===n:!n||(o+="","="===n?o===t:"!="===n?o!==t:"^="===n?t&&0===o.indexOf(t):"*="===n?t&&o.indexOf(t)>-1:"$="===n?t&&o.slice(-t.length)===t:"~="===n?(" "+o.replace(F," ")+" ").indexOf(t)>-1:"|="===n&&(o===t||o.slice(0,t.length+1)===t+"-"))}},CHILD:function(e,n,t,r,o){var i="nth"!==e.slice(0,3),l="last"!==e.slice(-4),a="of-type"===n;return 1===r&&0===o?function(e){return!!e.parentNode}:function(n,t,u){var s,c,d,f,p,h,_=i!==l?"nextSibling":"previousSibling",g=n.parentNode,m=a&&n.nodeName.toLowerCase(),w=!u&&!a,v=!1;if(g){if(i){for(;_;){for(f=n;f=f[_];)if(a?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;h=_="only"===e&&!h&&"nextSibling"}return!0}if(h=[l?g.firstChild:g.lastChild],l&&w){for(v=(p=(s=(c=(d=(f=g)[b]||(f[b]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===k&&s[1])&&s[2],f=p&&g.childNodes[p];f=++p&&f&&f[_]||(v=p=0)||h.pop();)if(1===f.nodeType&&++v&&f===n){c[e]=[k,p,v];break}}else if(w&&(v=p=(s=(c=(d=(f=n)[b]||(f[b]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===k&&s[1]),!1===v)for(;(f=++p&&f&&f[_]||(v=p=0)||h.pop())&&((a?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++v||(w&&((c=(d=f[b]||(f[b]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]=[k,v]),f!==n)););return(v-=o)===r||v%r==0&&v/r>=0}}},PSEUDO:function(e,n){var t,o=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return o[b]?o(n):o.length>1?(t=[e,e,"",n],r.setFilters.hasOwnProperty(e.toLowerCase())?se((function(e,t){for(var r,i=o(e,n),l=i.length;l--;)e[r=j(e,i[l])]=!(t[r]=i[l])})):function(e){return o(e,0,t)}):o}},pseudos:{not:se((function(e){var n=[],t=[],r=a(e.replace(L,"$1"));return r[b]?se((function(e,n,t,o){for(var i,l=r(e,null,o,[]),a=e.length;a--;)(i=l[a])&&(e[a]=!(n[a]=i))})):function(e,o,i){return n[0]=e,r(n,null,i,t),n[0]=null,!t.pop()}})),has:se((function(e){return function(n){return ae(e,n).length>0}})),contains:se((function(e){return e=e.replace(ne,te),function(n){return(n.textContent||o(n)).indexOf(e)>-1}})),lang:se((function(e){return U.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(ne,te).toLowerCase(),function(n){var t;do{if(t=_?n.lang:n.getAttribute("xml:lang")||n.getAttribute("lang"))return(t=t.toLowerCase())===e||0===t.indexOf(e+"-")}while((n=n.parentNode)&&1===n.nodeType);return!1}})),target:function(n){var t=e.location&&e.location.hash;return t&&t.slice(1)===n.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:_e(!1),disabled:_e(!0),checked:function(e){var n=e.nodeName.toLowerCase();return"input"===n&&!!e.checked||"option"===n&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var n=e.nodeName.toLowerCase();return"input"===n&&"button"===e.type||"button"===n},text:function(e){var n;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(n=e.getAttribute("type"))||"text"===n.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,n){return[n-1]})),eq:ge((function(e,n,t){return[t<0?t+n:t]})),even:ge((function(e,n){for(var t=0;t<n;t+=2)e.push(t);return e})),odd:ge((function(e,n){for(var t=1;t<n;t+=2)e.push(t);return e})),lt:ge((function(e,n,t){for(var r=t<0?t+n:t>n?n:t;--r>=0;)e.push(r);return e})),gt:ge((function(e,n,t){for(var r=t<0?t+n:t;++r<n;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[n]=pe(n);for(n in{submit:!0,reset:!0})r.pseudos[n]=he(n);function we(){}function ve(e){for(var n=0,t=e.length,r="";n<t;n++)r+=e[n].value;return r}function be(e,n,t){var r=n.dir,o=n.next,i=o||r,l=t&&"parentNode"===i,a=C++;return n.first?function(n,t,o){for(;n=n[r];)if(1===n.nodeType||l)return e(n,t,o);return!1}:function(n,t,u){var s,c,d,f=[k,a];if(u){for(;n=n[r];)if((1===n.nodeType||l)&&e(n,t,u))return!0}else for(;n=n[r];)if(1===n.nodeType||l)if(c=(d=n[b]||(n[b]={}))[n.uniqueID]||(d[n.uniqueID]={}),o&&o===n.nodeName.toLowerCase())n=n[r]||n;else{if((s=c[i])&&s[0]===k&&s[1]===a)return f[2]=s[2];if(c[i]=f,f[2]=e(n,t,u))return!0}return!1}}function ye(e){return e.length>1?function(n,t,r){for(var o=e.length;o--;)if(!e[o](n,t,r))return!1;return!0}:e[0]}function ke(e,n,t,r,o){for(var i,l=[],a=0,u=e.length,s=null!=n;a<u;a++)(i=e[a])&&(t&&!t(i,r,o)||(l.push(i),s&&n.push(a)));return l}function Ce(e,n,t,r,o,i){return r&&!r[b]&&(r=Ce(r)),o&&!o[b]&&(o=Ce(o,i)),se((function(i,l,a,u){var s,c,d,f=[],p=[],h=l.length,_=i||function(e,n,t){for(var r=0,o=n.length;r<o;r++)ae(e,n[r],t);return t}(n||"*",a.nodeType?[a]:a,[]),g=!e||!i&&n?_:ke(_,f,e,a,u),m=t?o||(i?e:h||r)?[]:l:g;if(t&&t(g,m,a,u),r)for(s=ke(m,p),r(s,[],a,u),c=s.length;c--;)(d=s[c])&&(m[p[c]]=!(g[p[c]]=d));if(i){if(o||e){if(o){for(s=[],c=m.length;c--;)(d=m[c])&&s.push(g[c]=d);o(null,m=[],s,u)}for(c=m.length;c--;)(d=m[c])&&(s=o?j(i,d):f[c])>-1&&(i[s]=!(l[s]=d))}}else m=ke(m===l?m.splice(h,m.length):m),o?o(null,l,m,u):M.apply(l,m)}))}function Ie(e){for(var n,t,o,i=e.length,l=r.relative[e[0].type],a=l||r.relative[" "],u=l?1:0,c=be((function(e){return e===n}),a,!0),d=be((function(e){return j(n,e)>-1}),a,!0),f=[function(e,t,r){var o=!l&&(r||t!==s)||((n=t).nodeType?c(e,t,r):d(e,t,r));return n=null,o}];u<i;u++)if(t=r.relative[e[u].type])f=[be(ye(f),t)];else{if((t=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(o=++u;o<i&&!r.relative[e[o].type];o++);return Ce(u>1&&ye(f),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(L,"$1"),t,u<o&&Ie(e.slice(u,o)),o<i&&Ie(e=e.slice(o)),o<i&&ve(e))}f.push(t)}return ye(f)}return we.prototype=r.filters=r.pseudos,r.setFilters=new we,l=ae.tokenize=function(e,n){var t,o,i,l,a,u,s,c=x[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],s=r.preFilter;a;){for(l in t&&!(o=B.exec(a))||(o&&(a=a.slice(o[0].length)||a),u.push(i=[])),t=!1,(o=q.exec(a))&&(t=o.shift(),i.push({value:t,type:o[0].replace(L," ")}),a=a.slice(t.length)),r.filter)!(o=V[l].exec(a))||s[l]&&!(o=s[l](o))||(t=o.shift(),i.push({value:t,type:l,matches:o}),a=a.slice(t.length));if(!t)break}return n?a.length:a?ae.error(e):x(e,u).slice(0)},a=ae.compile=function(e,n){var t,o=[],i=[],a=E[e+" "];if(!a){for(n||(n=l(e)),t=n.length;t--;)(a=Ie(n[t]))[b]?o.push(a):i.push(a);(a=E(e,function(e,n){var t=n.length>0,o=e.length>0,i=function(i,l,a,u,c){var d,h,g,m=0,w="0",v=i&&[],b=[],y=s,C=i||o&&r.find.TAG("*",c),I=k+=null==y?1:Math.random()||.1,x=C.length;for(c&&(s=l==p||l||c);w!==x&&null!=(d=C[w]);w++){if(o&&d){for(h=0,l||d.ownerDocument==p||(f(d),a=!_);g=e[h++];)if(g(d,l||p,a)){u.push(d);break}c&&(k=I)}t&&((d=!g&&d)&&m--,i&&v.push(d))}if(m+=w,t&&w!==m){for(h=0;g=n[h++];)g(v,b,l,a);if(i){if(m>0)for(;w--;)v[w]||b[w]||(b[w]=A.call(u));b=ke(b)}M.apply(u,b),c&&!i&&b.length>0&&m+n.length>1&&ae.uniqueSort(u)}return c&&(k=I,s=y),v};return t?se(i):i}(i,o))).selector=e}return a},u=ae.select=function(e,n,t,o){var i,u,s,c,d,f="function"==typeof e&&e,p=!o&&l(e=f.selector||e);if(t=t||[],1===p.length){if((u=p[0]=p[0].slice(0)).length>2&&"ID"===(s=u[0]).type&&9===n.nodeType&&_&&r.relative[u[1].type]){if(!(n=(r.find.ID(s.matches[0].replace(ne,te),n)||[])[0]))return t;f&&(n=n.parentNode),e=e.slice(u.shift().value.length)}for(i=V.needsContext.test(e)?0:u.length;i--&&(s=u[i],!r.relative[c=s.type]);)if((d=r.find[c])&&(o=d(s.matches[0].replace(ne,te),ee.test(u[0].type)&&me(n.parentNode)||n))){if(u.splice(i,1),!(e=o.length&&ve(u)))return M.apply(t,o),t;break}}return(f||a(e,p))(o,n,!_,t,!n||ee.test(e)&&me(n.parentNode)||n),t},t.sortStable=b.split("").sort(D).join("")===b,t.detectDuplicates=!!d,f(),t.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,n,t){if(!t)return e.getAttribute(n,"type"===n.toLowerCase()?1:2)})),t.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,n,t){if(!t&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||de($,(function(e,n,t){var r;if(!t)return!0===e[n]?n.toLowerCase():(r=e.getAttributeNode(n))&&r.specified?r.value:null})),ae}(e);y.find=C,(y.expr=C.selectors)[":"]=y.expr.pseudos,y.uniqueSort=y.unique=C.uniqueSort,y.text=C.getText,y.isXMLDoc=C.isXML,y.contains=C.contains,y.escapeSelector=C.escape;var I=function(e,n,t){for(var r=[],o=void 0!==t;(e=e[n])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&y(e).is(t))break;r.push(e)}return r},x=function(e,n){for(var t=[];e;e=e.nextSibling)1===e.nodeType&&e!==n&&t.push(e);return t},E=y.expr.match.needsContext;function S(e,n){return e.nodeName&&e.nodeName.toLowerCase()===n.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function R(e,n,t){return h(n)?y.grep(e,(function(e,r){return!!n.call(e,r,e)!==t})):n.nodeType?y.grep(e,(function(e){return e===n!==t})):"string"!=typeof n?y.grep(e,(function(e){return a.call(n,e)>-1!==t})):y.filter(n,e,t)}y.filter=function(e,n,t){var r=n[0];return t&&(e=":not("+e+")"),1===n.length&&1===r.nodeType?y.find.matchesSelector(r,e)?[r]:[]:y.find.matches(e,y.grep(n,(function(e){return 1===e.nodeType})))},y.fn.extend({find:function(e){var n,t,r=this.length,o=this;if("string"!=typeof e)return this.pushStack(y(e).filter((function(){for(n=0;n<r;n++)if(y.contains(o[n],this))return!0})));for(t=this.pushStack([]),n=0;n<r;n++)y.find(e,o[n],t);return r>1?y.uniqueSort(t):t},filter:function(e){return this.pushStack(R(this,e||[],!1))},not:function(e){return this.pushStack(R(this,e||[],!0))},is:function(e){return!!R(this,"string"==typeof e&&E.test(e)?y(e):e||[],!1).length}});var O,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(y.fn.init=function(e,n,t){var r,o;if(!e)return this;if(t=t||O,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:A.exec(e))||!r[1]&&n)return!n||n.jquery?(n||t).find(e):this.constructor(n).find(e);if(r[1]){if(n=n instanceof y?n[0]:n,y.merge(this,y.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:g,!0)),D.test(r[1])&&y.isPlainObject(n))for(r in n)h(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return(o=g.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):h(e)?void 0!==t.ready?t.ready(e):e(y):y.makeArray(e,this)}).prototype=y.fn,O=y(g);var T=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function P(e,n){for(;(e=e[n])&&1!==e.nodeType;);return e}y.fn.extend({has:function(e){var n=y(e,this),t=n.length;return this.filter((function(){for(var e=0;e<t;e++)if(y.contains(this,n[e]))return!0}))},closest:function(e,n){var t,r=0,o=this.length,i=[],l="string"!=typeof e&&y(e);if(!E.test(e))for(;r<o;r++)for(t=this[r];t&&t!==n;t=t.parentNode)if(t.nodeType<11&&(l?l.index(t)>-1:1===t.nodeType&&y.find.matchesSelector(t,e))){i.push(t);break}return this.pushStack(i.length>1?y.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?a.call(y(e),this[0]):a.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,n){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(e,n))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),y.each({parent:function(e){var n=e.parentNode;return n&&11!==n.nodeType?n:null},parents:function(e){return I(e,"parentNode")},parentsUntil:function(e,n,t){return I(e,"parentNode",t)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return I(e,"nextSibling")},prevAll:function(e){return I(e,"previousSibling")},nextUntil:function(e,n,t){return I(e,"nextSibling",t)},prevUntil:function(e,n,t){return I(e,"previousSibling",t)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(S(e,"template")&&(e=e.content||e),y.merge([],e.childNodes))}},(function(e,n){y.fn[e]=function(t,r){var o=y.map(this,n,t);return"Until"!==e.slice(-5)&&(r=t),r&&"string"==typeof r&&(o=y.filter(r,o)),this.length>1&&(M[e]||y.uniqueSort(o),T.test(e)&&o.reverse()),this.pushStack(o)}}));var j=/[^\x20\t\r\n\f]+/g;function $(e){return e}function W(e){throw e}function Q(e,n,t,r){var o;try{e&&h(o=e.promise)?o.call(e).done(n).fail(t):e&&h(o=e.then)?o.call(e,n,t):n.apply(void 0,[e].slice(r))}catch(e){t.apply(void 0,[e])}}y.Callbacks=function(e){e="string"==typeof e?function(e){var n={};return y.each(e.match(j)||[],(function(e,t){n[t]=!0})),n}(e):y.extend({},e);var n,t,r,o,i=[],l=[],a=-1,u=function(){for(o=o||e.once,r=n=!0;l.length;a=-1)for(t=l.shift();++a<i.length;)!1===i[a].apply(t[0],t[1])&&e.stopOnFalse&&(a=i.length,t=!1);e.memory||(t=!1),n=!1,o&&(i=t?[]:"")},s={add:function(){return i&&(t&&!n&&(a=i.length-1,l.push(t)),function n(t){y.each(t,(function(t,r){h(r)?e.unique&&s.has(r)||i.push(r):r&&r.length&&"string"!==v(r)&&n(r)}))}(arguments),t&&!n&&u()),this},remove:function(){return y.each(arguments,(function(e,n){for(var t;(t=y.inArray(n,i,t))>-1;)i.splice(t,1),t<=a&&a--})),this},has:function(e){return e?y.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return o=l=[],i=t="",this},disabled:function(){return!i},lock:function(){return o=l=[],t||n||(i=t=""),this},locked:function(){return!!o},fireWith:function(e,t){return o||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),n||u()),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!r}};return s},y.extend({Deferred:function(n){var t=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return y.Deferred((function(n){y.each(t,(function(t,r){var o=h(e[r[4]])&&e[r[4]];i[r[1]]((function(){var e=o&&o.apply(this,arguments);e&&h(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(n,r,o){var i=0;function l(n,t,r,o){return function(){var a=this,u=arguments,s=function(){var e,s;if(!(n<i)){if((e=r.apply(a,u))===t.promise())throw new TypeError("Thenable self-resolution");s=e&&("object"==typeof e||"function"==typeof e)&&e.then,h(s)?o?s.call(e,l(i,t,$,o),l(i,t,W,o)):(i++,s.call(e,l(i,t,$,o),l(i,t,W,o),l(i,t,$,t.notifyWith))):(r!==$&&(a=void 0,u=[e]),(o||t.resolveWith)(a,u))}},c=o?s:function(){try{s()}catch(e){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(e,c.stackTrace),n+1>=i&&(r!==W&&(a=void 0,u=[e]),t.rejectWith(a,u))}};n?c():(y.Deferred.getStackHook&&(c.stackTrace=y.Deferred.getStackHook()),e.setTimeout(c))}}return y.Deferred((function(e){t[0][3].add(l(0,e,h(o)?o:$,e.notifyWith)),t[1][3].add(l(0,e,h(n)?n:$)),t[2][3].add(l(0,e,h(r)?r:W))})).promise()},promise:function(e){return null!=e?y.extend(e,o):o}},i={};return y.each(t,(function(e,n){var l=n[2],a=n[5];o[n[1]]=l.add,a&&l.add((function(){r=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),l.add(n[3].fire),i[n[0]]=function(){return i[n[0]+"With"](this===i?void 0:this,arguments),this},i[n[0]+"With"]=l.fireWith})),o.promise(i),n&&n.call(i,i),i},when:function(e){var n=arguments.length,t=n,r=Array(t),i=o.call(arguments),l=y.Deferred(),a=function(e){return function(t){r[e]=this,i[e]=arguments.length>1?o.call(arguments):t,--n||l.resolveWith(r,i)}};if(n<=1&&(Q(e,l.done(a(t)).resolve,l.reject,!n),"pending"===l.state()||h(i[t]&&i[t].then)))return l.then();for(;t--;)Q(i[t],a(t),l.reject);return l.promise()}});var N=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(n,t){e.console&&e.console.warn&&n&&N.test(n.name)&&e.console.warn("jQuery.Deferred exception: "+n.message,n.stack,t)},y.readyException=function(n){e.setTimeout((function(){throw n}))};var G=y.Deferred();function F(){g.removeEventListener("DOMContentLoaded",F),e.removeEventListener("load",F),y.ready()}y.fn.ready=function(e){return G.then(e).catch((function(e){y.readyException(e)})),this},y.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--y.readyWait:y.isReady)||(y.isReady=!0,!0!==e&&--y.readyWait>0||G.resolveWith(g,[y]))}}),y.ready.then=G.then,"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?e.setTimeout(y.ready):(g.addEventListener("DOMContentLoaded",F),e.addEventListener("load",F));var L=function e(n,t,r,o,i,l,a){var u=0,s=n.length,c=null==r;if("object"===v(r))for(u in i=!0,r)e(n,t,u,r[u],!0,l,a);else if(void 0!==o&&(i=!0,h(o)||(a=!0),c&&(a?(t.call(n,o),t=null):(c=t,t=function(e,n,t){return c.call(y(e),t)})),t))for(;u<s;u++)t(n[u],r,a?o:o.call(n[u],u,t(n[u],r)));return i?n:c?t.call(n):s?t(n[0],r):l},B=/^-ms-/,q=/-([a-z])/g;function z(e,n){return n.toUpperCase()}function J(e){return e.replace(B,"ms-").replace(q,z)}var U=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function V(){this.expando=y.expando+V.uid++}V.uid=1,V.prototype={cache:function(e){var n=e[this.expando];return n||(n={},U(e)&&(e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,configurable:!0}))),n},set:function(e,n,t){var r,o=this.cache(e);if("string"==typeof n)o[J(n)]=t;else for(r in n)o[J(r)]=n[r];return o},get:function(e,n){return void 0===n?this.cache(e):e[this.expando]&&e[this.expando][J(n)]},access:function(e,n,t){return void 0===n||n&&"string"==typeof n&&void 0===t?this.get(e,n):(this.set(e,n,t),void 0!==t?t:n)},remove:function(e,n){var t,r=e[this.expando];if(void 0!==r){if(void 0!==n){t=(n=Array.isArray(n)?n.map(J):(n=J(n))in r?[n]:n.match(j)||[]).length;for(;t--;)delete r[n[t]]}(void 0===n||y.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var n=e[this.expando];return void 0!==n&&!y.isEmptyObject(n)}};var H=new V,K=new V,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function Y(e,n,t){var r;if(void 0===t&&1===e.nodeType)if(r="data-"+n.replace(Z,"-$&").toLowerCase(),"string"==typeof(t=e.getAttribute(r))){try{t=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:X.test(e)?JSON.parse(e):e)}(t)}catch(e){}K.set(e,n,t)}else t=void 0;return t}y.extend({hasData:function(e){return K.hasData(e)||H.hasData(e)},data:function(e,n,t){return K.access(e,n,t)},removeData:function(e,n){K.remove(e,n)},_data:function(e,n,t){return H.access(e,n,t)},_removeData:function(e,n){H.remove(e,n)}}),y.fn.extend({data:function(e,n){var t,r,o,i=this[0],l=i&&i.attributes;if(void 0===e){if(this.length&&(o=K.get(i),1===i.nodeType&&!H.get(i,"hasDataAttrs"))){for(t=l.length;t--;)l[t]&&0===(r=l[t].name).indexOf("data-")&&(r=J(r.slice(5)),Y(i,r,o[r]));H.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){K.set(this,e)})):L(this,(function(n){var t;if(i&&void 0===n)return void 0!==(t=K.get(i,e))||void 0!==(t=Y(i,e))?t:void 0;this.each((function(){K.set(this,e,n)}))}),null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){K.remove(this,e)}))}}),y.extend({queue:function(e,n,t){var r;if(e)return n=(n||"fx")+"queue",r=H.get(e,n),t&&(!r||Array.isArray(t)?r=H.access(e,n,y.makeArray(t)):r.push(t)),r||[]},dequeue:function(e,n){var t=y.queue(e,n=n||"fx"),r=t.length,o=t.shift(),i=y._queueHooks(e,n);"inprogress"===o&&(o=t.shift(),r--),o&&("fx"===n&&t.unshift("inprogress"),delete i.stop,o.call(e,(function(){y.dequeue(e,n)}),i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,n){var t=n+"queueHooks";return H.get(e,t)||H.access(e,t,{empty:y.Callbacks("once memory").add((function(){H.remove(e,[n+"queue",t])}))})}}),y.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?y.queue(this[0],e):void 0===n?this:this.each((function(){var t=y.queue(this,e,n);y._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&y.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){y.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var t,r=1,o=y.Deferred(),i=this,l=this.length,a=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(n=e,e=void 0),e=e||"fx";l--;)(t=H.get(i[l],e+"queueHooks"))&&t.empty&&(r++,t.empty.add(a));return a(),o.promise(n)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],re=g.documentElement,oe=function(e){return y.contains(e.ownerDocument,e)},ie={composed:!0};re.getRootNode&&(oe=function(e){return y.contains(e.ownerDocument,e)||e.getRootNode(ie)===e.ownerDocument});var le=function(e,n){return"none"===(e=n||e).style.display||""===e.style.display&&oe(e)&&"none"===y.css(e,"display")};function ae(e,n,t,r){var o,i,l=20,a=r?function(){return r.cur()}:function(){return y.css(e,n,"")},u=a(),s=t&&t[3]||(y.cssNumber[n]?"":"px"),c=e.nodeType&&(y.cssNumber[n]||"px"!==s&&+u)&&ne.exec(y.css(e,n));if(c&&c[3]!==s){for(u/=2,s=s||c[3],c=+u||1;l--;)y.style(e,n,c+s),(1-i)*(1-(i=a()/u||.5))<=0&&(l=0),c/=i;y.style(e,n,(c*=2)+s),t=t||[]}return t&&(c=+c||+u||0,o=t[1]?c+(t[1]+1)*t[2]:+t[2],r&&(r.unit=s,r.start=c,r.end=o)),o}var ue={};function se(e){var n,t=e.ownerDocument,r=e.nodeName,o=ue[r];return o||(n=t.body.appendChild(t.createElement(r)),o=y.css(n,"display"),n.parentNode.removeChild(n),"none"===o&&(o="block"),ue[r]=o,o)}function ce(e,n){for(var t,r,o=[],i=0,l=e.length;i<l;i++)(r=e[i]).style&&(t=r.style.display,n?("none"===t&&(o[i]=H.get(r,"display")||null,o[i]||(r.style.display="")),""===r.style.display&&le(r)&&(o[i]=se(r))):"none"!==t&&(o[i]="none",H.set(r,"display",t)));for(i=0;i<l;i++)null!=o[i]&&(e[i].style.display=o[i]);return e}y.fn.extend({show:function(){return ce(this,!0)},hide:function(){return ce(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){le(this)?y(this).show():y(this).hide()}))}});var de,fe,pe=/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,_e=/^$|^module$|\/(?:java|ecma)script/i;de=g.createDocumentFragment().appendChild(g.createElement("div")),(fe=g.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),de.appendChild(fe),p.checkClone=de.cloneNode(!0).cloneNode(!0).lastChild.checked,de.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!de.cloneNode(!0).lastChild.defaultValue,de.innerHTML="<option></option>",p.option=!!de.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,n){var t;return t=void 0!==e.getElementsByTagName?e.getElementsByTagName(n||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(n||"*"):[],void 0===n||n&&S(e,n)?y.merge([e],t):t}function we(e,n){for(var t=0,r=e.length;t<r;t++)H.set(e[t],"globalEval",!n||H.get(n[t],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,p.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var ve=/<|&#?\w+;/;function be(e,n,t,r,o){for(var i,l,a,u,s,c,d=n.createDocumentFragment(),f=[],p=0,h=e.length;p<h;p++)if((i=e[p])||0===i)if("object"===v(i))y.merge(f,i.nodeType?[i]:i);else if(ve.test(i)){for(l=l||d.appendChild(n.createElement("div")),a=(he.exec(i)||["",""])[1].toLowerCase(),u=ge[a]||ge._default,l.innerHTML=u[1]+y.htmlPrefilter(i)+u[2],c=u[0];c--;)l=l.lastChild;y.merge(f,l.childNodes),(l=d.firstChild).textContent=""}else f.push(n.createTextNode(i));for(d.textContent="",p=0;i=f[p++];)if(r&&y.inArray(i,r)>-1)o&&o.push(i);else if(s=oe(i),l=me(d.appendChild(i),"script"),s&&we(l),t)for(c=0;i=l[c++];)_e.test(i.type||"")&&t.push(i);return d}var ye=/^key/,ke=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function Ie(){return!0}function xe(){return!1}function Ee(e,n){return e===function(){try{return g.activeElement}catch(e){}}()==("focus"===n)}function Se(e,n,t,r,o,i){var l,a;if("object"==typeof n){for(a in"string"!=typeof t&&(r=r||t,t=void 0),n)Se(e,a,t,r,n[a],i);return e}if(null==r&&null==o?(o=t,r=t=void 0):null==o&&("string"==typeof t?(o=r,r=void 0):(o=r,r=t,t=void 0)),!1===o)o=xe;else if(!o)return e;return 1===i&&(l=o,(o=function(e){return y().off(e),l.apply(this,arguments)}).guid=l.guid||(l.guid=y.guid++)),e.each((function(){y.event.add(this,n,o,r,t)}))}function De(e,n,t){t?(H.set(e,n,!1),y.event.add(e,n,{namespace:!1,handler:function(e){var r,i,l=H.get(this,n);if(1&e.isTrigger&&this[n]){if(l.length)(y.event.special[n]||{}).delegateType&&e.stopPropagation();else if(l=o.call(arguments),H.set(this,n,l),r=t(this,n),this[n](),l!==(i=H.get(this,n))||r?H.set(this,n,!1):i={},l!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else l.length&&(H.set(this,n,{value:y.event.trigger(y.extend(l[0],y.Event.prototype),l.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===H.get(e,n)&&y.event.add(e,n,Ie)}y.event={global:{},add:function(e,n,t,r,o){var i,l,a,u,s,c,d,f,p,h,_,g=H.get(e);if(U(e))for(t.handler&&(t=(i=t).handler,o=i.selector),o&&y.find.matchesSelector(re,o),t.guid||(t.guid=y.guid++),(u=g.events)||(u=g.events=Object.create(null)),(l=g.handle)||(l=g.handle=function(n){return void 0!==y&&y.event.triggered!==n.type?y.event.dispatch.apply(e,arguments):void 0}),s=(n=(n||"").match(j)||[""]).length;s--;)p=_=(a=Ce.exec(n[s])||[])[1],h=(a[2]||"").split(".").sort(),p&&(d=y.event.special[p]||{},p=(o?d.delegateType:d.bindType)||p,d=y.event.special[p]||{},c=y.extend({type:p,origType:_,data:r,handler:t,guid:t.guid,selector:o,needsContext:o&&y.expr.match.needsContext.test(o),namespace:h.join(".")},i),(f=u[p])||((f=u[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,h,l)||e.addEventListener&&e.addEventListener(p,l)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=t.guid)),o?f.splice(f.delegateCount++,0,c):f.push(c),y.event.global[p]=!0)},remove:function(e,n,t,r,o){var i,l,a,u,s,c,d,f,p,h,_,g=H.hasData(e)&&H.get(e);if(g&&(u=g.events)){for(s=(n=(n||"").match(j)||[""]).length;s--;)if(p=_=(a=Ce.exec(n[s])||[])[1],h=(a[2]||"").split(".").sort(),p){for(d=y.event.special[p]||{},f=u[p=(r?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=i=f.length;i--;)c=f[i],!o&&_!==c.origType||t&&t.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(i,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(e,c));l&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||y.removeEvent(e,p,g.handle),delete u[p])}else for(p in u)y.event.remove(e,p+n[s],t,r,!0);y.isEmptyObject(u)&&H.remove(e,"handle events")}},dispatch:function(e){var n,t,r,o,i,l,a=new Array(arguments.length),u=y.event.fix(e),s=(H.get(this,"events")||Object.create(null))[u.type]||[],c=y.event.special[u.type]||{};for(a[0]=u,n=1;n<arguments.length;n++)a[n]=arguments[n];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(l=y.event.handlers.call(this,u,s),n=0;(o=l[n++])&&!u.isPropagationStopped();)for(u.currentTarget=o.elem,t=0;(i=o.handlers[t++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==i.namespace&&!u.rnamespace.test(i.namespace)||(u.handleObj=i,u.data=i.data,void 0!==(r=((y.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,a))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,n){var t,r,o,i,l,a=[],u=n.delegateCount,s=e.target;if(u&&s.nodeType&&!("click"===e.type&&e.button>=1))for(;s!==this;s=s.parentNode||this)if(1===s.nodeType&&("click"!==e.type||!0!==s.disabled)){for(i=[],l={},t=0;t<u;t++)void 0===l[o=(r=n[t]).selector+" "]&&(l[o]=r.needsContext?y(o,this).index(s)>-1:y.find(o,this,null,[s]).length),l[o]&&i.push(r);i.length&&a.push({elem:s,handlers:i})}return s=this,u<n.length&&a.push({elem:s,handlers:n.slice(u)}),a},addProp:function(e,n){Object.defineProperty(y.Event.prototype,e,{enumerable:!0,configurable:!0,get:h(n)?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(n){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:n})}})},fix:function(e){return e[y.expando]?e:new y.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var n=this||e;return pe.test(n.type)&&n.click&&S(n,"input")&&De(n,"click",Ie),!1},trigger:function(e){var n=this||e;return pe.test(n.type)&&n.click&&S(n,"input")&&De(n,"click"),!0},_default:function(e){var n=e.target;return pe.test(n.type)&&n.click&&S(n,"input")&&H.get(n,"click")||S(n,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},y.removeEvent=function(e,n,t){e.removeEventListener&&e.removeEventListener(n,t)},(y.Event=function(e,n){if(!(this instanceof y.Event))return new y.Event(e,n);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ie:xe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,n&&y.extend(this,n),this.timeStamp=e&&e.timeStamp||Date.now(),this[y.expando]=!0}).prototype={constructor:y.Event,isDefaultPrevented:xe,isPropagationStopped:xe,isImmediatePropagationStopped:xe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ie,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ie,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ie,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var n=e.button;return null==e.which&&ye.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==n&&ke.test(e.type)?1&n?1:2&n?3:4&n?2:0:e.which}},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},(function(e,n){y.event.special[e]={setup:function(){return De(this,e,Ee),!1},trigger:function(){return De(this,e),!0},delegateType:n}})),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,n){y.event.special[e]={delegateType:n,bindType:n,handle:function(e){var t,r=this,o=e.relatedTarget,i=e.handleObj;return o&&(o===r||y.contains(r,o))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=n),t}}})),y.fn.extend({on:function(e,n,t,r){return Se(this,e,n,t,r)},one:function(e,n,t,r){return Se(this,e,n,t,r,1)},off:function(e,n,t){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,y(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return!1!==n&&"function"!=typeof n||(t=n,n=void 0),!1===t&&(t=xe),this.each((function(){y.event.remove(this,e,t,n)}))}});var Re=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Te(e,n){return S(e,"table")&&S(11!==n.nodeType?n:n.firstChild,"tr")&&y(e).children("tbody")[0]||e}function Me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Pe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,n){var t,r,o,i,l,a;if(1===n.nodeType){if(H.hasData(e)&&(a=H.get(e).events))for(o in H.remove(n,"handle events"),a)for(t=0,r=a[o].length;t<r;t++)y.event.add(n,o,a[o][t]);K.hasData(e)&&(i=K.access(e),l=y.extend({},i),K.set(n,l))}}function $e(e,n){var t=n.nodeName.toLowerCase();"input"===t&&pe.test(e.type)?n.checked=e.checked:"input"!==t&&"textarea"!==t||(n.defaultValue=e.defaultValue)}function We(e,n,t,r){n=i(n);var o,l,a,u,s,c,d=0,f=e.length,_=f-1,g=n[0],m=h(g);if(m||f>1&&"string"==typeof g&&!p.checkClone&&Oe.test(g))return e.each((function(o){var i=e.eq(o);m&&(n[0]=g.call(this,o,i.html())),We(i,n,t,r)}));if(f&&(l=(o=be(n,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=l),l||r)){for(u=(a=y.map(me(o,"script"),Me)).length;d<f;d++)s=o,d!==_&&(s=y.clone(s,!0,!0),u&&y.merge(a,me(s,"script"))),t.call(e[d],s,d);if(u)for(c=a[a.length-1].ownerDocument,y.map(a,Pe),d=0;d<u;d++)s=a[d],_e.test(s.type||"")&&!H.access(s,"globalEval")&&y.contains(c,s)&&(s.src&&"module"!==(s.type||"").toLowerCase()?y._evalUrl&&!s.noModule&&y._evalUrl(s.src,{nonce:s.nonce||s.getAttribute("nonce")},c):w(s.textContent.replace(Ae,""),s,c))}return e}function Qe(e,n,t){for(var r,o=n?y.filter(n,e):e,i=0;null!=(r=o[i]);i++)t||1!==r.nodeType||y.cleanData(me(r)),r.parentNode&&(t&&oe(r)&&we(me(r,"script")),r.parentNode.removeChild(r));return e}y.extend({htmlPrefilter:function(e){return e},clone:function(e,n,t){var r,o,i,l,a=e.cloneNode(!0),u=oe(e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||y.isXMLDoc(e)))for(l=me(a),r=0,o=(i=me(e)).length;r<o;r++)$e(i[r],l[r]);if(n)if(t)for(i=i||me(e),l=l||me(a),r=0,o=i.length;r<o;r++)je(i[r],l[r]);else je(e,a);return(l=me(a,"script")).length>0&&we(l,!u&&me(e,"script")),a},cleanData:function(e){for(var n,t,r,o=y.event.special,i=0;void 0!==(t=e[i]);i++)if(U(t)){if(n=t[H.expando]){if(n.events)for(r in n.events)o[r]?y.event.remove(t,r):y.removeEvent(t,r,n.handle);t[H.expando]=void 0}t[K.expando]&&(t[K.expando]=void 0)}}}),y.fn.extend({detach:function(e){return Qe(this,e,!0)},remove:function(e){return Qe(this,e)},text:function(e){return L(this,(function(e){return void 0===e?y.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return We(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Te(this,e).appendChild(e)}))},prepend:function(){return We(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var n=Te(this,e);n.insertBefore(e,n.firstChild)}}))},before:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,n=0;null!=(e=this[n]);n++)1===e.nodeType&&(y.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,n){return e=null!=e&&e,n=null==n?e:n,this.map((function(){return y.clone(this,e,n)}))},html:function(e){return L(this,(function(e){var n=this[0]||{},t=0,r=this.length;if(void 0===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof e&&!Re.test(e)&&!ge[(he.exec(e)||["",""])[1].toLowerCase()]){e=y.htmlPrefilter(e);try{for(;t<r;t++)1===(n=this[t]||{}).nodeType&&(y.cleanData(me(n,!1)),n.innerHTML=e);n=0}catch(e){}}n&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return We(this,arguments,(function(n){var t=this.parentNode;y.inArray(this,e)<0&&(y.cleanData(me(this)),t&&t.replaceChild(n,this))}),e)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,n){y.fn[e]=function(e){for(var t,r=[],o=y(e),i=o.length-1,a=0;a<=i;a++)t=a===i?this:this.clone(!0),y(o[a])[n](t),l.apply(r,t.get());return this.pushStack(r)}}));var Ne=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ge=function(n){var t=n.ownerDocument.defaultView;return t&&t.opener||(t=e),t.getComputedStyle(n)},Fe=function(e,n,t){var r,o,i={};for(o in n)i[o]=e.style[o],e.style[o]=n[o];for(o in r=t.call(e),n)e.style[o]=i[o];return r},Le=new RegExp(te.join("|"),"i");function Be(e,n,t){var r,o,i,l,a=e.style;return(t=t||Ge(e))&&(""!==(l=t.getPropertyValue(n)||t[n])||oe(e)||(l=y.style(e,n)),!p.pixelBoxStyles()&&Ne.test(l)&&Le.test(n)&&(r=a.width,o=a.minWidth,i=a.maxWidth,a.minWidth=a.maxWidth=a.width=l,l=t.width,a.width=r,a.minWidth=o,a.maxWidth=i)),void 0!==l?l+"":l}function qe(e,n){return{get:function(){if(!e())return(this.get=n).apply(this,arguments);delete this.get}}}!function(){function n(){if(c){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(s).appendChild(c);var n=e.getComputedStyle(c);r="1%"!==n.top,u=12===t(n.marginLeft),c.style.right="60%",l=36===t(n.right),o=36===t(n.width),c.style.position="absolute",i=12===t(c.offsetWidth/3),re.removeChild(s),c=null}}function t(e){return Math.round(parseFloat(e))}var r,o,i,l,a,u,s=g.createElement("div"),c=g.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===c.style.backgroundClip,y.extend(p,{boxSizingReliable:function(){return n(),o},pixelBoxStyles:function(){return n(),l},pixelPosition:function(){return n(),r},reliableMarginLeft:function(){return n(),u},scrollboxSize:function(){return n(),i},reliableTrDimensions:function(){var n,t,r,o;return null==a&&(n=g.createElement("table"),t=g.createElement("tr"),r=g.createElement("div"),n.style.cssText="position:absolute;left:-11111px",t.style.height="1px",r.style.height="9px",re.appendChild(n).appendChild(t).appendChild(r),o=e.getComputedStyle(t),a=parseInt(o.height)>3,re.removeChild(n)),a}}))}();var ze=["Webkit","Moz","ms"],Je=g.createElement("div").style,Ue={};function Ve(e){return y.cssProps[e]||Ue[e]||(e in Je?e:Ue[e]=function(e){for(var n=e[0].toUpperCase()+e.slice(1),t=ze.length;t--;)if((e=ze[t]+n)in Je)return e}(e)||e)}var He=/^(none|table(?!-c[ea]).+)/,Ke=/^--/,Xe={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"};function Ye(e,n,t){var r=ne.exec(n);return r?Math.max(0,r[2]-(t||0))+(r[3]||"px"):n}function en(e,n,t,r,o,i){var l="width"===n?1:0,a=0,u=0;if(t===(r?"border":"content"))return 0;for(;l<4;l+=2)"margin"===t&&(u+=y.css(e,t+te[l],!0,o)),r?("content"===t&&(u-=y.css(e,"padding"+te[l],!0,o)),"margin"!==t&&(u-=y.css(e,"border"+te[l]+"Width",!0,o))):(u+=y.css(e,"padding"+te[l],!0,o),"padding"!==t?u+=y.css(e,"border"+te[l]+"Width",!0,o):a+=y.css(e,"border"+te[l]+"Width",!0,o));return!r&&i>=0&&(u+=Math.max(0,Math.ceil(e["offset"+n[0].toUpperCase()+n.slice(1)]-i-u-a-.5))||0),u}function nn(e,n,t){var r=Ge(e),o=(!p.boxSizingReliable()||t)&&"border-box"===y.css(e,"boxSizing",!1,r),i=o,l=Be(e,n,r),a="offset"+n[0].toUpperCase()+n.slice(1);if(Ne.test(l)){if(!t)return l;l="auto"}return(!p.boxSizingReliable()&&o||!p.reliableTrDimensions()&&S(e,"tr")||"auto"===l||!parseFloat(l)&&"inline"===y.css(e,"display",!1,r))&&e.getClientRects().length&&(o="border-box"===y.css(e,"boxSizing",!1,r),(i=a in e)&&(l=e[a])),(l=parseFloat(l)||0)+en(e,n,t||(o?"border":"content"),i,r,l)+"px"}function tn(e,n,t,r,o){return new tn.prototype.init(e,n,t,r,o)}y.extend({cssHooks:{opacity:{get:function(e,n){if(n){var t=Be(e,"opacity");return""===t?"1":t}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,n,t,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,l,a=J(n),u=Ke.test(n),s=e.style;if(u||(n=Ve(a)),l=y.cssHooks[n]||y.cssHooks[a],void 0===t)return l&&"get"in l&&void 0!==(o=l.get(e,!1,r))?o:s[n];"string"==(i=typeof t)&&(o=ne.exec(t))&&o[1]&&(t=ae(e,n,o),i="number"),null!=t&&t==t&&("number"!==i||u||(t+=o&&o[3]||(y.cssNumber[a]?"":"px")),p.clearCloneStyle||""!==t||0!==n.indexOf("background")||(s[n]="inherit"),l&&"set"in l&&void 0===(t=l.set(e,t,r))||(u?s.setProperty(n,t):s[n]=t))}},css:function(e,n,t,r){var o,i,l,a=J(n);return Ke.test(n)||(n=Ve(a)),(l=y.cssHooks[n]||y.cssHooks[a])&&"get"in l&&(o=l.get(e,!0,t)),void 0===o&&(o=Be(e,n,r)),"normal"===o&&n in Ze&&(o=Ze[n]),""===t||t?(i=parseFloat(o),!0===t||isFinite(i)?i||0:o):o}}),y.each(["height","width"],(function(e,n){y.cssHooks[n]={get:function(e,t,r){if(t)return!He.test(y.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nn(e,n,r):Fe(e,Xe,(function(){return nn(e,n,r)}))},set:function(e,t,r){var o,i=Ge(e),l=!p.scrollboxSize()&&"absolute"===i.position,a=(l||r)&&"border-box"===y.css(e,"boxSizing",!1,i),u=r?en(e,n,r,a,i):0;return a&&l&&(u-=Math.ceil(e["offset"+n[0].toUpperCase()+n.slice(1)]-parseFloat(i[n])-en(e,n,"border",!1,i)-.5)),u&&(o=ne.exec(t))&&"px"!==(o[3]||"px")&&(e.style[n]=t,t=y.css(e,n)),Ye(0,t,u)}}})),y.cssHooks.marginLeft=qe(p.reliableMarginLeft,(function(e,n){if(n)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),y.each({margin:"",padding:"",border:"Width"},(function(e,n){y.cssHooks[e+n]={expand:function(t){for(var r=0,o={},i="string"==typeof t?t.split(" "):[t];r<4;r++)o[e+te[r]+n]=i[r]||i[r-2]||i[0];return o}},"margin"!==e&&(y.cssHooks[e+n].set=Ye)})),y.fn.extend({css:function(e,n){return L(this,(function(e,n,t){var r,o,i={},l=0;if(Array.isArray(n)){for(r=Ge(e),o=n.length;l<o;l++)i[n[l]]=y.css(e,n[l],!1,r);return i}return void 0!==t?y.style(e,n,t):y.css(e,n)}),e,n,arguments.length>1)}}),y.Tween=tn,tn.prototype={constructor:tn,init:function(e,n,t,r,o,i){this.elem=e,this.prop=t,this.easing=o||y.easing._default,this.options=n,this.start=this.now=this.cur(),this.end=r,this.unit=i||(y.cssNumber[t]?"":"px")},cur:function(){var e=tn.propHooks[this.prop];return e&&e.get?e.get(this):tn.propHooks._default.get(this)},run:function(e){var n,t=tn.propHooks[this.prop];return this.options.duration?this.pos=n=y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=n=e,this.now=(this.end-this.start)*n+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),t&&t.set?t.set(this):tn.propHooks._default.set(this),this}},tn.prototype.init.prototype=tn.prototype,tn.propHooks={_default:{get:function(e){var n;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(n=y.css(e.elem,e.prop,""))&&"auto"!==n?n:0},set:function(e){y.fx.step[e.prop]?y.fx.step[e.prop](e):1!==e.elem.nodeType||!y.cssHooks[e.prop]&&null==e.elem.style[Ve(e.prop)]?e.elem[e.prop]=e.now:y.style(e.elem,e.prop,e.now+e.unit)}}},tn.propHooks.scrollTop=tn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},(y.fx=tn.prototype.init).step={};var rn,on,ln=/^(?:toggle|show|hide)$/,an=/queueHooks$/;function un(){on&&(!1===g.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(un):e.setTimeout(un,y.fx.interval),y.fx.tick())}function sn(){return e.setTimeout((function(){rn=void 0})),rn=Date.now()}function cn(e,n){var t,r=0,o={height:e};for(n=n?1:0;r<4;r+=2-n)o["margin"+(t=te[r])]=o["padding"+t]=e;return n&&(o.opacity=o.width=e),o}function dn(e,n,t){for(var r,o=(fn.tweeners[n]||[]).concat(fn.tweeners["*"]),i=0,l=o.length;i<l;i++)if(r=o[i].call(t,n,e))return r}function fn(e,n,t){var r,o,i=0,l=fn.prefilters.length,a=y.Deferred().always((function(){delete u.elem})),u=function(){if(o)return!1;for(var n=rn||sn(),t=Math.max(0,s.startTime+s.duration-n),r=1-(t/s.duration||0),i=0,l=s.tweens.length;i<l;i++)s.tweens[i].run(r);return a.notifyWith(e,[s,r,t]),r<1&&l?t:(l||a.notifyWith(e,[s,1,0]),a.resolveWith(e,[s]),!1)},s=a.promise({elem:e,props:y.extend({},n),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},t),originalProperties:n,originalOptions:t,startTime:rn||sn(),duration:t.duration,tweens:[],createTween:function(n,t){var r=y.Tween(e,s.opts,n,t,s.opts.specialEasing[n]||s.opts.easing);return s.tweens.push(r),r},stop:function(n){var t=0,r=n?s.tweens.length:0;if(o)return this;for(o=!0;t<r;t++)s.tweens[t].run(1);return n?(a.notifyWith(e,[s,1,0]),a.resolveWith(e,[s,n])):a.rejectWith(e,[s,n]),this}}),c=s.props;for(function(e,n){var t,r,o,i,l;for(t in e)if(o=n[r=J(t)],i=e[t],Array.isArray(i)&&(o=i[1],i=e[t]=i[0]),t!==r&&(e[r]=i,delete e[t]),(l=y.cssHooks[r])&&"expand"in l)for(t in i=l.expand(i),delete e[r],i)t in e||(e[t]=i[t],n[t]=o);else n[r]=o}(c,s.opts.specialEasing);i<l;i++)if(r=fn.prefilters[i].call(s,e,c,s.opts))return h(r.stop)&&(y._queueHooks(s.elem,s.opts.queue).stop=r.stop.bind(r)),r;return y.map(c,dn,s),h(s.opts.start)&&s.opts.start.call(e,s),s.progress(s.opts.progress).done(s.opts.done,s.opts.complete).fail(s.opts.fail).always(s.opts.always),y.fx.timer(y.extend(u,{elem:e,anim:s,queue:s.opts.queue})),s}y.Animation=y.extend(fn,{tweeners:{"*":[function(e,n){var t=this.createTween(e,n);return ae(t.elem,e,ne.exec(n),t),t}]},tweener:function(e,n){h(e)?(n=e,e=["*"]):e=e.match(j);for(var t,r=0,o=e.length;r<o;r++)t=e[r],fn.tweeners[t]=fn.tweeners[t]||[],fn.tweeners[t].unshift(n)},prefilters:[function(e,n,t){var r,o,i,l,a,u,s,c,d="width"in n||"height"in n,f=this,p={},h=e.style,_=e.nodeType&&le(e),g=H.get(e,"fxshow");for(r in t.queue||(null==(l=y._queueHooks(e,"fx")).unqueued&&(l.unqueued=0,a=l.empty.fire,l.empty.fire=function(){l.unqueued||a()}),l.unqueued++,f.always((function(){f.always((function(){l.unqueued--,y.queue(e,"fx").length||l.empty.fire()}))}))),n)if(o=n[r],ln.test(o)){if(delete n[r],i=i||"toggle"===o,o===(_?"hide":"show")){if("show"!==o||!g||void 0===g[r])continue;_=!0}p[r]=g&&g[r]||y.style(e,r)}if((u=!y.isEmptyObject(n))||!y.isEmptyObject(p))for(r in d&&1===e.nodeType&&(t.overflow=[h.overflow,h.overflowX,h.overflowY],null==(s=g&&g.display)&&(s=H.get(e,"display")),"none"===(c=y.css(e,"display"))&&(s?c=s:(ce([e],!0),s=e.style.display||s,c=y.css(e,"display"),ce([e]))),("inline"===c||"inline-block"===c&&null!=s)&&"none"===y.css(e,"float")&&(u||(f.done((function(){h.display=s})),null==s&&(c=h.display,s="none"===c?"":c)),h.display="inline-block")),t.overflow&&(h.overflow="hidden",f.always((function(){h.overflow=t.overflow[0],h.overflowX=t.overflow[1],h.overflowY=t.overflow[2]}))),u=!1,p)u||(g?"hidden"in g&&(_=g.hidden):g=H.access(e,"fxshow",{display:s}),i&&(g.hidden=!_),_&&ce([e],!0),f.done((function(){for(r in _||ce([e]),H.remove(e,"fxshow"),p)y.style(e,r,p[r])}))),u=dn(_?g[r]:0,r,f),r in g||(g[r]=u.start,_&&(u.end=u.start,u.start=0))}],prefilter:function(e,n){n?fn.prefilters.unshift(e):fn.prefilters.push(e)}}),y.speed=function(e,n,t){var r=e&&"object"==typeof e?y.extend({},e):{complete:t||!t&&n||h(e)&&e,duration:e,easing:t&&n||n&&!h(n)&&n};return y.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in y.fx.speeds?r.duration=y.fx.speeds[r.duration]:r.duration=y.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){h(r.old)&&r.old.call(this),r.queue&&y.dequeue(this,r.queue)},r},y.fn.extend({fadeTo:function(e,n,t,r){return this.filter(le).css("opacity",0).show().end().animate({opacity:n},e,t,r)},animate:function(e,n,t,r){var o=y.isEmptyObject(e),i=y.speed(n,t,r),l=function(){var n=fn(this,y.extend({},e),i);(o||H.get(this,"finish"))&&n.stop(!0)};return l.finish=l,o||!1===i.queue?this.each(l):this.queue(i.queue,l)},stop:function(e,n,t){var r=function(e){var n=e.stop;delete e.stop,n(t)};return"string"!=typeof e&&(t=n,n=e,e=void 0),n&&this.queue(e||"fx",[]),this.each((function(){var n=!0,o=null!=e&&e+"queueHooks",i=y.timers,l=H.get(this);if(o)l[o]&&l[o].stop&&r(l[o]);else for(o in l)l[o]&&l[o].stop&&an.test(o)&&r(l[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(t),n=!1,i.splice(o,1));!n&&t||y.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var n,t=H.get(this),r=t[e+"queue"],o=t[e+"queueHooks"],i=y.timers,l=r?r.length:0;for(t.finish=!0,y.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),n=i.length;n--;)i[n].elem===this&&i[n].queue===e&&(i[n].anim.stop(!0),i.splice(n,1));for(n=0;n<l;n++)r[n]&&r[n].finish&&r[n].finish.call(this);delete t.finish}))}}),y.each(["toggle","show","hide"],(function(e,n){var t=y.fn[n];y.fn[n]=function(e,r,o){return null==e||"boolean"==typeof e?t.apply(this,arguments):this.animate(cn(n,!0),e,r,o)}})),y.each({slideDown:cn("show"),slideUp:cn("hide"),slideToggle:cn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,n){y.fn[e]=function(e,t,r){return this.animate(n,e,t,r)}})),y.timers=[],y.fx.tick=function(){var e,n=0,t=y.timers;for(rn=Date.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||y.fx.stop(),rn=void 0},y.fx.timer=function(e){y.timers.push(e),y.fx.start()},y.fx.interval=13,y.fx.start=function(){on||(on=!0,un())},y.fx.stop=function(){on=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(n,t){return n=y.fx&&y.fx.speeds[n]||n,t=t||"fx",this.queue(t,(function(t,r){var o=e.setTimeout(t,n);r.stop=function(){e.clearTimeout(o)}}))},function(){var e=g.createElement("input"),n=g.createElement("select").appendChild(g.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=n.selected,(e=g.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var pn,hn=y.expr.attrHandle;y.fn.extend({attr:function(e,n){return L(this,y.attr,e,n,arguments.length>1)},removeAttr:function(e){return this.each((function(){y.removeAttr(this,e)}))}}),y.extend({attr:function(e,n,t){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?y.prop(e,n,t):(1===i&&y.isXMLDoc(e)||(o=y.attrHooks[n.toLowerCase()]||(y.expr.match.bool.test(n)?pn:void 0)),void 0!==t?null===t?void y.removeAttr(e,n):o&&"set"in o&&void 0!==(r=o.set(e,t,n))?r:(e.setAttribute(n,t+""),t):o&&"get"in o&&null!==(r=o.get(e,n))?r:null==(r=y.find.attr(e,n))?void 0:r)},attrHooks:{type:{set:function(e,n){if(!p.radioValue&&"radio"===n&&S(e,"input")){var t=e.value;return e.setAttribute("type",n),t&&(e.value=t),n}}}},removeAttr:function(e,n){var t,r=0,o=n&&n.match(j);if(o&&1===e.nodeType)for(;t=o[r++];)e.removeAttribute(t)}}),pn={set:function(e,n,t){return!1===n?y.removeAttr(e,t):e.setAttribute(t,t),t}},y.each(y.expr.match.bool.source.match(/\w+/g),(function(e,n){var t=hn[n]||y.find.attr;hn[n]=function(e,n,r){var o,i,l=n.toLowerCase();return r||(i=hn[l],hn[l]=o,o=null!=t(e,n,r)?l:null,hn[l]=i),o}}));var _n=/^(?:input|select|textarea|button)$/i,gn=/^(?:a|area)$/i;function mn(e){return(e.match(j)||[]).join(" ")}function wn(e){return e.getAttribute&&e.getAttribute("class")||""}function vn(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(j)||[]}y.fn.extend({prop:function(e,n){return L(this,y.prop,e,n,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[y.propFix[e]||e]}))}}),y.extend({prop:function(e,n,t){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&y.isXMLDoc(e)||(n=y.propFix[n]||n,o=y.propHooks[n]),void 0!==t?o&&"set"in o&&void 0!==(r=o.set(e,t,n))?r:e[n]=t:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){var n=y.find.attr(e,"tabindex");return n?parseInt(n,10):_n.test(e.nodeName)||gn.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(y.propHooks.selected={get:function(e){var n=e.parentNode;return n&&n.parentNode&&n.parentNode.selectedIndex,null},set:function(e){var n=e.parentNode;n&&(n.selectedIndex,n.parentNode&&n.parentNode.selectedIndex)}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){y.propFix[this.toLowerCase()]=this})),y.fn.extend({addClass:function(e){var n,t,r,o,i,l,a,u=0;if(h(e))return this.each((function(n){y(this).addClass(e.call(this,n,wn(this)))}));if((n=vn(e)).length)for(;t=this[u++];)if(o=wn(t),r=1===t.nodeType&&" "+mn(o)+" "){for(l=0;i=n[l++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");o!==(a=mn(r))&&t.setAttribute("class",a)}return this},removeClass:function(e){var n,t,r,o,i,l,a,u=0;if(h(e))return this.each((function(n){y(this).removeClass(e.call(this,n,wn(this)))}));if(!arguments.length)return this.attr("class","");if((n=vn(e)).length)for(;t=this[u++];)if(o=wn(t),r=1===t.nodeType&&" "+mn(o)+" "){for(l=0;i=n[l++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");o!==(a=mn(r))&&t.setAttribute("class",a)}return this},toggleClass:function(e,n){var t=typeof e,r="string"===t||Array.isArray(e);return"boolean"==typeof n&&r?n?this.addClass(e):this.removeClass(e):h(e)?this.each((function(t){y(this).toggleClass(e.call(this,t,wn(this),n),n)})):this.each((function(){var n,o,i,l;if(r)for(o=0,i=y(this),l=vn(e);n=l[o++];)i.hasClass(n)?i.removeClass(n):i.addClass(n);else void 0!==e&&"boolean"!==t||((n=wn(this))&&H.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===e?"":H.get(this,"__className__")||""))}))},hasClass:function(e){var n,t,r=0;for(n=" "+e+" ";t=this[r++];)if(1===t.nodeType&&(" "+mn(wn(t))+" ").indexOf(n)>-1)return!0;return!1}});var bn=/\r/g;y.fn.extend({val:function(e){var n,t,r,o=this[0];return arguments.length?(r=h(e),this.each((function(t){var o;1===this.nodeType&&(null==(o=r?e.call(this,t,y(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=y.map(o,(function(e){return null==e?"":e+""}))),(n=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,o,"value")||(this.value=o))}))):o?(n=y.valHooks[o.type]||y.valHooks[o.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(o,"value"))?t:"string"==typeof(t=o.value)?t.replace(bn,""):null==t?"":t:void 0}}),y.extend({valHooks:{option:{get:function(e){var n=y.find.attr(e,"value");return null!=n?n:mn(y.text(e))}},select:{get:function(e){var n,t,r,o=e.options,i=e.selectedIndex,l="select-one"===e.type,a=l?null:[],u=l?i+1:o.length;for(r=i<0?u:l?i:0;r<u;r++)if(((t=o[r]).selected||r===i)&&!t.disabled&&(!t.parentNode.disabled||!S(t.parentNode,"optgroup"))){if(n=y(t).val(),l)return n;a.push(n)}return a},set:function(e,n){for(var t,r,o=e.options,i=y.makeArray(n),l=o.length;l--;)((r=o[l]).selected=y.inArray(y.valHooks.option.get(r),i)>-1)&&(t=!0);return t||(e.selectedIndex=-1),i}}}}),y.each(["radio","checkbox"],(function(){y.valHooks[this]={set:function(e,n){if(Array.isArray(n))return e.checked=y.inArray(y(e).val(),n)>-1}},p.checkOn||(y.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),p.focusin="onfocusin"in e;var yn=/^(?:focusinfocus|focusoutblur)$/,kn=function(e){e.stopPropagation()};y.extend(y.event,{trigger:function(n,t,r,o){var i,l,a,u,s,d,f,p,m=[r||g],w=c.call(n,"type")?n.type:n,v=c.call(n,"namespace")?n.namespace.split("."):[];if(l=p=a=r=r||g,3!==r.nodeType&&8!==r.nodeType&&!yn.test(w+y.event.triggered)&&(w.indexOf(".")>-1&&(v=w.split("."),w=v.shift(),v.sort()),s=w.indexOf(":")<0&&"on"+w,(n=n[y.expando]?n:new y.Event(w,"object"==typeof n&&n)).isTrigger=o?2:3,n.namespace=v.join("."),n.rnamespace=n.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=void 0,n.target||(n.target=r),t=null==t?[n]:y.makeArray(t,[n]),f=y.event.special[w]||{},o||!f.trigger||!1!==f.trigger.apply(r,t))){if(!o&&!f.noBubble&&!_(r)){for(u=f.delegateType||w,yn.test(u+w)||(l=l.parentNode);l;l=l.parentNode)m.push(l),a=l;a===(r.ownerDocument||g)&&m.push(a.defaultView||a.parentWindow||e)}for(i=0;(l=m[i++])&&!n.isPropagationStopped();)p=l,n.type=i>1?u:f.bindType||w,(d=(H.get(l,"events")||Object.create(null))[n.type]&&H.get(l,"handle"))&&d.apply(l,t),(d=s&&l[s])&&d.apply&&U(l)&&(n.result=d.apply(l,t),!1===n.result&&n.preventDefault());return n.type=w,o||n.isDefaultPrevented()||f._default&&!1!==f._default.apply(m.pop(),t)||!U(r)||s&&h(r[w])&&!_(r)&&((a=r[s])&&(r[s]=null),y.event.triggered=w,n.isPropagationStopped()&&p.addEventListener(w,kn),r[w](),n.isPropagationStopped()&&p.removeEventListener(w,kn),y.event.triggered=void 0,a&&(r[s]=a)),n.result}},simulate:function(e,n,t){var r=y.extend(new y.Event,t,{type:e,isSimulated:!0});y.event.trigger(r,null,n)}}),y.fn.extend({trigger:function(e,n){return this.each((function(){y.event.trigger(e,n,this)}))},triggerHandler:function(e,n){var t=this[0];if(t)return y.event.trigger(e,n,t,!0)}}),p.focusin||y.each({focus:"focusin",blur:"focusout"},(function(e,n){var t=function(e){y.event.simulate(n,e.target,y.event.fix(e))};y.event.special[n]={setup:function(){var r=this.ownerDocument||this.document||this,o=H.access(r,n);o||r.addEventListener(e,t,!0),H.access(r,n,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,o=H.access(r,n)-1;o?H.access(r,n,o):(r.removeEventListener(e,t,!0),H.remove(r,n))}}}));var Cn=e.location,In={guid:Date.now()},xn=/\?/;y.parseXML=function(n){var t;if(!n||"string"!=typeof n)return null;try{t=(new e.DOMParser).parseFromString(n,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||y.error("Invalid XML: "+n),t};var En=/\[\]$/,Sn=/\r?\n/g,Dn=/^(?:submit|button|image|reset|file)$/i,Rn=/^(?:input|select|textarea|keygen)/i;function On(e,n,t,r){var o;if(Array.isArray(n))y.each(n,(function(n,o){t||En.test(e)?r(e,o):On(e+"["+("object"==typeof o&&null!=o?n:"")+"]",o,t,r)}));else if(t||"object"!==v(n))r(e,n);else for(o in n)On(e+"["+o+"]",n[o],t,r)}y.param=function(e,n){var t,r=[],o=function(e,n){var t=h(n)?n():n;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!y.isPlainObject(e))y.each(e,(function(){o(this.name,this.value)}));else for(t in e)On(t,e[t],n,o);return r.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&Rn.test(this.nodeName)&&!Dn.test(e)&&(this.checked||!pe.test(e))})).map((function(e,n){var t=y(this).val();return null==t?null:Array.isArray(t)?y.map(t,(function(e){return{name:n.name,value:e.replace(Sn,"\r\n")}})):{name:n.name,value:t.replace(Sn,"\r\n")}})).get()}});var An=/%20/g,Tn=/#.*$/,Mn=/([?&])_=[^&]*/,Pn=/^(.*?):[ \t]*([^\r\n]*)$/gm,jn=/^(?:GET|HEAD)$/,$n=/^\/\//,Wn={},Qn={},Nn="*/".concat("*"),Gn=g.createElement("a");function Fn(e){return function(n,t){"string"!=typeof n&&(t=n,n="*");var r,o=0,i=n.toLowerCase().match(j)||[];if(h(t))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(t)):(e[r]=e[r]||[]).push(t)}}function Ln(e,n,t,r){var o={},i=e===Qn;function l(a){var u;return o[a]=!0,y.each(e[a]||[],(function(e,a){var s=a(n,t,r);return"string"!=typeof s||i||o[s]?i?!(u=s):void 0:(n.dataTypes.unshift(s),l(s),!1)})),u}return l(n.dataTypes[0])||!o["*"]&&l("*")}function Bn(e,n){var t,r,o=y.ajaxSettings.flatOptions||{};for(t in n)void 0!==n[t]&&((o[t]?e:r||(r={}))[t]=n[t]);return r&&y.extend(!0,e,r),e}Gn.href=Cn.href,y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Cn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Cn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,n){return n?Bn(Bn(e,y.ajaxSettings),n):Bn(y.ajaxSettings,e)},ajaxPrefilter:Fn(Wn),ajaxTransport:Fn(Qn),ajax:function(n,t){"object"==typeof n&&(t=n,n=void 0);var r,o,i,l,a,u,s,c,d,f,p=y.ajaxSetup({},t=t||{}),h=p.context||p,_=p.context&&(h.nodeType||h.jquery)?y(h):y.event,m=y.Deferred(),w=y.Callbacks("once memory"),v=p.statusCode||{},b={},k={},C="canceled",I={readyState:0,getResponseHeader:function(e){var n;if(s){if(!l)for(l={};n=Pn.exec(i);)l[n[1].toLowerCase()+" "]=(l[n[1].toLowerCase()+" "]||[]).concat(n[2]);n=l[e.toLowerCase()+" "]}return null==n?null:n.join(", ")},getAllResponseHeaders:function(){return s?i:null},setRequestHeader:function(e,n){return null==s&&(e=k[e.toLowerCase()]=k[e.toLowerCase()]||e,b[e]=n),this},overrideMimeType:function(e){return null==s&&(p.mimeType=e),this},statusCode:function(e){var n;if(e)if(s)I.always(e[I.status]);else for(n in e)v[n]=[v[n],e[n]];return this},abort:function(e){var n=e||C;return r&&r.abort(n),x(0,n),this}};if(m.promise(I),p.url=((n||p.url||Cn.href)+"").replace($n,Cn.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(j)||[""],null==p.crossDomain){u=g.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=Gn.protocol+"//"+Gn.host!=u.protocol+"//"+u.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=y.param(p.data,p.traditional)),Ln(Wn,p,t,I),s)return I;for(d in(c=y.event&&p.global)&&0==y.active++&&y.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!jn.test(p.type),o=p.url.replace(Tn,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(An,"+")):(f=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(xn.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Mn,"$1"),f=(xn.test(o)?"&":"?")+"_="+In.guid+++f),p.url=o+f),p.ifModified&&(y.lastModified[o]&&I.setRequestHeader("If-Modified-Since",y.lastModified[o]),y.etag[o]&&I.setRequestHeader("If-None-Match",y.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&I.setRequestHeader("Content-Type",p.contentType),I.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Nn+"; q=0.01":""):p.accepts["*"]),p.headers)I.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(h,I,p)||s))return I.abort();if(C="abort",w.add(p.complete),I.done(p.success),I.fail(p.error),r=Ln(Qn,p,t,I)){if(I.readyState=1,c&&_.trigger("ajaxSend",[I,p]),s)return I;p.async&&p.timeout>0&&(a=e.setTimeout((function(){I.abort("timeout")}),p.timeout));try{s=!1,r.send(b,x)}catch(e){if(s)throw e;x(-1,e)}}else x(-1,"No Transport");function x(n,t,l,u){var d,f,g,b,k,C=t;s||(s=!0,a&&e.clearTimeout(a),r=void 0,i=u||"",I.readyState=n>0?4:0,d=n>=200&&n<300||304===n,l&&(b=function(e,n,t){for(var r,o,i,l,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||n.getResponseHeader("Content-Type"));if(r)for(o in a)if(a[o]&&a[o].test(r)){u.unshift(o);break}if(u[0]in t)i=u[0];else{for(o in t){if(!u[0]||e.converters[o+" "+u[0]]){i=o;break}l||(l=o)}i=i||l}if(i)return i!==u[0]&&u.unshift(i),t[i]}(p,I,l)),!d&&y.inArray("script",p.dataTypes)>-1&&(p.converters["text script"]=function(){}),b=function(e,n,t,r){var o,i,l,a,u,s={},c=e.dataTypes.slice();if(c[1])for(l in e.converters)s[l.toLowerCase()]=e.converters[l];for(i=c.shift();i;)if(e.responseFields[i]&&(t[e.responseFields[i]]=n),!u&&r&&e.dataFilter&&(n=e.dataFilter(n,e.dataType)),u=i,i=c.shift())if("*"===i)i=u;else if("*"!==u&&u!==i){if(!(l=s[u+" "+i]||s["* "+i]))for(o in s)if((a=o.split(" "))[1]===i&&(l=s[u+" "+a[0]]||s["* "+a[0]])){!0===l?l=s[o]:!0!==s[o]&&(i=a[0],c.unshift(a[1]));break}if(!0!==l)if(l&&e.throws)n=l(n);else try{n=l(n)}catch(e){return{state:"parsererror",error:l?e:"No conversion from "+u+" to "+i}}}return{state:"success",data:n}}(p,b,I,d),d?(p.ifModified&&((k=I.getResponseHeader("Last-Modified"))&&(y.lastModified[o]=k),(k=I.getResponseHeader("etag"))&&(y.etag[o]=k)),204===n||"HEAD"===p.type?C="nocontent":304===n?C="notmodified":(C=b.state,f=b.data,d=!(g=b.error))):(g=C,!n&&C||(C="error",n<0&&(n=0))),I.status=n,I.statusText=(t||C)+"",d?m.resolveWith(h,[f,C,I]):m.rejectWith(h,[I,C,g]),I.statusCode(v),v=void 0,c&&_.trigger(d?"ajaxSuccess":"ajaxError",[I,p,d?f:g]),w.fireWith(h,[I,C]),c&&(_.trigger("ajaxComplete",[I,p]),--y.active||y.event.trigger("ajaxStop")))}return I},getJSON:function(e,n,t){return y.get(e,n,t,"json")},getScript:function(e,n){return y.get(e,void 0,n,"script")}}),y.each(["get","post"],(function(e,n){y[n]=function(e,t,r,o){return h(t)&&(o=o||r,r=t,t=void 0),y.ajax(y.extend({url:e,type:n,dataType:o,data:t,success:r},y.isPlainObject(e)&&e))}})),y.ajaxPrefilter((function(e){var n;for(n in e.headers)"content-type"===n.toLowerCase()&&(e.contentType=e.headers[n]||"")})),y._evalUrl=function(e,n,t){return y.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){y.globalEval(e,n,t)}})},y.fn.extend({wrapAll:function(e){var n;return this[0]&&(h(e)&&(e=e.call(this[0])),n=y(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&n.insertBefore(this[0]),n.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return h(e)?this.each((function(n){y(this).wrapInner(e.call(this,n))})):this.each((function(){var n=y(this),t=n.contents();t.length?t.wrapAll(e):n.append(e)}))},wrap:function(e){var n=h(e);return this.each((function(t){y(this).wrapAll(n?e.call(this,t):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){y(this).replaceWith(this.childNodes)})),this}}),y.expr.pseudos.hidden=function(e){return!y.expr.pseudos.visible(e)},y.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var qn={0:200,1223:204},zn=y.ajaxSettings.xhr();p.cors=!!zn&&"withCredentials"in zn,p.ajax=zn=!!zn,y.ajaxTransport((function(n){var t,r;if(p.cors||zn&&!n.crossDomain)return{send:function(o,i){var l,a=n.xhr();if(a.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(l in n.xhrFields)a[l]=n.xhrFields[l];for(l in n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(l,o[l]);t=function(e){return function(){t&&(t=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?i(0,"error"):i(a.status,a.statusText):i(qn[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),r=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout((function(){t&&r()}))},t=t("abort");try{a.send(n.hasContent&&n.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),y.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return y.globalEval(e),e}}}),y.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),y.ajaxTransport("script",(function(e){var n,t;if(e.crossDomain||e.scriptAttrs)return{send:function(r,o){n=y("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",t=function(e){n.remove(),t=null,e&&o("error"===e.type?404:200,e.type)}),g.head.appendChild(n[0])},abort:function(){t&&t()}}}));var Jn,Un=[],Vn=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Un.pop()||y.expando+"_"+In.guid++;return this[e]=!0,e}}),y.ajaxPrefilter("json jsonp",(function(n,t,r){var o,i,l,a=!1!==n.jsonp&&(Vn.test(n.url)?"url":"string"==typeof n.data&&0===(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vn.test(n.data)&&"data");if(a||"jsonp"===n.dataTypes[0])return o=n.jsonpCallback=h(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Vn,"$1"+o):!1!==n.jsonp&&(n.url+=(xn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return l||y.error(o+" was not called"),l[0]},n.dataTypes[0]="json",i=e[o],e[o]=function(){l=arguments},r.always((function(){void 0===i?y(e).removeProp(o):e[o]=i,n[o]&&(n.jsonpCallback=t.jsonpCallback,Un.push(o)),l&&h(i)&&i(l[0]),l=i=void 0})),"script"})),p.createHTMLDocument=((Jn=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jn.childNodes.length),y.parseHTML=function(e,n,t){return"string"!=typeof e?[]:("boolean"==typeof n&&(t=n,n=!1),n||(p.createHTMLDocument?((r=(n=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,n.head.appendChild(r)):n=g),i=!t&&[],(o=D.exec(e))?[n.createElement(o[1])]:(o=be([e],n,i),i&&i.length&&y(i).remove(),y.merge([],o.childNodes)));var r,o,i},y.fn.load=function(e,n,t){var r,o,i,l=this,a=e.indexOf(" ");return a>-1&&(r=mn(e.slice(a)),e=e.slice(0,a)),h(n)?(t=n,n=void 0):n&&"object"==typeof n&&(o="POST"),l.length>0&&y.ajax({url:e,type:o||"GET",dataType:"html",data:n}).done((function(e){i=arguments,l.html(r?y("<div>").append(y.parseHTML(e)).find(r):e)})).always(t&&function(e,n){l.each((function(){t.apply(this,i||[e.responseText,n,e])}))}),this},y.expr.pseudos.animated=function(e){return y.grep(y.timers,(function(n){return e===n.elem})).length},y.offset={setOffset:function(e,n,t){var r,o,i,l,a,u,s=y.css(e,"position"),c=y(e),d={};"static"===s&&(e.style.position="relative"),a=c.offset(),i=y.css(e,"top"),u=y.css(e,"left"),("absolute"===s||"fixed"===s)&&(i+u).indexOf("auto")>-1?(l=(r=c.position()).top,o=r.left):(l=parseFloat(i)||0,o=parseFloat(u)||0),h(n)&&(n=n.call(e,t,y.extend({},a))),null!=n.top&&(d.top=n.top-a.top+l),null!=n.left&&(d.left=n.left-a.left+o),"using"in n?n.using.call(e,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),c.css(d))}},y.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(n){y.offset.setOffset(this,e,n)}));var n,t,r=this[0];return r?r.getClientRects().length?(n=r.getBoundingClientRect(),t=r.ownerDocument.defaultView,{top:n.top+t.pageYOffset,left:n.left+t.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,n,t,r=this[0],o={top:0,left:0};if("fixed"===y.css(r,"position"))n=r.getBoundingClientRect();else{for(n=this.offset(),t=r.ownerDocument,e=r.offsetParent||t.documentElement;e&&(e===t.body||e===t.documentElement)&&"static"===y.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=y(e).offset()).top+=y.css(e,"borderTopWidth",!0),o.left+=y.css(e,"borderLeftWidth",!0))}return{top:n.top-o.top-y.css(r,"marginTop",!0),left:n.left-o.left-y.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===y.css(e,"position");)e=e.offsetParent;return e||re}))}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,n){var t="pageYOffset"===n;y.fn[e]=function(r){return L(this,(function(e,r,o){var i;if(_(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===o)return i?i[n]:e[r];i?i.scrollTo(t?i.pageXOffset:o,t?o:i.pageYOffset):e[r]=o}),e,r,arguments.length)}})),y.each(["top","left"],(function(e,n){y.cssHooks[n]=qe(p.pixelPosition,(function(e,t){if(t)return t=Be(e,n),Ne.test(t)?y(e).position()[n]+"px":t}))})),y.each({Height:"height",Width:"width"},(function(e,n){y.each({padding:"inner"+e,content:n,"":"outer"+e},(function(t,r){y.fn[r]=function(o,i){var l=arguments.length&&(t||"boolean"!=typeof o),a=t||(!0===o||!0===i?"margin":"border");return L(this,(function(n,t,o){var i;return _(n)?0===r.indexOf("outer")?n["inner"+e]:n.document.documentElement["client"+e]:9===n.nodeType?(i=n.documentElement,Math.max(n.body["scroll"+e],i["scroll"+e],n.body["offset"+e],i["offset"+e],i["client"+e])):void 0===o?y.css(n,t,a):y.style(n,t,o,a)}),n,l?o:void 0,l)}}))})),y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,n){y.fn[n]=function(e){return this.on(n,e)}})),y.fn.extend({bind:function(e,n,t){return this.on(e,null,n,t)},unbind:function(e,n){return this.off(e,null,n)},delegate:function(e,n,t,r){return this.on(n,e,t,r)},undelegate:function(e,n,t){return 1===arguments.length?this.off(e,"**"):this.off(n,e||"**",t)},hover:function(e,n){return this.mouseenter(e).mouseleave(n||e)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,n){y.fn[n]=function(e,t){return arguments.length>0?this.on(n,null,e,t):this.trigger(n)}}));var Hn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;y.proxy=function(e,n){var t,r,i;if("string"==typeof n&&(t=e[n],n=e,e=t),h(e))return r=o.call(arguments,2),(i=function(){return e.apply(n||this,r.concat(o.call(arguments)))}).guid=e.guid=e.guid||y.guid++,i},y.holdReady=function(e){e?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=S,y.isFunction=h,y.isWindow=_,y.camelCase=J,y.type=v,y.now=Date.now,y.isNumeric=function(e){var n=y.type(e);return("number"===n||"string"===n)&&!isNaN(e-parseFloat(e))},y.trim=function(e){return null==e?"":(e+"").replace(Hn,"")};var Kn=e.jQuery,Xn=e.$;return y.noConflict=function(n){return e.$===y&&(e.$=Xn),n&&e.jQuery===y&&(e.jQuery=Kn),y},void 0===n&&(e.jQuery=e.$=y),y},e.exports=n.document?t(n,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}}));window.$=Re,window.addEventListener("beforeunload",(function(){return De.dispose(),ae&&ae(),"Are you sure you want to leave? changes will be lost"}));var Oe={init:function(e,n){if(!Se.initialized){De.subscribeForWorkspaceEvents();var t=Se.init(e,e.agm.instance.windowId,De,n);return ae=t.cleanUp,De.init(e,e.agm.instance.windowId).then((function(){me.config.emptyFrame||Se.workspacesEventEmitter.raiseFrameEvent({action:"opened",payload:{frameSummary:{id:e.agm.instance.windowId}}})})).catch(console.warn),Se}Se.init(e,e.agm.instance.windowId,De,n)},getFrameId:function(){return Se.frameId},notifyMoveAreaChanged:function(){},getComponentBounds:function(){return Se.getComponentBounds()},registerPopup:function(e){return""},removePopup:function(e){},removePopupById:function(e){},unmount:function(){Se.unmount()},subscribeForWindowFocused:function(e){return Se.subscribeForWindowClicked(e)},notifyWorkspacePopupChanged:function(e){},requestFocus:function(){}},Ae=new(function(){function e(){}return e.prototype.init=function(e,n){window.workspacesManager?window.workspacesManager.init(n):Oe.init(e,n)},e.prototype.getFrameId=function(){return(window.workspacesManager||Oe).getFrameId()},e.prototype.notifyMoveAreaChanged=function(){(window.workspacesManager||Oe).notifyMoveAreaChanged()},e.prototype.notifyWorkspacePopupChanged=function(e){return(window.workspacesManager||Oe).notifyWorkspacePopupChanged(e)},e.prototype.getComponentBounds=function(){return(window.workspacesManager||Oe).getComponentBounds()},e.prototype.registerPopup=function(e){return(window.workspacesManager||Oe).registerPopup(e)},e.prototype.removePopup=function(e){return(window.workspacesManager||Oe).removePopup(e)},e.prototype.removePopupById=function(e){return(window.workspacesManager||Oe).removePopupById(e)},e.prototype.subscribeForWindowFocused=function(e){return(window.workspacesManager||Oe).subscribeForWindowFocused(e)},e.prototype.unmount=function(){return(window.workspacesManager||Oe).unmount()},e.prototype.requestFocus=function(){return(window.workspacesManager||Oe).requestFocus()},e}());function Te(){return(Te=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var Me="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,Pe={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},je=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],$e=function(e,n,t,r,o){var i=o.offsetX,l=o.offsetY,a=r?8:0,u=t.split(" "),s=e.top+e.height/2,c=e.left+e.width/2,d=n.height,f=n.width,p=s-d/2,h=c-f/2,_="",g="0%",m="0%";switch(u[0]){case"top":p-=d/2+e.height/2+a,_="rotate(180deg)  translateX(50%)",g="100%",m="50%";break;case"bottom":p+=d/2+e.height/2+a,_="rotate(0deg) translateY(-100%) translateX(-50%)",m="50%";break;case"left":h-=f/2+e.width/2+a,_=" rotate(90deg)  translateY(50%) translateX(-25%)",m="100%",g="50%";break;case"right":h+=f/2+e.width/2+a,_="rotate(-90deg)  translateY(-150%) translateX(25%)",g="50%"}switch(u[1]){case"top":p=e.top,g=e.height/2+"px";break;case"bottom":p=e.top-d+e.height,g=d-e.height/2+"px";break;case"left":h=e.left,m=e.width/2+"px";break;case"right":h=e.left-f+e.width,m=f-e.width/2+"px"}return{top:p="top"===u[0]?p-l:p+l,left:h="left"===u[0]?h-i:h+i,transform:_,arrowLeft:m,arrowTop:g}},We=0,Qe=(Object(s.forwardRef)((function(e,n){var t=e.trigger,r=void 0===t?null:t,o=e.onOpen,i=void 0===o?function(){}:o,l=e.onClose,a=void 0===l?function(){}:l,u=e.defaultOpen,d=void 0!==u&&u,f=e.open,h=void 0===f?void 0:f,_=e.disabled,g=void 0!==_&&_,m=e.nested,w=void 0!==m&&m,v=e.closeOnDocumentClick,b=void 0===v||v,y=e.repositionOnResize,k=void 0===y||y,C=e.closeOnEscape,I=void 0===C||C,x=e.on,E=void 0===x?["click"]:x,S=e.contentStyle,D=void 0===S?{}:S,R=e.arrowStyle,O=void 0===R?{}:R,A=e.overlayStyle,T=void 0===A?{}:A,M=e.className,P=void 0===M?"":M,j=e.position,$=void 0===j?"bottom center":j,W=e.modal,Q=void 0!==W&&W,N=e.lockScroll,G=void 0!==N&&N,F=e.arrow,L=void 0===F||F,B=e.offsetX,q=void 0===B?0:B,z=e.offsetY,J=void 0===z?0:z,U=e.mouseEnterDelay,V=void 0===U?100:U,H=e.mouseLeaveDelay,K=void 0===H?100:H,X=e.keepTooltipInside,Z=void 0!==X&&X,Y=e.children,ee=Object(s.useState)(h||d),ne=ee[0],te=ee[1],re=Object(s.useRef)(null),oe=Object(s.useRef)(null),ie=Object(s.useRef)(null),le=Object(s.useRef)(null),ae=Object(s.useRef)("popup-"+ ++We),ue=!!Q||!r,se=Object(s.useRef)(0);Me((function(){return ne?(le.current=document.activeElement,ye(),we(),ge()):me(),function(){clearTimeout(se.current)}}),[ne]),Object(s.useEffect)((function(){"boolean"==typeof h&&(h?ce():de())}),[h,g]);var ce=function(){ne||g||(te(!0),setTimeout(i,0))},de=function(){ne&&!g&&(te(!1),ue&&le.current.focus(),setTimeout(a,0))},fe=function(e){null==e||e.stopPropagation(),ne?de():ce()},pe=function(){clearTimeout(se.current),se.current=setTimeout(ce,V)},he=function(e){null==e||e.preventDefault(),fe()},_e=function(){clearTimeout(se.current),se.current=setTimeout(de,K)},ge=function(){ue&&G&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},me=function(){ue&&G&&(document.getElementsByTagName("body")[0].style.overflow="auto")},we=function(){var e,n=null==oe||null===(e=oe.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),t=Array.prototype.slice.call(n)[0];null==t||t.focus()};Object(s.useImperativeHandle)(n,(function(){return{open:function(){ce()},close:function(){de()},toggle:function(){fe()}}}));var ve,be,ye=function(){if(!ue&&ne&&(null==re?void 0:re.current)&&(null==re?void 0:re.current)&&(null==oe?void 0:oe.current)){var e,n,t=function(e,n,t,r,o,i){var l=o.offsetX,a=o.offsetY,u={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},s=0,c=function(e){var n={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var t=document.querySelector(e);null!==t&&(n=t.getBoundingClientRect())}return n}(i),d=Array.isArray(t)?t:[t];for((i||Array.isArray(t))&&(d=[].concat(d,je));s<d.length;){var f={top:(u=$e(e,n,d[s],r,{offsetX:l,offsetY:a})).top,left:u.left,width:n.width,height:n.height};if(!(f.top<=c.top||f.left<=c.left||f.top+f.height>=c.top+c.height||f.left+f.width>=c.left+c.width))break;s++}return u}(re.current.getBoundingClientRect(),oe.current.getBoundingClientRect(),$,L,{offsetX:q,offsetY:J},Z);oe.current.style.top=t.top+window.scrollY+"px",oe.current.style.left=t.left+window.scrollX+"px",L&&ie.current&&(ie.current.style.transform=t.transform,ie.current.style.setProperty("-ms-transform",t.transform),ie.current.style.setProperty("-webkit-transform",t.transform),ie.current.style.top=(null===(e=O.top)||void 0===e?void 0:e.toString())||t.arrowTop,ie.current.style.left=(null===(n=O.left)||void 0===n?void 0:n.toString())||t.arrowLeft)}};void 0===(be=I)&&(be=!0),Object(s.useEffect)((function(){if(be){var e=function(e){"Escape"===e.key&&ve()};return document.addEventListener("keyup",e),function(){be&&document.removeEventListener("keyup",e)}}}),[ve=de,be]),function(e,n){void 0===n&&(n=!0),Object(s.useEffect)((function(){if(n){var t=function(n){if(9===n.keyCode){var t,r=null==e||null===(t=e.current)||void 0===t?void 0:t.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),o=Array.prototype.slice.call(r);if(1===o.length)return void n.preventDefault();var i=o[0],l=o[o.length-1];n.shiftKey&&document.activeElement===i?(n.preventDefault(),l.focus()):document.activeElement===l&&(n.preventDefault(),i.focus())}};return document.addEventListener("keydown",t),function(){n&&document.removeEventListener("keydown",t)}}}),[e,n])}(oe,ne&&ue),function(e,n){void 0===n&&(n=!0),Object(s.useEffect)((function(){if(n){var t=function(){e()};return window.addEventListener("resize",t),function(){n&&window.removeEventListener("resize",t)}}}),[e,n])}(ye,k),function(e,n,t){void 0===t&&(t=!0),Object(s.useEffect)((function(){if(t){var r=function(t){var r=Array.isArray(e)?e:[e],o=!1;r.forEach((function(e){e.current&&!e.current.contains(t.target)||(o=!0)})),t.stopPropagation(),o||n()};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),function(){t&&(document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r))}}}),[e,n,t])}(r?[oe,re]:[oe],de,b&&!w);var ke,Ce=function(){return c.a.createElement("div",Object.assign({},(e=ue?Pe.popupContent.modal:Pe.popupContent.tooltip,n={className:"popup-content "+(""!==P?P.split(" ").map((function(e){return e+"-content"})).join(" "):""),style:Te({},e,D,{pointerEvents:"auto"}),ref:oe,onClick:function(e){e.stopPropagation()}},!Q&&E.indexOf("hover")>=0&&(n.onMouseEnter=pe,n.onMouseLeave=_e),n),{key:"C",role:ue?"dialog":"tooltip",id:ae.current}),L&&!ue&&c.a.createElement("div",{ref:ie,style:Pe.popupArrow},c.a.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==P?P.split(" ").map((function(e){return e+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:Te({position:"absolute"},O)},c.a.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),Y&&"function"==typeof Y?Y(de,ne):Y);var e,n},Ie=!(E.indexOf("hover")>=0),xe=ue?Pe.overlay.modal:Pe.overlay.tooltip,Ee=[Ie&&c.a.createElement("div",{key:"O","data-testid":"overlay","data-popup":ue?"modal":"tooltip",className:"popup-overlay "+(""!==P?P.split(" ").map((function(e){return e+"-overlay"})).join(" "):""),style:Te({},xe,T,{pointerEvents:b&&w||ue?"auto":"none"}),onClick:b&&w?de:void 0,tabIndex:-1},ue&&Ce()),!ue&&Ce()];return c.a.createElement(c.a.Fragment,null,function(){for(var e={key:"T",ref:re,"aria-describedby":ae.current},n=Array.isArray(E)?E:[E],t=0,o=n.length;t<o;t++)switch(n[t]){case"click":e.onClick=fe;break;case"right-click":e.onContextMenu=he;break;case"hover":e.onMouseEnter=pe,e.onMouseLeave=_e;break;case"focus":e.onFocus=pe,e.onBlur=_e}if("function"==typeof r){var i=r(ne);return!!r&&c.a.cloneElement(i,e)}return!!r&&c.a.cloneElement(r,e)}(),ne&&p.a.createPortal(Ee,(null===(ke=document.getElementById("popup-root"))&&((ke=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(ke)),ke)))})),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return _(n,e),n.prototype.render=function(){return p.a.createPortal(this.props.children,this.props.domNode)},n}(c.a.Component)),Ne="workspaces-react-wrapper-template",Ge=I(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return _(n,e),n.prototype.componentDidMount=function(){var e=document.getElementById(Ne);if(!e){var n=document.createElement("template");n.id=Ne;var t=document.createElement("div");t.id="outter-layout-container",t.style.overflow="hidden",t.style.width="100%",t.style.height="100%",n.content.appendChild(t),document.body.appendChild(n),e=n}if(this.containerRef){this.containerRef.appendChild(e.content);var r={createLogo:this.props.onCreateLogoRequested,createAddWorkspace:this.props.onCreateAddWorkspaceRequested,createSystemButtons:this.props.onCreateSystemButtonsRequested,createWorkspaceContents:this.props.onCreateWorkspaceContentsRequested,createSaveWorkspacePopup:this.props.onCreateSaveWorkspacePopupRequested,createAddApplicationPopup:this.props.onCreateAddApplicationPopupRequested,createAddWorkspacePopup:this.props.onCreateAddWorkspacePopupRequested,hideSystemPopups:this.props.onHideSystemPopupsRequested,externalPopupApplications:this.props.externalPopupApplications};Ae.init(this.props.glue,r)}},n.prototype.componentWillUnmount=function(){var e=document.getElementById(Ne);this.containerRef&&(null==e||e.content.appendChild(this.containerRef.children[0]),Ae.unmount())},n.prototype.render=function(){var e=this;return c.a.createElement("div",{ref:function(n){return e.containerRef=n},style:{overflow:"hidden",width:"100%",height:"100%"}})},n}(c.a.Component)),Fe=function(e){function n(n){var t=e.call(this,n)||this;return t.onCreateLogoRequested=function(e){e!==t.state.logo&&t.setState((function(n){return g(g({},n),{logo:e})}))},t.onCreateAddWorkspaceRequested=function(e){e!==t.state.addWorkspace&&t.setState((function(n){return g(g({},n),{addWorkspace:e})}))},t.onCreateSystemButtonsRequested=function(e){e!==t.state.systemButtons&&t.setState((function(n){return g(g({},n),{systemButtons:e})}))},t.onCreateWorkspaceContentsRequested=function(e){t.state.workspaceContents.some((function(n){return n.domNode===e.domNode}))||t.setState((function(n){return g(g({},n),{workspaceContents:b(n.workspaceContents,[e])})}))},t.onCreateSaveWorkspaceRequested=function(e){e!==t.state.saveWorkspacePopup&&t.setState((function(n){return g(g({},n),{saveWorkspacePopup:e})}),e.callback)},t.onCreateAddApplicationRequested=function(e){e!==t.state.addApplicationPopup&&t.setState((function(n){return g(g({},n),{addApplicationPopup:e})}),e.callback)},t.onCreateAddWorkspacePopupRequested=function(e){e!==t.state.addWorkspacePopup&&t.setState((function(n){return g(g({},n),{addWorkspacePopup:e})}),e.callback)},t.onHideSystemPopups=function(e){t.setState((function(e){return g(g({},e),{addApplicationPopup:void 0,saveWorkspacePopup:void 0,addWorkspacePopup:void 0})}),e)},t.renderLogoComponent=function(){var e,n,r=null===(n=null===(e=t.props.components)||void 0===e?void 0:e.header)||void 0===n?void 0:n.LogoComponent;if(r&&t.state.logo&&t.state.logo.domNode){var o=t.state.logo,i=o.domNode,l=(o.callback,m(o,["domNode","callback"]));return c.a.createElement(Qe,{domNode:i},c.a.createElement(r,g({},l)))}},t.renderAddWorkspaceComponent=function(){var e,n,r=null===(n=null===(e=t.props.components)||void 0===e?void 0:e.header)||void 0===n?void 0:n.AddWorkspaceComponent;if(r&&t.state.addWorkspace&&t.state.addWorkspace.domNode){var o=t.state.addWorkspace,i=o.domNode,l=(o.callback,m(o,["domNode","callback"]));return c.a.createElement(Qe,{domNode:i},c.a.createElement(r,g({},l)))}},t.renderSystemButtonsComponent=function(){var e,n,r=null===(n=null===(e=t.props.components)||void 0===e?void 0:e.header)||void 0===n?void 0:n.SystemButtonsComponent;if(r&&t.state.systemButtons&&t.state.systemButtons.domNode){var o=t.state.systemButtons,i=o.domNode,l=(o.callback,m(o,["domNode","callback"]));return c.a.createElement(Qe,{domNode:i},c.a.createElement(r,g({},l)))}},t.renderWorskpaceContents=function(){var e,n=null===(e=t.props.components)||void 0===e?void 0:e.WorkspaceContents;return t.state.workspaceContents.map((function(e){if(n&&e.domNode){var t=e.domNode,r=(e.callback,m(e,["domNode","callback"]));return c.a.createElement(Qe,{key:r.workspaceId,domNode:t},c.a.createElement(n,g({},r)))}}))},t.renderSaveWorkspacePopupComponent=function(){var e,n,r=(null===(n=null===(e=t.props.components)||void 0===e?void 0:e.popups)||void 0===n?void 0:n.SaveWorkspaceComponent)||T;if(r&&t.state.saveWorkspacePopup&&t.state.saveWorkspacePopup.domNode){var o=t.state.saveWorkspacePopup,i=o.domNode,l=m(o,["domNode"]);return c.a.createElement(Qe,{domNode:i},c.a.createElement(r,g({glue:t.props.glue},l)))}},t.renderAddApplicationPopupComponent=function(){var e,n,r=(null===(n=null===(e=t.props.components)||void 0===e?void 0:e.popups)||void 0===n?void 0:n.AddApplicationComponent)||x;if(r&&t.state.addApplicationPopup&&t.state.addApplicationPopup.domNode){var o=t.state.addApplicationPopup,i=o.domNode,l=m(o,["domNode"]);return c.a.createElement(Qe,{domNode:i},c.a.createElement(r,g({glue:t.props.glue},l)))}},t.renderAddWorkspacePopupComponent=function(){var e,n,r=(null===(n=null===(e=t.props.components)||void 0===e?void 0:e.popups)||void 0===n?void 0:n.AddWorkspaceComponent)||R;if(r&&t.state.addWorkspacePopup&&t.state.addWorkspacePopup.domNode){var o=t.state.addWorkspacePopup,i=o.domNode,l=(o.callback,m(o,["domNode","callback"]));return c.a.createElement(Qe,{domNode:i},c.a.createElement(r,g({glue:t.props.glue},l)))}},t.state={logo:void 0,addWorkspace:void 0,systemButtons:void 0,workspaceContents:[],saveWorkspacePopup:void 0,addApplicationPopup:void 0,addWorkspacePopup:void 0},t}return _(n,e),n.prototype.render=function(){var e,n,t,r,o,i,l=this.props,a=l.components,u=l.glue,s=m(l,["components","glue"]),d=(null===(e=null==a?void 0:a.popups)||void 0===e?void 0:e.AddApplicationComponent)||x,f=(null===(n=null==a?void 0:a.popups)||void 0===n?void 0:n.SaveWorkspaceComponent)||T,p=(null===(t=null==a?void 0:a.popups)||void 0===t?void 0:t.AddWorkspaceComponent)||R,h=d&&"string"!=typeof d?this.onCreateAddApplicationRequested:void 0,_=p&&"string"!=typeof p?this.onCreateAddWorkspacePopupRequested:void 0,w=f&&"string"!=typeof f?this.onCreateSaveWorkspaceRequested:void 0,v={addApplication:"string"==typeof d?d:void 0,saveWorkspace:"string"==typeof f?f:void 0,addWorkspace:"string"==typeof p?p:void 0};return c.a.createElement("div",g({},s,{style:{overflow:"hidden",width:"100%",height:"100%"}}),this.renderLogoComponent(),this.renderAddWorkspaceComponent(),this.renderSystemButtonsComponent(),this.renderWorskpaceContents(),this.renderSaveWorkspacePopupComponent(),this.renderAddApplicationPopupComponent(),this.renderAddWorkspacePopupComponent(),c.a.createElement(Ge,{onCreateSystemButtonsRequested:(null===(r=null==a?void 0:a.header)||void 0===r?void 0:r.SystemButtonsComponent)?this.onCreateSystemButtonsRequested:void 0,onCreateAddWorkspaceRequested:(null===(o=null==a?void 0:a.header)||void 0===o?void 0:o.AddWorkspaceComponent)?this.onCreateAddWorkspaceRequested:void 0,onCreateLogoRequested:(null===(i=null==a?void 0:a.header)||void 0===i?void 0:i.LogoComponent)?this.onCreateLogoRequested:void 0,onCreateWorkspaceContentsRequested:(null==a?void 0:a.WorkspaceContents)?this.onCreateWorkspaceContentsRequested:void 0,onCreateSaveWorkspacePopupRequested:w,onCreateAddApplicationPopupRequested:h,onCreateAddWorkspacePopupRequested:_,onHideSystemPopupsRequested:this.onHideSystemPopups,externalPopupApplications:v,glue:u}))},n}(c.a.Component);n.a=Fe}).call(this,t(14))},21:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,Buffer,process){var C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16),C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(22),C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4),C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__),C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2),C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3);function __rest(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}function __awaiter(e,n,t,r){return new(t||(t=Promise))((function(o,i){function l(e){try{u(r.next(e))}catch(n){i(n)}}function a(e){try{u(r.throw(e))}catch(n){i(n)}}function u(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(l,a)}u((r=r.apply(e,n||[])).next())}))}function __rest$1(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}function __awaiter$1(e,n,t,r){return new(t||(t=Promise))((function(o,i){function l(e){try{u(r.next(e))}catch(n){i(n)}}function a(e){try{u(r.throw(e))}catch(n){i(n)}}function u(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(l,a)}u((r=r.apply(e,n||[])).next())}))}var defaultConfig={logger:"info",gateway:{webPlatform:{}},libraries:[]},parseConfig=function(e){var n,t=Object.assign({},defaultConfig,e);return t.systemLogger&&(t.logger=null!==(n=t.systemLogger.level)&&void 0!==n?n:"info"),t},checkSingleton=function(){var e=window.glue42core;if(e){if(e.webStarted)throw new Error("The Glue42 Core Web has already been started for this application.");e.webStarted=!0}else window.glue42core={webStarted:!0}},enterprise=function(e){var n,t,r={windows:!0,layouts:"full",appManager:"full",channels:!0,libraries:e.libraries,logger:null!==(t=null===(n=null===e||void 0===e?void 0:e.systemLogger)||void 0===n?void 0:n.level)&&void 0!==t?t:"warn"};return window.Glue(r)},ok=function(e){return{ok:!0,result:e}},isOk=function(e){return!0===e.ok},err=function(e){return{ok:!1,error:e}},isErr=function(e){return!1===e.ok},asPromise=function(e){return!0===e.ok?Promise.resolve(e.result):Promise.reject(e.error)},withDefault=function(e,n){return!0===n.ok?n.result:e},withException=function(e){if(!0===e.ok)return e.result;throw e.error},successes=function(e){return e.reduce((function(e,n){return!0===n.ok?e.concat(n.result):e}),[])},map=function(e,n){return!0===n.ok?ok(e(n.result)):n},map2=function(e,n,t){return!1===n.ok?n:!1===t.ok?t:ok(e(n.result,t.result))},mapError=function(e,n){return!0===n.ok?n:err(e(n.error))},andThen=function(e,n){return!0===n.ok?e(n.result):n},result=Object.freeze({ok:ok,isOk:isOk,err:err,isErr:isErr,asPromise:asPromise,withDefault:withDefault,withException:withException,successes:successes,map:map,map2:map2,mapError:mapError,andThen:andThen}),_assign=function(){return(_assign=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function __rest$1$1(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}function isEqual(e,n){if(e===n)return!0;if(null===e&&null===n)return!0;if(typeof e!==typeof n)return!1;if("object"===typeof e){if(Array.isArray(e)){if(!Array.isArray(n))return!1;if(e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(!isEqual(e[t],n[t]))return!1;return!0}var r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(t=0;t<r.length;t++){if(!n.hasOwnProperty(r[t]))return!1;if(!isEqual(e[r[t]],n[r[t]]))return!1}return!0}}var isJsonArray=function(e){return Array.isArray(e)},isJsonObject=function(e){return"object"===typeof e&&null!==e&&!isJsonArray(e)},typeString=function(e){switch(typeof e){case"string":return"a string";case"number":return"a number";case"boolean":return"a boolean";case"undefined":return"undefined";case"object":return e instanceof Array?"an array":null===e?"null":"an object";default:return JSON.stringify(e)}},expectedGot=function(e,n){return"expected "+e+", got "+typeString(n)},printPath=function(e){return e.map((function(e){return"string"===typeof e?"."+e:"["+e+"]"})).join("")},prependAt=function(e,n){var t=n.at,r=__rest$1$1(n,["at"]);return _assign({at:e+(t||"")},r)},Decoder=function(){function e(n){var t=this;this.decode=n,this.run=function(e){return mapError((function(n){return{kind:"DecoderError",input:e,at:"input"+(n.at||""),message:n.message||""}}),t.decode(e))},this.runPromise=function(e){return asPromise(t.run(e))},this.runWithException=function(e){return withException(t.run(e))},this.map=function(n){return new e((function(e){return map(n,t.decode(e))}))},this.andThen=function(n){return new e((function(e){return andThen((function(t){return n(t).decode(e)}),t.decode(e))}))},this.where=function(n,r){return t.andThen((function(t){return n(t)?e.succeed(t):e.fail(r)}))}}return e.string=function(){return new e((function(e){return"string"===typeof e?ok(e):err({message:expectedGot("a string",e)})}))},e.number=function(){return new e((function(e){return"number"===typeof e?ok(e):err({message:expectedGot("a number",e)})}))},e.boolean=function(){return new e((function(e){return"boolean"===typeof e?ok(e):err({message:expectedGot("a boolean",e)})}))},e.constant=function(n){return new e((function(e){return isEqual(e,n)?ok(n):err({message:"expected "+JSON.stringify(n)+", got "+JSON.stringify(e)})}))},e.object=function(n){return new e((function(e){if(isJsonObject(e)&&n){var t={};for(var r in n)if(n.hasOwnProperty(r)){var o=n[r].decode(e[r]);if(!0!==o.ok)return void 0===e[r]?err({message:"the key '"+r+"' is required but was not present"}):err(prependAt("."+r,o.error));void 0!==o.result&&(t[r]=o.result)}return ok(t)}return isJsonObject(e)?ok(e):err({message:expectedGot("an object",e)})}))},e.array=function(n){return new e((function(e){if(isJsonArray(e)&&n){return e.reduce((function(e,t,r){return map2((function(e,n){return e.concat([n])}),e,function(e,t){return mapError((function(e){return prependAt("["+t+"]",e)}),n.decode(e))}(t,r))}),ok([]))}return isJsonArray(e)?ok(e):err({message:expectedGot("an array",e)})}))},e.tuple=function(n){return new e((function(e){if(isJsonArray(e)){if(e.length!==n.length)return err({message:"expected a tuple of length "+n.length+", got one of length "+e.length});for(var t=[],r=0;r<n.length;r++){var o=n[r].decode(e[r]);if(!o.ok)return err(prependAt("["+r+"]",o.error));t[r]=o.result}return ok(t)}return err({message:expectedGot("a tuple of length "+n.length,e)})}))},e.union=function(n,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.oneOf.apply(e,[n,t].concat(r))},e.intersection=function(n,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return new e((function(e){return[n,t].concat(r).reduce((function(n,t){return map2(Object.assign,n,t.decode(e))}),ok({}))}))},e.anyJson=function(){return new e((function(e){return ok(e)}))},e.unknownJson=function(){return new e((function(e){return ok(e)}))},e.dict=function(n){return new e((function(e){if(isJsonObject(e)){var t={};for(var r in e)if(e.hasOwnProperty(r)){var o=n.decode(e[r]);if(!0!==o.ok)return err(prependAt("."+r,o.error));t[r]=o.result}return ok(t)}return err({message:expectedGot("an object",e)})}))},e.optional=function(n){return new e((function(e){return void 0===e||null===e?ok(void 0):n.decode(e)}))},e.oneOf=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return new e((function(e){for(var t=[],r=0;r<n.length;r++){var o=n[r].decode(e);if(!0===o.ok)return o;t[r]=o.error}var i=t.map((function(e){return"at error"+(e.at||"")+": "+e.message})).join('", "');return err({message:'expected a value matching one of the decoders, got the errors ["'+i+'"]'})}))},e.withDefault=function(n,t){return new e((function(e){return ok(withDefault(n,t.decode(e)))}))},e.valueAt=function(n,t){return new e((function(e){for(var r=e,o=0;o<n.length;o++){if(void 0===r)return err({at:printPath(n.slice(0,o+1)),message:"path does not exist"});if("string"===typeof n[o]&&!isJsonObject(r))return err({at:printPath(n.slice(0,o+1)),message:expectedGot("an object",r)});if("number"===typeof n[o]&&!isJsonArray(r))return err({at:printPath(n.slice(0,o+1)),message:expectedGot("an array",r)});r=r[n[o]]}return mapError((function(e){return void 0===r?{at:printPath(n),message:"path does not exist"}:prependAt(printPath(n),e)}),t.decode(r))}))},e.succeed=function(n){return new e((function(e){return ok(n)}))},e.fail=function(n){return new e((function(e){return err({message:n})}))},e.lazy=function(n){return new e((function(e){return n().decode(e)}))},e}(),string=Decoder.string,number=Decoder.number,boolean=Decoder.boolean,anyJson=Decoder.anyJson,constant=Decoder.constant,object=Decoder.object,array=Decoder.array,optional=Decoder.optional,oneOf=Decoder.oneOf,lazy=Decoder.lazy,nonEmptyStringDecoder=string().where((function(e){return e.length>0}),"Expected a non-empty string"),nonNegativeNumberDecoder=number().where((function(e){return e>=0}),"Expected a non-negative number"),libDomainDecoder=oneOf(constant("windows"),constant("appManager"),constant("layouts"),constant("intents")),windowOperationTypesDecoder=oneOf(constant("openWindow"),constant("windowHello"),constant("windowAdded"),constant("windowRemoved"),constant("getBounds"),constant("getUrl"),constant("moveResize"),constant("focus"),constant("close"),constant("getTitle"),constant("setTitle")),appManagerOperationTypesDecoder=oneOf(constant("appHello"),constant("applicationAdded"),constant("applicationRemoved"),constant("applicationChanged"),constant("instanceStarted"),constant("instanceStopped"),constant("applicationStart"),constant("instanceStop"),constant("clear")),layoutsOperationTypesDecoder=oneOf(constant("layoutAdded"),constant("layoutChanged"),constant("layoutRemoved"),constant("get"),constant("getAll"),constant("export"),constant("import"),constant("remove")),windowRelativeDirectionDecoder=oneOf(constant("top"),constant("left"),constant("right"),constant("bottom")),windowOpenSettingsDecoder=optional(object({top:optional(number()),left:optional(number()),width:optional(nonNegativeNumberDecoder),height:optional(nonNegativeNumberDecoder),context:optional(anyJson()),relativeTo:optional(nonEmptyStringDecoder),relativeDirection:optional(windowRelativeDirectionDecoder),windowId:optional(nonEmptyStringDecoder)})),openWindowConfigDecoder=object({name:nonEmptyStringDecoder,url:nonEmptyStringDecoder,options:windowOpenSettingsDecoder}),windowHelloDecoder=object({windowId:optional(nonEmptyStringDecoder)}),coreWindowDataDecoder=object({windowId:nonEmptyStringDecoder,name:nonEmptyStringDecoder}),simpleWindowDecoder=object({windowId:nonEmptyStringDecoder}),helloSuccessDecoder=object({windows:array(coreWindowDataDecoder),isWorkspaceFrame:boolean()}),windowTitleConfigDecoder=object({windowId:nonEmptyStringDecoder,title:string()}),windowMoveResizeConfigDecoder=object({windowId:nonEmptyStringDecoder,top:optional(number()),left:optional(number()),width:optional(nonNegativeNumberDecoder),height:optional(nonNegativeNumberDecoder),relative:optional(boolean())}),windowBoundsResultDecoder=object({windowId:nonEmptyStringDecoder,bounds:object({top:number(),left:number(),width:nonNegativeNumberDecoder,height:nonNegativeNumberDecoder})}),windowUrlResultDecoder=object({windowId:nonEmptyStringDecoder,url:nonEmptyStringDecoder}),anyDecoder=anyJson(),boundsDecoder=object({top:optional(number()),left:optional(number()),width:optional(nonNegativeNumberDecoder),height:optional(nonNegativeNumberDecoder)}),instanceDataDecoder=object({id:nonEmptyStringDecoder,applicationName:nonEmptyStringDecoder}),applicationDetailsDecoder=object({url:nonEmptyStringDecoder,top:optional(number()),left:optional(number()),width:optional(nonNegativeNumberDecoder),height:optional(nonNegativeNumberDecoder)}),intentDefinitionDecoder=object({name:nonEmptyStringDecoder,displayName:optional(string()),contexts:optional(array(string())),customConfig:optional(object())}),fdc3AppDefinitionDecoder=object({name:nonEmptyStringDecoder,title:optional(nonEmptyStringDecoder),version:optional(nonEmptyStringDecoder),appId:nonEmptyStringDecoder,manifest:nonEmptyStringDecoder,manifestType:nonEmptyStringDecoder,tooltip:optional(nonEmptyStringDecoder),description:optional(nonEmptyStringDecoder),contactEmail:optional(nonEmptyStringDecoder),supportEmail:optional(nonEmptyStringDecoder),publisher:optional(nonEmptyStringDecoder),images:optional(array(object({url:optional(nonEmptyStringDecoder)}))),icons:optional(array(object({icon:optional(nonEmptyStringDecoder)}))),customConfig:anyJson(),intents:optional(array(intentDefinitionDecoder))}),applicationDefinitionDecoder=object({name:nonEmptyStringDecoder,type:nonEmptyStringDecoder.where((function(e){return"window"===e}),"Expected a value of window"),title:optional(nonEmptyStringDecoder),version:optional(nonEmptyStringDecoder),customProperties:optional(anyJson()),icon:optional(nonEmptyStringDecoder),caption:optional(nonEmptyStringDecoder),details:applicationDetailsDecoder,intents:optional(array(intentDefinitionDecoder))}),allApplicationDefinitionsDecoder=oneOf(applicationDefinitionDecoder,fdc3AppDefinitionDecoder),appsImportOperationDecoder=object({definitions:array(allApplicationDefinitionsDecoder),mode:oneOf(constant("replace"),constant("merge"))}),appRemoveConfigDecoder=object({name:nonEmptyStringDecoder}),appsExportOperationDecoder=object({definitions:array(applicationDefinitionDecoder)}),applicationDataDecoder=object({name:nonEmptyStringDecoder,type:nonEmptyStringDecoder.where((function(e){return"window"===e}),"Expected a value of window"),instances:array(instanceDataDecoder),userProperties:optional(anyJson()),title:optional(nonEmptyStringDecoder),version:optional(nonEmptyStringDecoder),icon:optional(nonEmptyStringDecoder),caption:optional(nonEmptyStringDecoder)}),baseApplicationDataDecoder=object({name:nonEmptyStringDecoder,type:nonEmptyStringDecoder.where((function(e){return"window"===e}),"Expected a value of window"),userProperties:anyJson(),title:optional(nonEmptyStringDecoder),version:optional(nonEmptyStringDecoder),icon:optional(nonEmptyStringDecoder),caption:optional(nonEmptyStringDecoder)}),appHelloSuccessDecoder=object({apps:array(applicationDataDecoder)}),basicInstanceDataDecoder=object({id:nonEmptyStringDecoder}),applicationStartConfigDecoder=object({name:nonEmptyStringDecoder,waitForAGMReady:boolean(),id:optional(nonEmptyStringDecoder),context:optional(anyJson()),top:optional(number()),left:optional(number()),width:optional(nonNegativeNumberDecoder),height:optional(nonNegativeNumberDecoder),relativeTo:optional(nonEmptyStringDecoder),relativeDirection:optional(oneOf(constant("top"),constant("left"),constant("right"),constant("bottom")))}),layoutTypeDecoder=oneOf(constant("Global"),constant("Activity"),constant("ApplicationDefault"),constant("Swimlane"),constant("Workspace")),componentTypeDecoder=oneOf(constant("application"),constant("activity")),windowLayoutComponentDecoder=object({type:nonEmptyStringDecoder.where((function(e){return"window"===e}),"Expected a value of window"),componentType:optional(componentTypeDecoder),state:object({name:anyJson(),context:anyJson(),url:nonEmptyStringDecoder,bounds:anyJson(),id:nonEmptyStringDecoder,parentId:optional(nonEmptyStringDecoder),main:boolean()})}),windowLayoutItemDecoder=object({type:constant("window"),config:object({appName:nonEmptyStringDecoder,url:optional(nonEmptyStringDecoder),title:optional(string())})}),groupLayoutItemDecoder=object({type:constant("group"),config:anyJson(),children:array(oneOf(windowLayoutItemDecoder))}),columnLayoutItemDecoder=object({type:constant("column"),config:anyJson(),children:array(oneOf(groupLayoutItemDecoder,windowLayoutItemDecoder,lazy((function(){return columnLayoutItemDecoder})),lazy((function(){return rowLayoutItemDecoder}))))}),rowLayoutItemDecoder=object({type:constant("row"),config:anyJson(),children:array(oneOf(columnLayoutItemDecoder,groupLayoutItemDecoder,windowLayoutItemDecoder,lazy((function(){return rowLayoutItemDecoder}))))}),workspaceLayoutComponentDecoder=object({type:constant("Workspace"),state:object({config:anyJson(),context:anyJson(),children:array(oneOf(rowLayoutItemDecoder,columnLayoutItemDecoder,groupLayoutItemDecoder,windowLayoutItemDecoder))})}),glueLayoutDecoder=object({name:nonEmptyStringDecoder,type:layoutTypeDecoder,components:array(oneOf(windowLayoutComponentDecoder,workspaceLayoutComponentDecoder)),version:optional(nonEmptyStringDecoder),context:optional(anyJson()),metadata:optional(anyJson())}),newLayoutOptionsDecoder=object({name:nonEmptyStringDecoder,context:optional(anyJson()),metadata:optional(anyJson())}),restoreOptionsDecoder=object({name:nonEmptyStringDecoder,context:optional(anyJson()),closeRunningInstance:optional(boolean())}),layoutSummaryDecoder=object({name:nonEmptyStringDecoder,type:layoutTypeDecoder,context:optional(anyJson()),metadata:optional(anyJson())}),simpleLayoutConfigDecoder=object({name:nonEmptyStringDecoder,type:layoutTypeDecoder}),getAllLayoutsConfigDecoder=object({type:layoutTypeDecoder}),allLayoutsFullConfigDecoder=object({layouts:array(glueLayoutDecoder)}),importModeDecoder=oneOf(constant("replace"),constant("merge")),layoutsImportConfigDecoder=object({layouts:array(glueLayoutDecoder),mode:importModeDecoder}),allLayoutsSummariesResultDecoder=object({summaries:array(layoutSummaryDecoder)}),simpleLayoutResult=object({layout:glueLayoutDecoder}),optionalSimpleLayoutResult=object({layout:optional(glueLayoutDecoder)}),intentsOperationTypesDecoder=oneOf(constant("findIntent"),constant("getIntents"),constant("raiseIntent")),intentHandlerDecoder=object({applicationName:nonEmptyStringDecoder,applicationTitle:string(),applicationDescription:optional(string()),applicationIcon:optional(string()),type:oneOf(constant("app"),constant("instance")),displayName:optional(string()),contextTypes:optional(array(nonEmptyStringDecoder)),instanceId:optional(string()),instanceTitle:optional(string())}),intentDecoder=object({name:nonEmptyStringDecoder,handlers:array(intentHandlerDecoder)}),intentTargetDecoder=oneOf(constant("startNew"),constant("reuse"),object({app:optional(nonEmptyStringDecoder),instance:optional(nonEmptyStringDecoder)})),intentContextDecoder=object({type:optional(nonEmptyStringDecoder),data:optional(object())}),intentsDecoder=array(intentDecoder),wrappedIntentsDecoder=object({intents:intentsDecoder}),intentFilterDecoder=object({name:optional(nonEmptyStringDecoder),contextType:optional(nonEmptyStringDecoder)}),findFilterDecoder=oneOf(nonEmptyStringDecoder,intentFilterDecoder),wrappedIntentFilterDecoder=object({filter:optional(intentFilterDecoder)}),intentRequestDecoder=object({intent:nonEmptyStringDecoder,target:optional(intentTargetDecoder),context:optional(intentContextDecoder),options:optional(windowOpenSettingsDecoder)}),raiseRequestDecoder=oneOf(nonEmptyStringDecoder,intentRequestDecoder),intentResultDecoder=object({request:intentRequestDecoder,handler:intentHandlerDecoder,result:anyJson()}),addIntentListenerRequestDecoder=object({intent:nonEmptyStringDecoder,contextTypes:optional(array(nonEmptyStringDecoder)),displayName:optional(string()),icon:optional(string()),description:optional(string())}),addIntentListenerIntentDecoder=oneOf(nonEmptyStringDecoder,addIntentListenerRequestDecoder),channelNameDecoder=function(e){return nonEmptyStringDecoder.where((function(n){return e.includes(n)}),"Expected a valid channel name")},operations={openWindow:{name:"openWindow",dataDecoder:openWindowConfigDecoder,resultDecoder:coreWindowDataDecoder},windowHello:{name:"windowHello",dataDecoder:windowHelloDecoder,resultDecoder:helloSuccessDecoder},windowAdded:{name:"windowAdded",dataDecoder:coreWindowDataDecoder},windowRemoved:{name:"windowRemoved",dataDecoder:simpleWindowDecoder},getBounds:{name:"getBounds",dataDecoder:simpleWindowDecoder,resultDecoder:windowBoundsResultDecoder},getUrl:{name:"getUrl",dataDecoder:simpleWindowDecoder,resultDecoder:windowUrlResultDecoder},moveResize:{name:"moveResize",dataDecoder:windowMoveResizeConfigDecoder},focus:{name:"focus",dataDecoder:simpleWindowDecoder},close:{name:"close",dataDecoder:simpleWindowDecoder},getTitle:{name:"getTitle",dataDecoder:simpleWindowDecoder,resultDecoder:windowTitleConfigDecoder},setTitle:{name:"setTitle",dataDecoder:windowTitleConfigDecoder}};function createRegistry(e){if(e&&e.errorHandling&&"function"!==typeof e.errorHandling&&"log"!==e.errorHandling&&"silent"!==e.errorHandling&&"throw"!==e.errorHandling)throw new Error('Invalid options passed to createRegistry. Prop errorHandling should be ["log" | "silent" | "throw" | (err) => void], but '+typeof e.errorHandling+" was passed");var n=e&&"function"===typeof e.errorHandling&&e.errorHandling,t={};function r(t,r){var o=t instanceof Error?t:new Error(t);if(n)n(o);else{var i='[ERROR] callback-registry: User callback for key "'+r+'" failed: '+o.stack;if(e)switch(e.errorHandling){case"log":return console.error(i);case"silent":return;case"throw":throw new Error(i)}console.error(i)}}return{add:function(e,n,o){var i=t[e];return i||(i=[],t[e]=i),i.push(n),o&&setTimeout((function(){o.forEach((function(o){var i;if(null===(i=t[e])||void 0===i?void 0:i.includes(n))try{Array.isArray(o)?n.apply(void 0,o):n.apply(void 0,[o])}catch(err){r(err,e)}}))}),0),function(){var r=t[e];r&&(r=r.reduce((function(e,t,r){return t===n&&e.length===r||e.push(t),e}),[]),t[e]=r)}},execute:function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=t[e];if(!i||0===i.length)return[];var l=[];return i.forEach((function(t){try{var o=t.apply(void 0,n);l.push(o)}catch(err){l.push(void 0),r(err,e)}})),l},clear:function(){t={}},clearKey:function(e){t[e]&&delete t[e]}}}createRegistry.default=createRegistry;var lib=createRegistry,WebWindowModel=function(){function e(n,t,r){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this._id=n,this._name=t,this._bridge=r,this.registry=lib(),this.myCtxKey="___window___".concat(this.id)}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"clean",value:function(){this.ctxUnsubscribe&&this.ctxUnsubscribe()}},{key:"toApi",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n,t=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bridge.contextLib.subscribe(this.myCtxKey,(function(e){return t.registry.execute("context-updated",e)}));case 2:return this.ctxUnsubscribe=e.sent,n={id:this.id,name:this.name,getURL:this.getURL.bind(this),moveResize:this.moveResize.bind(this),resizeTo:this.resizeTo.bind(this),moveTo:this.moveTo.bind(this),focus:this.focus.bind(this),close:this.close.bind(this),getTitle:this.getTitle.bind(this),setTitle:this.setTitle.bind(this),getBounds:this.getBounds.bind(this),getContext:this.getContext.bind(this),updateContext:this.updateContext.bind(this),setContext:this.setContext.bind(this),onContextUpdated:this.onContextUpdated.bind(this)},this.me=Object.freeze(n),e.abrupt("return",this.me);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"getURL",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bridge.send("windows",operations.getUrl,{windowId:this.id});case 2:return n=e.sent,e.abrupt("return",n.url);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"moveResize",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=boundsDecoder.runWithException(e),r=Object.assign({},t,{windowId:this.id,relative:!1}),n.next=4,this._bridge.send("windows",operations.moveResize,r);case 4:return n.abrupt("return",this.me);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"resizeTo",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==typeof e||"undefined"!==typeof n){t.next=2;break}return t.abrupt("return",this.me);case 2:return"undefined"!==typeof e&&nonNegativeNumberDecoder.runWithException(e),"undefined"!==typeof n&&nonNegativeNumberDecoder.runWithException(n),r=Object.assign({},{width:e,height:n},{windowId:this.id,relative:!0}),t.next=7,this._bridge.send("windows",operations.moveResize,r);case 7:return t.abrupt("return",this.me);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"moveTo",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==typeof e||"undefined"!==typeof n){t.next=2;break}return t.abrupt("return",this.me);case 2:return"undefined"!==typeof e&&number().runWithException(e),"undefined"!==typeof n&&number().runWithException(n),r=Object.assign({},{top:e,left:n},{windowId:this.id,relative:!0}),t.next=7,this._bridge.send("windows",operations.moveResize,r);case 7:return t.abrupt("return",this.me);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"focus",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bridge.send("windows",operations.focus,{windowId:this.id});case 2:return e.abrupt("return",this.me);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bridge.send("windows",operations.close,{windowId:this.id});case 2:return e.abrupt("return",this.me);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getTitle",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bridge.send("windows",operations.getTitle,{windowId:this.id});case 2:return n=e.sent,e.abrupt("return",n.title);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"setTitle",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=nonEmptyStringDecoder.runWithException(e),n.next=3,this._bridge.send("windows",operations.setTitle,{windowId:this.id,title:t});case 3:return n.abrupt("return",this.me);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"getBounds",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bridge.send("windows",operations.getBounds,{windowId:this.id});case 2:return n=e.sent,e.abrupt("return",n.bounds);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getContext",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bridge.contextLib.get(this.myCtxKey);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"updateContext",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=anyDecoder.runWithException(e),n.next=3,this._bridge.contextLib.update(this.myCtxKey,t);case 3:return n.abrupt("return",this.me);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"setContext",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=anyDecoder.runWithException(e),n.next=3,this._bridge.contextLib.set(this.myCtxKey,t);case 3:return n.abrupt("return",this.me);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"onContextUpdated",value:function(e){var n=this;if("function"!==typeof e)throw new Error("Cannot subscribe to context changes, because the provided callback is not a function!");return this.registry.add("context-updated",(function(t){e(t,n.me)}))}},{key:"id",get:function(){return this._id.slice()}},{key:"name",get:function(){return this._name.slice()}}]),e}(),WindowsController=function(){function e(){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.registry=lib(),this.allWindowProjections=[]}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.logger=e.logger.subLogger("windows.controller.web"),this.logger.trace("starting the web windows controller"),this.publicWindowId=e.connection.transport.publicWindowId,this.actualWindowId=e.interop.instance.windowId,this.addWindowOperationExecutors(),this.ioc=n,this.bridge=n.bridge,this.logger.trace("set the public window id: ".concat(this.publicWindowId," and actual window id: ").concat(this.actualWindowId,", set the bridge operations and ioc, registering with the platform now")),this.platformRegistration=this.registerWithPlatform(),t.next=11,this.platformRegistration;case 11:this.logger.trace("registration with the platform successful, attaching the windows property to glue and returning"),r=this.toApi(),e.windows=r;case 14:case"end":return t.stop()}}),t,this)})))}},{key:"handleBridgeMessage",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.platformRegistration;case 2:if(t=windowOperationTypesDecoder.runWithException(e.operation),(r=operations[t]).execute){n.next=6;break}return n.abrupt("return");case 6:return o=e.data,r.dataDecoder&&(o=r.dataDecoder.runWithException(e.data)),n.next=10,r.execute(o);case 10:return n.abrupt("return",n.sent);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"open",value:function(e,n,t){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o,i,l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return nonEmptyStringDecoder.runWithException(e),nonEmptyStringDecoder.runWithException(n),o=windowOpenSettingsDecoder.runWithException(t),r.next=5,this.bridge.send("windows",operations.openWindow,{name:e,url:n,options:o});case 5:return i=r.sent,r.next=8,this.ioc.buildWebWindow(i.windowId,i.name);case 8:return l=r.sent,r.abrupt("return",l.api);case 10:case"end":return r.stop()}}),r,this)})))}},{key:"list",value:function(){return this.allWindowProjections.map((function(e){return e.api}))}},{key:"findById",value:function(e){var n;return nonEmptyStringDecoder.runWithException(e),null===(n=this.allWindowProjections.find((function(n){return n.id===e})))||void 0===n?void 0:n.api}},{key:"toApi",value:function(){return{open:this.open.bind(this),my:this.my.bind(this),list:this.list.bind(this),findById:this.findById.bind(this),onWindowAdded:this.onWindowAdded.bind(this),onWindowRemoved:this.onWindowRemoved.bind(this)}}},{key:"addWindowOperationExecutors",value:function(){operations.windowAdded.execute=this.handleWindowAdded.bind(this),operations.windowRemoved.execute=this.handleWindowRemoved.bind(this),operations.getBounds.execute=this.handleGetBounds.bind(this),operations.getTitle.execute=this.handleGetTitle.bind(this),operations.getUrl.execute=this.handleGetUrl.bind(this),operations.moveResize.execute=this.handleMoveResize.bind(this),operations.setTitle.execute=this.handleSetTitle.bind(this)}},{key:"my",value:function(){return Object.assign({},this.me)}},{key:"onWindowAdded",value:function(e){if("function"!==typeof e)throw new Error("Cannot subscribe to window added, because the provided callback is not a function!");return this.registry.add("window-added",e)}},{key:"onWindowRemoved",value:function(e){if("function"!==typeof e)throw new Error("Cannot subscribe to window removed, because the provided callback is not a function!");return this.registry.add("window-removed",e)}},{key:"sayHello",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bridge.send("windows",operations.windowHello,{windowId:this.actualWindowId});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"registerWithPlatform",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n,t,r,o,i,l,a=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sayHello();case 2:if(t=e.sent,r=t.windows,o=t.isWorkspaceFrame,this.logger.trace("the platform responded to the hello message"),o){e.next=14;break}if(this.logger.trace("i am not treated as a workspace frame, setting my window"),i=r.find((function(e){return e.windowId===a.publicWindowId}))){e.next=11;break}throw new Error("Cannot initialize the window library, because I received no information about me from the platform");case 11:return e.next=13,this.ioc.buildWebWindow(this.publicWindowId,i.name);case 13:this.me=e.sent.api;case 14:return e.next=16,Promise.all(r.map((function(e){return a.ioc.buildWebWindow(e.windowId,e.name)})));case 16:l=e.sent,this.logger.trace("all windows projections are completed, building the list collection"),(n=this.allWindowProjections).push.apply(n,Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.a)(l));case 19:case"end":return e.stop()}}),e,this)})))}},{key:"handleWindowAdded",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.allWindowProjections.some((function(n){return n.id===e.windowId}))){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,this.ioc.buildWebWindow(e.windowId,e.name);case 4:t=n.sent,this.allWindowProjections.push(t),this.registry.execute("window-added",t.api);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"handleWindowRemoved",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=this.allWindowProjections.find((function(n){return n.id===e.windowId}))){n.next=3;break}return n.abrupt("return");case 3:this.allWindowProjections=this.allWindowProjections.filter((function(n){return n.id!==e.windowId})),t.model.clean(),this.registry.execute("window-removed",t.api);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"handleGetBounds",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{windowId:this.me.id,bounds:{top:window.screenTop,left:window.screenLeft,width:window.innerWidth,height:window.innerHeight}});case 1:case"end":return e.stop()}}),e,this)})))}},{key:"handleGetTitle",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{windowId:this.me.id,title:document.title});case 1:case"end":return e.stop()}}),e,this)})))}},{key:"handleGetUrl",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{windowId:this.me.id,url:window.location.href});case 1:case"end":return e.stop()}}),e,this)})))}},{key:"handleMoveResize",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o,i,l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t="number"===typeof e.top?e.top:e.relative?0:window.screenTop,r="number"===typeof e.left?e.left:e.relative?0:window.screenLeft,o="number"===typeof e.height?e.height:e.relative?0:window.innerHeight,i="number"===typeof e.width?e.width:e.relative?0:window.innerWidth,l=e.relative?window.moveBy:window.moveTo,a=e.relative?window.resizeBy:window.resizeTo,l(r,t),a(i,o);case 8:case"end":return n.stop()}}),n)})))}},{key:"handleSetTitle",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:document.title=e.title;case 1:case"end":return n.stop()}}),n)})))}}]),e}(),PromiseWrap=function(e,n,t){return new Promise((function(r,o){var i=!0,l=setTimeout((function(){if(i){i=!1;var e=t||"Promise timeout hit: ".concat(n);o(e)}}),n);e().then((function(e){i&&(i=!1,clearTimeout(l),r(e))})).catch((function(e){i&&(i=!1,clearTimeout(l),o(e))}))}))},PromisePlus=function(e,n,t){return new Promise((function(r,o){var i=setTimeout((function(){var e=t||"Promise timeout hit: ".concat(n);o(e)}),n);new Promise(e).then((function(e){clearTimeout(i),r(e)})).catch((function(e){clearTimeout(i),o(e)}))}))},GlueWebPlatformControlName="T42.Web.Platform.Control",GlueWebPlatformStreamName="T42.Web.Platform.Stream",GlueClientControlName="T42.Web.Client.Control",GlueBridge=function(){function e(n){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.coreGlue=n,this.platformMethodTimeoutMs=1e4}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o,i=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.controllers=e,n.next=3,Promise.all([this.checkWaitMethod(GlueWebPlatformControlName),this.checkWaitMethod(GlueWebPlatformStreamName)]);case 3:return n.next=5,Promise.all([this.coreGlue.interop.subscribe(GlueWebPlatformStreamName),this.coreGlue.interop.registerAsync(GlueClientControlName,(function(e,n,t,r){return i.passMessageController(e,t,r)}))]);case 5:t=n.sent,r=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(t,1),o=r[0],this.sub=o,this.sub.onData((function(e){return i.passMessageController(e.data)}));case 10:case"end":return n.stop()}}),n,this)})))}},{key:"getInteropInstance",value:function(e){var n=this.coreGlue.interop.servers().find((function(n){return n.windowId&&n.windowId===e}));return{application:null===n||void 0===n?void 0:n.application,applicationName:null===n||void 0===n?void 0:n.applicationName,peerId:null===n||void 0===n?void 0:n.peerId,instance:null===n||void 0===n?void 0:n.instance,windowId:null===n||void 0===n?void 0:n.windowId}}},{key:"send",value:function(e,n,t){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.dataDecoder){r.next=8;break}r.prev=1,n.dataDecoder.runWithException(t),r.next=8;break;case 5:throw r.prev=5,r.t0=r.catch(1),new Error("Unexpected internal outgoing validation error: ".concat(r.t0.message,", for operation: ").concat(n.name," and input: ").concat(JSON.stringify(r.t0.input)));case 8:return r.prev=8,r.next=11,this.transmitMessage(e,n,t);case 11:o=r.sent,n.resultDecoder&&(o=n.resultDecoder.runWithException(o)),r.next=20;break;case 15:if(r.prev=15,r.t1=r.catch(8),!r.t1.kind){r.next=19;break}throw new Error("Unexpected internal incoming validation error: ".concat(r.t1.message,", for operation: ").concat(n.name," and input: ").concat(JSON.stringify(r.t1.input)));case 19:throw new Error(r.t1.message);case 20:return r.abrupt("return",o);case 21:case"end":return r.stop()}}),r,this,[[1,5],[8,15]])})))}},{key:"checkWaitMethod",value:function(e){var n=this;return PromisePlus((function(t){if(n.coreGlue.interop.methods().some((function(n){return n.name===e})))return t();var r=n.coreGlue.interop.methodAdded((function(n){n.name===e&&(r(),t())}))}),this.platformMethodTimeoutMs,"Cannot initiate Glue Web, because a system method's discovery timed out: ".concat(e))}},{key:"passMessageController",value:function(e,n,t){var r=libDomainDecoder.run(e.domain);if(r.ok){var o=r.result;this.controllers[o].handleBridgeMessage(e).then((function(e){n&&n(e)})).catch((function(e){t&&t(e),console.warn(e)}))}else t&&t("Cannot execute this client control, because of domain validation error: ".concat(JSON.stringify(r.error)))}},{key:"transmitMessage",value:function(e,n,t){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o,i,l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o={domain:e,data:t,operation:n.name},l="Internal Platform Communication Error. Attempted operation: ".concat(JSON.stringify(n.name)," with data: ").concat(JSON.stringify(t),". "),r.prev=2,r.next=5,this.coreGlue.interop.invoke(GlueWebPlatformControlName,o);case 5:if(i=r.sent){r.next=8;break}throw new Error("Received unsupported result from the platform - empty result");case 8:if(Array.isArray(i.all_return_values)&&0!==i.all_return_values.length){r.next=10;break}throw new Error("Received unsupported result from the platform - empty values collection");case 10:r.next=18;break;case 12:if(r.prev=12,r.t0=r.catch(2),!(r.t0&&r.t0.all_errors&&r.t0.all_errors.length)){r.next=17;break}throw a=r.t0.all_errors[0].message,new Error("".concat(l," -> Inner message: ").concat(a));case 17:throw new Error("".concat(l," -> Inner message: ").concat(r.t0.message));case 18:return r.abrupt("return",i.all_return_values[0].returned);case 19:case"end":return r.stop()}}),r,this,[[2,12]])})))}},{key:"contextLib",get:function(){return this.coreGlue.contexts}},{key:"interopInstance",get:function(){return this.coreGlue.interop.instance.instance}}]),e}(),operations$1={appHello:{name:"appHello",dataDecoder:windowHelloDecoder,resultDecoder:appHelloSuccessDecoder},applicationAdded:{name:"applicationAdded",dataDecoder:baseApplicationDataDecoder},applicationRemoved:{name:"applicationRemoved",dataDecoder:baseApplicationDataDecoder},applicationChanged:{name:"applicationChanged",dataDecoder:baseApplicationDataDecoder},instanceStarted:{name:"instanceStarted",dataDecoder:instanceDataDecoder},instanceStopped:{name:"instanceStopped",dataDecoder:instanceDataDecoder},applicationStart:{name:"applicationStart",dataDecoder:applicationStartConfigDecoder,resultDecoder:instanceDataDecoder},instanceStop:{name:"instanceStop",dataDecoder:basicInstanceDataDecoder},import:{name:"import"},remove:{name:"remove",dataDecoder:appRemoveConfigDecoder},export:{name:"export",resultDecoder:appsExportOperationDecoder},clear:{name:"clear"}},AppManagerController=function(){function e(){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.registry=lib(),this.applications=[],this.instances=[]}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.logger=e.logger.subLogger("appManger.controller.web"),this.logger.trace("starting the web appManager controller"),this.publicWindowId=e.connection.transport.publicWindowId,this.actualWindowId=e.interop.instance.windowId,this.addOperationsExecutors(),this.ioc=n,this.bridge=n.bridge,this.platformRegistration=this.registerWithPlatform(),t.next=10,this.platformRegistration;case 10:this.logger.trace("registration with the platform successful, attaching the appManager property to glue and returning"),r=this.toApi(),e.appManager=r;case 13:case"end":return t.stop()}}),t,this)})))}},{key:"handleBridgeMessage",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.platformRegistration;case 2:if(t=appManagerOperationTypesDecoder.runWithException(e.operation),(r=operations$1[t]).execute){n.next=6;break}return n.abrupt("return");case 6:return o=e.data,r.dataDecoder&&(o=r.dataDecoder.runWithException(e.data)),n.next=10,r.execute(o);case 10:return n.abrupt("return",n.sent);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"onInstanceStarted",value:function(e){return this.registry.add("instance-started",e,this.instances)}},{key:"onInstanceStopped",value:function(e){return this.registry.add("instance-stopped",e)}},{key:"startApplication",value:function(e,n,t){var r,o;return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a,u;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return l={name:e,waitForAGMReady:null===(r=null===t||void 0===t?void 0:t.waitForAGMReady)||void 0===r||r,context:n,top:null===t||void 0===t?void 0:t.top,left:null===t||void 0===t?void 0:t.left,width:null===t||void 0===t?void 0:t.width,height:null===t||void 0===t?void 0:t.height,relativeTo:null===t||void 0===t?void 0:t.relativeTo,relativeDirection:null===t||void 0===t?void 0:t.relativeDirection,id:null===(o=t)||void 0===o?void 0:o.reuseId},i.next=3,this.bridge.send("appManager",operations$1.applicationStart,l);case 3:return a=i.sent,u=this.applications.find((function(e){return e.name===a.applicationName})),i.abrupt("return",this.ioc.buildInstance(a,u));case 6:case"end":return i.stop()}}),i,this)})))}},{key:"toApi",value:function(){var e={myInstance:this.me,inMemory:{import:this.import.bind(this),remove:this.remove.bind(this),export:this.export.bind(this),clear:this.clear.bind(this)},application:this.getApplication.bind(this),applications:this.getApplications.bind(this),instances:this.getInstances.bind(this),onAppAdded:this.onAppAdded.bind(this),onAppChanged:this.onAppChanged.bind(this),onAppRemoved:this.onAppRemoved.bind(this),onInstanceStarted:this.onInstanceStarted.bind(this),onInstanceStopped:this.onInstanceStopped.bind(this)};return Object.freeze(e)}},{key:"addOperationsExecutors",value:function(){operations$1.applicationAdded.execute=this.handleApplicationAddedMessage.bind(this),operations$1.applicationRemoved.execute=this.handleApplicationRemovedMessage.bind(this),operations$1.applicationChanged.execute=this.handleApplicationChangedMessage.bind(this),operations$1.instanceStarted.execute=this.handleInstanceStartedMessage.bind(this),operations$1.instanceStopped.execute=this.handleInstanceStoppedMessage.bind(this)}},{key:"onAppAdded",value:function(e){return this.registry.add("application-added",e,this.applications)}},{key:"onAppRemoved",value:function(e){return this.registry.add("application-removed",e)}},{key:"onAppChanged",value:function(e){return this.registry.add("application-changed",e)}},{key:"handleApplicationAddedMessage",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.applications.some((function(n){return n.name===e.name}))){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,this.ioc.buildApplication(e,[]);case 4:r=n.sent,o=this.instances.filter((function(e){return e.application.name===r.name})),(t=r.instances).push.apply(t,Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.a)(o)),this.applications.push(r),this.registry.execute("application-added",r);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"handleApplicationRemovedMessage",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((t=this.applications.findIndex((function(n){return n.name===e.name})))<0)){n.next=3;break}return n.abrupt("return");case 3:r=this.applications[t],this.applications.splice(t,1),this.registry.execute("application-removed",r);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"handleApplicationChangedMessage",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=this.applications.find((function(n){return n.name===e.name}))){n.next=3;break}return n.abrupt("return",this.handleApplicationAddedMessage(e));case 3:t.title=e.title,t.version=e.version,t.icon=e.icon,t.caption=e.caption,t.userProperties=e.userProperties,this.registry.execute("application-changed",t);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"handleInstanceStartedMessage",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.instances.some((function(n){return n.id===e.id}))){n.next=2;break}return n.abrupt("return");case 2:if(t=this.applications.find((function(n){return n.name===e.applicationName}))){n.next=5;break}throw new Error("Cannot add instance: ".concat(e.id,", because there is no application definition associated with it"));case 5:r=this.ioc.buildInstance(e,t),this.instances.push(r),t.instances.push(r),this.registry.execute("instance-started",r);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"handleInstanceStoppedMessage",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o,i;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((t=this.instances.find((function(n){return n.id===e.id})))&&(r=this.instances.findIndex((function(n){return n.id===e.id})),this.instances.splice(r,1)),(o=this.applications.find((function(n){return n.instances.some((function(n){return n.id===e.id}))})))&&(i=o.instances.findIndex((function(n){return n.id===e.id})),o.instances.splice(i,1)),t){n.next=6;break}return n.abrupt("return");case 6:this.registry.execute("instance-stopped",t);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"import",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace";return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(importModeDecoder.runWithException(n),Array.isArray(e)){t.next=3;break}throw new Error("Import must be called with an array of definitions");case 3:return r=e.reduce((function(e,n){var t=allApplicationDefinitionsDecoder.run(n);return t.ok?e.valid.push(n):e.invalid.push({app:null===n||void 0===n?void 0:n.name,error:JSON.stringify(t.error)}),e}),{valid:[],invalid:[]}),t.next=6,this.bridge.send("appManager",operations$1.import,{definitions:r.valid,mode:n});case 6:return t.abrupt("return",{imported:r.valid.map((function(e){return e.name})),errors:r.invalid});case 7:case"end":return t.stop()}}),t,this)})))}},{key:"remove",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return nonEmptyStringDecoder.runWithException(e),n.next=3,this.bridge.send("appManager",operations$1.remove,{name:e});case 3:case"end":return n.stop()}}),n,this)})))}},{key:"clear",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bridge.send("appManager",operations$1.clear,void 0);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"export",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bridge.send("appManager",operations$1.export,void 0);case 2:return n=e.sent,e.abrupt("return",n.definitions);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getApplication",value:function(e){var n=nonEmptyStringDecoder.runWithException(e);return this.applications.find((function(e){return e.name===n}))}},{key:"getApplications",value:function(){return this.applications.slice()}},{key:"getInstances",value:function(){return this.instances.slice()}},{key:"registerWithPlatform",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n,t=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bridge.send("appManager",operations$1.appHello,{windowId:this.actualWindowId});case 2:return n=e.sent,this.logger.trace("the platform responded to the hello message with a full list of apps"),e.next=6,Promise.all(n.apps.map((function(e){return t.ioc.buildApplication(e,e.instances)})));case 6:this.applications=e.sent,this.instances=this.applications.reduce((function(e,n){return e.push.apply(e,Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.a)(n.instances)),e}),[]),this.me=this.findMyInstance(),this.logger.trace("all applications were parsed and saved. I am ".concat(this.me?"NOT a":"a"," valid instance"));case 10:case"end":return e.stop()}}),e,this)})))}},{key:"findMyInstance",value:function(){var e,n=this,t=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(this.applications);try{for(t.s();!(e=t.n()).done;){var r=e.value.instances.find((function(e){return e.id===n.publicWindowId}));if(r)return r}}catch(err){t.e(err)}finally{t.f()}}}]),e}(),InstanceModel=function(){function e(n,t,r){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.data=n,this.bridge=t,this.application=r,this.myCtxKey="___instance___".concat(this.data.id)}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"toApi",value:function(){var e=this.bridge.getInteropInstance(this.data.id),n={id:this.data.id,agm:e,application:this.application,stop:this.stop.bind(this),getContext:this.getContext.bind(this)};return this.me=Object.freeze(n),this.me}},{key:"getContext",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.bridge.contextLib.get(this.myCtxKey));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"stop",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bridge.send("appManager",operations$1.instanceStop,{id:this.data.id});case 2:case"end":return e.stop()}}),e,this)})))}}]),e}(),ApplicationModel=function(){function e(n,t,r){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.data=n,this.instances=t,this.controller=r}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"toApi",value:function(){var e={name:this.data.name,title:this.data.title,version:this.data.version,icon:this.data.icon,caption:this.data.caption,userProperties:this.data.userProperties,instances:this.instances,start:this.start.bind(this),onInstanceStarted:this.onInstanceStarted.bind(this),onInstanceStopped:this.onInstanceStopped.bind(this)};return this.me=e,this.me}},{key:"onInstanceStarted",value:function(e){var n=this;if("function"!==typeof e)throw new Error("OnInstanceStarted requires a single argument of type function");this.controller.onInstanceStarted((function(t){t.application.name===n.data.name&&e(t)}))}},{key:"onInstanceStopped",value:function(e){var n=this;if("function"!==typeof e)throw new Error("OnInstanceStarted requires a single argument of type function");this.controller.onInstanceStopped((function(t){t.application.name===n.data.name&&e(t)}))}},{key:"start",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.controller.startApplication(this.data.name,e,n));case 1:case"end":return t.stop()}}),t,this)})))}}]),e}(),operations$2={layoutAdded:{name:"layoutAdded",dataDecoder:glueLayoutDecoder},layoutChanged:{name:"layoutChanged",dataDecoder:glueLayoutDecoder},layoutRemoved:{name:"layoutRemoved",dataDecoder:glueLayoutDecoder},get:{name:"get",dataDecoder:simpleLayoutConfigDecoder,resultDecoder:optionalSimpleLayoutResult},getAll:{name:"getAll",dataDecoder:getAllLayoutsConfigDecoder,resultDecoder:allLayoutsSummariesResultDecoder},export:{name:"export",dataDecoder:getAllLayoutsConfigDecoder,resultDecoder:allLayoutsFullConfigDecoder},import:{name:"import",dataDecoder:layoutsImportConfigDecoder},remove:{name:"remove",dataDecoder:simpleLayoutConfigDecoder}},LayoutsController=function(){function e(){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.registry=lib()}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.logger=e.logger.subLogger("layouts.controller.web"),this.logger.trace("starting the web layouts controller"),this.bridge=n.bridge,this.addOperationsExecutors(),r=this.toApi(),this.logger.trace("no need for platform registration, attaching the layouts property to glue and returning"),e.layouts=r;case 7:case"end":return t.stop()}}),t,this)})))}},{key:"handleBridgeMessage",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=layoutsOperationTypesDecoder.runWithException(e.operation),(r=operations$2[t]).execute){n.next=4;break}return n.abrupt("return");case 4:return o=e.data,r.dataDecoder&&(o=r.dataDecoder.runWithException(e.data)),n.next=8,r.execute(o);case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}}),n)})))}},{key:"toApi",value:function(){var e={get:this.get.bind(this),getAll:this.getAll.bind(this),export:this.export.bind(this),import:this.import.bind(this),save:this.save.bind(this),restore:this.restore.bind(this),remove:this.remove.bind(this),onAdded:this.onAdded.bind(this),onChanged:this.onChanged.bind(this),onRemoved:this.onRemoved.bind(this)};return Object.freeze(e)}},{key:"addOperationsExecutors",value:function(){operations$2.layoutAdded.execute=this.handleOnAdded.bind(this),operations$2.layoutChanged.execute=this.handleOnChanged.bind(this),operations$2.layoutRemoved.execute=this.handleOnRemoved.bind(this)}},{key:"get",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return nonEmptyStringDecoder.runWithException(e),layoutTypeDecoder.runWithException(n),t.next=4,this.bridge.send("layouts",operations$2.get,{name:e,type:n});case 4:return r=t.sent,t.abrupt("return",r.layout);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getAll",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return layoutTypeDecoder.runWithException(e),n.next=3,this.bridge.send("layouts",operations$2.getAll,{type:e});case 3:return t=n.sent,n.abrupt("return",t.summaries);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"export",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e&&layoutTypeDecoder.runWithException(e),n.next=3,this.bridge.send("layouts",operations$2.export,{type:"Workspace"});case 3:return t=n.sent,n.abrupt("return",t.layouts);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"import",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace";return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r,o=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(importModeDecoder.runWithException(n),Array.isArray(e)){t.next=3;break}throw new Error("Import must be called with an array of layouts");case 3:return r=e.reduce((function(e,n){var t=glueLayoutDecoder.run(n);return t.ok?e.valid.push(n):o.logger.warn("A layout with name: ".concat(n.name," was not imported, because of error: ").concat(JSON.stringify(t.error))),e}),{valid:[]}),t.next=6,this.bridge.send("layouts",operations$2.import,{layouts:r.valid,mode:n});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"save",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:throw newLayoutOptionsDecoder.runWithException(e),new Error("Save is not supported in Core at the moment");case 2:case"end":return n.stop()}}),n)})))}},{key:"restore",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:throw restoreOptionsDecoder.runWithException(e),new Error("Restore is not supported in Core at the moment");case 2:case"end":return n.stop()}}),n)})))}},{key:"remove",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return layoutTypeDecoder.runWithException(e),nonEmptyStringDecoder.runWithException(n),t.next=4,this.bridge.send("layouts",operations$2.remove,{type:e,name:n});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"onAdded",value:function(e){return this.export().then((function(n){return n.forEach((function(n){return e(n)}))})).catch((function(){})),this.registry.add(operations$2.layoutAdded.name,e)}},{key:"onChanged",value:function(e){return this.registry.add(operations$2.layoutChanged.name,e)}},{key:"onRemoved",value:function(e){return this.registry.add(operations$2.layoutRemoved.name,e)}},{key:"handleOnAdded",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.registry.execute(operations$2.layoutAdded.name,e);case 1:case"end":return n.stop()}}),n,this)})))}},{key:"handleOnChanged",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.registry.execute(operations$2.layoutChanged.name,e);case 1:case"end":return n.stop()}}),n,this)})))}},{key:"handleOnRemoved",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.registry.execute(operations$2.layoutRemoved.name,e);case 1:case"end":return n.stop()}}),n,this)})))}}]),e}(),NotificationsController=function(){function e(){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.logger=e.logger.subLogger("notifications.controller.web"),this.logger.trace("starting the web notifications controller"),this.interop=e.interop,t=this.toApi(),e.notifications=t,this.logger.trace("notifications are ready");case 6:case"end":return n.stop()}}),n,this)})))}},{key:"handleBridgeMessage",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},{key:"toApi",value:function(){var e={raise:this.raise.bind(this)};return Object.freeze(e)}},{key:"raise",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o,i=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("Notification"in window){n.next=2;break}throw new Error("this browser does not support desktop notification");case 2:return t="granted"===Notification.permission?Promise.resolve("granted"):"denied"===Notification.permission?Promise.reject("no permissions from user"):Notification.requestPermission(),n.next=5,t;case 5:return r=this.raiseUsingWebApi(e),e.clickInterop&&(o=e.clickInterop,r.onclick=function(){var e,n;i.interop.invoke(o.method,null!==(e=null===o||void 0===o?void 0:o.arguments)&&void 0!==e?e:{},null!==(n=null===o||void 0===o?void 0:o.target)&&void 0!==n?n:"best")}),n.abrupt("return",r);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"raiseUsingWebApi",value:function(e){return new Notification(e.title)}}]),e}(),operations$3={getIntents:{name:"getIntents",resultDecoder:wrappedIntentsDecoder},findIntent:{name:"findIntent",dataDecoder:wrappedIntentFilterDecoder,resultDecoder:wrappedIntentsDecoder},raiseIntent:{name:"raiseIntent",dataDecoder:intentRequestDecoder,resultDecoder:intentResultDecoder}},IntentsController=function(){function e(){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.myIntents=new Set,this.GlueWebIntentsPrefix="Tick42.FDC3.Intents."}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.logger=e.logger.subLogger("intents.controller.web"),this.logger.trace("starting the web intents controller"),this.bridge=n.bridge,this.interop=e.interop,r=this.toApi(),this.logger.trace("no need for platform registration, attaching the intents property to glue and returning"),e.intents=r;case 7:case"end":return t.stop()}}),t,this)})))}},{key:"handleBridgeMessage",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=intentsOperationTypesDecoder.runWithException(e.operation),(r=operations$3[t]).execute){n.next=4;break}return n.abrupt("return");case 4:return o=e.data,r.dataDecoder&&(o=r.dataDecoder.runWithException(e.data)),n.next=8,r.execute(o);case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}}),n)})))}},{key:"toApi",value:function(){var e={raise:this.raise.bind(this),all:this.all.bind(this),addIntentListener:this.addIntentListener.bind(this),find:this.find.bind(this)};return Object.freeze(e)}},{key:"raise",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=raiseRequestDecoder.runWithException(e),r="string"===typeof t?{intent:t}:t,n.next=4,this.bridge.send("intents",operations$3.raiseIntent,r);case 4:return o=n.sent,n.abrupt("return",o);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"all",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bridge.send("intents",operations$3.getIntents,void 0);case 2:return n=e.sent,e.abrupt("return",n.intents);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"addIntentListener",value:function(e,n){var t=this;if(addIntentListenerIntentDecoder.runWithException(e),"function"!==typeof n)throw new Error("Cannot add intent listener, because the provided handler is not a function!");var r=!0,o="string"===typeof e?e:e.intent,i="".concat(this.GlueWebIntentsPrefix).concat(o);if(this.myIntents.has(o))throw new Error("Intent listener for intent ".concat(o," already registered!"));this.myIntents.add(o);var l={unsubscribe:function(){r=!1;try{t.interop.unregister(i),t.myIntents.delete(o)}catch(e){t.logger.trace("Unsubscribed intent listener, but ".concat(i," unregistration failed!"))}}},a={};"object"===typeof e&&(a=__rest$1(e,["intent"]));return this.interop.register({name:i,flags:{intent:a}},(function(e){if(r)return n(e)})),l}},{key:"find",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=void 0,"undefined"!==typeof e&&("string"===typeof(r=findFilterDecoder.runWithException(e))?t={filter:{name:r}}:"object"===typeof r&&(t={filter:r})),n.next=4,this.bridge.send("intents",operations$3.findIntent,t);case 4:return o=n.sent,n.abrupt("return",o.intents);case 6:case"end":return n.stop()}}),n,this)})))}}]),e}(),ChannelsController=function(){function e(){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.registry=lib(),this.GlueWebChannelsPrefix="___channel___",this.SubsKey="subs",this.ChangedKey="changed"}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.logger=e.logger.subLogger("channels.controller.web"),this.logger.trace("starting the web channels controller"),this.contexts=e.contexts,this.logger.trace("no need for platform registration, attaching the channels property to glue and returning"),t=this.toApi(),e.channels=t;case 6:case"end":return n.stop()}}),n,this)})))}},{key:"handleBridgeMessage",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},{key:"toApi",value:function(){var e={subscribe:this.subscribe.bind(this),subscribeFor:this.subscribeFor.bind(this),publish:this.publish.bind(this),all:this.all.bind(this),list:this.list.bind(this),get:this.get.bind(this),join:this.join.bind(this),leave:this.leave.bind(this),current:this.current.bind(this),my:this.my.bind(this),changed:this.changed.bind(this),onChanged:this.onChanged.bind(this),add:this.add.bind(this)};return Object.freeze(e)}},{key:"createContextName",value:function(e){return"".concat(this.GlueWebChannelsPrefix).concat(e)}},{key:"getAllChannelNames",value:function(){var e=this;return this.contexts.all().filter((function(n){return n.startsWith(e.GlueWebChannelsPrefix)})).map((function(n){return n.replace(e.GlueWebChannelsPrefix,"")}))}},{key:"unsubscribe",value:function(){this.unsubscribeFunc&&(this.unsubscribeFunc(),this.unsubscribeFunc=void 0)}},{key:"switchToChannel",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.unsubscribe(),this.currentChannelName=e,"undefined"===typeof e){n.next=7;break}return t=this.createContextName(e),n.next=6,this.contexts.subscribe(t,(function(e,n,t,o,i){r.registry.execute(r.SubsKey,e.data,e,null===i||void 0===i?void 0:i.updaterId)}));case 6:this.unsubscribeFunc=n.sent;case 7:this.registry.execute(this.ChangedKey,e);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"updateData",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.createContextName(e),!this.contexts.setPathSupported){t.next=7;break}return o=Object.keys(n).map((function(e){return{path:"data.".concat(e),value:n[e]}})),t.next=5,this.contexts.setPaths(r,o);case 5:t.next=9;break;case 7:return t.next=9,this.contexts.update(r,{data:n});case 9:case"end":return t.stop()}}),t,this)})))}},{key:"subscribe",value:function(e){if("function"!==typeof e)throw new Error("Cannot subscribe to channels, because the provided callback is not a function!");return this.registry.add(this.SubsKey,e)}},{key:"subscribeFor",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.getAllChannelNames(),channelNameDecoder(r).runWithException(e),"function"===typeof n){t.next=4;break}throw new Error("Cannot subscribe to channel ".concat(e,", because the provided callback is not a function!"));case 4:return o=this.createContextName(e),t.abrupt("return",this.contexts.subscribe(o,(function(e,t,r,o,i){n(e.data,e,null===i||void 0===i?void 0:i.updaterId)})));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"publish",value:function(e,n){if("object"!==typeof e)throw new Error("Cannot publish to channel, because the provided data is not an object!");if("undefined"!==typeof n){var t=this.getAllChannelNames();return channelNameDecoder(t).runWithException(n),this.updateData(n,e)}if("undefined"===typeof this.currentChannelName)throw new Error("Cannot publish to channel, because not joined to a channel!");return this.updateData(this.currentChannelName,e)}},{key:"all",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getAllChannelNames(),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"list",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n,t,r=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getAllChannelNames(),e.next=3,Promise.all(n.map((function(e){return r.get(e)})));case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"get",value:function(e){var n=this.getAllChannelNames();channelNameDecoder(n).runWithException(e);var t=this.createContextName(e);return this.contexts.get(t)}},{key:"join",value:function(e){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.getAllChannelNames(),channelNameDecoder(t).runWithException(e),n.next=4,this.switchToChannel(e);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"leave",value:function(){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.switchToChannel();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"current",value:function(){return this.currentChannelName}},{key:"my",value:function(){return this.current()}},{key:"changed",value:function(e){if("function"!==typeof e)throw new Error("Cannot subscribe to channel changed, because the provided callback is not a function!");return this.registry.add(this.ChangedKey,e)}},{key:"onChanged",value:function(e){return this.changed(e)}},{key:"add",value:function(e){throw new Error("Method `add()` isn't implemented.")}}]),e}(),IoC=function(){function e(n){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.coreGlue=n,this.controllers={windows:this.windowsController,appManager:this.appManagerController,layouts:this.layoutsController,notifications:this.notificationsController,intents:this.intentsController,channels:this.channelsController}}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"buildWebWindow",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new WebWindowModel(e,n,this.bridge),t.next=3,r.toApi();case 3:return o=t.sent,t.abrupt("return",{id:e,model:r,api:o});case 5:case"end":return t.stop()}}),t,this)})))}},{key:"buildApplication",value:function(e,n){return __awaiter$1(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r,o,i,l=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new ApplicationModel(e,[],this.appManagerController).toApi(),i=n.map((function(e){return l.buildInstance(e,o)})),(r=o.instances).push.apply(r,Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.a)(i)),t.abrupt("return",o);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"buildInstance",value:function(e,n){return new InstanceModel(e,this.bridge,n).toApi()}},{key:"windowsController",get:function(){return this._windowsControllerInstance||(this._windowsControllerInstance=new WindowsController),this._windowsControllerInstance}},{key:"appManagerController",get:function(){return this._appManagerControllerInstance||(this._appManagerControllerInstance=new AppManagerController),this._appManagerControllerInstance}},{key:"layoutsController",get:function(){return this._layoutsControllerInstance||(this._layoutsControllerInstance=new LayoutsController),this._layoutsControllerInstance}},{key:"notificationsController",get:function(){return this._notificationsControllerInstance||(this._notificationsControllerInstance=new NotificationsController),this._notificationsControllerInstance}},{key:"intentsController",get:function(){return this._intentsControllerInstance||(this._intentsControllerInstance=new IntentsController),this._intentsControllerInstance}},{key:"channelsController",get:function(){return this._channelsControllerInstance||(this._channelsControllerInstance=new ChannelsController),this._channelsControllerInstance}},{key:"bridge",get:function(){return this._bridgeInstance||(this._bridgeInstance=new GlueBridge(this.coreGlue)),this._bridgeInstance}}]),e}(),version="2.0.9",createFactoryFunction=function(e){return function(n){return __awaiter$1(void 0,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r,o,i,l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=parseConfig(n),!window.glue42gd){t.next=3;break}return t.abrupt("return",enterprise(r));case 3:return checkSingleton(),t.next=6,PromiseWrap((function(){return e(r,{version:version})}),3e4,"Glue Web initialization timed out, because core didn't resolve");case 6:return o=t.sent,i=o.logger.subLogger("web.main.controller"),l=new IoC(o),t.next=11,l.bridge.start(l.controllers);case 11:return i.trace("the bridge has been started, initializing all controllers"),t.next=14,Promise.all(Object.values(l.controllers).map((function(e){return e.start(o,l)})));case 14:return i.trace("all controllers reported started, starting all additional libraries"),t.next=17,Promise.all(r.libraries.map((function(e){return e(o,r)})));case 17:return i.trace("all libraries were started, glue is ready, returning it"),t.abrupt("return",o);case 19:case"end":return t.stop()}}),t)})))}},_extendStatics=function(e,n){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};function __extends(e,n){function t(){this.constructor=e}_extendStatics(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var _assign$=function(){return(_assign$=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function __awaiter$1$1(e,n,t,r){return new(t||(t=Promise))((function(o,i){function l(e){try{u(r.next(e))}catch(n){i(n)}}function a(e){try{u(r.throw(e))}catch(n){i(n)}}function u(e){e.done?o(e.value):new t((function(n){n(e.value)})).then(l,a)}u((r=r.apply(e,n||[])).next())}))}function __generator(e,n){var t,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(a){i=[6,a],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function __spreadArrays(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var r=Array(e),o=0;for(n=0;n<t;n++)for(var i=arguments[n],l=0,a=i.length;l<a;l++,o++)r[o]=i[l];return r}var MetricTypes={STRING:1,NUMBER:2,TIMESTAMP:3,OBJECT:4};function getMetricTypeByValue(e){return e.type===MetricTypes.TIMESTAMP?"timestamp":e.type===MetricTypes.NUMBER?"number":e.type===MetricTypes.STRING?"string":e.type===MetricTypes.OBJECT?"object":"unknown"}function getTypeByValue(e){return e.constructor===Date?"timestamp":"number"===typeof e?"number":"string"===typeof e?"string":"object"===typeof e?"object":"string"}function serializeMetric(e){var n={},t=getMetricTypeByValue(e);if("object"===t){var r=Object.keys(e.value).reduce((function(n,t){var r=getTypeByValue(e.value[t]);if("object"===r){var o=defineNestedComposite(e.value[t]);n[t]={type:"object",description:"",context:{},composite:o}}else n[t]={type:r,description:"",context:{}};return n}),{});n.composite=r}return n.name=normalizeMetricName(e.path.join("/")+"/"+e.name),n.type=t,n.description=e.description,n.context={},n}function defineNestedComposite(e){return Object.keys(e).reduce((function(n,t){var r=getTypeByValue(e[t]);return n[t]="object"===r?{type:"object",description:"",context:{},composite:defineNestedComposite(e[t])}:{type:r,description:"",context:{}},n}),{})}function normalizeMetricName(e){return"undefined"!==typeof e&&e.length>0&&"/"!==e[0]?"/"+e:e}function getMetricValueByType(e){return"timestamp"===getMetricTypeByValue(e)?Date.now():publishNestedComposite(e.value)}function publishNestedComposite(e){return"object"!==typeof e?e:Object.keys(e).reduce((function(n,t){var r=e[t];return"object"===typeof r&&r.constructor!==Date?n[t]=publishNestedComposite(r):r.constructor===Date?n[t]=new Date(r).getTime():r.constructor===Boolean?n[t]=r.toString():n[t]=r,n}),{})}function flatten(e){return e.reduce((function(e,n){return e.concat(Array.isArray(n)?flatten(n):n)}),[])}function getHighestState(e){return e.sort((function(e,n){return e.state?n.state?n.state-e.state:-1:1}))[0]}function aggregateDescription(e){var n="";return e.forEach((function(e,t,r){var o=e.path.join(".");t===r.length-1?n+=o+"."+e.name+": "+e.description:n+=o+"."+e.name+": "+e.description+","})),n.length>100?n.slice(0,100)+"...":n}function composeMsgForRootStateMetric(e){var n=flatten(e.root.getAggregateState()),t=getHighestState(n);return{description:aggregateDescription(n),value:t.state}}function gw3(e,n){var t,r,o=this;if(!e||"object"!==typeof e)throw new Error("Connection is required parameter");var i=function(e){l(e.root)},l=function e(n){a(n),n.metrics.forEach((function(e){u(e)})),n.subSystems.forEach((function(n){e(n)}))},a=function(e){return __awaiter$1$1(o,void 0,void 0,(function(){var n,o;return __generator(this,(function(i){switch(i.label){case 0:return void 0===e.parent?[2]:[4,t];case 1:return i.sent(),n={name:normalizeMetricName(e.path.join("/")+"/"+e.name+"/State"),type:"object",composite:{Description:{type:"string",description:""},Value:{type:"number",description:""}},description:"System state",context:{}},o={type:"define",metrics:[n]},r.send(o),[2]}}))}))},u=function(e){return __awaiter$1$1(o,void 0,void 0,(function(){var n,o,i;return __generator(this,(function(l){switch(l.label){case 0:return n=c(e),[4,t];case 1:return l.sent(),o=serializeMetric(n),i={type:"define",metrics:[o]},r.send(i),"undefined"!==typeof n.value&&s(n),[2]}}))}))},s=function(e){if(d()){var n=getMetricValueByType(e),t={type:"publish",values:[{name:normalizeMetricName(e.path.join("/")+"/"+e.name),value:n,timestamp:Date.now()}]};return r.sendFireAndForget(t)}return Promise.resolve()},c=function(e){var n=_assign$({},e);return"object"===typeof e.value&&null!==e.value&&(n.value=_assign$({},e.value)),n},d=function(){var e;try{return(null!==(e=n.canUpdateMetric)&&void 0!==e?e:function(){return!0})()}catch(t){return!0}};return{init:function(o){var l;t=new Promise((function(e){l=e})),(r=e.domain("metrics")).onJoined((function(e){!e&&l&&(l(),l=void 0);var n={type:"define",metrics:[{name:"/State",type:"object",composite:{Description:{type:"string",description:""},Value:{type:"number",description:""}},description:"System state",context:{}}]};r.send(n),e&&i(o)})),r.join({system:n.system,service:n.service,instance:n.instance})},createSystem:a,updateSystem:function(n,i){return __awaiter$1$1(o,void 0,void 0,(function(){var o,l,a;return __generator(this,(function(u){switch(u.label){case 0:return[4,t];case 1:return u.sent(),o={type:"publish",values:[{name:normalizeMetricName(n.path.join("/")+"/"+n.name+"/State"),value:{Description:i.description,Value:i.state},timestamp:Date.now()}]},r.send(o),l=composeMsgForRootStateMetric(n),a={type:"publish",peer_id:e.peerId,values:[{name:"/State",value:{Description:l.description,Value:l.value},timestamp:Date.now()}]},r.send(a),[2]}}))}))},createMetric:u,updateMetric:function(e){return __awaiter$1$1(o,void 0,void 0,(function(){var n;return __generator(this,(function(r){switch(r.label){case 0:return n=c(e),[4,t];case 1:return r.sent(),s(n),[2]}}))}))}}}var Helpers={validate:function(e,n,t){if(null===e||"object"!==typeof e)throw new Error("Missing definition");if(null===n||"object"!==typeof n)throw new Error("Missing parent");if(null===t||"object"!==typeof t)throw new Error("Missing transport")}},BaseMetric=function(){function e(e,n,t,r,o){this.definition=e,this.system=n,this.transport=t,this.value=r,this.type=o,this.path=[],Helpers.validate(e,n,t),this.path=n.path.slice(0),this.path.push(n.name),this.name=e.name,this.description=e.description,t.createMetric(this)}return Object.defineProperty(e.prototype,"repo",{get:function(){var e;return null===(e=this.system)||void 0===e?void 0:e.repo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.system.path+"/"+name},enumerable:!0,configurable:!0}),e.prototype.update=function(e){return this.value=e,this.transport.updateMetric(this)},e}(),NumberMetric=function(e){function n(n,t,r,o){return e.call(this,n,t,r,o,MetricTypes.NUMBER)||this}return __extends(n,e),n.prototype.incrementBy=function(e){this.update(this.value+e)},n.prototype.increment=function(){this.incrementBy(1)},n.prototype.decrement=function(){this.incrementBy(-1)},n.prototype.decrementBy=function(e){this.incrementBy(-1*e)},n}(BaseMetric),ObjectMetric=function(e){function n(n,t,r,o){return e.call(this,n,t,r,o,MetricTypes.OBJECT)||this}return __extends(n,e),n.prototype.update=function(e){return this.mergeValues(e),this.transport.updateMetric(this)},n.prototype.mergeValues=function(e){var n=this;return Object.keys(this.value).forEach((function(t){"undefined"!==typeof e[t]&&(n.value[t]=e[t])}))},n}(BaseMetric),StringMetric=function(e){function n(n,t,r,o){return e.call(this,n,t,r,o,MetricTypes.STRING)||this}return __extends(n,e),n}(BaseMetric),TimestampMetric=function(e){function n(n,t,r,o){return e.call(this,n,t,r,o,MetricTypes.TIMESTAMP)||this}return __extends(n,e),n.prototype.now=function(){this.update(new Date)},n}(BaseMetric);function system(e,n,t,r,o){if(!n)throw new Error("Repository is required");if(!t)throw new Error("Transport is required");var i,l,a=t,u=e,s=o||"",c=n,d=r,f=function e(n){if(!n||!n.parent)return[];var t=e(n.parent);return t.push(n.name),t}(r),p={},h=(l="/",((i=f)&&i.length>0?i.join(l):"")+e),_=n.root,g=[],m=[];function w(e,n,t,r){var o={name:""};o="string"===typeof e?{name:e}:e;var i=m.filter((function(e){return e.name===o.name}));if(i.length>0){var l=i[0];if(l.type!==n)throw new Error("A metric named "+o.name+" is already defined with different type.");return"undefined"!==typeof t&&l.update(t).catch((function(){})),l}var a=r(o);return m.push(a),a}var v={get name(){return u},get description(){return s},get repo(){return c},get parent(){return d},path:f,id:h,root:_,get subSystems(){return g},get metrics(){return m},subSystem:function(e,n){if(!e||0===e.length)throw new Error("name is required");var t=g.filter((function(n){return n.name===e}));if(t.length>0)return t[0];var r=system(e,c,a,v,n);return g.push(r),r},getState:function(){return p},setState:function(e,n){p={state:e,description:n},a.updateSystem(v,p)},stringMetric:function(e,n){return w(e,MetricTypes.STRING,n,(function(e){return new StringMetric(e,v,a,n)}))},timestampMetric:function(e,n){return w(e,MetricTypes.TIMESTAMP,n,(function(e){return new TimestampMetric(e,v,a,n)}))},objectMetric:function(e,n){return w(e,MetricTypes.OBJECT,n,(function(e){return new ObjectMetric(e,v,a,n)}))},numberMetric:function(e,n){return w(e,MetricTypes.NUMBER,n,(function(e){return new NumberMetric(e,v,a,n)}))},getAggregateState:function(){var e=[];return Object.keys(p).length>0&&e.push({name:u,path:f,state:p.state,description:p.description}),g.forEach((function(n){var t=n.getAggregateState();t.length>0&&e.push.apply(e,t)})),e}};return a.createSystem(v),v}var Repository=function(){function e(e,n){n.init(this),this.root=system("",this,n),this.addSystemMetrics(this.root,e.clickStream||void 0===e.clickStream)}return e.prototype.addSystemMetrics=function(e,n){if("undefined"!==typeof navigator&&e.stringMetric("UserAgent",navigator.userAgent),n&&"undefined"!==typeof document){var t=e.subSystem("ClickStream"),r=function(e){if(e.target){var n=e.target;t.objectMetric("LastBrowserEvent",{type:"click",timestamp:new Date,target:{className:e.target?n.className:"",id:n.id,type:"<"+n.tagName.toLowerCase()+">",href:n.href||""}})}};t.objectMetric("Page",{title:document.title,page:window.location.href}),document.addEventListener?document.addEventListener("click",r):document.attachEvent("onclick",r)}e.stringMetric("StartTime",(new Date).toString());var o=e.stringMetric("StartURL",""),i=e.stringMetric("AppName","");if("undefined"!==typeof window){if("undefined"!==typeof window.location){var l=window.location.href;o.update(l)}"undefined"!==typeof window.glue42gd&&i.update(window.glue42gd.appName)}},e}(),NullProtocol=function(){function e(){}return e.prototype.init=function(e){},e.prototype.createSystem=function(e){return Promise.resolve()},e.prototype.updateSystem=function(e,n){return Promise.resolve()},e.prototype.createMetric=function(e){return Promise.resolve()},e.prototype.updateMetric=function(e){return Promise.resolve()},e}(),PerfTracker=function(){function e(e,n,t){this.api=e,this.lastCount=0,this.initialPublishTimeout=1e4,this.publishInterval=6e4,this.initialPublishTimeout=null!==n&&void 0!==n?n:this.initialPublishTimeout,this.publishInterval=null!==t&&void 0!==t?t:this.publishInterval,this.scheduleCollection(),this.system=this.api.subSystem("performance","Performance data published by the web application")}return e.prototype.scheduleCollection=function(){var e=this;setTimeout((function(){e.collect(),setInterval((function(){e.collect()}),e.publishInterval)}),this.initialPublishTimeout)},e.prototype.collect=function(){try{this.collectMemory(),this.collectEntries()}catch(e){}},e.prototype.collectMemory=function(){var e=window.performance.memory;this.system.stringMetric("memory",JSON.stringify({totalJSHeapSize:e.totalJSHeapSize,usedJSHeapSize:e.usedJSHeapSize}))},e.prototype.collectEntries=function(){var e=window.performance.getEntries();if(!(e.length<=this.lastCount)){this.lastCount=e.length;var n=e.map((function(e){return e.toJSON()}));this.system.stringMetric("entries",JSON.stringify(n))}},e}(),metrics=function(e){var n;n=e.connection&&"object"===typeof e.connection?gw3(e.connection,e):new NullProtocol;var t=new Repository(e,n).root;e.disableAutoAppSystem||(t=t.subSystem("App"));var r=addFAVSupport(t);return initPerf(r,e.pagePerformanceMetrics),r},perf;function initPerf(e,n){var t,r;if("undefined"!==typeof window){var o=null===(r=null===(t=null===window||void 0===window?void 0:window.glue42gd)||void 0===t?void 0:t.metrics)||void 0===r?void 0:r.pagePerformanceMetrics;o&&(n=o),(null===n||void 0===n?void 0:n.enabled)&&(perf=new PerfTracker(e,n.initialPublishTimeout,n.publishInterval))}}function addFAVSupport(e){var n,t=e.subSystem("reporting"),r={name:"features"};return e.featureMetric=function(e,o,i){if("undefined"===typeof e||""===e)throw new Error("name is mandatory");if("undefined"===typeof o||""===o)throw new Error("action is mandatory");if("undefined"===typeof i||""===i)throw new Error("payload is mandatory");n?n.update({name:e,action:o,payload:i}):n=t.objectMetric(r,{name:e,action:o,payload:i})},e}function createRegistry$1(e){if(e&&e.errorHandling&&"function"!==typeof e.errorHandling&&"log"!==e.errorHandling&&"silent"!==e.errorHandling&&"throw"!==e.errorHandling)throw new Error('Invalid options passed to createRegistry. Prop errorHandling should be ["log" | "silent" | "throw" | (err) => void], but '+typeof e.errorHandling+" was passed");var n=e&&"function"===typeof e.errorHandling&&e.errorHandling,t={};function r(t,r){var o=t instanceof Error?t:new Error(t);if(n)n(o);else{var i='[ERROR] callback-registry: User callback for key "'+r+'" failed: '+o.stack;if(e)switch(e.errorHandling){case"log":return console.error(i);case"silent":return;case"throw":throw new Error(i)}console.error(i)}}return{add:function(e,n,o){var i=t[e];return i||(i=[],t[e]=i),i.push(n),o&&setTimeout((function(){o.forEach((function(o){var i;if(null===(i=t[e])||void 0===i?void 0:i.includes(n))try{Array.isArray(o)?n.apply(void 0,o):n.apply(void 0,[o])}catch(err){r(err,e)}}))}),0),function(){var r=t[e];r&&(0===(r=r.reduce((function(e,t,r){return t===n&&e.length===r||e.push(t),e}),[])).length?delete t[e]:t[e]=r)}},execute:function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=t[e];if(!i||0===i.length)return[];var l=[];return i.forEach((function(t){try{var o=t.apply(void 0,n);l.push(o)}catch(err){l.push(void 0),r(err,e)}})),l},clear:function(){t={}},clearKey:function(e){t[e]&&delete t[e]}}}createRegistry$1.default=createRegistry$1;var lib$1=createRegistry$1,InProcTransport=function(){function e(e,n){var t=this;this.registry=lib$1(),this.gw=e.facade,this.gw.connect((function(e,n){t.messageHandler(n)})).then((function(e){t.client=e}))}return Object.defineProperty(e.prototype,"isObjectBasedTransport",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.sendObject=function(e){return this.client?(this.client.send(e),Promise.resolve(void 0)):Promise.reject("not connected")},e.prototype.send=function(e){return Promise.reject("not supported")},e.prototype.onMessage=function(e){return this.registry.add("onMessage",e)},e.prototype.onConnectedChanged=function(e){e(!0)},e.prototype.close=function(){return Promise.resolve()},e.prototype.open=function(){return Promise.resolve()},e.prototype.name=function(){return"in-memory"},e.prototype.reconnect=function(){return Promise.resolve()},e.prototype.messageHandler=function(e){this.registry.execute("onMessage",e)},e}(),SharedWorkerTransport=function(){function e(e,n){var t=this;this.logger=n,this.registry=lib$1(),this.worker=new SharedWorker(e),this.worker.port.onmessage=function(e){t.messageHandler(e.data)}}return Object.defineProperty(e.prototype,"isObjectBasedTransport",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.sendObject=function(e){return this.worker.port.postMessage(e),Promise.resolve()},e.prototype.send=function(e){return Promise.reject("not supported")},e.prototype.onMessage=function(e){return this.registry.add("onMessage",e)},e.prototype.onConnectedChanged=function(e){e(!0)},e.prototype.close=function(){return Promise.resolve()},e.prototype.open=function(){return Promise.resolve()},e.prototype.name=function(){return"shared-worker"},e.prototype.reconnect=function(){return Promise.resolve()},e.prototype.messageHandler=function(e){this.registry.execute("onMessage",e)},e}(),Utils=function(){function e(){}return e.getGDMajorVersion=function(){if("undefined"!==typeof window&&window.glueDesktop&&window.glueDesktop.version){var e=Number(window.glueDesktop.version.substr(0,1));return isNaN(e)?void 0:e}},e.isNode=function(){if("undefined"!==typeof e._isNode)return e._isNode;if("undefined"!==typeof window)return e._isNode=!1,!1;try{e._isNode="[object process]"===Object.prototype.toString.call(global.process)}catch(n){e._isNode=!1}return e._isNode},e}(),PromiseWrapper=function(){function e(){var e=this;this.rejected=!1,this.resolved=!1,this.promise=new Promise((function(n,t){e.resolve=function(t){e.resolved=!0,n(t)},e.reject=function(n){e.rejected=!0,t(n)}}))}return e.delay=function(e){return new Promise((function(n){return setTimeout(n,e)}))},Object.defineProperty(e.prototype,"ended",{get:function(){return this.rejected||this.resolved},enumerable:!0,configurable:!0}),e}(),timers={};function getAllTimers(){return timers}function timer(e){var n=timers[e];if(n)return n;var t=[];function r(){return(new Date).getTime()}var o,i,l=r();function a(e,n){var o=null!==n&&void 0!==n?n:r(),i=0;t.length>0&&(i=o-t[t.length-1].time),t.push({name:e,time:o,diff:i})}a("start",l);var u={get startTime(){return l},get endTime(){return o},get period(){return i},stop:function(){return a("end",o=r()),i=o-l},mark:a,marks:t};return timers[e]=u,u}var WebSocketConstructor=Utils.isNode()?__webpack_require__(19):window.WebSocket,WS=function(){function e(e,n){if(this.startupTimer=timer("connection"),this._running=!0,this._registry=lib$1(),this.wsRequests=[],this.settings=e,this.logger=n,!this.settings.ws)throw new Error("ws is missing")}return e.prototype.onMessage=function(e){return this._registry.add("onMessage",e)},e.prototype.send=function(e,n){var t=this;return new Promise((function(n,r){t.waitForSocketConnection((function(){var o;try{null===(o=t.ws)||void 0===o||o.send(e),n()}catch(i){r(i)}}),r)}))},e.prototype.open=function(){var e=this;return this.logger.info("opening ws..."),this._running=!0,new Promise((function(n,t){e.waitForSocketConnection(n,t)}))},e.prototype.close=function(){return this._running=!1,this.ws&&this.ws.close(),Promise.resolve()},e.prototype.onConnectedChanged=function(e){return this._registry.add("onConnectedChanged",e)},e.prototype.name=function(){return"ws "+this.settings.ws},e.prototype.reconnect=function(){var e;null===(e=this.ws)||void 0===e||e.close();var n=new PromiseWrapper;return this.waitForSocketConnection((function(){n.resolve()})),n.promise},e.prototype.waitForSocketConnection=function(e,n){var t;n=null!==n&&void 0!==n?n:function(){},this._running?1!==(null===(t=this.ws)||void 0===t?void 0:t.readyState)?(this.wsRequests.push({callback:e,failed:n}),this.wsRequests.length>1||this.openSocket()):e():n("wait for socket on "+this.settings.ws+" failed - socket closed by user")},e.prototype.openSocket=function(e,n){return __awaiter$1$1(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(r){switch(r.label){case 0:if(this.startupTimer.mark("opening-socket"),void 0===e&&(e=this.settings.reconnectInterval),void 0!==n){if(0===n)return this.notifyForSocketState("wait for socket on "+this.settings.ws+" failed - no more retries left"),[2];this.logger.debug("will retry "+n+" more times (every "+e+" ms)")}r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.initiateSocket()];case 2:return r.sent(),this.startupTimer.mark("socket-initiated"),this.notifyForSocketState(),[3,4];case 3:return r.sent(),setTimeout((function(){var r=void 0===n?void 0:n-1;t.openSocket(e,r)}),e),[3,4];case 4:return[2]}}))}))},e.prototype.initiateSocket=function(){var e=this,n=new PromiseWrapper;return this.logger.debug("initiating ws to "+this.settings.ws+"..."),this.ws=new WebSocketConstructor(this.settings.ws||""),this.ws.onerror=function(t){var r="";try{r=JSON.stringify(t)}catch(i){var o=new WeakSet;r=JSON.stringify(t,(function(e,n){if("object"===typeof n&&null!==n){if(o.has(n))return;o.add(n)}return n}))}n.reject("error"),e.notifyStatusChanged(!1,r)},this.ws.onclose=function(t){e.logger.info("ws closed "+t),n.reject("closed"),e.notifyStatusChanged(!1)},this.ws.onopen=function(){var t;e.startupTimer.mark("ws-opened"),e.logger.info("ws opened "+(null===(t=e.settings.identity)||void 0===t?void 0:t.application)),n.resolve(),e.notifyStatusChanged(!0)},this.ws.onmessage=function(n){e._registry.execute("onMessage",n.data)},n.promise},e.prototype.notifyForSocketState=function(e){this.wsRequests.forEach((function(n){e?n.failed&&n.failed(e):n.callback()})),this.wsRequests=[]},e.prototype.notifyStatusChanged=function(e,n){this._registry.execute("onConnectedChanged",e,n)},e}();function createCommonjsModule(e,n){return e(n={exports:{}},n.exports),n.exports}var seed=1;function getNextValue(){return(seed=(9301*seed+49297)%233280)/233280}function setSeed(e){seed=e}var randomFromSeed={nextValue:getNextValue,seed:setSeed},ORIGINAL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",alphabet,previousSeed,shuffled;function reset(){shuffled=!1}function setCharacters(e){if(e){if(e!==alphabet){if(e.length!==ORIGINAL.length)throw new Error("Custom alphabet for shortid must be "+ORIGINAL.length+" unique characters. You submitted "+e.length+" characters: "+e);var n=e.split("").filter((function(e,n,t){return n!==t.lastIndexOf(e)}));if(n.length)throw new Error("Custom alphabet for shortid must be "+ORIGINAL.length+" unique characters. These characters were not unique: "+n.join(", "));alphabet=e,reset()}}else alphabet!==ORIGINAL&&(alphabet=ORIGINAL,reset())}function characters(e){return setCharacters(e),alphabet}function setSeed$1(e){randomFromSeed.seed(e),previousSeed!==e&&(reset(),previousSeed=e)}function shuffle(){alphabet||setCharacters(ORIGINAL);for(var e,n=alphabet.split(""),t=[],r=randomFromSeed.nextValue();n.length>0;)r=randomFromSeed.nextValue(),e=Math.floor(r*n.length),t.push(n.splice(e,1)[0]);return t.join("")}function getShuffled(){return shuffled||(shuffled=shuffle())}function lookup(e){return getShuffled()[e]}var alphabet_1={characters:characters,seed:setSeed$1,lookup:lookup,shuffled:getShuffled},crypto="object"===typeof window&&(window.crypto||window.msCrypto);function randomByte(){if(!crypto||!crypto.getRandomValues)return 48&Math.floor(256*Math.random());var e=new Uint8Array(1);return crypto.getRandomValues(e),48&e[0]}var randomByteBrowser=randomByte;function encode(e,n){for(var t,r=0,o="";!t;)o+=e(n>>4*r&15|randomByteBrowser()),t=n<Math.pow(16,r+1),r++;return o}var encode_1=encode;function decode(e){var n=alphabet_1.shuffled();return{version:15&n.indexOf(e.substr(0,1)),worker:15&n.indexOf(e.substr(1,1))}}var decode_1=decode;function isShortId(e){if(!e||"string"!==typeof e||e.length<6)return!1;for(var n=alphabet_1.characters(),t=e.length,r=0;r<t;r++)if(-1===n.indexOf(e[r]))return!1;return!0}var isValid=isShortId,lib$1$1=createCommonjsModule((function(e){var n,t,r=0;function o(){var e="",o=Math.floor(.001*(Date.now()-1459707606518));return o===t?n++:(n=0,t=o),e+=encode_1(alphabet_1.lookup,6),e+=encode_1(alphabet_1.lookup,r),n>0&&(e+=encode_1(alphabet_1.lookup,n)),e+=encode_1(alphabet_1.lookup,o)}e.exports=o,e.exports.generate=o,e.exports.seed=function(n){return alphabet_1.seed(n),e.exports},e.exports.worker=function(n){return r=n,e.exports},e.exports.characters=function(e){return void 0!==e&&alphabet_1.characters(e),alphabet_1.shuffled()},e.exports.decode=decode_1,e.exports.isValid=isValid})),lib_1=lib$1$1.generate,lib_2=lib$1$1.seed,lib_3=lib$1$1.worker,lib_4=lib$1$1.characters,lib_5=lib$1$1.decode,lib_6=lib$1$1.isValid,shortid=lib$1$1;function domainSession(e,n,t,r,o){null==e&&(e="global"),r=r||["success"],o=o||["error"];var i,l=!1,a=!1,u=!1,s=lib$1();n.disconnected((function(){u=!1,t.debug("connection is down"),l=!1,a=!0,s.execute("onLeft",{disconnected:!0})})),n.loggedIn((function(){u=!0,a&&(t.debug("connection is now up - trying to reconnect..."),d(i))})),n.on("success",(function(e){return p(e)})),n.on("error",(function(e){return f(e)})),n.on("result",(function(e){return p(e)})),r&&r.forEach((function(e){n.on(e,(function(e){return p(e)}))})),o&&o.forEach((function(e){n.on(e,(function(e){return f(e)}))}));var c={};function d(n){return i=n,new Promise((function(r,o){if(l)r();else{var i;if("global"===e)i=u?Promise.resolve({}):Promise.reject("not connected to gateway");else t.debug("joining domain "+e),i=_({type:"join",destination:e,domain:"global",options:n});i.then((function(){!function(){t.debug("did join "+e),l=!0;var n=a;a=!1,s.execute("onJoined",n)}(),r()})).catch((function(n){t.debug("error joining "+e+" domain: "+JSON.stringify(n)),o(n)}))}}))}function f(n){if(e===n.domain){var t=n.request_id;if(t){var r=c[t];r&&r.error(n)}}}function p(n){if(n.domain===e){var t=n.request_id;if(t){var r=c[t];r&&r.success(n)}}}function h(){return shortid()}function _(r,o,i){i=i||{},r.request_id=r.request_id||h(),r.domain=r.domain||e,i.skipPeerId||(r.peer_id=n.peerId);var l=r.request_id;return new Promise((function(e,a){c[l]={success:function(n){delete c[l],n._tag=o,e(n)},error:function(e){t.warn("GW error - "+JSON.stringify(e)+" for request "+JSON.stringify(r)),delete c[l],e._tag=o,a(e)}},n.send(r,i).catch((function(e){c[l].error({err:e})}))}))}return{join:d,leave:function(){return"global"===e?Promise.resolve():(t.debug("stopping session "+e+"..."),a=!1,_({type:"leave",destination:e,domain:"global"}).then((function(){l=!1,s.execute("onLeft")})))},onJoined:function(e){return l&&e(!1),s.add("onJoined",e)},onLeft:function(e){return l||e(),s.add("onLeft",e)},send:_,sendFireAndForget:function(t){return t.request_id=t.request_id?t.request_id:h(),t.domain=t.domain||e,t.peer_id=n.peerId,n.send(t)},on:function(r,o){n.on(r,(function(n){if(n.domain===e)try{o(n)}catch(r){t.error("Callback  failed: "+r+" \n "+r.stack+" \n msg was: "+JSON.stringify(n),r)}}))},loggedIn:function(e){return n.loggedIn(e)},connected:function(e){return n.connected(e)},disconnected:function(e){return n.disconnected(e)},get peerId(){return n.peerId},get domain(){return e}}}var GW3ProtocolImpl=function(){function e(e,n,t){var r=this;this.connection=e,this.settings=n,this.logger=t,this.protocolVersion=3,this.datePrefix="#T42_DATE#",this.datePrefixLen=this.datePrefix.length,this.dateMinLen=this.datePrefixLen+1,this.datePrefixFirstChar=this.datePrefix[0],this.registry=lib$1(),this._isLoggedIn=!1,this.shouldTryLogin=!0,this.initialLogin=!0,this.initialLoginAttempts=3,this.sessions=[],e.disconnected((function(){r.handleDisconnected()})),this.ping()}return Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return this._isLoggedIn},enumerable:!0,configurable:!0}),e.prototype.processStringMessage=function(e){var n=this,t=JSON.parse(e,(function(e,t){if("string"!==typeof t)return t;if(t.length<n.dateMinLen)return t;if(t[0]!==n.datePrefixFirstChar)return t;if(t.substring(0,n.datePrefixLen)!==n.datePrefix)return t;try{var r=parseInt(t.substring(n.datePrefixLen,t.length),10);return isNaN(r)?t:new Date(r)}catch(o){return t}}));return{msg:t,msgType:t.type}},e.prototype.createStringMessage=function(e){var n=Date.prototype.toJSON;try{var t=this.datePrefix;return Date.prototype.toJSON=function(){return t+this.getTime()},JSON.stringify(e)}finally{Date.prototype.toJSON=n}},e.prototype.processObjectMessage=function(e){if(!e.type)throw new Error("Object should have type property");return{msg:e,msgType:e.type}},e.prototype.createObjectMessage=function(e){return e},e.prototype.login=function(e,n){return __awaiter$1$1(this,void 0,void 0,(function(){var t,r,o,i,l,a,u,s,c,d;return __generator(this,(function(f){switch(f.label){case 0:if(this.logger.debug("logging in..."),this.loginConfig=e,this.loginConfig||(this.loginConfig={username:"",password:""}),this.shouldTryLogin=!0,t={},this.connection.gatewayToken=e.gatewayToken,!e.gatewayToken)return[3,5];if(!n)return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.getNewGWToken()];case 2:return s=f.sent(),e.gatewayToken=s,[3,4];case 3:return r=f.sent(),this.logger.warn("failed to get GW token when reconnecting "+((null===r||void 0===r?void 0:r.message)||r)),[3,4];case 4:return t.method="gateway-token",t.token=e.gatewayToken,this.connection.gatewayToken=e.gatewayToken,[3,10];case 5:return"sspi"!==e.flowName?[3,9]:(t.provider="win",t.method="access-token",e.flowCallback&&e.sessionId?(o=t,[4,e.flowCallback(e.sessionId,null)]):[3,7]);case 6:return o.token=f.sent().data.toString("base64"),[3,8];case 7:throw new Error("Invalid SSPI config");case 8:return[3,10];case 9:if(e.token)t.method="access-token",t.token=e.token;else{if(!e.username)throw new Error("invalid auth message"+JSON.stringify(e));t.method="secret",t.login=e.username,t.secret=e.password}f.label=10;case 10:i={type:"hello",identity:this.settings.identity,authentication:t},e.sessionId&&(i.request_id=e.sessionId),this.globalDomain=domainSession("global",this.connection,this.logger.subLogger("global-domain"),["welcome","token","authentication-request"]),l={skipPeerId:!0},this.initialLogin&&(l.retryInterval=this.settings.reconnectInterval,l.maxRetries=this.settings.reconnectAttempts),f.label=11;case 11:f.trys.push([11,19,20,21]),a=void 0,f.label=12;case 12:return[4,this.globalDomain.send(i,void 0,l)];case 13:return"authentication-request"!==(u=f.sent()).type?[3,16]:(s=Buffer.from(u.authentication.token,"base64"),e.flowCallback&&e.sessionId?(c=i.authentication,[4,e.flowCallback(e.sessionId,s)]):[3,15]);case 14:c.token=f.sent().data.toString("base64"),f.label=15;case 15:return i.request_id=e.sessionId,[3,12];case 16:if("welcome"===u.type)return a=u,[3,18];throw"error"===u.type?new Error("Authentication failed: "+u.reason):new Error("Unexpected message type during authentication: "+u.type);case 17:return[3,12];case 18:return this.initialLogin=!1,this.logger.debug("login successful with peerId "+a.peer_id),this.connection.peerId=a.peer_id,this.connection.resolvedIdentity=a.resolved_identity,this.connection.availableDomains=a.available_domains,a.options&&(this.connection.token=a.options.access_token,this.connection.info=a.options.info),this.setLoggedIn(!0),[2,a.resolved_identity];case 19:throw d=f.sent(),this.logger.error("error sending hello message - "+(d.message||d.msg||d.reason||d),d),d;case 20:return e&&e.flowCallback&&e.sessionId&&e.flowCallback(e.sessionId,null),[7];case 21:return[2]}}))}))},e.prototype.logout=function(){return __awaiter$1$1(this,void 0,void 0,(function(){var e;return __generator(this,(function(n){switch(n.label){case 0:return this.logger.debug("logging out..."),this.shouldTryLogin=!1,this.pingTimer&&clearTimeout(this.pingTimer),e=this.sessions.map((function(e){e.leave()})),[4,Promise.all(e)];case 1:return n.sent(),[2]}}))}))},e.prototype.loggedIn=function(e){return this._isLoggedIn&&e(),this.registry.add("onLoggedIn",e)},e.prototype.domain=function(e,n,t,r){var o=this.sessions.filter((function(n){return n.domain===e}))[0];return o||(o=domainSession(e,this.connection,n,t,r),this.sessions.push(o)),o},e.prototype.handleDisconnected=function(){var e=this;if(this.setLoggedIn(!1),this.shouldTryLogin&&this.initialLogin){if(this.initialLoginAttempts<=0)return;this.initialLoginAttempts--}if(this.logger.debug("disconnected - will try new login?"+this.shouldTryLogin),this.shouldTryLogin){if(!this.loginConfig)throw new Error("no login info");this.connection.login(this.loginConfig,!0).catch((function(){setTimeout(e.handleDisconnected.bind(e),e.settings.reconnectInterval||1e3)}))}},e.prototype.setLoggedIn=function(e){this._isLoggedIn=e,this._isLoggedIn&&this.registry.execute("onLoggedIn")},e.prototype.ping=function(){var e=this;this.shouldTryLogin&&(this._isLoggedIn&&this.connection.send({type:"ping"}),this.pingTimer=setTimeout((function(){e.ping()}),3e4))},e.prototype.authToken=function(){return this.globalDomain?this.globalDomain.send({type:"create-token"}).then((function(e){return e.token})):Promise.reject(new Error("no global domain session"))},e.prototype.getNewGWToken=function(){if(void 0!==typeof window){var e=window.glue42gd;if(e)return e.getGWToken()}return Promise.reject(new Error("not running in GD"))},e}(),MessageReplayerImpl=function(){function e(e){this.specsNames=[],this.messages={},this.subs={},this.subsRefCount={},this.specs={};for(var n=0,t=e;n<t.length;n++){var r=t[n];this.specs[r.name]=r,this.specsNames.push(r.name)}}return e.prototype.init=function(e){var n=this;this.connection=e;for(var t=0,r=this.specsNames;t<r.length;t++)for(var o=r[t],i=function(t){var r=l.subsRefCount[t];if(r||(r=0),r+=1,l.subsRefCount[t]=r,r>1)return"continue";var o=e.on(t,(function(e){return n.processMessage(t,e)}));l.subs[t]=o},l=this,a=0,u=this.specs[o].types;a<u.length;a++){i(u[a])}},e.prototype.processMessage=function(e,n){if(!this.isDone&&n)for(var t=0,r=this.specsNames;t<r.length;t++){var o=r[t];if(-1!==this.specs[o].types.indexOf(e)){var i=this.messages[o]||[];this.messages[o]=i,i.push(n)}}},e.prototype.drain=function(e,n){var t;n&&(this.messages[e]||[]).forEach(n),delete this.messages[e];for(var r=0,o=this.specs[e].types;r<o.length;r++){var i=o[r];this.subsRefCount[i]-=1,this.subsRefCount[i]<=0&&(null===(t=this.connection)||void 0===t||t.off(this.subs[i]),delete this.subs[i],delete this.subsRefCount[i])}delete this.specs[e],this.specs.length||(this.isDone=!0)},e}(),PromisePlus$1=function(e,n,t){return new Promise((function(r,o){var i=setTimeout((function(){o(t||"Promise timeout hit: "+n)}),n);new Promise(e).then((function(e){clearTimeout(i),r(e)})).catch((function(e){clearTimeout(i),o(e)}))}))},WebPlatformTransport=function(){function e(e,n,t){this.settings=e,this.logger=n,this.identity=t,this.parentReady=!1,this.iAmConnected=!1,this.rejected=!1,this.children=[],this.parentPingTimeout=3e3,this.connectionRequestTimeout=5e3,this.defaultTargetString="*",this.registry=lib$1(),this.messages={connectionAccepted:{name:"connectionAccepted",handle:this.handleConnectionAccepted.bind(this)},connectionRejected:{name:"connectionRejected",handle:this.handleConnectionRejected.bind(this)},connectionRequest:{name:"connectionRequest",handle:this.handleConnectionRequest.bind(this)},parentReady:{name:"parentReady",handle:this.handleParentReady.bind(this)},parentPing:{name:"parentPing",handle:this.handleParentPing.bind(this)},platformPing:{name:"platformPing",handle:this.handlePlatformPing.bind(this)},platformUnload:{name:"platformUnload",handle:this.handlePlatformUnload.bind(this)},platformReady:{name:"platformReady",handle:this.handlePlatformReady.bind(this)},clientUnload:{name:"clientUnload",handle:this.handleClientUnload.bind(this)}},this.setUpMessageListener(),this.setUpUnload(),this.settings.port||(this.parent=window.opener||window.top,this.parentType=window.opener?"opener":-1!==window.name.indexOf("#wsp")?"workspace":"top")}return Object.defineProperty(e.prototype,"transportWindowId",{get:function(){return this.publicWindowId},enumerable:!0,configurable:!0}),e.prototype.sendObject=function(e){return __awaiter$1$1(this,void 0,void 0,(function(){return __generator(this,(function(n){if(!this.port)throw new Error("Cannot send message, because the port was not opened yet");return this.port.postMessage(e),[2]}))}))},Object.defineProperty(e.prototype,"isObjectBasedTransport",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.onMessage=function(e){return this.registry.add("onMessage",e)},e.prototype.send=function(){return Promise.reject("not supported")},e.prototype.onConnectedChanged=function(e){return this.registry.add("onConnectedChanged",e)},e.prototype.open=function(){return __awaiter$1$1(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return this.logger.debug("opening a connection to the web platform gateway."),[4,this.connect()];case 1:return e.sent(),this.notifyStatusChanged(!0),[2]}}))}))},e.prototype.close=function(){return Promise.resolve()},e.prototype.name=function(){return"web-platform"},e.prototype.reconnect=function(){return Promise.resolve()},e.prototype.connect=function(){return __awaiter$1$1(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(n){switch(n.label){case 0:if(this.parentReady)return this.logger.debug("cancelling connection attempt, because this client's parent has already given a ready signal"),[2];if(this.settings.port)return this.logger.debug("opening an internal web platform connection"),this.port=this.settings.port,this.publicWindowId=this.settings.windowId,this.identity&&(this.identity.windowId=this.publicWindowId),this.port.onmessage=function(n){return e.registry.execute("onMessage",n.data)},this.logger.debug("internal web platform connection completed"),[2];if(!this.parentType||!this.parent)throw new Error("Cannot initiate a connection, because there is no opener, no top and no port.");return this.logger.debug("opening a "+("opener"===this.parentType?"child":"grandchild")+" client web platform connection"),[4,this.waitParent(this.parent,this.parentType)];case 1:return n.sent(),[4,this.initiateRemoteConnection(this.parent,this.parentType)];case 2:return n.sent(),this.logger.debug("the "+("opener"===this.parentType?"child":"grandchild")+" client is connected"),[2]}}))}))},e.prototype.initiateRemoteConnection=function(e,n){var t=this;return PromisePlus$1((function(r,o){t.connectionResolve=r,t.connectionReject=o,t.myClientId=shortid();var i="workspace"===t.parentType?window.name.substring(0,window.name.indexOf("#wsp")):window.name,l={glue42core:{type:t.messages.connectionRequest.name,clientId:t.myClientId,clientType:"top"===n||"workspace"===n?"grandChild":"child",bridgeInstanceId:i}};t.logger.debug("sending connection request to "+n),e.postMessage(l,t.defaultTargetString)}),this.connectionRequestTimeout,"The connection to the opener/top window timed out")},e.prototype.waitParent=function(e,n){var t=this;return PromisePlus$1((function(r){t.parentPingResolve=r;var o={glue42core:{type:"opener"===n?t.messages.platformPing.name:t.messages.parentPing.name}};t.logger.debug("checking for "+n+" window availability"),e.postMessage(o,t.defaultTargetString)}),this.parentPingTimeout,"Cannot initiate glue, because this window was not opened or created by a glue client")},e.prototype.setUpMessageListener=function(){var e=this;this.settings.port?this.logger.debug("skipping generic message listener, because this is an internal client"):window.addEventListener("message",(function(n){var t,r=null===(t=n.data)||void 0===t?void 0:t.glue42core;if(r&&!e.rejected)if(e.checkMessageTypeValid(r.type)){var o=r.type;e.logger.debug("received valid glue42core message of type: "+o),e.messages[o].handle(n)}else e.logger.error("cannot handle the incoming glue42 core message, because the type is invalid: "+r.type)}))},e.prototype.setUpUnload=function(){var e=this;this.settings.port?this.logger.debug("skipping unload event listener, because this is an internal client"):window.addEventListener("beforeunload",(function(){var n,t,r={glue42core:{type:e.messages.clientUnload.name,data:{clientId:e.myClientId,ownWindowId:null===(n=e.identity)||void 0===n?void 0:n.windowId}}};e.parent&&e.parent.postMessage(r,e.defaultTargetString),null===(t=e.port)||void 0===t||t.postMessage(r)}))},e.prototype.handleParentReady=function(){if(this.logger.debug("handling the ready signal from the parent, by resoling the pending promise."),this.parentReady=!0,this.parentPingResolve)return this.parentPingResolve(),void delete this.parentPingResolve;this.logger.debug("silently handling the ready signal from the top parent, because there is no defined promise")},e.prototype.handlePlatformReady=function(){if(this.logger.debug("the web platform gave the ready signal"),this.parentReady=!0,this.parentPingResolve)return this.parentPingResolve(),void delete this.parentPingResolve;this.logger.debug("silently handling the ready signal from the top parent, because there is no defined promise")},e.prototype.handleConnectionAccepted=function(e){var n,t=null===(n=e.data)||void 0===n?void 0:n.glue42core;return this.myClientId===t.clientId?this.handleAcceptanceOfMyRequest(t):this.handleAcceptanceOfGrandChildRequest(t,e)},e.prototype.handleAcceptanceOfMyRequest=function(e){var n=this;if(this.logger.debug("handling a connection accepted signal targeted at me."),e.port){if(this.publicWindowId="opener"===this.parentType?window.name:"top"===this.parentType?e.parentWindowId:window.name.substring(0,window.name.indexOf("#wsp")),this.identity&&"top"!==this.parentType&&(this.identity.windowId=this.publicWindowId),this.identity&&e.appName&&(this.identity.application=e.appName,this.identity.applicationName=e.appName),this.port=e.port,this.port.onmessage=function(e){return n.registry.execute("onMessage",e.data)},this.connectionResolve)return this.logger.debug("my connection is set up, calling the connection resolve."),this.connectionResolve(),void delete this.connectionResolve;this.logger.error("unable to call the connection resolve, because no connection promise was found")}else this.logger.error("cannot set up my connection, because I was not provided with a port")},e.prototype.handleAcceptanceOfGrandChildRequest=function(e,n){this.logger.debug("handling a connection accepted signal targeted at a grandchild: "+e.clientId);var t=this.children.find((function(n){return n.grandChildId===e.clientId}));t?(t.connected=!0,this.logger.debug("the grandchild connection for "+e.clientId+" is set up, forwarding the success message and the gateway port"),e.parentWindowId=this.publicWindowId,t.source.postMessage(n.data,t.origin,[e.port])):this.logger.error("cannot handle connection accepted for grandchild: "+e.clientId+", because there is no grandchild with this id")},e.prototype.handleConnectionRejected=function(){this.logger.debug("handling a connection rejection. Most likely the reason is that this window was not created by a glue API call"),this.connectionReject&&(this.connectionReject("The platform connection was rejected. Most likely because this window was not created by a glue API call"),delete this.connectionReject)},e.prototype.handleConnectionRequest=function(e){var n=e.source,t=e.data.glue42core;return t.clientType&&"grandChild"===t.clientType?t.clientId?"opener"===this.parentType&&this.parent?(this.logger.debug("handling a connection request for a grandchild: "+t.clientId),this.children.push({grandChildId:t.clientId,source:n,connected:!1,origin:e.origin}),this.logger.debug("grandchild: "+t.clientId+" is prepared, forwarding connection request to the platform"),void this.parent.postMessage(e.data,this.defaultTargetString)):this.rejectConnectionRequest(n,e.origin,"Cannot forward the connection request, because no direct connection to the platform was found"):this.rejectConnectionRequest(n,e.origin,"rejecting a connection request, because the source did not provide a valid id"):this.rejectConnectionRequest(n,e.origin,"rejecting a connection request, because the source was not opened by a glue API call")},e.prototype.handleParentPing=function(e){if(this.parentReady)if(this.iAmConnected){var n={glue42core:{type:this.messages.parentReady.name}},t=e.source;this.logger.debug("responding to a parent ping with a ready message"),t.postMessage(n,e.origin)}else this.logger.debug("i am not fully connected yet, I am ignoring the parent ping");else this.logger.debug("my parent is not ready, I am ignoring the parent ping")},e.prototype.handlePlatformUnload=function(e){this.logger.debug("detected a web platform unload"),this.parentReady=!1,this.children.length&&(this.logger.debug("forwarding the platform unload to all known children and starting platform discovery polling"),this.children.forEach((function(n){return n.source.postMessage(e.data,n.origin)}))),this.notifyStatusChanged(!1,"Gateway unloaded")},e.prototype.handleClientUnload=function(e){var n=e.data.glue42core;n.clientId?this.children.find((function(e){return e.grandChildId===n.clientId}))?(this.logger.debug("handling grandchild unload for id: "+n.clientId),this.children=this.children.filter((function(e){return e.grandChildId!==n.clientId}))):this.logger.warn("cannot process grand child unload, because this client is unaware of this grandchild"):this.logger.warn("cannot process grand child unload, because the provided id was not valid")},e.prototype.handlePlatformPing=function(){this.logger.error("cannot handle platform ping, because this is not a platform calls handling component")},e.prototype.notifyStatusChanged=function(e,n){this.iAmConnected=e,this.registry.execute("onConnectedChanged",e,n)},e.prototype.checkMessageTypeValid=function(e){return"string"===typeof e&&!!this.messages[e]},e.prototype.rejectConnectionRequest=function(e,n,t){this.rejected=!0,this.logger.error(t);var r={glue42core:{type:this.messages.connectionRejected.name}};e.postMessage(r,n)},e}(),Connection=function(){function e(e,n){if(this.settings=e,this.logger=n,this.messageHandlers={},this.ids=1,this.registry=lib$1(),this._connected=!1,this.isTrace=!1,(e=e||{}).reconnectAttempts=e.reconnectAttempts||10,e.reconnectInterval=e.reconnectInterval||1e3,e.inproc)this.transport=new InProcTransport(e.inproc,n.subLogger("inMemory"));else if(e.sharedWorker)this.transport=new SharedWorkerTransport(e.sharedWorker,n.subLogger("shared-worker"));else if(e.webPlatform)this.transport=new WebPlatformTransport(e.webPlatform,n.subLogger("web-platform"),e.identity);else{if(void 0===e.ws)throw new Error("No connection information specified");this.transport=new WS(e,n.subLogger("ws"))}this.isTrace=n.canPublish("trace"),n.debug("starting with "+this.transport.name()+" transport"),this.protocol=new GW3ProtocolImpl(this,e,n.subLogger("protocol")),this.transport.onConnectedChanged(this.handleConnectionChanged.bind(this)),this.transport.onMessage(this.handleTransportMessage.bind(this)),e.replaySpecs&&e.replaySpecs.length&&(this.replayer=new MessageReplayerImpl(e.replaySpecs),this.replayer.init(this))}return Object.defineProperty(e.prototype,"protocolVersion",{get:function(){var e;return null===(e=this.protocol)||void 0===e?void 0:e.protocolVersion},enumerable:!0,configurable:!0}),e.prototype.send=function(e,n){if(this.transport.sendObject&&this.transport.isObjectBasedTransport){var t=this.protocol.createObjectMessage(e);return this.isTrace&&this.logger.trace(">> "+JSON.stringify(t)),this.transport.sendObject(t,n)}var r=this.protocol.createStringMessage(e);return this.isTrace&&this.logger.trace(">> "+r),this.transport.send(r,n)},e.prototype.on=function(e,n){e=e.toLowerCase(),void 0===this.messageHandlers[e]&&(this.messageHandlers[e]={});var t=this.ids++;return this.messageHandlers[e][t]=n,{type:e,id:t}},e.prototype.off=function(e){delete this.messageHandlers[e.type.toLowerCase()][e.id]},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this.protocol.isLoggedIn},enumerable:!0,configurable:!0}),e.prototype.connected=function(e){var n=this;return this.protocol.loggedIn((function(){e(n.settings.ws||n.settings.sharedWorker||"")}))},e.prototype.disconnected=function(e){return this.registry.add("disconnected",e)},e.prototype.login=function(e,n){return __awaiter$1$1(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){switch(r.label){case 0:return[4,this.transport.open()];case 1:return r.sent(),timer("connection").mark("transport-opened"),t=this.protocol.login(e,n),timer("connection").mark("protocol-logged-in"),[2,t]}}))}))},e.prototype.logout=function(){return __awaiter$1$1(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.protocol.logout()];case 1:return e.sent(),[4,this.transport.close()];case 2:return e.sent(),[2]}}))}))},e.prototype.loggedIn=function(e){return this.protocol.loggedIn(e)},e.prototype.domain=function(e,n,t){return this.protocol.domain(e,this.logger.subLogger("domain="+e),n,t)},e.prototype.authToken=function(){return this.protocol.authToken()},e.prototype.reconnect=function(){return this.transport.reconnect()},e.prototype.distributeMessage=function(e,n){var t=this,r=this.messageHandlers[n.toLowerCase()];void 0!==r&&Object.keys(r).forEach((function(n){var o=r[n];if(void 0!==o)try{o(e)}catch(i){try{t.logger.error("Message handler failed with "+i.stack,i)}catch(l){console.log("Message handler failed",i)}}}))},e.prototype.handleConnectionChanged=function(e){this._connected!==e&&(this._connected=e,e?this.registry.execute("connected"):this.registry.execute("disconnected"))},e.prototype.handleTransportMessage=function(e){var n;n="string"===typeof e?this.protocol.processStringMessage(e):this.protocol.processObjectMessage(e),this.isTrace&&this.logger.trace("<< "+JSON.stringify(n)),this.distributeMessage(n.msg,n.msgType)},e}(),order=["trace","debug","info","warn","error","off"],Logger=function(){function e(e,n,t){this.name=e,this.parent=n,this.subLoggers=[],this.logFn=console,this.customLogFn=!1,this.name=e,this.path=n?n.path+"."+e:e,this.loggerFullName="["+this.path+"]",this.includeTimeAndLevel=!t,t&&(this.logFn=t,this.customLogFn=!0)}return e.prototype.subLogger=function(n){var t=this.subLoggers.filter((function(e){return e.name===n}))[0];if(void 0!==t)return t;Object.keys(this).forEach((function(e){if(e===n)throw new Error("This sub logger name is not allowed.")}));var r=new e(n,this,this.customLogFn?this.logFn:void 0);return this.subLoggers.push(r),r},e.prototype.publishLevel=function(e){var n;return e&&(this._publishLevel=e),this._publishLevel||(null===(n=this.parent)||void 0===n?void 0:n.publishLevel())},e.prototype.consoleLevel=function(e){var n;return e&&(this._consoleLevel=e),this._consoleLevel||(null===(n=this.parent)||void 0===n?void 0:n.consoleLevel())},e.prototype.log=function(e,n,t){this.publishMessage(n||"info",e,t)},e.prototype.trace=function(e){this.log(e,"trace")},e.prototype.debug=function(e){this.log(e,"debug")},e.prototype.info=function(e){this.log(e,"info")},e.prototype.warn=function(e){this.log(e,"warn")},e.prototype.error=function(e,n){this.log(e,"error")},e.prototype.canPublish=function(e,n){return order.indexOf(e)>=order.indexOf(n||this.consoleLevel()||"trace")},e.prototype.publishMessage=function(n,t,r){var o=this.loggerFullName;if("error"===n&&!r){var i=new Error;i.stack&&(t=t+"\n"+i.stack.split("\n").slice(3).join("\n"))}if(this.canPublish(n,this.publishLevel())){var l=e.Interop;if(l)try{l.methods({name:e.InteropMethodName}).length>0&&l.invoke(e.InteropMethodName,{msg:""+t,logger:o,level:n})}catch(c){}}if(this.canPublish(n)){var a="";if(this.includeTimeAndLevel){var u=new Date;a="["+(u.getHours()+":"+u.getMinutes()+":"+u.getSeconds()+":"+u.getMilliseconds())+"] ["+n+"] "}var s=""+a+o+": "+t;switch(n){case"trace":this.logFn.debug(s);break;case"debug":this.logFn.debug?this.logFn.debug(s):this.logFn.log(s);break;case"info":this.logFn.info(s);break;case"warn":this.logFn.warn(s);break;case"error":this.logFn.error(s,r)}}},e.InteropMethodName="T42.AppLogger.Log",e}(),GW_MESSAGE_CREATE_CONTEXT="create-context",GW_MESSAGE_ACTIVITY_CREATED="created",GW_MESSAGE_ACTIVITY_DESTROYED="destroyed",GW_MESSAGE_CONTEXT_CREATED="context-created",GW_MESSAGE_CONTEXT_ADDED="context-added",GW_MESSAGE_SUBSCRIBE_CONTEXT="subscribe-context",GW_MESSAGE_SUBSCRIBED_CONTEXT="subscribed-context",GW_MESSAGE_UNSUBSCRIBE_CONTEXT="unsubscribe-context",GW_MESSAGE_DESTROY_CONTEXT="destroy-context",GW_MESSAGE_CONTEXT_DESTROYED="context-destroyed",GW_MESSAGE_UPDATE_CONTEXT="update-context",GW_MESSAGE_CONTEXT_UPDATED="context-updated",GW_MESSAGE_JOINED_ACTIVITY="joined",ContextMessageReplaySpec={get name(){return"context"},get types(){return[GW_MESSAGE_CREATE_CONTEXT,GW_MESSAGE_ACTIVITY_CREATED,GW_MESSAGE_ACTIVITY_DESTROYED,GW_MESSAGE_CONTEXT_CREATED,GW_MESSAGE_CONTEXT_ADDED,GW_MESSAGE_SUBSCRIBE_CONTEXT,GW_MESSAGE_SUBSCRIBED_CONTEXT,GW_MESSAGE_UNSUBSCRIBE_CONTEXT,GW_MESSAGE_DESTROY_CONTEXT,GW_MESSAGE_CONTEXT_DESTROYED,GW_MESSAGE_UPDATE_CONTEXT,GW_MESSAGE_CONTEXT_UPDATED,GW_MESSAGE_JOINED_ACTIVITY]}},version$1="5.4.1";function prepareConfig(e,n,t){var r,o,i,l,a,u;if(Utils.isNode()){var s=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})._GD_STARTING_CONTEXT_;if(s)try{u=JSON.parse(s)}catch(_){}}function c(){if(e.application)return e.application;if(t)return t.applicationName;var n=shortid();return Utils.isNode()?u?u.applicationConfig.name:"NodeJS"+n:"undefined"!==typeof window&&"undefined"!==typeof document?document.title+" ("+n+")":n}var d=function(){var r,o,i,l,a,s,d,f,p,h,_=e.gateway,g=null!==(r=null===_||void 0===_?void 0:_.protocolVersion)&&void 0!==r?r:3,m=null===_||void 0===_?void 0:_.reconnectInterval,w=null===_||void 0===_?void 0:_.reconnectAttempts,v=null===_||void 0===_?void 0:_.ws,b=null===_||void 0===_?void 0:_.sharedWorker,y=null===_||void 0===_?void 0:_.inproc,k=null!==(o=null===_||void 0===_?void 0:_.webPlatform)&&void 0!==o?o:void 0;t&&(v=t.gwURL),Utils.isNode()&&u&&u.gwURL&&(v=u.gwURL),v||b||y||(v="ws://localhost:8385");var C=c(),I=C;"undefined"!==typeof t?(d=t.windowId,f=t.pid,t.env&&(p=t.env.env,h=t.env.region),I=null!==(i=t.application)&&void 0!==i?i:"glue-app",s=t.appInstanceId):Utils.isNode()&&(f=process.pid,u&&(p=u.env,h=u.region,s=u.instanceId));var x=null!==(a=null===(l=e.gateway)||void 0===l?void 0:l.replaySpecs)&&void 0!==a?a:[];return x.push(ContextMessageReplaySpec),{identity:{application:I,applicationName:C,windowId:d,instance:s,process:f,region:h,environment:p,api:n.version||version$1},reconnectInterval:m,ws:v,sharedWorker:b,webPlatform:k,inproc:y,protocolVersion:g,reconnectAttempts:w,replaySpecs:x}}(),f=c();if("undefined"!==typeof window){var p=window,h=p.htmlContainer?p.htmlContainer.containerName+"."+p.htmlContainer.application:null===(r=null===p||void 0===p?void 0:p.glue42gd)||void 0===r?void 0:r.application;h&&(f=h)}return{bus:null!==(o=e.bus)&&void 0!==o&&o,application:f,auth:function(){var n,t,r;return"string"===typeof e.auth?{token:e.auth}:e.auth?e.auth:Utils.isNode()&&u&&u.gwToken?{gatewayToken:u.gwToken}:(null===(n=e.gateway)||void 0===n?void 0:n.webPlatform)||(null===(t=e.gateway)||void 0===t?void 0:t.inproc)||(null===(r=e.gateway)||void 0===r?void 0:r.sharedWorker)?{username:"glue42",password:"glue42"}:void 0}(),logger:function(){var n,r,o,i=e.logger,l="warn";return i||(i=l),t&&(o=t.consoleLogLevel),"string"===typeof i?{console:null!==o&&void 0!==o?o:i,publish:l}:{console:null!==(n=null!==o&&void 0!==o?o:i.console)&&void 0!==n?n:l,publish:null!==(r=i.publish)&&void 0!==r?r:l}}(),connection:d,metrics:null===(i=e.metrics)||void 0===i||i,contexts:null===(l=e.contexts)||void 0===l||l,version:n.version||version$1,libs:null!==(a=n.libs)&&void 0!==a?a:[],customLogger:e.customLogger}}var GW3ContextData=function(){function e(e,n,t,r){this.updateCallbacks={},this.contextId=e,this.name=n,this.isAnnounced=t,this.activityId=r,this.context={}}return e.prototype.hasCallbacks=function(){return Object.keys(this.updateCallbacks).length>0},e.prototype.getState=function(){return this.isAnnounced&&this.hasCallbacks()?3:this.isAnnounced?2:this.hasCallbacks()?1:0},e}();function applyContextDelta(e,n,t){try{if((null===t||void 0===t?void 0:t.canPublish("trace"))&&(null===t||void 0===t||t.trace("applying context delta "+JSON.stringify(n)+" on context "+JSON.stringify(e))),!n)return e;if(n.reset)return e=_assign$({},n.reset);if(e=deepClone(e,void 0),n.commands){for(var r=0,o=n.commands;r<o.length;r++){var i=o[r];"remove"===i.type?deletePath(e,i.path):"set"===i.type&&setValueToPath(e,i.value,i.path)}return e}var l=n.added,a=n.updated,u=n.removed;return l&&Object.keys(l).forEach((function(n){e[n]=l[n]})),a&&Object.keys(a).forEach((function(n){mergeObjectsProperties(n,e,a)})),u&&u.forEach((function(n){delete e[n]})),e}catch(s){return null===t||void 0===t||t.error("error applying context delta "+JSON.stringify(n)+" on context "+JSON.stringify(e),s),e}}function deepClone(e,n){if(n=n||new WeakMap,Object(e)!==e)return e;if(e instanceof Set)return new Set(e);if(n.has(e))return n.get(e);var t=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e.constructor?new e.constructor:Object.create(null);return n.set(e,t),Object.assign.apply(Object,__spreadArrays([t],Object.keys(e).map((function(t){var r;return(r={})[t]=deepClone(e[t],n),r}))))}var mergeObjectsProperties=function(e,n,t){var r=t[e];if(void 0===r)return n;var o=n[e];return o&&r?"string"===typeof o||"number"===typeof o||"boolean"===typeof o||"string"===typeof r||"number"===typeof r||"boolean"===typeof r||Array.isArray(o)||Array.isArray(r)?(n[e]=r,n):(n[e]=Object.assign({},o,r),n):(n[e]=r,n)};function deepEqual(e,n){if(e===n)return!0;if(!(e instanceof Object)||!(n instanceof Object))return!1;if(e.constructor!==n.constructor)return!1;for(var t in e)if(e.hasOwnProperty(t)){if(!n.hasOwnProperty(t))return!1;if(e[t]!==n[t]){if("object"!==typeof e[t])return!1;if(!deepEqual(e[t],n[t]))return!1}}for(var t in n)if(n.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;return!0}function setValueToPath(e,n,t){var r,o=t.split(".");for(r=0;r<o.length-1;r++)e[o[r]]||(e[o[r]]={}),"object"!==typeof e[o[r]]&&(e[o[r]]={}),e=e[o[r]];e[o[r]]=n}function isSubset(e,n){return Object.keys(n).every((function(t){return"object"===typeof n[t]?isSubset((null===e||void 0===e?void 0:e[t])||{},n[t]||{}):n[t]===(null===e||void 0===e?void 0:e[t])}))}function deletePath(e,n){var t,r=n.split(".");for(t=0;t<r.length-1;t++){if(!e[r[t]])return;e=e[r[t]]}delete e[r[t]]}var GW3Bridge=function(){function e(e){var n,t=this;this._contextNameToData={},this._gw3Subscriptions=[],this._nextCallbackSubscriptionNumber=0,this._contextNameToId={},this._contextIdToName={},this._protocolVersion=void 0,this._connection=e.connection,this._logger=e.logger,this._gw3Session=this._connection.domain("global",[GW_MESSAGE_CONTEXT_CREATED,GW_MESSAGE_SUBSCRIBED_CONTEXT,GW_MESSAGE_CONTEXT_DESTROYED,GW_MESSAGE_CONTEXT_UPDATED]),this.subscribeToContextCreatedMessages(),this.subscribeToContextUpdatedMessages(),this.subscribeToContextDestroyedMessages(),null===(n=this._connection.replayer)||void 0===n||n.drain(ContextMessageReplaySpec.name,(function(e){var n=e.type;n&&(n===GW_MESSAGE_CONTEXT_CREATED||n===GW_MESSAGE_CONTEXT_ADDED||n===GW_MESSAGE_ACTIVITY_CREATED?t.handleContextCreatedMessage(e):n===GW_MESSAGE_SUBSCRIBED_CONTEXT||n===GW_MESSAGE_CONTEXT_UPDATED||n===GW_MESSAGE_JOINED_ACTIVITY?t.handleContextUpdatedMessage(e):n!==GW_MESSAGE_CONTEXT_DESTROYED&&n!==GW_MESSAGE_ACTIVITY_DESTROYED||t.handleContextDestroyedMessage(e))}))}return Object.defineProperty(e.prototype,"protocolVersion",{get:function(){var e;if(!this._protocolVersion){var n=this._connection.availableDomains.find((function(e){return"context"===e.uri}));this._protocolVersion=null!==(e=null===n||void 0===n?void 0:n.version)&&void 0!==e?e:1}return this._protocolVersion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setPathSupported",{get:function(){return this.protocolVersion>=2},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(var e=0,n=this._gw3Subscriptions;e<n.length;e++){var t=n[e];this._connection.off(t)}for(var r in this._gw3Subscriptions.length=0,this._contextNameToData)this._contextNameToId.hasOwnProperty(r)&&delete this._contextNameToData[r]},e.prototype.createContext=function(e,n){var t=this;return this._gw3Session.send({type:GW_MESSAGE_CREATE_CONTEXT,domain:"global",name:e,data:n,lifetime:"retained"}).then((function(r){t._contextNameToId[e]=r.context_id,t._contextIdToName[r.context_id]=e;var o=t._contextNameToData[e]||new GW3ContextData(r.context_id,e,!0,void 0);return o.isAnnounced=!0,o.name=e,o.contextId=r.context_id,o.context=n,t._contextNameToData[e]=o,r.context_id}))},e.prototype.all=function(){var e=this;return Object.keys(this._contextNameToData).filter((function(n){return e._contextNameToData[n].isAnnounced}))},e.prototype.update=function(e,n){var t;return __awaiter$1$1(this,void 0,void 0,(function(){var r,o,i,l=this;return __generator(this,(function(a){switch(a.label){case 0:return(r=this._contextNameToData[e])&&r.isAnnounced?(o=r.context,r.hasCallbacks()?[3,2]:[4,this.get(r.name)]):[2,this.createContext(e,n)];case 1:o=a.sent(),a.label=2;case 2:return i=2===this.protocolVersion?this.calculateContextDeltaV2(o,n):this.calculateContextDeltaV1(o,n),Object.keys(i.added).length||Object.keys(i.updated).length||i.removed.length||(null===(t=i.commands)||void 0===t?void 0:t.length)?[2,this._gw3Session.send({type:GW_MESSAGE_UPDATE_CONTEXT,domain:"global",context_id:r.contextId,delta:i},{},{skipPeerId:!1}).then((function(e){l.handleUpdated(r,i,{updaterId:e.peer_id})}))]:[2,Promise.resolve()]}}))}))},e.prototype.set=function(e,n){var t=this,r=this._contextNameToData[e];return r&&r.isAnnounced?this._gw3Session.send({type:GW_MESSAGE_UPDATE_CONTEXT,domain:"global",context_id:r.contextId,delta:{reset:n}},{},{skipPeerId:!1}).then((function(e){t.handleUpdated(r,{reset:n,added:{},removed:[],updated:{}},{updaterId:e.peer_id})})):this.createContext(e,n)},e.prototype.setPath=function(e,n,t){return this.setPathSupported?this.setPaths(e,[{path:n,value:t}]):Promise.reject("glue.contexts.setPath operation is not supported, use Glue42 3.10 or later")},e.prototype.setPaths=function(e,n){var t=this;if(!this.setPathSupported)return Promise.reject("glue.contexts.setPaths operation is not supported, use Glue42 3.10 or later");var r=this._contextNameToData[e];if(!r||!r.isAnnounced){for(var o={},i=0,l=n;i<l.length;i++){setValueToPath(o,(c=l[i]).value,c.path)}return this.createContext(e,o)}for(var a=[],u=0,s=n;u<s.length;u++){var c;null===(c=s[u]).value?a.push({type:"remove",path:c.path}):a.push({type:"set",path:c.path,value:c.value})}return this._gw3Session.send({type:GW_MESSAGE_UPDATE_CONTEXT,domain:"global",context_id:r.contextId,delta:{commands:a}},{},{skipPeerId:!1}).then((function(e){t.handleUpdated(r,{added:{},removed:[],updated:{},commands:a},{updaterId:e.peer_id})}))},e.prototype.get=function(e){var n,t=this,r=this._contextNameToData[e];if(!r||!r.isAnnounced)return Promise.resolve({});if(r&&!r.hasCallbacks())return new Promise((function(n,r){return __awaiter$1$1(t,void 0,void 0,(function(){var t=this;return __generator(this,(function(r){return this.subscribe(e,(function(e,r,o,i){t.unsubscribe(i),n(e)})),[2]}))}))}));var o=null!==(n=null===r||void 0===r?void 0:r.context)&&void 0!==n?n:{};return Promise.resolve(o)},e.prototype.subscribe=function(e,n){var t=this._nextCallbackSubscriptionNumber;this._nextCallbackSubscriptionNumber+=1;var r=this._contextNameToData[e];if(!r||!r.isAnnounced)return r=r||new GW3ContextData(void 0,e,!1,void 0),this._contextNameToData[e]=r,r.updateCallbacks[t]=n,Promise.resolve(t);var o,i=r.hasCallbacks();return r.updateCallbacks[t]=n,i||r.joinedActivity||r.context&&r.sentExplicitSubscription?(n(o=deepClone(r.context),o,[],t),Promise.resolve(t)):this.sendSubscribe(r).then((function(){return t}))},e.prototype.unsubscribe=function(e){for(var n=0,t=Object.keys(this._contextNameToData);n<t.length;n++){var r=t[n],o=(this._contextNameToId[r],this._contextNameToData[r]);if(!o)return;var i=o.hasCallbacks();delete o.updateCallbacks[e],o.isAnnounced&&i&&!o.hasCallbacks()&&o.sentExplicitSubscription&&this.sendUnsubscribe(o),o.isAnnounced||o.hasCallbacks()||delete this._contextNameToData[r]}},e.prototype.destroy=function(e){var n=this._contextNameToData[e];return n?this._gw3Session.send({type:GW_MESSAGE_DESTROY_CONTEXT,domain:"global",context_id:n.contextId}).then((function(e){})):Promise.reject("context with "+e+" does not exist")},e.prototype.handleUpdated=function(e,n,t){var r=e.context;e.context=applyContextDelta(e.context,n,this._logger),this._contextNameToData[e.name]!==e||deepEqual(r,e.context)||this.invokeUpdateCallbacks(e,n,t)},e.prototype.subscribeToContextCreatedMessages=function(){for(var e=0,n=[GW_MESSAGE_CONTEXT_ADDED,GW_MESSAGE_CONTEXT_CREATED,GW_MESSAGE_ACTIVITY_CREATED];e<n.length;e++){var t=n[e],r=this._connection.on(t,this.handleContextCreatedMessage.bind(this));this._gw3Subscriptions.push(r)}},e.prototype.handleContextCreatedMessage=function(e){var n=e.type;n===GW_MESSAGE_ACTIVITY_CREATED?(this._contextNameToId[e.activity_id]=e.context_id,this._contextIdToName[e.context_id]=e.activity_id):n===GW_MESSAGE_CONTEXT_ADDED&&(this._contextNameToId[e.name]=e.context_id,this._contextIdToName[e.context_id]=e.name);var t=this._contextIdToName[e.context_id];if(!t)throw new Error("Received created event for context with unknown name: "+e.context_id);if(!this._contextNameToId[t])throw new Error("Received created event for context with unknown id: "+e.context_id);var r=this._contextNameToData[t];if(r){if(r.isAnnounced)return;if(!r.hasCallbacks())throw new Error("Assertion failure: contextData.hasCallbacks()");r.isAnnounced=!0,r.contextId=e.context_id,r.activityId=e.activity_id,r.sentExplicitSubscription||this.sendSubscribe(r)}else this._contextNameToData[t]=r=new GW3ContextData(e.context_id,t,!0,e.activity_id)},e.prototype.subscribeToContextUpdatedMessages=function(){for(var e=0,n=[GW_MESSAGE_CONTEXT_UPDATED,GW_MESSAGE_SUBSCRIBED_CONTEXT,GW_MESSAGE_JOINED_ACTIVITY];e<n.length;e++){var t=n[e],r=this._connection.on(t,this.handleContextUpdatedMessage.bind(this));this._gw3Subscriptions.push(r)}},e.prototype.handleContextUpdatedMessage=function(e){var n=e.type,t=e.context_id,r=this._contextNameToData[this._contextIdToName[t]],o=!r||!r.isAnnounced;if(n===GW_MESSAGE_JOINED_ACTIVITY)r?(r.contextId=t,r.isAnnounced=!0,r.activityId=e.activity_id):(r=new GW3ContextData(t,e.activity_id,!0,e.activity_id),this._contextNameToData[e.activity_id]=r,this._contextIdToName[t]=e.activity_id,this._contextNameToId[e.activity_id]=t),r.joinedActivity=!0;else if(!r||!r.isAnnounced)return void(n===GW_MESSAGE_SUBSCRIBED_CONTEXT?((r=r||new GW3ContextData(t,e.name,!0,void 0)).sentExplicitSubscription=!0,this._contextNameToData[e.name]=r,this._contextIdToName[t]=e.name,this._contextNameToId[e.name]=t):this._logger.error("Received 'update' for unknown context: "+t));var i=r.context;if(n===GW_MESSAGE_SUBSCRIBED_CONTEXT)r.context=e.data||{};else if(n===GW_MESSAGE_JOINED_ACTIVITY)r.context=e.context_snapshot||{};else{if(n!==GW_MESSAGE_CONTEXT_UPDATED)throw new Error("Unrecognized context update message "+n);r.context=applyContextDelta(r.context,e.delta,this._logger)}!o&&deepEqual(r.context,i)&&n!==GW_MESSAGE_SUBSCRIBED_CONTEXT||this.invokeUpdateCallbacks(r,e.delta,{updaterId:e.updater_id})},e.prototype.invokeUpdateCallbacks=function(e,n,t){if((n=n||{added:{},updated:{},reset:{},removed:[]}).commands){n.added=n.updated=n.reset={},n.removed=[];for(var r=0,o=n.commands;r<o.length;r++){var i=o[r];"remove"===i.type?(-1===i.path.indexOf(".")&&n.removed.push(i.path),setValueToPath(n.updated,null,i.path)):"set"===i.type&&setValueToPath(n.updated,i.value,i.path)}}for(var l in e.updateCallbacks)if(e.updateCallbacks.hasOwnProperty(l))try{(0,e.updateCallbacks[l])(deepClone(e.context),Object.assign({},n.added||{},n.updated||{},n.reset||{}),n.removed,parseInt(l,10),t)}catch(err){this._logger.debug("callback error: "+JSON.stringify(err))}},e.prototype.subscribeToContextDestroyedMessages=function(){for(var e=0,n=[GW_MESSAGE_CONTEXT_DESTROYED,GW_MESSAGE_ACTIVITY_DESTROYED];e<n.length;e++){var t=n[e],r=this._connection.on(t,this.handleContextDestroyedMessage.bind(this));this._gw3Subscriptions.push(r)}},e.prototype.handleContextDestroyedMessage=function(e){var n,t;if(e.type===GW_MESSAGE_ACTIVITY_DESTROYED){if(t=e.activity_id,!(n=this._contextNameToId[t]))return void this._logger.error("Received 'destroyed' for unknown activity: "+e.activity_id)}else if(n=e.context_id,!(t=this._contextIdToName[n]))return void this._logger.error("Received 'destroyed' for unknown context: "+e.context_id);delete this._contextIdToName[n],delete this._contextNameToId[t];var r=this._contextNameToData[t];delete this._contextNameToData[t],r&&r.isAnnounced||this._logger.error("Received 'destroyed' for unknown context: "+n)},e.prototype.sendSubscribe=function(e){return e.sentExplicitSubscription=!0,this._gw3Session.send({type:GW_MESSAGE_SUBSCRIBE_CONTEXT,domain:"global",context_id:e.contextId}).then((function(e){}))},e.prototype.sendUnsubscribe=function(e){return e.sentExplicitSubscription=!1,this._gw3Session.send({type:GW_MESSAGE_UNSUBSCRIBE_CONTEXT,domain:"global",context_id:e.contextId}).then((function(e){}))},e.prototype.calculateContextDeltaV1=function(e,n){var t={added:{},updated:{},removed:[],reset:void 0};if(e)for(var r=0,o=Object.keys(e);r<o.length;r++){var i=o[r];-1===Object.keys(n).indexOf(i)||null===n[i]||deepEqual(e[i],n[i])||(t.updated[i]=n[i])}for(var l=0,a=Object.keys(n);l<a.length;l++){i=a[l];e&&-1!==Object.keys(e).indexOf(i)?null===n[i]&&t.removed.push(i):null!==n[i]&&(t.added[i]=n[i])}return t},e.prototype.calculateContextDeltaV2=function(e,n){for(var t,r,o={added:{},updated:{},removed:[],reset:void 0,commands:[]},i=0,l=Object.keys(n);i<l.length;i++){var a=l[i];if(null!==n[a])deepEqual(e?e[a]:null,n[a])||null===(t=o.commands)||void 0===t||t.push({type:"set",path:a,value:n[a]});else null===(r=o.commands)||void 0===r||r.push({type:"remove",path:a})}return o},e}(),ContextsModule=function(){function e(e){this._bridge=new GW3Bridge(e)}return e.prototype.all=function(){return this._bridge.all()},e.prototype.update=function(e,n){return this.checkName(e),this.checkData(n),this._bridge.update(e,n)},e.prototype.set=function(e,n){return this.checkName(e),this.checkData(n),this._bridge.set(e,n)},e.prototype.setPath=function(e,n,t){return this.checkName(e),this.checkPath(n),""===n?(this.checkData(t),this.set(e,t)):this._bridge.setPath(e,n,t)},e.prototype.setPaths=function(e,n){if(this.checkName(e),!Array.isArray(n))throw new Error("Please provide the paths as an array of PathValues!");for(var t=0,r=n;t<r.length;t++){var o=r[t],i=o.path,l=o.value;this.checkPath(i),""===i&&this.checkData(l)}return this._bridge.setPaths(e,n)},e.prototype.subscribe=function(e,n){var t=this;if(this.checkName(e),"function"!==typeof n)throw new Error("Please provide the callback as a function!");return this._bridge.subscribe(e,(function(e,r,o,i,l){return n(e,r,o,(function(){return t._bridge.unsubscribe(i)}),l)})).then((function(e){return function(){t._bridge.unsubscribe(e)}}))},e.prototype.get=function(e){return this.checkName(e),this._bridge.get(e)},e.prototype.ready=function(){return Promise.resolve(this)},e.prototype.destroy=function(e){return this.checkName(e),this._bridge.destroy(e)},Object.defineProperty(e.prototype,"setPathSupported",{get:function(){return this._bridge.setPathSupported},enumerable:!0,configurable:!0}),e.prototype.checkName=function(e){if("string"!==typeof e||""===e)throw new Error("Please provide the name as a non-empty string!")},e.prototype.checkPath=function(e){if("string"!==typeof e)throw new Error("Please provide the path as a dot delimited string!")},e.prototype.checkData=function(e){if("object"!==typeof e)throw new Error("Please provide the data as an object!")},e}(),InvokeStatus;function promisify(e,n,t){return"function"!==typeof n&&"function"!==typeof t?e:("function"!==typeof n?n=function(){}:"function"!==typeof t&&(t=function(){}),e.then(n,t))}function rejectAfter(e,n,t){var r;void 0===e&&(e=0);var o=function(){r&&clearTimeout(r)};return n.then((function(){o()})).catch((function(){o()})),new Promise((function(n,o){r=setTimeout((function(){return o(t)}),e)}))}!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(InvokeStatus||(InvokeStatus={}));var Client=function(){function e(e,n,t,r){this.protocol=e,this.repo=n,this.instance=t,this.configuration=r}return e.prototype.subscribe=function(e,n,t,r,o){var i=this,l=function(e,t,r,l){var a;n.methodResponseTimeout=null!==(a=n.methodResponseTimeout)&&void 0!==a?a:n.waitTimeoutMs,i.protocol.client.subscribe(t,n,e,r,l,o)};return promisify(new Promise((function(t,r){var o,a=function(e){t(e)},u=function(e){r(e)};if(e)if((o="string"===typeof e?{name:e}:e).name){void 0===n&&(n={});var s=n.target;if(void 0===s&&(s="best"),"string"!==typeof s||"all"===s||"best"===s){void 0===n.methodResponseTimeout&&(n.methodResponseTimeout=n.method_response_timeout,void 0===n.methodResponseTimeout&&(n.methodResponseTimeout=i.configuration.methodResponseTimeout)),void 0===n.waitTimeoutMs&&(n.waitTimeoutMs=n.wait_for_method_timeout,void 0===n.waitTimeoutMs&&(n.waitTimeoutMs=i.configuration.waitTimeoutMs));var c=0,d=i.getServerMethodsByFilterAndTarget(o,s);if(d.length>0)l(d,d[0].methods[0],a,u);else{setTimeout((function t(){if(s&&n.waitTimeoutMs)if(c+=500,(d=i.getServerMethodsByFilterAndTarget(o,s)).length>0){var r=d[0].methods[0];l(d,r,a,u)}else if(c>=n.waitTimeoutMs){l(d,"string"===typeof e?{name:e}:e,a,u)}else setTimeout(t,500)}),500)}}else r(new Error('"'+s+'" is not a valid target. Valid targets are "all", "best", or an instance.'))}else r("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.");else r("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.")})),t,r)},e.prototype.servers=function(e){var n=void 0===e?void 0:_assign$({},e);return this.getServers(n).map((function(e){return e.server.instance}))},e.prototype.methods=function(e){return e="string"===typeof e?{name:e}:_assign$({},e),this.getMethods(e)},e.prototype.methodsForInstance=function(e){return this.getMethodsForInstance(e)},e.prototype.methodAdded=function(e){return this.repo.onMethodAdded(e)},e.prototype.methodRemoved=function(e){return this.repo.onMethodRemoved(e)},e.prototype.serverAdded=function(e){return this.repo.onServerAdded(e)},e.prototype.serverRemoved=function(e){return this.repo.onServerRemoved((function(n,t){e(n,t)}))},e.prototype.serverMethodAdded=function(e){return this.repo.onServerMethodAdded((function(n,t){e({server:n,method:t})}))},e.prototype.serverMethodRemoved=function(e){return this.repo.onServerMethodRemoved((function(n,t){e({server:n,method:t})}))},e.prototype.invoke=function(e,n,t,r,o,i){return __awaiter$1$1(this,void 0,void 0,(function(){var l=this;return __generator(this,(function(a){return[2,promisify(function(){return __awaiter$1$1(l,void 0,void 0,(function(){var o,i,l,a,u,s,c,d,f,p,h,_,g=this;return __generator(this,(function(m){switch(m.label){case 0:if(!(o="string"===typeof e?{name:e}:_assign$({},e)).name)return[2,Promise.reject("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.")];if(n||(n={}),t||(t="best"),"string"===typeof t&&"all"!==t&&"best"!==t&&"skipMine"!==t)return[2,Promise.reject(new Error('"'+t+'" is not a valid target. Valid targets are "all" and "best".'))];if(r||(r={}),void 0===r.methodResponseTimeoutMs&&(r.methodResponseTimeoutMs=r.method_response_timeout,void 0===r.methodResponseTimeoutMs&&(r.methodResponseTimeoutMs=this.configuration.methodResponseTimeout)),void 0===r.waitTimeoutMs&&(r.waitTimeoutMs=r.wait_for_method_timeout,void 0===r.waitTimeoutMs&&(r.waitTimeoutMs=this.configuration.waitTimeoutMs)),void 0!==r.waitTimeoutMs&&"number"!==typeof r.waitTimeoutMs)return[2,Promise.reject(new Error('"'+r.waitTimeoutMs+'" is not a valid number for "waitTimeoutMs" '))];if("object"!==typeof n)return[2,Promise.reject(new Error("The method arguments must be an object. method: "+o.name))];if(0!==(i=this.getServerMethodsByFilterAndTarget(o,t)).length)return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this.tryToAwaitForMethods(o,t,r)];case 2:return i=m.sent(),[3,4];case 3:return m.sent(),l=_assign$(_assign$({},o),{getServers:function(){return[]},supportsStreaming:!1,objectTypes:null!==(p=o.objectTypes)&&void 0!==p?p:[],flags:null!==(_=null===(h=o.flags)||void 0===h?void 0:h.metadata)&&void 0!==_?_:{}}),a={method:l,called_with:n,message:"Can not find a method matching "+JSON.stringify(e)+" with server filter "+JSON.stringify(t),executed_by:void 0,returned:void 0,status:void 0},[2,Promise.reject(a)];case 4:return u=r.methodResponseTimeoutMs,s=r,c=i.map((function(e){var t=shortid(),r=e.methods[0],o=e.server,i=g.protocol.client.invoke(t,r,n,o,s);return Promise.race([i,rejectAfter(u,i,{invocationId:t,message:"Invocation timeout ("+u+" ms) reached for method name: "+(null===r||void 0===r?void 0:r.name)+", target instance: "+JSON.stringify(o.instance)+", options: "+JSON.stringify(s),status:InvokeStatus.Error})])})),[4,Promise.all(c)];case 5:return d=m.sent(),f=this.getInvocationResultObj(d,o,n),d.every((function(e){return e.status===InvokeStatus.Error}))?[2,Promise.reject(f)]:[2,f]}}))}))}(),o,i)]}))}))},e.prototype.getInvocationResultObj=function(e,n,t){var r=e.filter((function(e){return e.status===InvokeStatus.Success})).reduce((function(e,r){return e=__spreadArrays(e,[{executed_by:r.instance,returned:r.result,called_with:t,method:n,message:r.message,status:r.status}])}),[]),o=e.filter((function(e){return e.status===InvokeStatus.Error})).reduce((function(e,r){return e=__spreadArrays(e,[{executed_by:r.instance,called_with:t,name:n.name,message:r.message}])}),[]),i=e[0];return{method:n,called_with:t,returned:i.result,executed_by:i.instance,all_return_values:r,all_errors:o,message:i.message,status:i.status}},e.prototype.tryToAwaitForMethods=function(e,n,t){var r=this;return new Promise((function(o,i){if(0!==t.waitTimeoutMs)var l=0,a=setInterval((function(){l+=500;var u=r.getServerMethodsByFilterAndTarget(e,n);if(u.length>0)clearInterval(a),o(u);else if(l>=(t.waitTimeoutMs||1e4))return clearInterval(a),void i()}),500);else i()}))},e.prototype.filterByTarget=function(e,n){var t=this;if("string"!==typeof e){return(Array.isArray(e)?e:[e]).reduce((function(e,r){var o=n.filter((function(e){return t.instanceMatch(r,e.server.instance)}));return e.concat(o)}),[])}if("all"===e)return __spreadArrays(n);if("best"===e){var r=n.find((function(e){return e.server.instance.isLocal}));if(r)return[r];if(void 0!==n[0])return[n[0]]}else if("skipMine"===e)return n.filter((function(e){return e.server.instance.peerId!==t.instance.peerId}));return[]},e.prototype.instanceMatch=function(e,n){return this.containsProps(e,n)},e.prototype.methodMatch=function(e,n){return this.containsProps(e,n)},e.prototype.containsProps=function(e,n){return Object.keys(e).filter((function(n){return void 0!==e[n]&&"function"!==typeof e[n]&&"object_types"!==n&&"display_name"!==n&&"id"!==n&&"gatewayId"!==n&&"identifier"!==n&&"_"!==n[0]})).every((function(t){var r,o=e[t],i=n[t];switch(t){case"objectTypes":r=(o||[]).every((function(e){return(i||[]).includes(e)}));break;case"flags":r=isSubset(i||{},o||{});break;default:r=String(o).toLowerCase()===String(i).toLowerCase()}return r}))},e.prototype.getMethods=function(e){var n=this;return void 0===e?this.repo.getMethods():this.repo.getMethods().filter((function(t){return n.methodMatch(e,t)}))},e.prototype.getMethodsForInstance=function(e){var n=this,t=this.repo.getServers().filter((function(t){return n.instanceMatch(e,t.instance)}));if(0===t.length)return[];var r={};return 1===t.length?r=t[0].methods:t.forEach((function(e){Object.keys(e.methods).forEach((function(n){var t=e.methods[n];r[t.identifier]=t}))})),Object.keys(r).map((function(e){return r[e]}))},e.prototype.getServers=function(e){var n=this,t=this.repo.getServers();return void 0===e?t.map((function(e){return{server:e,methods:[]}})):t.reduce((function(t,r){var o=Object.values(r.methods).filter((function(t){return n.methodMatch(e,t)}));return o.length>0&&t.push({server:r,methods:o}),t}),[])},e.prototype.getServerMethodsByFilterAndTarget=function(e,n){var t=this.getServers(e);return this.filterByTarget(n,t)},e}(),ServerSubscription=function(){function e(e,n,t){this.protocol=e,this.repoMethod=n,this.subscription=t}return Object.defineProperty(e.prototype,"stream",{get:function(){if(!this.repoMethod.stream)throw new Error("no stream");return this.repoMethod.stream},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arguments",{get:function(){return this.subscription.arguments||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"branchKey",{get:function(){return this.subscription.branchKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instance",{get:function(){if(!this.subscription.instance)throw new Error("no instance");return this.subscription.instance},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.protocol.server.closeSingleSubscription(this.repoMethod,this.subscription)},e.prototype.push=function(e){this.protocol.server.pushDataToSingle(this.repoMethod,this.subscription,e)},e}(),Request=function(){function e(e,n,t){this.protocol=e,this.repoMethod=n,this.requestContext=t,this.arguments=t.arguments,this.instance=t.instance}return e.prototype.accept=function(){this.protocol.server.acceptRequestOnBranch(this.requestContext,this.repoMethod,"")},e.prototype.acceptOnBranch=function(e){this.protocol.server.acceptRequestOnBranch(this.requestContext,this.repoMethod,e)},e.prototype.reject=function(e){this.protocol.server.rejectRequest(this.requestContext,this.repoMethod,e)},e}(),ServerStreaming=function(){function e(e,n){var t=this;this.protocol=e,this.server=n,e.server.onSubRequest((function(e,n){return t.handleSubRequest(e,n)})),e.server.onSubAdded((function(e,n){return t.handleSubAdded(e,n)})),e.server.onSubRemoved((function(e,n){return t.handleSubRemoved(e,n)}))}return e.prototype.handleSubRequest=function(e,n){if(n&&n.streamCallbacks&&"function"===typeof n.streamCallbacks.subscriptionRequestHandler){var t=new Request(this.protocol,n,e);n.streamCallbacks.subscriptionRequestHandler(t)}},e.prototype.handleSubAdded=function(e,n){if(n&&n.streamCallbacks&&"function"===typeof n.streamCallbacks.subscriptionAddedHandler){var t=new ServerSubscription(this.protocol,n,e);n.streamCallbacks.subscriptionAddedHandler(t)}},e.prototype.handleSubRemoved=function(e,n){if(n&&n.streamCallbacks&&"function"===typeof n.streamCallbacks.subscriptionRemovedHandler){var t=new ServerSubscription(this.protocol,n,e);n.streamCallbacks.subscriptionRemovedHandler(t)}},e}(),ServerBranch=function(){function e(e,n,t){this.key=e,this.protocol=n,this.repoMethod=t}return e.prototype.subscriptions=function(){var e=this;return this.protocol.server.getSubscriptionList(this.repoMethod,this.key).map((function(n){return new ServerSubscription(e.protocol,e.repoMethod,n)}))},e.prototype.close=function(){this.protocol.server.closeAllSubscriptions(this.repoMethod,this.key)},e.prototype.push=function(e){this.protocol.server.pushData(this.repoMethod,e,[this.key])},e}(),ServerStream=function(){function e(e,n,t){this._protocol=e,this._repoMethod=n,this._server=t,this.name=this._repoMethod.definition.name}return e.prototype.branches=function(e){var n=this,t=this._protocol.server.getBranchList(this._repoMethod);return e?t.indexOf(e)>-1?new ServerBranch(e,this._protocol,this._repoMethod):void 0:t.map((function(e){return new ServerBranch(e,n._protocol,n._repoMethod)}))},e.prototype.branch=function(e){return this.branches(e)},e.prototype.subscriptions=function(){var e=this;return this._protocol.server.getSubscriptionList(this._repoMethod).map((function(n){return new ServerSubscription(e._protocol,e._repoMethod,n)}))},Object.defineProperty(e.prototype,"definition",{get:function(){var e,n=this._repoMethod.definition;return{accepts:n.accepts,description:n.description,displayName:n.displayName,name:n.name,objectTypes:n.objectTypes,returns:n.returns,supportsStreaming:n.supportsStreaming,flags:null===(e=n.flags)||void 0===e?void 0:e.metadata}},enumerable:!0,configurable:!0}),e.prototype.close=function(){this._protocol.server.closeAllSubscriptions(this._repoMethod),this._server.unregister(this._repoMethod.definition,!0)},e.prototype.push=function(e,n){if("string"!==typeof n&&!Array.isArray(n)&&void 0!==n)throw new Error("invalid branches should be string or string array");if("object"!==typeof e)throw new Error("Invalid arguments. Data must be an object.");this._protocol.server.pushData(this._repoMethod,e,n)},e.prototype.updateRepoMethod=function(e){this._repoMethod=e},e}(),Server=function(){function e(e,n){this.protocol=e,this.serverRepository=n,this.invocations=0,this.currentlyUnregistering={},this.streaming=new ServerStreaming(e,this),this.protocol.server.onInvoked(this.onMethodInvoked.bind(this))}return e.prototype.createStream=function(e,n,t,r,o){var i=this;return promisify(new Promise((function(t,r){if(e){var l;if(!(l="string"===typeof e?{name:""+e}:_assign$({},e)).name)return r("The \u201cname\u201d property is required for the \u201cstreamDefinition\u201d object and must be unique. Stream definition: "+JSON.stringify(l));if(i.serverRepository.getList().some((function(e){return e.definition.name===l.name})))return r('A stream with the name "'+l.name+'" already exists! Please, provide a unique name for the stream.');l.supportsStreaming=!0,n||(n={}),"function"!==typeof n.subscriptionRequestHandler&&(n.subscriptionRequestHandler=function(e){e.accept()});var a=i.serverRepository.add({definition:l,streamCallbacks:n,protocolState:{}});i.protocol.server.createStream(a).then((function(){var e;o?(e=o,o.updateRepoMethod(a)):e=new ServerStream(i.protocol,a,i),a.stream=e,t(e)})).catch((function(e){a.repoId&&i.serverRepository.remove(a.repoId),r(e)}))}else r("The stream name must be unique! Please, provide either a unique string for a stream name to \u201cglue.interop.createStream()\u201d or a \u201cmethodDefinition\u201d object with a unique \u201cname\u201d property for the stream.")})),t,r)},e.prototype.register=function(e,n){var t=this;if(!e)return Promise.reject("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.");if("function"!==typeof n)return Promise.reject("The second parameter must be a callback function. Method: "+("string"===typeof e?e:e.name));var r=function(e,r){return __awaiter$1$1(t,void 0,void 0,(function(){var t,o,i;return __generator(this,(function(l){switch(l.label){case 0:return l.trys.push([0,4,,5]),(t=n(e.args,e.instance))&&"function"===typeof t.then?[4,t]:[3,2];case 1:return o=l.sent(),r(void 0,o),[3,3];case 2:r(void 0,t),l.label=3;case 3:return[3,5];case 4:return(i=l.sent())||(i=""),r(i,i),[3,5];case 5:return[2]}}))}))};return r.userCallback=n,this.registerCore(e,r)},e.prototype.registerAsync=function(e,n){if(!e)return Promise.reject("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.");if("function"!==typeof n)return Promise.reject("The second parameter must be a callback function. Method: "+("string"===typeof e?e:e.name));var t=function(e,t){try{var r=!1,o=function(e){r||t(void 0,e),r=!0},i=function(e){r||(e||(e=""),t(e,e)),r=!0},l=n(e.args,e.instance,o,i);l&&"function"===typeof l.then&&l.then(o).catch(i)}catch(a){t(a,void 0)}};return t.userCallbackAsync=n,this.registerCore(e,t)},e.prototype.unregister=function(e,n){return void 0===n&&(n=!1),__awaiter$1$1(this,void 0,void 0,(function(){var t,r;return __generator(this,(function(o){switch(o.label){case 0:return void 0===e?[2,Promise.reject("Please, provide either a unique string for a name or an object containing a \u201cname\u201d property.")]:"function"!==typeof e?[3,2]:[4,this.unregisterWithPredicate(e,n)];case 1:return o.sent(),[2];case 2:return void 0===(t="string"===typeof e?{name:e}:e).name?[2,Promise.reject("Method name is required. Cannot find a method if the method name is undefined!")]:(r=this.serverRepository.getList().find((function(e){return e.definition.name===t.name&&(e.definition.supportsStreaming||!1)===n})))?[4,this.removeMethodsOrStreams([r])]:[2,Promise.reject('Method with a name "'+t.name+'" does not exist or is not registered by your application!')];case 3:return o.sent(),[2]}}))}))},e.prototype.unregisterWithPredicate=function(e,n){return __awaiter$1$1(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){switch(r.label){case 0:return(t=this.serverRepository.getList().filter((function(n){return e(n.definition)})).filter((function(e){return(e.definition.supportsStreaming||!1)===n})))&&0!==t.length?[4,this.removeMethodsOrStreams(t)]:[2,Promise.reject("Could not find a "+(n?"stream":"method")+" matching the specified condition!")];case 1:return r.sent(),[2]}}))}))},e.prototype.removeMethodsOrStreams=function(e){var n=this,t=[];return e.forEach((function(e){var r=n.protocol.server.unregister(e).then((function(){e.repoId&&n.serverRepository.remove(e.repoId)}));t.push(r),n.addAsCurrentlyUnregistering(e.definition.name,r)})),Promise.all(t)},e.prototype.addAsCurrentlyUnregistering=function(e,n){return __awaiter$1$1(this,void 0,void 0,(function(){var t,r=this;return __generator(this,(function(o){return t=new Promise((function(e){return setTimeout(e,5e3)})),this.currentlyUnregistering[e]=Promise.race([n,t]).then((function(){delete r.currentlyUnregistering[e]})),[2]}))}))},e.prototype.registerCore=function(e,n){return __awaiter$1$1(this,void 0,void 0,(function(){var t,r,o,i=this;return __generator(this,(function(l){switch(l.label){case 0:return(t="string"===typeof e?{name:""+e}:_assign$({},e)).name?(r=this.currentlyUnregistering[t.name])?[4,r]:[3,2]:[2,Promise.reject("Please, provide a (unique) string value for the \u201cname\u201d property in the \u201cmethodDefinition\u201d object: "+JSON.stringify(e))];case 1:l.sent(),l.label=2;case 2:return this.serverRepository.getList().some((function(e){return e.definition.name===t.name}))?[2,Promise.reject('A method with the name "'+t.name+'" already exists! Please, provide a unique name for the method.')]:t.supportsStreaming?[2,Promise.reject("When you create methods with \u201cglue.interop.register()\u201d or \u201cglue.interop.registerAsync()\u201d the property \u201csupportsStreaming\u201d cannot be \u201ctrue\u201d. If you want \u201c"+t.name+"\u201d to be a stream, please use the \u201cglue.interop.createStream()\u201d method.")]:(o=this.serverRepository.add({definition:t,theFunction:n,protocolState:{}}),[2,this.protocol.server.register(o).catch((function(e){throw(null===o||void 0===o?void 0:o.repoId)&&i.serverRepository.remove(o.repoId),e}))])}}))}))},e.prototype.onMethodInvoked=function(e,n,t){var r=this;e&&e.theFunction&&e.theFunction(t,(function(t,o){if(void 0!==t&&null!==t)if(t.message&&"string"===typeof t.message)t=t.message;else if("string"!==typeof t)try{t=JSON.stringify(t)}catch(i){t="un-stringifyable error in onMethodInvoked! Top level prop names: "+Object.keys(t)}o?("object"!==typeof o||Array.isArray(o))&&(o={_value:o}):o={},r.protocol.server.methodInvocationResult(e,n,t,o)}))},e}(),InstanceWrapper=function(){function e(e,n,t){var r=this;this.wrapped={},this.wrapped.getMethods=function(){return e.methodsForInstance(this)},this.wrapped.getStreams=function(){return e.methodsForInstance(this).filter((function(e){return e.supportsStreaming}))},n&&this.refreshWrappedObject(n),t&&(t.loggedIn((function(){r.refresh(t)})),this.refresh(t))}return e.prototype.unwrap=function(){return this.wrapped},e.prototype.refresh=function(e){if(e){var n=null===e||void 0===e?void 0:e.resolvedIdentity,t=Object.assign({},null!==n&&void 0!==n?n:{},{peerId:null===e||void 0===e?void 0:e.peerId});this.refreshWrappedObject(t)}},e.prototype.refreshWrappedObject=function(e){var n,t,r;this.wrapped.user=e.user,this.wrapped.instance=e.instance,this.wrapped.application=null!==(n=e.application)&&void 0!==n?n:shortid(),this.wrapped.applicationName=e.applicationName,this.wrapped.pid=null!==(r=null!==(t=e.pid)&&void 0!==t?t:e.process)&&void 0!==r?r:Math.floor(1e10*Math.random()),this.wrapped.machine=e.machine,this.wrapped.environment=e.environment,this.wrapped.region=e.region,this.wrapped.windowId=e.windowId,this.wrapped.isLocal=!0,this.wrapped.api=e.api,this.wrapped.service=e.service,this.wrapped.peerId=e.peerId},e}(),hideMethodSystemFlags=function(e){return _assign$(_assign$({},e),{flags:e.flags.metadata||{}})},ClientRepository=function(){function e(e,n){this.logger=e,this.API=n,this.servers={},this.methodsCount={},this.callbacks=lib$1();var t=this.API.instance.peerId;this.myServer={id:t,methods:{},instance:this.API.instance,wrapper:this.API.unwrappedInstance},this.servers[t]=this.myServer}return e.prototype.addServer=function(e,n){this.logger.debug("adding server "+n);var t=this.servers[n];if(t)return t.id;var r=new InstanceWrapper(this.API,e),o={id:n,methods:{},instance:r.unwrap(),wrapper:r};return this.servers[n]=o,this.callbacks.execute("onServerAdded",o.instance),n},e.prototype.removeServerById=function(e,n){var t=this,r=this.servers[e];r?(this.logger.debug("removing server "+e),Object.keys(r.methods).forEach((function(n){t.removeServerMethod(e,n)})),delete this.servers[e],this.callbacks.execute("onServerRemoved",r.instance,n)):this.logger.warn("not aware of server "+e+", my state "+JSON.stringify(Object.keys(this.servers)))},e.prototype.addServerMethod=function(e,n){var t,r=this.servers[e];if(!r)throw new Error("server does not exists");if(!r.methods[n.id]){var o=this.createMethodIdentifier(n),i=this,l={identifier:o,gatewayId:n.id,name:n.name,displayName:n.display_name,description:n.description,version:n.version,objectTypes:n.object_types||[],accepts:n.input_signature,returns:n.result_signature,supportsStreaming:"undefined"!==typeof n.flags&&n.flags.streaming,flags:null!==(t=n.flags)&&void 0!==t?t:{},getServers:function(){return i.getServersByMethod(o)}};l.object_types=l.objectTypes,l.display_name=l.displayName,l.version=l.version,r.methods[n.id]=l;var a=hideMethodSystemFlags(l);return this.methodsCount[o]||(this.methodsCount[o]=0,this.callbacks.execute("onMethodAdded",a)),this.methodsCount[o]=this.methodsCount[o]+1,this.callbacks.execute("onServerMethodAdded",r.instance,a),l}},e.prototype.removeServerMethod=function(e,n){var t=this.servers[e];if(!t)throw new Error("server does not exists");var r=t.methods[n];delete t.methods[n];var o=hideMethodSystemFlags(r);this.methodsCount[r.identifier]=this.methodsCount[r.identifier]-1,0===this.methodsCount[r.identifier]&&this.callbacks.execute("onMethodRemoved",o),this.callbacks.execute("onServerMethodRemoved",t.instance,o)},e.prototype.getMethods=function(){return this.extractMethodsFromServers(Object.values(this.servers)).map(hideMethodSystemFlags)},e.prototype.getServers=function(){return Object.values(this.servers).map(this.hideServerMethodSystemFlags)},e.prototype.onServerAdded=function(e){var n=this.callbacks.add("onServerAdded",e),t=this.getServers().map((function(e){return e.instance}));return this.returnUnsubWithDelayedReplay(n,t,e)},e.prototype.onMethodAdded=function(e){var n=this.callbacks.add("onMethodAdded",e),t=this.getMethods();return this.returnUnsubWithDelayedReplay(n,t,e)},e.prototype.onServerMethodAdded=function(e){var n=this.callbacks.add("onServerMethodAdded",e),t=!1,r=this.getServers();return setTimeout((function(){r.forEach((function(n){var r=n.methods;Object.keys(r).forEach((function(o){t||e(n.instance,r[o])}))}))}),0),function(){t=!0,n()}},e.prototype.onMethodRemoved=function(e){return this.callbacks.add("onMethodRemoved",e)},e.prototype.onServerRemoved=function(e){return this.callbacks.add("onServerRemoved",e)},e.prototype.onServerMethodRemoved=function(e){return this.callbacks.add("onServerMethodRemoved",e)},e.prototype.getServerById=function(e){return this.hideServerMethodSystemFlags(this.servers[e])},e.prototype.reset=function(){var e,n=this;Object.keys(this.servers).forEach((function(e){n.removeServerById(e,"reset")})),this.servers=((e={})[this.myServer.id]=this.myServer,e),this.methodsCount={}},e.prototype.createMethodIdentifier=function(e){var n=void 0!==e.input_signature?e.input_signature:"",t=void 0!==e.result_signature?e.result_signature:"";return(e.name+n+t).toLowerCase()},e.prototype.getServersByMethod=function(e){var n=[];return Object.values(this.servers).forEach((function(t){Object.values(t.methods).forEach((function(r){r.identifier===e&&n.push(t.instance)}))})),n},e.prototype.returnUnsubWithDelayedReplay=function(e,n,t){var r=!1;return setTimeout((function(){n.forEach((function(e){r||t(e)}))}),0),function(){r=!0,e()}},e.prototype.hideServerMethodSystemFlags=function(e){var n={};return Object.entries(e.methods).forEach((function(e){var t=e[0],r=e[1];n[t]=hideMethodSystemFlags(r)})),_assign$(_assign$({},e),{methods:n})},e.prototype.extractMethodsFromServers=function(e){return Object.values(e).reduce((function(e,n){return __spreadArrays(e,Object.values(n.methods))}),[])},e}(),ServerRepository=function(){function e(){this.nextId=0,this.methods=[]}return e.prototype.add=function(e){return e.repoId=String(this.nextId),this.nextId+=1,this.methods.push(e),e},e.prototype.remove=function(e){if("string"!==typeof e)return new TypeError("Expecting a string");this.methods=this.methods.filter((function(n){return n.repoId!==e}))},e.prototype.getById=function(e){if("string"===typeof e)return this.methods.find((function(n){return n.repoId===e}))},e.prototype.getList=function(){return this.methods.map((function(e){return e}))},e.prototype.length=function(){return this.methods.length},e.prototype.reset=function(){this.methods=[]},e}(),SUBSCRIPTION_REQUEST="onSubscriptionRequest",SUBSCRIPTION_ADDED="onSubscriptionAdded",SUBSCRIPTION_REMOVED="onSubscriptionRemoved",ServerStreaming$1=function(){function e(e,n,t){var r=this;this.session=e,this.repository=n,this.serverRepository=t,this.ERR_URI_SUBSCRIPTION_FAILED="com.tick42.agm.errors.subscription.failure",this.callbacks=lib$1(),this.nextStreamId=0,e.on("add-interest",(function(e){r.handleAddInterest(e)})),e.on("remove-interest",(function(e){r.handleRemoveInterest(e)}))}return e.prototype.acceptRequestOnBranch=function(e,n,t){if("string"!==typeof t&&(t=""),"object"!==typeof n.protocolState.subscriptionsMap)throw new TypeError("The streaming method is missing its subscriptions.");if(!Array.isArray(n.protocolState.branchKeyToStreamIdMap))throw new TypeError("The streaming method is missing its branches.");var r=this.getStreamId(n,t),o=e.msg.subscription_id,i={id:o,arguments:e.arguments,instance:e.instance,branchKey:t,streamId:r,subscribeMsg:e.msg};n.protocolState.subscriptionsMap[o]=i,this.session.sendFireAndForget({type:"accepted",subscription_id:o,stream_id:r}),this.callbacks.execute(SUBSCRIPTION_ADDED,i,n)},e.prototype.rejectRequest=function(e,n,t){"string"!==typeof t&&(t=""),this.sendSubscriptionFailed("Subscription rejected by user. "+t,e.msg.subscription_id)},e.prototype.pushData=function(e,n,t){var r=this;if("object"===typeof e&&Array.isArray(e.protocolState.branchKeyToStreamIdMap)){if("object"!==typeof n)throw new Error("Invalid arguments. Data must be an object.");"string"===typeof t?t=[t]:(!Array.isArray(t)||t.length<=0)&&(t=[]),e.protocolState.branchKeyToStreamIdMap.filter((function(e){return!t||0===t.length||t.indexOf(e.key)>=0})).map((function(e){return e.streamId})).forEach((function(e){var t={type:"publish",stream_id:e,data:n};r.session.sendFireAndForget(t)}))}},e.prototype.pushDataToSingle=function(e,n,t){if("object"!==typeof t)throw new Error("Invalid arguments. Data must be an object.");var r={type:"post",subscription_id:n.id,data:t};this.session.sendFireAndForget(r)},e.prototype.closeSingleSubscription=function(e,n){e.protocolState.subscriptionsMap&&delete e.protocolState.subscriptionsMap[n.id];var t={type:"drop-subscription",subscription_id:n.id,reason:"Server dropping a single subscription"};this.session.sendFireAndForget(t);n.instance;this.callbacks.execute(SUBSCRIPTION_REMOVED,n,e)},e.prototype.closeMultipleSubscriptions=function(e,n){var t=this;if("object"===typeof e&&"object"===typeof e.protocolState.subscriptionsMap&&e.protocolState.subscriptionsMap){var r=e.protocolState.subscriptionsMap,o=Object.keys(r).map((function(e){return r[e]}));"string"===typeof n&&(o=o.filter((function(e){return e.branchKey===n}))),o.forEach((function(e){delete r[e.id];var n={type:"drop-subscription",subscription_id:e.id,reason:"Server dropping all subscriptions on stream_id: "+e.streamId};t.session.sendFireAndForget(n)}))}},e.prototype.getSubscriptionList=function(e,n){if("object"!==typeof e)return[];if(!e.protocolState.subscriptionsMap)return[];var t=e.protocolState.subscriptionsMap,r=Object.keys(t).map((function(e){return t[e]}));return"string"!==typeof n?r:r.filter((function(e){return e.branchKey===n}))},e.prototype.getBranchList=function(e){if("object"!==typeof e)return[];if(!e.protocolState.subscriptionsMap)return[];var n=e.protocolState.subscriptionsMap,t=Object.keys(n).map((function(e){return n[e]})),r=[];return t.forEach((function(e){var n="";"object"===typeof e&&"string"===typeof e.branchKey&&(n=e.branchKey),-1===r.indexOf(n)&&r.push(n)})),r},e.prototype.onSubAdded=function(e){this.onSubscriptionLifetimeEvent(SUBSCRIPTION_ADDED,e)},e.prototype.onSubRequest=function(e){this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REQUEST,e)},e.prototype.onSubRemoved=function(e){this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REMOVED,e)},e.prototype.handleRemoveInterest=function(e){var n=this.serverRepository.getById(e.method_id);if("string"===typeof e.subscription_id&&"object"===typeof n&&n.protocolState.subscriptionsMap&&"object"===typeof n.protocolState.subscriptionsMap[e.subscription_id]){var t=n.protocolState.subscriptionsMap[e.subscription_id];delete n.protocolState.subscriptionsMap[e.subscription_id],this.callbacks.execute(SUBSCRIPTION_REMOVED,t,n)}},e.prototype.onSubscriptionLifetimeEvent=function(e,n){this.callbacks.add(e,n)},e.prototype.getNextStreamId=function(){return this.nextStreamId+++""},e.prototype.handleAddInterest=function(e){var n=this.repository.getServerById(e.caller_id).instance,t={msg:e,arguments:e.arguments_kv||{},instance:n},r=this.serverRepository.getById(e.method_id);if(void 0!==r)r.protocolState.subscriptionsMap&&r.protocolState.subscriptionsMap[e.subscription_id]?this.sendSubscriptionFailed("A subscription with id "+e.subscription_id+" already exists.",e.subscription_id):this.callbacks.execute(SUBSCRIPTION_REQUEST,t,r);else{var o="No method with id "+e.method_id+" on this server.";this.sendSubscriptionFailed(o,e.subscription_id)}},e.prototype.sendSubscriptionFailed=function(e,n){var t={type:"error",reason_uri:this.ERR_URI_SUBSCRIPTION_FAILED,reason:e,request_id:n};this.session.sendFireAndForget(t)},e.prototype.getStreamId=function(e,n){if("string"!==typeof n&&(n=""),!e.protocolState.branchKeyToStreamIdMap)throw new Error("streaming "+e.definition.name+" method without protocol state");var t=e.protocolState.branchKeyToStreamIdMap.filter((function(e){return e.key===n}))[0],r=t?t.streamId:void 0;return"string"===typeof r&&""!==r||(r=this.getNextStreamId(),e.protocolState.branchKeyToStreamIdMap.push({key:n,streamId:r})),r},e}(),ServerProtocol=function(){function e(e,n,t,r){var o=this;this.session=e,this.clientRepository=n,this.serverRepository=t,this.logger=r,this.callbacks=lib$1(),this.streaming=new ServerStreaming$1(e,n,t),this.session.on("invoke",(function(e){return o.handleInvokeMessage(e)}))}return e.prototype.createStream=function(e){return e.protocolState.subscriptionsMap={},e.protocolState.branchKeyToStreamIdMap=[],this.register(e,!0)},e.prototype.register=function(e,n){var t,r=this,o=e.definition,i=Object.assign({},{metadata:null!==(t=o.flags)&&void 0!==t?t:{}},{streaming:n||!1}),l={type:"register",methods:[{id:e.repoId,name:o.name,display_name:o.displayName,description:o.description,version:o.version,flags:i,object_types:o.objectTypes||o.object_types,input_signature:o.accepts,result_signature:o.returns,restrictions:void 0}]};return this.session.send(l,{methodId:e.repoId}).then((function(){r.logger.debug("registered method "+e.definition.name+" with id "+e.repoId)})).catch((function(n){throw r.logger.warn("failed to register method "+e.definition.name+" with id "+e.repoId+" - "+JSON.stringify(n)),n}))},e.prototype.onInvoked=function(e){this.callbacks.add("onInvoked",e)},e.prototype.methodInvocationResult=function(e,n,t,r){var o;o=t||""===t?{type:"error",request_id:n,reason_uri:"agm.errors.client_error",reason:t,context:r,peer_id:void 0}:{type:"yield",invocation_id:n,peer_id:this.session.peerId,result:r,request_id:void 0},this.session.sendFireAndForget(o)},e.prototype.unregister=function(e){return __awaiter$1$1(this,void 0,void 0,(function(){var n;return __generator(this,(function(t){switch(t.label){case 0:return n={type:"unregister",methods:[e.repoId]},[4,this.session.send(n)];case 1:return t.sent(),[2]}}))}))},e.prototype.getBranchList=function(e){return this.streaming.getBranchList(e)},e.prototype.getSubscriptionList=function(e,n){return this.streaming.getSubscriptionList(e,n)},e.prototype.closeAllSubscriptions=function(e,n){this.streaming.closeMultipleSubscriptions(e,n)},e.prototype.pushData=function(e,n,t){this.streaming.pushData(e,n,t)},e.prototype.pushDataToSingle=function(e,n,t){this.streaming.pushDataToSingle(e,n,t)},e.prototype.closeSingleSubscription=function(e,n){this.streaming.closeSingleSubscription(e,n)},e.prototype.acceptRequestOnBranch=function(e,n,t){this.streaming.acceptRequestOnBranch(e,n,t)},e.prototype.rejectRequest=function(e,n,t){this.streaming.rejectRequest(e,n,t)},e.prototype.onSubRequest=function(e){this.streaming.onSubRequest(e)},e.prototype.onSubAdded=function(e){this.streaming.onSubAdded(e)},e.prototype.onSubRemoved=function(e){this.streaming.onSubRemoved(e)},e.prototype.handleInvokeMessage=function(e){var n=e.invocation_id,t=e.caller_id,r=e.method_id,o=e.arguments_kv,i=this.serverRepository.getList().filter((function(e){return e.repoId===r}))[0];if(void 0!==i){var l={args:o,instance:this.clientRepository.getServerById(t).instance};this.callbacks.execute("onInvoked",i,n,l)}},e}(),UserSubscription=function(){function e(e,n){this.repository=e,this.subscriptionData=n}return Object.defineProperty(e.prototype,"requestArguments",{get:function(){return this.subscriptionData.params.arguments||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){var e=this;return this.subscriptionData.trackedServers.filter((function(e){return e.subscriptionId})).map((function(n){return e.repository.getServerById(n.serverId).instance}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverInstance",{get:function(){return this.servers[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stream",{get:function(){return this.subscriptionData.method},enumerable:!0,configurable:!0}),e.prototype.onData=function(e){if("function"!==typeof e)throw new TypeError("The data callback must be a function.");this.subscriptionData.handlers.onData.push(e),1===this.subscriptionData.handlers.onData.length&&this.subscriptionData.queued.data.length>0&&this.subscriptionData.queued.data.forEach((function(n){e(n)}))},e.prototype.onClosed=function(e){if("function"!==typeof e)throw new TypeError("The callback must be a function.");this.subscriptionData.handlers.onClosed.push(e)},e.prototype.onFailed=function(e){},e.prototype.onConnected=function(e){if("function"!==typeof e)throw new TypeError("The callback must be a function.");this.subscriptionData.handlers.onConnected.push(e)},e.prototype.close=function(){this.subscriptionData.close()},e.prototype.setNewSubscription=function(e){this.subscriptionData=e},e}(),STATUS_AWAITING_ACCEPT="awaitingAccept",STATUS_SUBSCRIBED="subscribed",ERR_MSG_SUB_FAILED="Subscription failed.",ERR_MSG_SUB_REJECTED="Subscription rejected.",ON_CLOSE_MSG_SERVER_INIT="ServerInitiated",ON_CLOSE_MSG_CLIENT_INIT="ClientInitiated",ClientStreaming=function(){function e(e,n,t){var r=this;this.session=e,this.repository=n,this.logger=t,this.subscriptionsList={},this.subscriptionIdToLocalKeyMap={},this.nextSubLocalKey=0,this.handleErrorSubscribing=function(e){var n=e._tag,t=n.subLocalKey,o=r.subscriptionsList[t];if("object"===typeof o&&(o.trackedServers=o.trackedServers.filter((function(e){return e.serverId!==n.serverId})),o.trackedServers.length<=0)){if(clearTimeout(o.timeoutId),o.status===STATUS_AWAITING_ACCEPT){var i="string"===typeof e.reason&&""!==e.reason?' Publisher said "'+e.reason+'".':" No reason given.",l="object"===typeof o.params.arguments?JSON.stringify(o.params.arguments):"{}";o.error({message:ERR_MSG_SUB_REJECTED+i+" Called with:"+l,called_with:o.params.arguments,method:o.method})}else o.status===STATUS_SUBSCRIBED&&r.callOnClosedHandlers(o);delete r.subscriptionsList[t]}},this.handleSubscribed=function(e){var n=e._tag.subLocalKey,t=r.subscriptionsList[n];if("object"===typeof t){var o=e._tag.serverId,i=t.trackedServers.filter((function(e){return e.serverId===o}))[0];if("object"===typeof i){i.subscriptionId=e.subscription_id,r.subscriptionIdToLocalKeyMap[e.subscription_id]=n;var l=t.status===STATUS_AWAITING_ACCEPT;if(t.status=STATUS_SUBSCRIBED,l){var a=!1,u=t.subscription;u?(u.setNewSubscription(t),t.success(u),a=!0):(u=new UserSubscription(r.repository,t),t.subscription=u,t.success(u));for(var s=0,c=t.handlers.onConnected;s<c.length;s++){var d=c[s];try{d(u.serverInstance,a)}catch(f){}}}}}},this.handleEventData=function(e){var n=r.subscriptionIdToLocalKeyMap[e.subscription_id];if("undefined"!==typeof n){var t=r.subscriptionsList[n];if("object"===typeof t){var o=t.trackedServers.filter((function(n){return n.subscriptionId===e.subscription_id}));if(1===o.length){var i=e.oob,l=o[0].serverId,a=function(){return{data:e.data,server:r.repository.getServerById(l).instance,requestArguments:t.params.arguments,message:void 0,private:i}},u=t.handlers.onData,s=t.queued.data;u.length>0?u.forEach((function(e){"function"===typeof e&&e(a())})):s.push(a())}}}},this.handleSubscriptionCancelled=function(e){var n=r.subscriptionIdToLocalKeyMap[e.subscription_id];if("undefined"!==typeof n){var t=r.subscriptionsList[n];if("object"===typeof t){var o=t.trackedServers.length-1;t.trackedServers=t.trackedServers.filter((function(n){return n.subscriptionId!==e.subscription_id||(t.queued.closers.push(n.serverId),!1)})),t.trackedServers.length===o&&(t.trackedServers.length<=0&&(clearTimeout(t.timeoutId),r.callOnClosedHandlers(t),delete r.subscriptionsList[n]),delete r.subscriptionIdToLocalKeyMap[e.subscription_id])}}},e.on("subscribed",this.handleSubscribed),e.on("event",this.handleEventData),e.on("subscription-cancelled",this.handleSubscriptionCancelled)}return e.prototype.subscribe=function(e,n,t,r,o,i){var l=this;if(0!==t.length){var a=this.getNextSubscriptionLocalKey(),u=this.registerSubscription(a,e,n,r,o,n.methodResponseTimeout||1e4,i);"object"===typeof u?t.forEach((function(t){var r=t.server.id,o=t.methods.find((function(n){return n.name===e.name}));if(o){u.trackedServers.push({serverId:r,subscriptionId:void 0});var i={type:"subscribe",server_id:r,method_id:o.gatewayId,arguments_kv:n.arguments};l.session.send(i,{serverId:r,subLocalKey:a}).then((function(e){return l.handleSubscribed(e)})).catch((function(e){return l.handleErrorSubscribing(e)}))}else l.logger.error("can not find method "+e.name+" for target "+t.server.id)})):o({method:e,called_with:n.arguments,message:ERR_MSG_SUB_FAILED+" Unable to register the user callbacks."})}else o({method:e,called_with:n.arguments,message:ERR_MSG_SUB_FAILED+" No available servers matched the target params."})},e.prototype.drainSubscriptions=function(){var e=Object.values(this.subscriptionsList);return this.subscriptionsList={},this.subscriptionIdToLocalKeyMap={},e},e.prototype.getNextSubscriptionLocalKey=function(){var e=this.nextSubLocalKey;return this.nextSubLocalKey+=1,e},e.prototype.registerSubscription=function(e,n,t,r,o,i,l){var a=this,u={localKey:e,status:STATUS_AWAITING_ACCEPT,method:n,params:t,success:r,error:o,trackedServers:[],handlers:{onData:(null===l||void 0===l?void 0:l.handlers.onData)||[],onClosed:(null===l||void 0===l?void 0:l.handlers.onClosed)||[],onConnected:(null===l||void 0===l?void 0:l.handlers.onConnected)||[]},queued:{data:[],closers:[]},timeoutId:void 0,close:function(){return a.closeSubscription(e)},subscription:null===l||void 0===l?void 0:l.subscription};return l||(t.onData&&u.handlers.onData.push(t.onData),t.onClosed&&u.handlers.onClosed.push(t.onClosed),t.onConnected&&u.handlers.onConnected.push(t.onConnected)),this.subscriptionsList[e]=u,u.timeoutId=setTimeout((function(){if(void 0!==a.subscriptionsList[e]){var r=a.subscriptionsList[e];r.status===STATUS_AWAITING_ACCEPT?(o({method:n,called_with:t.arguments,message:ERR_MSG_SUB_FAILED+" Subscription attempt timed out after "+i+" ms."}),delete a.subscriptionsList[e]):r.status===STATUS_SUBSCRIBED&&r.trackedServers.length>0&&(r.trackedServers=r.trackedServers.filter((function(e){return"undefined"!==typeof e.subscriptionId})),delete r.timeoutId,r.trackedServers.length<=0&&(a.callOnClosedHandlers(r),delete a.subscriptionsList[e]))}}),i),u},e.prototype.callOnClosedHandlers=function(e,n){var t,r=e.queued.closers.length,o=r>0?e.queued.closers[r-1]:null;void 0!==o&&"string"===typeof o&&(t=this.repository.getServerById(o).instance),e.handlers.onClosed.forEach((function(r){"function"===typeof r&&r({message:n||ON_CLOSE_MSG_SERVER_INIT,requestArguments:e.params.arguments||{},server:t,stream:e.method})}))},e.prototype.closeSubscription=function(e){var n=this,t=this.subscriptionsList[e];"object"===typeof t&&(t.trackedServers.forEach((function(e){"undefined"!==typeof e.subscriptionId&&(t.queued.closers.push(e.serverId),n.session.sendFireAndForget({type:"unsubscribe",subscription_id:e.subscriptionId,reason_uri:"",reason:ON_CLOSE_MSG_CLIENT_INIT}),delete n.subscriptionIdToLocalKeyMap[e.subscriptionId])})),t.trackedServers=[],this.callOnClosedHandlers(t,ON_CLOSE_MSG_CLIENT_INIT),delete this.subscriptionsList[e])},e}(),ClientProtocol=function(){function e(e,n,t){var r=this;this.session=e,this.repository=n,this.logger=t,e.on("peer-added",(function(e){return r.handlePeerAdded(e)})),e.on("peer-removed",(function(e){return r.handlePeerRemoved(e)})),e.on("methods-added",(function(e){return r.handleMethodsAddedMessage(e)})),e.on("methods-removed",(function(e){return r.handleMethodsRemovedMessage(e)})),this.streaming=new ClientStreaming(e,n,t)}return e.prototype.subscribe=function(e,n,t,r,o,i){this.streaming.subscribe(e,n,t,r,o,i)},e.prototype.invoke=function(e,n,t,r){var o=this,i=r.id,l={type:"call",server_id:i,method_id:n.gatewayId,arguments_kv:t};return this.session.send(l,{invocationId:e,serverId:i}).then((function(e){return o.handleResultMessage(e)})).catch((function(e){return o.handleInvocationError(e)}))},e.prototype.drainSubscriptions=function(){return this.streaming.drainSubscriptions()},e.prototype.handlePeerAdded=function(e){var n=e.new_peer_id,t=e.identity,r=!e.meta||e.meta.local,o=Number(t.process),i={machine:t.machine,pid:isNaN(o)?t.process:o,instance:t.instance,application:t.application,applicationName:t.applicationName,environment:t.environment,region:t.region,user:t.user,windowId:t.windowId,peerId:n,api:t.api,isLocal:r};this.repository.addServer(i,n)},e.prototype.handlePeerRemoved=function(e){var n=e.removed_id,t=e.reason;this.repository.removeServerById(n,t)},e.prototype.handleMethodsAddedMessage=function(e){var n=this,t=e.server_id;e.methods.forEach((function(e){n.repository.addServerMethod(t,e)}))},e.prototype.handleMethodsRemovedMessage=function(e){var n=this,t=e.server_id,r=e.methods,o=this.repository.getServerById(t);Object.keys(o.methods).forEach((function(e){var i=o.methods[e];r.indexOf(i.gatewayId)>-1&&n.repository.removeServerMethod(t,e)}))},e.prototype.handleResultMessage=function(e){var n=e._tag.invocationId,t=e.result,r=e._tag.serverId;return{invocationId:n,result:t,instance:this.repository.getServerById(r).instance,status:InvokeStatus.Success,message:""}},e.prototype.handleInvocationError=function(e){if(this.logger.debug("handle invocation error "+JSON.stringify(e)),"_tag"in e){var n=e._tag.invocationId,t=e._tag.serverId,r=this.repository.getServerById(t),o=e.reason;return{invocationId:n,result:e.context,instance:r.instance,status:InvokeStatus.Error,message:o}}return{invocationId:"",message:e.message,status:InvokeStatus.Error,error:e}},e}();function gW3ProtocolFactory(e,n,t,r,o,i){var l,a=o.logger.subLogger("gw3-protocol"),u=new Promise((function(e){l=e})),s=n.domain("agm",["subscribed"]),c=new ServerProtocol(s,t,r,a.subLogger("server")),d=new ClientProtocol(s,t,a.subLogger("client"));return s.onJoined((function(o){t.addServer(e,n.peerId),o?function(){a.info("reconnected - will replay registered methods and subscriptions");for(var e=0,n=d.drainSubscriptions();e<n.length;e++){var t=n[e],o=t.method,l=Object.assign({},t.params);a.info("trying to re-subscribe to method "+o.name),i.client.subscribe(o,l,void 0,void 0,t)}var u=r.getList();r.reset();for(var s=0,c=u;s<c.length;s++){var f=c[s],p=f.definition;a.info("re-publishing method "+p.name),f.stream?i.server.createStream(p,f.streamCallbacks,void 0,void 0,f.stream):f.theFunction&&f.theFunction.userCallback?i.register(p,f.theFunction.userCallback):f.theFunction&&f.theFunction.userCallbackAsync&&i.registerAsync(p,f.theFunction.userCallbackAsync)}}():l&&(l({client:d,server:c}),l=void 0)})),s.onLeft((function(){t.reset()})),s.join(),u}var Interop=function(){function e(e){var n=this;if("undefined"===typeof e)throw new Error("configuration is required");if("undefined"===typeof e.connection)throw new Error("configuration.connections is required");var t,r=e.connection;if("number"!==typeof e.methodResponseTimeout&&(e.methodResponseTimeout=3e4),"number"!==typeof e.waitTimeoutMs&&(e.waitTimeoutMs=3e4),this.unwrappedInstance=new InstanceWrapper(this,void 0,r),this.instance=this.unwrappedInstance.unwrap(),this.clientRepository=new ClientRepository(e.logger.subLogger("cRep"),this),this.serverRepository=new ServerRepository,3!==r.protocolVersion)throw new Error("protocol "+r.protocolVersion+" not supported");t=gW3ProtocolFactory(this.instance,r,this.clientRepository,this.serverRepository,e,this),this.readyPromise=t.then((function(t){return n.protocol=t,n.client=new Client(n.protocol,n.clientRepository,n.instance,e),n.server=new Server(n.protocol,n.serverRepository),n}))}return e.prototype.ready=function(){return this.readyPromise},e.prototype.serverRemoved=function(e){return this.client.serverRemoved(e)},e.prototype.serverAdded=function(e){return this.client.serverAdded(e)},e.prototype.serverMethodRemoved=function(e){return this.client.serverMethodRemoved(e)},e.prototype.serverMethodAdded=function(e){return this.client.serverMethodAdded(e)},e.prototype.methodRemoved=function(e){return this.client.methodRemoved(e)},e.prototype.methodAdded=function(e){return this.client.methodAdded(e)},e.prototype.methodsForInstance=function(e){return this.client.methodsForInstance(e)},e.prototype.methods=function(e){return this.client.methods(e)},e.prototype.servers=function(e){return this.client.servers(e)},e.prototype.subscribe=function(e,n,t,r){return this.client.subscribe(e,n,t,r)},e.prototype.createStream=function(e,n,t,r){return this.server.createStream(e,n,t,r)},e.prototype.unregister=function(e){return this.server.unregister(e)},e.prototype.registerAsync=function(e,n){return this.server.registerAsync(e,n)},e.prototype.register=function(e,n){return this.server.register(e,n)},e.prototype.invoke=function(e,n,t,r,o,i){return this.client.invoke(e,n,t,r,o,i)},e.prototype.waitForMethod=function(e){var n=new PromiseWrapper,t=this.client.methodAdded((function(r){r.name===e&&(t(),n.resolve(r))}));return n.promise},e}(),successMessages=["subscribed","success"],MessageBus=function(){function e(e,n){var t=this;this.publish=function(e,n,r){var o=r||{},i=o.routingKey,l=o.target,a=t.removeEmptyValues({type:"publish",topic:e,data:n,peer_id:t.peerId,routing_key:i,target_identity:l});t.session.send(a)},this.subscribe=function(e,n,r){return new Promise((function(o,i){var l=r||{},a=l.routingKey,u=l.target,s=t.removeEmptyValues({type:"subscribe",topic:e,peer_id:t.peerId,routing_key:a,source:u});t.session.send(s).then((function(r){var i=r.subscription_id;t.subscriptions.push({subscription_id:i,topic:e,callback:n,source:u}),o({unsubscribe:function(){return t.session.send({type:"unsubscribe",subscription_id:i,peer_id:t.peerId}),t.subscriptions=t.subscriptions.filter((function(e){return e.subscription_id!==i})),Promise.resolve()}})})).catch((function(e){return i(e)}))}))},this.watchOnEvent=function(){t.session.on("event",(function(e){var n=e.data,r=e.subscription_id,o=e["publisher-identity"],i=t.subscriptions.find((function(e){return e.subscription_id===r}));i&&(i.source?t.keysMatch(i.source,o)&&i.callback(n,i.topic,o):i.callback(n,i.topic,o))}))},this.connection=e,this.logger=n,this.peerId=e.peerId,this.subscriptions=[],this.session=e.domain("bus",successMessages),this.readyPromise=this.session.join(),this.readyPromise.then((function(){t.watchOnEvent()}))}return e.prototype.ready=function(){return this.readyPromise},e.prototype.removeEmptyValues=function(e){var n={};return Object.keys(e).forEach((function(t){void 0!==e[t]&&null!==e[t]&&(n[t]=e[t])})),n},e.prototype.keysMatch=function(e,n){var t=Object.keys(e),r=!0;return t.forEach((function(t){e[t]!==n[t]&&(r=!1)})),r},e}(),GlueCore=function e(n,t){var r,o=Utils.getGDMajorVersion(),i=Promise.resolve();if(o){if(o<3)throw new Error("GD v2 is not supported. Use v4 of the API to run in that context.");o>=3&&(r=window.glue42gd,i=window.gdPreloadPromise||i)}var l,a,u,s,c,d,f,p=timer("glue"),h=prepareConfig(n=n||{},t=t||{},r),_={};function g(n,t,r){(f=u.canPublish("trace"))&&u.trace("registering "+n+" module");var o=function(){t.initTime=r.stop(),t.initEndTime=r.endTime,t.marks=r.marks,f&&u.trace(n+" is ready - "+(r.endTime-r.startTime))};t.initStartTime=r.startTime,t.ready?t.ready().then((function(){o()})):o(),Array.isArray(n)||(n=[n]),n.forEach((function(n){_[n]=t,e[n]=t}))}function m(){var e,n,t,o,i=timer("metrics"),a=h.metrics,c=null===r||void 0===r?void 0:r.getMetricsPublishingEnabled,d=h.connection.identity,f=c||function(){return!0},p=null!==(e="boolean"!==typeof a&&a.disableAutoAppSystem)&&void 0!==e&&e;return g("metrics",s=metrics({connection:a?l:void 0,logger:u.subLogger("metrics"),canUpdateMetric:f,system:"Glue42",service:null!==(n=null===d||void 0===d?void 0:d.service)&&void 0!==n?n:h.application,instance:null!==(o=null!==(t=null===d||void 0===d?void 0:d.instance)&&void 0!==t?t:null===d||void 0===d?void 0:d.windowId)&&void 0!==o?o:shortid(),disableAutoAppSystem:p,pagePerformanceMetrics:"boolean"!==typeof a?null===a||void 0===a?void 0:a.pagePerformanceMetrics:void 0}),i),Promise.resolve()}function w(){var e=timer("interop"),n={connection:l,logger:u.subLogger("interop")};return a=new Interop(n),Logger.Interop=a,g(["interop","agm"],a,e),Promise.resolve()}function v(){var e=h.activities&&3===l.protocolVersion;if(h.contexts||e){var n=timer("contexts");return g("contexts",c=new ContextsModule({connection:l,logger:u.subLogger("contexts")}),n),c}var t=l.replayer;t&&t.drain(ContextMessageReplaySpec.name)}function b(){return __awaiter$1$1(this,void 0,void 0,(function(){var e;return __generator(this,(function(n){return h.bus?(e=timer("bus"),g("bus",d=new MessageBus(l,u.subLogger("bus")),e),[2,Promise.resolve()]):[2,Promise.resolve()]}))}))}function y(e){try{return e.forEach((function(e){!function(e,n){var t=timer(e),r=n(_);r&&g(e,r,t)}(e.name,e.create)})),Promise.resolve()}catch(n){return Promise.reject(n)}}return i.then((function(){var e,n=timer("logger");return(u=new Logger(""+(null===(e=h.connection.identity)||void 0===e?void 0:e.application),void 0,h.customLogger)).consoleLevel(h.logger.console),u.publishLevel(h.logger.publish),u.canPublish("debug")&&u.debug("initializing glue..."),g("logger",u,n),Promise.resolve(void 0)})).then((function(){var e=timer("connection");l=new Connection(h.connection,u.subLogger("connection"));var n=Promise.resolve(h.auth);return h.connection&&!h.auth&&(n=r?r.getGWToken().then((function(e){return{gatewayToken:e}})):Promise.reject("You need to provide auth information")),n.then((function(n){var t;if(e.mark("auth-promise-resolved"),"[object Object]"!==Object.prototype.toString.call(n))throw new Error("Invalid auth object - "+JSON.stringify(n));return t=n,l.login(t)})).then((function(){return g("connection",l,e),h})).catch((function(e){throw l&&l.logout(),e}))})).then((function(){return Promise.all([m(),w(),v(),b()])})).then((function(){return a.readyPromise})).then((function(){return y(h.libs||[])})).then((function(){var e=Object.keys(_).map((function(e){var n=_[e];return n.ready?n.ready():Promise.resolve()}));return Promise.all(e)})).then((function(){var e={coreVersion:version$1,version:h.version};p.stop();var o={feedback:function(e){a&&a.invoke("T42.ACS.Feedback",e,"best")},info:e,logger:u,interop:a,agm:a,connection:l,metrics:s,contexts:c,bus:d,version:h.version,userConfig:n,done:function(){return null===u||void 0===u||u.info("done called by user..."),l.logout()}};if(o.performance={get glueVer(){return h.version},get glueConfig(){return JSON.stringify(n)},get browser(){return window.performance.timing.toJSON()},get memory(){return window.performance.memory},get initTimes(){var e=getAllTimers();return Object.keys(e).map((function(n){var t=e[n];return{name:n,duration:t.endTime-t.startTime,marks:t.marks}}))}},Object.keys(_).forEach((function(e){var n=_[e];o[e]=n})),o.config={},Object.keys(h).forEach((function(e){o.config[e]=h[e]})),t&&t.extOptions&&Object.keys(t.extOptions).forEach((function(e){o.config[e]=null===t||void 0===t?void 0:t.extOptions[e]})),(null===t||void 0===t?void 0:t.enrichGlue)&&t.enrichGlue(o),r&&r.updatePerfData&&r.updatePerfData(o.performance),o.agm){var i=function(e,n,t){return function(){return o.logger.warn("glue.js - 'glue.agm."+n+"' method is deprecated, use 'glue.interop."+t+"' instead."),e.apply(o.agm,arguments)}},f=o.agm;f.method_added=i(o.agm.methodAdded,"method_added","methodAdded"),f.method_removed=i(o.agm.methodRemoved,"method_removed","methodRemoved"),f.server_added=i(o.agm.serverAdded,"server_added","serverAdded"),f.server_method_aded=i(o.agm.serverMethodAdded,"server_method_aded","serverMethodAdded"),f.server_method_removed=i(o.agm.serverMethodRemoved,"server_method_removed","serverMethodRemoved")}return o})).catch((function(e){return Promise.reject({err:e,libs:_})}))};"undefined"!==typeof window&&(window.GlueCore=GlueCore),GlueCore.version=version$1,GlueCore.default=GlueCore;var glueWebFactory=createFactoryFunction(GlueCore);if("undefined"!==typeof window){var windowAny=window;windowAny.GlueWeb=glueWebFactory,delete windowAny.GlueCore}glueWebFactory.version=version;var fallbackToEnterprise=function(e){return __awaiter(void 0,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o,i,l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===e||void 0===e?void 0:e.glueFactory)){n.next=6;break}return n.next=3,null===e||void 0===e?void 0:e.glueFactory(null===e||void 0===e?void 0:e.glue);case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,glueWebFactory(null===e||void 0===e?void 0:e.glue);case 8:n.t0=n.sent;case 9:if(l=n.t0,!(null===(r=null===(t=null===e||void 0===e?void 0:e.applications)||void 0===t?void 0:t.local)||void 0===r?void 0:r.length)){n.next=13;break}return n.next=13,l.appManager.inMemory.import(e.applications.local,"merge");case 13:if(!(null===(i=null===(o=null===e||void 0===e?void 0:e.layouts)||void 0===o?void 0:o.local)||void 0===i?void 0:i.length)){n.next=16;break}return n.next=16,l.layouts.import(e.layouts.local,"merge");case 16:return n.abrupt("return",{glue:l});case 17:case"end":return n.stop()}}),n)})))},commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function createCommonjsModule$1(e,n,t){return e(t={path:n,exports:{},require:function(e,n){return commonjsRequire(e,void 0===n||null===n?t.path:n)}},t.exports),t.exports}function getAugmentedNamespace(e){if(e.__esModule)return e;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(function(){var aa="cljs.core",ca="cljs.pprint",da="cljs.spec.alpha",ea="cljs.test",fa="cljs.tools.reader",ha="gateway-web.core",ja="gateway.auth.impl",ka="gateway.auth.spec",la="gateway.basic-auth.core",ma="gateway.cljs.authenticators",na="gateway.cljs.common",oa="gateway.cljs.local-client",pa="gateway.common.context.ops",qa="gateway.common.context.spec.messages",ra="gateway.common.context.spec.requests",sa="gateway.common.context.state",ta="gateway.common.spec.messages",va="gateway.common.spec.requests",xa="gateway.domain",ya="gateway.domains.activity.activities",za="gateway.domains.activity.core",Aa="gateway.domains.agm.core",Ba="gateway.domains.agm.spec.messages",Ca="gateway.domains.agm.spec.register",Da="gateway.domains.agm.spec.requests",Ea="gateway.domains.agm.spec.unregister",Fa="gateway.domains.agm.subscriptions",Ga="gateway.domains.bus.core",Ha="gateway.domains.context.core",Ia="gateway.domains.global.core",Ja="gateway.domains.global.internal",Ka="gateway.domains.global.spec.messages",La="gateway.domains.global.spec.requests",Ma="gateway.domains.global.state",Na="gateway.domains.metrics.core",Oa="gateway.local-node.core",Pa="gateway.node",Qa="gateway.state.spec.activity",Ra="gateway.state.spec.agm",Sa="gateway.state.spec.bus",Ta="gateway.state.spec.common",Ua="gateway.state.spec.context",Va="gateway.state.spec.domain-registry",Wa="gateway.state.spec.factory",Xa="gateway.state.spec.mthds",Ya="gateway.state.spec.pending-requests",Za="gateway.state.spec.restrictions",$a="gateway.state.spec.state",ab="gateway.state.spec.tokens",bb="instaparse.gll",g,cb=this||self;function db(e){var n=typeof e;if("object"==n){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return n;var t=Object.prototype.toString.call(e);if("[object Window]"==t)return"object";if("[object Array]"==t||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==t||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==n&&"undefined"==typeof e.call)return"object";return n}function eb(e){var n=db(e);return"array"==n||"object"==n&&"number"==typeof e.length}function fb(e){return"function"==db(e)}function hb(e){return e[jb]||(e[jb]=++kb)}var jb="closure_uid_"+(1e9*Math.random()>>>0),kb=0;function lb(e,n,t){return e.call.apply(e.bind,arguments)}function mb(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function nb(e,n,t){return(nb=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lb:mb).apply(null,arguments)}function qb(e,n){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}}function tb(e,n){e=e.split(".");var t,r=cb;e[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+e[0]);for(;e.length&&(t=e.shift());)e.length||void 0===n?r=r[t]&&r[t]!==Object.prototype[t]?r[t]:r[t]={}:r[t]=n}function ub(e,n){function t(){}t.prototype=n.prototype,e.$h=n.prototype,e.prototype=new t,e.prototype.constructor=e,e.Td=function(e,t,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return n.prototype[t].apply(e,o)}}function vb(e,n){var t=wb;return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=n(e)}function xb(e,n){this.ja=0|e,this.ea=0|n}function yb(e){return 4294967296*e.ea+(e.ja>>>0)}function Cb(e){return 0==e.ja&&0==e.ea}function Db(e){var n=1+~e.ja|0;return zb(n,~e.ea+!n|0)}function Bb(e,n){return e.add(Db(n))}function Ab(e,n){if(Cb(n))throw Error("division by zero");if(0>e.ea){if(e.nd(Eb)){if(n.nd(Fb)||n.nd(Gb))return Eb;if(n.nd(Eb))return Fb;var t=1;if(0==t)t=e;else{var r=e.ea;t=32>t?zb(e.ja>>>t|r<<32-t,r>>t):zb(r>>t-32,0<=r?0:-1)}return(t=Ab(t,n).shiftLeft(1)).nd(Hb)?0>n.ea?Fb:Gb:(e=Bb(e,n.multiply(t)),t.add(Ab(e,n)))}return 0>n.ea?Ab(Db(e),Db(n)):Db(Ab(Db(e),n))}if(Cb(e))return Hb;if(0>n.ea)return n.nd(Eb)?Hb:Db(Ab(e,Db(n)));for(r=Hb;0<=e.compare(n);){t=Math.max(1,Math.floor(yb(e)/yb(n)));var o=Math.ceil(Math.log(t)/Math.LN2);o=48>=o?1:Math.pow(2,o-48);for(var i=Ib(t),l=i.multiply(n);0>l.ea||0<l.compare(e);)l=(i=Ib(t-=o)).multiply(n);Cb(i)&&(i=Fb),r=r.add(i),e=Bb(e,l)}return r}function Ib(e){return 0<e?0x8000000000000000<=e?Jb:new xb(e,e/4294967296):0>e?-0x8000000000000000>=e?Eb:Db(new xb(-e,-e/4294967296)):Hb}function zb(e,n){return new xb(e,n)}g=xb.prototype,g.isSafeInteger=function(){var e=this.ea>>21;return 0==e||-1==e&&!(0==this.ja&&-2097152==this.ea)},g.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(this.isSafeInteger()){var n=yb(this);return 10==e?""+n:n.toString(e)}n=14-(e>>2);var t=Math.pow(e,n),r=zb(t,t/4294967296);t=Ab(this,r),r=Math.abs(yb(Bb(this,t.multiply(r))));var o=10==e?""+r:r.toString(e);return o.length<n&&(o="0000000000000".substr(o.length-n)+o),r=yb(t),(10==e?r:r.toString(e))+o},g.nd=function(e){return this.ja==e.ja&&this.ea==e.ea},g.compare=function(e){return this.ea==e.ea?this.ja==e.ja?0:this.ja>>>0>e.ja>>>0?1:-1:this.ea>e.ea?1:-1},g.add=function(e){var n=this.ea>>>16,t=65535&this.ea,r=this.ja>>>16,o=e.ea>>>16,i=65535&e.ea,l=e.ja>>>16;return r=(l=((e=(65535&this.ja)+(65535&e.ja))>>>16)+(r+l))>>>16,zb((65535&l)<<16|65535&e,(n=((r+=t+i)>>>16)+(n+o)&65535)<<16|65535&r)},g.multiply=function(e){if(Cb(this))return this;if(Cb(e))return e;var n=this.ea>>>16,t=65535&this.ea,r=this.ja>>>16,o=65535&this.ja,i=e.ea>>>16,l=65535&e.ea,a=e.ja>>>16,u=o*(e=65535&e.ja),s=(u>>>16)+r*e,c=s>>>16;c+=(s=(65535&s)+o*a)>>>16;var d=(c+=t*e)>>>16;return zb((65535&s)<<16|65535&u,(d=(d+=(c=(65535&c)+r*a)>>>16)+((c=(65535&c)+o*l)>>>16)+(n*e+t*a+r*l+o*i)&65535)<<16|65535&c)},g.and=function(e){return zb(this.ja&e.ja,this.ea&e.ea)},g.or=function(e){return zb(this.ja|e.ja,this.ea|e.ea)},g.xor=function(e){return zb(this.ja^e.ja,this.ea^e.ea)},g.shiftLeft=function(e){if(0==(e&=63))return this;var n=this.ja;return 32>e?zb(n<<e,this.ea<<e|n>>>32-e):zb(0,n<<e-32)};var Hb=zb(0,0),Fb=zb(1,0),Gb=zb(-1,-1),Jb=zb(4294967295,2147483647),Eb=zb(0,2147483648);function Kb(e){return Array.prototype.concat.apply([],arguments)}function Lb(e){var n=e.length;if(0<n){for(var t=Array(n),r=0;r<n;r++)t[r]=e[r];return t}return[]}function Mb(e,n,t,r){return Array.prototype.splice.apply(e,Nb(arguments,1))}function Nb(e,n,t){return 2>=arguments.length?Array.prototype.slice.call(e,n):Array.prototype.slice.call(e,n,t)}function Ob(e,n){e.sort(n||Pb)}function Qb(e,n){for(var t=Array(e.length),r=0;r<e.length;r++)t[r]={index:r,value:e[r]};var o=n||Pb;for(Ob(t,(function(e,n){return o(e.value,n.value)||e.index-n.index})),r=0;r<e.length;r++)e[r]=t[r].value}function Pb(e,n){return e>n?1:e<n?-1:0}function Rb(e){for(var n=[],t=0;t<e;t++)n[t]=0;return n}function Cc(e){this.kh=e}Cc.prototype.toString=function(){return this.kh};var Um=new Cc("APPLET"),Xm=new Cc("BASE"),Gn=new Cc("EMBED"),fo=new Cc("IFRAME"),Mo=new Cc("LINK"),np=new Cc("MATH"),xp=new Cc("META"),Pq=new Cc("OBJECT"),yr=new Cc("SCRIPT"),Ms=new Cc("STYLE"),st=new Cc("SVG"),Vt=new Cc("TEMPLATE");function Ub(e){var n,t=[],r=0;for(n in e)t[r++]=n;return t}function Vb(e,n){return null!==e&&n in e?e[n]:void 0}function mv(e){var n=arguments.length;if(1==n&&"array"==db(arguments[0]))return mv.apply(null,arguments[0]);for(var t={},r=0;r<n;r++)t[arguments[r]]=!0;return t}function Wb(e,n){this.Hh=e===Xb&&n||"",this.Wf=Yb}var Yb={},Xb={},Zb=new Wb(Xb,"");function $b(){}function ac(e,n){this.yh=e===bc&&n||"",this.Xf=cc}$b.prototype.Jc=function(){return this},(new $b).Jc("");var cc={},bc={};function dc(e,n){var t=e.length-n.length;return 0<=t&&e.indexOf(n,t)==t}function ec(e){return/^[\s\xa0]*$/.test(e)}var fc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},hc;function gc(e){return-1!=hc.toLowerCase().indexOf(e.toLowerCase())}function ic(e,n){return e<n?-1:e>n?1:0}function jc(){}function kc(){}jc.prototype.Jc=function(){return this},(new jc).Jc(""),kc.prototype.Jc=function(){return this},(new kc).Jc("");e:{var lc=cb.navigator;if(lc){var nc=lc.userAgent;if(nc){hc=nc;break e}}hc=""}function oc(e){return-1!=hc.indexOf(e)}function pc(){return oc("Firefox")||oc("FxiOS")}function qc(){return(oc("Chrome")||oc("CriOS"))&&!oc("Edge")}function rc(){this.Ef="",this.Vf=sc}function tc(){var e=uc;return e instanceof rc&&e.constructor===rc&&e.Vf===sc?e.Ef:(db(e),"type_error:SafeHtml")}mv(Um,Xm,Gn,fo,Mo,np,xp,Pq,yr,Ms,st,Vt);var sc={};rc.prototype.Jc=function(e){return this.Ef=e,this},(new rc).Jc("<!DOCTYPE html>");var uc=(new rc).Jc("");function vc(e){var n=new ac(bc,Zb instanceof Wb&&Zb.constructor===Wb&&Zb.Wf===Yb?Zb.Hh:"type_error:Const");n instanceof ac&&n.constructor===ac&&n.Xf===cc?n=n.yh:(db(n),n="type_error:TrustedResourceUrl"),e.src=n.toString()}function wc(e){return 1==e.length&&" "<=e&&"~">=e||"\x80"<=e&&"\ufffd">=e}(new rc).Jc("<br>");var yc=String.prototype.repeat?function(e,n){return e.repeat(n)}:function(e,n){return Array(n+1).join(e)};function zc(e,n){null!=e&&this.append.apply(this,arguments)}g=zc.prototype,g.Nc="",g.set=function(e){this.Nc=""+e},g.append=function(e,n,t){if(this.Nc+=String(e),null!=n)for(var r=1;r<arguments.length;r++)this.Nc+=arguments[r];return this},g.clear=function(){this.Nc=""},g.getLength=function(){return this.Nc.length},g.toString=function(){return this.Nc};var Ac={},Bc={},vv,h={},Dc=null,Ec=null,Fc=!0,Gc=!0,Hc=null,Ic=null;function Jc(){return new n(null,5,[Kc,!0,Lc,Gc,Mc,!1,Nc,!1,Oc,Hc],null)}function Pc(){Fc=!1,Ec=function(){return console.log.apply(console,Lb(arguments))}}function p(e){return null!=e&&!1!==e}function Qc(e){return null==e}function Rc(e){return e instanceof Array}function Sc(e){return"number"===typeof e}function Tc(e){return null==e||!1===e}function Uc(e){return null!=e}function Vc(e){return"string"==typeof e}function Wc(){return!0}function Xc(e,n){return!!e[db(null==n?null:n)]||!!e._}function Yc(e){return null==e?null:e.constructor}function Zc(e,n){var t=Yc(n);return t=p(p(t)?t.Ia:t)?t.Da:db(n),Error(["No protocol method ",e," defined for type ",t,": ",n].join(""))}function $c(e){var n=e.Da;return p(n)?n:q.a(e)}var ad="undefined"!==typeof Symbol&&"function"===db(Symbol)?Symbol.iterator:"@@iterator",bd={"]":"_RBRACK_","'":"_SINGLEQUOTE_","=":"_EQ_",'"':"_DOUBLEQUOTE_","!":"_BANG_","*":"_STAR_","%":"_PERCENT_","|":"_BAR_","~":"_TILDE_","/":"_SLASH_","\\":"_BSLASH_","-":"_","?":"_QMARK_","&":"_AMPERSAND_",":":"_COLON_","<":"_LT_","{":"_LBRACE_","}":"_RBRACE_","[":"_LBRACK_","#":"_SHARP_","^":"_CARET_","+":"_PLUS_","@":"_CIRCA_",">":"_GT_"},cd={_RBRACE_:"}",_COLON_:":",_BANG_:"!",_QMARK_:"?",_BSLASH_:"\\\\",_SLASH_:"/",_PERCENT_:"%",_PLUS_:"+",_SHARP_:"#",_LBRACE_:"{",_BAR_:"|",_LBRACK_:"[",_EQ_:"=",_:"-",_TILDE_:"~",_RBRACK_:"]",_GT_:">",_SINGLEQUOTE_:"'",_CIRCA_:"@",_AMPERSAND_:"&",_DOUBLEQUOTE_:'\\"',_CARET_:"^",_LT_:"<",_STAR_:"*"},dd=null;function ed(e){for(var n=e.length,t=Array(n),r=0;r<n;)t[r]=e[r],r+=1;return t}function fd(e){function n(e,n){return e.push(n),e}var t=[];return gd.c?gd.c(n,t,e):gd.call(null,n,t,e)}function nh(e){return"symbol"===db(e)||"undefined"!==typeof Symbol&&e instanceof Symbol}function hd(){}function id(){}function jd(){}function kd(e){if(null!=e&&null!=e.X)e=e.X(e);else{var n=kd[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=kd._))throw Zc("ICounted.-count",e);e=n.a?n.a(e):n.call(null,e)}}return e}function ld(){}function md(e){if(null!=e&&null!=e.pa)e=e.pa(e);else{var n=md[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=md._))throw Zc("IEmptyableCollection.-empty",e);e=n.a?n.a(e):n.call(null,e)}}return e}function nd(){}function od(e,n){if(null!=e&&null!=e.ga)e=e.ga(e,n);else{var t=od[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=od._))throw Zc("ICollection.-conj",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function pd(){}var Mz=function(){function e(e,n,t){var r=qd[db(null==e?null:e)];if(null!=r)return r.c?r.c(e,n,t):r.call(null,e,n,t);if(null!=(r=qd._))return r.c?r.c(e,n,t):r.call(null,e,n,t);throw Zc("IIndexed.-nth",e)}function n(e,n){var t=qd[db(null==e?null:e)];if(null!=t)return t.b?t.b(e,n):t.call(null,e,n);if(null!=(t=qd._))return t.b?t.b(e,n):t.call(null,e,n);throw Zc("IIndexed.-nth",e)}var t;return(t=function(t,r,o){switch(arguments.length){case 2:return n.call(this,t,r);case 3:return e.call(this,t,r,o)}throw Error("Invalid arity: "+arguments.length)}).b=n,t.c=e,t}(),qd=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function rd(){}function sd(e){if(null!=e&&null!=e.Fa)e=e.Fa(e);else{var n=sd[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=sd._))throw Zc("ISeq.-first",e);e=n.a?n.a(e):n.call(null,e)}}return e}function td(e){if(null!=e&&null!=e.Ha)e=e.Ha(e);else{var n=td[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=td._))throw Zc("ISeq.-rest",e);e=n.a?n.a(e):n.call(null,e)}}return e}function ud(){}function vd(e){if(null!=e&&null!=e.za)e=e.za(e);else{var n=vd[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=vd._))throw Zc("INext.-next",e);e=n.a?n.a(e):n.call(null,e)}}return e}function wd(){}qd.b=function(e,n){return null!=e&&null!=e.W?e.W(e,n):Mz(e,n)},qd.c=function(e,n,t){return null!=e&&null!=e.wa?e.wa(e,n,t):Mz(e,n,t)},qd.F=3;var UA=function(){function e(e,n,t){var r=xd[db(null==e?null:e)];if(null!=r)return r.c?r.c(e,n,t):r.call(null,e,n,t);if(null!=(r=xd._))return r.c?r.c(e,n,t):r.call(null,e,n,t);throw Zc("ILookup.-lookup",e)}function n(e,n){var t=xd[db(null==e?null:e)];if(null!=t)return t.b?t.b(e,n):t.call(null,e,n);if(null!=(t=xd._))return t.b?t.b(e,n):t.call(null,e,n);throw Zc("ILookup.-lookup",e)}var t;return(t=function(t,r,o){switch(arguments.length){case 2:return n.call(this,t,r);case 3:return e.call(this,t,r,o)}throw Error("Invalid arity: "+arguments.length)}).b=n,t.c=e,t}(),xd=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function yd(){}function zd(e,n,t){if(null!=e&&null!=e.fa)e=e.fa(e,n,t);else{var r=zd[db(null==e?null:e)];if(null!=r)e=r.c?r.c(e,n,t):r.call(null,e,n,t);else{if(null==(r=zd._))throw Zc("IAssociative.-assoc",e);e=r.c?r.c(e,n,t):r.call(null,e,n,t)}}return e}function Ad(e,n){if(null!=e&&null!=e.Ac)e=e.Ac(e,n);else{var t=Ad[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=Ad._))throw Zc("IFind.-find",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function Bd(){}function Cd(e,n){if(null!=e&&null!=e.Ka)e=e.Ka(e,n);else{var t=Cd[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=Cd._))throw Zc("IMap.-dissoc",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function Dd(e){if(null!=e&&null!=e.Ce)e=e.key;else{var n=Dd[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=Dd._))throw Zc("IMapEntry.-key",e);e=n.a?n.a(e):n.call(null,e)}}return e}function Ed(e){if(null!=e&&null!=e.De)e=e.m;else{var n=Ed[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=Ed._))throw Zc("IMapEntry.-val",e);e=n.a?n.a(e):n.call(null,e)}}return e}function Fd(){}function Gd(e,n){if(null!=e&&null!=e.rf)e=e.rf(e,n);else{var t=Gd[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=Gd._))throw Zc("ISet.-disjoin",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function Hd(e){if(null!=e&&null!=e.Xb)e=e.Xb(e);else{var n=Hd[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=Hd._))throw Zc("IStack.-peek",e);e=n.a?n.a(e):n.call(null,e)}}return e}function Id(e){if(null!=e&&null!=e.Yb)e=e.Yb(e);else{var n=Id[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=Id._))throw Zc("IStack.-pop",e);e=n.a?n.a(e):n.call(null,e)}}return e}function Jd(){}function Kd(e,n,t){if(null!=e&&null!=e.Ib)e=e.Ib(e,n,t);else{var r=Kd[db(null==e?null:e)];if(null!=r)e=r.c?r.c(e,n,t):r.call(null,e,n,t);else{if(null==(r=Kd._))throw Zc("IVector.-assoc-n",e);e=r.c?r.c(e,n,t):r.call(null,e,n,t)}}return e}function Ld(){}function t(e){if(null!=e&&null!=e.zb)e=e.zb(e);else{var n=t[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=t._))throw Zc("IDeref.-deref",e);e=n.a?n.a(e):n.call(null,e)}}return e}function Md(){}function Nd(e){if(null!=e&&null!=e.N)e=e.N(e);else{var n=Nd[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=Nd._))throw Zc("IMeta.-meta",e);e=n.a?n.a(e):n.call(null,e)}}return e}function Od(){}function Pd(e,n){if(null!=e&&null!=e.O)e=e.O(e,n);else{var t=Pd[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=Pd._))throw Zc("IWithMeta.-with-meta",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function Qd(){}xd.b=function(e,n){return null!=e&&null!=e.ia?e.ia(e,n):UA(e,n)},xd.c=function(e,n,t){return null!=e&&null!=e.M?e.M(e,n,t):UA(e,n,t)},xd.F=3;var iC=function(){function e(e,n,t){var r=Rd[db(null==e?null:e)];if(null!=r)return r.c?r.c(e,n,t):r.call(null,e,n,t);if(null!=(r=Rd._))return r.c?r.c(e,n,t):r.call(null,e,n,t);throw Zc("IReduce.-reduce",e)}function n(e,n){var t=Rd[db(null==e?null:e)];if(null!=t)return t.b?t.b(e,n):t.call(null,e,n);if(null!=(t=Rd._))return t.b?t.b(e,n):t.call(null,e,n);throw Zc("IReduce.-reduce",e)}var t;return(t=function(t,r,o){switch(arguments.length){case 2:return n.call(this,t,r);case 3:return e.call(this,t,r,o)}throw Error("Invalid arity: "+arguments.length)}).b=n,t.c=e,t}(),Rd=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function Sd(){}function Td(e,n,t){if(null!=e&&null!=e.Aa)e=e.Aa(e,n,t);else{var r=Td[db(null==e?null:e)];if(null!=r)e=r.c?r.c(e,n,t):r.call(null,e,n,t);else{if(null==(r=Td._))throw Zc("IKVReduce.-kv-reduce",e);e=r.c?r.c(e,n,t):r.call(null,e,n,t)}}return e}function Ud(e,n){if(null!=e&&null!=e.Y)e=e.Y(e,n);else{var t=Ud[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=Ud._))throw Zc("IEquiv.-equiv",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function Vd(e){if(null!=e&&null!=e.Z)e=e.Z(e);else{var n=Vd[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=Vd._))throw Zc("IHash.-hash",e);e=n.a?n.a(e):n.call(null,e)}}return e}function Wd(){}function Xd(e){if(null!=e&&null!=e.$)e=e.$(e);else{var n=Xd[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=Xd._))throw Zc("ISeqable.-seq",e);e=n.a?n.a(e):n.call(null,e)}}return e}function Yd(){}function Zd(){}function $d(){}function ae(){}function be(e){if(null!=e&&null!=e.Bc)e=e.Bc(e);else{var n=be[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=be._))throw Zc("IReversible.-rseq",e);e=n.a?n.a(e):n.call(null,e)}}return e}function ce(e,n){if(null!=e&&null!=e.Pc)e=e.Pc(e,n);else{var t=ce[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=ce._))throw Zc("IWriter.-write",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function de(e){if(null!=e&&null!=e.qc)e=e.qc(e);else{var n=de[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=de._))throw Zc("IWriter.-flush",e);e=n.a?n.a(e):n.call(null,e)}}return e}function ee(){}function fe(e,n,t){if(null!=e&&null!=e.S)e=e.S(e,n,t);else{var r=fe[db(null==e?null:e)];if(null!=r)e=r.c?r.c(e,n,t):r.call(null,e,n,t);else{if(null==(r=fe._))throw Zc("IPrintWithWriter.-pr-writer",e);e=r.c?r.c(e,n,t):r.call(null,e,n,t)}}return e}function ge(){}function he(e){if(null!=e&&null!=e.Bd)e=e.Bd(e);else{var n=he[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=he._))throw Zc("IPending.-realized?",e);e=n.a?n.a(e):n.call(null,e)}}return e}function ie(e,n,t){if(null!=e&&null!=e.Ge)e.Ge(e,n,t);else{var r=ie[db(null==e?null:e)];if(null!=r)r.c?r.c(e,n,t):r.call(null,e,n,t);else{if(null==(r=ie._))throw Zc("IWatchable.-notify-watches",e);r.c?r.c(e,n,t):r.call(null,e,n,t)}}}function je(e){if(null!=e&&null!=e.hd)e=e.hd(e);else{var n=je[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=je._))throw Zc("IEditableCollection.-as-transient",e);e=n.a?n.a(e):n.call(null,e)}}return e}function ke(e,n){if(null!=e&&null!=e.kd)e=e.kd(e,n);else{var t=ke[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=ke._))throw Zc("ITransientCollection.-conj!",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function le(e){if(null!=e&&null!=e.Cd)e=e.Cd(e);else{var n=le[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=le._))throw Zc("ITransientCollection.-persistent!",e);e=n.a?n.a(e):n.call(null,e)}}return e}function me(e,n,t){if(null!=e&&null!=e.jd)e=e.jd(e,n,t);else{var r=me[db(null==e?null:e)];if(null!=r)e=r.c?r.c(e,n,t):r.call(null,e,n,t);else{if(null==(r=me._))throw Zc("ITransientAssociative.-assoc!",e);e=r.c?r.c(e,n,t):r.call(null,e,n,t)}}return e}function ne(e,n){if(null!=e&&null!=e.Fe)e=e.Fe(e,n);else{var t=ne[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=ne._))throw Zc("ITransientMap.-dissoc!",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function oe(){}function pe(e,n){if(null!=e&&null!=e.Wb)e=e.Wb(e,n);else{var t=pe[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=pe._))throw Zc("IComparable.-compare",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function qe(e){if(null!=e&&null!=e.ze)e=e.ze(e);else{var n=qe[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=qe._))throw Zc("IChunk.-drop-first",e);e=n.a?n.a(e):n.call(null,e)}}return e}function re(e){if(null!=e&&null!=e.$d)e=e.$d(e);else{var n=re[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=re._))throw Zc("IChunkedSeq.-chunked-first",e);e=n.a?n.a(e):n.call(null,e)}}return e}function se(e){if(null!=e&&null!=e.gd)e=e.gd(e);else{var n=se[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=se._))throw Zc("IChunkedSeq.-chunked-rest",e);e=n.a?n.a(e):n.call(null,e)}}return e}function te(e){if(null!=e&&null!=e.yd)e=e.yd(e);else{var n=te[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=te._))throw Zc("INamed.-name",e);e=n.a?n.a(e):n.call(null,e)}}return e}function ue(e){if(null!=e&&null!=e.zd)e=e.zd(e);else{var n=ue[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=ue._))throw Zc("INamed.-namespace",e);e=n.a?n.a(e):n.call(null,e)}}return e}function ve(e,n){if(null!=e&&null!=e.mg)e=e.mg(e,n);else{var t=ve[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=ve._))throw Zc("IReset.-reset!",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}Rd.b=function(e,n){return null!=e&&null!=e.Ba?e.Ba(e,n):iC(e,n)},Rd.c=function(e,n,t){return null!=e&&null!=e.Ca?e.Ca(e,n,t):iC(e,n,t)},Rd.F=3;var WC=function(){function e(e,n,t,r,o){var i=we[db(null==e?null:e)];if(null!=i)return i.K?i.K(e,n,t,r,o):i.call(null,e,n,t,r,o);if(null!=(i=we._))return i.K?i.K(e,n,t,r,o):i.call(null,e,n,t,r,o);throw Zc("ISwap.-swap!",e)}function n(e,n,t,r){var o=we[db(null==e?null:e)];if(null!=o)return o.A?o.A(e,n,t,r):o.call(null,e,n,t,r);if(null!=(o=we._))return o.A?o.A(e,n,t,r):o.call(null,e,n,t,r);throw Zc("ISwap.-swap!",e)}function t(e,n,t){var r=we[db(null==e?null:e)];if(null!=r)return r.c?r.c(e,n,t):r.call(null,e,n,t);if(null!=(r=we._))return r.c?r.c(e,n,t):r.call(null,e,n,t);throw Zc("ISwap.-swap!",e)}function r(e,n){var t=we[db(null==e?null:e)];if(null!=t)return t.b?t.b(e,n):t.call(null,e,n);if(null!=(t=we._))return t.b?t.b(e,n):t.call(null,e,n);throw Zc("ISwap.-swap!",e)}var o;return(o=function(o,i,l,a,u){switch(arguments.length){case 2:return r.call(this,o,i);case 3:return t.call(this,o,i,l);case 4:return n.call(this,o,i,l,a);case 5:return e.call(this,o,i,l,a,u)}throw Error("Invalid arity: "+arguments.length)}).b=r,o.c=t,o.A=n,o.K=e,o}(),we=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);case 4:return e.A(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return e.K(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function xe(e,n){if(null!=e&&null!=e.Cc)e.Cc(e,n);else{var t=xe[db(null==e?null:e)];if(null!=t)t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=xe._))throw Zc("IVolatile.-vreset!",e);t.b?t.b(e,n):t.call(null,e,n)}}}function ye(){}function ze(e){if(null!=e&&null!=e.ua)e=e.ua(e);else{var n=ze[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=ze._))throw Zc("IIterable.-iterator",e);e=n.a?n.a(e):n.call(null,e)}}return e}function Ae(e){this.Fh=e,this.h=1073741824,this.I=0}function Be(e){var n=new zc,t=new Ae(n);return e.S(null,t,Jc()),t.qc(null),q.a(n)}we.b=function(e,n){return null!=e&&null!=e.ng?e.ng(e,n):WC(e,n)},we.c=function(e,n,t){return null!=e&&null!=e.og?e.og(e,n,t):WC(e,n,t)},we.A=function(e,n,t,r){return null!=e&&null!=e.pg?e.pg(e,n,t,r):WC(e,n,t,r)},we.K=function(e,n,t,r,o){return null!=e&&null!=e.qg?e.qg(e,n,t,r,o):WC(e,n,t,r,o)},we.F=5,Ae.prototype.Pc=function(e,n){return this.Fh.append(n)},Ae.prototype.qc=function(){return null};var Ce="undefined"!==typeof Math&&"undefined"!==typeof Math.imul&&0!==Math.imul(4294967295,5)?function(e,n){return Math.imul(e,n)}:function(e,n){var t=65535&e,r=65535&n;return t*r+((e>>>16&65535)*r+t*(n>>>16&65535)<<16>>>0)|0};function De(e){return e=Ce(0|e,-862048943),Ce(e<<15|e>>>-15,461845907)}function Ee(e,n){return Ce((e=(0|e)^(0|n))<<13|e>>>-13,5)+-430675100|0}function Fe(e,n){return e=Ce((e=(0|e)^n)^e>>>16,-2048144789),(e=Ce(e^e>>>13,-1028477387))^e>>>16}var Ge={},He=0;function Ie(e){if(255<He&&(Ge={},He=0),null==e)return 0;var n=Ge[e];if("number"===typeof n)e=n;else{e:if(null!=e)if(0<(n=e.length))for(var t=0,r=0;;){if(!(t<n)){n=r;break e}r=Ce(31,r)+e.charCodeAt(t),t+=1}else n=0;else n=0;Ge[e]=n,He+=1,e=n}return e}function Je(e){if(null!=e&&(4194304&e.h||h===e.Oh))return 0^e.Z(null);if("number"!==typeof e)return!0===e?e=1231:!1===e?e=1237:"string"===typeof e?e=0===(e=Ie(e))?e:Fe(Ee(0,De(e)),4):e=e instanceof Date?0^e.valueOf():null==e?0:0^Vd(e),e;if(p(isFinite(e)))return Math.floor(e)%2147483647;switch(e){case 1/0:return 2146435072;case-1/0:return-1048576;default:return 2146959360}}function Ke(e){var n=e.name;e:for(var t=1,r=0;;){if(!(t<n.length)){t=r;break e}r=Ee(r,De(n.charCodeAt(t-1)|n.charCodeAt(t)<<16)),t+=2}return(n=Fe(1===(1&n.length)?t^De(n.charCodeAt(n.length-1)):t,Ce(2,n.length)))^(e=Ie(e.vb))+2654435769+(n<<6)+(n>>2)}function Le(e,n){if(e.wc===n.wc)return 0;if(p(!!Tc(e.vb)&&n.vb))return-1;if(p(e.vb)){if(Tc(n.vb))return 1;var t=Pb(e.vb,n.vb);return 0===t?Pb(e.name,n.name):t}return Pb(e.name,n.name)}function w(e,n,t,r,o){this.vb=e,this.name=n,this.wc=t,this.ed=r,this.Kb=o,this.h=2154168321,this.I=4096}g=w.prototype,g.toString=function(){return this.wc},g.Y=function(e,n){return n instanceof w&&this.wc===n.wc},g.call=function(){function e(e,n,t){return x.c?x.c(n,this,t):x.call(null,n,this,t)}function n(e,n){return x.b?x.b(n,this):x.call(null,n,this)}var t;return(t=function(t,r,o){switch(arguments.length){case 2:return n.call(this,t,r);case 3:return e.call(this,t,r,o)}throw Error("Invalid arity: "+(arguments.length-1))}).b=n,t.c=e,t}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return x.b?x.b(e,this):x.call(null,e,this)},g.b=function(e,n){return x.c?x.c(e,this,n):x.call(null,e,this,n)},g.N=function(){return this.Kb},g.O=function(e,n){return new w(this.vb,this.name,this.wc,this.ed,n)},g.Z=function(){var e=this.ed;return null!=e?e:this.ed=e=Ke(this)},g.yd=function(){return this.name},g.zd=function(){return this.vb},g.S=function(e,n){return ce(n,this.wc)};var Me=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function Ne(e,n,t){this.m=e,this.bd=n,this.Kb=t,this.h=6717441,this.I=0}function Pe(e){return null!=e?!!(131072&e.I||h===e.Ph)||!e.I&&Xc(ye,e):Xc(ye,e)}function B(e){if(null==e)return null;if(null!=e&&(8388608&e.h||h===e.qf))return e.$(null);if(Rc(e)||"string"===typeof e)return 0===e.length?null:new Qe(e,0,null);if(null!=e&&null!=e[ad])return e=Vb(e,ad).call(e),lo.a?lo.a(e):lo.call(null,e);if(Xc(Wd,e))return Xd(e);throw Error([q.a(e)," is not ISeqable"].join(""))}function C(e){return null==e?null:null!=e&&(64&e.h||h===e.D)?e.Fa(null):null==(e=B(e))?null:sd(e)}function Re(e){return null!=e&&(null!=e&&(64&e.h||h===e.D)||(e=B(e)))?e.Ha(null):Se}function D(e){return null==e?null:null!=e&&(128&e.h||h===e.Ad)?e.za(null):B(Re(e))}Me.a=function(e){for(;;){if(e instanceof w)return e;if("string"===typeof e){var n=e.indexOf("/");return 1>n?Me.b(null,e):Me.b(e.substring(0,n),e.substring(n+1,e.length))}if(e instanceof Ne)return e.bd;if(!(e instanceof z))throw Error("no conversion to symbol");e=e.da}},Me.b=function(e,n){return new w(e,n,null!=e?[q.a(e),"/",q.a(n)].join(""):n,null,null)},Me.F=2,g=Ne.prototype,g.toString=function(){return["#'",q.a(this.bd)].join("")},g.zb=function(){return this.m.o?this.m.o():this.m.call(null)},g.N=function(){return this.Kb},g.O=function(e,n){return new Ne(this.m,this.bd,n)},g.Y=function(e,n){return n instanceof Ne&&(e=this.bd,n=n.bd,A.b?A.b(e,n):A.call(null,e,n))},g.Z=function(){return Ke(this.bd)},g.mf=h,g.call=function(){function e(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,y){return e=(e=this).m.o?e.m.o():e.m.call(null),Oe.Be?Oe.Be(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,y):Oe.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,y)}function n(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b){return(e=(e=this).m.o?e.m.o():e.m.call(null)).rb?e.rb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b):e.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b)}function t(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v){return(e=(e=this).m.o?e.m.o():e.m.call(null)).hb?e.hb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v):e.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v)}function r(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w){return(e=(e=this).m.o?e.m.o():e.m.call(null)).qb?e.qb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w):e.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w)}function o(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m){return(e=(e=this).m.o?e.m.o():e.m.call(null)).gb?e.gb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m):e.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m)}function i(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g){return(e=(e=this).m.o?e.m.o():e.m.call(null)).pb?e.pb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g):e.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g)}function l(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_){return(e=(e=this).m.o?e.m.o():e.m.call(null)).fb?e.fb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_):e.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_)}function a(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h){return(e=(e=this).m.o?e.m.o():e.m.call(null)).ob?e.ob(n,t,r,o,i,l,a,u,s,c,d,f,p,h):e.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h)}function u(e,n,t,r,o,i,l,a,u,s,c,d,f,p){return(e=(e=this).m.o?e.m.o():e.m.call(null)).eb?e.eb(n,t,r,o,i,l,a,u,s,c,d,f,p):e.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p)}function s(e,n,t,r,o,i,l,a,u,s,c,d,f){return(e=(e=this).m.o?e.m.o():e.m.call(null)).nb?e.nb(n,t,r,o,i,l,a,u,s,c,d,f):e.call(null,n,t,r,o,i,l,a,u,s,c,d,f)}function c(e,n,t,r,o,i,l,a,u,s,c,d){return(e=(e=this).m.o?e.m.o():e.m.call(null)).cb?e.cb(n,t,r,o,i,l,a,u,s,c,d):e.call(null,n,t,r,o,i,l,a,u,s,c,d)}function d(e,n,t,r,o,i,l,a,u,s,c){return(e=(e=this).m.o?e.m.o():e.m.call(null)).mb?e.mb(n,t,r,o,i,l,a,u,s,c):e.call(null,n,t,r,o,i,l,a,u,s,c)}function f(e,n,t,r,o,i,l,a,u,s){return(e=(e=this).m.o?e.m.o():e.m.call(null)).Xa?e.Xa(n,t,r,o,i,l,a,u,s):e.call(null,n,t,r,o,i,l,a,u,s)}function p(e,n,t,r,o,i,l,a,u){return(e=(e=this).m.o?e.m.o():e.m.call(null)).Ga?e.Ga(n,t,r,o,i,l,a,u):e.call(null,n,t,r,o,i,l,a,u)}function h(e,n,t,r,o,i,l,a){return(e=(e=this).m.o?e.m.o():e.m.call(null)).ib?e.ib(n,t,r,o,i,l,a):e.call(null,n,t,r,o,i,l,a)}function _(e,n,t,r,o,i,l){return(e=(e=this).m.o?e.m.o():e.m.call(null)).la?e.la(n,t,r,o,i,l):e.call(null,n,t,r,o,i,l)}function g(e,n,t,r,o,i){return(e=(e=this).m.o?e.m.o():e.m.call(null)).K?e.K(n,t,r,o,i):e.call(null,n,t,r,o,i)}function m(e,n,t,r,o){return(e=(e=this).m.o?e.m.o():e.m.call(null)).A?e.A(n,t,r,o):e.call(null,n,t,r,o)}function w(e,n,t,r){return(e=(e=this).m.o?e.m.o():e.m.call(null)).c?e.c(n,t,r):e.call(null,n,t,r)}function v(e,n,t){return(e=(e=this).m.o?e.m.o():e.m.call(null)).b?e.b(n,t):e.call(null,n,t)}function b(e,n){return(e=(e=this).m.o?e.m.o():e.m.call(null)).a?e.a(n):e.call(null,n)}function y(e){return(e=(e=this).m.o?e.m.o():e.m.call(null)).o?e.o():e.call(null)}var k;return(k=function(k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F,L,B){switch(arguments.length){case 1:return y.call(this,k);case 2:return b.call(this,k,C);case 3:return v.call(this,k,C,I);case 4:return w.call(this,k,C,I,x);case 5:return m.call(this,k,C,I,x,E);case 6:return g.call(this,k,C,I,x,E,S);case 7:return _.call(this,k,C,I,x,E,S,D);case 8:return h.call(this,k,C,I,x,E,S,D,R);case 9:return p.call(this,k,C,I,x,E,S,D,R,O);case 10:return f.call(this,k,C,I,x,E,S,D,R,O,A);case 11:return d.call(this,k,C,I,x,E,S,D,R,O,A,T);case 12:return c.call(this,k,C,I,x,E,S,D,R,O,A,T,M);case 13:return s.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P);case 14:return u.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j);case 15:return a.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$);case 16:return l.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W);case 17:return i.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q);case 18:return o.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N);case 19:return r.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G);case 20:return t.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F);case 21:return n.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F,L);case 22:return e.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F,L,B)}throw Error("Invalid arity: "+(arguments.length-1))}).a=y,k.b=b,k.c=v,k.A=w,k.K=m,k.la=g,k.ib=_,k.Ga=h,k.Xa=p,k.mb=f,k.cb=d,k.nb=c,k.eb=s,k.ob=u,k.fb=a,k.pb=l,k.gb=i,k.qb=o,k.hb=r,k.rb=t,k.Sc=n,k.Be=e,k}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.o=function(){var e=this.m.o?this.m.o():this.m.call(null);return e.o?e.o():e.call(null)},g.a=function(e){var n=this.m.o?this.m.o():this.m.call(null);return n.a?n.a(e):n.call(null,e)},g.b=function(e,n){var t=this.m.o?this.m.o():this.m.call(null);return t.b?t.b(e,n):t.call(null,e,n)},g.c=function(e,n,t){var r=this.m.o?this.m.o():this.m.call(null);return r.c?r.c(e,n,t):r.call(null,e,n,t)},g.A=function(e,n,t,r){var o=this.m.o?this.m.o():this.m.call(null);return o.A?o.A(e,n,t,r):o.call(null,e,n,t,r)},g.K=function(e,n,t,r,o){var i=this.m.o?this.m.o():this.m.call(null);return i.K?i.K(e,n,t,r,o):i.call(null,e,n,t,r,o)},g.la=function(e,n,t,r,o,i){var l=this.m.o?this.m.o():this.m.call(null);return l.la?l.la(e,n,t,r,o,i):l.call(null,e,n,t,r,o,i)},g.ib=function(e,n,t,r,o,i,l){var a=this.m.o?this.m.o():this.m.call(null);return a.ib?a.ib(e,n,t,r,o,i,l):a.call(null,e,n,t,r,o,i,l)},g.Ga=function(e,n,t,r,o,i,l,a){var u=this.m.o?this.m.o():this.m.call(null);return u.Ga?u.Ga(e,n,t,r,o,i,l,a):u.call(null,e,n,t,r,o,i,l,a)},g.Xa=function(e,n,t,r,o,i,l,a,u){var s=this.m.o?this.m.o():this.m.call(null);return s.Xa?s.Xa(e,n,t,r,o,i,l,a,u):s.call(null,e,n,t,r,o,i,l,a,u)},g.mb=function(e,n,t,r,o,i,l,a,u,s){var c=this.m.o?this.m.o():this.m.call(null);return c.mb?c.mb(e,n,t,r,o,i,l,a,u,s):c.call(null,e,n,t,r,o,i,l,a,u,s)},g.cb=function(e,n,t,r,o,i,l,a,u,s,c){var d=this.m.o?this.m.o():this.m.call(null);return d.cb?d.cb(e,n,t,r,o,i,l,a,u,s,c):d.call(null,e,n,t,r,o,i,l,a,u,s,c)},g.nb=function(e,n,t,r,o,i,l,a,u,s,c,d){var f=this.m.o?this.m.o():this.m.call(null);return f.nb?f.nb(e,n,t,r,o,i,l,a,u,s,c,d):f.call(null,e,n,t,r,o,i,l,a,u,s,c,d)},g.eb=function(e,n,t,r,o,i,l,a,u,s,c,d,f){var p=this.m.o?this.m.o():this.m.call(null);return p.eb?p.eb(e,n,t,r,o,i,l,a,u,s,c,d,f):p.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f)},g.ob=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p){var h=this.m.o?this.m.o():this.m.call(null);return h.ob?h.ob(e,n,t,r,o,i,l,a,u,s,c,d,f,p):h.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p)},g.fb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h){var _=this.m.o?this.m.o():this.m.call(null);return _.fb?_.fb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h):_.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h)},g.pb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_){var g=this.m.o?this.m.o():this.m.call(null);return g.pb?g.pb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_):g.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_)},g.gb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g){var m=this.m.o?this.m.o():this.m.call(null);return m.gb?m.gb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g):m.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g)},g.qb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m){var w=this.m.o?this.m.o():this.m.call(null);return w.qb?w.qb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m):w.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m)},g.hb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w){var v=this.m.o?this.m.o():this.m.call(null);return v.hb?v.hb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w):v.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w)},g.rb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v){var b=this.m.o?this.m.o():this.m.call(null);return b.rb?b.rb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v):b.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v)},g.Sc=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b){var y=this.m.o?this.m.o():this.m.call(null);return Oe.Be?Oe.Be(y,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b):Oe.call(null,y,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b)};var A=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],new Qe(t.slice(2),0,null))}};function Te(e){this.ha=e}function Ue(e){return new Te(B(e))}function Lo(e,n){this.value=e,this.Se=n,this.Pb=null,this.h=8388672,this.I=0}function lo(e){var n=e.next();return p(n.done)?null:new Lo(n.value,e)}function Ve(e,n){return Fe(Ee(0,De(e)),n)}function We(e){var n=0,t=1;for(e=B(e);;){if(null==e)return Ve(t,n);n+=1,t=Ce(31,t)+Je(C(e))|0,e=D(e)}}A.a=function(){return!0},A.b=function(e,n){return null==e?null==n:e===n||Ud(e,n)},A.g=function(e,n,t){for(;;){if(!A.b(e,n))return!1;if(!D(t))return A.b(n,C(t));e=n,n=C(t),t=D(t)}},A.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)},A.F=2,Te.prototype.next=function(){if(null!=this.ha){var e=C(this.ha);return this.ha=D(this.ha),{value:e,done:!1}}return{value:null,done:!0}},Lo.prototype.$=function(){return this},Lo.prototype.Fa=function(){return this.value},Lo.prototype.Ha=function(){return null==this.Pb&&(this.Pb=lo.a?lo.a(this.Se):lo.call(null,this.Se)),this.Pb};var Xe=Ve(1,0);function Ye(e){var n=0,t=0;for(e=B(e);;){if(null==e)return Ve(t,n);n+=1,t=t+Je(C(e))|0,e=D(e)}}var Ze=Ve(0,0);function $e(e){return e+1}function af(e){this.m=e,this.h=32768,this.I=0}function bf(e){return new af(e)}function cf(e){return e instanceof af}function df(e){return cf(e)?ef.a?ef.a(e):ef.call(null,e):e}function ef(e){return t(e)}function ff(e,n){var r=e.X(null);if(0===r)return n.o?n.o():n.call(null);for(var o=e.W(null,0),i=1;;){if(!(i<r))return o;var l=e.W(null,i);if(cf(o=n.b?n.b(o,l):n.call(null,o,l)))return t(o);i+=1}}function gf(e,n,r){var o=e.X(null),i=r;for(r=0;;){if(!(r<o))return i;var l=e.W(null,r);if(cf(i=n.b?n.b(i,l):n.call(null,i,l)))return t(i);r+=1}}function hf(e,n){var r=e.length;if(0===e.length)return n.o?n.o():n.call(null);for(var o=e[0],i=1;;){if(!(i<r))return o;var l=e[i];if(cf(o=n.b?n.b(o,l):n.call(null,o,l)))return t(o);i+=1}}function jf(e,n,r){var o=e.length,i=r;for(r=0;;){if(!(r<o))return i;var l=e[r];if(cf(i=n.b?n.b(i,l):n.call(null,i,l)))return t(i);r+=1}}function kf(e,n,r,o){for(var i=e.length;;){if(!(o<i))return r;var l=e[o];if(cf(r=n.b?n.b(r,l):n.call(null,r,l)))return t(r);o+=1}}function lf(e){return null!=e?!!(2&e.h||h===e.bg)||!e.h&&Xc(jd,e):Xc(jd,e)}function mf(e){return null!=e?!!(16&e.h||h===e.pf)||!e.h&&Xc(pd,e):Xc(pd,e)}function nf(e,n,t){var r=F.a?F.a(e):F.call(null,e);if(t>=r)return-1;for(!(0<t)&&0>t&&(t=0>(t+=r)?0:t);;){if(!(t<r))return-1;if(A.b(pf?pf(e,t):qf.call(null,e,t),n))return t;t+=1}}function rf(e,n,t){var r=F.a?F.a(e):F.call(null,e);if(0===r)return-1;for(0<t?t=--r<t?r:t:t=0>t?r+t:t;;){if(!(0<=t))return-1;if(A.b(pf?pf(e,t):qf.call(null,e,t),n))return t;--t}}function sf(e,n){this.l=e,this.J=n}function Qe(e,n,t){this.l=e,this.J=n,this.H=t,this.h=166592766,this.I=139264}function G(e){return 0<e.length?new Qe(e,0,null):null}function tf(e,n,t){this.Zd=e,this.J=n,this.H=t,this.h=32374990,this.I=8192}function zf(e){return C(D(e))}function Af(e){return C(D(e))}function Bf(e){for(;;){var n=D(e);if(null==n)return C(e);e=n}}jd.null=!0,kd.null=function(){return 0},Date.prototype.Y=function(e,n){return n instanceof Date&&this.valueOf()===n.valueOf()},Date.prototype.Oc=h,Date.prototype.Wb=function(e,n){if(n instanceof Date)return Pb(this.valueOf(),n.valueOf());throw Error(["Cannot compare ",q.a(this)," to ",q.a(n)].join(""))},Ud.number=function(e,n){return e===n},hd.function=!0,Md.function=!0,Nd.function=function(){return null},Vd._=function(e){return hb(e)},af.prototype.zb=function(){return this.m},sf.prototype.ra=function(){return this.J<this.l.length},sf.prototype.next=function(){var e=this.l[this.J];return this.J+=1,e},g=Qe.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F.a?F.a(this):F.call(null,this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.W=function(e,n){if(0<=(e=n+this.J)&&e<this.l.length)return this.l[e];throw Error("Index out of bounds")},g.wa=function(e,n,t){return 0<=(e=n+this.J)&&e<this.l.length?this.l[e]:t},g.ua=function(){return new sf(this.l,this.J)},g.N=function(){return this.H},g.za=function(){return this.J+1<this.l.length?new Qe(this.l,this.J+1,null):null},g.X=function(){var e=this.l.length-this.J;return 0>e?0:e},g.Bc=function(){var e=this.X(null);return 0<e?new tf(this,e-1,null):null},g.Z=function(){return We(this)},g.Y=function(e,n){return uf.b?uf.b(this,n):uf.call(null,this,n)},g.pa=function(){return Se},g.Ba=function(e,n){return kf(this.l,n,this.l[this.J],this.J+1)},g.Ca=function(e,n,t){return kf(this.l,n,t,this.J)},g.Fa=function(){return this.l[this.J]},g.Ha=function(){return this.J+1<this.l.length?new Qe(this.l,this.J+1,null):Se},g.$=function(){return this.J<this.l.length?this:null},g.O=function(e,n){return n===this.H?this:new Qe(this.l,this.J,n)},g.ga=function(e,n){return vf.b?vf.b(n,this):vf.call(null,n,this)},Qe.prototype[ad]=function(){return Ue(this)},g=tf.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F.a?F.a(this):F.call(null,this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){return 0<this.J?new tf(this.Zd,this.J-1,null):null},g.X=function(){return this.J+1},g.Z=function(){return We(this)},g.Y=function(e,n){return uf.b?uf.b(this,n):uf.call(null,this,n)},g.pa=function(){return Se},g.Ba=function(e,n){return wf?wf(n,this):xf.call(null,n,this)},g.Ca=function(e,n,t){return yf?yf(n,t,this):xf.call(null,n,t,this)},g.Fa=function(){return qd(this.Zd,this.J)},g.Ha=function(){return 0<this.J?new tf(this.Zd,this.J-1,null):Se},g.$=function(){return this},g.O=function(e,n){return n===this.H?this:new tf(this.Zd,this.J,n)},g.ga=function(e,n){return vf.b?vf.b(n,this):vf.call(null,n,this)},tf.prototype[ad]=function(){return Ue(this)},Ud._=function(e,n){return e===n};var Cf=function e(n){switch(arguments.length){case 0:return e.o();case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],new Qe(t.slice(2),0,null))}};function Ef(e){return null==e?null:null!=e&&(4&e.h||h===e.dg)?e.pa(null):(null!=e?4&e.h||h===e.dg||!e.h&&Xc(ld,e):Xc(ld,e))?md(e):null}function F(e){if(null!=e)if(null!=e&&(2&e.h||h===e.bg))e=e.X(null);else if(Rc(e))e=e.length;else if("string"===typeof e)e=e.length;else if(null!=e&&(8388608&e.h||h===e.qf))e:{e=B(e);for(var n=0;;){if(lf(e)){e=n+kd(e);break e}e=D(e),n+=1}}else e=kd(e);else e=0;return e}function Ff(e,n,t){for(;;){if(null==e)return t;if(0===n)return B(e)?C(e):t;if(mf(e))return qd(e,n,t);if(!B(e))return t;e=D(e),--n}}function qf(e){switch(arguments.length){case 2:return pf(arguments[0],arguments[1]);case 3:return J(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}}function pf(e,n){if("number"!==typeof n)throw Error("Index argument to nth must be a number");if(null==e)return e;if(null!=e&&(16&e.h||h===e.pf))return e.W(null,n);if(Rc(e)){if(-1<n&&n<e.length)return e[0|n];throw Error("Index out of bounds")}if("string"===typeof e){if(-1<n&&n<e.length)return e.charAt(0|n);throw Error("Index out of bounds")}if(null!=e&&(64&e.h||h===e.D)||null!=e&&(16777216&e.h||h===e.Ee)){if(0>n)throw Error("Index out of bounds");e:for(;;){if(null==e)throw Error("Index out of bounds");if(0===n){if(B(e)){e=C(e);break e}throw Error("Index out of bounds")}if(mf(e)){e=qd(e,n);break e}if(!B(e))throw Error("Index out of bounds");e=D(e),--n}return e}if(Xc(pd,e))return qd(e,n);throw Error(["nth not supported on this type ",q.a($c(Yc(e)))].join(""))}function J(e,n,t){if("number"!==typeof n)throw Error("Index argument to nth must be a number.");if(null==e)return t;if(null!=e&&(16&e.h||h===e.pf))return e.wa(null,n,t);if(Rc(e))return-1<n&&n<e.length?e[0|n]:t;if("string"===typeof e)return-1<n&&n<e.length?e.charAt(0|n):t;if(null!=e&&(64&e.h||h===e.D)||null!=e&&(16777216&e.h||h===e.Ee))return 0>n?t:Ff(e,n,t);if(Xc(pd,e))return qd(e,n,t);throw Error(["nth not supported on this type ",q.a($c(Yc(e)))].join(""))}Cf.o=function(){return I},Cf.a=function(e){return e},Cf.b=function(e,n){return null!=e?od(e,n):new Df(null,n,null,1,null)},Cf.g=function(e,n,t){for(;;){if(!p(t))return Cf.b(e,n);e=Cf.b(e,n),n=C(t),t=D(t)}},Cf.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)},Cf.F=2;var x=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};x.b=function(e,n){return null==e?null:null!=e&&(256&e.h||h===e.hg)?e.ia(null,n):Rc(e)?null!=n&&n<e.length?e[0|n]:null:"string"===typeof e?null!=n&&-1<n&&n<e.length?e.charAt(0|n):null:Xc(wd,e)?xd(e,n):null},x.c=function(e,n,t){return null!=e?null!=e&&(256&e.h||h===e.hg)?e.M(null,n,t):Rc(e)?null!=n&&-1<n&&n<e.length?e[0|n]:t:"string"===typeof e?null!=n&&-1<n&&n<e.length?e.charAt(0|n):t:Xc(wd,e)?xd(e,n,t):t:t},x.F=3;var K=function e(n){switch(arguments.length){case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],arguments[2],new Qe(t.slice(3),0,null))}};K.c=function(e,n,t){return null!=e&&(512&e.h||h===e.ag)?e.fa(null,n,t):null!=e?zd(e,n,t):Gf([n,t])},K.g=function(e,n,t,r){for(;;){if(e=K.c(e,n,t),!p(r))return e;n=C(r),t=zf(r),r=D(D(r))}},K.G=function(e){var n=C(e),t=D(e);e=C(t);var r=D(t);return t=C(r),r=D(r),this.g(n,e,t,r)},K.F=3;var Hf=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],new Qe(t.slice(2),0,null))}};function If(e){var n=fb(e);return n||(null!=e?h===e.mf||!e.Ke&&Xc(hd,e):Xc(hd,e))}function Jf(e,n){this.P=e,this.H=n,this.h=393217,this.I=0}function Kf(e,n){return fb(e)?new Jf(e,n):null==e?null:Pd(e,n)}function Lf(e){return null!=e&&(null!=e?131072&e.h||h===e.xd||!e.h&&Xc(Md,e):Xc(Md,e))?Nd(e):null}function Mf(e){return null==e?null:Hd(e)}function Nf(e){return null==e?null:Id(e)}Hf.a=function(e){return e},Hf.b=function(e,n){return null==e?null:Cd(e,n)},Hf.g=function(e,n,t){for(;;){if(null==e)return null;if(e=Hf.b(e,n),!p(t))return e;n=C(t),t=D(t)}},Hf.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)},Hf.F=2,g=Jf.prototype,g.N=function(){return this.H},g.O=function(e,n){return new Jf(this.P,n)},g.mf=h,g.call=function(){function e(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,y){return e=this,Oe.Be?Oe.Be(e.P,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,y):Oe.call(null,e.P,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,y)}function n(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b){return(e=this).P.rb?e.P.rb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b):e.P.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b)}function t(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v){return(e=this).P.hb?e.P.hb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v):e.P.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v)}function r(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w){return(e=this).P.qb?e.P.qb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w):e.P.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w)}function o(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m){return(e=this).P.gb?e.P.gb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m):e.P.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m)}function i(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g){return(e=this).P.pb?e.P.pb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g):e.P.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g)}function l(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_){return(e=this).P.fb?e.P.fb(n,t,r,o,i,l,a,u,s,c,d,f,p,h,_):e.P.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_)}function a(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h){return(e=this).P.ob?e.P.ob(n,t,r,o,i,l,a,u,s,c,d,f,p,h):e.P.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p,h)}function u(e,n,t,r,o,i,l,a,u,s,c,d,f,p){return(e=this).P.eb?e.P.eb(n,t,r,o,i,l,a,u,s,c,d,f,p):e.P.call(null,n,t,r,o,i,l,a,u,s,c,d,f,p)}function s(e,n,t,r,o,i,l,a,u,s,c,d,f){return(e=this).P.nb?e.P.nb(n,t,r,o,i,l,a,u,s,c,d,f):e.P.call(null,n,t,r,o,i,l,a,u,s,c,d,f)}function c(e,n,t,r,o,i,l,a,u,s,c,d){return(e=this).P.cb?e.P.cb(n,t,r,o,i,l,a,u,s,c,d):e.P.call(null,n,t,r,o,i,l,a,u,s,c,d)}function d(e,n,t,r,o,i,l,a,u,s,c){return(e=this).P.mb?e.P.mb(n,t,r,o,i,l,a,u,s,c):e.P.call(null,n,t,r,o,i,l,a,u,s,c)}function f(e,n,t,r,o,i,l,a,u,s){return(e=this).P.Xa?e.P.Xa(n,t,r,o,i,l,a,u,s):e.P.call(null,n,t,r,o,i,l,a,u,s)}function p(e,n,t,r,o,i,l,a,u){return(e=this).P.Ga?e.P.Ga(n,t,r,o,i,l,a,u):e.P.call(null,n,t,r,o,i,l,a,u)}function h(e,n,t,r,o,i,l,a){return(e=this).P.ib?e.P.ib(n,t,r,o,i,l,a):e.P.call(null,n,t,r,o,i,l,a)}function _(e,n,t,r,o,i,l){return(e=this).P.la?e.P.la(n,t,r,o,i,l):e.P.call(null,n,t,r,o,i,l)}function g(e,n,t,r,o,i){return(e=this).P.K?e.P.K(n,t,r,o,i):e.P.call(null,n,t,r,o,i)}function m(e,n,t,r,o){return(e=this).P.A?e.P.A(n,t,r,o):e.P.call(null,n,t,r,o)}function w(e,n,t,r){return(e=this).P.c?e.P.c(n,t,r):e.P.call(null,n,t,r)}function v(e,n,t){return(e=this).P.b?e.P.b(n,t):e.P.call(null,n,t)}function b(e,n){return(e=this).P.a?e.P.a(n):e.P.call(null,n)}function y(e){return(e=this).P.o?e.P.o():e.P.call(null)}var k;return(k=function(k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F,L,B){switch(arguments.length){case 1:return y.call(this,k);case 2:return b.call(this,k,C);case 3:return v.call(this,k,C,I);case 4:return w.call(this,k,C,I,x);case 5:return m.call(this,k,C,I,x,E);case 6:return g.call(this,k,C,I,x,E,S);case 7:return _.call(this,k,C,I,x,E,S,D);case 8:return h.call(this,k,C,I,x,E,S,D,R);case 9:return p.call(this,k,C,I,x,E,S,D,R,O);case 10:return f.call(this,k,C,I,x,E,S,D,R,O,A);case 11:return d.call(this,k,C,I,x,E,S,D,R,O,A,T);case 12:return c.call(this,k,C,I,x,E,S,D,R,O,A,T,M);case 13:return s.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P);case 14:return u.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j);case 15:return a.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$);case 16:return l.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W);case 17:return i.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q);case 18:return o.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N);case 19:return r.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G);case 20:return t.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F);case 21:return n.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F,L);case 22:return e.call(this,k,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F,L,B)}throw Error("Invalid arity: "+(arguments.length-1))}).a=y,k.b=b,k.c=v,k.A=w,k.K=m,k.la=g,k.ib=_,k.Ga=h,k.Xa=p,k.mb=f,k.cb=d,k.nb=c,k.eb=s,k.ob=u,k.fb=a,k.pb=l,k.gb=i,k.qb=o,k.hb=r,k.rb=t,k.Sc=n,k.Be=e,k}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.o=function(){return this.P.o?this.P.o():this.P.call(null)},g.a=function(e){return this.P.a?this.P.a(e):this.P.call(null,e)},g.b=function(e,n){return this.P.b?this.P.b(e,n):this.P.call(null,e,n)},g.c=function(e,n,t){return this.P.c?this.P.c(e,n,t):this.P.call(null,e,n,t)},g.A=function(e,n,t,r){return this.P.A?this.P.A(e,n,t,r):this.P.call(null,e,n,t,r)},g.K=function(e,n,t,r,o){return this.P.K?this.P.K(e,n,t,r,o):this.P.call(null,e,n,t,r,o)},g.la=function(e,n,t,r,o,i){return this.P.la?this.P.la(e,n,t,r,o,i):this.P.call(null,e,n,t,r,o,i)},g.ib=function(e,n,t,r,o,i,l){return this.P.ib?this.P.ib(e,n,t,r,o,i,l):this.P.call(null,e,n,t,r,o,i,l)},g.Ga=function(e,n,t,r,o,i,l,a){return this.P.Ga?this.P.Ga(e,n,t,r,o,i,l,a):this.P.call(null,e,n,t,r,o,i,l,a)},g.Xa=function(e,n,t,r,o,i,l,a,u){return this.P.Xa?this.P.Xa(e,n,t,r,o,i,l,a,u):this.P.call(null,e,n,t,r,o,i,l,a,u)},g.mb=function(e,n,t,r,o,i,l,a,u,s){return this.P.mb?this.P.mb(e,n,t,r,o,i,l,a,u,s):this.P.call(null,e,n,t,r,o,i,l,a,u,s)},g.cb=function(e,n,t,r,o,i,l,a,u,s,c){return this.P.cb?this.P.cb(e,n,t,r,o,i,l,a,u,s,c):this.P.call(null,e,n,t,r,o,i,l,a,u,s,c)},g.nb=function(e,n,t,r,o,i,l,a,u,s,c,d){return this.P.nb?this.P.nb(e,n,t,r,o,i,l,a,u,s,c,d):this.P.call(null,e,n,t,r,o,i,l,a,u,s,c,d)},g.eb=function(e,n,t,r,o,i,l,a,u,s,c,d,f){return this.P.eb?this.P.eb(e,n,t,r,o,i,l,a,u,s,c,d,f):this.P.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f)},g.ob=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p){return this.P.ob?this.P.ob(e,n,t,r,o,i,l,a,u,s,c,d,f,p):this.P.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p)},g.fb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h){return this.P.fb?this.P.fb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h):this.P.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h)},g.pb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_){return this.P.pb?this.P.pb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_):this.P.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_)},g.gb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g){return this.P.gb?this.P.gb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g):this.P.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g)},g.qb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m){return this.P.qb?this.P.qb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m):this.P.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m)},g.hb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w){return this.P.hb?this.P.hb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w):this.P.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w)},g.rb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v){return this.P.rb?this.P.rb(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v):this.P.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v)},g.Sc=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b){return Oe.Be?Oe.Be(this.P,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b):Oe.call(null,this.P,e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b)};var Of=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],new Qe(t.slice(2),0,null))}};function Pf(e){return null==e||Tc(B(e))}function Qf(e){return null!=e&&(null!=e?!!(8&e.h||h===e.Lh)||!e.h&&Xc(nd,e):Xc(nd,e))}function Rf(e){return null!=e&&(null!=e?!!(4096&e.h||h===e.Wh)||!e.h&&Xc(Fd,e):Xc(Fd,e))}function Sf(e){return null!=e?!!(512&e.h||h===e.ag)||!e.h&&Xc(yd,e):Xc(yd,e)}function Tf(e){return null!=e?!!(16777216&e.h||h===e.Ee)||!e.h&&Xc(Yd,e):Xc(Yd,e)}function M(e){return null!=e&&(null!=e?!!(1024&e.h||h===e.Sh)||!e.h&&Xc(Bd,e):Xc(Bd,e))}function Uf(e){return null!=e?!!(67108864&e.h||h===e.kg)||!e.h&&Xc($d,e):Xc($d,e)}function Vf(e){return null!=e?!!(16384&e.h||h===e.Xh)||!e.h&&Xc(Jd,e):Xc(Jd,e)}function Wf(e){return null!=e&&!!(512&e.I||h===e.Kh)}function Xf(e,n,t,r,o){for(;0!==o;)t[r]=e[n],r+=1,--o,n+=1}Of.a=function(e){return e},Of.b=function(e,n){return null==e?null:Gd(e,n)},Of.g=function(e,n,t){for(;;){if(null==e)return null;if(e=Of.b(e,n),!p(t))return e;n=C(t),t=D(t)}},Of.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)},Of.F=2;var Yf={};function Zf(e){return!0===e||!1===e}function $f(e){return null!=e&&(null!=e?!!(64&e.h||h===e.D)||!e.h&&Xc(rd,e):Xc(rd,e))}function ag(e){return null!=e&&!1!==e}function bg(e){return"number"===typeof e&&!isNaN(e)&&1/0!==e&&parseFloat(e)===parseInt(e,10)}function cg(e){return bg(e)||e instanceof xb}function N(e,n){return x.c(e,n,Yf)!==Yf}function dg(e,n){if(e===n)return 0;if(null==e)return-1;if(null==n)return 1;if("number"===typeof e){if("number"===typeof n)return Pb(e,n);throw Error(["Cannot compare ",q.a(e)," to ",q.a(n)].join(""))}if(null!=e?2048&e.I||h===e.Oc||!e.I&&Xc(oe,e):Xc(oe,e))return pe(e,n);if("string"!==typeof e&&!Rc(e)&&!0!==e&&!1!==e||Yc(e)!==Yc(n))throw Error(["Cannot compare ",q.a(e)," to ",q.a(n)].join(""));return Pb(e,n)}function eg(e,n){var t=F(e),r=F(n);if(t<r)e=-1;else if(t>r)e=1;else if(0===t)e=0;else e:for(r=0;;){var o=dg(pf(e,r),pf(n,r));if(!(0===o&&r+1<t)){e=o;break e}r+=1}return e}function fg(e){return A.b(e,dg)?dg:function(n,t){var r=e.b?e.b(n,t):e.call(null,n,t);return"number"===typeof r?r:p(r)?-1:p(e.b?e.b(t,n):e.call(null,t,n))?1:0}}function gg(e){var n=Ub(cd);return B(n)?(Qb(n=hg.a?hg.a(n):hg.call(null,n),fg(e)),B(n)):Se}function xf(e){switch(arguments.length){case 2:return wf(arguments[0],arguments[1]);case 3:return yf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}}function wf(e,n){var t=B(n);return t?(n=C(t),t=D(t),gd.c?gd.c(e,n,t):gd.call(null,e,n,t)):e.o?e.o():e.call(null)}function yf(e,n,r){for(r=B(r);;){if(!r)return n;var o=C(r);if(cf(n=e.b?e.b(n,o):e.call(null,n,o)))return t(n);r=D(r)}}function ig(e,n){if(!p((e=ze(e)).ra()))return n.o?n.o():n.call(null);for(var r=e.next();;){if(!e.ra())return r;var o=e.next();if(cf(r=n.b?n.b(r,o):n.call(null,r,o)))return t(r)}}function jg(e,n,r){for(e=ze(e);;){if(!e.ra())return r;var o=e.next();if(cf(r=n.b?n.b(r,o):n.call(null,r,o)))return t(r)}}var gd=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function kg(e,n,t){return null!=t?Td(t,e,n):n}function lg(e){return e}function mg(e,n){return function(){function t(n,t){return e.b?e.b(n,t):e.call(null,n,t)}function r(e){return n.a?n.a(e):n.call(null,e)}function o(){return e.o?e.o():e.call(null)}var i;return(i=function(e,n){switch(arguments.length){case 0:return o.call(this);case 1:return r.call(this,e);case 2:return t.call(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).o=o,i.a=r,i.b=t,i}()}function ng(e,n,t){return og(e,n,n.o?n.o():n.call(null),t)}function og(e,n,t,r){return e=e.a?e.a(n):e.call(null,n),t=gd.c(e,t,r),e.a?e.a(t):e.call(null,t)}gd.b=function(e,n){return null!=n&&(524288&n.h||h===n.lg)?n.Ba(null,e):Rc(n)||"string"===typeof n?hf(n,e):Xc(Qd,n)?Rd(n,e):Pe(n)?ig(n,e):wf(e,n)},gd.c=function(e,n,t){return null!=t&&(524288&t.h||h===t.lg)?t.Ca(null,e,n):Rc(t)||"string"===typeof t?jf(t,e,n):Xc(Qd,t)?Rd(t,e,n):Pe(t)?jg(t,e,n):yf(e,n,t)},gd.F=3;var pg=function e(n){switch(arguments.length){case 0:return e.o();case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],new Qe(t.slice(2),0,null))}};pg.o=function(){return 0},pg.a=function(e){return e},pg.b=function(e,n){return e+n},pg.g=function(e,n,t){return gd.c(pg,e+n,t)},pg.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)},pg.F=2;var qg=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],new Qe(t.slice(2),0,null))}};function rg(e){if("number"===typeof e)return String.fromCharCode(e);if("string"===typeof e&&1===e.length)return e;throw Error("Argument to char must be a character or number")}function sg(e){return 0<=e?Math.floor(e):Math.ceil(e)}function tg(e,n){return sg((e-e%n)/n)}function ug(e,n){return e-n*tg(e,n)}function vg(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>24}function wg(e){switch(arguments.length){case 1:return!0;case 2:return Ud(arguments[0],arguments[1]);default:for(var n=[],t=arguments.length,r=0;r<t;)n.push(arguments[r]),r+=1;e:for(t=arguments[0],r=arguments[1],n=new Qe(n.slice(2),0,null);;){if(t!==r){t=!1;break e}if(!D(n)){t=r===C(n);break e}t=r,r=C(n),n=D(n)}return t}}function xg(e,n){return Ud(e,n)}function yg(e){return 0<e}qg.a=function(){return!0},qg.b=function(e,n){return e>n},qg.g=function(e,n,t){for(;;){if(!(e>n))return!1;if(!D(t))return n>C(t);e=n,n=C(t),t=D(t)}},qg.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)},qg.F=2;var q=function e(n){switch(arguments.length){case 0:return e.o();case 1:return e.a(arguments[0]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],new Qe(t.slice(1),0,null))}};function zg(e){switch(arguments.length){case 2:return arguments[0].substring(arguments[1]);case 3:return arguments[0].substring(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}}function Ag(e,n){return e.substring(n)}function Bg(e,n,t){return e.substring(n,t)}function uf(e,n){if(Tf(n))if(lf(e)&&lf(n)&&F(e)!==F(n))e=!1;else e:for(e=B(e),n=B(n);;){if(null==e){e=null==n;break e}if(null==n||!A.b(C(e),C(n))){e=!1;break e}e=D(e),n=D(n)}else e=null;return ag(e)}function Df(e,n,t,r,o){this.H=e,this.first=n,this.ab=t,this.count=r,this.B=o,this.h=65937646,this.I=8192}function Cg(e){return null!=e?!!(33554432&e.h||h===e.Rh)||!e.h&&Xc(Zd,e):Xc(Zd,e)}function Dg(e){this.H=e,this.h=65937614,this.I=8192}q.o=function(){return""},q.a=function(e){return null==e?"":[e].join("")},q.g=function(e,n){for(e=new zc(q.a(e));;){if(!p(n))return e.toString();e=e.append(q.a(C(n))),n=D(n)}},q.G=function(e){var n=C(e);return e=D(e),this.g(n,e)},q.F=1,g=Df.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,this.count)}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){return 1===this.count?null:this.ab},g.X=function(){return this.count},g.Xb=function(){return this.first},g.Yb=function(){return this.Ha(null)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Pd(Se,this.H)},g.Ba=function(e,n){return wf(n,this)},g.Ca=function(e,n,t){return yf(n,t,this)},g.Fa=function(){return this.first},g.Ha=function(){return 1===this.count?Se:this.ab},g.$=function(){return this},g.O=function(e,n){return n===this.H?this:new Df(n,this.first,this.ab,this.count,this.B)},g.ga=function(e,n){return new Df(this.H,n,this,this.count+1,null)},Df.prototype[ad]=function(){return Ue(this)},g=Dg.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){return null},g.X=function(){return 0},g.Xb=function(){return null},g.Yb=function(){throw Error("Can't pop empty list")},g.Z=function(){return Xe},g.Y=function(e,n){return!(!Cg(n)&&!Tf(n))&&null==B(n)},g.pa=function(){return this},g.Ba=function(e,n){return wf(n,this)},g.Ca=function(e,n,t){return yf(n,t,this)},g.Fa=function(){return null},g.Ha=function(){return Se},g.$=function(){return null},g.O=function(e,n){return n===this.H?this:new Dg(n)},g.ga=function(e,n){return new Df(this.H,n,null,1,null)};var Se=new Dg(null);function Eg(e){return(null!=e?134217728&e.h||h===e.Vh||!e.h&&Xc(ae,e):Xc(ae,e))?(e=be(e))?e:Se:gd.c(Cf,Se,e)}Dg.prototype[ad]=function(){return Ue(this)};var O=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};function Fg(e,n,t,r){this.H=e,this.first=n,this.ab=t,this.B=r,this.h=65929452,this.I=8192}function vf(e,n){return null==n?new Df(null,e,null,1,null):null!=n&&(64&n.h||h===n.D)?new Fg(null,e,n,null):new Fg(null,e,B(n),null)}function Gg(e,n){if(e.da===n.da)return 0;if(p(!!Tc(e.vb)&&n.vb))return-1;if(p(e.vb)){if(Tc(n.vb))return 1;var t=Pb(e.vb,n.vb);return 0===t?Pb(e.name,n.name):t}return Pb(e.name,n.name)}function z(e,n,t,r){this.vb=e,this.name=n,this.da=t,this.ed=r,this.h=2153775105,this.I=4096}function Hg(e){return e instanceof z}function P(e,n){return e===n||e instanceof z&&n instanceof z&&e.da===n.da}function Ig(e){if(null!=e&&(4096&e.I||h===e.jg))return e.zd(null);throw Error(["Doesn't support namespace: ",q.a(e)].join(""))}function Jg(e){return e instanceof z||e instanceof w}O.g=function(e){if(e instanceof Qe&&0===e.J)var n=e.l;else e:for(n=[];null!=e;)n.push(sd(e)),e=vd(e);e=n.length;for(var t=Se;;){if(!(0<e))return t;var r=e-1;t=od(t,n[e-1]),e=r}},O.F=0,O.G=function(e){return this.g(B(e))},g=Fg.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){return null==this.ab?null:B(this.ab)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Se},g.Ba=function(e,n){return wf(n,this)},g.Ca=function(e,n,t){return yf(n,t,this)},g.Fa=function(){return this.first},g.Ha=function(){return null==this.ab?Se:this.ab},g.$=function(){return this},g.O=function(e,n){return n===this.H?this:new Fg(n,this.first,this.ab,this.B)},g.ga=function(e,n){return new Fg(null,n,this,null)},Fg.prototype[ad]=function(){return Ue(this)},g=z.prototype,g.toString=function(){return[":",q.a(this.da)].join("")},g.Y=function(e,n){return n instanceof z&&this.da===n.da},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return x.b(n,this);case 3:return x.c(n,this,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return x.b(n,this)},e.c=function(e,n,t){return x.c(n,this,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return x.b(e,this)},g.b=function(e,n){return x.c(e,this,n)},g.Z=function(){var e=this.ed;return null!=e?e:this.ed=e=Ke(this)+2654435769|0},g.yd=function(){return this.name},g.zd=function(){return this.vb},g.S=function(e,n){return ce(n,[":",q.a(this.da)].join(""))};var Kg=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function Mg(e,n,t,r){this.H=e,this.od=n,this.ha=t,this.B=r,this.h=32374988,this.I=1}function Ng(e){return null!=e.od&&(e.ha=e.od.o?e.od.o():e.od.call(null),e.od=null),e.ha}function Og(e){this.ca=e,this.end=0,this.h=2,this.I=0}function Qg(e){return new Og(Array(e))}function Pg(e,n,t){this.l=e,this.$a=n,this.end=t,this.h=524306,this.I=0}function Rg(e,n,t,r){this.Bb=e,this.lc=n,this.H=t,this.B=r,this.h=31850732,this.I=1536}function Sg(e,n){return 0===kd(e)?n:new Rg(e,n,null,null)}function Tg(e,n){e.add(n)}function Ug(e){return e.Bb()}function hg(e){var n=[];for(e=B(e);;){if(null==e)return n;n.push(C(e)),e=D(e)}}function Vg(e,n){if(lf(n))return F(n);var t=0;for(n=B(n);;){if(!(null!=n&&t<e))return t;t+=1,n=D(n)}}Kg.a=function(e){if(e instanceof z)return e;if(e instanceof w)return new z(Ig(e),Lg.a?Lg.a(e):Lg.call(null,e),e.wc,null);if(A.b("/",e))return new z(null,e,e,null);if("string"===typeof e){var n=e.split("/");return 2===n.length?new z(n[0],n[1],e,null):new z(null,n[0],e,null)}return null},Kg.b=function(e,n){return new z(e=e instanceof z||e instanceof w?Lg.a?Lg.a(e):Lg.call(null,e):e,n=n instanceof z||n instanceof w?Lg.a?Lg.a(n):Lg.call(null,n):n,[p(e)?[q.a(e),"/"].join(""):null,q.a(n)].join(""),null)},Kg.F=2,g=Mg.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){return this.$(null),null==this.ha?null:D(this.ha)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Pd(Se,this.H)},g.Bd=function(){return Tc(this.od)},g.Ba=function(e,n){return wf(n,this)},g.Ca=function(e,n,t){return yf(n,t,this)},g.Fa=function(){return this.$(null),null==this.ha?null:C(this.ha)},g.Ha=function(){return this.$(null),null!=this.ha?Re(this.ha):Se},g.$=function(){if(Ng(this),null==this.ha)return null;for(var e=this.ha;;){if(!(e instanceof Mg))return this.ha=e,B(this.ha);e=Ng(e)}},g.O=function(e,n){var t=this;return n===this.H?t:new Mg(n,(function(){return t.$(null)}),null,this.B)},g.ga=function(e,n){return vf(n,this)},Mg.prototype[ad]=function(){return Ue(this)},Og.prototype.add=function(e){return this.ca[this.end]=e,this.end+=1},Og.prototype.Bb=function(){var e=new Pg(this.ca,0,this.end);return this.ca=null,e},Og.prototype.X=function(){return this.end},g=Pg.prototype,g.X=function(){return this.end-this.$a},g.W=function(e,n){return this.l[this.$a+n]},g.wa=function(e,n,t){return 0<=n&&n<this.end-this.$a?this.l[this.$a+n]:t},g.ze=function(){if(this.$a===this.end)throw Error("-drop-first of empty chunk");return new Pg(this.l,this.$a+1,this.end)},g.Ba=function(e,n){return kf(this.l,n,this.l[this.$a],this.$a+1)},g.Ca=function(e,n,t){return kf(this.l,n,t,this.$a)},g=Rg.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){return 1<kd(this.Bb)?new Rg(qe(this.Bb),this.lc,null,null):null==this.lc?null:Xd(this.lc)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Se},g.Fa=function(){return qd(this.Bb,0)},g.Ha=function(){return 1<kd(this.Bb)?new Rg(qe(this.Bb),this.lc,null,null):null==this.lc?Se:this.lc},g.$=function(){return this},g.$d=function(){return this.Bb},g.gd=function(){return null==this.lc?Se:this.lc},g.O=function(e,n){return n===this.H?this:new Rg(this.Bb,this.lc,n,this.B)},g.ga=function(e,n){return vf(n,this)},g.Ae=function(){return null==this.lc?null:this.lc},Rg.prototype[ad]=function(){return Ue(this)};var Wg=function e(n){if(null==n)return null;var t=D(n);return null==t?B(C(n)):vf(C(n),e.a?e.a(t):e.call(null,t))},Xg=function e(n){switch(arguments.length){case 0:return e.o();case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],new Qe(t.slice(2),0,null))}};Xg.o=function(){return new Mg(null,(function(){return null}),null,null)},Xg.a=function(e){return new Mg(null,(function(){return e}),null,null)},Xg.b=function(e,n){return new Mg(null,(function(){var t=B(e);return t?Wf(t)?Sg(re(t),Xg.b(se(t),n)):vf(C(t),Xg.b(Re(t),n)):n}),null,null)},Xg.g=function(e,n,t){return function e(n,t){return new Mg(null,(function(){var r=B(n);return r?Wf(r)?Sg(re(r),e(se(r),t)):vf(C(r),e(Re(r),t)):p(t)?e(C(t),D(t)):null}),null,null)}(Xg.b(e,n),t)},Xg.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)},Xg.F=2;var Yg=function e(n){switch(arguments.length){case 0:return e.o();case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],new Qe(t.slice(2),0,null))}};function Zg(e,n,t){return me(e,n,t)}function $g(e,n,t){var r=B(t);if(0===n)return e.o?e.o():e.call(null);t=sd(r);var o=td(r);if(1===n)return e.a?e.a(t):e.call(null,t);r=sd(o);var i=td(o);if(2===n)return e.b?e.b(t,r):e.call(null,t,r);o=sd(i);var l=td(i);if(3===n)return e.c?e.c(t,r,o):e.call(null,t,r,o);i=sd(l);var a=td(l);if(4===n)return e.A?e.A(t,r,o,i):e.call(null,t,r,o,i);l=sd(a);var u=td(a);if(5===n)return e.K?e.K(t,r,o,i,l):e.call(null,t,r,o,i,l);a=sd(u);var s=td(u);if(6===n)return e.la?e.la(t,r,o,i,l,a):e.call(null,t,r,o,i,l,a);u=sd(s);var c=td(s);if(7===n)return e.ib?e.ib(t,r,o,i,l,a,u):e.call(null,t,r,o,i,l,a,u);s=sd(c);var d=td(c);if(8===n)return e.Ga?e.Ga(t,r,o,i,l,a,u,s):e.call(null,t,r,o,i,l,a,u,s);c=sd(d);var f=td(d);if(9===n)return e.Xa?e.Xa(t,r,o,i,l,a,u,s,c):e.call(null,t,r,o,i,l,a,u,s,c);d=sd(f);var p=td(f);if(10===n)return e.mb?e.mb(t,r,o,i,l,a,u,s,c,d):e.call(null,t,r,o,i,l,a,u,s,c,d);f=sd(p);var h=td(p);if(11===n)return e.cb?e.cb(t,r,o,i,l,a,u,s,c,d,f):e.call(null,t,r,o,i,l,a,u,s,c,d,f);p=sd(h);var _=td(h);if(12===n)return e.nb?e.nb(t,r,o,i,l,a,u,s,c,d,f,p):e.call(null,t,r,o,i,l,a,u,s,c,d,f,p);h=sd(_);var g=td(_);if(13===n)return e.eb?e.eb(t,r,o,i,l,a,u,s,c,d,f,p,h):e.call(null,t,r,o,i,l,a,u,s,c,d,f,p,h);_=sd(g);var m=td(g);if(14===n)return e.ob?e.ob(t,r,o,i,l,a,u,s,c,d,f,p,h,_):e.call(null,t,r,o,i,l,a,u,s,c,d,f,p,h,_);g=sd(m);var w=td(m);if(15===n)return e.fb?e.fb(t,r,o,i,l,a,u,s,c,d,f,p,h,_,g):e.call(null,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g);m=sd(w);var v=td(w);if(16===n)return e.pb?e.pb(t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m):e.call(null,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m);w=sd(v);var b=td(v);if(17===n)return e.gb?e.gb(t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w):e.call(null,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w);v=sd(b);var y=td(b);if(18===n)return e.qb?e.qb(t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v):e.call(null,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v);if(b=sd(y),y=td(y),19===n)return e.hb?e.hb(t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b):e.call(null,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b);var k=sd(y);if(td(y),20===n)return e.rb?e.rb(t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,k):e.call(null,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,k);throw Error("Only up to 20 arguments supported on functions")}function ah(e){return null!=e&&(128&e.h||h===e.Ad)?e.za(null):B(Re(e))}function bh(e,n,t){return null==t?e.a?e.a(n):e.call(e,n):ch(e,n,sd(t),ah(t))}function ch(e,n,t,r){return null==r?e.b?e.b(n,t):e.call(e,n,t):dh(e,n,t,sd(r),ah(r))}function dh(e,n,t,r,o){return null==o?e.c?e.c(n,t,r):e.call(e,n,t,r):eh(e,n,t,r,sd(o),ah(o))}function eh(e,n,t,r,o,i){if(null==i)return e.A?e.A(n,t,r,o):e.call(e,n,t,r,o);var l=sd(i),a=D(i);if(null==a)return e.K?e.K(n,t,r,o,l):e.call(e,n,t,r,o,l);i=sd(a);var u=D(a);if(null==u)return e.la?e.la(n,t,r,o,l,i):e.call(e,n,t,r,o,l,i);a=sd(u);var s=D(u);if(null==s)return e.ib?e.ib(n,t,r,o,l,i,a):e.call(e,n,t,r,o,l,i,a);u=sd(s);var c=D(s);if(null==c)return e.Ga?e.Ga(n,t,r,o,l,i,a,u):e.call(e,n,t,r,o,l,i,a,u);s=sd(c);var d=D(c);if(null==d)return e.Xa?e.Xa(n,t,r,o,l,i,a,u,s):e.call(e,n,t,r,o,l,i,a,u,s);c=sd(d);var f=D(d);if(null==f)return e.mb?e.mb(n,t,r,o,l,i,a,u,s,c):e.call(e,n,t,r,o,l,i,a,u,s,c);d=sd(f);var p=D(f);if(null==p)return e.cb?e.cb(n,t,r,o,l,i,a,u,s,c,d):e.call(e,n,t,r,o,l,i,a,u,s,c,d);f=sd(p);var h=D(p);if(null==h)return e.nb?e.nb(n,t,r,o,l,i,a,u,s,c,d,f):e.call(e,n,t,r,o,l,i,a,u,s,c,d,f);p=sd(h);var _=D(h);if(null==_)return e.eb?e.eb(n,t,r,o,l,i,a,u,s,c,d,f,p):e.call(e,n,t,r,o,l,i,a,u,s,c,d,f,p);h=sd(_);var g=D(_);if(null==g)return e.ob?e.ob(n,t,r,o,l,i,a,u,s,c,d,f,p,h):e.call(e,n,t,r,o,l,i,a,u,s,c,d,f,p,h);_=sd(g);var m=D(g);if(null==m)return e.fb?e.fb(n,t,r,o,l,i,a,u,s,c,d,f,p,h,_):e.call(e,n,t,r,o,l,i,a,u,s,c,d,f,p,h,_);g=sd(m);var w=D(m);if(null==w)return e.pb?e.pb(n,t,r,o,l,i,a,u,s,c,d,f,p,h,_,g):e.call(e,n,t,r,o,l,i,a,u,s,c,d,f,p,h,_,g);m=sd(w);var v=D(w);if(null==v)return e.gb?e.gb(n,t,r,o,l,i,a,u,s,c,d,f,p,h,_,g,m):e.call(e,n,t,r,o,l,i,a,u,s,c,d,f,p,h,_,g,m);w=sd(v);var b=D(v);if(null==b)return e.qb?e.qb(n,t,r,o,l,i,a,u,s,c,d,f,p,h,_,g,m,w):e.call(e,n,t,r,o,l,i,a,u,s,c,d,f,p,h,_,g,m,w);v=sd(b);var y=D(b);if(null==y)return e.hb?e.hb(n,t,r,o,l,i,a,u,s,c,d,f,p,h,_,g,m,w,v):e.call(e,n,t,r,o,l,i,a,u,s,c,d,f,p,h,_,g,m,w,v);if(b=sd(y),null==(y=D(y)))return e.rb?e.rb(n,t,r,o,l,i,a,u,s,c,d,f,p,h,_,g,m,w,v,b):e.call(e,n,t,r,o,l,i,a,u,s,c,d,f,p,h,_,g,m,w,v,b);for(n=[n,t,r,o,l,i,a,u,s,c,d,f,p,h,_,g,m,w,v,b],t=y;t;)n.push(sd(t)),t=D(t);return e.apply(e,n)}function Oe(e){switch(arguments.length){case 2:return fh(arguments[0],arguments[1]);case 3:return gh(arguments[0],arguments[1],arguments[2]);case 4:return hh(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return ih(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:for(var n=[],t=arguments.length,r=0;r<t;)n.push(arguments[r]),r+=1;return jh(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],new Qe(n.slice(5),0,null))}}function fh(e,n){if(e.G){var t=e.F,r=Vg(t+1,n);return r<=t?$g(e,r,n):e.G(n)}return null==(n=B(n))?e.o?e.o():e.call(e):bh(e,sd(n),ah(n))}function gh(e,n,t){if(e.G){n=vf(n,t);var r=e.F;return(t=Vg(r,t)+1)<=r?$g(e,t,n):e.G(n)}return bh(e,n,B(t))}function hh(e,n,t,r){return e.G?(n=vf(n,vf(t,r)),(r=2+Vg((t=e.F)-1,r))<=t?$g(e,r,n):e.G(n)):ch(e,n,t,B(r))}function ih(e,n,t,r,o){return e.G?(n=vf(n,vf(t,vf(r,o))),(o=3+Vg((t=e.F)-2,o))<=t?$g(e,o,n):e.G(n)):dh(e,n,t,r,B(o))}function jh(e,n,t,r,o,i){return e.G?(n=vf(n,vf(t,vf(r,vf(o,i=Wg(i))))),(i=4+Vg((t=e.F)-3,i))<=t?$g(e,i,n):e.G(n)):eh(e,n,t,r,o,Wg(i))}Yg.o=function(){return je(I)},Yg.a=function(e){return e},Yg.b=function(e,n){return ke(e,n)},Yg.g=function(e,n,t){for(;;){if(e=ke(e,n),!p(t))return e;n=C(t),t=D(t)}},Yg.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)},Yg.F=2;var kh=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],new Qe(t.slice(2),0,null))}};function lh(e){return B(e)?e:null}function mh(){return"undefined"!==typeof Ac&&"undefined"!==typeof Bc&&"undefined"!==typeof vv||((vv=function(e){this.hh=e,this.h=393216,this.I=0}).prototype.O=function(e,n){return new vv(n)},vv.prototype.N=function(){return this.hh},vv.prototype.ra=function(){return!1},vv.prototype.next=function(){return Error("No such element")},vv.prototype.remove=function(){return Error("Unsupported operation")},vv.Pa=function(){return new Q(null,1,5,R,[CD],null)},vv.Ia=!0,vv.Da="cljs.core/t_cljs$core7592",vv.Ja=function(e){return ce(e,"cljs.core/t_cljs$core7592")}),new vv(S)}function oh(e){this.ha=e,this.J=0}function ph(e){this.l=e,this.J=0}kh.a=function(){return!1},kh.b=function(e,n){return!A.b(e,n)},kh.g=function(e,n,t){return Tc(hh(A,e,n,t))},kh.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)},kh.F=2,oh.prototype.ra=function(){return this.J<this.ha.length},oh.prototype.next=function(){var e=this.ha.charAt(this.J);return this.J+=1,e},oh.prototype.remove=function(){return Error("Unsupported operation")},ph.prototype.ra=function(){return this.J<this.l.length},ph.prototype.next=function(){var e=this.l[this.J];return this.J+=1,e},ph.prototype.remove=function(){return Error("Unsupported operation")};var qh={},rh={};function sh(e){this.vd=qh,this.Hb=e}function th(e){if(Pe(e))return ze(e);if(null==e)return mh();if("string"===typeof e)return new oh(e);if(Rc(e))return new ph(e);var n=null==e;if(n||(n=(n=null!=e?!!(8388608&e.h||h===e.qf)||!e.h&&Xc(Wd,e):Xc(Wd,e))?n:Rc(e)||"string"===typeof e),n)return new sh(e);throw Error(["Cannot create iterator from ",q.a(e)].join(""))}function uh(e){this.te=e}sh.prototype.ra=function(){return this.vd===qh?(this.vd=rh,this.Hb=B(this.Hb)):this.vd===this.Hb&&(this.Hb=D(this.vd)),null!=this.Hb},sh.prototype.next=function(){if(this.ra())return this.vd=this.Hb,C(this.Hb);throw Error("No such element")},sh.prototype.remove=function(){return Error("Unsupported operation")},uh.prototype.add=function(e){return this.te.push(e),this},uh.prototype.remove=function(){return this.te.shift()},uh.prototype.Nd=function(){return 0===this.te.length},uh.prototype.toString=function(){return["Many: ",q.a(this.te)].join("")};var vh={};function wh(e){this.m=e}function xh(){}wh.prototype.add=function(e){return this.m===vh?(this.m=e,this):new uh([this.m,e])},wh.prototype.remove=function(){if(this.m===vh)throw Error("Removing object from empty buffer");var e=this.m;return this.m=vh,e},wh.prototype.Nd=function(){return this.m===vh},wh.prototype.toString=function(){return["Single: ",q.a(this.m)].join("")},xh.prototype.add=function(e){return new wh(e)},xh.prototype.remove=function(){throw Error("Removing object from empty buffer")},xh.prototype.Nd=function(){return!0},xh.prototype.toString=function(){return"Empty"};var yh=new xh,zh=function e(n){return new Mg(null,(function(){if(!n.ra())return null;for(var t=[],r=0;;){var o=n.ra();if(!p(p(o)?32>r:o))return Sg(new Pg(t,0,r),e.a?e.a(n):e.call(null,n));t[r]=n.next(),r+=1}}),null,null)};function Ah(e){this.buffer=yh,this.Hb=vh,this.Ne=!1,this.pc=null,this.Ze=e,this.oh=!1}function Bh(e,n){var t=new Ah(n);return t.pc=function(){var n=function(){function e(e,n){return t.buffer=t.buffer.add(n),e}var n;return(n=function(n,t){switch(arguments.length){case 0:return null;case 1:return n;case 2:return e.call(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).o=function(){return null},n.a=function(e){return e},n.b=e,n}();return e.a?e.a(n):e.call(null,n)}(),t}function Ch(e){return $f(e)||(e=B(e))?e:Se}function Dh(e,n){for(;;){if(null==B(n))return!0;var t=C(n);if(!p(t=e.a?e.a(t):e.call(null,t)))return!1;n=D(n)}}function Eh(e,n){for(;;){if(!(n=B(n)))return null;var t=C(n);if(p(t=e.a?e.a(t):e.call(null,t)))return t;n=D(n)}}function Fh(e){if(bg(e))return 0===(1&e);throw Error(["Argument must be an integer: ",q.a(e)].join(""))}function Gh(e){return function(){function n(n,t){return Tc(e.b?e.b(n,t):e.call(null,n,t))}function t(n){return Tc(e.a?e.a(n):e.call(null,n))}function r(){return Tc(e.o?e.o():e.call(null))}var o,i=function(){function n(e,n,r){var o=null;if(2<arguments.length){o=0;for(var i=Array(arguments.length-2);o<i.length;)i[o]=arguments[o+2],++o;o=new Qe(i,0,null)}return t.call(this,e,n,o)}function t(n,t,r){return Tc(hh(e,n,t,r))}return n.F=2,n.G=function(e){return t(C(e),C(e=D(e)),e=Re(e))},n.g=t,n}();return(o=function(e,o,l){switch(arguments.length){case 0:return r.call(this);case 1:return t.call(this,e);case 2:return n.call(this,e,o);default:var a=null;if(2<arguments.length){a=0;for(var u=Array(arguments.length-2);a<u.length;)u[a]=arguments[a+2],++a;a=new Qe(u,0,null)}return i.g(e,o,a)}}).F=2,o.G=i.G,o.o=r,o.a=t,o.b=n,o.g=i.g,o}()}function Hh(e){return function(){function n(n){if(0<arguments.length)for(var t=0,r=Array(arguments.length-0);t<r.length;)r[t]=arguments[t+0],++t;return e}return n.F=0,n.G=function(n){return B(n),e},n.g=function(){return e},n}()}Ah.prototype.step=function(){if(this.Hb!==vh)return!0;for(;;){if(this.Hb!==vh)return!0;if(this.buffer.Nd()){if(this.Ne)return!1;if(this.Ze.ra()){if(this.oh)var e=fh(this.pc,vf(null,this.Ze.next()));else e=this.Ze.next(),e=this.pc.b?this.pc.b(null,e):this.pc.call(null,null,e);cf(e)&&(this.pc.a?this.pc.a(null):this.pc.call(null,null),this.Ne=!0)}else this.pc.a?this.pc.a(null):this.pc.call(null,null),this.Ne=!0}else this.Hb=this.buffer.remove()}},Ah.prototype.ra=function(){return this.step()},Ah.prototype.next=function(){if(this.ra()){var e=this.Hb;return this.Hb=vh,e}throw Error("No such element")},Ah.prototype.remove=function(){return Error("Unsupported operation")},Ah.prototype[ad]=function(){return Ue(this)};var Ih=function e(n){switch(arguments.length){case 0:return e.o();case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],arguments[2],new Qe(t.slice(3),0,null))}};function Jh(e,n){return function(){function t(t,r,o){return e.A?e.A(n,t,r,o):e.call(null,n,t,r,o)}function r(t,r){return e.c?e.c(n,t,r):e.call(null,n,t,r)}function o(t){return e.b?e.b(n,t):e.call(null,n,t)}function i(){return e.a?e.a(n):e.call(null,n)}var l,a=function(){function t(e,n,t,o){var i=null;if(3<arguments.length){i=0;for(var l=Array(arguments.length-3);i<l.length;)l[i]=arguments[i+3],++i;i=new Qe(l,0,null)}return r.call(this,e,n,t,i)}function r(t,r,o,i){return jh(e,n,t,r,o,G([i]))}return t.F=3,t.G=function(e){return r(C(e),C(e=D(e)),C(e=D(e)),e=Re(e))},t.g=r,t}();return(l=function(e,n,l,u){switch(arguments.length){case 0:return i.call(this);case 1:return o.call(this,e);case 2:return r.call(this,e,n);case 3:return t.call(this,e,n,l);default:var s=null;if(3<arguments.length){s=0;for(var c=Array(arguments.length-3);s<c.length;)c[s]=arguments[s+3],++s;s=new Qe(c,0,null)}return a.g(e,n,l,s)}}).F=3,l.G=a.G,l.o=i,l.a=o,l.b=r,l.c=t,l.g=a.g,l}()}function Kh(e,n,t){return function(){function r(r,o,i){return e.K?e.K(n,t,r,o,i):e.call(null,n,t,r,o,i)}function o(r,o){return e.A?e.A(n,t,r,o):e.call(null,n,t,r,o)}function i(r){return e.c?e.c(n,t,r):e.call(null,n,t,r)}function l(){return e.b?e.b(n,t):e.call(null,n,t)}var a,u=function(){function r(e,n,t,r){var i=null;if(3<arguments.length){i=0;for(var l=Array(arguments.length-3);i<l.length;)l[i]=arguments[i+3],++i;i=new Qe(l,0,null)}return o.call(this,e,n,t,i)}function o(r,o,i,l){return jh(e,n,t,r,o,G([i,l]))}return r.F=3,r.G=function(e){return o(C(e),C(e=D(e)),C(e=D(e)),e=Re(e))},r.g=o,r}();return(a=function(e,n,t,a){switch(arguments.length){case 0:return l.call(this);case 1:return i.call(this,e);case 2:return o.call(this,e,n);case 3:return r.call(this,e,n,t);default:var s=null;if(3<arguments.length){s=0;for(var c=Array(arguments.length-3);s<c.length;)c[s]=arguments[s+3],++s;s=new Qe(c,0,null)}return u.g(e,n,t,s)}}).F=3,a.G=u.G,a.o=l,a.a=i,a.b=o,a.c=r,a.g=u.g,a}()}function Lh(e,n,t,r){return function(){function o(o,i,l){return e.la?e.la(n,t,r,o,i,l):e.call(null,n,t,r,o,i,l)}function i(o,i){return e.K?e.K(n,t,r,o,i):e.call(null,n,t,r,o,i)}function l(o){return e.A?e.A(n,t,r,o):e.call(null,n,t,r,o)}function a(){return e.c?e.c(n,t,r):e.call(null,n,t,r)}var u,s=function(){function o(e,n,t,r){var o=null;if(3<arguments.length){o=0;for(var l=Array(arguments.length-3);o<l.length;)l[o]=arguments[o+3],++o;o=new Qe(l,0,null)}return i.call(this,e,n,t,o)}function i(o,i,l,a){return jh(e,n,t,r,o,G([i,l,a]))}return o.F=3,o.G=function(e){return i(C(e),C(e=D(e)),C(e=D(e)),e=Re(e))},o.g=i,o}();return(u=function(e,n,t,r){switch(arguments.length){case 0:return a.call(this);case 1:return l.call(this,e);case 2:return i.call(this,e,n);case 3:return o.call(this,e,n,t);default:var u=null;if(3<arguments.length){u=0;for(var c=Array(arguments.length-3);u<c.length;)c[u]=arguments[u+3],++u;u=new Qe(c,0,null)}return s.g(e,n,t,u)}}).F=3,u.G=s.G,u.o=a,u.a=l,u.b=i,u.c=o,u.g=s.g,u}()}function Mh(e,n){return function(){function t(t,r,o){return t=null==t?n:t,e.c?e.c(t,r,o):e.call(null,t,r,o)}function r(t,r){return t=null==t?n:t,e.b?e.b(t,r):e.call(null,t,r)}function o(t){return t=null==t?n:t,e.a?e.a(t):e.call(null,t)}var i,l=function(){function t(e,n,t,o){var i=null;if(3<arguments.length){i=0;for(var l=Array(arguments.length-3);i<l.length;)l[i]=arguments[i+3],++i;i=new Qe(l,0,null)}return r.call(this,e,n,t,i)}function r(t,r,o,i){return ih(e,null==t?n:t,r,o,i)}return t.F=3,t.G=function(e){return r(C(e),C(e=D(e)),C(e=D(e)),e=Re(e))},t.g=r,t}();return(i=function(e,n,i,a){switch(arguments.length){case 1:return o.call(this,e);case 2:return r.call(this,e,n);case 3:return t.call(this,e,n,i);default:var u=null;if(3<arguments.length){u=0;for(var s=Array(arguments.length-3);u<s.length;)s[u]=arguments[u+3],++u;u=new Qe(s,0,null)}return l.g(e,n,i,u)}}).F=3,i.G=l.G,i.a=o,i.b=r,i.c=t,i.g=l.g,i}()}function Nh(e){this.state=e,this.bf=this.Tf=this.H=null,this.I=16386,this.h=6455296}function Oh(e){return new Nh(e)}function Ph(e,n){if(e instanceof Nh){var t=e.Tf;if(null!=t&&!p(t.a?t.a(n):t.call(null,n)))throw Error("Validator rejected reference state");return t=e.state,e.state=n,null!=e.bf&&e.Ge(null,t,n),n}return ve(e,n)}function Qh(e,n){var t=e.Tf;if(null!=t&&!p(t.a?t.a(n):t.call(null,n)))throw Error("Validator rejected reference state");return t=e.state,e.state=n,null!=e.bf&&ie(e,t,n),new Q(null,2,5,R,[t,n],null)}Ih.o=function(){return lg},Ih.a=function(e){return e},Ih.b=function(e,n){return function(){function t(t,r,o){return t=n.c?n.c(t,r,o):n.call(null,t,r,o),e.a?e.a(t):e.call(null,t)}function r(t,r){return t=n.b?n.b(t,r):n.call(null,t,r),e.a?e.a(t):e.call(null,t)}function o(t){return t=n.a?n.a(t):n.call(null,t),e.a?e.a(t):e.call(null,t)}function i(){var t=n.o?n.o():n.call(null);return e.a?e.a(t):e.call(null,t)}var l,a=function(){function t(e,n,t,o){var i=null;if(3<arguments.length){i=0;for(var l=Array(arguments.length-3);i<l.length;)l[i]=arguments[i+3],++i;i=new Qe(l,0,null)}return r.call(this,e,n,t,i)}function r(t,r,o,i){return t=ih(n,t,r,o,i),e.a?e.a(t):e.call(null,t)}return t.F=3,t.G=function(e){return r(C(e),C(e=D(e)),C(e=D(e)),e=Re(e))},t.g=r,t}();return(l=function(e,n,l,u){switch(arguments.length){case 0:return i.call(this);case 1:return o.call(this,e);case 2:return r.call(this,e,n);case 3:return t.call(this,e,n,l);default:var s=null;if(3<arguments.length){s=0;for(var c=Array(arguments.length-3);s<c.length;)c[s]=arguments[s+3],++s;s=new Qe(c,0,null)}return a.g(e,n,l,s)}}).F=3,l.G=a.G,l.o=i,l.a=o,l.b=r,l.c=t,l.g=a.g,l}()},Ih.c=function(e,n,t){return function(){function r(r,o,i){return r=t.c?t.c(r,o,i):t.call(null,r,o,i),r=n.a?n.a(r):n.call(null,r),e.a?e.a(r):e.call(null,r)}function o(r,o){return r=t.b?t.b(r,o):t.call(null,r,o),r=n.a?n.a(r):n.call(null,r),e.a?e.a(r):e.call(null,r)}function i(r){return r=t.a?t.a(r):t.call(null,r),r=n.a?n.a(r):n.call(null,r),e.a?e.a(r):e.call(null,r)}function l(){var r=t.o?t.o():t.call(null);return r=n.a?n.a(r):n.call(null,r),e.a?e.a(r):e.call(null,r)}var a,u=function(){function r(e,n,t,r){var i=null;if(3<arguments.length){i=0;for(var l=Array(arguments.length-3);i<l.length;)l[i]=arguments[i+3],++i;i=new Qe(l,0,null)}return o.call(this,e,n,t,i)}function o(r,o,i,l){return r=ih(t,r,o,i,l),r=n.a?n.a(r):n.call(null,r),e.a?e.a(r):e.call(null,r)}return r.F=3,r.G=function(e){return o(C(e),C(e=D(e)),C(e=D(e)),e=Re(e))},r.g=o,r}();return(a=function(e,n,t,a){switch(arguments.length){case 0:return l.call(this);case 1:return i.call(this,e);case 2:return o.call(this,e,n);case 3:return r.call(this,e,n,t);default:var s=null;if(3<arguments.length){s=0;for(var c=Array(arguments.length-3);s<c.length;)c[s]=arguments[s+3],++s;s=new Qe(c,0,null)}return u.g(e,n,t,s)}}).F=3,a.G=u.G,a.o=l,a.a=i,a.b=o,a.c=r,a.g=u.g,a}()},Ih.g=function(e,n,t,r){var o=Eg(vf(e,vf(n,vf(t,r))));return function(){function e(e){var t=null;if(0<arguments.length){t=0;for(var r=Array(arguments.length-0);t<r.length;)r[t]=arguments[t+0],++t;t=new Qe(r,0,null)}return n.call(this,t)}function n(e){e=fh(C(o),e);for(var n=D(o);;){if(!n)return e;var t=C(n);e=t.a?t.a(e):t.call(null,e),n=D(n)}}return e.F=0,e.G=function(e){return n(e=B(e))},e.g=n,e}()},Ih.G=function(e){var n=C(e),t=D(e);e=C(t);var r=D(t);return t=C(r),r=D(r),this.g(n,e,t,r)},Ih.F=3,g=Nh.prototype,g.Y=function(e,n){return this===n},g.zb=function(){return this.state},g.N=function(){return this.H},g.Ge=function(e,n,t){e=B(this.bf);for(var r=null,o=0,i=0;;)if(i<o){var l=r.W(null,i),a=J(l,0,null);(l=J(l,1,null)).A?l.A(a,this,n,t):l.call(null,a,this,n,t),i+=1}else{if(!(e=B(e)))return null;Wf(e)?(r=re(e),e=se(e),a=r,o=F(r),r=a):(a=J(r=C(e),0,null),(l=J(r,1,null)).A?l.A(a,this,n,t):l.call(null,a,this,n,t),e=D(e),r=null,o=0),i=0}},g.Z=function(){return hb(this)};var Rh=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);case 4:return e.A(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],arguments[2],arguments[3],new Qe(t.slice(4),0,null))}};function Sh(e,n){var t=e.state;return Qh(e,n=n.a?n.a(t):n.call(null,t))}function Th(e,n){var t=e.state;return Qh(e,n=Hf.b?Hf.b(t,n):Hf.call(null,t,n))}function Uh(e){this.state=e,this.h=32768,this.I=0}function Vh(e,n){xe(e,n)}Rh.b=function(e,n){if(e instanceof Nh){var t=e.state;e=Ph(e,n=n.a?n.a(t):n.call(null,t))}else e=we(e,n);return e},Rh.c=function(e,n,t){if(e instanceof Nh){var r=e.state;e=Ph(e,n=n.b?n.b(r,t):n.call(null,r,t))}else e=we(e,n,t);return e},Rh.A=function(e,n,t,r){if(e instanceof Nh){var o=e.state;e=Ph(e,n=n.c?n.c(o,t,r):n.call(null,o,t,r))}else e=we(e,n,t,r);return e},Rh.g=function(e,n,t,r,o){return e instanceof Nh?Ph(e,ih(n,e.state,t,r,o)):we(e,n,t,r,o)},Rh.G=function(e){var n=C(e),t=D(e);e=C(t);var r=D(t);t=C(r);var o=D(r);return r=C(o),o=D(o),this.g(n,e,t,r,o)},Rh.F=4,Uh.prototype.Cc=function(e,n){return this.state=n},Uh.prototype.zb=function(){return this.state};var Wh=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);case 4:return e.A(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],arguments[2],arguments[3],new Qe(t.slice(4),0,null))}};Wh.a=function(e){return function(n){return function(){function t(t,r){return r=e.a?e.a(r):e.call(null,r),n.b?n.b(t,r):n.call(null,t,r)}function r(e){return n.a?n.a(e):n.call(null,e)}function o(){return n.o?n.o():n.call(null)}var i,l=function(){function t(e,n,t){var o=null;if(2<arguments.length){o=0;for(var i=Array(arguments.length-2);o<i.length;)i[o]=arguments[o+2],++o;o=new Qe(i,0,null)}return r.call(this,e,n,o)}function r(t,r,o){return r=gh(e,r,o),n.b?n.b(t,r):n.call(null,t,r)}return t.F=2,t.G=function(e){return r(C(e),C(e=D(e)),e=Re(e))},t.g=r,t}();return(i=function(e,n,i){switch(arguments.length){case 0:return o.call(this);case 1:return r.call(this,e);case 2:return t.call(this,e,n);default:var a=null;if(2<arguments.length){a=0;for(var u=Array(arguments.length-2);a<u.length;)u[a]=arguments[a+2],++a;a=new Qe(u,0,null)}return l.g(e,n,a)}}).F=2,i.G=l.G,i.o=o,i.a=r,i.b=t,i.g=l.g,i}()}},Wh.b=function(e,n){return new Mg(null,(function(){var t=B(n);if(t){if(Wf(t)){for(var r=re(t),o=F(r),i=Qg(o),l=0;l<o;)Tg(i,function(){var n=qd(r,l);return e.a?e.a(n):e.call(null,n)}()),l+=1;return Sg(Ug(i),Wh.b(e,se(t)))}return vf(function(){var n=C(t);return e.a?e.a(n):e.call(null,n)}(),Wh.b(e,Re(t)))}return null}),null,null)},Wh.c=function(e,n,t){return new Mg(null,(function(){var r=B(n),o=B(t);if(r&&o){var i=C(r),l=C(o);r=vf(i=e.b?e.b(i,l):e.call(null,i,l),Wh.c(e,Re(r),Re(o)))}else r=null;return r}),null,null)},Wh.A=function(e,n,t,r){return new Mg(null,(function(){var o=B(n),i=B(t),l=B(r);if(o&&i&&l){var a=C(o),u=C(i),s=C(l);o=vf(a=e.c?e.c(a,u,s):e.call(null,a,u,s),Wh.A(e,Re(o),Re(i),Re(l)))}else o=null;return o}),null,null)},Wh.g=function(e,n,t,r,o){return Wh.b((function(n){return fh(e,n)}),function e(n){return new Mg(null,(function(){var t=Wh.b(B,n);return Dh(lg,t)?vf(Wh.b(C,t),e(Wh.b(Re,t))):null}),null,null)}(Cf.g(o,r,G([t,n]))))},Wh.G=function(e){var n=C(e),t=D(e);e=C(t);var r=D(t);t=C(r);var o=D(r);return r=C(o),o=D(o),this.g(n,e,t,r,o)},Wh.F=4;var Xh=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function Yh(e,n){return new Mg(null,(function(){e:for(var t=e,r=n;r=B(r),0<t&&r;)--t,r=Re(r);return r}),null,null)}function Zh(e,n){return Wh.c((function(e){return e}),n,Yh(e,n))}function $h(e,n,t,r){this.H=e,this.count=n,this.m=t,this.next=r,this.B=null,this.h=32374988,this.I=1}function ai(e,n){return 0<e?new $h(null,e,n,null):Se}Xh.a=function(e){return function(n){var r=new Uh(e);return function(){function e(e,o){var i=t(r),l=r.Cc(null,r.zb(null)-1);return e=0<i?n.b?n.b(e,o):n.call(null,e,o):e,0<l||cf(e)?e:bf(e)}function o(e){return n.a?n.a(e):n.call(null,e)}function i(){return n.o?n.o():n.call(null)}var l;return(l=function(n,t){switch(arguments.length){case 0:return i.call(this);case 1:return o.call(this,n);case 2:return e.call(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).o=i,l.a=o,l.b=e,l}()}},Xh.b=function(e,n){return new Mg(null,(function(){if(0<e){var t=B(n);return t?vf(C(t),Xh.b(e-1,Re(t))):null}return null}),null,null)},Xh.F=2,g=$h.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,this.count)}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){return null==this.next?1<this.count?this.next=new $h(null,this.count-1,this.m,null):-1===this.count?this:null:this.next},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Se},g.Bd=function(){return!1},g.Ba=function(e,n){if(-1===this.count)for(var r=n.b?n.b(this.m,this.m):n.call(null,this.m,this.m);;){if(cf(r))return t(r);r=n.b?n.b(r,this.m):n.call(null,r,this.m)}else for(e=1,r=this.m;;){if(!(e<this.count))return r;if(cf(r=n.b?n.b(r,this.m):n.call(null,r,this.m)))return t(r);e+=1}},g.Ca=function(e,n,r){if(-1===this.count)for(r=n.b?n.b(r,this.m):n.call(null,r,this.m);;){if(cf(r))return t(r);r=n.b?n.b(r,this.m):n.call(null,r,this.m)}else for(e=0;;){if(!(e<this.count))return r;if(cf(r=n.b?n.b(r,this.m):n.call(null,r,this.m)))return t(r);e+=1}},g.Fa=function(){return this.m},g.Ha=function(){return null==this.next?1<this.count?this.next=new $h(null,this.count-1,this.m,null):-1===this.count?this:Se:this.next},g.$=function(){return this},g.O=function(e,n){return n===this.H?this:new $h(n,this.count,this.m,this.next)},g.ga=function(e,n){return vf(n,this)};var bi=function e(n){switch(arguments.length){case 0:return e.o();case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],new Qe(t.slice(2),0,null))}};function ci(){return function(e){var n=new Uh(!1);return function(){function r(r,o){return p(t(n))?cf(r=e.b?e.b(r," "):e.call(null,r," "))?r:e.b?e.b(r,o):e.call(null,r,o):(xe(n,!0),e.b?e.b(r,o):e.call(null,r,o))}function o(n){return e.a?e.a(n):e.call(null,n)}function i(){return e.o?e.o():e.call(null)}var l;return(l=function(e,n){switch(arguments.length){case 0:return i.call(this);case 1:return o.call(this,e);case 2:return r.call(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).o=i,l.a=o,l.b=r,l}()}}function di(e,n){return Yh(1,bi.b(new $h(null,-1,e,null),n))}function ei(e,n){return fh(Xg,gh(Wh,e,n))}bi.o=function(){return Se},bi.a=function(e){return new Mg(null,(function(){return e}),null,null)},bi.b=function(e,n){return new Mg(null,(function(){var t=B(e),r=B(n);return t&&r?vf(C(t),vf(C(r),bi.b(Re(t),Re(r)))):null}),null,null)},bi.g=function(e,n,t){return new Mg(null,(function(){var r=Wh.b(B,Cf.g(t,n,G([e])));return Dh(lg,r)?Xg.b(Wh.b(C,r),fh(bi,Wh.b(Re,r))):null}),null,null)},bi.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)},bi.F=2;var fi=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};fi.a=function(e){return function(n){return function(){function t(t,r){return p(e.a?e.a(r):e.call(null,r))?n.b?n.b(t,r):n.call(null,t,r):t}function r(e){return n.a?n.a(e):n.call(null,e)}function o(){return n.o?n.o():n.call(null)}var i;return(i=function(e,n){switch(arguments.length){case 0:return o.call(this);case 1:return r.call(this,e);case 2:return t.call(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).o=o,i.a=r,i.b=t,i}()}},fi.b=function(e,n){return new Mg(null,(function(){var t=B(n);if(t){if(Wf(t)){for(var r=re(t),o=F(r),i=Qg(o),l=0;l<o;){var a=qd(r,l);p(a=e.a?e.a(a):e.call(null,a))&&(a=qd(r,l),i.add(a)),l+=1}return Sg(Ug(i),fi.b(e,se(t)))}return r=C(t),t=Re(t),p(e.a?e.a(r):e.call(null,r))?vf(r,fi.b(e,t)):fi.b(e,t)}return null}),null,null)},fi.F=2;var gi=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function hi(e){return function e(n){return new Mg(null,(function(){return vf(n,p(Tf.a?Tf.a(n):Tf.call(null,n))?ei(e,G([B.a?B.a(n):B.call(null,n)])):null)}),null,null)}(e)}function ii(e){return fi.b((function(e){return!Tf(e)}),Re(hi(e)))}gi.a=function(e){return fi.a(Gh(e))},gi.b=function(e,n){return fi.b(Gh(e),n)},gi.F=2;var ji=function e(n){switch(arguments.length){case 0:return e.o();case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};ji.o=function(){return I},ji.a=function(e){return e},ji.b=function(e,n){return null!=e?null!=e&&(4&e.I||h===e.cg)?Pd(le(gd.c(ke,je(e),n)),Lf(e)):gd.c(od,e,n):gd.c(Cf,e,n)},ji.c=function(e,n,t){return null!=e&&(4&e.I||h===e.cg)?Pd(le(og(n,Yg,je(e),t)),Lf(e)):og(n,Cf,e,t)},ji.F=3;var ki=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);case 4:return e.A(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],arguments[2],arguments[3],new Qe(t.slice(4),0,null))}};function li(e,n){return le(gd.c((function(n,t){return p(e.a?e.a(t):e.call(null,t))?Yg.b(n,t):n}),je(I),n))}ki.b=function(e,n){return le(gd.c((function(n,t){return Yg.b(n,e.a?e.a(t):e.call(null,t))}),je(I),n))},ki.c=function(e,n,t){return ji.b(I,Wh.c(e,n,t))},ki.A=function(e,n,t,r){return ji.b(I,Wh.A(e,n,t,r))},ki.g=function(e,n,t,r,o){return ji.b(I,jh(Wh,e,n,t,r,G([o])))},ki.G=function(e){var n=C(e),t=D(e);e=C(t);var r=D(t);t=C(r);var o=D(r);return r=C(o),o=D(o),this.g(n,e,t,r,o)},ki.F=4;var mi=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};mi.b=function(e,n){return gd.c(x,e,n)},mi.c=function(e,n,t){var r=Yf;for(n=B(n);;){if(null==n)return e;if(r===(e=x.c(e,C(n),r)))return t;n=D(n)}},mi.F=3;var ni=function e(n,t,r){var o=C(t=B(t)),i=D(t);return i?K.c(n,o,function(){var t=x.b(n,o);return e.c?e.c(t,i,r):e.call(null,t,i,r)}()):K.c(n,o,r)},oi=function e(n){switch(arguments.length){case 3:return e.c(arguments[0],arguments[1],arguments[2]);case 4:return e.A(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return e.K(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return e.la(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],new Qe(t.slice(6),0,null))}};function pi(e,n,t){return K.c(e,n,function(){var r=x.b(e,n);return t.a?t.a(r):t.call(null,r)}())}function qi(e,n,t,r){return K.c(e,n,function(){var o=x.b(e,n);return t.b?t.b(o,r):t.call(null,o,r)}())}function ri(e,n){this.va=e,this.l=n}function si(e){return new ri(e,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function ti(e){return new ri(e.va,ed(e.l))}function ui(e){return 32>(e=e.C)?0:e-1>>>5<<5}function vi(e,n,t){for(;;){if(0===n)return t;var r=si(e);r.l[0]=t,t=r,n-=5}}oi.c=function(e,n,t){var r=C(n=B(n));return(n=D(n))?K.c(e,r,oi.c(x.b(e,r),n,t)):K.c(e,r,function(){var n=x.b(e,r);return t.a?t.a(n):t.call(null,n)}())},oi.A=function(e,n,t,r){var o=C(n=B(n));return(n=D(n))?K.c(e,o,oi.A(x.b(e,o),n,t,r)):K.c(e,o,function(){var n=x.b(e,o);return t.b?t.b(n,r):t.call(null,n,r)}())},oi.K=function(e,n,t,r,o){var i=C(n=B(n));return(n=D(n))?K.c(e,i,oi.K(x.b(e,i),n,t,r,o)):K.c(e,i,function(){var n=x.b(e,i);return t.c?t.c(n,r,o):t.call(null,n,r,o)}())},oi.la=function(e,n,t,r,o,i){var l=C(n=B(n));return(n=D(n))?K.c(e,l,oi.la(x.b(e,l),n,t,r,o,i)):K.c(e,l,function(){var n=x.b(e,l);return t.A?t.A(n,r,o,i):t.call(null,n,r,o,i)}())},oi.g=function(e,n,t,r,o,i,l){var a=B(n);return n=C(a),(a=D(a))?K.c(e,n,jh(oi,x.b(e,n),a,t,r,G([o,i,l]))):K.c(e,n,jh(t,x.b(e,n),r,o,i,G([l])))},oi.G=function(e){var n=C(e),t=D(e);e=C(t);var r=D(t);t=C(r);var o=D(r);r=C(o);var i=D(o);o=C(i);var l=D(i);return i=C(l),l=D(l),this.g(n,e,t,r,o,i,l)},oi.F=6;var wi=function e(n,t,r,o){var i=ti(r),l=n.C-1>>>t&31;return 5===t?i.l[l]=o:(null!=(r=r.l[l])?(t-=5,n=e.A?e.A(n,t,r,o):e.call(null,n,t,r,o)):n=vi(null,t-5,o),i.l[l]=n),i};function xi(e,n){throw Error(["No item ",q.a(e)," in vector of length ",q.a(n)].join(""))}function yi(e,n){if(n>=ui(e))return e.ta;var t=e.root;for(e=e.shift;;){if(!(0<e))return t.l;var r=e-5;t=t.l[n>>>e&31],e=r}}function zi(e,n){return 0<=n&&n<e.C?yi(e,n):xi(n,e.C)}var Ai=function e(n,t,r,o,i){var l=ti(r);if(0===t)l.l[31&o]=i;else{var a=o>>>t&31;t-=5,r=r.l[a],n=e.K?e.K(n,t,r,o,i):e.call(null,n,t,r,o,i),l.l[a]=n}return l},Bi=function e(n,t,r){var o=n.C-2>>>t&31;if(5<t){t-=5;var i=r.l[o];return null==(n=e.c?e.c(n,t,i):e.call(null,n,t,i))&&0===o?null:((r=ti(r)).l[o]=n,r)}return 0===o?null:((r=ti(r)).l[o]=null,r)};function Ci(e,n,t,r,o,i){this.J=e,this.Td=n,this.l=t,this.ka=r,this.start=o,this.end=i}function Di(e,n,t){return new Ci(n,n-n%32,n<F(e)?yi(e,n):null,e,n,t)}function Ei(e,n,t,r){return t<r?Fi(e,n,pf(e,t),t+1,r):n.o?n.o():n.call(null)}function Fi(e,n,r,o,i){var l=r;for(r=o,o=yi(e,o);;){if(!(r<i))return l;var a=31&r;if(a=(o=0===a?yi(e,r):o)[a],cf(l=n.b?n.b(l,a):n.call(null,l,a)))return t(l);r+=1}}function Q(e,n,t,r,o,i){this.H=e,this.C=n,this.shift=t,this.root=r,this.ta=o,this.B=i,this.h=167666463,this.I=139268}Ci.prototype.ra=function(){return this.J<this.end},Ci.prototype.next=function(){32===this.J-this.Td&&(this.l=yi(this.ka,this.J),this.Td+=32);var e=this.l[31&this.J];return this.J+=1,e},g=Q.prototype,g.Ac=function(e,n){return 0<=n&&n<this.C?new Gi(n,yi(this,n)[31&n]):null},g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){return"number"===typeof n?this.wa(null,n,t):t},g.Aa=function(e,n,r){e=0;for(var o=r;;){if(!(e<this.C))return o;var i=yi(this,e);r=i.length;e:for(var l=0;;){if(!(l<r)){i=o;break e}var a=l+e,u=i[l];if(cf(o=n.c?n.c(o,a,u):n.call(null,o,a,u))){i=o;break e}l+=1}if(cf(i))return t(i);e+=r,o=i}},g.ye=h,g.W=function(e,n){return zi(this,n)[31&n]},g.wa=function(e,n,t){return 0<=n&&n<this.C?yi(this,n)[31&n]:t},g.Ib=function(e,n,t){if(0<=n&&n<this.C)return ui(this)<=n?((e=ed(this.ta))[31&n]=t,new Q(this.H,this.C,this.shift,this.root,e,null)):new Q(this.H,this.C,this.shift,Ai(this,this.shift,this.root,n,t),this.ta,null);if(n===this.C)return this.ga(null,t);throw Error(["Index ",q.a(n)," out of bounds  [0,",q.a(this.C),"]"].join(""))},g.ua=function(){return Di(this,0,this.C)},g.N=function(){return this.H},g.X=function(){return this.C},g.Xb=function(){return 0<this.C?this.W(null,this.C-1):null},g.Yb=function(){if(0===this.C)throw Error("Can't pop empty vector");if(1===this.C)return Pd(I,this.H);if(1<this.C-ui(this))return new Q(this.H,this.C-1,this.shift,this.root,this.ta.slice(0,-1),null);var e=yi(this,this.C-2),n=Bi(this,this.shift,this.root);n=null==n?R:n;var t=this.C-1;return 5<this.shift&&null==n.l[1]?new Q(this.H,t,this.shift-5,n.l[0],e,null):new Q(this.H,t,this.shift,n,e,null)},g.Bc=function(){return 0<this.C?new tf(this,this.C-1,null):null},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){if(!(n instanceof Q))return uf(this,n);if(this.C!==F(n))return!1;for(e=this.ua(null),n=n.ua(null);;){if(!e.ra())return!0;var t=e.next(),r=n.next();if(!A.b(t,r))return!1}},g.hd=function(){return new Hi(this.C,this.shift,Ii.a?Ii.a(this.root):Ii.call(null,this.root),Ji.a?Ji.a(this.ta):Ji.call(null,this.ta))},g.pa=function(){return Pd(I,this.H)},g.Ba=function(e,n){return Ei(this,n,0,this.C)},g.Ca=function(e,n,r){e=0;for(var o=r;;){if(!(e<this.C))return o;var i=yi(this,e);r=i.length;e:for(var l=0;;){if(!(l<r)){i=o;break e}var a=i[l];if(cf(o=n.b?n.b(o,a):n.call(null,o,a))){i=o;break e}l+=1}if(cf(i))return t(i);e+=r,o=i}},g.fa=function(e,n,t){if("number"===typeof n)return this.Ib(null,n,t);throw Error("Vector's key for assoc must be a number.")},g.$=function(){if(0===this.C)return null;if(32>=this.C)return new Qe(this.ta,0,null);e:for(var e=this.root,n=this.shift;;){if(!(0<n)){e=e.l;break e}n-=5,e=e.l[0]}return Ki?Ki(this,e,0,0):Li.call(null,this,e,0,0)},g.O=function(e,n){return n===this.H?this:new Q(n,this.C,this.shift,this.root,this.ta,this.B)},g.ga=function(e,n){if(32>this.C-ui(this)){e=this.ta.length;for(var t=Array(e+1),r=0;r<e;)t[r]=this.ta[r],r+=1;return t[e]=n,new Q(this.H,this.C+1,this.shift,this.root,t,null)}return e=(t=this.C>>>5>1<<this.shift)?this.shift+5:this.shift,t?((t=si(null)).l[0]=this.root,r=vi(null,this.shift,new ri(null,this.ta)),t.l[1]=r):t=wi(this,this.shift,this.root,new ri(null,this.ta)),new Q(this.H,this.C+1,e,t,[n],null)},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.W(null,n);case 3:return this.wa(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.W(null,n)},e.c=function(e,n,t){return this.wa(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.W(null,e)},g.b=function(e,n){return this.wa(null,e,n)};var R=new ri(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),I=new Q(null,0,5,R,[],Xe);function Mi(e,n){var t=e.length;if(e=n?e:ed(e),32>t)return new Q(null,t,5,R,e,null);n=32;for(var r=new Q(null,32,5,R,e.slice(0,32),null).hd(null);;){if(!(n<t))return le(r);var o=n+1;r=Yg.b(r,e[n]),n=o}}function Ni(e){return p(Oi.a?Oi.a(e):Oi.call(null,e))?new Q(null,2,5,R,[Pi.a?Pi.a(e):Pi.call(null,e),Qi.a?Qi.a(e):Qi.call(null,e)],null):Vf(e)?Kf(e,null):Rc(e)?Mi(e,!0):le(gd.c(ke,je(I),e))}Q.prototype[ad]=function(){return Ue(this)};var Ri=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};function Si(e,n,t,r,o){this.Gb=e,this.node=n,this.J=t,this.$a=r,this.H=o,this.B=null,this.h=32375020,this.I=1536}function Li(e){switch(arguments.length){case 3:var n=arguments[0],t=arguments[1],r=arguments[2];return new Si(n,zi(n,t),t,r,null);case 4:return Ki(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Ti(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}}function Ki(e,n,t,r){return new Si(e,n,t,r,null)}function Ti(e,n,t,r,o){return new Si(e,n,t,r,o)}function Ui(e,n,t,r,o){this.H=e,this.ka=n,this.start=t,this.end=r,this.B=o,this.h=167666463,this.I=139264}function Vi(e,n,t,r,o){for(;;){if(!(n instanceof Ui)){if(!Vf(n))throw Error("v must satisfy IVector");if(0>t||r<t||r>F(n))throw Error("Index out of bounds");return new Ui(e,n,t,r,o)}t=n.start+t,r=n.start+r,n=n.ka}}function Wi(e,n,t){return Vi(null,e,0|n,0|t,null)}function Xi(e,n){return e===n.va?n:new ri(e,ed(n.l))}function Ii(e){return new ri({},ed(e.l))}function Ji(e){var n=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];return Xf(e,0,n,0,e.length),n}Ri.g=function(e){return e instanceof Qe&&0===e.J?Mi(e.l,!Rc(e.l)):Ni(e)},Ri.F=0,Ri.G=function(e){return this.g(B(e))},g=Si.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){if(this.$a+1<this.node.length){var e=this.Gb,n=this.node,t=this.J,r=this.$a+1;return null==(e=Ki?Ki(e,n,t,r):Li.call(null,e,n,t,r))?null:e}return this.Ae()},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Se},g.Ba=function(e,n){return Ei(this.Gb,n,this.J+this.$a,F(this.Gb))},g.Ca=function(e,n,t){return Fi(this.Gb,n,t,this.J+this.$a,F(this.Gb))},g.Fa=function(){return this.node[this.$a]},g.Ha=function(){if(this.$a+1<this.node.length){var e=this.Gb,n=this.node,t=this.J,r=this.$a+1;return null==(e=Ki?Ki(e,n,t,r):Li.call(null,e,n,t,r))?Se:e}return this.gd(null)},g.$=function(){return this},g.$d=function(){var e=this.node;return new Pg(e,this.$a,e.length)},g.gd=function(){var e=this.J+this.node.length;if(e<kd(this.Gb)){var n=this.Gb,t=yi(this.Gb,e);return Ki?Ki(n,t,e,0):Li.call(null,n,t,e,0)}return Se},g.O=function(e,n){return n===this.H?this:Ti?Ti(this.Gb,this.node,this.J,this.$a,n):Li.call(null,this.Gb,this.node,this.J,this.$a,n)},g.ga=function(e,n){return vf(n,this)},g.Ae=function(){var e=this.J+this.node.length;if(e<kd(this.Gb)){var n=this.Gb,t=yi(this.Gb,e);return Ki?Ki(n,t,e,0):Li.call(null,n,t,e,0)}return null},Si.prototype[ad]=function(){return Ue(this)},g=Ui.prototype,g.Ac=function(e,n){return 0>n?null:(e=this.start+n)<this.end?new Gi(n,xd(this.ka,e)):null},g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){return"number"===typeof n?this.wa(null,n,t):t},g.Aa=function(e,n,r){e=this.start;for(var o=0;;){if(!(e<this.end))return r;var i=o,l=qd(this.ka,e);if(cf(r=n.c?n.c(r,i,l):n.call(null,r,i,l)))return t(r);o+=1,e+=1}},g.W=function(e,n){return 0>n||this.end<=this.start+n?xi(n,this.end-this.start):qd(this.ka,this.start+n)},g.wa=function(e,n,t){return 0>n||this.end<=this.start+n?t:qd(this.ka,this.start+n,t)},g.Ib=function(e,n,t){if(e=this.start+n,0>n||this.end+1<=e)throw Error(["Index ",q.a(n)," out of bounds [0,",q.a(this.X(null)),"]"].join(""));n=this.H,t=K.c(this.ka,e,t);var r=this.start,o=this.end;return e=o>(e+=1)?o:e,Vi.K?Vi.K(n,t,r,e,null):Vi.call(null,n,t,r,e,null)},g.ua=function(){return null!=this.ka&&h===this.ka.ye?Di(this.ka,this.start,this.end):new sh(this)},g.N=function(){return this.H},g.X=function(){return this.end-this.start},g.Xb=function(){return this.start===this.end?null:qd(this.ka,this.end-1)},g.Yb=function(){if(this.start===this.end)throw Error("Can't pop empty vector");var e=this.H,n=this.ka,t=this.start,r=this.end-1;return Vi.K?Vi.K(e,n,t,r,null):Vi.call(null,e,n,t,r,null)},g.Bc=function(){return this.start!==this.end?new tf(this,this.end-this.start-1,null):null},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Pd(I,this.H)},g.Ba=function(e,n){return null!=this.ka&&h===this.ka.ye?Ei(this.ka,n,this.start,this.end):ff(this,n)},g.Ca=function(e,n,t){return null!=this.ka&&h===this.ka.ye?Fi(this.ka,n,t,this.start,this.end):gf(this,n,t)},g.fa=function(e,n,t){if("number"===typeof n)return this.Ib(null,n,t);throw Error("Subvec's key for assoc must be a number.")},g.$=function(){var e=this;return function n(t){return t===e.end?null:vf(qd(e.ka,t),new Mg(null,(function(){return n(t+1)}),null,null))}(e.start)},g.O=function(e,n){return n===this.H?this:Vi.K?Vi.K(n,this.ka,this.start,this.end,this.B):Vi.call(null,n,this.ka,this.start,this.end,this.B)},g.ga=function(e,n){e=this.H,n=Kd(this.ka,this.end,n);var t=this.start,r=this.end+1;return Vi.K?Vi.K(e,n,t,r,null):Vi.call(null,e,n,t,r,null)},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.W(null,n);case 3:return this.wa(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.W(null,n)},e.c=function(e,n,t){return this.wa(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.W(null,e)},g.b=function(e,n){return this.wa(null,e,n)},Ui.prototype[ad]=function(){return Ue(this)};var Yi=function e(n,t,r,o){r=Xi(n.root.va,r);var i=n.C-1>>>t&31;if(5===t)n=o;else{var l=r.l[i];null!=l?(t-=5,n=e.A?e.A(n,t,l,o):e.call(null,n,t,l,o)):n=vi(n.root.va,t-5,o)}return r.l[i]=n,r};function Hi(e,n,t,r){this.C=e,this.shift=n,this.root=t,this.ta=r,this.I=88,this.h=275}function Zi(e,n,t){if(e.root.va){if(0<=n&&n<e.C){if(ui(e)<=n)e.ta[31&n]=t;else{var r=function r(o,i){if(i=Xi(e.root.va,i),0===o)i.l[31&n]=t;else{var l=n>>>o&31;o=r(o-5,i.l[l]),i.l[l]=o}return i}(e.shift,e.root);e.root=r}return e}if(n===e.C)return e.kd(null,t);throw Error(["Index ",q.a(n)," out of bounds for TransientVector of length",q.a(e.C)].join(""))}throw Error("assoc! after persistent!")}function $i(e,n){this.pd=e,this.Rd=n}function aj(e,n,t,r){this.H=e,this.Ab=n,this.Fb=t,this.B=r,this.h=31850700,this.I=0}function bj(e,n,t,r,o){this.H=e,this.count=n,this.Ab=t,this.Fb=r,this.B=o,this.I=139264,this.h=31858766}g=Hi.prototype,g.kd=function(e,n){if(this.root.va){if(32>this.C-ui(this))this.ta[31&this.C]=n;else{e=new ri(this.root.va,this.ta);var t=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];t[0]=n,this.ta=t,this.C>>>5>1<<this.shift?(n=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],t=this.shift+5,n[0]=this.root,n[1]=vi(this.root.va,this.shift,e),this.root=new ri(this.root.va,n),this.shift=t):this.root=Yi(this,this.shift,this.root,e)}return this.C+=1,this}throw Error("conj! after persistent!")},g.Cd=function(){if(this.root.va){this.root.va=null;var e=this.C-ui(this),n=Array(e);return Xf(this.ta,0,n,0,e),new Q(null,this.C,this.shift,this.root,n,null)}throw Error("persistent! called twice")},g.jd=function(e,n,t){if("number"===typeof n)return Zi(this,n,t);throw Error("TransientVector's key for assoc! must be a number.")},g.X=function(){if(this.root.va)return this.C;throw Error("count after persistent!")},g.W=function(e,n){if(this.root.va)return zi(this,n)[31&n];throw Error("nth after persistent!")},g.wa=function(e,n,t){return 0<=n&&n<this.C?this.W(null,n):t},g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){if(this.root.va)return"number"===typeof n?this.wa(null,n,t):t;throw Error("lookup after persistent!")},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.ia(null,n);case 3:return this.M(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.ia(null,n)},e.c=function(e,n,t){return this.M(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.ia(null,e)},g.b=function(e,n){return this.M(null,e,n)},$i.prototype.ra=function(){var e=null!=this.pd&&B(this.pd);return e||null!=this.Rd&&this.Rd.ra()},$i.prototype.next=function(){if(null!=this.pd){var e=C(this.pd);return this.pd=D(this.pd),e}if(null!=this.Rd&&this.Rd.ra())return this.Rd.next();throw Error("No such element")},$i.prototype.remove=function(){return Error("Unsupported operation")},g=aj.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){var e=D(this.Ab);return e?new aj(this.H,e,this.Fb,null):null!=this.Fb?new aj(this.H,this.Fb,null,null):null},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Pd(Se,this.H)},g.Fa=function(){return C(this.Ab)},g.Ha=function(){var e=D(this.Ab);return e?new aj(this.H,e,this.Fb,null):null==this.Fb?this.pa(null):new aj(this.H,this.Fb,null,null)},g.$=function(){return this},g.O=function(e,n){return n===this.H?this:new aj(n,this.Ab,this.Fb,this.B)},g.ga=function(e,n){return vf(n,this)},aj.prototype[ad]=function(){return Ue(this)},g=bj.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,this.count.a?this.count.a(this):this.count.call(null,this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.ua=function(){return new $i(this.Ab,ze(this.Fb))},g.N=function(){return this.H},g.X=function(){return this.count},g.Xb=function(){return C(this.Ab)},g.Yb=function(){if(p(this.Ab)){var e=D(this.Ab);return e?new bj(this.H,this.count-1,e,this.Fb,null):new bj(this.H,this.count-1,B(this.Fb),I,null)}return this},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Pd(cj,this.H)},g.Fa=function(){return C(this.Ab)},g.Ha=function(){return Re(B(this))},g.$=function(){var e=B(this.Fb),n=this.Ab;return p(p(n)?n:e)?new aj(null,this.Ab,B(e),null):null},g.O=function(e,n){return n===this.H?this:new bj(n,this.count,this.Ab,this.Fb,this.B)},g.ga=function(e,n){return p(this.Ab)?(e=this.Fb,n=new bj(this.H,this.count+1,this.Ab,Cf.b(p(e)?e:I,n),null)):n=new bj(this.H,this.count+1,Cf.b(this.Ab,n),I,null),n};var cj=new bj(null,0,null,I,Xe);function dj(){this.h=2097152,this.I=0}bj.prototype[ad]=function(){return Ue(this)},dj.prototype.Y=function(){return!1};var ej=new dj;function fj(e,n){return ag(M(n)&&!Uf(n)&&F(e)===F(n)?(null!=e?1048576&e.h||h===e.Qh||!e.h&&Xc(Sd,e):Xc(Sd,e))?kg((function(e,t,r){return!!A.b(x.c(n,t,ej),r)||bf(!1)}),!0,e):Dh((function(e){return A.b(x.c(n,C(e),ej),zf(e))}),e):null)}function gj(e,n,t,r){this.J=0,this.zh=e,this.jf=n,this.Vc=t,this.vf=r}function hj(e){this.ha=e}function ij(e){this.ha=e}function jj(e,n){if(n instanceof z)e:{var t=e.length;n=n.da;for(var r=0;;){if(t<=r){e=-1;break e}if(e[r]instanceof z&&n===e[r].da){e=r;break e}r+=2}}else if("string"==typeof n||"number"===typeof n)e:for(t=e.length,r=0;;){if(t<=r){e=-1;break e}if(n===e[r]){e=r;break e}r+=2}else if(n instanceof w)e:for(t=e.length,n=n.wc,r=0;;){if(t<=r){e=-1;break e}if(e[r]instanceof w&&n===e[r].wc){e=r;break e}r+=2}else if(null==n)e:for(n=e.length,t=0;;){if(n<=t){e=-1;break e}if(null==e[t]){e=t;break e}t+=2}else e:for(t=e.length,r=0;;){if(t<=r){e=-1;break e}if(A.b(n,e[r])){e=r;break e}r+=2}return e}function Gi(e,n){this.key=e,this.m=n,this.B=null,this.h=166619935,this.I=0}function Oi(e){return null!=e&&!!(2048&e.h||h===e.Th)}function kj(e,n,t){this.l=e,this.J=n,this.Kb=t,this.h=32374990,this.I=0}function lj(e,n){this.l=e,this.J=0,this.C=n}function n(e,n,t,r){this.H=e,this.C=n,this.l=t,this.B=r,this.h=16647951,this.I=139268}gj.prototype.ra=function(){var e=this.J<this.jf;return e||this.vf.ra()},gj.prototype.next=function(){if(this.J<this.jf){var e=pf(this.Vc,this.J);return this.J+=1,new Gi(e,xd(this.zh,e))}return this.vf.next()},gj.prototype.remove=function(){return Error("Unsupported operation")},hj.prototype.next=function(){if(null!=this.ha){var e=C(this.ha),n=J(e,0,null);return e=J(e,1,null),this.ha=D(this.ha),{value:[n,e],done:!1}}return{value:null,done:!0}},ij.prototype.next=function(){if(null!=this.ha){var e=C(this.ha);return this.ha=D(this.ha),{value:[e,e],done:!1}}return{value:null,done:!0}},g=Gi.prototype,g.Ac=function(e,n){switch(n){case 0:return new Gi(0,this.key);case 1:return new Gi(1,this.m);default:return null}},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.ia=function(e,n){return this.wa(null,n,null)},g.M=function(e,n,t){return this.wa(null,n,t)},g.W=function(e,n){if(0===n)return this.key;if(1===n)return this.m;throw Error("Index out of bounds")},g.wa=function(e,n,t){return 0===n?this.key:1===n?this.m:t},g.Ib=function(e,n,t){return new Q(null,2,5,R,[this.key,this.m],null).Ib(null,n,t)},g.N=function(){return null},g.X=function(){return 2},g.Ce=function(){return this.key},g.De=function(){return this.m},g.Xb=function(){return this.m},g.Yb=function(){return new Q(null,1,5,R,[this.key],null)},g.Bc=function(){return new Qe([this.m,this.key],0,null)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return null},g.Ba=function(e,n){return ff(this,n)},g.Ca=function(e,n,t){return gf(this,n,t)},g.fa=function(e,n,t){return K.c(new Q(null,2,5,R,[this.key,this.m],null),n,t)},g.$=function(){return new Qe([this.key,this.m],0,null)},g.O=function(e,n){return Kf(new Q(null,2,5,R,[this.key,this.m],null),n)},g.ga=function(e,n){return new Q(null,3,5,R,[this.key,this.m,n],null)},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.W(null,n);case 3:return this.wa(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.W(null,n)},e.c=function(e,n,t){return this.wa(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.W(null,e)},g.b=function(e,n){return this.wa(null,e,n)},g=kj.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.Kb},g.za=function(){return this.J<this.l.length-2?new kj(this.l,this.J+2,null):null},g.X=function(){return(this.l.length-this.J)/2},g.Z=function(){return We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Se},g.Ba=function(e,n){return wf(n,this)},g.Ca=function(e,n,t){return yf(n,t,this)},g.Fa=function(){return new Gi(this.l[this.J],this.l[this.J+1])},g.Ha=function(){return this.J<this.l.length-2?new kj(this.l,this.J+2,null):Se},g.$=function(){return this},g.O=function(e,n){return n===this.Kb?this:new kj(this.l,this.J,n)},g.ga=function(e,n){return vf(n,this)},kj.prototype[ad]=function(){return Ue(this)},lj.prototype.ra=function(){return this.J<this.C},lj.prototype.next=function(){var e=new Gi(this.l[this.J],this.l[this.J+1]);return this.J+=2,e},g=n.prototype,g.Ac=function(e,n){return-1===(e=jj(this.l,n))?null:new Gi(this.l[e],this.l[e+1])},g.toString=function(){return Be(this)},g.keys=function(){return Ue(mj.a?mj.a(this):mj.call(null,this))},g.entries=function(){return new hj(B(B(this)))},g.values=function(){return Ue(nj.a?nj.a(this):nj.call(null,this))},g.has=function(e){return N(this,e)},g.get=function(e,n){return this.M(null,e,n)},g.forEach=function(e){for(var n=B(this),t=null,r=0,o=0;;)if(o<r){var i=t.W(null,o),l=J(i,0,null);i=J(i,1,null),e.b?e.b(i,l):e.call(null,i,l),o+=1}else{if(!(n=B(n)))return null;Wf(n)?(t=re(n),n=se(n),l=t,r=F(t),t=l):(l=J(t=C(n),0,null),i=J(t,1,null),e.b?e.b(i,l):e.call(null,i,l),n=D(n),t=null,r=0),o=0}},g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){return-1===(e=jj(this.l,n))?t:this.l[e+1]},g.Aa=function(e,n,r){e=this.l.length;for(var o=0;;){if(!(o<e))return r;var i=this.l[o],l=this.l[o+1];if(cf(r=n.c?n.c(r,i,l):n.call(null,r,i,l)))return t(r);o+=2}},g.ua=function(){return new lj(this.l,2*this.C)},g.N=function(){return this.H},g.X=function(){return this.C},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=Ye(this)},g.Y=function(e,n){if(!M(n)||Uf(n))return!1;if(e=this.l.length,this.C!==n.X(null))return!1;for(var t=0;;){if(!(t<e))return!0;var r=n.M(null,this.l[t],Yf);if(r===Yf)return!1;if(!A.b(this.l[t+1],r))return!1;t+=2}},g.hd=function(){return new oj(this.l.length,ed(this.l))},g.pa=function(){return Pd(S,this.H)},g.Ba=function(e,n){return ig(this,n)},g.Ca=function(e,n,t){return jg(this,n,t)},g.Ka=function(e,t){if(!(0<=jj(this.l,t)))return this;var r=(e=this.l.length)-2;if(0===r)return this.pa(null);r=Array(r);for(var o=0,i=0;;){if(o>=e)return new n(this.H,this.C-1,r,null);A.b(t,this.l[o])||(r[i]=this.l[o],r[i+1]=this.l[o+1],i+=2),o+=2}},g.fa=function(e,t,r){if(-1===(e=jj(this.l,t))){if(this.C<pj){for(var o=(e=this.l).length,i=Array(o+2),l=0;l<o;)i[l]=e[l],l+=1;return i[o]=t,i[o+1]=r,new n(this.H,this.C+1,i,null)}return Pd(zd(ji.b(qj,this),t,r),this.H)}return r===this.l[e+1]?this:((t=ed(this.l))[e+1]=r,new n(this.H,this.C,t,null))},g.$=function(){var e=this.l;return 0<=e.length-2?new kj(e,0,null):null},g.O=function(e,t){return t===this.H?this:new n(t,this.C,this.l,this.B)},g.ga=function(e,n){if(Vf(n))return this.fa(null,qd(n,0),qd(n,1));for(e=this,n=B(n);;){if(null==n)return e;var t=C(n);if(!Vf(t))throw Error("conj on a map takes map entries or seqables of map entries");e=zd(e,qd(t,0),qd(t,1)),n=D(n)}},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.ia(null,n);case 3:return this.M(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.ia(null,n)},e.c=function(e,n,t){return this.M(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.ia(null,e)},g.b=function(e,n){return this.M(null,e,n)};var S=new n(null,0,[],Ze),pj=8;function rj(e){return new n(null,e.length/2,e,null)}function Gf(e){for(var t=[],r=0;r<e.length;){var o=e[r],i=e[r+1],l=jj(t,o);-1===l?((l=t).push(o),l.push(i)):t[l+1]=i,r+=2}return new n(null,t.length/2,t,null)}function oj(e,n){this.Uc={},this.jc=e,this.l=n,this.h=259,this.I=56}function sj(e,n){for(var t=je(qj),r=0;;){if(!(r<e))return t;t=me(t,n[r],n[r+1]),r+=2}}function tj(){this.m=!1}function uj(e,n){return e===n||(!!P(e,n)||A.b(e,n))}function vj(e,n,t){return(e=ed(e))[n]=t,e}function wj(e,n){var t=Array(e.length-2);return Xf(e,0,t,0,2*n),Xf(e,2*(n+1),t,2*n,t.length-2*n),t}function xj(e,n,t,r){return(e=e.Gc(n)).l[t]=r,e}function yj(e,n,t){for(var r=e.length,o=0,i=t;;){if(!(o<r))return i;if(null!=(t=e[o])){var l=e[o+1];t=n.c?n.c(i,t,l):n.call(null,i,t,l)}else t=null!=(t=e[o+1])?t.ad(n,i):i;if(cf(t))return t;o+=2,i=t}}function zj(e){this.l=e,this.J=0,this.mc=this.Pd=null}function Aj(e,n,t){this.va=e,this.oa=n,this.l=t,this.I=131072,this.h=0}function Bj(e,n,t,r){if(e.oa===t)return null;var o=(n=(e=e.Gc(n)).l).length;return e.oa^=t,Xf(n,2*(r+1),n,2*r,o-2*(r+1)),n[o-2]=null,n[o-1]=null,e}n.prototype[ad]=function(){return Ue(this)},g=oj.prototype,g.X=function(){if(this.Uc)return tg(this.jc,2);throw Error("count after persistent!")},g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){if(this.Uc)return-1===(e=jj(this.l,n))?t:this.l[e+1];throw Error("lookup after persistent!")},g.kd=function(e,n){if(!this.Uc)throw Error("conj! after persistent!");if(Oi(n))return this.jd(null,Pi.a?Pi.a(n):Pi.call(null,n),Qi.a?Qi.a(n):Qi.call(null,n));if(Vf(n))return this.jd(null,n.a?n.a(0):n.call(null,0),n.a?n.a(1):n.call(null,1));for(e=B(n),n=this;;){var t=C(e);if(!p(t))return n;e=D(e),n=me(n,Pi.a?Pi.a(t):Pi.call(null,t),Qi.a?Qi.a(t):Qi.call(null,t))}},g.Cd=function(){if(this.Uc)return this.Uc=!1,new n(null,tg(this.jc,2),this.l,null);throw Error("persistent! called twice")},g.jd=function(e,n,t){if(this.Uc)return-1===(e=jj(this.l,n))?this.jc+2<=2*pj?(this.jc+=2,this.l.push(n),this.l.push(t),this):Zg(sj.b?sj.b(this.jc,this.l):sj.call(null,this.jc,this.l),n,t):(t!==this.l[e+1]&&(this.l[e+1]=t),this);throw Error("assoc! after persistent!")},g.Fe=function(e,n){if(this.Uc)return 0<=(e=jj(this.l,n))&&(this.l[e]=this.l[this.jc-2],this.l[e+1]=this.l[this.jc-1],(e=this.l).pop(),e.pop(),this.jc-=2),this;throw Error("dissoc! after persistent!")},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.M(null,n,null);case 3:return this.M(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.M(null,n,null)},e.c=function(e,n,t){return this.M(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.M(null,e,null)},g.b=function(e,n){return this.M(null,e,n)},zj.prototype.advance=function(){for(var e=this.l.length;;){if(!(this.J<e))return!1;var n=this.l[this.J],t=this.l[this.J+1];if(null!=n?n=this.Pd=new Gi(n,t):null!=t?n=!!(n=ze(t)).ra()&&(this.mc=n):n=!1,this.J+=2,n)return!0}},zj.prototype.ra=function(){var e=null!=this.Pd;return e||((e=null!=this.mc)?e:this.advance())},zj.prototype.next=function(){if(null!=this.Pd){var e=this.Pd;return this.Pd=null,e}if(null!=this.mc)return e=this.mc.next(),this.mc.ra()||(this.mc=null),e;if(this.advance())return this.next();throw Error("No such element")},zj.prototype.remove=function(){return Error("Unsupported operation")},g=Aj.prototype,g.Gc=function(e){if(e===this.va)return this;var n=vg(this.oa),t=Array(0>n?4:2*(n+1));return Xf(this.l,0,t,0,2*n),new Aj(e,this.oa,t)},g.Md=function(e,n,t,r,o){var i=1<<(t>>>n&31);if(0===(this.oa&i))return this;var l=vg(this.oa&i-1),a=this.l[2*l],u=this.l[2*l+1];return null==a?(n=u.Md(e,n+5,t,r,o))===u?this:null!=n?xj(this,e,2*l+1,n):this.oa===i?null:Bj(this,e,i,l):uj(r,a)?(o.m=!0,Bj(this,e,i,l)):this},g.Kd=function(){return Cj?Cj(this.l):Dj.call(null,this.l)},g.ad=function(e,n){return yj(this.l,e,n)},g.$c=function(e,n,t,r){var o=1<<(n>>>e&31);if(0===(this.oa&o))return r;var i=vg(this.oa&o-1);return o=this.l[2*i],i=this.l[2*i+1],null==o?i.$c(e+5,n,t,r):uj(t,o)?i:r},g.ic=function(e,n,t,r,o,i){var l=1<<(t>>>n&31),a=vg(this.oa&l-1);if(0===(this.oa&l)){var u=vg(this.oa);if(2*u<this.l.length){for(n=(e=this.Gc(e)).l,i.m=!0,i=2*a+((t=2*(u-a))-1),u=2*(a+1)+(t-1);0!==t;)n[u]=n[i],--u,--t,--i;return n[2*a]=r,n[2*a+1]=o,e.oa|=l,e}if(16<=u){for((a=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])[t>>>n&31]=Ej.ic(e,n+5,t,r,o,i),o=r=0;32>r;)0===(this.oa>>>r&1)||(a[r]=null!=this.l[o]?Ej.ic(e,n+5,Je(this.l[o]),this.l[o],this.l[o+1],i):this.l[o+1],o+=2),r+=1;return new Fj(e,u+1,a)}return n=Array(2*(u+4)),Xf(this.l,0,n,0,2*a),n[2*a]=r,n[2*a+1]=o,Xf(this.l,2*a,n,2*(a+1),2*(u-a)),i.m=!0,(e=this.Gc(e)).l=n,e.oa|=l,e}return u=this.l[2*a],l=this.l[2*a+1],null==u?(u=l.ic(e,n+5,t,r,o,i))===l?this:xj(this,e,2*a+1,u):uj(r,u)?o===l?this:xj(this,e,2*a+1,o):(i.m=!0,i=n+5,r=Gj?Gj(e,i,u,l,t,r,o):Hj.call(null,e,i,u,l,t,r,o),o=2*a,a=2*a+1,(e=this.Gc(e)).l[o]=null,e.l[a]=r,e)},g.hc=function(e,n,t,r,o){var i=1<<(n>>>e&31),l=vg(this.oa&i-1);if(0===(this.oa&i)){var a=vg(this.oa);if(16<=a){for((l=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])[n>>>e&31]=Ej.hc(e+5,n,t,r,o),r=t=0;32>t;)0===(this.oa>>>t&1)||(l[t]=null!=this.l[r]?Ej.hc(e+5,Je(this.l[r]),this.l[r],this.l[r+1],o):this.l[r+1],r+=2),t+=1;return new Fj(null,a+1,l)}return e=Array(2*(a+1)),Xf(this.l,0,e,0,2*l),e[2*l]=t,e[2*l+1]=r,Xf(this.l,2*l,e,2*(l+1),2*(a-l)),o.m=!0,new Aj(null,this.oa|i,e)}var u=this.l[2*l];return i=this.l[2*l+1],null==u?(a=i.hc(e+5,n,t,r,o))===i?this:new Aj(null,this.oa,vj(this.l,2*l+1,a)):uj(t,u)?r===i?this:new Aj(null,this.oa,vj(this.l,2*l+1,r)):(o.m=!0,o=this.oa,a=this.l,e+=5,e=Ij?Ij(e,u,i,n,t,r):Hj.call(null,e,u,i,n,t,r),t=2*l,l=2*l+1,(r=ed(a))[t]=null,r[l]=e,new Aj(null,o,r))},g.Jd=function(e,n,t,r){var o=1<<(n>>>e&31);if(0===(this.oa&o))return r;var i=vg(this.oa&o-1);return o=this.l[2*i],i=this.l[2*i+1],null==o?i.Jd(e+5,n,t,r):uj(t,o)?new Gi(o,i):r},g.Ld=function(e,n,t){var r=1<<(n>>>e&31);if(0===(this.oa&r))return this;var o=vg(this.oa&r-1),i=this.l[2*o],l=this.l[2*o+1];return null==i?(e=l.Ld(e+5,n,t))===l?this:null!=e?new Aj(null,this.oa,vj(this.l,2*o+1,e)):this.oa===r?null:new Aj(null,this.oa^r,wj(this.l,o)):uj(t,i)?new Aj(null,this.oa^r,wj(this.l,o)):this},g.ua=function(){return new zj(this.l)};var Ej=new Aj(null,0,[]);function Jj(e,n,t){var r=e.l,o=r.length;e=Array(2*(e.C-1));for(var i=0,l=1,a=0;;){if(!(i<o))return new Aj(n,a,e);i!==t&&null!=r[i]?(e[l]=r[i],l+=2,a|=1<<i,i+=1):i+=1}}function Kj(e){this.l=e,this.J=0,this.mc=null}function Fj(e,n,t){this.va=e,this.C=n,this.l=t,this.I=131072,this.h=0}function Nj(e,n,t){n*=2;for(var r=0;;){if(!(r<n))return-1;if(uj(t,e[r]))return r;r+=2}}function Oj(e,n,t,r){this.va=e,this.Ec=n,this.C=t,this.l=r,this.I=131072,this.h=0}function Hj(e){switch(arguments.length){case 6:return Ij(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return Gj(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}}function Ij(e,n,t,r,o,i){var l=Je(n);if(l===r)return new Oj(null,l,2,[n,t,o,i]);var a=new tj;return Ej.hc(e,l,n,t,a).hc(e,r,o,i,a)}function Gj(e,n,t,r,o,i,l){var a=Je(t);if(a===o)return new Oj(null,a,2,[t,r,i,l]);var u=new tj;return Ej.ic(e,n,a,t,r,u).ic(e,n,o,i,l,u)}function Pj(e,n,t,r,o){this.H=e,this.sa=n,this.J=t,this.ha=r,this.B=o,this.h=32374988,this.I=0}function Dj(e){switch(arguments.length){case 1:return Cj(arguments[0]);case 3:return Qj(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}}function Cj(e){return Qj(e,0,null)}function Qj(e,n,t){if(null!=t)return new Pj(null,e,n,t,null);for(t=e.length;;){if(!(n<t))return null;if(null!=e[n])return new Pj(null,e,n,null,null);var r=e[n+1];if(p(r)&&p(r=r.Kd()))return new Pj(null,e,n+2,r,null);n+=2}}function Rj(e,n,t,r,o){this.H=e,this.sa=n,this.J=t,this.ha=r,this.B=o,this.h=32374988,this.I=0}function Mj(e){switch(arguments.length){case 1:return Lj(arguments[0]);case 3:return Sj(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}}function Lj(e){return Sj(e,0,null)}function Sj(e,n,t){if(null!=t)return new Rj(null,e,n,t,null);for(t=e.length;;){if(!(n<t))return null;var r=e[n];if(p(r)&&p(r=r.Kd()))return new Rj(null,e,n+1,r,null);n+=1}}function Tj(e,n){this.Za=e,this.Pf=n,this.Ye=!1}function Uj(e,n,t,r,o,i){this.H=e,this.C=n,this.root=t,this.Ya=r,this.Za=o,this.B=i,this.h=16123663,this.I=139268}Kj.prototype.ra=function(){for(var e=this.l.length;;){if(null!=this.mc&&this.mc.ra())return!0;if(!(this.J<e))return!1;var n=this.l[this.J];this.J+=1,null!=n&&(this.mc=ze(n))}},Kj.prototype.next=function(){if(this.ra())return this.mc.next();throw Error("No such element")},Kj.prototype.remove=function(){return Error("Unsupported operation")},g=Fj.prototype,g.Gc=function(e){return e===this.va?this:new Fj(e,this.C,ed(this.l))},g.Md=function(e,n,t,r,o){var i=t>>>n&31,l=this.l[i];return null==l||(n=l.Md(e,n+5,t,r,o))===l?this:null==n?8>=this.C?Jj(this,e,i):(--(e=xj(this,e,i,n)).C,e):xj(this,e,i,n)},g.Kd=function(){return Lj?Lj(this.l):Mj.call(null,this.l)},g.ad=function(e,n){for(var t=this.l.length,r=0;;){if(!(r<t))return n;var o=this.l[r];if(null!=o){if(cf(n=o.ad(e,n)))return n;r+=1}else r+=1}},g.$c=function(e,n,t,r){var o=this.l[n>>>e&31];return null!=o?o.$c(e+5,n,t,r):r},g.ic=function(e,n,t,r,o,i){var l=t>>>n&31,a=this.l[l];return null==a?((e=xj(this,e,l,Ej.ic(e,n+5,t,r,o,i))).C+=1,e):(n=a.ic(e,n+5,t,r,o,i))===a?this:xj(this,e,l,n)},g.hc=function(e,n,t,r,o){var i=n>>>e&31,l=this.l[i];return null==l?new Fj(null,this.C+1,vj(this.l,i,Ej.hc(e+5,n,t,r,o))):(e=l.hc(e+5,n,t,r,o))===l?this:new Fj(null,this.C,vj(this.l,i,e))},g.Jd=function(e,n,t,r){var o=this.l[n>>>e&31];return null!=o?o.Jd(e+5,n,t,r):r},g.Ld=function(e,n,t){var r=n>>>e&31,o=this.l[r];return null!=o?(e=o.Ld(e+5,n,t))===o?this:null==e?8>=this.C?Jj(this,null,r):new Fj(null,this.C-1,vj(this.l,r,e)):new Fj(null,this.C,vj(this.l,r,e)):this},g.ua=function(){return new Kj(this.l)},g=Oj.prototype,g.Gc=function(e){if(e===this.va)return this;var n=Array(2*(this.C+1));return Xf(this.l,0,n,0,2*this.C),new Oj(e,this.Ec,this.C,n)},g.Md=function(e,n,t,r,o){return-1===(n=Nj(this.l,this.C,r))?this:(o.m=!0,1===this.C?null:((o=(e=this.Gc(e)).l)[n]=o[2*this.C-2],o[n+1]=o[2*this.C-1],o[2*this.C-1]=null,o[2*this.C-2]=null,--e.C,e))},g.Kd=function(){return Cj?Cj(this.l):Dj.call(null,this.l)},g.ad=function(e,n){return yj(this.l,e,n)},g.$c=function(e,n,t,r){return 0>(e=Nj(this.l,this.C,t))?r:uj(t,this.l[e])?this.l[e+1]:r},g.ic=function(e,n,t,r,o,i){return t===this.Ec?-1===(n=Nj(this.l,this.C,r))?this.l.length>2*this.C?(n=2*this.C,t=2*this.C+1,(e=this.Gc(e)).l[n]=r,e.l[t]=o,i.m=!0,e.C+=1,e):(t=this.l.length,n=Array(t+2),Xf(this.l,0,n,0,t),n[t]=r,n[t+1]=o,i.m=!0,r=this.C+1,e===this.va?(this.l=n,this.C=r,e=this):e=new Oj(this.va,this.Ec,r,n),e):this.l[n+1]===o?this:xj(this,e,n+1,o):new Aj(e,1<<(this.Ec>>>n&31),[null,this,null,null]).ic(e,n,t,r,o,i)},g.hc=function(e,n,t,r,o){return n===this.Ec?-1===(e=Nj(this.l,this.C,t))?(e=2*this.C,n=Array(e+2),Xf(this.l,0,n,0,e),n[e]=t,n[e+1]=r,o.m=!0,new Oj(null,this.Ec,this.C+1,n)):A.b(this.l[e+1],r)?this:new Oj(null,this.Ec,this.C,vj(this.l,e+1,r)):new Aj(null,1<<(this.Ec>>>e&31),[null,this]).hc(e,n,t,r,o)},g.Jd=function(e,n,t,r){return 0>(e=Nj(this.l,this.C,t))?r:uj(t,this.l[e])?new Gi(this.l[e],this.l[e+1]):r},g.Ld=function(e,n,t){return-1===(e=Nj(this.l,this.C,t))?this:1===this.C?null:new Oj(null,this.Ec,this.C-1,wj(this.l,tg(e,2)))},g.ua=function(){return new zj(this.l)},g=Pj.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){if(null==this.ha){var e=this.sa,n=this.J+2;return Qj?Qj(e,n,null):Dj.call(null,e,n,null)}e=this.sa,n=this.J;var t=D(this.ha);return Qj?Qj(e,n,t):Dj.call(null,e,n,t)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Se},g.Ba=function(e,n){return wf(n,this)},g.Ca=function(e,n,t){return yf(n,t,this)},g.Fa=function(){return null==this.ha?new Gi(this.sa[this.J],this.sa[this.J+1]):C(this.ha)},g.Ha=function(){var e=this,n=null==e.ha?function(){var n=e.sa,t=e.J+2;return Qj?Qj(n,t,null):Dj.call(null,n,t,null)}():function(){var n=e.sa,t=e.J,r=D(e.ha);return Qj?Qj(n,t,r):Dj.call(null,n,t,r)}();return null!=n?n:Se},g.$=function(){return this},g.O=function(e,n){return n===this.H?this:new Pj(n,this.sa,this.J,this.ha,this.B)},g.ga=function(e,n){return vf(n,this)},Pj.prototype[ad]=function(){return Ue(this)},g=Rj.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){var e=this.sa,n=this.J,t=D(this.ha);return Sj?Sj(e,n,t):Mj.call(null,e,n,t)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Se},g.Ba=function(e,n){return wf(n,this)},g.Ca=function(e,n,t){return yf(n,t,this)},g.Fa=function(){return C(this.ha)},g.Ha=function(){var e=this.sa,n=this.J,t=D(this.ha);return null!=(e=Sj?Sj(e,n,t):Mj.call(null,e,n,t))?e:Se},g.$=function(){return this},g.O=function(e,n){return n===this.H?this:new Rj(n,this.sa,this.J,this.ha,this.B)},g.ga=function(e,n){return vf(n,this)},Rj.prototype[ad]=function(){return Ue(this)},Tj.prototype.ra=function(){return!this.Ye||this.Pf.ra()},Tj.prototype.next=function(){return this.Ye?this.Pf.next():(this.Ye=!0,new Gi(null,this.Za))},Tj.prototype.remove=function(){return Error("Unsupported operation")},g=Uj.prototype,g.Ac=function(e,n){return null==n?this.Ya?new Gi(null,this.Za):null:null==this.root?null:this.root.Jd(0,Je(n),n,null)},g.toString=function(){return Be(this)},g.keys=function(){return Ue(mj.a?mj.a(this):mj.call(null,this))},g.entries=function(){return new hj(B(B(this)))},g.values=function(){return Ue(nj.a?nj.a(this):nj.call(null,this))},g.has=function(e){return N(this,e)},g.get=function(e,n){return this.M(null,e,n)},g.forEach=function(e){for(var n=B(this),t=null,r=0,o=0;;)if(o<r){var i=t.W(null,o),l=J(i,0,null);i=J(i,1,null),e.b?e.b(i,l):e.call(null,i,l),o+=1}else{if(!(n=B(n)))return null;Wf(n)?(t=re(n),n=se(n),l=t,r=F(t),t=l):(l=J(t=C(n),0,null),i=J(t,1,null),e.b?e.b(i,l):e.call(null,i,l),n=D(n),t=null,r=0),o=0}},g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){return null==n?this.Ya?this.Za:t:null==this.root?t:this.root.$c(0,Je(n),n,t)},g.Aa=function(e,n,r){return cf(e=this.Ya?n.c?n.c(r,null,this.Za):n.call(null,r,null,this.Za):r)?t(e):null!=this.root?df(this.root.ad(n,e)):e},g.ua=function(){var e=this.root?ze(this.root):mh();return this.Ya?new Tj(this.Za,e):e},g.N=function(){return this.H},g.X=function(){return this.C},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=Ye(this)},g.Y=function(e,n){return fj(this,n)},g.hd=function(){return new Vj(this.root,this.C,this.Ya,this.Za)},g.pa=function(){return Pd(qj,this.H)},g.Ka=function(e,n){return null==n?this.Ya?new Uj(this.H,this.C-1,this.root,!1,null,null):this:null==this.root||(e=this.root.Ld(0,Je(n),n))===this.root?this:new Uj(this.H,this.C-1,e,this.Ya,this.Za,null)},g.fa=function(e,n,t){return null==n?this.Ya&&t===this.Za?this:new Uj(this.H,this.Ya?this.C:this.C+1,this.root,!0,t,null):(e=new tj,(n=(null==this.root?Ej:this.root).hc(0,Je(n),n,t,e))===this.root?this:new Uj(this.H,e.m?this.C+1:this.C,n,this.Ya,this.Za,null))},g.$=function(){if(0<this.C){var e=null!=this.root?this.root.Kd():null;return this.Ya?vf(new Gi(null,this.Za),e):e}return null},g.O=function(e,n){return n===this.H?this:new Uj(n,this.C,this.root,this.Ya,this.Za,this.B)},g.ga=function(e,n){if(Vf(n))return this.fa(null,qd(n,0),qd(n,1));for(e=this,n=B(n);;){if(null==n)return e;var t=C(n);if(!Vf(t))throw Error("conj on a map takes map entries or seqables of map entries");e=zd(e,qd(t,0),qd(t,1)),n=D(n)}},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.ia(null,n);case 3:return this.M(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.ia(null,n)},e.c=function(e,n,t){return this.M(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.ia(null,e)},g.b=function(e,n){return this.M(null,e,n)};var qj=new Uj(null,0,null,!1,null,Ze);function Wj(e){for(var n=e.length,t=0,r=je(qj);;){if(!(t<n))return le(r);var o=t+2;r=me(r,e[t],e[t+1]),t=o}}function Xj(e,n){for(var t=e.length,r=0,o=je(qj);;){if(!(r<t))return le(o);var i=r+1;o=me(o,e[r],n[r]),r=i}}function Vj(e,n,t,r){this.va={},this.root=e,this.count=n,this.Ya=t,this.Za=r,this.h=259,this.I=56}function Yj(e,n,t){if(e.va){if(null==n)e.Za!==t&&(e.Za=t),e.Ya||(e.count+=1,e.Ya=!0);else{var r=new tj;(n=(null==e.root?Ej:e.root).ic(e.va,0,Je(n),n,t,r))!==e.root&&(e.root=n),r.m&&(e.count+=1)}return e}throw Error("assoc! after persistent!")}function Zj(e,n,t){for(var r=n;;){if(null==e)return r;n=t?e.left:e.right,r=Cf.b(r,e),e=n}}function ak(e,n,t,r,o){this.H=e,this.stack=n,this.Rc=t,this.C=r,this.B=o,this.h=32374990,this.I=0}function bk(e,n,t){return new ak(null,Zj(e,null,n),n,t,null)}function ck(e,n,t,r){return t instanceof dk?t.left instanceof dk?new dk(t.key,t.m,t.left.xc(),new ek(e,n,t.right,r)):t.right instanceof dk?new dk(t.right.key,t.right.m,new ek(t.key,t.m,t.left,t.right.left),new ek(e,n,t.right.right,r)):new ek(e,n,t,r):new ek(e,n,t,r)}function fk(e,n,t,r){return r instanceof dk?r.right instanceof dk?new dk(r.key,r.m,new ek(e,n,t,r.left),r.right.xc()):r.left instanceof dk?new dk(r.left.key,r.left.m,new ek(e,n,t,r.left.left),new ek(r.key,r.m,r.left.right,r.right)):new ek(e,n,t,r):new ek(e,n,t,r)}function gk(e,n,t,r){if(t instanceof dk)return new dk(e,n,t.xc(),r);if(r instanceof ek)return fk(e,n,t,r.Qd());if(r instanceof dk&&r.left instanceof ek)return new dk(r.left.key,r.left.m,new ek(e,n,t,r.left.left),fk(r.key,r.m,r.left.right,r.right.Qd()));throw Error("red-black tree invariant violation")}function hk(e,n,t,r){if(r instanceof dk)return new dk(e,n,t,r.xc());if(t instanceof ek)return ck(e,n,t.Qd(),r);if(t instanceof dk&&t.right instanceof ek)return new dk(t.right.key,t.right.m,ck(t.key,t.m,t.left.Qd(),t.right.left),new ek(e,n,t.right.right,r));throw Error("red-black tree invariant violation")}Uj.prototype[ad]=function(){return Ue(this)},g=Vj.prototype,g.X=function(){if(this.va)return this.count;throw Error("count after persistent!")},g.ia=function(e,n){return null==n?this.Ya?this.Za:null:null==this.root?null:this.root.$c(0,Je(n),n)},g.M=function(e,n,t){return null==n?this.Ya?this.Za:t:null==this.root?t:this.root.$c(0,Je(n),n,t)},g.kd=function(e,n){e:{if(!this.va)throw Error("conj! after persistent");if(Oi(n))e=Yj(this,Pi.a?Pi.a(n):Pi.call(null,n),Qi.a?Qi.a(n):Qi.call(null,n));else if(Vf(n))e=Yj(this,n.a?n.a(0):n.call(null,0),n.a?n.a(1):n.call(null,1));else for(e=B(n),n=this;;){var t=C(e);if(!p(t)){e=n;break e}e=D(e),n=Yj(n,Pi.a?Pi.a(t):Pi.call(null,t),Qi.a?Qi.a(t):Qi.call(null,t))}}return e},g.Cd=function(){if(!this.va)throw Error("persistent! called twice");return this.va=null,new Uj(null,this.count,this.root,this.Ya,this.Za,null)},g.jd=function(e,n,t){return Yj(this,n,t)},g.Fe=function(e,n){if(!this.va)throw Error("dissoc! after persistent!");return null==n?this.Ya&&(this.Ya=!1,this.Za=null,--this.count):null!=this.root&&(e=new tj,(n=this.root.Md(this.va,0,Je(n),n,e))!==this.root&&(this.root=n),e.m&&--this.count),this},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.ia(null,n);case 3:return this.M(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.ia(null,n)},e.c=function(e,n,t){return this.M(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.ia(null,e)},g.b=function(e,n){return this.M(null,e,n)},g=ak.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.H},g.za=function(){var e=C(this.stack);return null==(e=Zj(this.Rc?e.right:e.left,D(this.stack),this.Rc))?null:new ak(null,e,this.Rc,this.C-1,null)},g.X=function(){return 0>this.C?F(D(this))+1:this.C},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Se},g.Ba=function(e,n){return wf(n,this)},g.Ca=function(e,n,t){return yf(n,t,this)},g.Fa=function(){return Mf(this.stack)},g.Ha=function(){var e=C(this.stack);return null!=(e=Zj(this.Rc?e.right:e.left,D(this.stack),this.Rc))?new ak(null,e,this.Rc,this.C-1,null):Se},g.$=function(){return this},g.O=function(e,n){return n===this.H?this:new ak(n,this.stack,this.Rc,this.C,this.B)},g.ga=function(e,n){return vf(n,this)},ak.prototype[ad]=function(){return Ue(this)};var ik=function e(n,t,r){var o=null!=n.left?function(){var o=n.left;return e.c?e.c(o,t,r):e.call(null,o,t,r)}():r;if(cf(o))return o;var i=function(){var e=n.key,r=n.m;return t.c?t.c(o,e,r):t.call(null,o,e,r)}();if(cf(i))return i;if(null!=n.right){var l=n.right;return e.c?e.c(l,t,i):e.call(null,l,t,i)}return i};function ek(e,n,t,r){this.key=e,this.m=n,this.left=t,this.right=r,this.B=null,this.h=166619935,this.I=0}function dk(e,n,t,r){this.key=e,this.m=n,this.left=t,this.right=r,this.B=null,this.h=166619935,this.I=0}g=ek.prototype,g.Ac=function(e,n){switch(n){case 0:return new Gi(0,this.key);case 1:return new Gi(1,this.m);default:return null}},g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.ef=function(e){return e.hf(this)},g.Qd=function(){return new dk(this.key,this.m,this.left,this.right)},g.xc=function(){return this},g.df=function(e){return e.gf(this)},g.replace=function(e,n,t,r){return new ek(e,n,t,r)},g.gf=function(e){return new ek(e.key,e.m,this,e.right)},g.hf=function(e){return new ek(e.key,e.m,e.left,this)},g.ad=function(e,n){return ik(this,e,n)},g.ia=function(e,n){return this.wa(null,n,null)},g.M=function(e,n,t){return this.wa(null,n,t)},g.W=function(e,n){if(0===n)return this.key;if(1===n)return this.m;throw Error("Index out of bounds")},g.wa=function(e,n,t){return 0===n?this.key:1===n?this.m:t},g.Ib=function(e,n,t){return new Q(null,2,5,R,[this.key,this.m],null).Ib(null,n,t)},g.N=function(){return null},g.X=function(){return 2},g.Ce=function(){return this.key},g.De=function(){return this.m},g.Xb=function(){return this.m},g.Yb=function(){return new Q(null,1,5,R,[this.key],null)},g.Bc=function(){return new Qe([this.m,this.key],0,null)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return null},g.Ba=function(e,n){return ff(this,n)},g.Ca=function(e,n,t){return gf(this,n,t)},g.fa=function(e,n,t){return K.c(new Q(null,2,5,R,[this.key,this.m],null),n,t)},g.$=function(){return new Qe([this.key,this.m],0,null)},g.O=function(e,n){return Pd(new Q(null,2,5,R,[this.key,this.m],null),n)},g.ga=function(e,n){return new Q(null,3,5,R,[this.key,this.m,n],null)},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.W(null,n);case 3:return this.wa(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.W(null,n)},e.c=function(e,n,t){return this.wa(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.W(null,e)},g.b=function(e,n){return this.wa(null,e,n)},ek.prototype[ad]=function(){return Ue(this)},g=dk.prototype,g.Ac=function(e,n){switch(n){case 0:return new Gi(0,this.key);case 1:return new Gi(1,this.m);default:return null}},g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.ef=function(e){return new dk(this.key,this.m,this.left,e)},g.Qd=function(){throw Error("red-black tree invariant violation")},g.xc=function(){return new ek(this.key,this.m,this.left,this.right)},g.df=function(e){return new dk(this.key,this.m,e,this.right)},g.replace=function(e,n,t,r){return new dk(e,n,t,r)},g.gf=function(e){return this.left instanceof dk?new dk(this.key,this.m,this.left.xc(),new ek(e.key,e.m,this.right,e.right)):this.right instanceof dk?new dk(this.right.key,this.right.m,new ek(this.key,this.m,this.left,this.right.left),new ek(e.key,e.m,this.right.right,e.right)):new ek(e.key,e.m,this,e.right)},g.hf=function(e){return this.right instanceof dk?new dk(this.key,this.m,new ek(e.key,e.m,e.left,this.left),this.right.xc()):this.left instanceof dk?new dk(this.left.key,this.left.m,new ek(e.key,e.m,e.left,this.left.left),new ek(this.key,this.m,this.left.right,this.right)):new ek(e.key,e.m,e.left,this)},g.ad=function(e,n){return ik(this,e,n)},g.ia=function(e,n){return this.wa(null,n,null)},g.M=function(e,n,t){return this.wa(null,n,t)},g.W=function(e,n){if(0===n)return this.key;if(1===n)return this.m;throw Error("Index out of bounds")},g.wa=function(e,n,t){return 0===n?this.key:1===n?this.m:t},g.Ib=function(e,n,t){return new Q(null,2,5,R,[this.key,this.m],null).Ib(null,n,t)},g.N=function(){return null},g.X=function(){return 2},g.Ce=function(){return this.key},g.De=function(){return this.m},g.Xb=function(){return this.m},g.Yb=function(){return new Q(null,1,5,R,[this.key],null)},g.Bc=function(){return new Qe([this.m,this.key],0,null)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return null},g.Ba=function(e,n){return ff(this,n)},g.Ca=function(e,n,t){return gf(this,n,t)},g.fa=function(e,n,t){return K.c(new Q(null,2,5,R,[this.key,this.m],null),n,t)},g.$=function(){return new Qe([this.key,this.m],0,null)},g.O=function(e,n){return Pd(new Q(null,2,5,R,[this.key,this.m],null),n)},g.ga=function(e,n){return new Q(null,3,5,R,[this.key,this.m,n],null)},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.W(null,n);case 3:return this.wa(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.W(null,n)},e.c=function(e,n,t){return this.wa(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.W(null,e)},g.b=function(e,n){return this.wa(null,e,n)},dk.prototype[ad]=function(){return Ue(this)};var jk=function e(n,t,r,o,i){if(null==t)return new dk(r,o,null,null);var l=function(){var e=t.key;return n.b?n.b(r,e):n.call(null,r,e)}();return 0===l?(i[0]=t,null):0>l?null!=(l=function(){var l=t.left;return e.K?e.K(n,l,r,o,i):e.call(null,n,l,r,o,i)}())?t.df(l):null:null!=(l=function(){var l=t.right;return e.K?e.K(n,l,r,o,i):e.call(null,n,l,r,o,i)}())?t.ef(l):null},kk=function e(n,t){if(null==n)return t;if(null==t)return n;if(n instanceof dk){if(t instanceof dk){var r=function(){var r=n.right,o=t.left;return e.b?e.b(r,o):e.call(null,r,o)}();return r instanceof dk?new dk(r.key,r.m,new dk(n.key,n.m,n.left,r.left),new dk(t.key,t.m,r.right,t.right)):new dk(n.key,n.m,n.left,new dk(t.key,t.m,r,t.right))}return new dk(n.key,n.m,n.left,function(){var r=n.right;return e.b?e.b(r,t):e.call(null,r,t)}())}return t instanceof dk?new dk(t.key,t.m,function(){var r=t.left;return e.b?e.b(n,r):e.call(null,n,r)}(),t.right):(r=function(){var r=n.right,o=t.left;return e.b?e.b(r,o):e.call(null,r,o)}())instanceof dk?new dk(r.key,r.m,new ek(n.key,n.m,n.left,r.left),new ek(t.key,t.m,r.right,t.right)):gk(n.key,n.m,n.left,new ek(t.key,t.m,r,t.right))},lk=function e(n,t,r,o){if(null!=t){var i=function(){var e=t.key;return n.b?n.b(r,e):n.call(null,r,e)}();return 0===i?(o[0]=t,kk(t.left,t.right)):0>i?null!=(i=function(){var i=t.left;return e.A?e.A(n,i,r,o):e.call(null,n,i,r,o)}())||null!=o[0]?t.left instanceof ek?gk(t.key,t.m,i,t.right):new dk(t.key,t.m,i,t.right):null:null!=(i=function(){var i=t.right;return e.A?e.A(n,i,r,o):e.call(null,n,i,r,o)}())||null!=o[0]?t.right instanceof ek?hk(t.key,t.m,t.left,i):new dk(t.key,t.m,t.left,i):null}return null},mk=function e(n,t,r,o){var i=t.key,l=n.b?n.b(r,i):n.call(null,r,i);return 0===l?t.replace(i,o,t.left,t.right):0>l?t.replace(i,t.m,function(){var i=t.left;return e.A?e.A(n,i,r,o):e.call(null,n,i,r,o)}(),t.right):t.replace(i,t.m,t.left,function(){var i=t.right;return e.A?e.A(n,i,r,o):e.call(null,n,i,r,o)}())};function nk(e,n,t,r,o){this.Ob=e,this.Mc=n,this.C=t,this.H=r,this.B=o,this.h=418776847,this.I=8192}function ok(e,n){for(var t=e.Mc;;){if(null==t)return null;var r=t.key;if(0===(r=e.Ob.b?e.Ob.b(n,r):e.Ob.call(null,n,r)))return t;t=0>r?t.left:t.right}}g=nk.prototype,g.Ac=function(e,n){return ok(this,n)},g.forEach=function(e){for(var n=B(this),t=null,r=0,o=0;;)if(o<r){var i=t.W(null,o),l=J(i,0,null);i=J(i,1,null),e.b?e.b(i,l):e.call(null,i,l),o+=1}else{if(!(n=B(n)))return null;Wf(n)?(t=re(n),n=se(n),l=t,r=F(t),t=l):(l=J(t=C(n),0,null),i=J(t,1,null),e.b?e.b(i,l):e.call(null,i,l),n=D(n),t=null,r=0),o=0}},g.get=function(e,n){return this.M(null,e,n)},g.entries=function(){return new hj(B(B(this)))},g.toString=function(){return Be(this)},g.keys=function(){return Ue(mj.a?mj.a(this):mj.call(null,this))},g.values=function(){return Ue(nj.a?nj.a(this):nj.call(null,this))},g.has=function(e){return N(this,e)},g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){return null!=(e=ok(this,n))?e.m:t},g.Aa=function(e,n,t){return null!=this.Mc?df(ik(this.Mc,n,t)):t},g.N=function(){return this.H},g.X=function(){return this.C},g.Bc=function(){return 0<this.C?bk(this.Mc,!1,this.C):null},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=Ye(this)},g.Y=function(e,n){return fj(this,n)},g.pa=function(){return new nk(this.Ob,null,0,this.H,0)},g.Ka=function(e,n){return e=[null],null==(n=lk(this.Ob,this.Mc,n,e))?null==pf(e,0)?this:new nk(this.Ob,null,0,this.H,null):new nk(this.Ob,n.xc(),this.C-1,this.H,null)},g.fa=function(e,n,t){e=[null];var r=jk(this.Ob,this.Mc,n,t,e);return null==r?(e=pf(e,0),A.b(t,e.m)?this:new nk(this.Ob,mk(this.Ob,this.Mc,n,t),this.C,this.H,null)):new nk(this.Ob,r.xc(),this.C+1,this.H,null)},g.$=function(){return 0<this.C?bk(this.Mc,!0,this.C):null},g.O=function(e,n){return n===this.H?this:new nk(this.Ob,this.Mc,this.C,n,this.B)},g.ga=function(e,n){if(Vf(n))return this.fa(null,qd(n,0),qd(n,1));for(e=this,n=B(n);;){if(null==n)return e;var t=C(n);if(!Vf(t))throw Error("conj on a map takes map entries or seqables of map entries");e=zd(e,qd(t,0),qd(t,1)),n=D(n)}},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.ia(null,n);case 3:return this.M(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.ia(null,n)},e.c=function(e,n,t){return this.M(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.ia(null,e)},g.b=function(e,n){return this.M(null,e,n)};var pk=new nk(dg,null,0,null,Ze);nk.prototype[ad]=function(){return Ue(this)};var qk=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};qk.g=function(e){e=B(e);for(var n=je(qj);;){if(!e)return le(n);var t=D(D(e));n=Zg(n,C(e),zf(e)),e=t}},qk.F=0,qk.G=function(e){return this.g(B(e))};var rk=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};function sk(e){for(var n=[],t=arguments.length,r=0;r<t;)n.push(arguments[r]),r+=1;e:for(n=B(0<n.length?new Qe(n.slice(0),0,null):null),r=pk;n;)t=D(D(n)),r=K.c(r,C(n),zf(n)),n=t;return r}function tk(e){for(var n=[],t=arguments.length,r=0;r<t;)n.push(arguments[r]),r+=1;e:for(t=arguments[0],n=B(1<n.length?new Qe(n.slice(1),0,null):null),r=new nk(fg(t),null,0,null,0);n;)t=D(D(n)),r=K.c(r,C(n),zf(n)),n=t;return r}function uk(e,n){this.na=e,this.Kb=n,this.h=32374988,this.I=0}function mj(e){return(e=B(e))?new uk(e,null):null}function Pi(e){return Dd(e)}function vk(e,n){this.na=e,this.Kb=n,this.h=32374988,this.I=0}function nj(e){return(e=B(e))?new vk(e,null):null}function Qi(e){return Ed(e)}rk.g=function(e){return Gf(e=e instanceof Qe&&0===e.J?e.l:fd(e))},rk.F=0,rk.G=function(e){return this.g(B(e))},g=uk.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.Kb},g.za=function(){var e=(null!=this.na?128&this.na.h||h===this.na.Ad||!this.na.h&&Xc(ud,this.na):Xc(ud,this.na))?this.na.za(null):D(this.na);return null==e?null:new uk(e,null)},g.Z=function(){return We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Se},g.Ba=function(e,n){return wf(n,this)},g.Ca=function(e,n,t){return yf(n,t,this)},g.Fa=function(){return this.na.Fa(null).key},g.Ha=function(){var e=(null!=this.na?128&this.na.h||h===this.na.Ad||!this.na.h&&Xc(ud,this.na):Xc(ud,this.na))?this.na.za(null):D(this.na);return null!=e?new uk(e,null):Se},g.$=function(){return this},g.O=function(e,n){return n===this.Kb?this:new uk(this.na,n)},g.ga=function(e,n){return vf(n,this)},uk.prototype[ad]=function(){return Ue(this)},g=vk.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.N=function(){return this.Kb},g.za=function(){var e=(null!=this.na?128&this.na.h||h===this.na.Ad||!this.na.h&&Xc(ud,this.na):Xc(ud,this.na))?this.na.za(null):D(this.na);return null==e?null:new vk(e,null)},g.Z=function(){return We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Se},g.Ba=function(e,n){return wf(n,this)},g.Ca=function(e,n,t){return yf(n,t,this)},g.Fa=function(){return this.na.Fa(null).m},g.Ha=function(){var e=(null!=this.na?128&this.na.h||h===this.na.Ad||!this.na.h&&Xc(ud,this.na):Xc(ud,this.na))?this.na.za(null):D(this.na);return null!=e?new vk(e,null):Se},g.$=function(){return this},g.O=function(e,n){return n===this.Kb?this:new vk(this.na,n)},g.ga=function(e,n){return vf(n,this)},vk.prototype[ad]=function(){return Ue(this)};var wk=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};wk.g=function(e){return p(Eh(lg,e))?gd.b((function(e,n){return Cf.b(p(e)?e:S,n)}),e):null},wk.F=0,wk.G=function(e){return this.g(B(e))};var xk=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],1<t.length?new Qe(t.slice(1),0,null):null)};function yk(e,n){var t=S;for(n=B(n);;){if(!n)return Pd(t,Lf(e));var r=C(n),o=x.c(e,r,zk);t=kh.b(o,zk)?K.c(t,r,o):t,n=D(n)}}function Ak(e){this.Se=e}function Bk(e,n,t){this.H=e,this.Hc=n,this.B=t,this.h=15077647,this.I=139268}xk.g=function(e,n){if(p(Eh(lg,n))){var t=function(n,t){var r=Dd(t),o=Ed(t);return N(n,r)?K.c(n,r,function(){var t=x.b(n,r);return e.b?e.b(t,o):e.call(null,t,o)}()):K.c(n,r,o)};return gd.b((function(e,n){return gd.c(t,p(e)?e:S,B(n))}),n)}return null},xk.F=1,xk.G=function(e){var n=C(e);return e=D(e),this.g(n,e)},Ak.prototype.ra=function(){return this.Se.ra()},Ak.prototype.next=function(){if(this.Se.ra())return this.Se.next().key;throw Error("No such element")},Ak.prototype.remove=function(){return Error("Unsupported operation")},g=Bk.prototype,g.toString=function(){return Be(this)},g.keys=function(){return Ue(B(this))},g.entries=function(){return new ij(B(B(this)))},g.values=function(){return Ue(B(this))},g.has=function(e){return N(this,e)},g.forEach=function(e){for(var n=B(this),t=null,r=0,o=0;;)if(o<r){var i=t.W(null,o),l=J(i,0,null);i=J(i,1,null),e.b?e.b(i,l):e.call(null,i,l),o+=1}else{if(!(n=B(n)))return null;Wf(n)?(t=re(n),n=se(n),l=t,r=F(t),t=l):(l=J(t=C(n),0,null),i=J(t,1,null),e.b?e.b(i,l):e.call(null,i,l),n=D(n),t=null,r=0),o=0}},g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){return p(e=Ad(this.Hc,n))?Dd(e):t},g.ua=function(){return new Ak(ze(this.Hc))},g.N=function(){return this.H},g.X=function(){return kd(this.Hc)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=Ye(this)},g.Y=function(e,n){if(!Rf(n))return!1;if(F(this)!==F(n))return!1;try{return kg((function(e,t){return(e=N(n,t))?e:bf(!1)}),!0,this.Hc)}catch(t){if(t instanceof Error)return!1;throw t}},g.hd=function(){return new Ck(je(this.Hc))},g.pa=function(){return Pd(Dk,this.H)},g.rf=function(e,n){return new Bk(this.H,Cd(this.Hc,n),null)},g.$=function(){return mj(this.Hc)},g.O=function(e,n){return n===this.H?this:new Bk(n,this.Hc,this.B)},g.ga=function(e,n){return new Bk(this.H,K.c(this.Hc,n,null),null)},g.call=function(){var e;return(e=function(e,n,t){switch(arguments.length){case 2:return this.ia(null,n);case 3:return this.M(null,n,t)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return this.ia(null,n)},e.c=function(e,n,t){return this.M(null,n,t)},e}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return this.ia(null,e)},g.b=function(e,n){return this.M(null,e,n)};var Dk=new Bk(null,S,Ze);function Ek(e){for(var n=e.length,t=je(Dk),r=0;r<n;)ke(t,e[r]),r+=1;return le(t)}function Ck(e){this.cd=e,this.I=136,this.h=259}function Fk(e){if(Rf(e))return Kf(e,null);if(null==(e=B(e)))return Dk;if(e instanceof Qe&&0===e.J)return Ek(e.l);for(var n=je(Dk);;){if(null==e)return le(n);var t=D(e);n=ke(n,sd(e)),e=t}}function Gk(e){return function e(n,t){return new Mg(null,(function(){var r;e:{var o=n;for(r=t;;){var i=o;if(o=J(i,0,null),!(i=B(i))){r=null;break e}if(!N(r,o)){r=vf(o,e(Re(i),Cf.b(r,o)));break e}o=Re(i)}}return r}),null,null)}(e,Dk)}function Hk(e){for(var n=I;;){if(!D(e))return B(n);n=Cf.b(n,C(e)),e=D(e)}}function Lg(e){if(null!=e&&(4096&e.I||h===e.jg))return e.yd(null);if("string"===typeof e)return e;throw Error(["Doesn't support name: ",q.a(e)].join(""))}function Ik(e,n){var t=je(S);for(e=B(e),n=B(n);;){if(!e||!n)return le(t);t=Zg(t,C(e),C(n)),e=D(e),n=D(n)}}Bk.prototype[ad]=function(){return Ue(this)},g=Ck.prototype,g.kd=function(e,n){return this.cd=me(this.cd,n,null),this},g.Cd=function(){return new Bk(null,le(this.cd),null)},g.X=function(){return F(this.cd)},g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){return xd(this.cd,n,Yf)===Yf?t:n},g.call=function(){function e(e,n,t){return xd(this.cd,n,Yf)===Yf?t:n}function n(e,n){return xd(this.cd,n,Yf)===Yf?null:n}var t;return(t=function(t,r,o){switch(arguments.length){case 2:return n.call(this,t,r);case 3:return e.call(this,t,r,o)}throw Error("Invalid arity: "+(arguments.length-1))}).b=n,t.c=e,t}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return xd(this.cd,e,Yf)===Yf?null:e},g.b=function(e,n){return xd(this.cd,e,Yf)===Yf?n:e};var Jk=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],arguments[2],new Qe(t.slice(3),0,null))}};function Kk(){this.l=[]}function Lk(){return function(e){var n=new Kk;return function(){function t(t,r){return n.add(r),2===n.size()?(r=Ni(n.l),n.clear(),e.b?e.b(t,r):e.call(null,t,r)):t}function r(t){if(!p(n.Nd())){var r=Ni(n.l);n.clear(),t=df(e.b?e.b(t,r):e.call(null,t,r))}return e.a?e.a(t):e.call(null,t)}function o(){return e.o?e.o():e.call(null)}var i;return(i=function(e,n){switch(arguments.length){case 0:return o.call(this);case 1:return r.call(this,e);case 2:return t.call(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).o=o,i.a=r,i.b=t,i}()}}function Mk(e,n){return new Mg(null,(function(){var t=B(n);if(t){var r=C(t);t=p(r=e.a?e.a(r):e.call(null,r))?vf(C(t),Mk(e,Re(t))):null}else t=null;return t}),null,null)}function Nk(e,n,t){this.start=e,this.step=n,this.count=t,this.h=82,this.I=0}function Ok(e,n,t){this.J=e,this.end=n,this.step=t}function Pk(e,n,t,r,o,i,l){this.H=e,this.start=n,this.end=t,this.step=r,this.Bb=o,this.Yd=i,this.B=l,this.h=32375006,this.I=140800}function Qk(e){if(null==e.Bb){var n=e.X(null);32<n?(e.Yd=new Pk(null,e.start+32*e.step,e.end,e.step,null,null,null),e.Bb=new Nk(e.start,e.step,32)):e.Bb=new Nk(e.start,e.step,n)}}function Rk(e,n){return n<=e?Se:new Pk(null,e,n,1,null,null,null)}function Sk(e,n){return new Mg(null,(function(){var t=B(n);return t?vf(C(t),Sk(e,Yh(e,t))):null}),null,null)}function Tk(e){return le(gd.c((function(e,n){return Zg(e,n,x.c(e,n,0)+1)}),je(S),e))}function Uk(e,n){return function(){function t(t,r,o){return new Q(null,2,5,R,[e.c?e.c(t,r,o):e.call(null,t,r,o),n.c?n.c(t,r,o):n.call(null,t,r,o)],null)}function r(t,r){return new Q(null,2,5,R,[e.b?e.b(t,r):e.call(null,t,r),n.b?n.b(t,r):n.call(null,t,r)],null)}function o(t){return new Q(null,2,5,R,[e.a?e.a(t):e.call(null,t),n.a?n.a(t):n.call(null,t)],null)}function i(){return new Q(null,2,5,R,[e.o?e.o():e.call(null),n.o?n.o():n.call(null)],null)}var l,a=function(){function t(e,n,t,o){var i=null;if(3<arguments.length){i=0;for(var l=Array(arguments.length-3);i<l.length;)l[i]=arguments[i+3],++i;i=new Qe(l,0,null)}return r.call(this,e,n,t,i)}function r(t,r,o,i){return new Q(null,2,5,R,[ih(e,t,r,o,i),ih(n,t,r,o,i)],null)}return t.F=3,t.G=function(e){return r(C(e),C(e=D(e)),C(e=D(e)),e=Re(e))},t.g=r,t}();return(l=function(e,n,l,u){switch(arguments.length){case 0:return i.call(this);case 1:return o.call(this,e);case 2:return r.call(this,e,n);case 3:return t.call(this,e,n,l);default:var s=null;if(3<arguments.length){s=0;for(var c=Array(arguments.length-3);s<c.length;)c[s]=arguments[s+3],++s;s=new Qe(c,0,null)}return a.g(e,n,l,s)}}).F=3,l.G=a.G,l.o=i,l.a=o,l.b=r,l.c=t,l.g=a.g,l}()}function Vk(e){e:for(var n=e;n=B(n);)n=D(n);return e}function Wk(e,n){if("string"===typeof n)return null!=(e=e.exec(n))&&A.b(e[0],n)?1===e.length?e[0]:Ni(e):null;throw new TypeError("re-matches must match against a string.")}function Xk(e,n){if("string"===typeof n)return null==(e=e.exec(n))?null:1===e.length?e[0]:Ni(e);throw new TypeError("re-find must match against a string.")}Jk.b=function(e,n){return n},Jk.c=function(e,n,t){return(e.a?e.a(n):e.call(null,n))>(e.a?e.a(t):e.call(null,t))?n:t},Jk.g=function(e,n,t,r){return gd.c((function(n,t){return Jk.c(e,n,t)}),Jk.c(e,n,t),r)},Jk.G=function(e){var n=C(e),t=D(e);e=C(t);var r=D(t);return t=C(r),r=D(r),this.g(n,e,t,r)},Jk.F=3,Kk.prototype.add=function(e){return this.l.push(e)},Kk.prototype.size=function(){return this.l.length},Kk.prototype.clear=function(){return this.l=[]},Kk.prototype.Nd=function(){return 0===this.l.length},g=Nk.prototype,g.X=function(){return this.count},g.Fa=function(){return this.start},g.W=function(e,n){return this.start+n*this.step},g.wa=function(e,n,t){return 0<=n&&n<this.count?this.start+n*this.step:t},g.ze=function(){if(1>=this.count)throw Error("-drop-first of empty chunk");return new Nk(this.start+this.step,this.step,this.count-1)},Ok.prototype.ra=function(){return 0<this.step?this.J<this.end:this.J>this.end},Ok.prototype.next=function(){var e=this.J;return this.J+=this.step,e},g=Pk.prototype,g.toString=function(){return Be(this)},g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.W=function(e,n){if(0<=n&&n<this.X(null))return this.start+n*this.step;if(0<=n&&this.start>this.end&&0===this.step)return this.start;throw Error("Index out of bounds")},g.wa=function(e,n,t){return 0<=n&&n<this.X(null)?this.start+n*this.step:0<=n&&this.start>this.end&&0===this.step?this.start:t},g.ua=function(){return new Ok(this.start,this.end,this.step)},g.N=function(){return this.H},g.za=function(){return 0<this.step?this.start+this.step<this.end?new Pk(null,this.start+this.step,this.end,this.step,null,null,null):null:this.start+this.step>this.end?new Pk(null,this.start+this.step,this.end,this.step,null,null,null):null},g.X=function(){return Math.ceil((this.end-this.start)/this.step)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=We(this)},g.Y=function(e,n){return uf(this,n)},g.pa=function(){return Se},g.Ba=function(e,n){return ff(this,n)},g.Ca=function(e,n,r){for(e=this.start;;){if(!(0<this.step?e<this.end:e>this.end))return r;if(cf(r=n.b?n.b(r,e):n.call(null,r,e)))return t(r);e+=this.step}},g.Fa=function(){return this.start},g.Ha=function(){var e=this.za(null);return null==e?Se:e},g.$=function(){return this},g.$d=function(){return Qk(this),this.Bb},g.gd=function(){return Qk(this),null==this.Yd?Se:this.Yd},g.O=function(e,n){return n===this.H?this:new Pk(n,this.start,this.end,this.step,this.Bb,this.Yd,this.B)},g.ga=function(e,n){return vf(n,this)},g.Ae=function(){return B(this.gd(null))},Pk.prototype[ad]=function(){return Ue(this)};var Yk=function e(n,t){var r=n.exec(t);if(null==r)return null;var o=r[0];return vf(1===r.length?o:Ni(r),new Mg(null,(function(){var i=o.length;return(i=r.index+(1>i?1:i))<=t.length?(i=t.substring(i),e.b?e.b(n,i):e.call(null,n,i)):null}),null,null))};function Zk(e){if(e instanceof RegExp)return e;var n=Xk(/^\(\?([idmsux]*)\)/,e),t=J(n,0,null);return n=J(n,1,null),new RegExp(e.substring(null==t?0:t.length),p(n)?n:"")}function $k(e,n,t,r,o,i,l){var a=Ic;Ic=null==Ic?null:Ic-1;try{if(null!=Ic&&0>Ic)return ce(e,"#");if(ce(e,t),0===Oc.a(i))B(l)&&ce(e,function(){var e=al.a(i);return p(e)?e:"..."}());else{if(B(l)){var u=C(l);n.c?n.c(u,e,i):n.call(null,u,e,i)}for(var s=D(l),c=Oc.a(i)-1;;){if(!s||null!=c&&0===c){B(s)&&0===c&&(ce(e,r),ce(e,function(){var e=al.a(i);return p(e)?e:"..."}()));break}ce(e,r);var d=C(s);t=e,l=i,n.c?n.c(d,t,l):n.call(null,d,t,l),s=D(s),c=t=c-1}}return ce(e,o)}finally{Ic=a}}function bl(e,n){n=B(n);for(var t=null,r=0,o=0;;)if(o<r){var i=t.W(null,o);ce(e,i),o+=1}else{if(!(n=B(n)))return null;Wf(t=n)?(n=re(t),r=se(t),t=n,i=F(n),n=r,r=i):(ce(e,i=C(t)),n=D(t),t=null,r=0),o=0}}function cl(e){if(null==Ec)throw Error("No *print-fn* fn set for evaluation environment");return Ec.call(null,e),null}var dl={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function el(e){return['"',q.a(e.replace(/[\\"\b\f\n\r\t]/g,(function(e){return dl[e]}))),'"'].join("")}function fl(e,n){return!!ag(x.b(e,Mc))&&(!(null==n||!(131072&n.h||h===n.xd))&&null!=Lf(n))}function gl(e,n,t){if(null==e)return ce(n,"nil");if(fl(t,e)){ce(n,"^");var r=Lf(e);hl.c?hl.c(r,n,t):hl.call(null,r,n,t),ce(n," ")}if(e.Ia)return e.Ja(n);if(null!=e?2147483648&e.h||h===e.ma||!e.h&&Xc(ee,e):Xc(ee,e))return fe(e,n,t);if(!0===e||!1===e)return ce(n,q.a(e));if("number"===typeof e)return ce(n,isNaN(e)?"##NaN":e===Number.POSITIVE_INFINITY?"##Inf":e===Number.NEGATIVE_INFINITY?"##-Inf":q.a(e));if(null!=e&&e.constructor===Object)return ce(n,"#js "),r=Wh.b((function(n){return new Gi(null!=Wk(/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/,n)?Kg.a(n):n,e[n])}),Ub(e)),il.A?il.A(r,hl,n,t):il.call(null,r,hl,n,t);if(Rc(e))return $k(n,hl,"#js ["," ","]",t,e);if("string"==typeof e)return p(Lc.a(t))?ce(n,el(e)):ce(n,e);if(fb(e)){var o=e.name;return bl(n,G(["#object[",t=p(function(){var e=null==o;return e||ec(o)}())?"Function":o,p(!1)?[' "',q.a(e),'"'].join(""):"","]"]))}return e instanceof Date?(t=function(e,n){for(e=q.a(e);;){if(!(e.length<n))return e;e=["0",e].join("")}},bl(n,G(['#inst "',q.a(e.getUTCFullYear()),"-",t(e.getUTCMonth()+1,2),"-",t(e.getUTCDate(),2),"T",t(e.getUTCHours(),2),":",t(e.getUTCMinutes(),2),":",t(e.getUTCSeconds(),2),".",t(e.getUTCMilliseconds(),3),"-",'00:00"']))):e instanceof RegExp?bl(n,G(['#"',e.source,'"'])):nh(e)?bl(n,G(["#object[",e.toString(),"]"])):p(function(){var n=null==e?null:e.constructor;return null==n?null:n.Da}())?bl(n,G(["#object[",e.constructor.Da.replace(/\//g,"."),"]"])):(o=function(){var n=null==e?null:e.constructor;return null==n?null:n.name}(),t=p(function(){var e=null==o;return e||ec(o)}())?"Object":o,null==e.constructor?bl(n,G(["#object[",t,"]"])):bl(n,G(["#object[",t," ",q.a(e),"]"])))}function hl(e,n,t){var r=jl.a(t);return p(r)?(t=K.c(t,kl,gl),r.c?r.c(e,n,t):r.call(null,e,n,t)):gl(e,n,t)}function ll(e,n){var t=new zc,r=new Ae(t);e:{hl(C(e),r,n),e=B(D(e));for(var o=null,i=0,l=0;;)if(l<i){var a=o.W(null,l);ce(r," "),hl(a,r,n),l+=1}else{if(!(e=B(e)))break e;Wf(o=e)?(e=re(o),i=se(o),o=e,a=F(e),e=i,i=a):(a=C(o),ce(r," "),hl(a,r,n),e=D(o),o=null,i=0),l=0}}return r.qc(null),t}function ml(e,n){return Pf(e)?"":q.a(ll(e,n))}function nl(e,n){return cl(ml(e,n))}var ol=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};ol.g=function(e){return ml(e,Jc())},ol.F=0,ol.G=function(e){return this.g(B(e))};var pl=function(){function e(e){var t=null;if(0<arguments.length){t=0;for(var r=Array(arguments.length-0);t<r.length;)r[t]=arguments[t+0],++t;t=new Qe(r,0,null)}return n.call(this,t)}function n(e){return nl(e,K.c(Jc(),Lc,!1))}return e.F=0,e.G=function(e){return n(e=B(e))},e.g=n,e}(),ql=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};function rl(e){for(var n=[],t=arguments.length,r=0;r<t;)n.push(arguments[r]),r+=1;sl(0<n.length?new Qe(n.slice(0),0,null):null)}function sl(e){return nl(e,K.c(Jc(),Lc,!1)),p(Fc)?(e=Jc(),cl("\n"),x.b(e,Kc),e=null):e=null,e}function tl(e){return e instanceof w?Me.b(null,Lg(e)):Kg.b(null,Lg(e))}function ul(e){if(!p(!1))return null;var n=B(e),t=B(n),r=C(t);for(D(t),J(r,0,null),J(r,1,null),t=Ef(e),e=null;;){r=e,e=C(n=B(n));var o=D(n),i=e;if(e=J(i,0,null),n=J(i,1,null),!p(i))return new Q(null,2,5,R,[r,t],null);if(!(e instanceof z||e instanceof w))return null;if(p(r)){if(!A.b(r,Ig(e)))return null;t=K.c(t,tl(e),n),e=r,n=o}else{if(!p(r=Ig(e)))return null;t=K.c(t,tl(e),n),e=r,n=o}}}function vl(e,n,t,r,o){return $k(r,(function(e,n,r){var o=Dd(e);return t.c?t.c(o,n,r):t.call(null,o,n,r),ce(n," "),e=Ed(e),t.c?t.c(e,n,r):t.call(null,e,n,r)}),[q.a(e),"{"].join(""),", ","}",o,B(n))}function il(e,n,t,r){var o=M(e)?ul(e):null,i=J(o,0,null);return o=J(o,1,null),p(i)?vl(["#:",q.a(i)].join(""),o,n,t,r):vl(null,e,n,t,r)}function xl(e){this.La=e,this.value=null,this.h=2147516416,this.I=1}function Bl(e){return e instanceof xl?t(e):e}function Cl(e,n){this.ue=e,this.be=n,this.h=2173173760,this.I=131072}function Dl(e){return new Cl(fh(Ih,Hk(e)),Bf(e))}function El(){}function Fl(e){if(null!=e&&null!=e.gg)e=e.gg(e);else{var n=Fl[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=Fl._))throw Zc("IEncodeJS.-clj->js",e);e=n.a?n.a(e):n.call(null,e)}}return e}function Gl(e,n){return(null!=e?h===e.fg||!e.Ke&&Xc(El,e):Xc(El,e))?Fl(e):"string"===typeof e||"number"===typeof e||e instanceof z||e instanceof w?n.a?n.a(e):n.call(null,e):ol.g(G([e]))}ql.g=function(e){return ml(e,K.c(Jc(),Lc,!1))},ql.F=0,ql.G=function(e){return this.g(B(e))},Uh.prototype.ma=h,Uh.prototype.S=function(e,t,r){return ce(t,"#object[cljs.core.Volatile "),hl(new n(null,1,[wl,this.state],null),t,r),ce(t,"]")},Ne.prototype.ma=h,Ne.prototype.S=function(e,n,t){return ce(n,"#'"),hl(this.bd,n,t)},Qe.prototype.ma=h,Qe.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Mg.prototype.ma=h,Mg.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Gi.prototype.ma=h,Gi.prototype.S=function(e,n,t){return $k(n,hl,"["," ","]",t,this)},ak.prototype.ma=h,ak.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Pj.prototype.ma=h,Pj.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},ek.prototype.ma=h,ek.prototype.S=function(e,n,t){return $k(n,hl,"["," ","]",t,this)},kj.prototype.ma=h,kj.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Lo.prototype.ma=h,Lo.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Si.prototype.ma=h,Si.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Fg.prototype.ma=h,Fg.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},tf.prototype.ma=h,tf.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Uj.prototype.ma=h,Uj.prototype.S=function(e,n,t){return il(this,hl,n,t)},Rj.prototype.ma=h,Rj.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Ui.prototype.ma=h,Ui.prototype.S=function(e,n,t){return $k(n,hl,"["," ","]",t,this)},nk.prototype.ma=h,nk.prototype.S=function(e,n,t){return il(this,hl,n,t)},Bk.prototype.ma=h,Bk.prototype.S=function(e,n,t){return $k(n,hl,"#{"," ","}",t,this)},Rg.prototype.ma=h,Rg.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Nh.prototype.ma=h,Nh.prototype.S=function(e,t,r){return ce(t,"#object[cljs.core.Atom "),hl(new n(null,1,[wl,this.state],null),t,r),ce(t,"]")},vk.prototype.ma=h,vk.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},dk.prototype.ma=h,dk.prototype.S=function(e,n,t){return $k(n,hl,"["," ","]",t,this)},$h.prototype.ma=h,$h.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Q.prototype.ma=h,Q.prototype.S=function(e,n,t){return $k(n,hl,"["," ","]",t,this)},aj.prototype.ma=h,aj.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Dg.prototype.ma=h,Dg.prototype.S=function(e,n){return ce(n,"()")},bj.prototype.ma=h,bj.prototype.S=function(e,n,t){return $k(n,hl,"#queue ["," ","]",t,B(this))},n.prototype.ma=h,n.prototype.S=function(e,n,t){return il(this,hl,n,t)},Pk.prototype.ma=h,Pk.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Ah.prototype.ma=h,Ah.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},uk.prototype.ma=h,uk.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Df.prototype.ma=h,Df.prototype.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},w.prototype.Oc=h,w.prototype.Wb=function(e,n){if(n instanceof w)return Le(this,n);throw Error(["Cannot compare ",q.a(this)," to ",q.a(n)].join(""))},z.prototype.Oc=h,z.prototype.Wb=function(e,n){if(n instanceof z)return Gg(this,n);throw Error(["Cannot compare ",q.a(this)," to ",q.a(n)].join(""))},Ui.prototype.Oc=h,Ui.prototype.Wb=function(e,n){if(Vf(n))return eg(this,n);throw Error(["Cannot compare ",q.a(this)," to ",q.a(n)].join(""))},Q.prototype.Oc=h,Q.prototype.Wb=function(e,n){if(Vf(n))return eg(this,n);throw Error(["Cannot compare ",q.a(this)," to ",q.a(n)].join(""))},Gi.prototype.Oc=h,Gi.prototype.Wb=function(e,n){if(Vf(n))return eg(this,n);throw Error(["Cannot compare ",q.a(this)," to ",q.a(n)].join(""))},ek.prototype.Oc=h,ek.prototype.Wb=function(e,n){if(Vf(n))return eg(this,n);throw Error(["Cannot compare ",q.a(this)," to ",q.a(n)].join(""))},dk.prototype.Oc=h,dk.prototype.Wb=function(e,n){if(Vf(n))return eg(this,n);throw Error(["Cannot compare ",q.a(this)," to ",q.a(n)].join(""))},xl.prototype.zb=function(){return p(this.La)&&(this.value=this.La.o?this.La.o():this.La.call(null),this.La=null),this.value},xl.prototype.Bd=function(){return Tc(this.La)},xl.prototype.S=function(e,t,r){return ce(t,"#object[cljs.core.Delay "),hl(new n(null,2,[yl,null==this.La?zl:Al,wl,this.value],null),t,r),ce(t,"]")},g=Cl.prototype,g.indexOf=function(){var e;return(e=function(e,n){switch(arguments.length){case 1:return nf(this,e,0);case 2:return nf(this,e,n)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return nf(this,e,0)},e.b=function(e,n){return nf(this,e,n)},e}(),g.lastIndexOf=function(){function e(e){return rf(this,e,F(this))}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return rf(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return rf(this,e,n)},n}(),g.ua=function(){var e=th(this.be);return Bh(this.ue,e)},g.$=function(){var e=th(this.be);return e=Bh(this.ue,e),B(p(e=zh(e))?e:Se)},g.Ba=function(e,n){return ng(this.ue,mg(n,lg),this.be)},g.Ca=function(e,n,t){return og(this.ue,mg(n,lg),t,this.be)},g.S=function(e,n,t){return $k(n,hl,"("," ",")",t,this)},Cl.prototype[ad]=function(){return Ue(this)};var Hl=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],1<t.length?new Qe(t.slice(1),0,null):null)};function Jl(){}function Kl(e,n){if(null!=e&&null!=e.eg)e=e.eg(e,n);else{var t=Kl[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=Kl._))throw Zc("IEncodeClojure.-js->clj",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function Ll(e){return Ml(e,G([Nl,!1]))}function Ml(e,n){var t=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,r=p(t=x.b(t,Nl))?Kg:q;return function e(t){return(null!=t?h===t.Mh||!t.Ke&&Xc(Jl,t):Xc(Jl,t))?Kl(t,fh(rk,n)):$f(t)?Vk(Wh.b(e,t)):Oi(t)?new Gi(e(Dd(t)),e(Ed(t))):Qf(t)?ji.c(Ef(t),Wh.a(e),t):Rc(t)?le(gd.c((function(n,t){return Yg.b(n,e(t))}),je(I),t)):Yc(t)===Object?le(gd.c((function(n,o){return Zg(n,r.a?r.a(o):r.call(null,o),e(Vb(t,o)))}),je(S),Ub(t))):t}(e)}function Ol(e,n){return le(gd.c((function(n,t){var r=e.a?e.a(t):e.call(null,t);return Zg(n,r,Cf.b(x.c(n,r,I),t))}),je(S),n))}Hl.g=function(e,n){n=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n;var t=x.c(n,Il,Lg),r=function e(n){if(null==n)return null;if(null!=n?h===n.fg||!n.Ke&&Xc(El,n):Xc(El,n))return Fl(n);if(n instanceof z)return t.a?t.a(n):t.call(null,n);if(n instanceof w)return q.a(n);if(M(n)){var o={};n=B(n);for(var i=null,l=0,a=0;;)if(a<l){var u=i.W(null,a),s=J(u,0,null);u=J(u,1,null),s=Gl(s,r),u=e(u),o[s]=u,a+=1}else{if(!(n=B(n)))break;Wf(n)?(l=re(n),n=se(n),i=l,l=F(l)):(i=J(l=C(n),0,null),l=J(l,1,null),i=Gl(i,r),l=e(l),o[i]=l,n=D(n),i=null,l=0),a=0}return o}if(Qf(n)){for(o=[],n=B(Wh.b(e,n)),i=null,a=l=0;;)if(a<l)s=i.W(null,a),o.push(s),a+=1;else{if(!(n=B(n)))break;Wf(i=n)?(n=re(i),a=se(i),i=n,l=F(n),n=a):(n=C(i),o.push(n),n=D(i),i=null,l=0),a=0}return o}return n};return r(e)},Hl.F=1,Hl.G=function(e){var n=C(e);return e=D(e),this.g(n,e)};var Pl=null;function Ql(){return null==Pl&&(Pl=Oh(new n(null,3,[Rl,S,Sl,S,Tl,S],null))),Pl}function Ul(e,n,t){var r=A.b(n,t);if(r)return r;if(r=N(r=(r=Tl.a(e)).a?r.a(n):r.call(null,n),t))return r;if(!Vf(t))return!1;if(!Vf(n))return!1;if(F(t)!==F(n))return!1;r=!0;for(var o=0;;){if(!r||o===F(t))return r;r=Ul(e,n.a?n.a(o):n.call(null,o),t.a?t.a(o):t.call(null,o)),o+=1}}function Vl(e){var n=t(Ql());return lh(x.b(Rl.a(n),e))}function Wl(e,n,r,o){Rh.b(e,(function(){return t(n)})),Rh.b(r,(function(){return t(o)}))}var Xl=function e(n,r,o){var i=function(){var e=t(o);return e.a?e.a(n):e.call(null,n)}();return i=!!p(p(i)?i.a?i.a(r):i.call(null,r):i)||null,(p(i)||p(i=function(){for(var t=Vl(r);;){if(!(0<F(t)))return null;var i=C(t);e.c?e.c(n,i,o):e.call(null,n,i,o),t=Re(t)}}())||!!p(i=function(){for(var t=Vl(n);;){if(!(0<F(t)))return null;var i=C(t);e.c?e.c(i,r,o):e.call(null,i,r,o),t=Re(t)}}()))&&i};function Yl(e,n,t,r){return p(t=Xl(e,n,t))?t:Ul(r,e,n)}var Zl=function e(n,r,o,i,l,a,u,s){var c=gd.c((function(e,i){var a=J(i,0,null);if(J(i,1,null),Ul(t(o),r,a)){if(e=null==e||Yl(a,C(e),l,t(o))?i:e,!Yl(C(e),a,l,t(o)))throw Error(["Multiple methods in multimethod '",q.a(n),"' match dispatch value: ",q.a(r)," -> ",q.a(a)," and ",q.a(C(e)),", and neither is preferred"].join(""));return e}return e}),null,t(i)),d=function(){if(null==c){var e=t(i);e=e.a?e.a(s):e.call(null,s)}else e=!1;return p(e)?new Q(null,2,5,R,[s,e],null):c}();return p(d)?A.b(t(u),t(o))?(Rh.A(a,K,r,zf(d)),zf(d)):(Wl(a,i,u,o),e.Ga?e.Ga(n,r,o,i,l,a,u,s):e.call(null,n,r,o,i,l,a,u,s)):null};function $l(e,n,t){if(null!=e&&null!=e.v)e.v(e,n,t);else{var r=$l[db(null==e?null:e)];if(null!=r)r.c?r.c(e,n,t):r.call(null,e,n,t);else{if(null==(r=$l._))throw Zc("IMultiFn.-add-method",e);r.c?r.c(e,n,t):r.call(null,e,n,t)}}}function am(e,n){if(null!=e&&null!=e.Ea)e=e.Ea(e,n);else{var t=am[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=am._))throw Zc("IMultiFn.-get-method",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function bm(e){if(null!=e&&null!=e.ig)e=e.R;else{var n=bm[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=bm._))throw Zc("IMultiFn.-dispatch-fn",e);e=n.a?n.a(e):n.call(null,e)}}return e}function cm(e,n){throw Error(["No method in multimethod '",q.a(e),"' for dispatch value: ",q.a(n)].join(""))}function dm(e,n,t,r,o,i,l){var a=em;this.name=e,this.R=n,this.vg=a,this.fe=t,this.ke=r,this.xh=o,this.je=i,this.Ud=l,this.h=4194305,this.I=4352}function fm(e){this.dd=e,this.B=null,this.h=2153775104,this.I=2048}function gm(){function e(){return Math.floor(16*Math.random()).toString(16)}var n=(8|3&Math.floor(16*Math.random())).toString(16);return new fm([q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e()),"-",q.a(e()),q.a(e()),q.a(e()),q.a(e()),"-4",q.a(e()),q.a(e()),q.a(e()),"-",q.a(n),q.a(e()),q.a(e()),q.a(e()),"-",q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e()),q.a(e())].join("").toLowerCase())}function hm(e,n,t){var r=Error(e);return this.message=e,this.data=n,this.lf=t,this.name=r.name,this.description=r.description,this.number=r.number,this.fileName=r.fileName,this.lineNumber=r.lineNumber,this.columnNumber=r.columnNumber,this.stack=r.stack,this}function im(e,n){return jm(e,n,null)}function jm(e,n,t){return new hm(e,n,t)}function km(e){return e instanceof hm?e.data:null}function lm(e){return e instanceof Error?e.message:null}function mm(e){return N(new Bk(null,new n(null,24,[nm,"null",om,"null",pm,"null",qm,"null",rm,"null",sm,"null",tm,"null",um,"null",vm,"null",wm,"null",xm,"null",ym,"null",zm,"null",Am,"null",Bm,"null",Cm,"null",Dm,"null",Em,"null",Fm,"null",Gm,"null",Hm,"null",Im,"null",Jm,"null",Km,"null"],null),null),e)}function Lm(e,n){this.tag=e,this.form=n,this.h=2153775360,this.I=0}g=dm.prototype,g.call=function(){function e(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b,y,k){var C=jh((e=this).R,n,t,r,o,G([i,l,a,u,s,c,d,f,h,_,g,m,w,v,b,y,k])),I=this.Ea(null,C);return p(I)||cm(e.name,C),jh(I,n,t,r,o,G([i,l,a,u,s,c,d,f,h,_,g,m,w,v,b,y,k]))}function n(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b,y){var k=(e=this).R.rb?e.R.rb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b,y):e.R.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b,y),C=this.Ea(null,k);return p(C)||cm(e.name,k),C.rb?C.rb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b,y):C.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b,y)}function t(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b){var y=(e=this).R.hb?e.R.hb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b):e.R.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b),k=this.Ea(null,y);return p(k)||cm(e.name,y),k.hb?k.hb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b):k.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b)}function r(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v){var b=(e=this).R.qb?e.R.qb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v):e.R.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v),y=this.Ea(null,b);return p(y)||cm(e.name,b),y.qb?y.qb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v):y.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v)}function o(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w){var v=(e=this).R.gb?e.R.gb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w):e.R.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w),b=this.Ea(null,v);return p(b)||cm(e.name,v),b.gb?b.gb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w):b.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w)}function i(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m){var w=(e=this).R.pb?e.R.pb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m):e.R.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m),v=this.Ea(null,w);return p(v)||cm(e.name,w),v.pb?v.pb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m):v.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m)}function l(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g){var m=(e=this).R.fb?e.R.fb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g):e.R.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g),w=this.Ea(null,m);return p(w)||cm(e.name,m),w.fb?w.fb(n,t,r,o,i,l,a,u,s,c,d,f,h,_,g):w.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g)}function a(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_){var g=(e=this).R.ob?e.R.ob(n,t,r,o,i,l,a,u,s,c,d,f,h,_):e.R.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_),m=this.Ea(null,g);return p(m)||cm(e.name,g),m.ob?m.ob(n,t,r,o,i,l,a,u,s,c,d,f,h,_):m.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h,_)}function u(e,n,t,r,o,i,l,a,u,s,c,d,f,h){var _=(e=this).R.eb?e.R.eb(n,t,r,o,i,l,a,u,s,c,d,f,h):e.R.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h),g=this.Ea(null,_);return p(g)||cm(e.name,_),g.eb?g.eb(n,t,r,o,i,l,a,u,s,c,d,f,h):g.call(null,n,t,r,o,i,l,a,u,s,c,d,f,h)}function s(e,n,t,r,o,i,l,a,u,s,c,d,f){var h=(e=this).R.nb?e.R.nb(n,t,r,o,i,l,a,u,s,c,d,f):e.R.call(null,n,t,r,o,i,l,a,u,s,c,d,f),_=this.Ea(null,h);return p(_)||cm(e.name,h),_.nb?_.nb(n,t,r,o,i,l,a,u,s,c,d,f):_.call(null,n,t,r,o,i,l,a,u,s,c,d,f)}function c(e,n,t,r,o,i,l,a,u,s,c,d){var f=(e=this).R.cb?e.R.cb(n,t,r,o,i,l,a,u,s,c,d):e.R.call(null,n,t,r,o,i,l,a,u,s,c,d),h=this.Ea(null,f);return p(h)||cm(e.name,f),h.cb?h.cb(n,t,r,o,i,l,a,u,s,c,d):h.call(null,n,t,r,o,i,l,a,u,s,c,d)}function d(e,n,t,r,o,i,l,a,u,s,c){var d=(e=this).R.mb?e.R.mb(n,t,r,o,i,l,a,u,s,c):e.R.call(null,n,t,r,o,i,l,a,u,s,c),f=this.Ea(null,d);return p(f)||cm(e.name,d),f.mb?f.mb(n,t,r,o,i,l,a,u,s,c):f.call(null,n,t,r,o,i,l,a,u,s,c)}function f(e,n,t,r,o,i,l,a,u,s){var c=(e=this).R.Xa?e.R.Xa(n,t,r,o,i,l,a,u,s):e.R.call(null,n,t,r,o,i,l,a,u,s),d=this.Ea(null,c);return p(d)||cm(e.name,c),d.Xa?d.Xa(n,t,r,o,i,l,a,u,s):d.call(null,n,t,r,o,i,l,a,u,s)}function h(e,n,t,r,o,i,l,a,u){var s=(e=this).R.Ga?e.R.Ga(n,t,r,o,i,l,a,u):e.R.call(null,n,t,r,o,i,l,a,u),c=this.Ea(null,s);return p(c)||cm(e.name,s),c.Ga?c.Ga(n,t,r,o,i,l,a,u):c.call(null,n,t,r,o,i,l,a,u)}function _(e,n,t,r,o,i,l,a){var u=(e=this).R.ib?e.R.ib(n,t,r,o,i,l,a):e.R.call(null,n,t,r,o,i,l,a),s=this.Ea(null,u);return p(s)||cm(e.name,u),s.ib?s.ib(n,t,r,o,i,l,a):s.call(null,n,t,r,o,i,l,a)}function g(e,n,t,r,o,i,l){var a=(e=this).R.la?e.R.la(n,t,r,o,i,l):e.R.call(null,n,t,r,o,i,l),u=this.Ea(null,a);return p(u)||cm(e.name,a),u.la?u.la(n,t,r,o,i,l):u.call(null,n,t,r,o,i,l)}function m(e,n,t,r,o,i){var l=(e=this).R.K?e.R.K(n,t,r,o,i):e.R.call(null,n,t,r,o,i),a=this.Ea(null,l);return p(a)||cm(e.name,l),a.K?a.K(n,t,r,o,i):a.call(null,n,t,r,o,i)}function w(e,n,t,r,o){var i=(e=this).R.A?e.R.A(n,t,r,o):e.R.call(null,n,t,r,o),l=this.Ea(null,i);return p(l)||cm(e.name,i),l.A?l.A(n,t,r,o):l.call(null,n,t,r,o)}function v(e,n,t,r){var o=(e=this).R.c?e.R.c(n,t,r):e.R.call(null,n,t,r),i=this.Ea(null,o);return p(i)||cm(e.name,o),i.c?i.c(n,t,r):i.call(null,n,t,r)}function b(e,n,t){var r=(e=this).R.b?e.R.b(n,t):e.R.call(null,n,t),o=this.Ea(null,r);return p(o)||cm(e.name,r),o.b?o.b(n,t):o.call(null,n,t)}function y(e,n){var t=(e=this).R.a?e.R.a(n):e.R.call(null,n),r=this.Ea(null,t);return p(r)||cm(e.name,t),r.a?r.a(n):r.call(null,n)}function k(e){var n=(e=this).R.o?e.R.o():e.R.call(null),t=this.Ea(null,n);return p(t)||cm(e.name,n),t.o?t.o():t.call(null)}var C;return(C=function(p,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F,L,B){switch(arguments.length){case 1:return k.call(this,p);case 2:return y.call(this,p,C);case 3:return b.call(this,p,C,I);case 4:return v.call(this,p,C,I,x);case 5:return w.call(this,p,C,I,x,E);case 6:return m.call(this,p,C,I,x,E,S);case 7:return g.call(this,p,C,I,x,E,S,D);case 8:return _.call(this,p,C,I,x,E,S,D,R);case 9:return h.call(this,p,C,I,x,E,S,D,R,O);case 10:return f.call(this,p,C,I,x,E,S,D,R,O,A);case 11:return d.call(this,p,C,I,x,E,S,D,R,O,A,T);case 12:return c.call(this,p,C,I,x,E,S,D,R,O,A,T,M);case 13:return s.call(this,p,C,I,x,E,S,D,R,O,A,T,M,P);case 14:return u.call(this,p,C,I,x,E,S,D,R,O,A,T,M,P,j);case 15:return a.call(this,p,C,I,x,E,S,D,R,O,A,T,M,P,j,$);case 16:return l.call(this,p,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W);case 17:return i.call(this,p,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q);case 18:return o.call(this,p,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N);case 19:return r.call(this,p,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G);case 20:return t.call(this,p,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F);case 21:return n.call(this,p,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F,L);case 22:return e.call(this,p,C,I,x,E,S,D,R,O,A,T,M,P,j,$,W,Q,N,G,F,L,B)}throw Error("Invalid arity: "+(arguments.length-1))}).a=k,C.b=y,C.c=b,C.A=v,C.K=w,C.la=m,C.ib=g,C.Ga=_,C.Xa=h,C.mb=f,C.cb=d,C.nb=c,C.eb=s,C.ob=u,C.fb=a,C.pb=l,C.gb=i,C.qb=o,C.hb=r,C.rb=t,C.Sc=n,C.Be=e,C}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.o=function(){var e=this.R.o?this.R.o():this.R.call(null),n=this.Ea(null,e);return p(n)||cm(this.name,e),n.o?n.o():n.call(null)},g.a=function(e){var n=this.R.a?this.R.a(e):this.R.call(null,e),t=this.Ea(null,n);return p(t)||cm(this.name,n),t.a?t.a(e):t.call(null,e)},g.b=function(e,n){var t=this.R.b?this.R.b(e,n):this.R.call(null,e,n),r=this.Ea(null,t);return p(r)||cm(this.name,t),r.b?r.b(e,n):r.call(null,e,n)},g.c=function(e,n,t){var r=this.R.c?this.R.c(e,n,t):this.R.call(null,e,n,t),o=this.Ea(null,r);return p(o)||cm(this.name,r),o.c?o.c(e,n,t):o.call(null,e,n,t)},g.A=function(e,n,t,r){var o=this.R.A?this.R.A(e,n,t,r):this.R.call(null,e,n,t,r),i=this.Ea(null,o);return p(i)||cm(this.name,o),i.A?i.A(e,n,t,r):i.call(null,e,n,t,r)},g.K=function(e,n,t,r,o){var i=this.R.K?this.R.K(e,n,t,r,o):this.R.call(null,e,n,t,r,o),l=this.Ea(null,i);return p(l)||cm(this.name,i),l.K?l.K(e,n,t,r,o):l.call(null,e,n,t,r,o)},g.la=function(e,n,t,r,o,i){var l=this.R.la?this.R.la(e,n,t,r,o,i):this.R.call(null,e,n,t,r,o,i),a=this.Ea(null,l);return p(a)||cm(this.name,l),a.la?a.la(e,n,t,r,o,i):a.call(null,e,n,t,r,o,i)},g.ib=function(e,n,t,r,o,i,l){var a=this.R.ib?this.R.ib(e,n,t,r,o,i,l):this.R.call(null,e,n,t,r,o,i,l),u=this.Ea(null,a);return p(u)||cm(this.name,a),u.ib?u.ib(e,n,t,r,o,i,l):u.call(null,e,n,t,r,o,i,l)},g.Ga=function(e,n,t,r,o,i,l,a){var u=this.R.Ga?this.R.Ga(e,n,t,r,o,i,l,a):this.R.call(null,e,n,t,r,o,i,l,a),s=this.Ea(null,u);return p(s)||cm(this.name,u),s.Ga?s.Ga(e,n,t,r,o,i,l,a):s.call(null,e,n,t,r,o,i,l,a)},g.Xa=function(e,n,t,r,o,i,l,a,u){var s=this.R.Xa?this.R.Xa(e,n,t,r,o,i,l,a,u):this.R.call(null,e,n,t,r,o,i,l,a,u),c=this.Ea(null,s);return p(c)||cm(this.name,s),c.Xa?c.Xa(e,n,t,r,o,i,l,a,u):c.call(null,e,n,t,r,o,i,l,a,u)},g.mb=function(e,n,t,r,o,i,l,a,u,s){var c=this.R.mb?this.R.mb(e,n,t,r,o,i,l,a,u,s):this.R.call(null,e,n,t,r,o,i,l,a,u,s),d=this.Ea(null,c);return p(d)||cm(this.name,c),d.mb?d.mb(e,n,t,r,o,i,l,a,u,s):d.call(null,e,n,t,r,o,i,l,a,u,s)},g.cb=function(e,n,t,r,o,i,l,a,u,s,c){var d=this.R.cb?this.R.cb(e,n,t,r,o,i,l,a,u,s,c):this.R.call(null,e,n,t,r,o,i,l,a,u,s,c),f=this.Ea(null,d);return p(f)||cm(this.name,d),f.cb?f.cb(e,n,t,r,o,i,l,a,u,s,c):f.call(null,e,n,t,r,o,i,l,a,u,s,c)},g.nb=function(e,n,t,r,o,i,l,a,u,s,c,d){var f=this.R.nb?this.R.nb(e,n,t,r,o,i,l,a,u,s,c,d):this.R.call(null,e,n,t,r,o,i,l,a,u,s,c,d),h=this.Ea(null,f);return p(h)||cm(this.name,f),h.nb?h.nb(e,n,t,r,o,i,l,a,u,s,c,d):h.call(null,e,n,t,r,o,i,l,a,u,s,c,d)},g.eb=function(e,n,t,r,o,i,l,a,u,s,c,d,f){var h=this.R.eb?this.R.eb(e,n,t,r,o,i,l,a,u,s,c,d,f):this.R.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f),_=this.Ea(null,h);return p(_)||cm(this.name,h),_.eb?_.eb(e,n,t,r,o,i,l,a,u,s,c,d,f):_.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f)},g.ob=function(e,n,t,r,o,i,l,a,u,s,c,d,f,h){var _=this.R.ob?this.R.ob(e,n,t,r,o,i,l,a,u,s,c,d,f,h):this.R.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h),g=this.Ea(null,_);return p(g)||cm(this.name,_),g.ob?g.ob(e,n,t,r,o,i,l,a,u,s,c,d,f,h):g.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h)},g.fb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_){var g=this.R.fb?this.R.fb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_):this.R.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_),m=this.Ea(null,g);return p(m)||cm(this.name,g),m.fb?m.fb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_):m.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_)},g.pb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g){var m=this.R.pb?this.R.pb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g):this.R.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g),w=this.Ea(null,m);return p(w)||cm(this.name,m),w.pb?w.pb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g):w.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g)},g.gb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m){var w=this.R.gb?this.R.gb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m):this.R.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m),v=this.Ea(null,w);return p(v)||cm(this.name,w),v.gb?v.gb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m):v.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m)},g.qb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w){var v=this.R.qb?this.R.qb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w):this.R.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w),b=this.Ea(null,v);return p(b)||cm(this.name,v),b.qb?b.qb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w):b.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w)},g.hb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v){var b=this.R.hb?this.R.hb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v):this.R.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v),y=this.Ea(null,b);return p(y)||cm(this.name,b),y.hb?y.hb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v):y.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v)},g.rb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b){var y=this.R.rb?this.R.rb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b):this.R.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b),k=this.Ea(null,y);return p(k)||cm(this.name,y),k.rb?k.rb(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b):k.call(null,e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b)},g.Sc=function(e,n,t,r,o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b,y){var k=jh(this.R,e,n,t,r,G([o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b,y])),C=this.Ea(null,k);return p(C)||cm(this.name,k),jh(C,e,n,t,r,G([o,i,l,a,u,s,c,d,f,h,_,g,m,w,v,b,y]))},g.ig=function(){return this.R},g.v=function(e,n,t){return Rh.A(this.ke,K,n,t),Wl(this.je,this.ke,this.Ud,this.fe),this},g.Ea=function(e,n){return A.b(t(this.Ud),t(this.fe))||Wl(this.je,this.ke,this.Ud,this.fe),p(e=(e=t(this.je)).a?e.a(n):e.call(null,n))?e:Zl(this.name,n,this.fe,this.ke,this.xh,this.je,this.Ud,this.vg)},g.yd=function(){return te(this.name)},g.zd=function(){return ue(this.name)},g.Z=function(){return hb(this)},g=fm.prototype,g.toString=function(){return this.dd},g.Y=function(e,n){return n instanceof fm&&this.dd===n.dd},g.S=function(e,n){return ce(n,['#uuid "',q.a(this.dd),'"'].join(""))},g.Z=function(){return null==this.B&&(this.B=Je(this.dd)),this.B},g.Wb=function(e,n){return Pb(this.dd,n.dd)},hm.prototype.__proto__=Error.prototype,hm.prototype.ma=h,hm.prototype.S=function(e,n,t){return ce(n,"#error {:message "),hl(this.message,n,t),p(this.data)&&(ce(n,", :data "),hl(this.data,n,t)),p(this.lf)&&(ce(n,", :cause "),hl(this.lf,n,t)),ce(n,"}")},hm.prototype.toString=function(){return Be(this)},g=Lm.prototype,g.toString=function(){return Be(this)},g.Y=function(e,n){return n instanceof Lm&&A.b(this.tag,n.tag)&&A.b(this.form,n.form)},g.Z=function(){return 31*Je(this.tag)+Je(this.form)},g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"tag":return this.tag;case"form":return this.form;default:return t}},g.S=function(e,n,t){return ce(n,["#",q.a(this.tag)," "].join("")),hl(this.form,n,t)};var Mm="arguments abstract await boolean break byte case catch char class const continue debugger default delete do double else enum export extends final finally float for function goto if implements import in instanceof int interface let long native new package private protected public return short static super switch synchronized this throw throws transient try typeof var void volatile while with yield methods null constructor".split(" "),Nm=null;function Om(e){return null==Nm&&(Nm=gd.c((function(e,n){return e[n]=!0,e}),{},Mm)),Nm.hasOwnProperty(e)}function Pm(){return p(dd)||(dd=function(){for(var e=gg((function(e,n){return n.length-e.length})),n="";;){if(!B(e))return[n,"|\\$"].join("");var t=D(e),r=[function(){var e=n;return""!==n?[e,"|"].join(""):e}(),q.a(C(e))].join("");e=t,n=r}}()),dd}function Qm(e){var n=q.a(e);if("_DOT__DOT_"===n)var t="..";else e:{t=new RegExp(Pm(),"g"),n=p(dc(n,"$"))?n.substring(0,n.length-1):n;for(var r="",o=0;;){var i=t.exec(n);if(!p(i)){t=[r,q.a(n.substring(o,n.length))].join("");break e}i=J(i,0,null),r=[r,q.a(n.substring(o,t.lastIndex-i.length)),q.a("$"===i?"/":Vb(cd,i))].join(""),o=t.lastIndex}}return(e=e instanceof w?Me:q).a?e.a(t):e.call(null,t)}function Rm(e){this.name=e,this.h=6291456,this.I=0}Rm.prototype.toString=function(){return q.a(this.name)},Rm.prototype.Y=function(e,n){return n instanceof Rm&&A.b(this.name,n.name)},Rm.prototype.Z=function(){return Je(this.name)};var Sm=null;"undefined"!==typeof console&&Pc(),Pc();var Tm=new z(ta,"type","gateway.common.spec.messages/type",2118883938),jo=new z(ra,"type","gateway.common.context.spec.requests/type",372560587),Vm=new z(Da,"snapshot","gateway.domains.agm.spec.requests/snapshot",476154767),Wm=new w(null,"argm","argm",-181546357,null),Ym=new z(null,"metrics","metrics",394093469),Zm=new w(null,"not-native","not-native",-236392494,null),$m=new z(Ka,"creator_id","gateway.domains.global.spec.messages/creator_id",2015161290),an=new z(null,"local?","local?",-1422786101),bn=new z(Ua,"lifetime","gateway.state.spec.context/lifetime",-510268810),cn=new z(null,"level","level",1290497552),dn=new z(null,"?err_","?err_",789480858),en=new z(null,"line","line",212345235),fn=new z(null,"repeat","repeat",832692087),XE=new w(null,"p__11461","p__11461",1947099634,null),gn=new z(null,"client-request","client-request",-1402967032),hn=new z(Da,"stream_id","gateway.domains.agm.spec.requests/stream_id",-1290121066),jn=new z(null,"ALPHA","ALPHA",-1463859144),kn=new z(null,"repository-factories","repository-factories",-545628132),rm=new w(null,"ns*","ns*",1840949383,null),ln=new z(null,"initiator","initiator",217480362),mn=new z(null,"left","left",-399115937),nn=new z(Ta,"activity-id","gateway.state.spec.common/activity-id",245315645),nF=new w(null,"meta12351","meta12351",-1022518466,null),on=new z(null,"context-added","context-added",-639543900),pn=new z(null,"signature-key","signature-key",-1652526996),qn=new z(null,"start-block-t","start-block-t",-373430594),rn=new z(Ta,"type","gateway.state.spec.common/type",-877512429),sn=new z(null,"per-line-prefix","per-line-prefix",846941813),tn=new z(null,"local-ip","local-ip",302001740),un=new z(null,"blacklist-ns","blacklist-ns",1200193567),vn=new z(null,"low","low",-1601362409),wn=new z(Ua,"members","gateway.state.spec.context/members",1219498589),xn=new z(null,"string","string",-1989541586),yn=new z(null,"data","data",-232669377),yF=new w(null,"p__12315","p__12315",1435898405,null),zn=new z(null,"factor","factor",-2103172748),An=new z(null,"parsers","parsers",-804353827),Bn=new z(Ea,"unregister","gateway.domains.agm.spec.unregister/unregister",388278210),Cn=new z(Qa,"id","gateway.state.spec.activity/id",1251756953),Dn=new z(null,"peers","peers",2005345354),En=new z(da,"amp","cljs.spec.alpha/amp",831147508),Fn=new z(Za,"string-restrictions","gateway.state.spec.restrictions/string-restrictions",-382592371),Hn=new z(null,"done-nl","done-nl",-381024340),In=new z(Ua,"timestamp","gateway.state.spec.context/timestamp",1704984480),Jn=new z(null,"private","private",-558947994),Kn=new z(da,"alt","cljs.spec.alpha/alt",523685437),yl=new z(null,"status","status",-1997798413),Ln=new z(null,"version","version",425292698),Mn=new z(null,"trace?","trace?",1730690679),Nn=new z(null,"last-access","last-access",1110221580),On=new z(ta,"peer-message","gateway.common.spec.messages/peer-message",823378764),Pn=new z(null,"days","days",-1394072564),Qn=new w(null,"opt-un","opt-un",-1770993273,null),Rn=new z(null,"description","description",-1428560544),Sn=new z(null,"process-id","process-id",-2118975265),Tn=new z(null,"available_domains","available_domains",-981328192),Un=new w(aa,"deref","cljs.core/deref",1901963335,null),Vn=new z(null,"parser2","parser2",1013754688),Wn=new z(Ba,"meta","gateway.domains.agm.spec.messages/meta",520804499),Xn=new z(null,"parser1","parser1",-439601422),Yn=new z(da,"nil","cljs.spec.alpha/nil",1733813950),Zn=new z(da,"kind-form","cljs.spec.alpha/kind-form",-1047104697),$n=new z(null,"interests","interests",1200294902),ao=new z(null,"contexts","contexts",4351546),bo=new w(null,"conform-into","conform-into",-1039113729,null),co=new z(null,"begin-test-var","begin-test-var",-908571100),eo=new z(Sa,"subscription-id","gateway.state.spec.bus/subscription-id",-1920104157),go=new z(null,"mandatory","mandatory",542802336),ho=new z(null,"end-column","end-column",1425389514),io=new w(da,"multi-spec","cljs.spec.alpha/multi-spec",175821274,null),ko=new z(null,"resolved_identity","resolved_identity",-874947112),NF=new w(null,"meta10588","meta10588",-43678257,null),mo=new z(null,"interop","interop",-1183783726),no=new z(null,"end-of-string","end-of-string",1567354241),oo=new z(null,"delta","delta",108939957),po=new z(null,"service?","service?",-2064761863),qo=new z(null,"base-args","base-args",-1268706822),ro=new z(ra,"updated","gateway.common.context.spec.requests/updated",-286888249),so=new w(null,"message-body","message-body",-554118051,null),zk=new z(aa,"not-found","cljs.core/not-found",-1572889185),to=new z(null,"create-token","create-token",-1564000484),uo=new z(null,"vargs_","vargs_",552132148),vo=new z(null,"server","server",1499190120),wo=new z(null,"grammar","grammar",1881328267),xo=new z(Xa,"method","gateway.state.spec.mthds/method",1887447044),yo=new z(null,"def","def",-1043430536),zo=new z(null,"destination","destination",-253872483),Ao=new w(null,"max-count","max-count",-1115250464,null),Bo=new w(aa,"string?","cljs.core/string?",-2072921719,null),Co=new z(null,"auto-whitespace","auto-whitespace",741152317),Do=new w(null,"forms","forms",-608443419,null),Eo=new z(null,"right-margin","right-margin",-810413306),Fo=new z($a,"activity-subscribers","gateway.state.spec.state/activity-subscribers",-776389065),Go=new z(null,"ref-counted","ref-counted",-1035328654),Ho=new z(Ra,"subscriber","gateway.state.spec.agm/subscriber",2009954326),sG=new z(null,"destroy_peer_id","destroy_peer_id",388079342),Io=new z(null,"ready?","ready?",-105765697),Jo=new z(La,"write_permissions","gateway.domains.global.spec.requests/write_permissions",774911915),Ko=new z(null,"exponentchar","exponentchar",1986664222),No=new z(null,"start-time","start-time",814801386),Oo=new w(null,"pred","pred",-727012372,null),Po=new z(Za,"empty-restrictions","gateway.state.spec.restrictions/empty-restrictions",1011650447),Qo=new z(null,"directive","directive",793559132),Ro=new z(null,"secret","secret",618547054),So=new z(da,"name","cljs.spec.alpha/name",205233570),To=new z(Va,"registered-domains","gateway.state.spec.domain-registry/registered-domains",511803772),Uo=new z(Xa,"version","gateway.state.spec.mthds/version",1762403198),Vo=new z(Ra,"calls","gateway.state.spec.agm/calls",16611731),Wo=new z(Da,"remove-interest","gateway.domains.agm.spec.requests/remove-interest",-328528457),Xo=new z(La,"context_id","gateway.domains.global.spec.requests/context_id",-1750912658),Yo=new z(Ta,"node","gateway.state.spec.common/node",-570411717),Zo=new z(null,"topic","topic",-1960480691),$o=new w(ka,"response-type","gateway.auth.spec/response-type",724325508,null),ap=new z(null,"context-id","context-id",1979873501),bp=new z(null,"trailing-white-space","trailing-white-space",1496006996),cp=new z(null,"destroy-peer","destroy-peer",-1747489061),dp=new w(null,"address-type","address-type",-1732576165,null),ep=new w(null,"keyword?","keyword?",1917797069,null),fp=new z(null,"arg-filter-fn","arg-filter-fn",1576945932),gp=new z($a,"signature-key","gateway.state.spec.state/signature-key",1283598087),hp=new z(bb,"end-index","instaparse.gll/end-index",-1851404441),ip=new z(null,"agm-domain","agm-domain",1137239322),jp=new z(null,"instance","instance",-2121349050),kp=new z(null,"right-params","right-params",-1790676237),lp=new z(null,"activity_types","activity_types",-1792673047),mp=new z(Xa,"flags","gateway.state.spec.mthds/flags",408816343),Am=new w(null,"let*","let*",1920721458,null),op=new w(null,"config","config",-1659574354,null),pp=new z(null,"option","option",65132272),qp=new z($a,"id","gateway.state.spec.state/id",2050905551),rp=new z(La,"lifetime","gateway.domains.global.spec.requests/lifetime",-1145821948),sp=new w(null,"when-first","when-first",821699168,null),tp=new z(null,"ns-blacklist","ns-blacklist",1957763142),up=new z(null,"result_signature","result_signature",-1204398780),vp=new z(null,"input_signature","input_signature",158735218),wp=new z($a,"state","gateway.state.spec.state/state",-1032276972),yp=new w(null,"k->s","k->s",-1685112801,null),zp=new w(null,"g","g",-916345864,null),Ap=new w(null,"f","f",43394975,null),Bp=new z(Ua,"id","gateway.state.spec.context/id",1782620593),Cp=new z(null,"allowed","allowed",1436019743),U=new z(null,"type","type",1174270348),Dp=new z(null,"types-added","types-added",1274011029),Ep=new z(null,"none","none",1333468478),Fp=new z(null,"peer-id","peer-id",387144350),Gp=new w(null,"_","_",-1201019570,null),Hp=new w(aa,"seq","cljs.core/seq",-1649497689,null),Ip=new z(null,"reader-error","reader-error",1610253121),Jp=new w(null,"v","v",1661996586,null),Kp=new w(null,"m","m",-1021758608,null),Lp=new w(null,"k","k",-505765866,null),Mp=new z(null,"optional","optional",2053951509),Np=new w(null,"opt-specs","opt-specs",1255626077,null),aF=new w(null,"p1__9613#","p1__9613#",-1973599680,null),Op=new w(null,"cpred","cpred",-540353554,null),Pp=new w(null,"re","re",1869207729,null),qG=new w(null,"map__11463","map__11463",842169409,null),Qp=new w(aa,"keyword?","cljs.core/keyword?",713156450,null),Rp=new w(null,"max-columns","max-columns",-912112507,null),OG=new w(null,"map__12316","map__12316",431203874,null),Sp=new z(ra,"context-destroy","gateway.common.context.spec.requests/context-destroy",-2019226956),Tp=new z(Ua,"updates","gateway.state.spec.context/updates",-1191134395),Up=new z(Ka,"updater_id","gateway.domains.global.spec.messages/updater_id",-1794190419),Vp=new z(null,"creator_id","creator_id",1398967087),Wp=new z(ta,"request","gateway.common.spec.messages/request",712202569),Xp=new w(aa,"keyword","cljs.core/keyword",-337316415,null),Yp=new z(null,"node","node",581201198),Zp=new z(La,"leave","gateway.domains.global.spec.requests/leave",101292368),$p=new z(null,"token","token",-1211463215),aq=new z("instaparse","failure","instaparse/failure",1422918607),bq=new z(Ra,"subscription","gateway.state.spec.agm/subscription",1556334291),cq=new z(null,"high","high",2027297808),dq=new z(ka,"remote_identity","gateway.auth.spec/remote_identity",-1701598746),eq=new z(null,"plus","plus",211540661),fq=new z(Va,"domain","gateway.state.spec.domain-registry/domain",-1376202493),gq=new w(aa,"number?","cljs.core/number?",-811857295,null),hq=new w(da,"coll-of","cljs.spec.alpha/coll-of",1019430407,null),iq=new z(null,"auth","auth",1389754926),jq=new z(Da,"call","gateway.domains.agm.spec.requests/call",442214083),kq=new z(null,"arguments","arguments",-1182834456),lq=new z(null,"colinc","colinc",-584873385),mq=new z(null,"auto","auto",-566279492),nq=new z(null,"logical-block","logical-block",-581022564),oq=new z(null,"node-builder","node-builder",-1956562605),pq=new z(Ta,"endpoint","gateway.state.spec.common/endpoint",-2063041997),qq=new z(Ka,"reason","gateway.domains.global.spec.messages/reason",-1756219178),rq=new z(null,"your-version","your-version",-351781765),sq=new z(null,"col","col",-1959363084),tq=new z(null,"domain","domain",1847214937),uq=new z(null,"?ns-str","?ns-str",2012733966),vq=new z(null,"reset","reset",-800929946),wq=new z(null,"current","current",-1088038603),xq=new z(null,"writing","writing",-1486865108),yq=new z(Sa,"topic-repattern","gateway.state.spec.bus/topic-repattern",736554526),zq=new z(Ta,"peer-id","gateway.state.spec.common/peer-id",-1398853323),Aq=new z(null,"suppress-namespaces","suppress-namespaces",2130686956),Bq=new z(Da,"unsubscribe","gateway.domains.agm.spec.requests/unsubscribe",-1898794870),Cq=new z(Da,"server_id","gateway.domains.agm.spec.requests/server_id",172340651),Dq=new z(null,"parent","parent",-878878779),Eq=new z(Qa,"visibility","gateway.state.spec.activity/visibility",-1264422156),Fq=new w(da,"conform","cljs.spec.alpha/conform",763100824,null),Gq=new z(null,"bus-domain","bus-domain",1136396472),Hq=new w(aa,"map?","cljs.core/map?",-1390345523,null),HH=new w(null,"meta11901","meta11901",-854950149,null),nm=new w(null,"&","&",-2144855648,null),Iq=new z(null,"HTAB","HTAB",11392612),Jq=new z(null,"snapshot","snapshot",-1274785710),Kq=new z(null,"right-bracket","right-bracket",951856080),Lq=new z(null,"req-id","req-id",-471642231),Mq=new z(Qa,"context-id","gateway.state.spec.activity/context-id",341891962),Nq=new z(Wa,"factory","gateway.state.spec.factory/factory",1055781172),Oq=new z(null,"req-in","req-in",960021885),Qq=new z(null,"current-id","current-id",210783650),Rq=new z(null,"ttl","ttl",-1115275118),Sq=new z(Qa,"owner_type","gateway.state.spec.activity/owner_type",-1823895667),Tq=new z(Qa,"initiator","gateway.state.spec.activity/initiator",735796495),em=new z(null,"default","default",-1987822328),Uq=new z(null,"secs","secs",1532330091),Vq=new z(Ra,"interest","gateway.state.spec.agm/interest",1248511583),Wq=new z(null,"initial_context","initial_context",-797433349),Xq=new w("clojure.core","deref","clojure.core/deref",188719157,null),Yq=new w(null,"miser-width","miser-width",330482090,null),Zq=new z(null,"system","system",-29381724),$q=new z(null,"partial","partial",241141745),ar=new z(Da,"publish","gateway.domains.agm.spec.requests/publish",-1020033829),br=new z(ka,"login","gateway.auth.spec/login",532129350),cr=new z(ra,"context-update","gateway.common.context.spec.requests/context-update",562123698),dr=new z(Ra,"call","gateway.state.spec.agm/call",399063183),er=new z(null,"handler-ch","handler-ch",2044105199),fr=new z(null,"reader-exception","reader-exception",-1938323098),gr=new w(da,"tuple","cljs.spec.alpha/tuple",-415901908,null),hr=new z(Da,"context","gateway.domains.agm.spec.requests/context",-1915055426),ir=new z(null,"req-un","req-un",1074571008),jr=new z(null,"forms","forms",2045992350),kr=new z(null,"cur","cur",1153190599),lr=new z(Xa,"result_signature","gateway.state.spec.mthds/result_signature",-1987803736),mr=new z(Qa,"ready-members","gateway.state.spec.activity/ready-members",-939559218),nr=new z(null,"filters","filters",974726919),Km=new w(null,"def","def",597100991,null),or=new z(La,"context-update","gateway.domains.global.spec.requests/context-update",-1728804708),Nl=new z(null,"keywordize-keys","keywordize-keys",1310784252),pr=new z(null,"pos","pos",-864607220),qr=new z(null,"initiated","initiated",2096076574),rr=new z(da,"v","cljs.spec.alpha/v",552625740),sr=new z(null,"message","message",-406056002),tr=new z(Qa,"types","gateway.state.spec.activity/types",-2083568052),ur=new z(da,"k","cljs.spec.alpha/k",-1602615178),vr=new z(null,"output-fn","output-fn",1600951539),wr=new z("mem","del","mem/del",574870667),xr=new z(null,"total","total",1916810418),zr=new z(null,"domains","domains",1410387719),Ar=new z(null,"CR","CR",-1654295403),Br=new z(Ta,"source","gateway.state.spec.common/source",1883706108),Cr=new z(null,"typ","typ",-1304536900),Dr=new z(null,"form","form",-1624062471),V=new w(null,"%","%",-950237169,null),Er=new z(null,"pretty-writer","pretty-writer",-1222834267),Fr=new w(null,"..","..",-300507420,null),Gr=new z(null,"accepted","accepted",-1953464374),Hr=new z(null,"removed","removed",609626430),Ir=new w(ta,"message-body","gateway.common.spec.messages/message-body",-1647648637,null),Jr=new z(null,"pretty","pretty",-1916372486),Kr=new z(null,"summary","summary",380847952),Lr=new z(null,"peer-requested","peer-requested",1452118887),Mr=new z(null,"application","application",551185447),Nr=new z(da,"invalid","cljs.spec.alpha/invalid",-1220295119),Or=new z(da,"pcat","cljs.spec.alpha/pcat",26406623),Pr=new z(ra,"read_permissions","gateway.common.context.spec.requests/read_permissions",-45173714),Qr=new z(null,"caller","caller",-1275362879),Rr=new z(Wa,"id","gateway.state.spec.factory/id",-395012522),Sr=new z(null,"LWSP","LWSP",782998598),Tr=new z(null,"activity","activity",-1179221455),Ur=new z(null,"dec-val","dec-val",-1263870894),Vr=new z(null,"activity-types","activity-types",-397260556),Wr=new z(Qa,"configuration","gateway.state.spec.activity/configuration",1853083827),Xr=new z(null,"arguments_kv","arguments_kv",739148125),Yr=new z(null,"callee","callee",-156445786),Zr=new z(null,"activity_id","activity_id",-240070853),$r=new z(Ya,"activity","gateway.state.spec.pending-requests/activity",1935677687),as=new w(null,"read-string*","read-string*",1046768315,null),bs=new w(null,"unc","unc",-465250751,null),cs=new z($a,"identities","gateway.state.spec.state/identities",-204237049),ds=new z(null,"join","join",-758861890),es=new w(null,"uuid","uuid",-504564192,null),fs=new z(null,"participants","participants",673603367),gs=new z(null,"full-results","full-results",-1500225407),hs=new z(null,"own-ident","own-ident",1422237852),is=new z(null,"request_id","request_id",-208950594),js=new w(null,"queue","queue",-1198599890,null),ks=new z(null,"else","else",-1508377146),om=new w(null,"case*","case*",-1938255072,null),ls=new z(null,"hide","hide",-596913169),ms=new w(null,ka,ka,1721169563,null),ns=new z(null,"params","params",710516235),os=new z(null,"restrictions","restrictions",1874752994),LH=new w(null,"p1__13236#","p1__13236#",790017356,null),ps=new z(ra,"join","gateway.common.context.spec.requests/join",94453629),qs=new z(La,"context-destroy","gateway.domains.global.spec.requests/context-destroy",1322892186),rs=new z(ta,"broadcast","gateway.common.spec.messages/broadcast",-1460237246),kI=new w(null,"meta13318","meta13318",1225772791,null),ss=new w(null,"struct-map","struct-map",-1387540878,null),ts=new z(null,"rest","rest",-1241696419),us=new z(null,"commachar","commachar",652859327),vs=new z(null,"activities","activities",1654844313),ws=new z(Ta,"channel","gateway.state.spec.common/channel",426185507),xs=new z(null,"error-level?","error-level?",778415885),ys=new z(La,"reset","gateway.domains.global.spec.requests/reset",-116815601),zs=new z(null,"begin-test-ns","begin-test-ns",-1701237033),As=new z(null,"msg-cache","msg-cache",-733775070),Bs=new z(Da,"post","gateway.domains.agm.spec.requests/post",-1221170496),wl=new z(null,"val","val",128701612),Cs=new w(aa,"zipmap","cljs.core/zipmap",-1902130674,null),Ds=new z(null,"buffer-size","buffer-size",1047120420),Es=new z(Ra,"server","gateway.state.spec.agm/server",1918098797),Fs=new z(null,"local","local",-1497766724),Gs=new z(null,"login","login",55217519),Hs=new z(null,"add-peer-factories","add-peer-factories",-1612194889),Is=new z(null,"stream_id","stream_id",-871396659),Im=new w(null,"catch","catch",-1616370245,null),Js=new w(null,"describe-form","describe-form",-1410156588,null),Ks=new z(Ya,"gateway-requests","gateway.state.spec.pending-requests/gateway-requests",-1212651271),Ls=new z(da,"kvs->map","cljs.spec.alpha/kvs->map",579713455),Ns=new z(Ya,"id","gateway.state.spec.pending-requests/id",-199997554),Os=new z(null,"kind","kind",-717265803),Ps=new z(null,"Epsilon","Epsilon",133418452),Qs=new z(Xa,"methods","gateway.state.spec.mthds/methods",-868139122),Rs=new z(null,"endpoint","endpoint",447890044),Ss=new z(Sa,"subscriptions","gateway.state.spec.bus/subscriptions",359149340),Ts=new z(null,"method","method",55703592),Us=new z(null,"reloading","reloading",961158984),Vs=new w(null,"cnt","cnt",1924510325,null),Ws=new w(null,"opt-keys","opt-keys",-1391747508,null),Xs=new z(ka,"user","gateway.auth.spec/user",803364081),Ys=new z(null,"write_permissions","write_permissions",-2075461534),Zs=new z(null,"years","years",-1298579689),MJ=new w(null,"meta12453","meta12453",-1196160356,null),$s=new z(da,"accept","cljs.spec.alpha/accept",370988198),hK=new z(null,"commands","commands",161008658),at=new z(Ca,"methods","gateway.domains.agm.spec.register/methods",-209946928),bt=new z(null,"services","services",970478783),ct=new z(null,"context-domain","context-domain",-563887528),dt=new z(null,"user","user",1532431356),et=new z(null,"hostname_","hostname_",-2091647379),ft=new w(aa,"vec","cljs.core/vec",307622519,null),gt=new w(aa,"concat","cljs.core/concat",-1133584918,null),ht=new z(Qa,"context_id","gateway.state.spec.activity/context_id",1100878008),it=new z(null,"features","features",-1146962336),jt=new z(null,"?msg-fmt","?msg-fmt",-852453891),kt=new z(null,"sections","sections",-886710106),lt=new z(null,"lines","lines",-700165781),um=new w(null,"do","do",1686842252,null),mt=new z(null,"colon","colon",-965200945),nt=new z(null,"unregister","unregister",2105339971),ot=new z(null,"keys-pred","keys-pred",858984739),pt=new w(null,"cpred?","cpred?",35589515,null),qt=new z(null,"testing-vars","testing-vars",-2114769150),rt=new z(null,"max-age","max-age",-270129271),tt=new z(null,"minpad","minpad",323570901),ut=new z(null,"remove-interest","remove-interest",-1017752998),vt=new w(null,Fa,Fa,-340272132,null),wt=new w(da,"keys","cljs.spec.alpha/keys",1109346032,null),xt=new z(null,"hide-nt","hide-nt",-228813845),yt=new z(qa,"context_id","gateway.common.context.spec.messages/context_id",745790948),zt=new z(null,"formatter","formatter",-483008823),At=new z(null,"skip-validation","skip-validation",-195677600),Bt=new z(null,"measurements","measurements",82224007),Ct=new z(null,"rulename","rulename",948914160),Dt=new z(null,"context_id","context_id",1618636315),Et=new z(null,"regexp","regexp",-541372782),Ft=new z(Qa,"helper_types","gateway.state.spec.activity/helper_types",-920321960),Gt=new z(null,"unhide","unhide",-413983695),qm=new w(null,"try","try",-1273693247,null),Ht=new z(null,"location","location",1815599388),It=new w(fa,"read-string*","cljs.tools.reader/read-string*",1492661621,null),Jt=new w(null,"ch","ch",1085813622,null),Kt=new w(null,"cb","cb",-2064487928,null),Lt=new w(null,"specs","specs",-1227865028,null),Mt=new z(null,"composite","composite",-257118970),Nt=new z(ta,"peer_id","gateway.common.spec.messages/peer_id",-1253667286),Ot=new z($a,"user-name","gateway.state.spec.state/user-name",-1129365610),Pt=new z(null,"raw","raw",1604651272),Qt=new w(null,"let","let",358118826,null),Kc=new z(null,"flush-on-newline","flush-on-newline",-151457939),Rt=new z($a,"creation-request","gateway.state.spec.state/creation-request",473028997),St=new z(Da,"add-interest","gateway.domains.agm.spec.requests/add-interest",1660124918),Tt=new z(null,"destroy-context","destroy-context",-1305625710),Ut=new z(La,"destination","gateway.domains.global.spec.requests/destination",165081940),Wt=new z(null,"pred-exprs","pred-exprs",1792271395),Xt=new w(null,"id","id",252129435,null),wm=new w(null,"if","if",1181717262,null),Yt=new z(null,"concatenation","concatenation",-951369614),Zt=new z(null,"timestamp","timestamp",579478971),$t=new z(Ra,"invocation","gateway.state.spec.agm/invocation",-928333769),au=new z($a,"contexts","gateway.state.spec.state/contexts",-1321025323),bu=new z(null,"leave","leave",1022579443),cu=new z(null,"min-count","min-count",1594709013),du=new z(null,"context-created","context-created",-436520594),eu=new z(null,"messages","messages",345434482),fu=new z(ra,"context-unsubscribe","gateway.common.context.spec.requests/context-unsubscribe",46104946),lK=new w(null,"meta11517","meta11517",-200391237,null),Hm=new w(null,"quote","quote",1377916282,null),gu=new w(null,"gen-into","gen-into",592640985,null),hu=new w(null,"gw","gw",1384842711,null),iu=new z(La,"context-subscribe","gateway.domains.global.spec.requests/context-subscribe",614257563),iK=new z(null,"remove","remove",-131428414),ju=new z(La,"join","gateway.domains.global.spec.requests/join",-837980557),ku=new z(null,"hierarchy","hierarchy",-1053470341),lu=new z(null,"left_id","left_id",730267975),mu=new z(null,"trace","trace",-1082747415),nu=new z("rl","reset","rl/reset",-800926172),ou=new w(null,"fn","fn",465265323,null),pu=new z(null,"context-compatibility-mode?","context-compatibility-mode?",564867301),qu=new z(null,"invocation_id","invocation_id",1947784937),ru=new z(null,"strable","strable",1877668047),su=new z(null,"remote_identity","remote_identity",1864550587),tu=new z(Ya,"type","gateway.state.spec.pending-requests/type",-1681171358),uu=new w("s","keys","s/keys",-1586011188,null),vu=new z(null,"identities","identities",-2100677764),wu=new z(Qa,"children","gateway.state.spec.activity/children",651398237),xu=new z(null,"symbol","symbol",-1038572696),yu=new z(null,"iss","iss",1130086696),zu=new w(null,"fields","fields",-291534703,null),Au=new z(null,"char-range","char-range",1443391389),Bu=new z(null,"parsed-restrictions","parsed-restrictions",-1665101931),Cu=new w(null,"lift-ns","lift-ns",602311926,null),Du=new z(null,"leave-activity","leave-activity",-484899731),Eu=new z(null,"middleware","middleware",1462115504),Fu=new z(Ya,"gateway_token","gateway.state.spec.pending-requests/gateway_token",-1747123785),Gu=new z(null,"access_token","access_token",1591156073),Hu=new z(null,"red","red",-969428204),jK=new z(null,"value","value",305978217),Iu=new z($a,"no-user","gateway.state.spec.state/no-user",-565346809),Ju=new z(null,"enabled?","enabled?",-1376075057),Ku=new z(null,"rep","rep",-1226820564),ym=new w(null,"ns","ns",2082130287,null),Lu=new z(null,"req","req",-326448303),Mu=new z(null,"ret","ret",-468222814),Nu=new z(null,"subscribe","subscribe",416253756),Ou=new w(null,"partial","partial",1881673272,null),Pu=new z(null,"create-context","create-context",-1362772644),Qu=new z(null,"both","both",-393648840),Ru=new z(null,"result","result",1415092211),Su=new w(null,"keys-pred","keys-pred",-1795451030,null),wK=new w(null,"meta11984","meta11984",1741232023,null),Tu=new z(null,"server_id","server_id",-518165566),FO=new z(null,"keep","keep",-2133338530),Uu=new z(null,"vector","vector",1902966158),Vu=new z(null,"peer_name","peer_name",-245526270),Wu=new z(null,"end","end",-268185958),Xu=new z(null,"buffer-blob","buffer-blob",-1830112173),Yu=new z(Da,"accepted","gateway.domains.agm.spec.requests/accepted",1383451047),Zu=new w("clojure.core","unquote","clojure.core/unquote",843087510,null),$u=new z(null,"alt-or-ord","alt-or-ord",310249425),av=new z(Ta,"address","gateway.state.spec.common/address",394563279),bv=new w(null,"lb","lb",950310490,null),cv=new z(null,"create","create",-1301499256),dv=new z(Qa,"user","gateway.state.spec.activity/user",-93065379),ev=new z(Da,"result","gateway.domains.agm.spec.requests/result",1027857196),fv=new z(null,"flags","flags",1775418075),gv=new z(null,"eof","eof",-489063237),hv=new z(Xa,"description","gateway.state.spec.mthds/description",-129583756),iv=new w(null,"js","js",-886355190,null),jv=new z(null,"relative-to","relative-to",-470100051),kv=new w(null,"doseq","doseq",221164135,null),nv=new z(Ba,"new_peer_id","gateway.domains.agm.spec.messages/new_peer_id",-2026004018),ov=new z(null,"source_type","source_type",-144028049),pv=new z(null,"CHAR","CHAR",-1280338086),qv=new w(aa,"list?","cljs.core/list?",-684796618,null),rv=new z(ta,"outgoing-message","gateway.common.spec.messages/outgoing-message",1952031218),sv=new z(null,"joined_id","joined_id",35485948),tv=new z(ta,"response","gateway.common.spec.messages/response",69665082),uv=new z(Ka,"resolved_identity","gateway.domains.global.spec.messages/resolved_identity",-685850501),wv=new z(null,"parser","parser",-1543495310),xv=new w(da,"merge","cljs.spec.alpha/merge",1420080689,null),yv=new z(Qa,"name","gateway.state.spec.activity/name",113237718),zv=new z(Ba,"reason","gateway.domains.agm.spec.messages/reason",-1483891292),Av=new z(null,"users","users",-713552705),Bv=new z(null,"welcome","welcome",-578152123),Cv=new z(null,"char-val","char-val",1408617933),Dv=new z(null,"doc","doc",1913296891),Ev=new z(null,"dump","dump",-356261477),Fv=new z(null,"expr","expr",745722291),Gv=new z(Qa,"activity-peer","gateway.state.spec.activity/activity-peer",-1499406427),Hv=new z(null,"origin","origin",1037372088),Iv=new z(null,"remove-peer-factories","remove-peer-factories",-316522514),Jv=new z(null,"lookahead","lookahead",-400102393),Kv=new z(ab,"token-data","gateway.state.spec.tokens/token-data",-481150767),Lv=new z(null,"hash_","hash_",-827203612),Mv=new z(va,"restrictions","gateway.common.spec.requests/restrictions",-1264539352),Nv=new z(null,"comment","comment",532206069),Ov=new z(null,"add-types","add-types",-711550002),Pv=new z(null,"?file","?file",1533429675),Qv=new z(null,"added","added",2057651688),Rv=new z(null,"segment","segment",-964921196),Sv=new w(null,"gfn","gfn",-1862918295,null),Tv=new z(null,"map","map",1371690461),Uv=new z(null,"display_name","display_name",-1494335013),Vv=new z(null,"rulename-left","rulename-left",-1824251564),Wv=new z(null,"remote-identity","remote-identity",1289489893),Xv=new z(null,"body","body",-2049205669),Yv=new z(bb,"start-index","instaparse.gll/start-index",404653620),Zv=new z(null,"cluster","cluster",535175621),$v=new z(null,"uri","uri",-774711847),aw=new z(null,"mode","mode",654403691),bw=new z(null,"max","max",61366548),cw=new z(Wa,"configuration","gateway.state.spec.factory/configuration",154272470),dw=new z($a,"peers","gateway.state.spec.state/peers",75810773),ew=new z(null,"token-ttl","token-ttl",-103977687),fw=new z(null,"register","register",1968522516),gw=new z(null,"count","count",2139924085),hw=new z(null,"clauses","clauses",1454841241),iw=new z(null,"miser-width","miser-width",-1310049437),jw=new w(null,"binding","binding",-2114503176,null),kw=new z(null,"hide-tag-rule","hide-tag-rule",150267589),lw=new w(null,"kps","kps",-1157342767,null),mw=new z(null,"call","call",-519999866),nw=new z($a,"ids","gateway.state.spec.state/ids",259664151),ow=new z(null,"peer_id","peer_id",1920005364),pw=new z(null,"next-stack","next-stack",-481930728),qw=new w(null,"tag","tag",350170304,null),rw=new z(null,"available","available",-1470697127),sw=new z(null,"splice","splice",449588165),tw=new z(null,"dispatch","dispatch",1319337009),uw=new w(null,"inst","inst",-2008473268,null),vw=new z(Da,"invoke","gateway.domains.agm.spec.requests/invoke",1837084336),ww=new z(qa,"reason","gateway.common.context.spec.messages/reason",-795974116),xw=new z(null,"?meta","?meta",-793560773),yw=new z(null,"name","name",1843675177),zw=new z(null,"VCHAR","VCHAR",1962437706),Aw=new z(null,"peer-created","peer-created",-1509421151),Bw=new w(null,"loop","loop",1244978678,null),Cw=new z(null,"appender","appender",1267426510),Dw=new z(Ya,"gateway-request","gateway.state.spec.pending-requests/gateway-request",796467142),Ew=new z(null,"parameter-from-args","parameter-from-args",-758446196),Fw=new z(null,"end-test-ns","end-test-ns",1620675645),Gw=new w(aa,"pos?","cljs.core/pos?",-652182749,null),Hw=new z(null,"destroyed","destroyed",-427566535),Iw=new z(null,"properties","properties",685819552),Jw=new z(null,"hide-tag","hide-tag",1347642501),Kw=new z(null,"whitelist-ns","whitelist-ns",868974100),Lw=new z($a,"node-id","gateway.state.spec.state/node-id",-982277841),Mw=new z(null,"ownership","ownership",892314581),Nw=new z(null,"CTL","CTL",-9995632),Ow=new z(null,"section","section",-300141526),Pw=new z(null,"bracket-info","bracket-info",-1600092774),Qw=new z(null,"subscribe-context","subscribe-context",1009129400),Rw=new w(null,"Inf","Inf",647172781,null),Sw=new z(null,"validation","validation",-2141396518),Tw=new w(aa,"map","cljs.core/map",-338988913,null),Nc=new z(null,"dup","dup",556298533),Uw=new z(null,"subscription-cancelled","subscription-cancelled",1868207049),Vw=new z(Ka,"available_domains","gateway.domains.global.spec.messages/available_domains",-1472037229),Ww=new z(da,"rep","cljs.spec.alpha/rep",1483217317),Xw=new z(null,"invocations","invocations",-1981777494),Yw=new z(null,"suffix","suffix",367373057),Zw=new z(null,"methods","methods",453930866),$w=new w(null,"defn-","defn-",1097765044,null),ax=new z(null,"required","required",1807647006),bx=new z(null,"unsubscribe-context","unsubscribe-context",-1695207834),cx=new z(null,"buffer","buffer",617295198),dx=new z(null,"inherit","inherit",-1840815422),ex=new z(null,"factory_ids","factory_ids",1173653523),fx=new z(null,"msg_","msg_",-1925147e3),gx=new z(null,"peer_factory","peer_factory",1685625260),hx=new z(null,"opt-keys","opt-keys",1262688261),ix=new w(null,"when-not","when-not",-1223136340,null),jx=new w(null,Ta,Ta,27478502,null),kx=new w(null,"reader","reader",1810192380,null),lx=new z(null,"end-test-all-vars","end-test-all-vars",548827253),mx=new z(xa,"operation-result","gateway.domain/operation-result",-1509018323),nx=new w(null,"opts","opts",1795607228,null),ox=new z(null,"post","post",269697687),px=new z(null,"iat","iat",-353315170),qx=new z(null,"min","min",444991522),rx=new z(null,"types_override","types_override",391099757),sx=new w(aa,"sequence","cljs.core/sequence",1908459032,null),tx=new z(La,"added","gateway.domains.global.spec.requests/added",-1820753011),ux=new z(null,"column","column",2078222095),vx=new z(va,"join","gateway.common.spec.requests/join",-1713603460),wx=new z(ra,"delta","gateway.common.context.spec.requests/delta",-694068490),xx=new w(null,"drop-interest-rq","drop-interest-rq",-842860790,null),yx=new z(null,"up-arrow","up-arrow",1705310333),zx=new w(aa,"with-meta","cljs.core/with-meta",749126446,null),Ax=new z(null,"logical-block-callback","logical-block-callback",1612691194),Bx=new w(aa,"nil?","cljs.core/nil?",945071861,null),Cx=new z(Fa,"drop-interest","gateway.domains.agm.subscriptions/drop-interest",-1584375112),Dx=new z(null,"weeks","weeks",1844596125),Ex=new z(Ua,"owner","gateway.state.spec.context/owner",-1445790718),Fx=new z(null,"regex","regex",939488856),Gx=new z(null,"read-cond","read-cond",1056899244),Hx=new z(null,"mincol","mincol",1230695445),Ix=new z("promesa.core","default","promesa.core/default",1773193826),Jx=new z(null,"end-run-tests","end-run-tests",267300563),Kx=new z(null,"visibility","visibility",1338380893),Lx=new z(null,"deref","deref",-145586795),Mx=new z(null,"ids","ids",-998535796),Nx=new z(da,"unknown","cljs.spec.alpha/unknown",651034818),Ox=new z(null,"yield","yield",177875009),Px=new z(null,"max-iterations","max-iterations",2021275563),Qx=new z(null,"output_","output_",-36797880),Rx=new z(null,"hex-char","hex-char",764443568),Sx=new z(null,"report-counters","report-counters",-1702609242),Tx=new z(null,"joined","joined",-231861661),Ux=new z(null,"inside-comment","inside-comment",1258069708),Vx=new z(null,"runtime-exception","runtime-exception",-1495664514),Wx=new z(Ta,"identity","gateway.state.spec.common/identity",-343306948),Xx=new z(Ba,"oob","gateway.domains.agm.spec.messages/oob",-285361976),Yx=new z(null,"config","config",994861415),Zx=new z(null,"joined_name","joined_name",-1159730335),$x=new z(null,"whitespace","whitespace",-1340035483),ay=new z(Va,"info","gateway.state.spec.domain-registry/info",754617108),by=new z(null,"activity-domain","activity-domain",1896268503),cy=new z(null,"machine","machine",-1389886154),zm=new w(null,"deftype*","deftype*",962659890,null),dy=new z(null,"rep+","rep+",-281382396),ey=new z(ka,"message","gateway.auth.spec/message",212934373),fy=new w(null,"pred-exprs","pred-exprs",-862164374,null),gy=new z(Ra,"interests","gateway.state.spec.agm/interests",1622331889),hy=new w(null,"spec","spec",1988051928,null),iy=new w(null,"NaN","NaN",666918153,null),jy=new z(null,"unsupported-operation","unsupported-operation",1890540953),ky=new z(null,"msecs","msecs",1711980553),ly=new z(null,"subscribed-context","subscribed-context",-451582146),my=new z(null,"authenticator","authenticator",728866366),ny=new z(null,"reduction-type","reduction-type",-488293450),oy=new w(null,"defmacro","defmacro",2054157304,null),py=new z(Ra,"callee","gateway.state.spec.agm/callee",1100257697),qy=new z(null,"subscriptions","subscriptions",1250949776),ry=new z(Ra,"caller","gateway.state.spec.agm/caller",-1898628116),sy=new z(da,"conform-all","cljs.spec.alpha/conform-all",45201917),ty=new z(null,"whitelist","whitelist",-979294437),uy=new w(aa,"hash-map","cljs.core/hash-map",303385767,null),vy=new z(Ra,"invocation_id","gateway.state.spec.agm/invocation_id",-822050570),wy=new z(ta,"outgoing-messages","gateway.common.spec.messages/outgoing-messages",-924999491),xy=new z(null,"full-listeners","full-listeners",50621827),yy=new z(null,"owner?","owner?",-839891990),zy=new z($a,"peer","gateway.state.spec.state/peer",-2119577277),Ay=new z(null,"nt","nt",-835425781),By=new z(null,"ns","ns",441598760),Cy=new z(null,"expected","expected",1583670997),Dy=new z(Da,"invocation_id","gateway.domains.agm.spec.requests/invocation_id",-621605438),Ey=new z(Sa,"routing-key","gateway.state.spec.bus/routing-key",554216520),sS=new w(null,"meta11255","meta11255",-111844645,null),Fy=new z(null,"receiver","receiver",1768630781),Gy=new z(Ua,"contexts","gateway.state.spec.context/contexts",-1052863269),Hy=new w(null,aa,aa,770546058,null),Iy=new z(La,"read_permissions","gateway.domains.global.spec.requests/read_permissions",75711320),Jy=new z(Qa,"parent","gateway.state.spec.activity/parent",-359694046),Ky=new z(null,"joined_type","joined_type",973647374),Ly=new z(null,"p2","p2",905500641),pm=new w(null,"defrecord*","defrecord*",-1936366207,null),My=new z(null,"p1","p1",-936759954),Ny=new z(null,"type-tag","type-tag",-1873863267),Oy=new z(null,"ms","ms",-1152709733),Py=new z(null,"middleware-fn","middleware-fn",-61585752),tS=new w(null,"meta12119","meta12119",1659150026,null),Qy=new z(null,"no-user","no-user",793713538),Ry=new z(null,"readers","readers",-2118263030),Sy=new z(Qa,"owner","gateway.state.spec.activity/owner",-1983556102),Ty=new z(null,"DIGIT","DIGIT",341251338),Uy=new w(null,"string?","string?",-1129175764,null),Vy=new z(null,"defined-as","defined-as",-474679152),Wy=new z(null,"comma","comma",1699024745),Xy=new z(Ua,"name","gateway.state.spec.context/name",-1494107954),Yy=new z(Ya,"client-request","gateway.state.spec.pending-requests/client-request",1663875818),Zy=new z(null,"lo","lo",-931799889),$y=new z(null,"node-id","node-id",779482292),vT=new w(null,"meta13894","meta13894",-1452766245,null),az=new z(ea,"pprint","cljs.test/pprint",1627393641),bz=new z(null,"requestor_id","requestor_id",-1253857801),cz=new w(null,"keys->specnames","keys->specnames",1791294693,null),dz=new w(null,"conform-keys","conform-keys",-159510287,null),ez=new z(La,"hello","gateway.domains.global.spec.requests/hello",-398737422),fz=new z(null,"end-line","end-line",1837326455),gz=new z(null,"read_permissions","read_permissions",766082539),Cm=new w(null,"fn*","fn*",-752876845,null),hz=new z(null,"ks","ks",1900203942),iz=new z(null,"start-production","start-production",687546537),jz=new z(null,"allow","allow",-1857325745),kz=new z(Ka,"remote-identity","gateway.domains.global.spec.messages/remote-identity",1498525882),lz=new z(null,"source","source",-433931539),mz=new w("s","coll-of","s/coll-of",-1705285349,null),nz=new z(null,"memory","memory",-1449401430),W=new w(aa,"fn","cljs.core/fn",-1065745098,null),oz=new z(null,"circle","circle",1903212362),pz=new z(null,"registered-domains","registered-domains",-559729182),qz=new z(null,"success","success",1890645906),Sl=new z(null,"descendants","descendants",1824886031),rz=new z(null,"report","report",1394055010),sz=new z(null,"start","start",-355208981),tz=new z(null,"ns-whitelist","ns-whitelist",-1717299774),uz=new z(Da,"yield","gateway.domains.agm.spec.requests/yield",1398099968),vz=new z(null,"repos","repos",647483789),wz=new z(null,"num-val","num-val",1497434478),xz=new z(Da,"flags","gateway.domains.agm.spec.requests/flags",989202486),yz=new z(null,"recur","recur",-437573268),zz=new z(null,"caller_id","caller_id",5404558),Az=new z(Sa,"topic","gateway.state.spec.bus/topic",-1241703207),Bz=new z(null,"alternation","alternation",-1162147630),Cz=new z(ra,"lifetime","gateway.common.context.spec.requests/lifetime",-228133926),Dz=new z(null,"subscriber","subscriber",-2064338413),Ez=new z(null,"length","length",588987862),Fz=new z(null,"appender-id","appender-id",-1917983538),Gz=new z(null,"subscribed","subscribed",1012088257),Hz=new w(null,"with-open","with-open",172119667,null),Iz=new z(null,"ps","ps",292358046),Jz=new z(null,"not-delivered","not-delivered",1599158697),Kz=new w(null,"if-not","if-not",-265415609,null),Lz=new z(null,"blacklist","blacklist",1248093170),Nz=new z("gateway.common.commands","source-removed","gateway.common.commands/source-removed",701959101),Oz=new z(Da,"method_id","gateway.domains.agm.spec.requests/method_id",926663112),Pz=new z(Ba,"reason_uri","gateway.domains.agm.spec.messages/reason_uri",577151711),Qz=new z(ab,"impersonate-peer","gateway.state.spec.tokens/impersonate-peer",1018065912),Rz=new z(null,"default_context","default_context",-1148569539),Sz=new z(null,"state","state",-1988618099),Tz=new w(aa,"unquote","cljs.core/unquote",1013085760,null),Uz=new z(Va,"uri","gateway.state.spec.domain-registry/uri",301088755),Vz=new z(null,"os","os",795021913),Wz=new z(null,"or","or",235744169),Xz=new z(null,"end-test-vars","end-test-vars",-1394419713),Yz=new z(null,"join-activity","join-activity",1683531460),Zz=new z(null,"lifetime","lifetime",-1568939561),$z=new z(Aa,"peer-methods","gateway.domains.agm.core/peer-methods",639951360),aA=new w(null,"dotimes","dotimes",-818708397,null),bA=new z(null,"raw-console?","raw-console?",-2061489061),cA=new z(null,"conform-keys","conform-keys",-1800041814),sm=new w(null,"finally","finally",-1065347064,null),dA=new w(null,"/","/",-1371932971,null),eA=new z(null,"buffering","buffering",-876713613),fA=new z(null,"subscription_id","subscription_id",1241304848),gA=new z(null,"illegal-argument","illegal-argument",-1845493170),hA=new z("mem","all","mem/all",892075139),iA=new z(null,"opt-un","opt-un",883442496),jA=new z(null,"calls","calls",-433802344),kA=new z(null,"rule","rule",729973257),wT=new w(null,"meta13849","meta13849",-270052681,null),lA=new z(null,"nodes","nodes",-2099585805),mA=new z(null,"owner_id","owner_id",1001956033),nA=new z(null,"values","values",372645556),oA=new z(null,"owner","owner",-392611939),pA=new w(null,"locking","locking",1542862874,null),qA=new z(null,"look","look",-539441433),rA=new w(null,"kfn","kfn",729311001,null),sA=new z(null,"opt-whitespace","opt-whitespace",1115207927),tA=new w(null,"cform","cform",1319506748,null),uA=new z(null,"negative-lookahead","negative-lookahead",874382387),vA=new w(null,"kind-form","kind-form",1155997457,null),wA=new z(null,"seq","seq",-1817803783),xA=new z(null,"ident","ident",-742346),yA=new z(null,"set","set",304602554),xT=new w(null,"meta13824","meta13824",34801754,null),zA=new z(null,"epsilon","epsilon",-730158570),AA=new z(Qa,"type","gateway.state.spec.activity/type",-462200009),BA=new z(null,"updated","updated",-1627192056),CA=new w(null,"some?","some?",234752293,null),DA=new z(null,"expecting","expecting",-57706705),EA=new z(null,"rule-separator","rule-separator",1539322213),FA=new z(null,"enlive","enlive",1679023921),GA=new z(Va,"domain-uri","gateway.state.spec.domain-registry/domain-uri",636341057),HA=new z(null,"updates","updates",2013983452),IA=new z(null,"error","error",-978969032),JA=new z(Ta,"peer_id","gateway.state.spec.common/peer_id",1217199451),KA=new w(null,"set?","set?",1636014792,null),LA=new z(null,"base","base",185279322),MA=new z(null,"actual","actual",107306363),NA=new z(Qa,"participants","gateway.state.spec.activity/participants",-1995832242),OA=new z(null,"event","event",301435442),vm=new w(null,"letfn*","letfn*",-110097810,null),PA=new w(null,"opt","opt",845825158,null),QA=new z(null,"scavenger","scavenger",107984617),RA=new z(Ra,"subscriptions","gateway.state.spec.agm/subscriptions",359122069),SA=new z(null,"prefix","prefix",-265908465),TA=new z(null,"methods-removed","methods-removed",-724408194),VA=new z(null,"start-pos","start-pos",668789086),WA=new z(null,"method-filter-fn","method-filter-fn",-283131748),XA=new w(Ta,"address-type","gateway.state.spec.common/address-type",-283204142,null),Il=new z(null,"keyword-fn","keyword-fn",-64566675),YA=new z(null,"first","first",-644103046),ZA=new w(null,"last-was-whitespace?","last-was-whitespace?",-1073928093,null),$A=new w(aa,"partial","cljs.core/partial",1483172485,null),aB=new z(null,"bin-char","bin-char",-1662780697),bB=new z(ta,"local","gateway.common.spec.messages/local",1736687122),cB=new z(null,"ebnf","ebnf",31967825),dB=new z(null,"new_peer_id","new_peer_id",1380469887),eB=new z(null,"?err","?err",549653299),fB=new z(null,"fail","fail",1706214930),gB=new z(ka,"access_token","gateway.auth.spec/access_token",-1170576318),hB=new z(null,"preserve","preserve",1276846509),iB=new z(La,"authentication","gateway.domains.global.spec.requests/authentication",2133771245),jB=new z(null,"repo-id","repo-id",-402847325),kB=new z(Xa,"no-methods","gateway.state.spec.mthds/no-methods",658181793),Dm=new w(null,"recur","recur",1202958259,null),lB=new z(Qa,"activity","gateway.state.spec.activity/activity",449324238),GO=new z(ra,"command","gateway.common.context.spec.requests/command",-1702281587),mB=new z(ab,"lifetime","gateway.state.spec.tokens/lifetime",887565809),nB=new z(Ua,"read_permissions","gateway.state.spec.context/read_permissions",-559958390),oB=new z(null,"illegal-state","illegal-state",-1519851182),pB=new z(da,"op","cljs.spec.alpha/op",-1269055252),qB=new z(Da,"methods","gateway.domains.agm.spec.requests/methods",-366393681),rB=new z($a,"services","gateway.state.spec.state/services",-925305284),sB=new z(Ka,"reason_uri","gateway.domains.global.spec.messages/reason_uri",1393708653),tB=new z(null,"async?","async?",1523057758),uB=new z(Xa,"name","gateway.state.spec.mthds/name",393834509),vB=new z(null,"rulelist","rulelist",-1871218473),wB=new w(null,"count","count",-514511684,null),xB=new z(null,"no-stacktrace?","no-stacktrace?",1701072694),yB=new z(Va,"version","gateway.state.spec.domain-registry/version",-650577592),zB=new z(ra,"restrictions","gateway.common.context.spec.requests/restrictions",-1766361),AB=new z(null,"hex-val","hex-val",1267737401),BB=new z(null,"create-peer","create-peer",631977540),CB=new w(null,ta,ta,-1797487288,null),DB=new z(Qa,"activity-subscribers","gateway.state.spec.activity/activity-subscribers",-1579465715),EB=new z(null,"publisher-identity","publisher-identity",1716891391),FB=new w(null,fa,fa,-831293977,null),GB=new z(Qa,"ready?","gateway.state.spec.activity/ready?",-1768127396),HB=new z(null,"fail-index","fail-index",248726923),IB=new z(null,"nbf","nbf",-1785694926),JB=new z(ra,"context-create","gateway.common.context.spec.requests/context-create",-947794767),KB=new z(null,"intra-block-nl","intra-block-nl",1808826875),LB=new z(null,"target_id","target_id",-124012080),MB=new z(null,"gen-max","gen-max",-793680445),Mc=new z(null,"meta","meta",1499536964),NB=new w(null,"addcv","addcv",-1552991247,null),OB=new z(null,"drop-subscription","drop-subscription",-1853238873),PB=new z(null,"context-updated","context-updated",744419706),QB=new z(null,"right","right",-452581833),RB=new z(Qa,"context","gateway.state.spec.activity/context",798551178),SB=new z(null,"err","err",-2089457205),TB=new w(null,"when","when",1064114221,null),UB=new z(Da,"arguments_kv","gateway.domains.agm.spec.requests/arguments_kv",-220182488),VB=new w(aa,"set?","cljs.core/set?",-1176684971,null),WB=new z(null,"context_snapshot","context_snapshot",-703318056),XB=new z(null,"logical-blocks","logical-blocks",-1466339776),YB=new z(null,"authentication","authentication",1746273042),ZB=new w(da,"or","cljs.spec.alpha/or",-831679639,null),$B=new z(null,"fatal","fatal",1874419888),aC=new z(null,"gateway-requests","gateway-requests",2114123587),bC=new w(aa,"list","cljs.core/list",-1331406371,null),cC=new z(ra,"added","gateway.common.context.spec.requests/added",-1410443097),dC=new z(ta,"reason","gateway.common.spec.messages/reason",1129095963),eC=new z(null,"rate-limit","rate-limit",1748082022),fC=new w("clojure.walk","keywordize-keys","clojure.walk/keywordize-keys",-1055520580,null),gC=new z(null,"created_id","created_id",-1653142250),hC=new z(null,"repetition","repetition",1938392115),jC=new w(null,"min-count","min-count",-1059726756,null),kC=new z(Ka,"context_id","gateway.domains.global.spec.messages/context_id",-1799893258),lC=new z(null,"failure","failure",720415879),mC=new z(ra,"reset","gateway.common.context.spec.requests/reset",6157861),nC=new z(null,"alg","alg",-830920638),oC=new z(Qa,"properties","gateway.state.spec.activity/properties",-914053381),pC=new z(null,"neq","neq",1883246164),qC=new w(null,"any?","any?",-318999933,null),rC=new z(null,"start-col","start-col",668080143),sC=new z(Ba,"local","gateway.domains.agm.spec.messages/local",63355787),tC=new z(null,"neg","neg",1800032960),uC=new z(null,"into","into",-150836029),Em=new w(null,"set!","set!",250714521,null),vC=new w(null,"response-type","response-type",146761069,null),wC=new z(null,"target_identity","target_identity",-786887198),xC=new z(null,"alt","alt",-3214426),yC=new z(null,"all","all",892129742),zC=new z(null,"string-ci","string-ci",374631805),AC=new z(Ja,"authenticated","gateway.domains.global.internal/authenticated",-1621463770),BC=new z(null,"instant","instant",655498374),CC=new z(null,"stack","stack",-793405930),DC=new z(null,"hiccup","hiccup",1218876238),EC=new z(ea,"default","cljs.test/default",-1581405322),FC=new z(null,"ex-kind","ex-kind",1581199296),GC=new w(aa,"int?","cljs.core/int?",50730120,null),HC=new z(null,"histo","histo",-821552278),IC=new z(ra,"context-subscribe","gateway.common.context.spec.requests/context-subscribe",-318176635),JC=new z(null,"amp","amp",271690571),KC=new z(Da,"subscribe","gateway.domains.agm.spec.requests/subscribe",1050374291),LC=new z(null,"and","and",-971899817),MC=new w(null,"preds","preds",150921777,null),NC=new z(da,"cpred","cljs.spec.alpha/cpred",-693471218),OC=new w(null,"predx","predx",2063470948,null),PC=new z(null,"authentication-request","authentication-request",-2091151542),QC=new w(null,"-Inf","-Inf",-2123243689,null),RC=new z(ka,"request","gateway.auth.spec/request",-1915554438),SC=new z(null,"max-connections-per-user","max-connections-per-user",-1995174555),TC=new z(ta,"incoming-message","gateway.common.spec.messages/incoming-message",-528171747),UC=new z(null,"padchar","padchar",2018584530),VC=new z(ab,"gw-request-id","gateway.state.spec.tokens/gw-request-id",146927020),XC=new z(null,"star","star",279424429),YC=new z(null,"children","children",-940561982),ZC=new z(Ua,"version","gateway.state.spec.context/version",-664315203),Oc=new z(null,"print-length","print-length",1931866356),$C=new z(null,"nil","nil",99600501),aD=new z(null,"activity-joined","activity-joined",-1584889318),bD=new z(null,"exp","exp",-261706262),cD=new z($a,"options","gateway.state.spec.state/options",-722288524),dD=new w(aa,"empty?","cljs.core/empty?",1866613644,null),eD=new z(null,"buffer-block","buffer-block",-10937307),fD=new z(null,"remaining","remaining",-138926777),gD=new z(null,"remaining-arg-count","remaining-arg-count",-1216589335),hD=new z(null,"impersonate-peer","impersonate-peer",-1409232482),iD=new z(ta,"new_peer_id","gateway.common.spec.messages/new_peer_id",326805829),jD=new z(null,"methods-added","methods-added",2044022595),kD=new w(da,"and","cljs.spec.alpha/and",-2060279705,null),lD=new z(null,"channel","channel",734187692),mD=new z(Ra,"stream-id","gateway.state.spec.agm/stream-id",-1404324586),nD=new z(null,"bin-val","bin-val",1705209105),oD=new z(Ra,"stream","gateway.state.spec.agm/stream",1961075649),pD=new z(null,"identity","identity",1647396035),HO=new z(ra,"commands","gateway.common.context.spec.requests/commands",1656863185),qD=new z(null,"remove-types","remove-types",-1777229898),rD=new w(null,"retag","retag",528972725,null),sD=new z(null,"info","info",-317069002),tD=new z(null,"members","members",159001018),uD=new z(null,"testing-contexts","testing-contexts",-1485646523),vD=new z(null,"commainterval","commainterval",-1980061083),wD=new z(null,"generation","generation",-2132542044),xD=new z(null,"separator","separator",-1628749125),yD=new w(null,"dval","dval",835211877,null),zD=new z($a,"users","gateway.state.spec.state/users",-2072351172),AD=new z(null,"streams","streams",1465783789),BD=new w(null,"defonce","defonce",-1681484013,null),DD=new z(Qa,"activity-domain","gateway.state.spec.activity/activity-domain",292185460),ED=new z(null,"basic","basic",1043717368),FD=new z(null,"inactive_seconds","inactive_seconds",-1714688448),GD=new z(null,"buffer-level","buffer-level",928864731),HD=new z(Da,"data-message","gateway.domains.agm.spec.requests/data-message",-153411654),ID=new z(null,"dec-char","dec-char",-646625154),JD=new z("rl","all","rl/all",892118056),Al=new z(null,"pending","pending",-220036727),KD=new z(Xa,"input_signature","gateway.state.spec.mthds/input_signature",2082802494),LD=new z(Xa,"method-def","gateway.state.spec.mthds/method-def",858475302),Lc=new z(null,"readably","readably",1129599760),MD=new z(null,"aud","aud",357659490),ND=new z(null,"invoke","invoke",1145927159),OD=new z(null,"file","file",-1269645878),PD=new z(Qa,"default_context","gateway.state.spec.activity/default_context",1517722536),QD=new z(ta,"reason_uri","gateway.common.spec.messages/reason_uri",-14574488),RD=new w("clojure.core","unquote-splicing","clojure.core/unquote-splicing",-552003150,null),SD=new z(null,"fill","fill",883462889),TD=new z(null,"cause","cause",231901252),UD=new z(Ta,"string","gateway.state.spec.common/string",885967163),VD=new z(Qa,"activity-type","gateway.state.spec.activity/activity-type",1221900323),WD=new z(null,"now","now",-1650525531),XD=new z(null,"months","months",-45571637),YD=new z(null,"radix","radix",857016463),ZD=new z(null,"text","text",-1790561697),$D=new w(null,"kind","kind",923265724,null),aE=new z(null,"distinct","distinct",-1788879121),bE=new z(qa,"updater_id","gateway.common.context.spec.messages/updater_id",-850230629),cE=new z(null,"sequence","sequence",926807414),dE=new z(ab,"gateway-token","gateway.state.spec.tokens/gateway-token",1169641187),eE=new z(null,"block","block",664686210),fE=new z(ka,"type","gateway.auth.spec/type",552402611),gE=new z(ra,"write_permissions","gateway.common.context.spec.requests/write_permissions",-194247007),hE=new z(ta,"meta","gateway.common.spec.messages/meta",-2108831238),iE=new z(Ea,"methods","gateway.domains.agm.spec.unregister/methods",1593198071),Tl=new z(null,"ancestors","ancestors",-776045424),jE=new z(null,"listeners","listeners",394544445),kE=new z(null,"clients","clients",1436018090),lE=new w(aa,"array-map","cljs.core/array-map",-1519210683,null),mE=new z(null,"peer-removed","peer-removed",1752359546),nE=new z(null,"metrics-domain","metrics-domain",-1136423917),oE=new z(Ka,"type","gateway.domains.global.spec.messages/type",708595817),pE=new z(null,"min-remaining","min-remaining",962687677),qE=new z(null,"offset","offset",296498311),rE=new z(null,"define","define",-2006590705),sE=new z(null,"content","content",15833224),tE=new z(null,"activity_type","activity_type",-194821832),uE=new z(null,"reason_uri","reason_uri",1062203786),vE=new z(Qa,"activities","gateway.state.spec.activity/activities",1132481734),wE=new w(null,"->","->",-2139605430,null),xE=new z(Xa,"display_name","gateway.state.spec.mthds/display_name",1469788607),yE=new z(null,"timeout","timeout",-318625318),zE=new z(null,"reload","reload",863702807),AE=new z(null,"arglists","arglists",1661989754),BE=new z(Ra,"invocations","gateway.state.spec.agm/invocations",-1391969355),CE=new z(null,"updater_id","updater_id",-2125909548),DE=new z(Ja,"authentication-request","gateway.domains.global.internal/authentication-request",502904463),Bm=new w(null,"js*","js*",-1134233646,null),EE=new z(null,"end-pos","end-pos",-1643883926),FE=new z(null,"min-version","min-version",-1697197126),GE=new z(null,"pred-forms","pred-forms",172611832),HE=new z(null,"hours","hours",58380855),IE=new z(null,"pass","pass",1574159993),JE=new z(La,"updated","gateway.domains.global.spec.requests/updated",-1219870803),KE=new z(null,"context-destroyed","context-destroyed",-1281742589),LE=new z(null,"NUM","NUM",-218662260),ME=new z(null,"LF","LF",1177033158),NE=new z(ta,"domain","gateway.common.spec.messages/domain",755510455),OE=new w(null,"defn","defn",-126010802,null),PE=new w(null,"struct","struct",325972931,null),QE=new z(Ja,"authentication-failed","gateway.domains.global.internal/authentication-failed",1518002013),RE=new z(null,"reporter","reporter",-805360621),SE=new z(null,"peer-added","peer-added",322139575),TE=new z(null,"gfn","gfn",791517474),UE=new w(null,"check?","check?",409539557,null),zT=new w(null,"meta12211","meta12211",-2002153449,null),VE=new z(null,"namespaced-map","namespaced-map",1235665380),WE=new z(Ua,"context","gateway.state.spec.context/context",-1884667246),YE=new z(null,"rulename-right","rulename-right",1125609193),ZE=new z(null,"mins","mins",467369676),X=new z(null,"tag","tag",-1290361223),$E=new z(null,"types","types",590030639),bF=new z(null,"linear","linear",872268697),xm=new w(null,"new","new",-444906321,null),cF=new z(ta,"removed_id","gateway.common.spec.messages/removed_id",-1304577413),dF=new z(null,"number","number",1570378438),eF=new z(Ya,"owner?","gateway.state.spec.pending-requests/owner?",346289860),fF=new z(null,"continue","continue",-207346553),gF=new z(Ra,"stream-peer-info","gateway.state.spec.agm/stream-peer-info",1892226854),hF=new z(Wa,"factories","gateway.state.spec.factory/factories",-1725265010),iF=new z(null,"?line","?line",-631853385),jF=new z(null,"test","test",577538877),kF=new z(null,"owner-changed","owner-changed",-1569176886),lF=new w(null,"=","=",-1501502141,null),mF=new z(null,"topic-repattern","topic-repattern",1187945138),AT=new w(null,"meta11315","meta11315",-2065702453,null),oF=new z(null,"cat","cat",-1457810207),jl=new z(null,"alt-impl","alt-impl",670969595),pF=new z(null,"types-removed","types-removed",-1458332519),qF=new w(null,"pending-forms","pending-forms",-1225172071,null),rF=new z(qa,"reason_uri","gateway.common.context.spec.messages/reason_uri",-1687789209),sF=new z(Ra,"agm-domain","gateway.state.spec.agm/agm-domain",686860067),tF=new z(null,"tags","tags",1771418977),uF=new z(null,"given","given",716253602),JO=new z(null,"path","path",-188191168),vF=new w(null,"with-local-vars","with-local-vars",837642072,null),CD=new w(null,"meta7593","meta7593",1831708302,null),wF=new w(null,"form","form",16469056,null),xF=new w(null,"req-un","req-un",-1579864761,null),zF=new z(Va,"description","gateway.state.spec.domain-registry/description",-350920838),AF=new z(Da,"caller_id","gateway.domains.agm.spec.requests/caller_id",-211861801),BF=new w(null,"req-specs","req-specs",-2100473456,null),CF=new z(La,"context-create","gateway.domains.global.spec.requests/context-create",-1370416261),tT=new z(ra,"path","gateway.common.context.spec.requests/path",614939647),DF=new z(La,"removed","gateway.domains.global.spec.requests/removed",-1641157465),EF=new z(null,"activity-subscribers","activity-subscribers",12051372),FF=new w(null,"req-keys","req-keys",-2140116548,null),Jm=new w(null,"throw","throw",595905694,null),GF=new z(Ta,"request_id","gateway.state.spec.common/request_id",2099278405),HF=new w("s","map-of","s/map-of",-1464752791,null),IF=new z(Da,"data","gateway.domains.agm.spec.requests/data",688691322),JF=new z(null,"opt-specs","opt-specs",-384905450),KF=new w("s","or","s/or",1876282981,null),LF=new z(xa,"leave","gateway.domain/leave",-1366936831),MF=new z(null,"rules","rules",1198912366),eK=new w(null,"meta14812","meta14812",-855915521,null),OF=new w(null,"keys","keys",-1586012071,null),PF=new z(null,"character","character",380652989),QF=new z(da,"kfn","cljs.spec.alpha/kfn",672643897),RF=new z(Ba,"removed_id","gateway.domains.agm.spec.messages/removed_id",-1904544764),tm=new w(null,"loop*","loop*",615029416,null),SF=new w(null,"conform-all","conform-all",-980179459,null),TF=new z(null,"publisher","publisher",-153364540),UF=new z(La,"delta","gateway.domains.global.spec.requests/delta",299143136),VF=new z(null,"last","last",1105735132),WF=new z(null,"initial-context","initial-context",-32910095),XF=new w(aa,"vector?","cljs.core/vector?",-1550392028,null),YF=new w(aa,"lift-ns","cljs.core/lift-ns",463499081,null),ZF=new z(null,"factories","factories",1443149712),$F=new z(null,"k","k",-2146297393),aG=new z(null,"helper_types","helper_types",1747427755),bG=new z(null,"e","e",1381269198),cG=new z(null,"f","f",-1597136552),dG=new z(null,"d","d",1972142424),eG=new z(null,"w","w",354169001),BT=new w(null,"meta11761","meta11761",830711190,null),fG=new z(null,"p","p",151049309),gG=new z(Ra,"request_id","gateway.state.spec.agm/request_id",-1401687879),hG=new z(null,"n","n",562130025),iG=new z(null,"func","func",-238706040),jG=new w(aa,"contains?","cljs.core/contains?",-976526835,null),kG=new z(ta,"message-type","gateway.common.spec.messages/message-type",929650450),lG=new z(null,"SP","SP",124290284),mG=new z(null,"indent-t","indent-t",528318969),nG=new z(null,"char","char",-641587586),oG=new z(null,"optimize","optimize",-1912349448),pG=new z(Da,"sequence","gateway.domains.agm.spec.requests/sequence",1051925549),rG=new z($a,"activity-types","gateway.state.spec.state/activity-types",1532142687),kl=new z(null,"fallback-impl","fallback-impl",-1501286995),CT=new w(null,"meta13926","meta13926",-962679467,null),tG=new w(null,"writer","writer",1362963291,null),uG=new w(aa,"apply","cljs.core/apply",1757277831,null),vG=new z(Ca,"register","gateway.domains.agm.spec.register/register",-572048018),wG=new z(null,"publish","publish",-1178026850),xG=new w(null,"cfns","cfns",1335482066,null),yG=new w(null,"gen-max","gen-max",846851082,null),zG=new z(null,"ready-members","ready-members",757058983),AG=new z(null,"debug","debug",-1608172596),BG=new z(null,"dispose-peer","dispose-peer",68303444),CG=new z(null,"req-specs","req-specs",553962313),DG=new w(null,"distinct","distinct",-148347594,null),EG=new w(null,"capped","capped",-1650988402,null),FG=new z(null,"allows-separator","allows-separator",-818967742),GG=new z(Ba,"source_type","gateway.domains.agm.spec.messages/source_type",276727970),HG=new z(null,"appenders","appenders",1245583998),IG=new w("clojure.core","list","clojure.core/list",-1119203325,null),JG=new z(Da,"subscription_id","gateway.domains.agm.spec.requests/subscription_id",1666574151),KG=new z(null,"group","group",582596132),LG=new z(null,"colon-up-arrow","colon-up-arrow",244853007),MG=new z("rl","peek","rl/peek",-291391771),NG=new z(null,"negative-listeners","negative-listeners",55241092),PG=new z(null,"gateway_token","gateway_token",1638490713),QG=new z(null,"enabled","enabled",1195909756),RG=new z(Xa,"id","gateway.state.spec.mthds/id",2078923376),VG=new z(null,"BIT","BIT",-1854474115),WG=new z(null,"request-id","request-id",-985684093),XG=new z(null,"WSP","WSP",-1046948716),YG=new w(da,"conformer","cljs.spec.alpha/conformer",2140085535,null),ZG=new z(Sa,"bus-domain","gateway.state.spec.bus/bus-domain",1755593660),DT=new w(null,"meta16172","meta16172",-171069597,null),$G=new z(Ra,"method_id","gateway.state.spec.agm/method_id",1007252604),al=new z(null,"more-marker","more-marker",-14717935),aH=new w(null,"mmvar","mmvar",-1714325675,null),bH=new z($a,"current-id","gateway.state.spec.state/current-id",798109991),cH=new w(null,"val","val",1769233139,null),dH=new z(null,"creation-request","creation-request",1261647120),eH=new z(Ya,"gw-request-id","gateway.state.spec.pending-requests/gw-request-id",-996681140),fH=new z(null,"nl-t","nl-t",-1608382114),Gm=new w(null,"var","var",870848730,null),gH=new z(null,"qualifier","qualifier",125841738),zl=new z(null,"ready","ready",1086465795),hH=new z(null,"unsubscribe","unsubscribe",632650147),iH=new z(null,"leeway","leeway",-355669977),dU=new w(null,"p1__13235#","p1__13235#",-1120814410,null),jH=new w(aa,"boolean?","cljs.core/boolean?",1400713761,null),kH=new z(da,"gfn","cljs.spec.alpha/gfn",-593120375),lH=new z(null,"non-matched","non-matched",-624651186),mH=new z(null,"add-interest","add-interest",-1148631141),nH=new z(Za,"restrictions","gateway.state.spec.restrictions/restrictions",181113171),oH=new w(null,"cond","cond",1606708055,null),pH=new w(aa,"=","cljs.core/=",-1891498332,null),qH=new z(qa,"creator_id","gateway.common.context.spec.messages/creator_id",2137586424),rH=new z(null,"element","element",1974019749),sH=new z(null,"char-format","char-format",-1016499218),tH=new z(null,"match","match",1220059550),uH=new z(null,"owner_type","owner_type",846064882),vH=new z(null,"max-columns","max-columns",1742323262),wH=new z(ka,"response","gateway.auth.spec/response",1690727657),xH=new z(xa,"join","gateway.domain/join",1465372684),yH=new w(null,"when-let","when-let",-1383043480,null),zH=new z(null,"routing_key","routing_key",1236069137),AH=new z(null,"gw-request-id","gw-request-id",2114687330),BH=new z(null,"hello","hello",-245025397),CH=new z(null,"publishers","publishers",1474752298),DH=new z(null,"index","index",-1531685915),EH=new z(Wa,"peer_type","gateway.state.spec.factory/peer_type",-885367633),FH=new z(null,"peer-factories-added","peer-factories-added",-2010470480),GH=new z(null,"subscriber_id","subscriber_id",972810975),Fm=new w(null,".",".",1975675962,null),IH=new z(null,"at","at",1476951349),JH=new z(null,"started?","started?",-1301062863),KH=new z(null,"peer_type","peer_type",371163309),MH=new z(null,"routing-key","routing-key",238118868),NH=new z(da,"describe","cljs.spec.alpha/describe",1883026911),OH=new z(null,"CRLF","CRLF",11418756),PH=new z(null,"configuration","configuration",1431842520),QH=new z(null,"vargs","vargs",-966597273),RH=new z(null,"full","full",436801220),SH=new z(null,"output-format","output-format",-1826382676),TH=new z(null,"queue","queue",1455835879),UH=new z(null,"stacktrace-fonts","stacktrace-fonts",830799382),VH=new z(null,"warn","warn",-436710552),WH=new w(null,"pred-forms","pred-forms",1813143359,null),XH=new z(Xa,"peer-methods","gateway.state.spec.mthds/peer-methods",-639609469),YH=new z(Da,"arguments","gateway.domains.agm.spec.requests/arguments",-1906298417),ZH=new z(null,"selector","selector",762528866),$H=new z(null,"sqn","sqn",2076851999),aI=new z(null,"retained","retained",630238157),bI=new z(null,"created","created",-704993748),cI=new z(null,"miser","miser",-556060186),dI=new z("mem","fresh","mem/fresh",-1179989133),eI=new z(null,"options","options",99638489),fI=new z(null,"context","context",-830191113),gI=new z(null,"paren","paren",-294107600),hI=new z(null,"gw-request","gw-request",1009584674),iI=new z(null,"colnum","colnum",2023796854),jI=new z(null,"standard","standard",-1769206695),uT=new z(ra,"value","gateway.common.context.spec.requests/value",1114622378),lI=new w(aa,"some?","cljs.core/some?",-440439360,null),mI=new z(null,"provider","provider",-302056900),nI=new z(null,"DQUOTE","DQUOTE",-571169808),oI=new w(aa,"hash-set","cljs.core/hash-set",1130426749,null),pI=new z(null,"timestamp_","timestamp_",-954533417),qI=new z(null,"fn","fn",-1175266204),rI=new z(null,"args","args",1315556576),sI=new z(Qa,"child","gateway.state.spec.activity/child",-942548506),tI=new z(Ua,"write_permissions","gateway.state.spec.context/write_permissions",1195182789),uI=new z(null,"environment","environment",-666037640),HK=new w(null,"meta15331","meta15331",-458586899,null),vI=new w(da,"map-of","cljs.spec.alpha/map-of",153715093,null),wI=new z(null,"peer-factories-removed","peer-factories-removed",-1429529592),xI=new z(null,"eq","eq",-618539067),yI=new z(null,"str","str",1089608819),zI=new z(null,"console","console",1228072057),AI=new z(null,"hash","hash",-13781596),BI=new w(aa,"any?","cljs.core/any?",-2068111842,null),CI=new z(null,"rules-or-parser","rules-or-parser",-314380386),DI=new z(ra,"removed","gateway.common.context.spec.requests/removed",-732316803),EI=new z(Ra,"subscription-id","gateway.state.spec.agm/subscription-id",-1920105558),FI=new z(null,"arg3","arg3",-1486822496),GI=new z(null,"min-level","min-level",1634684919),HI=new z(null,"arg1","arg1",951899358),II=new z(null,"arg2","arg2",1729550917),JI=new z(null,"list","list",765357683),KI=new z(ka,"authentication","gateway.auth.spec/authentication",-2005184469),LI=new z(Ua,"data","gateway.state.spec.context/data",790358174),MI=new z(null,"method_id","method_id",1349548671),NI=new z(null,"key","key",-1516042587),OI=new z($a,"handler-ch","gateway.state.spec.state/handler-ch",-891933338),PI=new z(null,"generator-fn","generator-fn",811851656),QI=new z(null,"req-keys","req-keys",514319221),RI=new z(null,"destroy","destroy",-843660405),SI=new z(null,"overflowchar","overflowchar",-1620088106),TI=new z(null,"splicing?","splicing?",-428596366),UI=new z(null,"oob","oob",707302005),Rl=new z(null,"parents","parents",-2027538891),VI=new z(null,"js","js",1768080579),WI=new z(null,"peer","peer",1319662792),eU=new w(null,"meta12266","meta12266",-345451167,null),XI=new z(Sa,"subscription","gateway.state.spec.bus/subscription",1556343370),YI=new z(ta,"body","gateway.common.spec.messages/body",-1028765771),ZI=new w(null,"if-let","if-let",1803593690,null),$I=new w(null,"req","req",1314083224,null),aJ=new z(Ra,"streams","gateway.state.spec.agm/streams",-460960790),bJ=new w(null,"condp","condp",1054325175,null),cJ=new z(null,"ping","ping",-1670114784),dJ=new z(null,"limits","limits",-2101003399),eJ=new z(null,"member","member",-2012020816),fJ=new z(Wa,"flags","gateway.state.spec.factory/flags",-1898127651),gJ=new z(null,"subscription","subscription",1949009182),hJ=new w(null,"blockable","blockable",-28395259,null),iJ=new z(null,"NOT","NOT",-1689245341),jJ=new z(null,"opt","opt",-794706369),kJ=new z(null,"reason","reason",-2070751759),lJ=new z(null,"service","service",-1963054559),mJ=new z(null,"sym","sym",-1444860305),nJ=new w(Fa,"drop-interest-rq","gateway.domains.agm.subscriptions/drop-interest-rq",1736302176,null),oJ=new z(La,"context-unsubscribe","gateway.domains.global.spec.requests/context-unsubscribe",-602451908),pJ=new z(null,"update-context","update-context",1410241659),qJ=new z(null,"id","id",-1388402092),rJ=new z(ra,"context_id","gateway.common.context.spec.requests/context_id",1348419676),sJ=new z(null,"stream","stream",1534941648),tJ=new z(null,"end-test-var","end-test-var",984198545),uJ=new z(null,"results","results",-1134170113),vJ=new z(null,"input-format","input-format",-422703481),wJ=new z(Da,"drop-subscription","gateway.domains.agm.spec.requests/drop-subscription",938907886),xJ=new z(null,"indent","indent",-148200125),yJ=new z(null,"hi","hi",-1821422114),zJ=new z(null,"HEXDIG","HEXDIG",-200221072),AJ=new z(null,"ord","ord",1142548323),BJ=new z(null,"OCTET","OCTET",-743420682),CJ=new w(da,"nilable","cljs.spec.alpha/nilable",1628308748,null),DJ=new z(ta,"receiver","gateway.common.spec.messages/receiver",679023931),EJ=new z(null,"removed_id","removed_id",1940625745),FJ=new z(null,"keyword","keyword",811389747),GJ=new z(Ta,"keyword","gateway.state.spec.common/keyword",-1409778786),HJ=new z(null,"else-params","else-params",-832171646),fU=new w(null,"meta13105","meta13105",1244327015,null),IJ=new z(Za,"parsed-restrictions","gateway.state.spec.restrictions/parsed-restrictions",1374812996),JJ=new z(null,"end-block-t","end-block-t",1544648735),KJ=new z(null,"max-count","max-count",1539185305),LJ={},gU,NJ={};function OJ(e,n){var t=PK;if(null!=e&&null!=e.Je)e=e.Je(e,n,t);else{var r=OJ[db(null==e?null:e)];if(null!=r)e=r.c?r.c(e,n,t):r.call(null,e,n,t);else{if(null==(r=OJ._))throw Zc("WritePort.put!",e);e=r.c?r.c(e,n,t):r.call(null,e,n,t)}}return e}function PJ(e){if(null!=e&&null!=e.Ed)e=e.Ed(e);else{var n=PJ[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=PJ._))throw Zc("Channel.close!",e);e=n.a?n.a(e):n.call(null,e)}}return e}function QJ(e){if(null!=e&&null!=e.sf)e=!0;else{var n=QJ[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=QJ._))throw Zc("Handler.active?",e);e=n.a?n.a(e):n.call(null,e)}}return e}function RJ(e){if(null!=e&&null!=e.tf)e=e.La;else{var n=RJ[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=RJ._))throw Zc("Handler.commit",e);e=n.a?n.a(e):n.call(null,e)}}return e}function SJ(e,n){if(null!=e&&null!=e.ae)e=e.ae(e,n);else{var t=SJ[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=SJ._))throw Zc("Buffer.add!*",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}var TJ=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function UJ(e,n,t,r,o){for(var i=0;i<o;)t[r+i]=e[n+i],i+=1}function VJ(e){this.length=this.ta=this.head=0,this.l=e}function MK(e,n){e.length+1===e.l.length&&e.resize(),e.unshift(n)}function NK(e,n){for(var t=e.length,r=0;r<t;){var o=e.pop();(n.a?n.a(o):n.call(null,o))&&e.unshift(o),r+=1}}function WJ(e){return new VJ(Array(e))}function XJ(e,n){this.ca=e,this.n=n,this.h=2,this.I=0}function YJ(e,n){this.ca=e,this.n=n,this.h=2,this.I=0}function ZJ(){return oc("iPhone")&&!oc("iPod")&&!oc("iPad")}TJ.a=function(e){return e},TJ.b=function(e,n){return SJ(e,n)},TJ.F=2,VJ.prototype.pop=function(){if(0===this.length)return null;var e=this.l[this.ta];return this.l[this.ta]=null,this.ta=(this.ta+1)%this.l.length,--this.length,e},VJ.prototype.unshift=function(e){return this.l[this.head]=e,this.head=(this.head+1)%this.l.length,this.length+=1,null},VJ.prototype.resize=function(){var e=Array(2*this.l.length);return this.ta<this.head?(UJ(this.l,this.ta,e,0,this.length),this.ta=0,this.head=this.length,this.l=e):this.ta>this.head?(UJ(this.l,this.ta,e,0,this.l.length-this.ta),UJ(this.l,0,e,this.l.length-this.ta,this.head),this.ta=0,this.head=this.length,this.l=e):this.ta===this.head?(this.head=this.ta=0,this.l=e):null},XJ.prototype.Dd=function(){return this.ca.length>=this.n},XJ.prototype.ae=function(e,n){return MK(this.ca,n),this},XJ.prototype.X=function(){return this.ca.length},YJ.prototype.Dd=function(){return!1},YJ.prototype.ae=function(e,n){return this.ca.length!==this.n&&this.ca.unshift(n),this},YJ.prototype.X=function(){return this.ca.length};var $J=oc("Opera"),aK=oc("Trident")||oc("MSIE"),bK=oc("Edge"),cK=oc("Gecko")&&!(gc("WebKit")&&!oc("Edge"))&&!(oc("Trident")||oc("MSIE"))&&!oc("Edge"),dK=gc("WebKit")&&!oc("Edge");dK&&oc("Mobile"),oc("Macintosh"),oc("Windows"),oc("Linux")||oc("CrOS");var IO=cb.navigator||null,gK;function fK(){var e=cb.document;return e?e.documentMode:void 0}IO&&(IO.appVersion||"").indexOf("X11"),oc("Android"),ZJ(),oc("iPad"),oc("iPod"),ZJ()||oc("iPad")||oc("iPod"),gc("KaiOS"),gc("GAFP");e:{var OQ="",pS=function(){var e=hc;return cK?/rv:([^\);]+)(\)|;)/.exec(e):bK?/Edge\/([\d\.]+)/.exec(e):aK?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):dK?/WebKit\/(\S+)/.exec(e):$J?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(pS&&(OQ=pS?pS[1]:""),aK){var qS=fK();if(null!=qS&&qS>parseFloat(OQ)){gK=String(qS);break e}}gK=OQ}var wb={},rS,nK;function kK(e){return vb(e,(function(){for(var n=0,t=fc(String(gK)).split("."),r=fc(String(e)).split("."),o=Math.max(t.length,r.length),i=0;0==n&&i<o;i++){var l=t[i]||"",a=r[i]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==l[0].length&&0==a[0].length)break;n=ic(n=0==l[1].length?0:parseInt(l[1],10),0==a[1].length?0:parseInt(a[1],10))||ic(0==l[2].length,0==a[2].length)||ic(l[2],a[2]),l=l[3],a=a[3]}while(0==n)}return 0<=n}))}function mK(e){var n=document;return e=String(e),"application/xhtml+xml"===n.contentType&&(e=e.toLowerCase()),n.createElement(e)}function oK(){var e=cb.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!oc("Presto")&&(e=function(){var e=mK(fo);e.style.display="none",vc(e),document.documentElement.appendChild(e);var n=e.contentWindow;(e=n.document).open(),e.write(tc()),e.close();var t="callImmediate"+Math.random(),r="file:"==n.location.protocol?"*":n.location.protocol+"//"+n.location.host;e=nb((function(e){"*"!=r&&e.origin!=r||e.data!=t||this.port1.onmessage()}),this),n.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){n.postMessage(t,r)}}}),"undefined"!==typeof e&&!oc("Trident")&&!oc("MSIE")){var n=new e,t={},r=t;return n.port1.onmessage=function(){if(void 0!==t.next){var e=(t=t.next).Wd;t.Wd=null,e()}},function(e){r.next={Wd:e},r=r.next,n.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in mK(yr)?function(e){var n=mK(yr);n.onreadystatechange=function(){n.onreadystatechange=null,n.parentNode.removeChild(n),n=null,e(),e=null},document.documentElement.appendChild(n)}:function(e){cb.setTimeout(e,0)}}rS=cb.document&&aK?fK():void 0,!cK&&!aK||aK&&9<=Number(rS)||cK&&kK("1.9.1"),aK&&kK("9");var pK=WJ(32),qK=!1,rK=!1;function sK(){qK=!0,rK=!1;for(var e=0;;){var n=pK.pop();if(!(null!=n&&(n.o?n.o():n.call(null),1024>e)))break;e+=1}return qK=!1,0<pK.length?tK.o?tK.o():tK.call(null):null}function tK(){if(rK&&qK)return null;rK=!0,!fb(cb.setImmediate)||cb.Window&&cb.Window.prototype&&!oc("Edge")&&cb.Window.prototype.setImmediate==cb.setImmediate?(nK||(nK=oK()),nK(sK)):cb.setImmediate(sK)}function uK(e){MK(pK,e),tK()}var vK={},hU;function xK(e){return"undefined"!==typeof Ac&&"undefined"!==typeof Bc&&"undefined"!==typeof LJ&&"undefined"!==typeof NJ&&"undefined"!==typeof vK&&"undefined"!==typeof hU||((hU=function(e,n){this.m=e,this.Ng=n,this.h=425984,this.I=0}).prototype.O=function(e,n){return new hU(this.m,n)},hU.prototype.N=function(){return this.Ng},hU.prototype.zb=function(){return this.m},hU.Pa=function(){return new Q(null,2,5,R,[cH,AT],null)},hU.Ia=!0,hU.Da="cljs.core.async.impl.channels/t_cljs$core$async$impl$channels11314",hU.Ja=function(e){return ce(e,"cljs.core.async.impl.channels/t_cljs$core$async$impl$channels11314")}),new hU(e,S)}function yK(e,n){this.Id=e,this.m=n}function zK(e){return QJ(e.Id)}function AK(e,n,t,r){this.ud=e,this.ee=0,this.Kc=n,this.de=0,this.ca=t,this.closed=!1,this.Lb=r}function BK(e){for(;;){var n=e.Kc.pop();if(null!=n){var t=n.Id;uK(function(e){return function(){return e.a?e.a(!0):e.call(null,!0)}}(t.La,n.m))}break}NK(e.Kc,Hh(!1)),e.Ed(null)}function CK(e,n){if(null!=e.ca&&0<F(e.ca)){if(p(n=n.La)){var t=e.ca.ca.pop(),r=Tc(e.ca.Dd())&&0<e.Kc.length?function(){for(var n=I;;){var t=e.Kc.pop(),r=t.m;if(n=p(t=t.Id.La)?Cf.b(n,t):n,!(Tc(r=p(t)?cf(e.Lb.b?e.Lb.b(e.ca,r):e.Lb.call(null,e.ca,r)):null)&&Tc(e.ca.Dd())&&0<e.Kc.length))return new Q(null,2,5,R,[r,n],null)}}():null,o=J(r,0,null),i=J(r,1,null);p(o)&&BK(e);for(var l=B(i),a=null,u=0,s=0;;)if(s<u){var c=a.W(null,s);uK(function(e,n,t,r,o){return function(){return o.a?o.a(!0):o.call(null,!0)}}(0,0,0,0,c)),s+=1}else{var d=B(l);if(!d)break;Wf(c=d)?(l=re(c),s=se(c),a=l,u=F(l),l=s):(uK(function(e,n,t,r,o){return function(){return o.a?o.a(!0):o.call(null,!0)}}(0,0,0,0,C(c))),l=D(c),a=null,u=0),s=0}return xK(t)}return null}if(t=function(){for(;;){var n=e.Kc.pop();if(!p(n))return null;if(QJ(n.Id))return n}}(),p(t)){var f=RJ(t.Id);return uK((function(){return f.a?f.a(!0):f.call(null,!0)})),xK(t.m)}return p(e.closed)?(p(e.ca)&&(e.Lb.a?e.Lb.a(e.ca):e.Lb.call(null,e.ca)),p(!p(!0)||n.La)?(n=function(){var n=e.ca;return p(n)?0<F(e.ca):n}(),xK(t=p(n)?e.ca.ca.pop():null)):null):(64<e.ee?(e.ee=0,NK(e.ud,QJ)):e.ee+=1,p(n.Ie())&&MK(e.ud,n),null)}function DK(e){return console.log(e),null}function EK(e,n){var t=p(null)?null:DK;return null==(n=t.a?t.a(n):t.call(null,n))?e:TJ.b(e,n)}function FK(e){return new AK(WJ(32),WJ(32),e,function(){var e=p(null)?null.a?null.a(TJ):null.call(null,TJ):TJ;return function(){function n(n,t){try{return e.b?e.b(n,t):e.call(null,n,t)}catch(r){return EK(n,r)}}function t(n){try{return e.a?e.a(n):e.call(null,n)}catch(t){return EK(n,t)}}var r;return(r=function(e,r){switch(arguments.length){case 1:return t.call(this,e);case 2:return n.call(this,e,r)}throw Error("Invalid arity: "+arguments.length)}).a=t,r.b=n,r}()}())}AK.prototype.Je=function(e,n,t){var r=this,o=r.closed;if(o)return xK(!o);if(p(function(){var e=r.ca;return p(e)?Tc(r.ca.Dd()):e}())){var i=cf(r.Lb.b?r.Lb.b(r.ca,n):r.Lb.call(null,r.ca,n));if(t=function(){for(var e=I;;){if(!(0<r.ud.length&&0<F(r.ca)))return e;var n=r.ud.pop().La,t=r.ca.ca.pop();e=Cf.b(e,function(e,n,t){return function(){return n.a?n.a(t):n.call(null,t)}}(0,n,t))}}(),i&&BK(this),B(t)){t=B(t),e=null;for(var l=0,a=0;;)if(a<l){uK(e.W(null,a)),a+=1}else{if(!(t=B(t)))break;Wf(e=t)?(t=re(e),a=se(e),e=t,l=F(t),t=a):(uK(t=C(e)),t=D(e),e=null,l=0),a=0}}return xK(!0)}if(e=function(){for(;;){var e=r.ud.pop();if(!p(e))return null;if(p(!0))return e}}(),p(e)){var u=e.La;return uK((function(){return u.a?u.a(n):u.call(null,n)})),xK(!0)}return 64<r.de?(r.de=0,NK(r.Kc,zK)):r.de+=1,p(t.Ie())&&MK(r.Kc,new yK(t,n)),null},AK.prototype.Ed=function(){var e=this;if(!e.closed)for(e.closed=!0,p(function(){var n=e.ca;return p(n)?0===e.Kc.length:n}())&&(e.Lb.a?e.Lb.a(e.ca):e.Lb.call(null,e.ca));;){var n=e.ud.pop();if(null==n)break;uK(function(e,n){return function(){return e.a?e.a(n):e.call(null,n)}}(n.La,p(function(){var n=e.ca;return p(n)?0<F(e.ca):n}())?e.ca.ca.pop():null))}return null};var GK={},iU;function IK(e){return"undefined"!==typeof Ac&&"undefined"!==typeof Bc&&"undefined"!==typeof LJ&&"undefined"!==typeof NJ&&"undefined"!==typeof GK&&"undefined"!==typeof iU||((iU=function(e,n){this.La=e,this.sg=n,this.h=393216,this.I=0}).prototype.O=function(e,n){return new iU(this.La,n)},iU.prototype.N=function(){return this.sg},iU.prototype.sf=function(){return!0},iU.prototype.Ie=function(){return!0},iU.prototype.tf=function(){return this.La},iU.Pa=function(){return new Q(null,2,5,R,[Ap,NF],null)},iU.Ia=!0,iU.Da="cljs.core.async.impl.ioc-helpers/t_cljs$core$async$impl$ioc_helpers10587",iU.Ja=function(e){return ce(e,"cljs.core.async.impl.ioc-helpers/t_cljs$core$async$impl$ioc_helpers10587")}),new iU(e,S)}function JK(e){try{var n=e[0];return n.a?n.a(e):n.call(null,e)}catch(t){if(t instanceof Object)throw n=t,e[6].Ed(null),n;throw t}}function KK(e,n){return p(n=CK(n,IK((function(n){return e[2]=n,e[1]=4,JK(e)}))))?(e[2]=t(n),e[1]=4,yz):null}function LK(e,n){return e=e[6],null!=n&&e.Je(null,n,IK((function(){return null}))),e.Ed(null),e}function OK(e){return FK("number"===typeof(e=A.b(e,0)?null:e)?new XJ(WJ(e),e):e)}var PK=("undefined"!==typeof Ac&&"undefined"!==typeof Bc&&"undefined"!==typeof LJ&&"undefined"!==typeof gU||((gU=function(e,n,t){this.La=e,this.kf=n,this.eh=t,this.h=393216,this.I=0}).prototype.O=function(e,n){return new gU(this.La,this.kf,n)},gU.prototype.N=function(){return this.eh},gU.prototype.sf=function(){return!0},gU.prototype.Ie=function(){return this.kf},gU.prototype.tf=function(){return this.La},gU.Pa=function(){return new Q(null,3,5,R,[Ap,hJ,DT],null)},gU.Ia=!0,gU.Da="cljs.core.async/t_cljs$core$async16171",gU.Ja=function(e){return ce(e,"cljs.core.async/t_cljs$core$async16171")}),new gU((function(){return null}),!0,S));function QK(e,n){return!p(e=OJ(e,n))||t(e)}function RK(e,n){var r=I,o=OK(1);return uK((function(){var i=function(){function o(o){var i=o[1];if(7===i)return o[2]=o[2],o[1]=3,yz;if(1===i)return i=r,o[7]=i,o[2]=null,o[1]=2,yz;if(4===i)return i=o[2],o[8]=i,o[1]=p(null==i)?5:6,yz;if(6===i){var l=o[8];return i=o[7],l=cf(i=e.b?e.b(i,l):e.call(null,i,l)),o[9]=i,o[1]=l?8:9,yz}return 3===i?LK(o,o[2]):2===i?KK(o,n):9===i?(i=o[9],o[7]=i,o[2]=null,o[1]=2,yz):5===i?(i=o[7],o[2]=i,o[1]=7,yz):10===i?(o[2]=o[2],o[1]=7,yz):8===i?(i=t(i=o[9]),o[2]=i,o[1]=10,yz):null}return function(){function e(e){for(;;){e:try{for(;;){var n=o(e);if(!P(n,yz)){var t=n;break e}}}catch(r){if(t=r,e[2]=t,!B(e[4]))throw t;e[1]=C(e[4]),t=yz}if(!P(t,yz))return t}}function n(){var e=[null,null,null,null,null,null,null,null,null,null];return e[0]=t,e[1]=1,e}var t=null;return(t=function(t){switch(arguments.length){case 0:return n.call(this);case 1:return e.call(this,t)}throw Error("Invalid arity: "+arguments.length)}).o=n,t.a=e,t}()}();return JK(function(){var e=i();return e[6]=o,e}())})),o}var SK={};function TK(){return(new Date).getTime()}var UK=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],2<t.length?new Qe(t.slice(2),0,null):null)};function VK(e,n,t){return ih(oi,e,n,Mh(Cf,Dk),t)}function WK(e,n,t){return oi.A(e,n,ji,t)}UK.g=function(e,n,t){if(t=J(t,0,null),M(e)&&(n=B(n))){var r=B(n);return n=C(r),B(r=D(r))?0===F(r=UK.g(x.b(e,n),r,G([t])))&&Tc(FO.a(t))?Hf.b(e,n):K.c(e,n,r):Hf.b(e,n)}return e},UK.F=2,UK.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)};var XK=function e(n,t,r){if(p(t)){var o=B(t);if(t=C(o),Tc(B(o=D(o))))r=Of.b(x.b(n,t),r);else{var i=x.b(n,t);r=e.c?e.c(i,o,r):e.call(null,i,o,r)}return 0===F(r)?Hf.b(n,t):K.c(n,t,r)}return n};function YK(e){return p(e)?(PJ(e),RK((function(){return null}),e)):null}function ZK(e,n){return gd.c((function(n,t){return A.b(t,e)?n:Cf.b(n,t)}),I,n)}function $K(e,n){return gd.b((function(n,t){return p(e.a?e.a(t):e.call(null,t))?bf(t):null}),n)}function aL(e,n){return Tc(x.b(e,n))?K.c(e,n,S):e}function bL(e){return kg((function(e,n,t){return K.c(e,Kg.a(n),t)}),S,e)}function cL(){return fh(q,gi.b(new Bk(null,new n(null,1,["-",null],null),null),q.a(gm())))}function dL(e){return $y.a(e)}function eL(e){var n=Qq.b(e,1),t=["r-",q.a($y.a(e)),"-",q.a(n)].join("");return new Q(null,2,5,R,[K.c(e,Qq,n+1),t],null)}function fL(e){var n=Qq.b(e,1),t=["c-",q.a($y.a(e)),"-",q.a(n)].join("");return new Q(null,2,5,R,[K.c(e,Qq,n+1),t],null)}function gL(e){var n=Qq.b(e,1),t=["p-",q.a($y.a(e)),"-",q.a(n)].join("");return new Q(null,2,5,R,[K.c(e,Qq,n+1),t],null)}function hL(e,n,t,r,o){this.uri=e,this.message=n,this.Mb=t,this.j=r,this.B=o,this.h=2230716170,this.I=139264}function iL(e,n){return new hL(e,n,null,null,null)}function jL(e,n){var t=km(e);return new hL(n=$v.b(t,n),p(t=sr.a(t))?t:lm(e),null,null,null)}function kL(e,n){throw im(n,iL(e,n))}function lL(e){return iL(uE.a(e),kJ.a(e))}function mL(e,n){return iL(e,n)}function nL(e){var t=cL();return new n(null,2,[Mx,new n(null,2,[$y,e,Qq,1],null),pn,t],null)}function oL(e,t,r,o){return oi.A(ni(e,new Q(null,3,5,R,[Dn,t,r],null),p(o)?new n(null,1,[os,o],null):S),new Q(null,2,5,R,[zr,r],null),Mh(Cf,Dk),t)}function pL(e,n,t){return XK(oi.A(e,new Q(null,2,5,R,[Dn,n],null),Hf,t),new Q(null,2,5,R,[zr,t],null),n)}function qL(e,n,t){return mi.b(e,new Q(null,3,5,R,[zr,t,n],null))}function rL(e,n,t){return p(n)?ni(e,new Q(null,2,5,R,[aC,n],null),t):e}function sL(e,n){return Uk(UK,mi)(e,new Q(null,2,5,R,[aC,n],null))}function tL(e,n){return mi.b(e,new Q(null,3,5,R,[pz,n,tq],null))}function uL(e,t){return new n(null,2,[Fy,e,Xv,t],null)}function vL(e,t){return K.c(uL(new n(null,1,[U,Zv],null),t),lz,e)}function wL(e,n,t){return K.c(uL(n,t),lz,e)}g=hL.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"uri":return this.uri;case"message":return this.message;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#gateway.reason.Reason{",", ","}",t,Xg.b(new Q(null,2,5,R,[new Q(null,2,5,R,[$v,this.uri],null),new Q(null,2,5,R,[sr,this.message],null)],null),this.j))},g.ua=function(){return new gj(this,2,new Q(null,2,5,R,[$v,sr],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 2+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=57548305^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.uri,n.uri)&&A.b(this.message,n.message)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,2,[$v,null,sr,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new hL(this.uri,this.message,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b($v,n):P.call(null,$v,n))?new hL(t,this.message,this.Mb,this.j,null):p(P.b?P.b(sr,n):P.call(null,sr,n))?new hL(this.uri,t,this.Mb,this.j,null):new hL(this.uri,this.message,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,2,5,R,[new Gi($v,this.uri),new Gi(sr,this.message)],null),this.j))},g.O=function(e,n){return new hL(this.uri,this.message,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)};var xL=function e(n){switch(arguments.length){case 6:return e.la(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 5:return e.K(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};xL.la=function(e,t,r,o,i,l){return e=new n(null,6,[tq,e,U,IA,is,r,ow,o,uE,$v.a(i),kJ,sr.a(i)],null),uL(t,l=p(l)?K.c(e,fI,l):e)},xL.K=function(e,n,t,r,o){return xL.la(e,n,t,r,o,null)},xL.F=6;var yL=function e(n){switch(arguments.length){case 4:return e.A(arguments[0],arguments[1],arguments[2],arguments[3]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function zL(e){return A.b(U.a(e),Fs)}yL.A=function(e,n,t,r){return uL(n,yL.c(e,t,r))},yL.c=function(e,t,r){return new n(null,4,[tq,e,U,qz,is,t,ow,r],null)},yL.F=4;var AL=function e(n){switch(arguments.length){case 6:return e.la(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 5:return e.K(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};AL.la=function(e,n,t,r,o,i){return uL(n,AL.K(e,t,r,o,i))},AL.K=function(e,t,r,o,i){return new n(null,6,[tq,e,U,SE,ow,t,dB,r,pD,o,Mc,i],null)},AL.F=6;var BL=function e(n){switch(arguments.length){case 5:return e.K(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 4:return e.A(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function CL(e,n){if(null!=e&&null!=e.Qc)e=e.Qc(e,n);else{var t=CL[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=CL._))throw Zc("ConjFlat.conj-flat",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function DL(e,n){for(e=mi.b(e,n);;){if(!p(EL.a?EL.a(e):EL.call(null,e)))return n;e=x.b(e,0),n=Cf.b(n,0)}}function FL(e,n){return new Mg(null,(function(){var t=mi.b(e,n);e:for(var r=e,o=n;;){if(A.b(F(o),1)){r=Mf(o)<(GL.a?GL.a(r):GL.call(null,r))-1?DL(r,new Q(null,1,5,R,[Mf(o)+1],null)):null;break e}var i=Mf(o),l=mi.b(r,Nf(o));if(i<(l=GL.a?GL.a(l):GL.call(null,l))-1){r=DL(r,Cf.b(Nf(o),Mf(o)+1));break e}o=Nf(o)}return vf(t,p(r)?FL(e,r):null)}),null,null)}function HL(e,n,t,r,o){this.ka=e,this.pe=n,this.Ic=t,this.C=r,this.md=o,this.Vd=null,this.h=31850958,this.I=0}function JL(e,n){var t=F(n);e:if(0===t)t=1;else{t|=0;for(var r=1,o=31;;){var i=Fh(t);if(t=tg(t,2),i)o=Ce(o,o);else{if(0===t){t=Ce(o,r);break e}r=Ce(o,r),o=Ce(o,o)}}}return Ce(t|=0,e.pe)+(n.pe-t)}function KL(e){e:for(var n=1,t=B(e=Ni(e));null!=t;)n=Ce(31,n)+Je(C(t))|0,t=D(t);return new HL(e,n,Je(e),F(e),!1)}BL.K=function(e,n,t,r,o){return uL(n,BL.A(e,t,r,o))},BL.A=function(e,t,r,o){return new n(null,6,[tq,e,U,mE,ow,t,EJ,r,uE,$v.a(o),kJ,sr.a(o)],null)},BL.F=5,g=HL.prototype,g.toString=function(){return Be(B(this))},g.ia=function(e,n){return this.ka.ia(null,n)},g.M=function(e,n,t){return this.ka.M(null,n,t)},g.N=function(){return Lf(this.ka)},g.za=function(){return D(B(this))},g.X=function(){return this.C},g.Z=function(){return this.Ic},g.Y=function(e,n){return A.b(this.Ic,Je(n))&&A.b(this.C,F(n))&&(A.b(this.C,0)||A.b(B(this),n))},g.pa=function(){return Kf(IL,Lf(this))},g.Fa=function(){return C(B(this))},g.Ha=function(){return Re(B(this))},g.$=function(){if(!p(this.Vd)){if(this.md){var e=this.ka;e=0<F(e)?FL(e,DL(e,new Q(null,1,5,R,[0],null))):null}else e=B(this.ka);this.Vd=e}return this.Vd},g.O=function(e,n){return new HL(Kf(this.ka,n),this.pe,this.Ic,this.C,this.md)},g.ga=function(e,n){return vf(n,this)},g.Qc=function(e,n){if(null==n)return this;if(p(EL.a?EL.a(n):EL.call(null,n))){if(0===this.C)return n;if(32>=F(n)){e=JL.b?JL.b(this,n):JL.call(null,this,n);var t=this.C+F(n),r=ji.b(this.ka,n),o=this.md;return new HL(r,e,Ve(e,t),t,o||n.md)}return e=JL.b?JL.b(this,n):JL.call(null,this,n),t=this.C+F(n),new HL(Cf.b(this.ka,n),e,Ve(e,t),t,!0)}return e=Ce(31,this.pe)+Je(n),t=this.C+1,new HL(Cf.b(this.ka,n),e,Ve(e,t),t,this.md)},g.ma=h,g.S=function(e,n,t){return fe(B(this),n,t)};var IL=KL(I);function EL(e){return e instanceof HL}function GL(e){return EL(e)?F(e.ka):F(e)}var LL=function e(n,t){for(;;){if(!B(t))return n;var r=C(t);EL(r)?(n=e.b?e.b(n,r):e.call(null,n,r),t=D(t)):(n=Yg.b(n,r),t=D(t))}};function ML(e,n,t,r){this.ka=e,this.Ic=n,this.C=t,this.flat=r,this.h=167142175,this.I=2048}function NL(e){return Tc(t(e.flat))&&(Rh.b(e.flat,(function(){var n=t(e.ka);return Kf(n=le(LL(je(I),n)),Lf(t(e.ka)))})),Rh.b(e.ka,(function(){return null}))),t(e.flat)}function OL(e){return p(e.md)?p(e.Vd)?Ni(B(e)):new ML(Oh(e.ka),e.Ic,e.C,Oh(null)):e.ka}function PL(e,n,t){var r=p(n.ignoreCase)?"gi":"g";return r=p(n.multiline)?[r,"m"].join(""):r,e.replace(new RegExp(n.source,p(n.Jh)?[r,"u"].join(""):r),t)}function QL(e){return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=Zh(2,n),A.b(F(n),1)?(n=C(n),e.a?e.a(n):e.call(null,n)):(n=Ni(n),e.a?e.a(n):e.call(null,n))}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}function RL(e,n,t){if("string"===typeof n)return e.replace(new RegExp(String(n).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),t);if(n instanceof RegExp)return PL(e,n,"string"===typeof t?t:QL(t));throw["Invalid match arg: ",q.a(n)].join("")}function SL(e,n){var t=new zc;for(n=B(n);;){if(null==n)return t.toString();t.append(q.a(C(n))),null!=(n=D(n))&&t.append(e)}}function TL(e,n){return 0>=n||n>=2+F(e)?Cf.b(Ni(vf("",Wh.b(q,B(e)))),""):p(xg?Ud(1,n):wg.call(null,1,n))?new Q(null,1,5,R,[e],null):p(xg?Ud(2,n):wg.call(null,2,n))?new Q(null,2,5,R,["",e],null):(n-=2,Cf.b(Ni(vf("",Wi(Ni(Wh.b(q,B(e))),0,n))),e.substring(n)))}function UL(e,n,t){if("/(?:)/"===q.a(n))n=TL(e,t);else if(1>t)n=Ni(q.a(e).split(n));else e:for(var r=t,o=I;;){if(1===r){n=Cf.b(o,e);break e}var i=Xk(n,e);if(null==i){n=Cf.b(o,e);break e}var l=e.indexOf(i);i=e.substring(l+F(i)),--r,o=Cf.b(o,e.substring(0,l)),e=i}if(0===t&&1<F(n))e:for(t=n;""===Mf(t);)t=Nf(t);else t=n;return t}function VL(e,n,t){return Tc(n)?(n=t.a?t.a(X):t.call(null,X),e=e.a?e.a(n):e.call(null,n)):e=!1,p(e)?["(",q.a(WL?WL(t,!1):XL.call(null,t,!1)),")"].join(""):WL?WL(t,!1):XL.call(null,t,!1)}g=ML.prototype,g.toString=function(){return Be(NL(this))},g.ia=function(e,n){return NL(this).ia(null,n)},g.M=function(e,n,t){return NL(this).M(null,n,t)},g.Aa=function(e,n,t){return NL(this).Aa(null,n,t)},g.W=function(e,n){return NL(this).W(null,n)},g.wa=function(e,n,t){return NL(this).wa(null,n,t)},g.Ib=function(e,n,t){return NL(this).Ib(null,n,t)},g.N=function(){return p(t(this.flat))?Lf(t(this.flat)):Lf(t(this.ka))},g.X=function(){return this.C},g.Xb=function(){return NL(this).Xb(null)},g.Yb=function(){return NL(this).Yb(null)},g.Bc=function(){return 0<this.C?be(NL(this)):null},g.Z=function(){return this.Ic},g.Y=function(e,n){return A.b(this.Ic,Je(n))&&A.b(this.C,F(n))&&A.b(NL(this),n)},g.pa=function(){return Kf(I,Lf(this))},g.fa=function(e,n,t){return K.c(NL(this),n,t)},g.$=function(){return B(NL(this))},g.O=function(e,n){return p(t(this.flat))?new ML(Oh(t(this.ka)),this.Ic,this.C,Oh(Kf(t(this.flat),n))):new ML(Oh(Kf(t(this.ka),n)),this.Ic,this.C,Oh(t(this.flat)))},g.ga=function(e,n){return Cf.b(NL(this),n)},g.call=function(){function e(e,n,t){return NL(this).c(null,n,t)}function n(e,n){return NL(this).b(null,n)}var t;return(t=function(t,r,o){switch(arguments.length){case 2:return n.call(this,t,r);case 3:return e.call(this,t,r,o)}throw Error("Invalid arity: "+(arguments.length-1))}).b=n,t.c=e,t}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return NL(this).b(null,e)},g.b=function(e,n){return NL(this).c(null,e,n)},g.Wb=function(e,n){return pe(NL(this),n)},g.ma=h,g.S=function(e,n,t){return fe(NL(this),n,t)};var YL=Jh(VL,new Bk(null,new n(null,3,[oF,null,AJ,null,xC,null],null),null));function ZL(e){switch(e){case"\n":return"\\n";case"\b":return"\\b";case"\f":return"\\f";case"\r":return"\\r";case"\t":return"\\t";default:return e}}function $L(e){return RL(['#"',e.source.substring(1),'"'].join(""),/[\s]/,ZL)}function aM(e){return 4095>=e?["0000",q.a(e.toString(16))].join("").substr(-4):e.toString(16)}function bM(e){var n=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e;return e=x.b(n,Zy),n=x.b(n,yJ),A.b(e,n)?["%x",q.a(aM(e))].join(""):["%x",q.a(aM(e)),"-",q.a(aM(n))].join("")}function XL(e){switch(arguments.length){case 1:return WL(arguments[0],!1);case 2:return WL(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}}function WL(e,t){e=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e;var r=x.b(e,wv),o=x.b(e,Xn),i=x.b(e,Vn),l=x.b(e,An),a=x.b(e,X);if(p(!!Tc(t)&&ls.a(e)))return["<",q.a(WL(e,!0)),">"].join("");switch(a=a instanceof z?a.da:null){case"epsilon":return"\u03b5";case"opt":return[q.a(YL(t,r)),"?"].join("");case"plus":return[q.a(YL(t,r)),"+"].join("");case"star":return[q.a(YL(t,r)),"*"].join("");case"rep":return kh.b(qx.a(e),bw.a(e))?[q.a(YL(t,r)),"{",q.a(qx.a(e)),",",q.a(bw.a(e)),"}"].join(""):[q.a(YL(t,r)),"{",q.a(qx.a(e)),"}"].join("");case"alt":return SL(" | ",Wh.b(Kh(VL,new Bk(null,new n(null,1,[AJ,null],null),null),t),l));case"ord":return[q.a(VL(new Bk(null,new n(null,1,[xC,null],null),null),t,o))," / ",q.a(VL(new Bk(null,new n(null,1,[xC,null],null),null),t,i))].join("");case"cat":return SL(" ",Wh.b(Kh(VL,new Bk(null,new n(null,2,[AJ,null,xC,null],null),null),t),l));case"string":var u=new zc;t=Fc,r=Ec,Fc=!0,Ec=function(e){return u.append(e)};try{nl(G([xn.a(e)]),Jc())}finally{Ec=r,Fc=t}return q.a(u);case"string-ci":u=new zc,t=Fc,r=Ec,Fc=!0,Ec=function(e){return u.append(e)};try{nl(G([xn.a(e)]),Jc())}finally{Ec=r,Fc=t}return q.a(u);case"char":return bM(e);case"regexp":return $L(Et.a(e));case"nt":return Ag(q.a(FJ.a(e)),1);case"look":return["&",q.a(YL(t,r))].join("");case"neg":return["!",q.a(YL(t,r))].join("");default:throw Error(["No matching clause: ",q.a(a)].join(""))}}function cM(e,n){return A.b(ny.a(Hu.a(n)),Pt)?["<",Lg(e),"> = ",q.a(WL(n,!1))].join(""):[Lg(e)," = ",q.a(WL(n,!1))].join("")}function dM(e){e=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e;var n=x.b(e,wo),t=x.b(e,iz);return SL("\n",vf(cM(t,n.a?n.a(t):n.call(null,t)),function e(n){return new Mg(null,(function(){for(var r=n;;){if(!(r=B(r)))return null;if(Wf(r)){var o=re(r),i=F(o),l=Qg(i);e:for(var a=0;;){if(!(a<i)){o=!0;break e}var u=qd(o,a),s=J(u,0,null);u=J(u,1,null),kh.b(s,t)&&(s=cM(s,u),l.add(s)),a+=1}return Sg(Ug(l),o?e(se(r)):null)}if(l=J(o=C(r),0,null),o=J(o,1,null),kh.b(l,t))return vf(cM(l,o),e(Re(r)));r=Re(r)}}),null,null)}(n)))}function eM(e,t){for(t=B(RL(t,"\r\n","\n"));;){if(Pf(t))return"";if(A.b(e,1))return fh(q,Mk(Gh(new Bk(null,new n(null,1,["\n",null],null),null)),t));A.b("\n",C(t))?(t=D(t),--e):t=D(t)}}function fM(e){p(iJ.a(e))?(pl.g(G(["NOT "])),pl.g(G([iJ.a(e)]))):p(Au.a(e))?pl.g(G([bM(e)])):e instanceof RegExp?pl.g(G([$L(e)])):nl(G([e]),Jc())}function gM(e){e=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e;var n=x.b(e,en),t=x.b(e,ux),r=x.b(e,ZD);e=x.b(e,kJ),sl(G([["Parse error at line ",q.a(n),", column ",q.a(t),":"].join("")])),sl(G([r])),sl(G([n=bg(t)?1>=t?"^":fh(q,Xg.b(ai(t-1," "),new Q(null,1,5,R,["^"],null))):null])),n=Gk(Wh.b(DA,fi.b(RH,e))),e=Gk(Wh.b(DA,fi.b(Gh(RH),e))),0!==(t=F(n)+F(e))&&(A.b(1,t)?sl(G(["Expected:"])):sl(G(["Expected one of:"]))),n=B(n),t=null;for(var o=r=0;;)if(o<r){fM(t.W(null,o)),sl(G([" (followed by end-of-string)"])),o+=1}else{if(!(n=B(n)))break;Wf(t=n)?(n=re(t),o=se(t),t=n,r=F(n),n=o):(fM(n=C(t)),sl(G([" (followed by end-of-string)"])),n=D(t),t=null,r=0),o=0}for(e=B(e),n=null,o=r=0;;)if(o<r)fM(t=n.W(null,o)),rl(),o+=1;else{if(!(e=B(e)))break;Wf(n=e)?(e=re(n),r=se(n),n=e,t=F(e),e=r,r=t):(fM(t=C(n)),rl(),e=D(n),n=null,r=0),o=0}}function hM(e){throw fh(q,e)}function iM(e){throw fh(q,e)}function jM(e){var n=p(e.ignoreCase)?"i":"";return n=p(e.multiline)?[n,"m"].join(""):n,p(e.Jh)?[n,"u"].join(""):n}function kM(e){return B(e)&&Tc(D(e))}function lM(e){return K.c(e,Hu,mM)}var mM=new n(null,1,[ny,Pt],null),nM=new n(null,2,[DC,function(e){return new n(null,2,[ny,DC,NI,e],null)},FA,function(e){return new n(null,2,[ny,FA,NI,e],null)}],null),oM=new n(null,2,[FA,function(e,t){return new n(null,2,[X,e,sE,new Df(null,t,null,1,null)],null)},DC,function(e,n){return new Q(null,2,5,R,[e,n],null)}],null);function pM(e,t){var r=ny.a(e);switch(r instanceof z?r.da:null){case"raw":return IL.Qc(null,t);case"hiccup":return OL(KL(new Q(null,1,5,R,[NI.a(e)],null)).Qc(null,t));case"enlive":return t=IL.Qc(null,t),new n(null,2,[X,NI.a(e),sE,0===F(t)?null:t],null);default:return e.a?e.a(t):e.call(null,t)}}function qM(e,n){var t=nM.a?nM.a(e):nM.call(null,e);return p(t)?ji.b(S,function e(n){return new Mg(null,(function(){for(;;){var r=B(n);if(r){if(Wf(r)){var o=re(r),i=F(o),l=Qg(i);e:for(var a=0;;){if(!(a<i)){o=!0;break e}var u=qd(o,a),s=J(u,0,null);u=J(u,1,null),s=p(Hu.a(u))?new Q(null,2,5,R,[s,u],null):new Q(null,2,5,R,[s,K.c(u,Hu,t.a?t.a(s):t.call(null,s))],null),l.add(s),a+=1}return Sg(Ug(l),o?e(se(r)):null)}return l=J(o=C(r),0,null),o=J(o,1,null),vf(p(Hu.a(o))?new Q(null,2,5,R,[l,o],null):new Q(null,2,5,R,[l,K.c(o,Hu,t.a?t.a(l):t.call(null,l))],null),e(Re(r)))}return null}}),null,null)}(n)):iM(G(["Invalid output format ",e,". Use :enlive or :hiccup."]))}var rM=new n(null,1,[X,zA],null);function sM(e){return A.b(e,rM)?rM:new n(null,2,[X,jJ,wv,e],null)}function tM(e){return A.b(e,rM)?rM:new n(null,2,[X,eq,wv,e],null)}function uM(e){return A.b(e,rM)?rM:new n(null,2,[X,XC,wv,e],null)}function vM(e,t,r){return A.b(r,rM)?rM:new n(null,4,[X,Ku,wv,r,qx,e,bw,t],null)}var wM=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};wM.g=function(e){return Dh(Jh(A,rM),e)?rM:kM(e)?C(e):new n(null,2,[X,xC,An,e],null)},wM.F=0,wM.G=function(e){return this.g(B(e))};var xM=function e(n){switch(arguments.length){case 0:return e.o();default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],new Qe(t.slice(1),0,null))}};xM.o=function(){return rM},xM.g=function(e,t){return B(t=A.b(e,rM)?gi.b(Ek([rM]),t):t)&&(t=fh(xM,t),e=new n(null,3,[X,AJ,Xn,e,Vn,t],null)),e},xM.G=function(e){var n=C(e);return e=D(e),this.g(n,e)},xM.F=1;var yM=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};function zM(e){return A.b(e,"")?rM:new n(null,2,[X,xn,xn,e],null)}function AM(e){return A.b(e,"")?rM:new n(null,2,[X,zC,xn,e],null)}function BM(e,t){return new n(null,3,[X,nG,Zy,e,yJ,t],null)}function CM(e){return A.b(e,"")?e=rM:(e=(e=Zk(e))instanceof RegExp?new RegExp(["^",q.a(e.source)].join(""),jM(e)):e,e=new n(null,2,[X,Et,Et,e],null)),e}function DM(e){return new n(null,2,[X,Ay,FJ,e],null)}function EM(e){return new n(null,2,[X,qA,wv,e],null)}function FM(e){return new n(null,2,[X,tC,wv,e],null)}function GM(e){return K.c(e,ls,!0)}yM.g=function(e){return Dh(Jh(A,rM),e)?rM:kM(e=gi.b(Ek([rM]),e))?C(e):new n(null,2,[X,oF,An,e],null)},yM.F=0,yM.G=function(e){return this.g(B(e))};var HM=function e(n){var t=p(ls.a(n))?Hf.b(n,ls):n;return p(wv.a(t))?K.c(t,wv,function(){var n=wv.a(t);return e.a?e.a(n):e.call(null,n)}()):p(An.a(t))?K.c(t,An,Wh.b(e,An.a(t))):A.b(X.a(t),AJ)?K.g(t,Xn,function(){var n=Xn.a(t);return e.a?e.a(n):e.call(null,n)}(),G([Vn,function(){var n=Vn.a(t);return e.a?e.a(n):e.call(null,n)}()])):t};function IM(e){return ji.b(S,function e(n){return new Mg(null,(function(){for(;;){var t=B(n);if(t){if(Wf(t)){var r=re(t),o=F(r),i=Qg(o);e:for(var l=0;;){if(!(l<o)){r=!0;break e}var a=qd(r,l),u=J(a,0,null);a=J(a,1,null),u=new Q(null,2,5,R,[u,HM(a)],null),i.add(u),l+=1}return Sg(Ug(i),r?e(se(t)):null)}return i=J(r=C(t),0,null),r=J(r,1,null),vf(new Q(null,2,5,R,[i,HM(r)],null),e(Re(t)))}return null}}),null,null)}(e))}function JM(e,n){var t=nM.a?nM.a(e):nM.call(null,e);return p(t)?ji.b(S,function e(n){return new Mg(null,(function(){for(;;){var r=B(n);if(r){if(Wf(r)){var o=re(r),i=F(o),l=Qg(i);e:for(var a=0;;){if(!(a<i)){o=!0;break e}var u=qd(o,a),s=J(u,0,null);u=J(u,1,null),s=new Q(null,2,5,R,[s,K.c(u,Hu,t.a?t.a(s):t.call(null,s))],null),l.add(s),a+=1}return Sg(Ug(l),o?e(se(r)):null)}return l=J(o=C(r),0,null),o=J(o,1,null),vf(new Q(null,2,5,R,[l,K.c(o,Hu,t.a?t.a(l):t.call(null,l))],null),e(Re(r)))}return null}}),null,null)}(n)):iM(G(["Invalid output format ",e,". Use :enlive or :hiccup."]))}function KM(e,n){var t=nM.a?nM.a(e):nM.call(null,e);return p(t)?ji.b(S,function e(n){return new Mg(null,(function(){for(;;){var r=B(n);if(r){if(Wf(r)){var o=re(r),i=F(o),l=Qg(i);e:for(var a=0;;){if(!(a<i)){o=!0;break e}var u=qd(o,a),s=J(u,0,null);u=J(u,1,null),s=new Q(null,2,5,R,[s,K.c(HM(u),Hu,t.a?t.a(s):t.call(null,s))],null),l.add(s),a+=1}return Sg(Ug(l),o?e(se(r)):null)}return l=J(o=C(r),0,null),o=J(o,1,null),vf(new Q(null,2,5,R,[l,K.c(HM(o),Hu,t.a?t.a(l):t.call(null,l))],null),e(Re(r)))}return null}}),null,null)}(n)):iM(G(["Invalid output format ",e,". Use :enlive or :hiccup."]))}var LM=function e(n,t){var r=X.a(n);switch(r=r instanceof z?r.da:null){case"nt":case"epsilon":return n;case"opt":case"plus":case"star":case"rep":case"look":case"neg":return oi.A(n,new Q(null,1,5,R,[wv],null),e,t);case"alt":case"cat":return K.c(n,An,Wh.b((function(n){return e.b?e.b(n,t):e.call(null,n,t)}),An.a(n)));case"ord":return K.g(n,Xn,function(){var r=Xn.a(n);return e.b?e.b(r,t):e.call(null,r,t)}(),G([Vn,function(){var r=Vn.a(n);return e.b?e.b(r,t):e.call(null,r,t)}()]));case"string":case"string-ci":case"regexp":return p(Hu.a(n))?K.c(yM.g(G([t,Hf.b(n,Hu)])),Hu,Hu.a(n)):yM.g(G([t,n]));default:throw Error(["No matching clause: ",q.a(r)].join(""))}};function MM(e,n,t,r){var o=GM(sM(DM(r)));return t=K.c(t,r,lM(t.a?t.a(r):t.call(null,r))),r=ji.b(S,function e(n){return new Mg(null,(function(){for(;;){var t=B(n);if(t){if(Wf(t)){var r=re(t),i=F(r),l=Qg(i);e:for(var a=0;;){if(!(a<i)){r=!0;break e}var u=qd(r,a),s=J(u,0,null);u=J(u,1,null),s=new Q(null,2,5,R,[s,LM(u,o)],null),l.add(s),a+=1}return Sg(Ug(l),r?e(se(t)):null)}return l=J(r=C(t),0,null),r=J(r,1,null),vf(new Q(null,2,5,R,[l,LM(r,o)],null),e(Re(t)))}return null}}),null,null)}(e)),n=K.c(r,n,K.c(yM.g(G([Hf.b(r.a?r.a(n):r.call(null,n),Hu),o])),Hu,Hu.a(r.a?r.a(n):r.call(null,n)))),wk.g(G([n,t]))}function NM(e){if(null==e||!(0<=e&&1114111>=e))return null;if(65536<=e&&1114111>=e){var n=56320+(1023&e);return String.fromCharCode(55232+(e>>10))+String.fromCharCode(n)}return String.fromCharCode(e)}function OM(e,n){var t=e.charCodeAt(n);if(55296<=t&&56319>=t&&n+1<e.length){if(56320<=(e=e.charCodeAt(n+1))&&57343>=e)return 55296<=t&&56319>=t&&56320<=e&&57343>=e?(t<<10)-56623104+(e-56320+65536):null}else if(56320<=t&&57343>=t&&0<n&&(55296<=(e=e.charCodeAt(n-1))&&56319>=e))return-(55296<=e&&56319>=e&&56320<=t&&57343>=t?(e<<10)-56623104+(t-56320+65536):0);return t}function PM(e,n,t){var r=X.a(e);switch(r=r instanceof z?r.da:null){case"nt":return QM.c?QM.c(e,n,t):QM.call(null,e,n,t);case"alt":return RM.c?RM.c(e,n,t):RM.call(null,e,n,t);case"cat":return SM.c?SM.c(e,n,t):SM.call(null,e,n,t);case"string":return TM.c?TM.c(e,n,t):TM.call(null,e,n,t);case"string-ci":return UM.c?UM.c(e,n,t):UM.call(null,e,n,t);case"char":return VM.c?VM.c(e,n,t):VM.call(null,e,n,t);case"epsilon":return WM.c?WM.c(e,n,t):WM.call(null,e,n,t);case"opt":return XM.c?XM.c(e,n,t):XM.call(null,e,n,t);case"plus":return YM.c?YM.c(e,n,t):YM.call(null,e,n,t);case"rep":return ZM.c?ZM.c(e,n,t):ZM.call(null,e,n,t);case"star":return $M.c?$M.c(e,n,t):$M.call(null,e,n,t);case"regexp":return aN.c?aN.c(e,n,t):aN.call(null,e,n,t);case"look":return bN.c?bN.c(e,n,t):bN.call(null,e,n,t);case"neg":return cN.c?cN.c(e,n,t):cN.call(null,e,n,t);case"ord":return dN.c?dN.c(e,n,t):dN.call(null,e,n,t);default:throw Error(["No matching clause: ",q.a(r)].join(""))}}function eN(e,n,t){var r=X.a(e);switch(r=r instanceof z?r.da:null){case"nt":return fN.c?fN.c(e,n,t):fN.call(null,e,n,t);case"alt":return gN.c?gN.c(e,n,t):gN.call(null,e,n,t);case"cat":return hN.c?hN.c(e,n,t):hN.call(null,e,n,t);case"string":return iN.c?iN.c(e,n,t):iN.call(null,e,n,t);case"string-ci":return jN.c?jN.c(e,n,t):jN.call(null,e,n,t);case"char":return kN.c?kN.c(e,n,t):kN.call(null,e,n,t);case"epsilon":return lN.c?lN.c(e,n,t):lN.call(null,e,n,t);case"opt":return mN.c?mN.c(e,n,t):mN.call(null,e,n,t);case"plus":return nN.c?nN.c(e,n,t):nN.call(null,e,n,t);case"rep":return oN.c?oN.c(e,n,t):oN.call(null,e,n,t);case"star":return pN.c?pN.c(e,n,t):pN.call(null,e,n,t);case"regexp":return qN.c?qN.c(e,n,t):qN.call(null,e,n,t);case"look":return rN.c?rN.c(e,n,t):rN.call(null,e,n,t);case"neg":return cN.c?cN.c(e,n,t):cN.call(null,e,n,t);case"ord":return sN.c?sN.c(e,n,t):sN.call(null,e,n,t);default:throw Error(["No matching clause: ",q.a(r)].join(""))}}function tN(e,n,t,r,o){this.index=e,this.reason=n,this.Mb=t,this.j=r,this.B=o,this.h=2230716170,this.I=139264}g=tN.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"index":return this.index;case"reason":return this.reason;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#instaparse.gll.Failure{",", ","}",t,Xg.b(new Q(null,2,5,R,[new Q(null,2,5,R,[DH,this.index],null),new Q(null,2,5,R,[kJ,this.reason],null)],null),this.j))},g.ua=function(){return new gj(this,2,new Q(null,2,5,R,[DH,kJ],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 2+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=-1140991288^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.index,n.index)&&A.b(this.reason,n.reason)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,2,[DH,null,kJ,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new tN(this.index,this.reason,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(DH,n):P.call(null,DH,n))?new tN(t,this.reason,this.Mb,this.j,null):p(P.b?P.b(kJ,n):P.call(null,kJ,n))?new tN(this.index,t,this.Mb,this.j,null):new tN(this.index,this.reason,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,2,5,R,[new Gi(DH,this.index),new Gi(kJ,this.reason)],null),this.j))},g.O=function(e,n){return new tN(this.index,this.reason,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)},g.ma=h,g.S=function(e,n){var t=this;return ce(n,function(){var e=new zc,n=Fc,r=Ec;Fc=!0,Ec=function(n){return e.append(n)};try{gM(t)}finally{Ec=r,Fc=n}return q.a(e)}())};var uN=Yc(new tN(null,null,null,null,null));function vN(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g){this.qa=e,this.text=n,this.Ua=t,this.Ma=r,this.Ta=o,this.stack=i,this.Sa=l,this.Oa=a,this.Ra=u,this.Qa=s,this.sa=c,this.Va=d,this.Na=f,this.Wa=p,this.Mb=h,this.j=_,this.B=g,this.h=2230716170,this.I=139264}function wN(e,n,t,r,o){return new vN(e,n,t,r,o,Oh(I),Oh(I),Oh(0),Oh(tk(qg)),Oh(S),Oh(S),Oh(null),Oh(new tN(0,I,null,null,null)),!1,null,null,null)}function xN(e,t){return new n(null,2,[Ru,e,DH,t],null)}function yN(e,n){return A.b(F(ZD.a(e)),DH.a(n))}function zN(e,n,t,r,o,i,l){this.kc=e,this.cc=n,this.results=t,this.dc=r,this.Mb=o,this.j=i,this.B=l,this.h=2230716170,this.I=139264}function AN(e,n){return Rh.c(CC.a(e),Cf,n)}function BN(e,n,r){function o(){return n.a?n.a(r):n.call(null,r)}var i=As.a(e),l=DH.a(r);l=new Q(null,2,5,R,[n,l],null);var a=x.c(t(i),l,0);a>t(wD.a(e))?Rh.c(pw.a(e),Cf,o):Rh.c(CC.a(e),Cf,o),Rh.A(i,K,l,a+1)}function CN(e,n){return p(n=(e=t(e=lA.a(e))).a?e.a(n):e.call(null,n))?0<F(t(jE.a(n))):null}function DN(e,n){return p(n=(e=t(e=lA.a(e))).a?e.a(n):e.call(null,n))?0<F(t(xy.a(n)))||0<F(t(jE.a(n))):null}function EN(e,n){return p(n=(e=t(e=lA.a(e))).a?e.a(n):e.call(null,n))?0<F(t(gs.a(n)))||0<F(t(uJ.a(n))):null}function FN(e,n){var r=t(e=lA.a(e));return p(r=r.a?r.a(n):r.call(null,n))||(r=new zN(Oh(I),Oh(I),Oh(Dk),Oh(Dk),null,null,null),Rh.A(e,K,n,r)),r}function GN(e,n){return(null!=e?262144&e.h||h===e.He||!e.h&&Xc(Od,e):Xc(Od,e))?Kf(e,n):e}function HN(e,r,o){var i=FN(e,r),l=r.a?r.a(1):r.call(null,1),a=p(ls.a(l))?K.c(o,Ru,null):o,u=function(){var e=Hu.a(l);return p(e)?xN(GN(pM(e,Ru.a(a)),new n(null,2,[Yv,r.a?r.a(0):r.call(null,0),hp,DH.a(a)],null)),DH.a(a)):a}(),s=(o=yN(e,u))?gs.a(i):uJ.a(i);if(!Tc(function(){var e=t(s);return e.a?e.a(u):e.call(null,u)}()))return null;Rh.c(s,Cf,u);for(var c=B(t(jE.a(i))),d=null,f=0,h=0;;)if(h<f){BN(e,d.W(null,h),u),h+=1}else{if(!(c=B(c)))break;Wf(d=c)?(c=re(d),h=se(d),d=c,f=F(c),c=h):(BN(e,c=C(d),u),c=D(d),d=null,f=0),h=0}if(!o)return null;for(i=B(t(xy.a(i))),o=null,f=d=0;;)if(f<d)BN(e,c=o.W(null,f),u),f+=1;else{if(!(i=B(i)))return null;Wf(o=i)?(i=re(o),d=se(o),o=i,c=F(i),i=d,d=c):(BN(e,c=C(o),u),i=D(o),o=null,d=0),f=0}}function IN(e,n,r){var o=CN(e,n),i=FN(e,n),l=jE.a(i);Rh.c(l,Cf,r),l=B(t(uJ.a(i)));for(var a=null,u=0,s=0;;)if(s<u){var c=a.W(null,s);BN(e,r,c),s+=1}else{if(!(l=B(l)))break;Wf(a=l)?(l=re(a),s=se(a),a=l,u=F(l),l=s):(l=C(a),BN(e,r,l),l=D(a),a=null,u=0),s=0}for(i=B(t(gs.a(i))),l=null,u=a=0;;)if(u<a)s=l.W(null,u),BN(e,r,s),u+=1;else{if(!(i=B(i)))break;Wf(l=i)?(i=re(l),u=se(l),l=i,a=F(i),i=u):(i=C(l),BN(e,r,i),i=D(l),l=null,a=0),u=0}return Tc(o)?AN(e,(function(){return PM(n.a?n.a(1):n.call(null,1),n.a?n.a(0):n.call(null,0),e)})):null}function JN(e,n,r){var o=DN(e,n),i=FN(e,n),l=xy.a(i);Rh.c(l,Cf,r),i=B(t(gs.a(i))),l=null;for(var a=0,u=0;;)if(u<a){var s=l.W(null,u);BN(e,r,s),u+=1}else{if(!(i=B(i)))break;Wf(l=i)?(i=re(l),u=se(l),l=i,a=F(i),i=u):(i=C(l),BN(e,r,i),i=D(l),l=null,a=0),u=0}return Tc(o)?AN(e,(function(){return eN(n.a?n.a(1):n.call(null,1),n.a?n.a(0):n.call(null,0),e)})):null}g=vN.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"grammar":return this.qa;case"text":return this.text;case"segment":return this.Ua;case"fail-index":return this.Ma;case"node-builder":return this.Ta;case"stack":return this.stack;case"next-stack":return this.Sa;case"generation":return this.Oa;case"negative-listeners":return this.Ra;case"msg-cache":return this.Qa;case"nodes":return this.sa;case"success":return this.Va;case"failure":return this.Na;case"trace?":return this.Wa;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#instaparse.gll.Tramp{",", ","}",t,Xg.b(new Q(null,14,5,R,[new Q(null,2,5,R,[wo,this.qa],null),new Q(null,2,5,R,[ZD,this.text],null),new Q(null,2,5,R,[Rv,this.Ua],null),new Q(null,2,5,R,[HB,this.Ma],null),new Q(null,2,5,R,[oq,this.Ta],null),new Q(null,2,5,R,[CC,this.stack],null),new Q(null,2,5,R,[pw,this.Sa],null),new Q(null,2,5,R,[wD,this.Oa],null),new Q(null,2,5,R,[NG,this.Ra],null),new Q(null,2,5,R,[As,this.Qa],null),new Q(null,2,5,R,[lA,this.sa],null),new Q(null,2,5,R,[qz,this.Va],null),new Q(null,2,5,R,[lC,this.Na],null),new Q(null,2,5,R,[Mn,this.Wa],null)],null),this.j))},g.ua=function(){return new gj(this,14,new Q(null,14,5,R,[wo,ZD,Rv,HB,oq,CC,pw,wD,NG,As,lA,qz,lC,Mn],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 14+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=166878148^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.qa,n.qa)&&A.b(this.text,n.text)&&A.b(this.Ua,n.Ua)&&A.b(this.Ma,n.Ma)&&A.b(this.Ta,n.Ta)&&A.b(this.stack,n.stack)&&A.b(this.Sa,n.Sa)&&A.b(this.Oa,n.Oa)&&A.b(this.Ra,n.Ra)&&A.b(this.Qa,n.Qa)&&A.b(this.sa,n.sa)&&A.b(this.Va,n.Va)&&A.b(this.Na,n.Na)&&A.b(this.Wa,n.Wa)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,14,[As,null,NG,null,wD,null,lC,null,HB,null,wo,null,qz,null,lA,null,oq,null,Rv,null,CC,null,Mn,null,pw,null,ZD,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,this.Va,this.Na,this.Wa,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(wo,n):P.call(null,wo,n))?new vN(t,this.text,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,this.Va,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(ZD,n):P.call(null,ZD,n))?new vN(this.qa,t,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,this.Va,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(Rv,n):P.call(null,Rv,n))?new vN(this.qa,this.text,t,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,this.Va,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(HB,n):P.call(null,HB,n))?new vN(this.qa,this.text,this.Ua,t,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,this.Va,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(oq,n):P.call(null,oq,n))?new vN(this.qa,this.text,this.Ua,this.Ma,t,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,this.Va,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(CC,n):P.call(null,CC,n))?new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,t,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,this.Va,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(pw,n):P.call(null,pw,n))?new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,this.stack,t,this.Oa,this.Ra,this.Qa,this.sa,this.Va,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(wD,n):P.call(null,wD,n))?new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,t,this.Ra,this.Qa,this.sa,this.Va,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(NG,n):P.call(null,NG,n))?new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,t,this.Qa,this.sa,this.Va,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(As,n):P.call(null,As,n))?new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,t,this.sa,this.Va,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(lA,n):P.call(null,lA,n))?new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,t,this.Va,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(qz,n):P.call(null,qz,n))?new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,t,this.Na,this.Wa,this.Mb,this.j,null):p(P.b?P.b(lC,n):P.call(null,lC,n))?new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,this.Va,t,this.Wa,this.Mb,this.j,null):p(P.b?P.b(Mn,n):P.call(null,Mn,n))?new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,this.Va,this.Na,t,this.Mb,this.j,null):new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,this.Va,this.Na,this.Wa,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,14,5,R,[new Gi(wo,this.qa),new Gi(ZD,this.text),new Gi(Rv,this.Ua),new Gi(HB,this.Ma),new Gi(oq,this.Ta),new Gi(CC,this.stack),new Gi(pw,this.Sa),new Gi(wD,this.Oa),new Gi(NG,this.Ra),new Gi(As,this.Qa),new Gi(lA,this.sa),new Gi(qz,this.Va),new Gi(lC,this.Na),new Gi(Mn,this.Wa)],null),this.j))},g.O=function(e,n){return new vN(this.qa,this.text,this.Ua,this.Ma,this.Ta,this.stack,this.Sa,this.Oa,this.Ra,this.Qa,this.sa,this.Va,this.Na,this.Wa,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)},g=zN.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"listeners":return this.kc;case"full-listeners":return this.cc;case"results":return this.results;case"full-results":return this.dc;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#instaparse.gll.Node{",", ","}",t,Xg.b(new Q(null,4,5,R,[new Q(null,2,5,R,[jE,this.kc],null),new Q(null,2,5,R,[xy,this.cc],null),new Q(null,2,5,R,[uJ,this.results],null),new Q(null,2,5,R,[gs,this.dc],null)],null),this.j))},g.ua=function(){return new gj(this,4,new Q(null,4,5,R,[jE,xy,uJ,gs],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 4+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=-1610074144^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.kc,n.kc)&&A.b(this.cc,n.cc)&&A.b(this.results,n.results)&&A.b(this.dc,n.dc)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,4,[gs,null,xy,null,jE,null,uJ,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new zN(this.kc,this.cc,this.results,this.dc,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(jE,n):P.call(null,jE,n))?new zN(t,this.cc,this.results,this.dc,this.Mb,this.j,null):p(P.b?P.b(xy,n):P.call(null,xy,n))?new zN(this.kc,t,this.results,this.dc,this.Mb,this.j,null):p(P.b?P.b(uJ,n):P.call(null,uJ,n))?new zN(this.kc,this.cc,t,this.dc,this.Mb,this.j,null):p(P.b?P.b(gs,n):P.call(null,gs,n))?new zN(this.kc,this.cc,this.results,t,this.Mb,this.j,null):new zN(this.kc,this.cc,this.results,this.dc,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,4,5,R,[new Gi(jE,this.kc),new Gi(xy,this.cc),new Gi(uJ,this.results),new Gi(gs,this.dc)],null),this.j))},g.O=function(e,n){return new zN(this.kc,this.cc,this.results,this.dc,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)};var KN=Jh(xk,ji);function LN(e,n,t){return Rh.c(NG.a(e),KN,Gf([n.a?n.a(0):n.call(null,0),new Q(null,1,5,R,[t],null)]))}function MN(e,n,t,r){return Rh.b(lC.a(e),(function(e){var n=DH.a(e);switch(n=dg(t,n)){case 1:return new tN(t,new Q(null,1,5,R,[r],null),null,null,null);case 0:return new tN(t,Cf.b(kJ.a(e),r),null,null,null);case-1:return e;default:throw Error(["No matching clause: ",q.a(n)].join(""))}})),A.b(t,HB.a(e))?HN(e,n,xN(function(){var n=oq.a(e),r=ZD.a(e);r=Ag?r.substring(t):zg.call(null,r,t);var o=F(ZD.a(e));return NN.K?NN.K(n,aq,r,t,o):NN.call(null,n,aq,r,t,o)}(),F(ZD.a(e)))):null}function ON(e){var n=Mf(t(e));Rh.b(e,Nf),n.o?n.o():n.call(null)}function PN(e,n){for(;;){var r=CC.a(e);if(p(t(qz.a(e))))return vf(Ru.a(t(qz.a(e))),new Mg(null,function(e){return function(){return Ph(qz.a(e),null),PN(e,!0)}}(e),null,null));if(0<F(t(r)))ON(r);else if(0<F(t(NG.a(e)))){var o=C(t(NG.a(e)));r=J(o,0,null);var i=Mf(o=J(o,1,null));i.o?i.o():i.call(null),A.b(F(o),1)?Rh.c(NG.a(e),Hf,r):Rh.A(NG.a(e),oi,new Q(null,1,5,R,[r],null),Nf)}else{if(!p(n))return null;Ph(r,t(n=pw.a(e))),Ph(n,I),Rh.b(wD.a(e),$e),n=null}}}function QN(e,n){return function(t){return HN(n,e,t)}}function RN(e,n){return function(){return HN(n,e,xN(null,e.a?e.a(0):e.call(null,0)))}}var SN=function e(n,t,r,o){return function(i){var l=null!=i&&(64&i.h||h===i.D)?fh(qk,i):i;if(i=x.b(l,Ru),l=x.b(l,DH),i=CL(n,i),B(t)){l=new Q(null,2,5,R,[l,C(t)],null);var a=D(t);i=e.A?e.A(i,a,r,o):e.call(null,i,a,r,o),i=IN(o,l,i)}else i=HN(o,r,xN(i,l));return i}},TN=function e(n,t,r,o){return function(i){var l=null!=i&&(64&i.h||h===i.D)?fh(qk,i):i;i=x.b(l,Ru),l=x.b(l,DH);var a=CL(n,i);return kM(t)?JN(o,new Q(null,2,5,R,[l,C(t)],null),function(){var n=D(t);return e.A?e.A(a,n,r,o):e.call(null,a,n,r,o)}()):B(t)?IN(o,new Q(null,2,5,R,[l,C(t)],null),function(){var n=D(t);return e.A?e.A(a,n,r,o):e.call(null,a,n,r,o)}()):HN(o,r,xN(a,l))}},UN=function e(n,t,r,o,i){return function(l){var a=null!=l&&(64&l.h||h===l.D)?fh(qk,l):l;return l=x.b(a,Ru),a=x.b(a,DH),A.b(a,r)?0===F(n)?HN(i,o,xN(null,a)):null:(l=CL(n,l),IN(i,new Q(null,2,5,R,[a,t],null),e.K?e.K(l,t,a,o,i):e.call(null,l,t,a,o,i)),HN(i,o,xN(l,a)))}},VN=function e(n,t,r,o,i){return function(l){var a=null!=l&&(64&l.h||h===l.D)?fh(qk,l):l;return l=x.b(a,Ru),a=x.b(a,DH),A.b(a,r)?0===F(n)?HN(i,o,xN(null,a)):null:(l=CL(n,l),A.b(a,F(ZD.a(i)))?HN(i,o,xN(l,a)):IN(i,new Q(null,2,5,R,[a,t],null),e.K?e.K(l,t,a,o,i):e.call(null,l,t,a,o,i)))}},WN=function e(n,t,r,o,i,l,a,u){return function(l){l=null!=l&&(64&l.h||h===l.D)?fh(qk,l):l;var s=x.b(l,Ru);l=x.b(l,DH),s=CL(n,s);var c=t+1;return o<=c&&c<=i&&HN(u,a,xN(s,l)),c<i?IN(u,new Q(null,2,5,R,[l,r],null),e.Ga?e.Ga(s,c,r,o,i,l,a,u):e.call(null,s,c,r,o,i,l,a,u)):null}},XN=function e(n,t,r,o,i,l,a,u){return function(l){l=null!=l&&(64&l.h||h===l.D)?fh(qk,l):l;var s=x.b(l,Ru);l=x.b(l,DH),s=CL(n,s);var c=t+1;return A.b(l,F(ZD.a(u)))?o<=c&&c<=i?HN(u,a,xN(s,l)):null:c<i?IN(u,new Q(null,2,5,R,[l,r],null),e.Ga?e.Ga(s,c,r,o,i,l,a,u):e.call(null,s,c,r,o,i,l,a,u)):null}};function YN(e){return function(n){return Ph(qz.a(e),n)}}function TM(e,t,r){var o=xn.a(e),i=ZD.a(r),l=F(i),a=t+F(o);return l=l<a?l:a,i=Bg?i.substring(t,l):zg.call(null,i,t,l),A.b(o,i)?HN(r,new Q(null,2,5,R,[t,e],null),xN(o,l)):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,xn,DA,o],null))}function iN(e,t,r){var o=xn.a(e),i=ZD.a(r),l=F(i),a=t+F(o);return l=l<a?l:a,a=Bg?i.substring(t,l):zg.call(null,i,t,l),A.b(l,F(i))&&A.b(o,a)?HN(r,new Q(null,2,5,R,[t,e],null),xN(o,l)):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,3,[X,xn,DA,o,RH,!0],null))}function UM(e,t,r){var o=xn.a(e),i=ZD.a(r),l=F(i),a=t+F(o);return l=l<a?l:a,i=Bg?i.substring(t,l):zg.call(null,i,t,l),A.b(o.toUpperCase(),i.toUpperCase())?HN(r,new Q(null,2,5,R,[t,e],null),xN(o,l)):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,xn,DA,o],null))}function jN(e,t,r){var o=xn.a(e),i=ZD.a(r),l=F(i),a=t+F(o);return l=l<a?l:a,a=Bg?i.substring(t,l):zg.call(null,i,t,l),A.b(l,F(i))&&A.b(o.toUpperCase(),a.toUpperCase())?HN(r,new Q(null,2,5,R,[t,e],null),xN(o,l)):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,3,[X,xn,DA,o,RH,!0],null))}function VM(e,t,r){var o=Zy.a(e),i=yJ.a(e),l=ZD.a(r);if(t>=F(l))return MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,nG,DA,new n(null,3,[Au,!0,Zy,o,yJ,i],null)],null));if(65535>=i)return o<=(l=l.charCodeAt(t))&&l<=i?HN(r,new Q(null,2,5,R,[t,e],null),xN(q.a(rg(l)),t+1)):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,nG,DA,new n(null,3,[Au,!0,Zy,o,yJ,i],null)],null));var a=NM(l=OM(l,0|t));return o<=l&&l<=i?HN(r,new Q(null,2,5,R,[t,e],null),xN(a,t+F(a))):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,nG,DA,new n(null,3,[Au,!0,Zy,o,yJ,i],null)],null))}function kN(e,t,r){var o=Zy.a(e),i=yJ.a(e),l=ZD.a(r),a=F(l);if(t>=F(l))return MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,nG,DA,new n(null,3,[Au,!0,Zy,o,yJ,i],null)],null));if(65535>=i)return l=l.charCodeAt(t),A.b(t+1,a)&&o<=l&&l<=i?HN(r,new Q(null,2,5,R,[t,e],null),xN(q.a(rg(l)),a)):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,nG,DA,new n(null,3,[Au,!0,Zy,o,yJ,i],null)],null));var u=NM(l=OM(l,0|t));return A.b(t+F(u),a)&&o<=l&&l<=i?HN(r,new Q(null,2,5,R,[t,e],null),xN(u,a)):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,3,[X,nG,DA,new n(null,3,[Au,!0,Zy,o,yJ,i],null),RH,!0],null))}function ZN(e,n){return p(p(e=new RegExp(e.source,["g",jM(e)].join("")).exec(n))?0===e.index:e)?C(e):null}function aN(e,t,r){var o=Et.a(e),i=Rv.a(r);return p(i=ZN(o,i=Ag?i.substring(t):zg.call(null,i,t)))?HN(r,new Q(null,2,5,R,[t,e],null),xN(i,t+F(i))):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,Et,DA,o],null))}function qN(e,t,r){var o=Et.a(e),i=Rv.a(r),l=Ag?i.substring(t):zg.call(null,i,t);l=ZN(o,l);var a=F(i)-t;return p(p(l)?A.b(F(l),a):l)?HN(r,new Q(null,2,5,R,[t,e],null),xN(l,F(i))):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,3,[X,Et,DA,o,RH,!0],null))}function SM(e,n,t){var r=An.a(e);return IN(t,new Q(null,2,5,R,[n,C(r)],null),SN(IL,D(r),new Q(null,2,5,R,[n,e],null),t))}function hN(e,n,t){var r=An.a(e);return IN(t,new Q(null,2,5,R,[n,C(r)],null),TN(IL,D(r),new Q(null,2,5,R,[n,e],null),t))}function YM(e,n,t){var r=wv.a(e);return IN(t,new Q(null,2,5,R,[n,r],null),UN(IL,r,n,new Q(null,2,5,R,[n,e],null),t))}function nN(e,n,t){var r=wv.a(e);return IN(t,new Q(null,2,5,R,[n,r],null),VN(IL,r,n,new Q(null,2,5,R,[n,e],null),t))}function ZM(e,n,t){var r=wv.a(e),o=qx.a(e),i=bw.a(e);return 0===o?(HN(t,new Q(null,2,5,R,[n,e],null),xN(null,n)),1<=i?IN(t,new Q(null,2,5,R,[n,r],null),WN(IL,0,r,1,i,n,new Q(null,2,5,R,[n,e],null),t)):null):IN(t,new Q(null,2,5,R,[n,r],null),WN(IL,0,r,o,i,n,new Q(null,2,5,R,[n,e],null),t))}function oN(e,n,t){var r=wv.a(e),o=qx.a(e),i=bw.a(e);return 0===o?(HN(t,new Q(null,2,5,R,[n,e],null),xN(null,n)),1<=i?IN(t,new Q(null,2,5,R,[n,r],null),XN(IL,0,r,1,i,n,new Q(null,2,5,R,[n,e],null),t)):null):IN(t,new Q(null,2,5,R,[n,r],null),XN(IL,0,r,o,i,n,new Q(null,2,5,R,[n,e],null),t))}function $M(e,n,t){var r=wv.a(e);return IN(t,new Q(null,2,5,R,[n,r],null),UN(IL,r,n,new Q(null,2,5,R,[n,e],null),t)),HN(t,new Q(null,2,5,R,[n,e],null),xN(null,n))}function pN(e,n,t){var r=wv.a(e);return A.b(n,F(ZD.a(t)))?HN(t,new Q(null,2,5,R,[n,e],null),xN(null,n)):IN(t,new Q(null,2,5,R,[n,r],null),VN(IL,r,n,new Q(null,2,5,R,[n,e],null),t))}function RM(e,n,t){var r=An.a(e);r=B(r);for(var o=null,i=0,l=0;;)if(l<i){var a=o.W(null,l);IN(t,new Q(null,2,5,R,[n,a],null),QN(new Q(null,2,5,R,[n,e],null),t)),l+=1}else{if(!(r=B(r)))return null;Wf(o=r)?(r=re(o),i=se(o),o=r,a=F(r),r=i,i=a):(a=C(o),IN(t,new Q(null,2,5,R,[n,a],null),QN(new Q(null,2,5,R,[n,e],null),t)),r=D(o),o=null,i=0),l=0}}function gN(e,n,t){var r=An.a(e);r=B(r);for(var o=null,i=0,l=0;;)if(l<i){var a=o.W(null,l);JN(t,new Q(null,2,5,R,[n,a],null),QN(new Q(null,2,5,R,[n,e],null),t)),l+=1}else{if(!(r=B(r)))return null;Wf(o=r)?(r=re(o),i=se(o),o=r,a=F(r),r=i,i=a):(a=C(o),JN(t,new Q(null,2,5,R,[n,a],null),QN(new Q(null,2,5,R,[n,e],null),t)),r=D(o),o=null,i=0),l=0}}function dN(e,n,t){var r=Xn.a(e),o=Vn.a(e);r=new Q(null,2,5,R,[n,r],null);var i=new Q(null,2,5,R,[n,o],null),l=QN(new Q(null,2,5,R,[n,e],null),t);return IN(t,r,l),LN(t,r,(function(){return IN(t,i,l)}))}function sN(e,n,t){var r=Xn.a(e),o=Vn.a(e);r=new Q(null,2,5,R,[n,r],null);var i=new Q(null,2,5,R,[n,o],null),l=QN(new Q(null,2,5,R,[n,e],null),t);return JN(t,r,l),LN(t,r,(function(){return JN(t,i,l)}))}function XM(e,n,t){var r=wv.a(e);return IN(t,new Q(null,2,5,R,[n,r],null),QN(new Q(null,2,5,R,[n,e],null),t)),HN(t,new Q(null,2,5,R,[n,e],null),xN(null,n))}function mN(e,t,r){var o=wv.a(e);return JN(r,new Q(null,2,5,R,[t,o],null),QN(new Q(null,2,5,R,[t,e],null),r)),A.b(t,F(ZD.a(r)))?HN(r,new Q(null,2,5,R,[t,e],null),xN(null,t)):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,Mp,DA,no],null))}function QM(e,n,t){var r=wo.a(t),o=FJ.a(e);return r=x.c(r,o,o),IN(t,new Q(null,2,5,R,[n,r],null),QN(new Q(null,2,5,R,[n,e],null),t))}function fN(e,n,t){var r=wo.a(t),o=FJ.a(e);return r=x.c(r,o,o),JN(t,new Q(null,2,5,R,[n,r],null),QN(new Q(null,2,5,R,[n,e],null),t))}function bN(e,n,t){var r=wv.a(e);return IN(t,new Q(null,2,5,R,[n,r],null),RN(new Q(null,2,5,R,[n,e],null),t))}function rN(e,t,r){return A.b(t,F(ZD.a(r)))?bN(e,t,r):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,Jv,DA,no],null))}function cN(e,t,r){var o=wv.a(e),i=new Q(null,2,5,R,[t,o],null);return p(EN(r,i))?MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,1,[X,uA],null)):(IN(r,i,function(){var i=new xl((function(){return MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,uA,DA,new n(null,1,[iJ,WL(o,!1)],null)],null))}));return function(){return Bl(i)}}()),LN(r,i,(function(){return Tc(EN(r,i))?HN(r,new Q(null,2,5,R,[t,e],null),xN(null,t)):null})))}function WM(e,n,t){return HN(t,new Q(null,2,5,R,[n,e],null),xN(null,n))}function lN(e,t,r){return A.b(t,F(ZD.a(r)))?HN(r,new Q(null,2,5,R,[t,e],null),xN(null,t)):MN(r,new Q(null,2,5,R,[t,e],null),t,new n(null,2,[X,Ps,DA,no],null))}function $N(e,n,t){p(t)?IN(e,new Q(null,2,5,R,[0,n],null),YN(e)):JN(e,new Q(null,2,5,R,[0,n],null),YN(e))}function aO(e,r,o,i){if($N(e=wN(e,o,o,-1,null),DM(r),i),p(r=PN(e,null)))o=C(r);else{r=t(lC.a(e));e:{i=DH.a(r);for(var l=e=1,a=0;;){if(A.b(i,a)){i=new n(null,2,[en,e,ux,l],null);break e}A.b("\n",x.b(o,a))?(a+=1,e+=1,l=1):(a+=1,l+=1)}}o=wk.g(G([r,i,new n(null,1,[ZD,eM(en.a(i),o)],null)]))}return o}function NN(e,t,r,o,i){return Kf(e.b?e.b(t,r):e.call(null,t,r),new n(null,2,[Yv,o,hp,i],null))}function bO(e,n){return(null!=e?262144&e.h||h===e.He||!e.h&&Xc(Od,e):Xc(Od,e))?Kf(e,wk.g(G([n,Lf(e)]))):e}var cO=function e(n,t){var r=X.a(t);return p(r=n.a?n.a(r):n.call(null,r))?bO(fh(r,Wh.b(Jh(e,n),sE.a(t))),Lf(t)):p(X.a(t))?K.c(t,sE,Wh.b(Jh(e,n),sE.a(t))):t},dO=function e(n,t){if(Tf(t)&&B(t)){var r=C(t);return p(r=n.a?n.a(r):n.call(null,r))?bO(fh(r,Wh.b(Jh(e,n),D(t))),Lf(t)):Kf(ji.b(new Q(null,1,5,R,[C(t)],null),Wh.b(Jh(e,n),D(t))),Lf(t))}return t},eO=function e(n,t){return"string"===typeof t?t:p(!!M(t)&&X.a(t))?cO(n,t):Vf(t)&&C(t)instanceof z?dO(n,t):Tf(t)?Kf(Wh.b(Jh(e,n),t),Lf(t)):t instanceof tN?t:iM(G(["Invalid parse-tree, not recognized as either enlive or hiccup format."]))};function fO(e,n,t){if(Cg(t)){var r=fh(O,Wh.b(e,t));return n.a?n.a(r):n.call(null,r)}return Oi(t)?(r=new Gi(function(){var n=Dd(t);return e.a?e.a(n):e.call(null,n)}(),function(){var n=Ed(t);return e.a?e.a(n):e.call(null,n)}()),n.a?n.a(r):n.call(null,r)):$f(t)?(r=Vk(Wh.b(e,t)),n.a?n.a(r):n.call(null,r)):Uf(t)?(r=gd.c((function(n,t){return Cf.b(n,e.a?e.a(t):e.call(null,t))}),t,t),n.a?n.a(r):n.call(null,r)):Qf(t)?(r=ji.b(Ef(t),Wh.b(e,t)),n.a?n.a(r):n.call(null,r)):n.a?n.a(t):n.call(null,t)}var gO=function e(n,t){return fO(Jh(e,n),n,t)};function hO(e){function n(e){var n=J(e,0,null);return e=J(e,1,null),new Q(null,2,5,R,"string"===typeof n?[Kg.a(n),e]:[n,e],null)}return gO((function(e){return M(e)?ji.b(S,Wh.b(n,e)):e}),e)}function iO(e){return null==e?null:rg(e)}function jO(e,n,t,r,o){this.vc=e,this.form=n,this.Mb=t,this.j=r,this.B=o,this.h=2230716170,this.I=139264}function kO(e,n){return new jO(n,e,null,null,null)}g=jO.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"splicing?":return this.vc;case"form":return this.form;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#cljs.tools.reader.impl.utils.ReaderConditional{",", ","}",t,Xg.b(new Q(null,2,5,R,[new Q(null,2,5,R,[TI,this.vc],null),new Q(null,2,5,R,[Dr,this.form],null)],null),this.j))},g.ua=function(){return new gj(this,2,new Q(null,2,5,R,[TI,Dr],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 2+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=-209062840^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.vc,n.vc)&&A.b(this.form,n.form)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,2,[TI,null,Dr,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new jO(this.vc,this.form,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(TI,n):P.call(null,TI,n))?new jO(t,this.form,this.Mb,this.j,null):p(P.b?P.b(Dr,n):P.call(null,Dr,n))?new jO(this.vc,t,this.Mb,this.j,null):new jO(this.vc,this.form,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,2,5,R,[new Gi(TI,this.vc),new Gi(Dr,this.form)],null),this.j))},g.O=function(e,n){return new jO(this.vc,this.form,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)},g.ma=h,g.S=function(e,n,t){return ce(n,["#?",p(this.vc)?"@":null].join("")),hl(this.form,n,t)};var lO=/[\s]/;function mO(e){return null==e?null:","===e||lO.test(e)}function nO(e){return null==e?null:!/[^0-9]/.test(e)}function oO(e){return e instanceof z?Gf([e,!0]):e instanceof w||"string"===typeof e?new n(null,1,[X,e],null):e}var pO=Oh(0);function qO(e,n){return function n(t){return new Mg(null,(function(){for(;;){var r=B(t);if(r){if(Wf(r)){var o=re(r),i=F(o),l=Qg(i);return function(){for(var n=0;;){if(!(n<i))return!0;var t=qd(o,n),r=l;if(t instanceof w||t instanceof z){var a=Uk(Ig,Lg)(t),u=J(a,0,null);a=J(a,1,null);var s=t instanceof w?Me:Kg;t=null==u?s.b?s.b(e,a):s.call(null,e,a):A.b("_",u)?s.a?s.a(a):s.call(null,a):t}r.add(t),n+=1}}()?Sg(Ug(l),n(se(r))):Sg(Ug(l),null)}var a=C(r);return vf(a instanceof w||a instanceof z?function(){var n=Uk(Ig,Lg)(a),t=J(n,0,null);n=J(n,1,null);var r=a instanceof w?Me:Kg;return null==t?r.b?r.b(e,n):r.call(null,e,n):A.b("_",t)?r.a?r.a(n):r.call(null,n):a}():a,n(Re(r)))}return null}}),null,null)}(n)}function rO(e){var n=J(e,0,null);return e=J(e,1,null),p(n)?null:e}function sO(e,n){return e=parseInt(e,n),p(isNaN(e))?-1:e}function tO(e){if(null!=e&&null!=e.xa)e=e.xa(e);else{var n=tO[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=tO._))throw Zc("Reader.read-char",e);e=n.a?n.a(e):n.call(null,e)}}return e}function uO(e){if(null!=e&&null!=e.Dc)e=e.Dc(e);else{var n=uO[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=uO._))throw Zc("Reader.peek-char",e);e=n.a?n.a(e):n.call(null,e)}}return e}function vO(e,n){if(null!=e&&null!=e.Fd)e.Fd(e,n);else{var t=vO[db(null==e?null:e)];if(null!=t)t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=vO._))throw Zc("IPushbackReader.unread",e);t.b?t.b(e,n):t.call(null,e,n)}}}function wO(e){if(null!=e&&null!=e.Hd)e=e.Hd(e);else{var n=wO[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=wO._))throw Zc("IndexingReader.get-line-number",e);e=n.a?n.a(e):n.call(null,e)}}return e}function xO(e){if(null!=e&&null!=e.Gd)e=e.Gd(e);else{var n=xO[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=xO._))throw Zc("IndexingReader.get-column-number",e);e=n.a?n.a(e):n.call(null,e)}}return e}function yO(e){if(null!=e&&null!=e.Me)e=e.Me(e);else{var n=yO[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=yO._))throw Zc("IndexingReader.get-file-name",e);e=n.a?n.a(e):n.call(null,e)}}return e}function zO(e,n){this.ha=e,this.Qf=n,this.sd=0}function AO(e,n){this.Nf=e,this.ca=n,this.Vb=this.xe=1}function BO(e){return null!=e&&h===e.Yh}function CO(e){e=new zO(e,F(e));e:{var n=Array(1);if($f(null))for(var t=0,r=B(null);;){if(!(r&&1>t))break e;n[t]=C(r),t+=1,r=D(r)}else for(t=0;1>t;)n[t]=null,t+=1}return new AO(e,n)}function DO(e,n,t,r){var o=F(n);return e=p(e)?0:10<o?10:o,n=Wh.b(Jh(EO,!0),Xh.b(e,n)),n=fh(q,di(" ",n)),o=e<o?"...":null,[q.a(t),q.a(n),o,q.a(r)].join("")}zO.prototype.xa=function(){if(this.Qf>this.sd){var e=this.ha.charAt(this.sd);return this.sd+=1,e}return null},zO.prototype.Dc=function(){return this.Qf>this.sd?this.ha.charAt(this.sd):null},AO.prototype.xa=function(){var e=this.Vb<this.xe?this.ca[this.Vb]:this.Nf.xa(null);return this.Vb<this.xe&&(this.Vb+=1),iO(e)},AO.prototype.Dc=function(){return iO(this.Vb<this.xe?this.ca[this.Vb]:this.Nf.Dc(null))},AO.prototype.Fd=function(e,n){if(p(n)){if(0===this.Vb)throw Error("Pushback buffer is full");return--this.Vb,this.ca[this.Vb]=n}return null};var EO,uS=Oh(S),vS=Oh(S),wS=Oh(S),xS=Oh(S),yS=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));function KO(e,t,r){t=new n(null,2,[U,fr,FC,t],null),e=BO(e)?K.g(t,OD,yO(e),G([en,wO(e),sq,xO(e)])):t;var o=OD.a(e);t=en.a(e);var i=sq.a(e);throw o=p(o)?[q.a(o)," "].join(""):null,t=p(t)?["[line ",q.a(t),", col ",q.a(i),"]"].join(""):null,im(r=ih(q,o,t,p(p(o)?o:t)?" ":null,r),e)}function LO(e,n){return KO(e,Ip,G([fh(q,n)]))}function MO(e,n){return KO(e,gA,G([fh(q,n)]))}function NO(e,n){return KO(e,gv,G([fh(q,n)]))}function OO(e,n,t,r,o){return NO(e,G(["Unexpected EOF while reading ",p(o)?["item ",q.a(o)," of "].join(""):null,Lg(n),p(t)?[", starting at line ",q.a(t)," and column ",q.a(r)].join(""):null,"."]))}function PO(e,n,t,r){LO(e,G(["The map literal starting with ",EO.b(!1,C(r)),p(n)?[" on line ",q.a(n)," column ",q.a(t)].join(""):null," contains ",F(r)," form(s). Map literals must contain an even number of forms."]))}function QO(e){throw MO(null,G(["Invalid unicode literal: \\",e,"."]))}function RO(e,n){return LO(e,G(["Invalid unicode escape: \\u",n,"."]))}function SO(e,n,t){return LO(e,G(["Invalid ",Lg(n),": ",t,"."]))}function TO(e,n){return NO(e,G(["Unexpected EOF while reading start of ",Lg(n),"."]))}function UO(e,n,t){return LO(e,G(["Invalid character: ",t," found while reading ",Lg(n),"."]))}function VO(e){return NO(e,G(["Unexpected EOF while reading dispatch character."]))}function WO(e,n,t){e:{var r=n instanceof z?n.da:null;switch(r){case"regex":r='#"';break e;case"string":r='"';break e;default:throw Error(["No matching clause: ",q.a(r)].join(""))}}return NO(e,G(["Unexpected EOF reading ",Lg(n)," starting ",gh(q,r,t),"."]))}function XO(e,n){return MO(null,G(["Invalid digit ",e," in unicode character \\",n,"."]))}function YO(e,n){return MO(e,G(["Invalid digit ",n," in unicode character."]))}function ZO(e,n,t){return MO(e,G(["Invalid unicode literal. Unicode literals should be ",t,"characters long.  ","value suppled is ",n,"characters long."]))}function $O(e,n){return LO(e,G(["Invalid character literal \\u",n,"."]))}function aP(e,n){return LO(e,G(["Invalid octal escape sequence in a character literal:",n,". Octal escape sequences must be 3 or fewer digits."]))}function bP(e){return LO(e,G(["Octal escape sequence must be in range [0, 377]."]))}function cP(e){return NO(e,G(["Unexpected EOF while reading character."]))}function dP(e,n){return LO(e,G(["Unsupported escape character: \\",n,"."]))}function eP(e){return LO(e,G(["A single colon is not a valid keyword."]))}function fP(e,n){LO(e,G(["Metadata cannot be ",EO.b(!1,n),". Metadata must be a Symbol, Keyword, String or Map."]))}function gP(e,n){return LO(e,G(["Metadata can not be applied to ",EO.b(!1,n),". ","Metadata can only be applied to IMetas."]))}function hP(e,n){return LO(e,G(["Namespaced map with namespace ",n," does not specify a map."]))}function iP(e,n){return LO(e,G(["Invalid value used as namespace in namespaced map: ",n,"."]))}function jP(e,n){LO(e,G(["Invalid reader tag: ",EO.b(!1,n),". Reader tags must be symbols."]))}function kP(e,n){return LO(e,G(["No reader function for tag ",EO.b(!1,n),"."]))}function lP(e,n){return n=function e(n){return new Mg(null,(function(){for(var t=n;;){if(!(t=B(t)))return null;if(Wf(t)){var r=re(t),o=F(r),i=Qg(o);e:for(var l=0;;){if(!(l<o)){r=!0;break e}var a=qd(r,l),u=J(a,0,null);1<J(a,1,null)&&i.add(u),l+=1}return Sg(Ug(i),r?e(se(t)):null)}if(r=J(i=C(t),0,null),1<J(i,1,null))return vf(r,e(Re(t)));t=Re(t)}}),null,null)}(Tk(n)),ih(q,e,1<F(n)?"s":null,": ",di(", ",n))}function mP(e,n,t){return n=Lg(n),LO(e,G([lP([String(n.charAt(0)).toUpperCase()+String(n.substr(1)).toLowerCase()," literal contains duplicate key"].join(""),t)]))}function nP(e,n){return p(n)?NO(e,G(["EOF while reading, starting at line ",n,"."])):NO(e,G(["EOF while reading."]))}function oP(e){for(var n=e.xa(null);;){if(!(mO.a?mO.a(n):mO.call(null,n)))return n;n=e.xa(null)}}EO=new dm(Me.b("cljs.tools.reader.impl.inspect","inspect*"),(function(e,n){return null==n?$C:"string"===typeof n?xn:n instanceof z||"number"===typeof n||n instanceof w?ru:Vf(n)?Uu:Cg(n)?JI:M(n)?Tv:Rf(n)?yA:A.b(n,!0)||A.b(n,!1)?ru:Yc(n)}),yS,uS,vS,wS,xS),EO.v(null,xn,(function(e,n){e=p(e)?5:20;var t=n.length>e?'..."':'"',r=n.length;return['"',q.a(n.substring(0,e<r?e:r)),t].join("")})),EO.v(null,ru,(function(e,n){return q.a(n)})),EO.v(null,Qe,(function(){return"<indexed seq>"})),EO.v(null,kj,(function(){return"<map seq>"})),EO.v(null,Pj,(function(){return"<map seq>"})),EO.v(null,Fg,(function(){return"<cons>"})),EO.v(null,Mg,(function(){return"<lazy seq>"})),EO.v(null,$C,(function(){return"nil"})),EO.v(null,JI,(function(e,n){return DO(e,n,"(",")")})),EO.v(null,Tv,(function(e,n){var t=F(n),r=p(e)?0:t;return DO(e,n=fh(Xg,Xh.b(r,n)),"{",t>r?"...}":"}")})),EO.v(null,yA,(function(e,n){return DO(e,n,"#{","}")})),EO.v(null,Uu,(function(e,n){return DO(e,n,"[","]")})),EO.v(null,em,(function(e,n){return ol.g(G([Yc(n)]))}));var pP=/^([-+]?)(?:(0)|([1-9][0-9]*)|0[xX]([0-9A-Fa-f]+)|0([0-7]+)|([1-9][0-9]?)[rR]([0-9A-Za-z]+)|0[0-9]+)(N)?$/,qP=/([-+]?[0-9]+)\/([0-9]+)/,rP=/([-+]?[0-9]+(\.[0-9]*)?([eE][-+]?[0-9]+)?)(M)?/;function sP(e,n){return J(e=Xk(e,n),0,null)===n}function tP(e){if(sP(pP,e)){var n=Ni(Xk(pP,e));if(null!=(n.a?n.a(2):n.call(null,2)))e=0;else{e="-"===(n.a?n.a(1):n.call(null,1));var t=(n=null!=(n.a?n.a(3):n.call(null,3))?new Q(null,2,5,R,[n.a?n.a(3):n.call(null,3),10],null):null!=(n.a?n.a(4):n.call(null,4))?new Q(null,2,5,R,[n.a?n.a(4):n.call(null,4),16],null):null!=(n.a?n.a(5):n.call(null,5))?new Q(null,2,5,R,[n.a?n.a(5):n.call(null,5),8],null):null!=(n.a?n.a(7):n.call(null,7))?new Q(null,2,5,R,[n.a?n.a(7):n.call(null,7),parseInt(n.a?n.a(6):n.call(null,6))],null):new Q(null,2,5,R,[null,null],null)).a?n.a(0):n.call(null,0);null==t?e=null:(n=parseInt(t,n.a?n.a(1):n.call(null,1)),e=e?-1*n:n,e=p(isNaN(e))?null:e)}}else sP(rP,e)?e=null!=((n=Ni(Xk(rP,e))).a?n.a(4):n.call(null,4))?parseFloat(n.a?n.a(1):n.call(null,1)):parseFloat(e):sP(qP,e)?(e=(n=Ni(Xk(qP,e))).a?n.a(1):n.call(null,1),n=n.a?n.a(2):n.call(null,2),e=p(Xk(/^\+/,e))?e.substring(1):e,e=parseInt(e)/parseInt(n)):e=null;return e}function uP(e){if(""===e||!0===/:$/.test(e)||!0===/^::/.test(e))return null;var n=e.indexOf("/"),t=0<n?e.substring(0,n):null;return null!=t?(n+=1)===F(e)||nO(pf(e=e.substring(n),0))||""===e||!1!==/:$/.test(t)||"/"!==e&&-1!==e.indexOf("/")?null:new Q(null,2,5,R,[t,e],null):"/"===e||-1===e.indexOf("/")?new Q(null,2,5,R,[null,e],null):null}var vP=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],1<t.length?new Qe(t.slice(1),0,null):null)};function wP(e){return function(){function n(e,n){var r=null;if(1<arguments.length){r=0;for(var o=Array(arguments.length-1);r<o.length;)o[r]=arguments[r+1],++r;r=new Qe(o,0,null)}return t.call(this,e,r)}function t(n){return LO(n,G([e]))}return n.F=1,n.G=function(e){var n=C(e);return e=Re(e),t(n)},n.g=t,n}()}function xP(e){switch(e){case'"':case";":case"@":case"^":case"`":case"~":case"(":case")":case"[":case"]":case"{":case"}":case"\\":return!0;default:return!1}}vP.g=function(e){for(;;){var n=e.xa(null);if("\n"===n||"\n"===n||null==n)break}return e},vP.F=1,vP.G=function(e){var n=C(e);return e=D(e),this.g(n,e)};var yP=new zc;function zP(e,n,t){if(null==t)return TO(e,n);for(yP.clear(),n=t;;){if(mO(n)||xP(n)||null==n)return null!=n&&e.Fd(null,n),yP.toString();yP.append(n),n=e.xa(null)}}function AP(e,n,t,r){if(p(n=e.xa(null))){var o=BP.a?BP.a(n):BP.call(null,n);return p(o)?o.A?o.A(e,n,t,r):o.call(null,e,n,t,r):(e.Fd(null,n),CP.A?CP.A(e,n,t,r):CP.call(null,e,n,t,r))}return VO(e)}function DP(e,n){return LO(e,G(["Unmatched delimiter ",n,"."]))}function EP(e){for(var n=new zc,t=e.xa(null);;){if('"'===t)return Zk(q.a(n));if(null==t)return WO(e,Fx,G([n]));n.append(t),"\\"===t&&(null==(t=e.xa(null))&&WO(e,Fx,G([n])),n.append(t)),t=e.xa(null)}}function FP(e,n,t){n=1+n,F(e)!==n&&QO(e);for(var r=1,o=0;;){if(r===n)return String.fromCharCode(o);var i=sO(pf(e,r),t);if(-1===i)return XO(pf(e,r),e);o=i+o*t,r+=1}}function GP(e,n,t,r,o){for(var i=1,l=sO(n,t);;){if(-1===l)return YO(e,n);if(i===r)return String.fromCharCode(l);var a=e.Dc(null),u=mO(a);if(u||(u=p(u=HP.a?HP.a(a):HP.call(null,a))?u:null==a),p(u))return p(o)?ZO(e,i,r):String.fromCharCode(l);if(u=sO(a,t),e.xa(null),-1===u)return YO(e,a);l=u+l*t,i+=1}}function IP(e){var n=e.xa(null);if(null!=n){var t=(n=xP(n)||mO(n)?q.a(n):zP(e,PF,n)).length;return 1===t?n.charAt(0):A.b(n,"newline")?"\n":A.b(n,"space")?" ":A.b(n,"tab")?"\t":A.b(n,"backspace")?"\b":A.b(n,"formfeed")?"\f":A.b(n,"return")?"\r":p(0==n.lastIndexOf("u",0))?55295<(t=(n=FP(n,4,16)).charCodeAt(0))&&57344>t?$O(e,t.toString(16)):n:p(0==n.lastIndexOf("o",0))?3<--t?aP(e,n):(t=FP(n,t,8),255>=parseInt(n.substring(1),8)?t:bP(e)):LO(e,G(["Unsupported character: ",n,"."]))}return cP(e)}function JP(e){return BO(e)?new Q(null,2,5,R,[e.Hd(null),e.Gd(null)-1|0],null):null}function KP(e){return BO(e)?new Q(null,2,5,R,[e.Hd(null),e.Gd(null)],null):null}var LP={},MP={},NP=!1;function OP(e,n,t,r,o){var i=NP;NP=!0;try{e:for(var l=JP(t),a=J(l,0,null),u=J(l,1,null),s=iO(n),c=je(I);;){var d=PP?PP(t,!1,LP,s,r,o):QP.call(null,t,!1,LP,s,r,o);if(d===MP){var f=le(c);break e}if(d===LP){f=OO(t,e,a,u,F(c));break e}c=Yg.b(c,d)}return f}finally{NP=i}}function RP(e,t,r,o){var i=JP(e);t=J(i,0,null),i=J(i,1,null),r=OP(JI,")",e,r,o);var l=KP(e);return o=J(l,0,null),l=J(l,1,null),Kf(Pf(r)?Se:fh(O,r),p(t)?wk.g(G([function(){var t=yO(e);return p(t)?new n(null,1,[OD,t],null):null}(),new n(null,4,[en,t,ux,i,fz,o,ho,l],null)])):null)}function SP(e,t,r,o){var i=JP(e);t=J(i,0,null),i=J(i,1,null),r=OP(Uu,"]",e,r,o);var l=KP(e);return o=J(l,0,null),l=J(l,1,null),Kf(r,p(t)?wk.g(G([function(){var t=yO(e);return p(t)?new n(null,1,[OD,t],null):null}(),new n(null,4,[en,t,ux,i,fz,o,ho,l],null)])):null)}function TP(e,t,r,o){var i=JP(e);t=J(i,0,null),i=J(i,1,null),o=F(r=OP(Tv,"}",e,r,o));var l=Sk(2,r),a=Fk(l),u=KP(e),s=J(u,0,null);return u=J(u,1,null),!Fh(o)&&PO(e,t,i,r),A.b(F(a),F(l))||mP(e,Tv,l),Kf(o<=2*pj?rj(hg(r)):Wj(hg(r)),p(t)?wk.g(G([function(){var t=yO(e);return p(t)?new n(null,1,[OD,t],null):null}(),new n(null,4,[en,t,ux,i,fz,s,ho,u],null)])):null)}function UP(e,n){for(var t=function(){var e=new zc;return e.append(n),e}(),r=e.xa(null);;){if(p(function(){var e=mO(r);return e||(p(e=HP.a?HP.a(r):HP.call(null,r))?e:null==r)}())){var o=q.a(t);e.Fd(null,r);var i=tP(o);return p(i)?i:LO(e,G(["Invalid number: ",o,"."]))}o=function(){var e=t;return e.append(r),e}(),i=e.xa(null),t=o,r=i}}function VP(e){var n=e.xa(null);switch(n){case"t":return"\t";case"r":return"\r";case"n":return"\n";case"\\":return"\\";case'"':return'"';case"b":return"\b";case"f":return"\f";case"u":return n=e.xa(null),-1===parseInt(0|n,16)?RO(e,n):GP(e,n,16,4,!0);default:return nO(n)?255<(0|(n=GP(e,n,8,3,!1)))?bP(e):n:dP(e,n)}}function WP(e){for(var n=new zc,t=e.xa(null);;){if(null==t)return WO(e,xn,G(['"',n]));switch(t){case"\\":var r=function(){var t=n;return t.append(VP(e)),t}(),o=e.xa(null);n=r,t=o;continue;case'"':return q.a(n);default:r=function(){var e=n;return e.append(t),e}(),o=e.xa(null),n=r,t=o}}}function XP(e,t,r){if(null==t)return null;var o=yO(e);o=null==o?null:new n(null,1,[OD,o],null);var i=KP(e);return e=J(i,0,null),i=J(i,1,null),wk.g(G([o,new n(null,4,[en,t,ux,r,fz,e,ho,i],null)]))}function YP(e,n){var t=JP(e),r=J(t,0,null);if(t=J(t,1,null),null==(n=zP(e,xu,n)))return null;switch(n){case"nil":return null;case"true":return!0;case"false":return!1;case"/":return dA;default:var o=uP(n);return null!=o?Me.b(o.W(null,0),o.W(null,1)).O(null,XP(e,r,t)):SO(e,xu,n)}}function ZP(e){var n=e.xa(null);if(mO(n))return eP(e);var t=uP(n=zP(e,FJ,n));if(null!=t){var r=t.W(null,0);return t=t.W(null,1),":"===n.charAt(0)?null!=r?p(r=x.b(null,Me.a(r.substring(1))))?Kg.b(q.a(r),t):SO(e,FJ,[":",q.a(n)].join("")):p(r=null)?Kg.b(q.a(r),t.substring(1)):LO(e,G(["Invalid token: :",n])):Kg.b(r,t)}return SO(e,FJ,[":",q.a(n)].join(""))}function $P(e){return function(n,t,r,o){return new Df(null,e,new Df(null,aQ?aQ(n,!0,null,r,o):QP.call(null,n,!0,null,r,o),null,1,null),2,null)}}function bQ(e,n,t,r){var o=JP(e);n=J(o,0,null),o=J(o,1,null);var i=oO(aQ?aQ(e,!0,null,t,r):QP.call(null,e,!0,null,t,r));return M(i)||fP(e,i),null!=(t=aQ?aQ(e,!0,null,t,r):QP.call(null,e,!0,null,t,r))&&(131072&t.h||h===t.xd)?(e=p(p(n)?$f(t):n)?K.g(i,en,n,G([ux,o])):i,null!=t&&(262144&t.h||h===t.He)?Kf(t,wk.g(G([Lf(t),e]))):t.H=e):gP(e,t)}function cQ(e,t,r,o){var i=JP(e);t=J(i,0,null),i=p(i=J(i,1,null))?i-1|0:null,o=Fk(r=OP(yA,"}",e,r,o));var l=KP(e),a=J(l,0,null);return l=J(l,1,null),A.b(F(r),F(o))||LO(e,G([mP(e,yA,r)])),Kf(o,p(t)?wk.g(G([function(){var t=yO(e);return p(t)?new n(null,1,[OD,t],null):null}(),new n(null,4,[en,t,ux,i,fz,a,ho,l],null)])):null)}function dQ(e,n,t,r){return aQ?aQ(e,!0,null,t,r):QP.call(null,e,!0,null,t,r),e}function eQ(e,n,t,r){return n=aQ?aQ(e,!0,null,t,r):QP.call(null,e,!0,null,t,r),A.b(iy,n)?Number.NaN:A.b(QC,n)?Number.NEGATIVE_INFINITY:A.b(Rw,n)?Number.POSITIVE_INFINITY:LO(e,G([["Invalid token: ##",q.a(n)].join("")]))}var fQ=new Bk(null,new n(null,2,[ks,null,Ep,null],null),null);function gQ(e,n,t,r){var o=hQ;hQ=!0;try{var i=PP?PP(n,!1,LP,")",t,r):QP.call(null,n,!1,LP,")",t,r);return i===LP&&nP(n,0>e&&e),i===MP?MP:null}finally{hQ=o}}var iQ={};function jQ(e,n,t,r){var o=BO(e)?wO(e):-1;e:for(var i=iQ,l=null;;)if(i===iQ){i=o,l=e;var a=t,u=r,s=PP?PP(l,!1,LP,")",a,u):QP.call(null,l,!1,LP,")",a,u);if(s===LP&&nP(l,0>i&&i),A.b(s,MP))i=MP;else{var c=l,d=s;p(x.b(fQ,d))&&LO(c,G(["Feature name ",d," is reserved"])),c=l,d=a,(s instanceof z?A.b(em,s)||N(x.b(d,it),s):LO(c,G(["Feature should be a keyword: ",s])))?((a=PP?PP(l,!1,LP,")",a,u):QP.call(null,l,!1,LP,")",a,u))===LP&&nP(l,0>i&&i),a===MP&&LO(l,G(0>i?["read-cond requires an even number of forms"]:["read-cond starting on line ",i," requires an even number of forms"])),i=a):i=p(i=gQ(i,l,a,u))?i:iQ}if(i===MP){t=MP;break e}l=null}else{if(l===MP){t=i;break e}l=gQ(o,e,t,r)}return t===MP?e:p(n)?null!=t&&(16777216&t.h||h===t.Ee)?(n=hg(t),qb(Mb,r,0,0).apply(null,n),e):LO(e,G(["Spliced form list in read-cond-splicing must implement ISequential"])):t}function kQ(e,t,r,o){if(Tc(function(){if(p(r)){var e=Gx.a(r),t=new Bk(null,new n(null,2,[hB,null,jz,null],null),null);return t.a?t.a(e):t.call(null,e)}return r}()))throw im("Conditional read not allowed",new n(null,1,[U,Vx],null));var i=e.xa(null);if(!p(i))return cP(e);if(i=(t=A.b(i,"@"))?e.xa(null):i,t&&(p(NP)||LO(e,G(["cond-splice not in list"]))),!p(i=mO(i)?oP(e):i))return cP(e);if(kh.b(i,"("))throw im("read-cond body must be a list",new n(null,1,[U,Vx],null));var l=hQ;hQ=function(){var e=hQ;return p(e)?e:A.b(hB,Gx.a(r))}();try{return p(hQ)?kO(RP(e,i,r,o),t):jQ(e,t,r,o)}finally{hQ=l}}var lQ=null;function mQ(e){return Me.a([-1===e?"rest":["p",q.a(e)].join(""),"__",q.a(Rh.b(pO,$e)),"#"].join(""))}function nQ(e,t,r,o){if(p(lQ))throw im("Nested #()s are not allowed",new n(null,1,[U,oB],null));t=lQ,lQ=sk();try{vO(e,"(");var i=aQ?aQ(e,!0,null,r,o):QP.call(null,e,!0,null,r,o),l=be(lQ),a=l?function(){var e=Dd(C(l)),n=function(){for(var n=1,t=je(I);;){if(n>e)return le(t);var r=n+1;t=Yg.b(t,function(){var e=x.b(lQ,n);return p(e)?e:mQ(n)}()),n=r}}();return p(lQ.call(null,-1))?Cf.g(n,nm,G([lQ.call(null,-1)])):n}():I;return new Df(null,Cm,new Df(null,a,new Df(null,i,null,1,null),2,null),3,null)}finally{lQ=t}}function oQ(e){if(p(lQ)){var t=lQ.call(null,e);return p(t)||(t=mQ(e),lQ=K.c(lQ,e,t)),t}throw im("Arg literal not in #()",new n(null,1,[U,oB],null))}function pQ(e,t,r,o){if(null==lQ)return YP(e,t);if(mO(t=e.Dc(null))||xP(t)||null==t)return oQ(1);if(A.b(t,"&"))return e.xa(null),oQ(-1);if(bg(e=aQ?aQ(e,!0,null,r,o):QP.call(null,e,!0,null,r,o)))return oQ(e);throw im("Arg literal must be %, %& or %integer",new n(null,1,[U,oB],null))}var qQ=null;function rQ(e,n,t,r){return p(n=e.Dc(null))?A.b("@",n)?(n=$P(RD),e.xa(null),e=n(e,"@",t,r)):e=$P(Zu)(e,"~",t,r):e=null,e}function sQ(e){return $f(e)&&A.b(C(e),RD)}function tQ(e){return $f(e)&&A.b(C(e),Zu)}function uQ(e){e=B(e);for(var n=je(I);;){if(!e)return B(le(n));var t=C(e);e=D(e),n=Yg.b(Yg.b(n,Dd(t)),Ed(t))}}function vQ(e){if(Tc(qQ))throw im("Gensym literal not in syntax-quote",new n(null,1,[U,oB],null));var t=x.b(qQ,e);return p(t)||(t=Me.a([Bg(Lg(e),0,Lg(e).length-1),"__",q.a(Rh.b(pO,$e)),"__auto__"].join("")),qQ=K.c(qQ,e,t)),t}function wQ(e,n){return null!=e&&(262144&e.h||h===e.He)&&B(Hf.g(Lf(e),en,G([ux,fz,ho,OD,lz])))&&(e=Lf(e),e=xQ.a?xQ.a(e):xQ.call(null,e),n=new Df(null,zx,new Df(null,n,new Df(null,e,null,1,null),2,null),3,null)),n}function yQ(e,n){e:{n=B(n);for(var t=je(I);;){if(!n){n=B(le(t));break e}var r=C(n);t=Yg.b(t,tQ(r)?new Df(null,IG,new Df(null,zf(r),null,1,null),2,null):sQ(r)?zf(r):new Df(null,IG,new Df(null,xQ.a?xQ.a(r):xQ.call(null,r),null,1,null),2,null)),n=D(n)}}return n=new Df(null,sx,new Df(null,vf(gt,n),null,1,null),2,null),p(e)?new Df(null,uG,new Df(null,e,new Df(null,n,null,1,null),2,null),3,null):n}function zQ(e){throw im("resolve-symbol is not implemented",new n(null,1,[mJ,e],null))}function xQ(e){if(mm(e))var t=new Df(null,Hm,new Df(null,e,null,1,null),2,null);else if(e instanceof w)t=new Df(null,Hm,new Df(null,p(!!Tc(Ig(e))&&dc(Lg(e),"#"))?vQ(e):function(){var n=q.a(e);return p(dc(n,"."))?(n=Me.a(n.substring(0,n.length-1)),Me.a([q.a(zQ.call(null,n)),"."].join(""))):zQ.call(null,e)}(),null,1,null),2,null);else if(tQ(e))t=zf(e);else{if(sQ(e))throw im("unquote-splice not in list",new n(null,1,[U,oB],null));if(Qf(e))if(null!=e&&(67108864&e.h||h===e.kg))t=e;else if(M(e))t=yQ(16<=F(e)?uy:lE,uQ(e));else if(Vf(e))t=new Df(null,ft,new Df(null,yQ(null,e),null,1,null),2,null);else if(Rf(e))t=yQ(oI,e);else{if(!$f(e)&&!Cg(e))throw im("Unknown Collection type",new n(null,1,[U,jy],null));t=function(){var n=B(e);return n?yQ(null,n):O(bC)}()}else t=e instanceof z||"number"===typeof e||"string"===typeof e||null==e||e instanceof Boolean||!0===e||!1===e||e instanceof RegExp?e:new Df(null,Hm,new Df(null,e,null,1,null),2,null)}return wQ(e,t)}function AQ(e,n,t,r){n=qQ,qQ=S;try{return xQ(aQ?aQ(e,!0,null,t,r):QP.call(null,e,!0,null,t,r))}finally{qQ=n}}function BQ(e,n,r,o){var i=zP(e,VE,tO(e));return n=A.b(i,":")?null.name:A.b(":",C(i))?function(){var e=null==i?null:i.substring(1);if(null==(e=null==(e=null==(e=null==e?null:uP(e))?null:rO(e))?null:Me.a(e)))e=null;else{var n=x.b(null,e);if(p(n))e=n;else{if(null==Sm&&(Sm=Oh(S)),null!=(n=x.b(t(Sm),e)))e=n;else{n=q.a(e);for(var r=q.a(n),o=new zc,l=0;l<r.length;){var a=r.charAt(l),u=Vb(bd,a);null!=u?o.append(u):o.append(a),l+=1}r=".."===(r=o.toString())?"_DOT__DOT_":p(Om(r))?[r,"$"].join(""):r;e:for(n=(n instanceof w?Me.a(r):r).split("."),r=cb;;){if(null==r){n=null;break e}if(null==n){n=r;break e}r=Vb(r,C(n)),n=D(n)}null==n?e=null:(n=new Rm(e),Rh.A(Sm,K,e,n),e=n)}e=p(e)?Me.a(e.name):null}}return e}():function(){var e=null==i?null:uP(i);return null==e?null:rO(e)}(),p(n)?"{"===oP(e)?(!Fh(F(r=OP(VE,"}",e,r,o)))&&PO(e,null,null,r),o=qO(q.a(n),Sk(2,r)),r=Sk(2,Re(r)),A.b(F(Fk(o)),F(o))||mP(e,VE,o),Ik(o,r)):hP(e,i):iP(e,i)}function HP(e){switch(e){case'"':return WP;case":":return ZP;case";":return vP;case"'":return $P(Hm);case"@":return $P(Xq);case"^":return bQ;case"`":return AQ;case"~":return rQ;case"(":return RP;case")":return DP;case"[":return SP;case"]":return DP;case"{":return TP;case"}":return DP;case"\\":return IP;case"%":return pQ;case"#":return AP;default:return null}}function BP(e){switch(e){case"^":return bQ;case"'":return $P(Gm);case"(":return nQ;case"{":return cQ;case"<":return wP("Unreadable form");case"=":return wP("read-eval not supported");case'"':return EP;case"!":return vP;case"_":return dQ;case"?":return kQ;case":":return BQ;case"#":return eQ;default:return null}}function CP(e,n,t,r){if((n=aQ?aQ(e,!0,null,t,r):QP.call(null,e,!0,null,t,r))instanceof w||jP(e,n),p(hQ))return new Lm(n,e=aQ?aQ(e,!0,null,t,r):QP.call(null,e,!0,null,t,r));var o=S.call(null,n);return o=p(o)?o:S.a?S.a(n):S.call(null,n),p(o)?(n=aQ?aQ(e,!0,null,t,r):QP.call(null,e,!0,null,t,r),o.a?o.a(n):o.call(null,n)):p(CQ)?(o=CQ,e=aQ?aQ(e,!0,null,t,r):QP.call(null,e,!0,null,t,r),o.b?o.b(n,e):o.call(null,n,e)):kP(e,n)}var CQ=null,hQ=!1;function QP(e){switch(arguments.length){case 5:return aQ(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return PP(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}}function aQ(e,n,t,r,o){return PP(e,n,t,null,r,o)}function PP(e,t,r,o,i,l){try{e:for(;;){if(0!=l.length){var a=l[0];Array.prototype.splice.call(l,0,1),s=a;break e}var u=e.xa(null);if(!mO(u)){if(null==u){var s=t?nP(e,null):r;break e}if(u===o){s=MP;break e}if(nO(u)||("+"===u||"-"===u)&&nO(e.Dc(null))){s=UP(e,u);break e}var c=HP(u);if(null==c){s=YP(e,u);break e}var d=c.A?c.A(e,u,i,l):c.call(null,e,u,i,l);if(d!==e){s=d;break e}}}return s}catch(f){if(f instanceof Error){if((t=f)instanceof hm){if(r=km(t),A.b(fr,U.a(r)))throw t;throw jm(t.message,wk.g(G([new n(null,1,[U,fr],null),r,BO(e)?new n(null,3,[en,e.Hd(null),ux,e.Gd(null),OD,e.Me(null)],null):null])),t)}throw jm(t.message,wk.g(G([new n(null,1,[U,fr],null),BO(e)?new n(null,3,[en,e.Hd(null),ux,e.Gd(null),OD,e.Me(null)],null):null])),t)}throw f}}var DQ=em;function EQ(e,n){var t=DQ;if(A.b(!0,t))return AM(e);if(A.b(!1,t))return zM(e);if(A.b(em,t))return p(n)?AM(e):zM(e);throw Error(["No matching clause: ",q.a(t)].join(""))}var FQ=Zk(/'[^'\\]*(?:\\.[^'\\]*)*'/),GQ=Zk(/#'[^'\\]*(?:\\.[^'\\]*)*'/),HQ=Zk(/"[^"\\]*(?:\\.[^"\\]*)*"/),IQ=Zk(/#"[^"\\]*(?:\\.[^"\\]*)*"/),JQ=/(?:(?!(?:\(\*|\*\)))[\s\S])*/,KQ=Zk("[,\\s]*"),LQ=GM(DM(sA)),MQ=qM(DC,Xj([tC,oF,AJ,EA,xC,qA,kA,Ay,xt,Ux,XC,xn,MF,ls,gI,$u,Et,zn,Nv,eq,zA,sA,CI,jJ],[yM.g(G([GM(zM("!")),LQ,DM(zn)])),tM(yM.g(G([LQ,wM.g(G([DM(zn),DM(qA),DM(tC)])),LQ]))),yM.g(G([DM(oF),tM(yM.g(G([LQ,GM(zM("/")),LQ,DM(oF)])))])),wM.g(G([zM(":"),zM(":="),zM("::="),zM("=")])),yM.g(G([DM(oF),uM(yM.g(G([LQ,GM(zM("|")),LQ,DM(oF)])))])),yM.g(G([GM(zM("&")),LQ,DM(zn)])),yM.g(G([wM.g(G([DM(Ay),DM(xt)])),LQ,GM(DM(EA)),LQ,DM($u),GM(wM.g(G([DM(sA),yM.g(G([DM(sA),wM.g(G([zM(";"),zM(".")])),DM(sA)]))])))])),yM.g(G([FM(DM(zA)),CM(Zk("[^, \\r\\t\\n<>(){}\\[\\]+*?:=|'\"#&!;./]+"))])),yM.g(G([GM(zM("<")),LQ,DM(Ay),LQ,GM(zM(">"))])),yM.g(G([CM(JQ),uM(yM.g(G([DM(Nv),CM(JQ)])))])),wM.g(G([yM.g(G([GM(zM("{")),LQ,DM($u),LQ,GM(zM("}"))])),yM.g(G([DM(zn),LQ,GM(zM("*"))]))])),wM.g(G([CM(FQ),CM(HQ)])),lM(yM.g(G([LQ,tM(DM(kA))]))),yM.g(G([GM(zM("<")),LQ,DM($u),LQ,GM(zM(">"))])),yM.g(G([GM(zM("(")),LQ,DM($u),LQ,GM(zM(")"))])),lM(wM.g(G([DM(xC),DM(AJ)]))),wM.g(G([CM(GQ),CM(IQ)])),lM(wM.g(G([DM(Ay),DM(xn),DM(Et),DM(jJ),DM(XC),DM(eq),DM(gI),DM(ls),DM(zA)]))),yM.g(G([zM("(*"),DM(Ux),zM("*)")])),yM.g(G([DM(zn),LQ,GM(zM("+"))])),wM.g(G([zM("Epsilon"),zM("epsilon"),zM("EPSILON"),zM("eps"),zM("\u03b5")])),yM.g(G([CM(KQ),uM(yM.g(G([DM(Nv),CM(KQ)])))])),lM(wM.g(G([DM(MF),DM($u)]))),wM.g(G([yM.g(G([GM(zM("[")),LQ,DM($u),LQ,GM(zM("]"))])),yM.g(G([DM(zn),LQ,GM(zM("?"))]))]))]));function NQ(e){for(var n=B(e),t=I;;){var r=C(n);if(!p(r))return fh(q,t);switch(r){case"\\":var o=zf(n);if(p(o)){A.b(o,"'")?(n=Yh(2,n),t=Cf.b(t,o)):(n=Yh(2,n),t=Cf.g(t,r,G([o])));continue}return hM(G(["Encountered backslash character at end of string: ",e]));case'"':n=D(n),t=Cf.g(t,"\\",G(['"']));continue;default:n=D(n),t=Cf.b(t,r)}}}var $W=t(new Ne((function(){return WP}),It,Xj([Jn,By,yw,OD,ho,ux,en,fz,AE,Dv,jF],[!0,FB,as,"cljs/tools/reader.cljs",20,1,305,305,O(new Q(null,4,5,R,[Kf(kx,new n(null,1,[X,Zm],null)),Gp,nx,qF],null)),null,p(WP)?WP.ld:null])));function PQ(e){return e=NQ(e=Bg(e,1,F(e)-1)),e=CO(e=[q.a(e),'"'].join("")),$W.A?$W.A(e,null,null,null):$W.call(null,e,null,null,null)}function QQ(e){return Zk(e=NQ(e=Bg(e,2,F(e)-1)))}var RQ=function e(n){for(;;){var t=C.a?C.a(n):C.call(null,n);switch(t=t instanceof z?t.da:null){case"rule":var r=J(t=D.a?D.a(n):D.call(null,n),0,null);return t=J(t,1,null),A.b(C.a?C.a(r):C.call(null,r),xt)?new Q(null,2,5,R,[Kg.a(function(){var e=Af.a?Af.a(r):Af.call(null,r);return Af.a?Af.a(e):Af.call(null,e)}()),lM(e.a?e.a(t):e.call(null,t))],null):new Q(null,2,5,R,[Kg.a(Af.a?Af.a(r):Af.call(null,r)),e.a?e.a(t):e.call(null,t)],null);case"nt":return DM(Kg.a(Af.a?Af.a(n):Af.call(null,n)));case"alt":return fh(wM,Wh.b(e,D.a?D.a(n):D.call(null,n)));case"ord":return fh(xM,Wh.b(e,D.a?D.a(n):D.call(null,n)));case"paren":n=Af.a?Af.a(n):Af.call(null,n);continue;case"hide":return GM(function(){var t=Af.a?Af.a(n):Af.call(null,n);return e.a?e.a(t):e.call(null,t)}());case"cat":return fh(yM,Wh.b(e,D.a?D.a(n):D.call(null,n)));case"string":return EQ(PQ(Af.a?Af.a(n):Af.call(null,n)),!1);case"regexp":return CM(QQ(Af.a?Af.a(n):Af.call(null,n)));case"opt":return sM(function(){var t=Af.a?Af.a(n):Af.call(null,n);return e.a?e.a(t):e.call(null,t)}());case"star":return uM(function(){var t=Af.a?Af.a(n):Af.call(null,n);return e.a?e.a(t):e.call(null,t)}());case"plus":return tM(function(){var t=Af.a?Af.a(n):Af.call(null,n);return e.a?e.a(t):e.call(null,t)}());case"look":return EM(function(){var t=Af.a?Af.a(n):Af.call(null,n);return e.a?e.a(t):e.call(null,t)}());case"neg":return FM(function(){var t=Af.a?Af.a(n):Af.call(null,n);return e.a?e.a(t):e.call(null,t)}());case"epsilon":return rM;default:throw Error(["No matching clause: ",q.a(t)].join(""))}}},SQ=function e(n){for(;;){var t=X.a(n);switch(t=t instanceof z?t.da:null){case"nt":return new Q(null,1,5,R,[FJ.a(n)],null);case"string":case"string-ci":case"char":case"regexp":case"epsilon":return I;case"opt":case"plus":case"star":case"look":case"neg":case"rep":n=wv.a(n);continue;case"alt":case"cat":return ei(e,G([An.a(n)]));case"ord":return ei(e,G([new Q(null,2,5,R,[Xn.a(n),Vn.a(n)],null)]));default:throw Error(["No matching clause: ",q.a(t)].join(""))}}};function TQ(e){for(var n=Fk(mj(e)),t=B(Gk(ei(SQ,G([nj(e)])))),r=null,o=0,i=0;;)if(i<o){var l=r.W(null,i);p(n.a?n.a(l):n.call(null,l))||hM(G([Ag(q.a(l),1)," occurs on the right-hand side of your grammar, but not on the left"])),i+=1}else{if(!(t=B(t)))break;Wf(r=t)?(t=re(r),i=se(r),r=t,o=F(t),t=i):(t=C(r),p(n.a?n.a(t):n.call(null,t))||hM(G([Ag(q.a(t),1)," occurs on the right-hand side of your grammar, but not on the left"])),t=D(r),r=null,o=0),i=0}return e}function UQ(e,t){var r=aO(MQ,MF,e,!1);if(r instanceof tN)return hM(G(["Error parsing grammar specification:\n",function(){var e=new zc,n=Fc,t=Ec;Fc=!0,Ec=function(n){return e.append(n)};try{sl(G([r]))}finally{Ec=t,Fc=n}return q.a(e)}()]));var o=C(C(e=Wh.b(RQ,r)));return new n(null,3,[wo,TQ(qM(t,ji.b(S,e))),iz,o,SH,t],null)}function VQ(e,t,r){return null==r?iM(G(["When you build a parser from a map of parser combinators, you must provide a start production using the :start keyword argument."])):new n(null,3,[wo,TQ(qM(t,e)),iz,r,SH,t],null)}function WQ(e,n){var t=Array.prototype.slice.call(arguments),r=t.shift();if("undefined"==typeof r)throw Error("[goog.string.format] Template required");return r.replace(/%([0\- \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,(function(e,n,r,o,i,l,a,u){if("%"==l)return"%";var s=t.shift();if("undefined"==typeof s)throw Error("[goog.string.format] Not enough arguments");return arguments[0]=s,WQ.Fc[l].apply(null,arguments)}))}WQ.Fc={},WQ.Fc.s=function(e,n,t){return isNaN(t)||""==t||e.length>=Number(t)?e:e=-1<n.indexOf("-",0)?e+yc(" ",Number(t)-e.length):yc(" ",Number(t)-e.length)+e},WQ.Fc.f=function(e,n,t,r,o){r=e.toString(),isNaN(o)||""==o||(r=parseFloat(e).toFixed(o));var i=0>Number(e)?"-":0<=n.indexOf("+")?"+":0<=n.indexOf(" ")?" ":"";return 0<=Number(e)&&(r=i+r),isNaN(t)||r.length>=Number(t)||(r=isNaN(o)?Math.abs(Number(e)).toString():Math.abs(Number(e)).toFixed(o),e=Number(t)-r.length-i.length,0<=n.indexOf("-",0)?r=i+r+yc(" ",e):(n=0<=n.indexOf("0",0)?"0":" ",r=i+yc(n,e)+r)),r},WQ.Fc.d=function(e,n,t,r,o,i,l,a){return WQ.Fc.f(parseInt(e,10),n,t,r,0,i,l,a)},WQ.Fc.i=WQ.Fc.d,WQ.Fc.u=WQ.Fc.d;var XQ=Xj([OH,Iq,Sr,ME,zw,Ty,lG,zJ,Nw,nI,XG,Ar,BJ,jn,pv,VG],[zM("\r\n"),zM("\t"),wM.g(G([wM.g(G([zM(" "),zM("\t")])),uM(yM.g(G([zM("\r\n"),wM.g(G([zM(" "),zM("\t")]))])))])),zM("\n"),CM("[\\u0021-\\u007E]"),CM("[0-9]"),zM(" "),CM("[0-9a-fA-F]"),CM("[\\u0000-\\u001F|\\u007F]"),zM('"'),wM.g(G([zM(" "),zM("\t")])),zM("\r"),CM("[\\u0000-\\u00FF]"),CM("[a-zA-Z]"),CM("[\\u0001-\\u007F]"),CM("[01]")]),YQ=Xj([tC,KG,Jw,$x,rH,kw,qA,aB,kA,YE,Ty,LE,Cv,wz,ls,Vy,zJ,pp,Rx,Ct,nD,Ur,Yt,Bz,Et,hC,Vv,vB,sA,fn,AB,ID,CI],[new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,xn,xn,"!"],null),new Df(null,new n(null,2,[X,Ay,FJ,sA],null),null,1,null),2,null),ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,rH],null),null,1,null),2,null),Hu,new n(null,2,[ny,DC,NI,tC],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,xn,xn,"("],null),new Df(null,new n(null,2,[X,Ay,FJ,sA],null),null,1,null),2,null),ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,Bz],null),new Df(null,new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,Ay,FJ,sA],null),new Df(null,new n(null,2,[X,xn,xn,")"],null),null,1,null),2,null),ls,!0],null),null,1,null),2,null),3,null),Hu,new n(null,1,[ny,Pt],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,xn,xn,"<"],null),new Df(null,new n(null,2,[X,Ay,FJ,sA],null),null,1,null),2,null),ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,Vv],null),new Df(null,new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,Ay,FJ,sA],null),new Df(null,new n(null,2,[X,xn,xn,">"],null),null,1,null),2,null),ls,!0],null),null,1,null),2,null),3,null),Hu,new n(null,1,[ny,Pt],null)],null),wk.g(G([CM("\\s+(?:;.*?\\u000D?\\u000A\\s*)*"),new n(null,1,[Hu,new n(null,2,[ny,DC,NI,$x],null)],null)])),new n(null,3,[X,xC,An,new Df(null,new n(null,2,[X,Ay,FJ,YE],null),new Df(null,new n(null,2,[X,Ay,FJ,KG],null),new Df(null,new n(null,2,[X,Ay,FJ,ls],null),new Df(null,new n(null,2,[X,Ay,FJ,pp],null),new Df(null,new n(null,2,[X,Ay,FJ,Cv],null),new Df(null,new n(null,2,[X,Ay,FJ,wz],null),new Df(null,new n(null,2,[X,Ay,FJ,qA],null),new Df(null,new n(null,2,[X,Ay,FJ,tC],null),new Df(null,new n(null,2,[X,Ay,FJ,Et],null),null,1,null),2,null),3,null),4,null),5,null),6,null),7,null),8,null),9,null),Hu,new n(null,1,[ny,Pt],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,Ay,FJ,Jw],null),new Df(null,new n(null,3,[X,Ay,FJ,Vy,ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,Bz],null),new Df(null,new n(null,3,[X,Ay,FJ,sA,ls,!0],null),null,1,null),2,null),3,null),4,null),Hu,new n(null,2,[ny,DC,NI,kw],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,xn,xn,"&"],null),new Df(null,new n(null,2,[X,Ay,FJ,sA],null),null,1,null),2,null),ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,rH],null),null,1,null),2,null),Hu,new n(null,2,[ny,DC,NI,qA],null)],null),new n(null,3,[X,eq,wv,new n(null,2,[X,xC,An,new Df(null,new n(null,2,[X,xn,xn,"0"],null),new Df(null,new n(null,2,[X,xn,xn,"1"],null),null,1,null),2,null)],null),Hu,new n(null,2,[ny,DC,NI,aB],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,Ay,FJ,Vv],null),new Df(null,new n(null,3,[X,Ay,FJ,Vy,ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,Bz],null),new Df(null,new n(null,3,[X,Ay,FJ,sA,ls,!0],null),null,1,null),2,null),3,null),4,null),Hu,new n(null,2,[ny,DC,NI,kA],null)],null),new n(null,3,[X,Ay,FJ,Ct,Hu,new n(null,2,[ny,DC,NI,YE],null)],null),wk.g(G([CM("[0-9]"),new n(null,1,[Hu,new n(null,1,[ny,Pt],null)],null)])),new n(null,3,[X,eq,wv,new n(null,2,[X,Ay,FJ,Ty],null),Hu,new n(null,2,[ny,DC,NI,LE],null)],null),new n(null,3,[X,xC,An,new Df(null,new n(null,2,[X,oF,An,new Df(null,new n(null,3,[X,xn,xn,'"',ls,!0],null),new Df(null,new n(null,2,[X,XC,wv,wk.g(G([CM("[\\u0020-\\u0021\\u0023-\\u007E]"),S]))],null),new Df(null,new n(null,3,[X,xn,xn,'"',ls,!0],null),null,1,null),2,null),3,null)],null),new Df(null,new n(null,2,[X,oF,An,new Df(null,new n(null,3,[X,xn,xn,"'",ls,!0],null),new Df(null,new n(null,2,[X,XC,wv,wk.g(G([CM("[\\u0020-\\u0026(-~]"),S]))],null),new Df(null,new n(null,3,[X,xn,xn,"'",ls,!0],null),null,1,null),2,null),3,null)],null),null,1,null),2,null),Hu,new n(null,2,[ny,DC,NI,Cv],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,xn,xn,"%",ls,!0],null),new Df(null,new n(null,2,[X,xC,An,new Df(null,new n(null,2,[X,Ay,FJ,nD],null),new Df(null,new n(null,2,[X,Ay,FJ,Ur],null),new Df(null,new n(null,2,[X,Ay,FJ,AB],null),null,1,null),2,null),3,null)],null),null,1,null),2,null),Hu,new n(null,1,[ny,Pt],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,xn,xn,"<"],null),new Df(null,new n(null,2,[X,Ay,FJ,sA],null),null,1,null),2,null),ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,Bz],null),new Df(null,new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,Ay,FJ,sA],null),new Df(null,new n(null,2,[X,xn,xn,">"],null),null,1,null),2,null),ls,!0],null),null,1,null),2,null),3,null),Hu,new n(null,2,[ny,DC,NI,ls],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,Ay,FJ,sA,ls,!0],null),new Df(null,new n(null,2,[X,xC,An,new Df(null,new n(null,2,[X,xn,xn,"="],null),new Df(null,new n(null,2,[X,xn,xn,"=/"],null),null,1,null),2,null)],null),new Df(null,new n(null,3,[X,Ay,FJ,sA,ls,!0],null),null,1,null),2,null),3,null),Hu,new n(null,2,[ny,DC,NI,Vy],null)],null),wk.g(G([CM("[0-9a-fA-F]"),new n(null,1,[Hu,new n(null,1,[ny,Pt],null)],null)])),new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,xn,xn,"["],null),new Df(null,new n(null,2,[X,Ay,FJ,sA],null),null,1,null),2,null),ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,Bz],null),new Df(null,new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,Ay,FJ,sA],null),new Df(null,new n(null,2,[X,xn,xn,"]"],null),null,1,null),2,null),ls,!0],null),null,1,null),2,null),3,null),Hu,new n(null,2,[ny,DC,NI,pp],null)],null),new n(null,3,[X,eq,wv,new n(null,2,[X,Ay,FJ,zJ],null),Hu,new n(null,2,[ny,DC,NI,Rx],null)],null),wk.g(G([CM("[a-zA-Z][-a-zA-Z0-9]*"),new n(null,1,[Hu,new n(null,1,[ny,Pt],null)],null)])),new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,xn,xn,"b",ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,aB],null),new Df(null,new n(null,2,[X,jJ,wv,new n(null,2,[X,xC,An,new Df(null,new n(null,2,[X,eq,wv,new n(null,2,[X,oF,An,new Df(null,new n(null,3,[X,xn,xn,".",ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,aB],null),null,1,null),2,null)],null)],null),new Df(null,new n(null,2,[X,oF,An,new Df(null,new n(null,2,[X,xn,xn,"-"],null),new Df(null,new n(null,2,[X,Ay,FJ,aB],null),null,1,null),2,null)],null),null,1,null),2,null)],null)],null),null,1,null),2,null),3,null),Hu,new n(null,2,[ny,DC,NI,nD],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,xn,xn,"d",ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,ID],null),new Df(null,new n(null,2,[X,jJ,wv,new n(null,2,[X,xC,An,new Df(null,new n(null,2,[X,eq,wv,new n(null,2,[X,oF,An,new Df(null,new n(null,3,[X,xn,xn,".",ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,ID],null),null,1,null),2,null)],null)],null),new Df(null,new n(null,2,[X,oF,An,new Df(null,new n(null,2,[X,xn,xn,"-"],null),new Df(null,new n(null,2,[X,Ay,FJ,ID],null),null,1,null),2,null)],null),null,1,null),2,null)],null)],null),null,1,null),2,null),3,null),Hu,new n(null,2,[ny,DC,NI,Ur],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,Ay,FJ,hC],null),new Df(null,new n(null,2,[X,XC,wv,new n(null,2,[X,oF,An,new Df(null,new n(null,3,[X,Ay,FJ,$x,ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,hC],null),null,1,null),2,null)],null)],null),null,1,null),2,null),Hu,new n(null,2,[ny,DC,NI,Yt],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,Ay,FJ,Yt],null),new Df(null,new n(null,2,[X,XC,wv,new n(null,2,[X,oF,An,new Df(null,new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,Ay,FJ,sA],null),new Df(null,new n(null,2,[X,xn,xn,"/"],null),new Df(null,new n(null,2,[X,Ay,FJ,sA],null),null,1,null),2,null),3,null),ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,Yt],null),null,1,null),2,null)],null)],null),null,1,null),2,null),Hu,new n(null,2,[ny,DC,NI,Bz],null)],null),new n(null,3,[X,xC,An,new Df(null,wk.g(G([CM("#'[^'\\\\]*(?:\\\\.[^'\\\\]*)*'"),S])),new Df(null,wk.g(G([CM('#\\"[^\\"\\\\]*(?:\\\\.[^\\"\\\\]*)*\\"'),S])),null,1,null),2,null),Hu,new n(null,2,[ny,DC,NI,Et],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,2,[X,jJ,wv,new n(null,2,[X,Ay,FJ,fn],null)],null),new Df(null,new n(null,3,[X,Ay,FJ,sA,ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,rH],null),null,1,null),2,null),3,null),Hu,new n(null,2,[ny,DC,NI,hC],null)],null),new n(null,3,[X,Ay,FJ,Ct,Hu,new n(null,2,[ny,DC,NI,Vv],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,Ay,FJ,sA,ls,!0],null),new Df(null,new n(null,2,[X,eq,wv,new n(null,2,[X,xC,An,new Df(null,new n(null,2,[X,Ay,FJ,kA],null),new Df(null,new n(null,2,[X,Ay,FJ,kw],null),null,1,null),2,null)],null)],null),null,1,null),2,null),Hu,new n(null,1,[ny,Pt],null)],null),wk.g(G([CM("\\s*(?:;.*?(?:\\u000D?\\u000A\\s*|$))*"),new n(null,1,[Hu,new n(null,2,[ny,DC,NI,sA],null)],null)])),new n(null,3,[X,xC,An,new Df(null,new n(null,2,[X,Ay,FJ,LE],null),new Df(null,new n(null,2,[X,oF,An,new Df(null,new n(null,2,[X,jJ,wv,new n(null,2,[X,Ay,FJ,LE],null)],null),new Df(null,new n(null,2,[X,xn,xn,"*"],null),new Df(null,new n(null,2,[X,jJ,wv,new n(null,2,[X,Ay,FJ,LE],null)],null),null,1,null),2,null),3,null)],null),null,1,null),2,null),Hu,new n(null,2,[ny,DC,NI,fn],null)],null),new n(null,3,[X,oF,An,new Df(null,new n(null,3,[X,xn,xn,"x",ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,Rx],null),new Df(null,new n(null,2,[X,jJ,wv,new n(null,2,[X,xC,An,new Df(null,new n(null,2,[X,eq,wv,new n(null,2,[X,oF,An,new Df(null,new n(null,3,[X,xn,xn,".",ls,!0],null),new Df(null,new n(null,2,[X,Ay,FJ,Rx],null),null,1,null),2,null)],null)],null),new Df(null,new n(null,2,[X,oF,An,new Df(null,new n(null,2,[X,xn,xn,"-"],null),new Df(null,new n(null,2,[X,Ay,FJ,Rx],null),null,1,null),2,null)],null),null,1,null),2,null)],null)],null),null,1,null),2,null),3,null),Hu,new n(null,2,[ny,DC,NI,AB],null)],null),new n(null,3,[X,eq,wv,new n(null,2,[X,Ay,FJ,Ty],null),Hu,new n(null,2,[ny,DC,NI,ID],null)],null),new n(null,3,[X,xC,An,new Df(null,new n(null,2,[X,Ay,FJ,vB],null),new Df(null,new n(null,2,[X,Ay,FJ,Bz],null),null,1,null),2,null),Hu,new n(null,1,[ny,Pt],null)],null)]),ZQ=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};function $Q(e,n){return ji.b(S,function n(t){return new Mg(null,(function(){for(var r=t;;){if(!(r=B(r)))return null;if(Wf(r)){var o=re(r),i=F(o),l=Qg(i);e:for(var a=0;;){if(!(a<i)){o=!0;break e}var u=qd(o,a);N(e,u)&&(u=new Q(null,2,5,R,[u,e.a?e.a(u):e.call(null,u)],null),l.add(u)),a+=1}return Sg(Ug(l),o?n(se(r)):null)}if(l=C(r),N(e,l))return vf(new Q(null,2,5,R,[l,e.a?e.a(l):e.call(null,l)],null),n(Re(r)));r=Re(r)}}),null,null)}(n))}function aR(e){return wk.g(G([$Q(XQ,Gk(ei(SQ,G([nj(e)])))),e]))}function bR(e,n){var t=A.b(Hu.a(e),mM),r=A.b(Hu.a(n),mM);return t&&r?lM(wM.g(G([Hf.b(e,Hu),Hf.b(n,Hu)]))):t?lM(wM.g(G([Hf.b(e,Hu),n]))):r?lM(wM.g(G([e,Hf.b(n,Hu)]))):wM.g(G([e,n]))}ZQ.g=function(e){if(A.b("-",zf(e))){var n=J(e,0,null);return J(e,1,null),BM(n,J(e,2,null))}return fh(yM,function e(n){return new Mg(null,(function(){for(;;){var t=B(n);if(t){if(Wf(t)){var r=re(t),o=F(r),i=Qg(o);e:for(var l=0;;){if(!(l<o)){r=!0;break e}var a=qd(r,l);i.add(BM(a,a)),l+=1}return Sg(Ug(i),r?e(se(t)):null)}return vf(BM(i=C(t),i),e(Re(t)))}return null}}),null,null)}(e))},ZQ.F=0,ZQ.G=function(e){return this.g(B(e))};var cR=parseInt,dR=Xj([tC,kw,qA,aB,kA,YE,LE,Cv,ls,pp,Rx,nD,Ur,Yt,Bz,Et,hC,Vv,fn,AB,ID],[FM,function(e,n){return Gf([e,lM(n)])},EM,function(){function e(e){var t=null;if(0<arguments.length){t=0;for(var r=Array(arguments.length-0);t<r.length;)r[t]=arguments[t+0],++t;t=new Qe(r,0,null)}return n.call(this,t)}function n(e){return cR(fh(q,e),2)}return e.F=0,e.G=function(e){return n(e=B(e))},e.g=n,e}(),qk,function(){function e(e){var t=null;if(0<arguments.length){t=0;for(var r=Array(arguments.length-0);t<r.length;)r[t]=arguments[t+0],++t;t=new Qe(r,0,null)}return n.call(this,t)}function n(e){return p(!1)?DM(Kg.a(fh(q,e).toUpperCase())):DM(Kg.a(fh(q,e)))}return e.F=0,e.G=function(e){return n(e=B(e))},e.g=n,e}(),function(){function e(e){var t=null;if(0<arguments.length){t=0;for(var r=Array(arguments.length-0);t<r.length;)r[t]=arguments[t+0],++t;t=new Qe(r,0,null)}return n.call(this,t)}function n(e){return cR(fh(q,e))}return e.F=0,e.G=function(e){return n(e=B(e))},e.g=n,e}(),function(){function e(e){var t=null;if(0<arguments.length){t=0;for(var r=Array(arguments.length-0);t<r.length;)r[t]=arguments[t+0],++t;t=new Qe(r,0,null)}return n.call(this,t)}function n(e){return EQ(fh(q,e),!0)}return e.F=0,e.G=function(e){return n(e=B(e))},e.g=n,e}(),GM,sM,function(){function e(e){var t=null;if(0<arguments.length){t=0;for(var r=Array(arguments.length-0);t<r.length;)r[t]=arguments[t+0],++t;t=new Qe(r,0,null)}return n.call(this,t)}function n(e){return cR(fh(q,e),16)}return e.F=0,e.G=function(e){return n(e=B(e))},e.g=n,e}(),ZQ,ZQ,yM,wM,Ih.b(CM,QQ),function(){function e(e,n){return Pf(e)?uM(n):A.b(F(e),2)?vM(vn.a(e),cq.a(e),n):A.b(vn.a(e),1)?tM(n):A.b(cq.a(e),1)?sM(n):vM(function(){var n=vn.a(e);return p(n)?n:0}(),function(){var n=cq.a(e);return p(n)?n:1/0}(),n)}var n;return(n=function(n,t){switch(arguments.length){case 1:return n;case 2:return e.call(this,n,t)}throw Error("Invalid arity: "+arguments.length)}).a=function(e){return e},n.b=e,n}(),function(){function e(e){var t=null;if(0<arguments.length){t=0;for(var r=Array(arguments.length-0);t<r.length;)r[t]=arguments[t+0],++t;t=new Qe(r,0,null)}return n.call(this,t)}function n(e){return p(!1)?Kg.a(fh(q,e).toUpperCase()):Kg.a(fh(q,e))}return e.F=0,e.G=function(e){return n(e=B(e))},e.g=n,e}(),function(){function e(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(e){var t=F(e);switch(t){case 1:return A.b(C(e),"*")?S:new n(null,2,[vn,C(e),cq,C(e)],null);case 2:return A.b(C(e),"*")?new n(null,1,[cq,zf(e)],null):new n(null,1,[vn,C(e)],null);case 3:return new n(null,2,[vn,C(e),cq,pf(e,2)],null);default:throw Error(["No matching clause: ",q.a(t)].join(""))}}return e.F=0,e.G=function(e){return t(e=B(e))},e.g=t,e}(),ZQ,function(){function e(e){var t=null;if(0<arguments.length){t=0;for(var r=Array(arguments.length-0);t<r.length;)r[t]=arguments[t+0],++t;t=new Qe(r,0,null)}return n.call(this,t)}function n(e){return cR(fh(q,e))}return e.F=0,e.G=function(e){return n(e=B(e))},e.g=n,e}()]);function eR(e,t){var r=aO(YQ,vB,e,!1);if(r instanceof tN)return hM(G(["Error parsing grammar specification:\n",function(){var e=new zc,n=Fc,t=Ec;Fc=!0,Ec=function(n){return e.append(n)};try{sl(G([r]))}finally{Ec=t,Fc=n}return q.a(e)}()]));var o=eO(dR,r);return e=aR(gh(xk,bR,o)),o=C(C(C(o))),new n(null,3,[wo,TQ(qM(t,e)),iz,o,SH,t],null)}function fR(e){var n=Lf(e);return e=Yv.a(n),n=hp.a(n),p(p(e)?n:e)?new Q(null,2,5,R,[e,n],null):null}function gR(e){return Vf(e)&&A.b(F(e),1)||M(e)&&N(e,X)&&Pf(x.b(e,sE))||Pf(e)}var hR=new tN(null,null,null,null,null),iR=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function jR(e,n,t,r,o){return IN(e=wN(e,t,r,-1,null),new Q(null,2,5,R,[o,n],null),YN(e)),PN(e,null)}function kR(e,n,t,r,o,i){var l=F(t);for(i=B(i);;){if(!i)return null;var a=C(i),u=fR(a);if(J(u,0,null),u=p(u=J(u,1,null))?u:o+F(a),A.b(u,l))return new Q(null,3,5,R,[a,u,null],null);var s=B(jR(e,n,t,r,u));if(s)return new Q(null,3,5,R,[a,u,s],null);i=D(i)}}function lR(e,t,r,o,i){var l=F(r),a=jR(e,t,r,o,i),u=kR(e,t,r,o,i=sg(i),a);for(J(u,0,null),J(u,1,null),J(u,2,null),a=i,i=IL;;){var s=u,c=J(s,0,null);u=J(s,1,null);var d=J(s,2,null);if(null==s||A.b(a,u))return hR;if(null==d)return GN(CL(i,c),new n(null,3,[oG,nz,Yv,0,hp,l],null));a=sg(u),i=CL(i,c),u=kR(e,t,r,o,u,d)}}function mR(e,t,r,o,i){if(A.b(r,DC))e:{r=F(i);var l=jR(e,t,i,i,0),a=sg(0),u=KL(new Q(null,1,5,R,[o],null));for(J(l=kR(e,t,i,i,a,l),0,null),J(l,1,null),J(l,2,null),o=a,a=u,u=l;;){var s=u,c=J(s,0,null);if(u=J(s,1,null),l=J(s,2,null),null==s||A.b(o,u)){e=hR;break e}if(null==l){e=GN(OL(CL(a,c)),new n(null,3,[oG,nz,Yv,0,hp,r],null));break e}o=sg(u),a=CL(a,c),u=kR(e,t,i,i,u,l)}}else if(A.b(r,FA))e:for(r=F(i),u=jR(e,t,i,i,0),a=sg(0),l=kR(e,t,i,i,a,u),J(l,0,null),J(l,1,null),J(l,2,null),u=IL;;){var d=l;if(s=J(d,0,null),l=J(d,1,null),c=J(d,2,null),null==d||A.b(a,l)){e=hR;break e}if(null==c){e=GN(new n(null,2,[X,o,sE,B(CL(u,s))],null),new n(null,3,[oG,nz,Yv,0,hp,r],null));break e}a=sg(l),u=CL(u,s),l=kR(e,t,i,i,l,c)}else e=null;return e}function nR(e,t,r,o,i,l){var a=F(l),u=jR(e,t,l,l,0),s=Pf(u);if(p(t=s||ls.a(t)))return hR;if(u=gh(Jk,iR,u),t=iR.a(u),e=lR(e,wv.a(r),l,l,t),a=new n(null,3,[oG,nz,Yv,0,hp,a],null),e instanceof tN||A.b(X.a(r),XC)&&gR(e))return hR;switch(o instanceof z?o.da:null){case"enlive":return GN(new n(null,2,[X,i,sE,CL(IL.Qc(null,u),e)],null),a);case"hiccup":return GN(OL(CL(KL(new Q(null,1,5,R,[i],null)).Qc(null,u),e)),a);default:return GN(CL(IL.Qc(null,u),e),a)}}function oR(e,t,r,o,i){var l=An.a(o),a=Bf(l);if(A.b(X.a(o),oF)){var u=X.a(a),s=new Bk(null,new n(null,2,[XC,null,eq,null],null),null);u=p(u=s.a?s.a(u):s.call(null,u))?Tc(ls.a(a))&&Tc(ls.a(wv.a(a))):u}else u=!1;return Tc(u)?hR:(l=fh(yM,Hk(l)),A.b(Hu.a(o),mM)?nR(e,l,a,null,r,t):nR(e,l,a,i,r,t))}function pR(e,n,t){var r=wo.a(e);e=SH.a(e);var o=x.b(r,t);return A.b(ls.a(o),!0)?hR:A.b(Hu.a(o),mM)?A.b(X.a(o),XC)?lR(r,t=wv.a(o),n,n,0):A.b(X.a(o),eq)?gR(n=lR(r,t=wv.a(o),n,n,0))?hR:n:oR(r,n,t,o,e):A.b(X.a(o),XC)?mR(r,wv.a(o),e,t,n):A.b(X.a(o),eq)?gR(n=mR(r,wv.a(o),e,t,n))?hR:n:oR(r,n,t,o,e)}function qR(e,n){if(A.b(null,n))return e;if(A.b(sE,n))return K.c(e,wo,IM(wo.a(e)));if(A.b(tF,n))return K.c(e,wo,JM(SH.a(e),wo.a(e)));if(A.b(yC,n))return K.c(e,wo,KM(SH.a(e),wo.a(e)));throw Error(["No matching clause: ",q.a(n)].join(""))}iR.a=function(e){var n=fR(e);return J(n,0,null),p(n=J(n,1,null))?sg(n):F(e)},iR.b=function(e,n){var t=fR(e);return J(t,0,null),p(t=J(t,1,null))?sg(t):n+F(e)},iR.F=2;var rR=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],2<t.length?new Qe(t.slice(2),0,null):null)};function tR(e,n,t,r,o,i){this.qa=e,this.oc=n,this.sc=t,this.Mb=r,this.j=o,this.B=i,this.h=2230716171,this.I=139264}function uR(e){var n=Hf.g(e,wo,G([iz,SH]));return n=Uf(e)?ji.b(S,n):n,new tR(wo.a(e),iz.a(e),SH.a(e),null,lh(n),null)}function vR(e){for(var n=[],t=arguments.length,r=0;r<t;)n.push(arguments[r]),r+=1;return wR(arguments[0],1<n.length?new Qe(n.slice(1),0,null):null)}function wR(e,n){var t=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,r=x.c(t,vJ,cB),o=x.c(t,SH,DC),i=x.c(t,sz,null);n="string"===typeof e?function(){e:{var n=DQ;DQ=zC.b(t,em);try{var l=r instanceof z?r.da:null;switch(l){case"abnf":var a=eR(e,o);break e;case"ebnf":a=UQ(e,o);break e;default:throw Error(["No matching clause: ",q.a(l)].join(""))}}finally{DQ=n}a=void 0}return p(i)?uR(K.c(a,iz,i)):uR(a)}():M(e)?uR(VQ(e,o,i)):Vf(e)?function(){var n=p(i)?i:e.a?e.a(0):e.call(null,0);return uR(n=VQ(fh(qk,e),o,n))}():iM(G(["Expected string, map, or vector as grammar specification, got ",ol.g(G([e]))]));var l=x.b(t,Co);if(p(l=l instanceof z?x.b(xR,l):l)){var a=null!=l&&(64&l.h||h===l.D)?fh(qk,l):l;return l=x.b(a,wo),a=x.b(a,iz),K.c(n,wo,MM(n.qa,n.oc,l,a))}return n}function sR(e){return e instanceof uN||Lf(e)instanceof uN}rR.g=function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.c(r,sz,iz.a(e));var o=x.c(r,$q,!1),i=x.c(r,oG,!1),l=x.b(r,Gt);return x.c(r,mu,!1),e=qR(e,l),p(xr.a(r))?(i=wo.a(e),e=SH.a(e),r=oM.a?oM.a(e):oM.call(null,e),(e=aO(i,t,n,o))instanceof tN?($N(i=wN(i,n,n,l=DH.a(e),r),DM(t),o),p(o=PN(i,null))?n=C(o):(o=NN(r,aq,n,0,F(n)),n=NN(r,t,o,0,F(n))),n=Kf(n,wk.g(G([e,Lf(n)])))):n=e,n):p(p(i)?Tc(o):i)?(r=pR(e,n,t),p(sR.a?sR.a(r):sR.call(null,r))?aO(wo.a(e),t,n,o):r):aO(wo.a(e),t,n,o)},rR.F=2,rR.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)},g=tR.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"grammar":return this.qa;case"start-production":return this.oc;case"output-format":return this.sc;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#instaparse.core.Parser{",", ","}",t,Xg.b(new Q(null,3,5,R,[new Q(null,2,5,R,[wo,this.qa],null),new Q(null,2,5,R,[iz,this.oc],null),new Q(null,2,5,R,[SH,this.sc],null)],null),this.j))},g.ua=function(){return new gj(this,3,new Q(null,3,5,R,[wo,iz,SH],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 3+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=-360509877^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.qa,n.qa)&&A.b(this.oc,n.oc)&&A.b(this.sc,n.sc)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,3,[iz,null,wo,null,SH,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new tR(this.qa,this.oc,this.sc,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(wo,n):P.call(null,wo,n))?new tR(t,this.oc,this.sc,this.Mb,this.j,null):p(P.b?P.b(iz,n):P.call(null,iz,n))?new tR(this.qa,t,this.sc,this.Mb,this.j,null):p(P.b?P.b(SH,n):P.call(null,SH,n))?new tR(this.qa,this.oc,t,this.Mb,this.j,null):new tR(this.qa,this.oc,this.sc,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,3,5,R,[new Gi(wo,this.qa),new Gi(iz,this.oc),new Gi(SH,this.sc)],null),this.j))},g.O=function(e,n){return new tR(this.qa,this.oc,this.sc,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)},g.call=function(){function e(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,y){return jh(rR,this,n,t,r,G([o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,y]))}function n(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m){return rR.g(this,n,G([t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m]))}function t(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m){return rR.g(this,n,G([t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m]))}function r(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_){return rR.g(this,n,G([t,r,o,i,l,a,u,s,c,d,f,p,h,_]))}function o(e,n,t,r,o,i,l,a,u,s,c,d,f,p){return rR.g(this,n,G([t,r,o,i,l,a,u,s,c,d,f,p]))}function i(e,n,t,r,o,i,l,a,u,s,c,d){return rR.g(this,n,G([t,r,o,i,l,a,u,s,c,d]))}function l(e,n,t,r,o,i,l,a,u,s){return rR.g(this,n,G([t,r,o,i,l,a,u,s]))}function a(e,n,t,r,o,i,l,a){return rR.g(this,n,G([t,r,o,i,l,a]))}function u(e,n,t,r,o,i){return rR.g(this,n,G([t,r,o,i]))}function s(e,n,t,r){return rR.g(this,n,G([t,r]))}var c;return(c=function(c,d,f,p,h,_,g,m,w,v,b,y,k,C,I,x,E,S,D,R,O,A){switch(arguments.length){case 2:return rR(this,d);case 4:return s.call(this,c,d,f,p);case 6:return u.call(this,c,d,f,p,h,_);case 8:return a.call(this,c,d,f,p,h,_,g,m);case 10:return l.call(this,c,d,f,p,h,_,g,m,w,v);case 12:return i.call(this,c,d,f,p,h,_,g,m,w,v,b,y);case 14:return o.call(this,c,d,f,p,h,_,g,m,w,v,b,y,k,C);case 16:return r.call(this,c,d,f,p,h,_,g,m,w,v,b,y,k,C,I,x);case 18:return t.call(this,c,d,f,p,h,_,g,m,w,v,b,y,k,C,I,x,E,S);case 20:return n.call(this,c,d,f,p,h,_,g,m,w,v,b,y,k,C,I,x,E,S,D,R);case 22:return e.call(this,c,d,f,p,h,_,g,m,w,v,b,y,k,C,I,x,E,S,D,R,O,A)}throw Error("Invalid arity: "+(arguments.length-1))}).b=function(e,n){return rR(this,n)},c.A=s,c.la=u,c.Ga=a,c.mb=l,c.nb=i,c.ob=o,c.pb=r,c.qb=t,c.rb=n,c.Be=e,c}(),g.apply=function(e,n){return this.call.apply(this,[this].concat(ed(n)))},g.a=function(e){return rR(this,e)},g.c=function(e,n,t){return rR.g(this,e,G([n,t]))},g.K=function(e,n,t,r,o){return rR.g(this,e,G([n,t,r,o]))},g.ib=function(e,n,t,r,o,i,l){return rR.g(this,e,G([n,t,r,o,i,l]))},g.Xa=function(e,n,t,r,o,i,l,a,u){return rR.g(this,e,G([n,t,r,o,i,l,a,u]))},g.cb=function(e,n,t,r,o,i,l,a,u,s,c){return rR.g(this,e,G([n,t,r,o,i,l,a,u,s,c]))},g.eb=function(e,n,t,r,o,i,l,a,u,s,c,d,f){return rR.g(this,e,G([n,t,r,o,i,l,a,u,s,c,d,f]))},g.fb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h){return rR.g(this,e,G([n,t,r,o,i,l,a,u,s,c,d,f,p,h]))},g.gb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g){return rR.g(this,e,G([n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g]))},g.hb=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g){return rR.g(this,e,G([n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g]))},g.Sc=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b){return jh(rR,this,e,n,t,G([r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b]))},g.ma=h,g.S=function(e,n){return ce(n,dM(this))};var xR=new n(null,2,[jI,vR("whitespace = #'\\s+'"),Wy,vR("whitespace = #'[,\\s]+'")],null);function yR(e){return"#"!==e&&("'"!==e&&(":"!==e&&(zR.a?zR.a(e):zR.call(null,e))))}function AR(e){return"@"===e||"`"===e||"~"===e}function BR(e,n,t,r){if(Tc(t))return TO(e,n);if(p(p(r)?AR(t):r))return UO(e,n,t);for(r=new zc,vO(e,t);;){if(mO(t)||yR(t)||null==t)return q.a(r);if(AR(t))return UO(e,n,t);r.append(tO(e)),t=uO(e)}}function CR(e,n,t){if(p(n=tO(e))){var r=DR.a?DR.a(n):DR.call(null,n);return p(r)?r.c?r.c(e,n,t):r.call(null,e,n,t):(vO(e,n),ER.c?ER.c(e,n,t):ER.call(null,e,n,t))}return VO(e)}function FR(e,n){return LO(e,G(["Unmatched delimiter ",n,"."]))}function GR(e,n,t){n=1+n,F(e)!==n&&QO(e);for(var r=1,o=0;;){if(r===n)return String.fromCharCode(o);var i=sO(pf(e,r),t);if(-1===i)return XO(pf(e,r),e);o=i+o*t,r+=1}}function HR(e,n,t,r,o){for(var i=1,l=sO(n,t);;){if(-1===l)return YO(e,n);if(i===r)return String.fromCharCode(l);var a=uO(e),u=mO(a);if(u||(u=p(u=zR.a?zR.a(a):zR.call(null,a))?u:null==a),p(u))return p(o)?ZO(e,i,r):String.fromCharCode(l);if(u=sO(a,t),tO(e),-1===u)return YO(e,a);l=u+l*t,i+=1}}function IR(e){var n=tO(e);if(null!=n){var t=(n=yR(n)||AR(n)||mO(n)?q.a(n):BR(e,PF,n,!1)).length;return 1===t?pf(n,0):"newline"===n?"\n":"space"===n?" ":"tab"===n?"\t":"backspace"===n?"\b":"formfeed"===n?"\f":"return"===n?"\r":p(0==n.lastIndexOf("u",0))?55295<(t=(n=GR(n,4,16)).charCodeAt())&&57344>t?$O(e,t.toString(16)):n:p(0==n.lastIndexOf("o",0))?3<--t?aP(e,n):255<(0|(n=GR(n,t,8)))?bP(e):n:LO(e,G(["Unsupported character: ",n,"."]))}return cP(e)}function JR(e){return BO(e)?new Q(null,2,5,R,[wO(e),(0|xO(e))-1|0],null):null}function KR(e,n,t,r){var o=JR(t),i=J(o,0,null);o=J(o,1,null),n=iO(n);for(var l=je(I);;){var a=oP(t);if(p(a)||OO(t,e,i,o,F(l)),A.b(n,iO(a)))return le(l);var u=zR.a?zR.a(a):zR.call(null,a);p(u)?l=(a=u.c?u.c(t,a,r):u.call(null,t,a,r))!==t?Yg.b(l,a):l:(vO(t,a),l=(a=LR?LR(t,!0,null,r):MR.call(null,t,!0,null,r))!==t?Yg.b(l,a):l)}}function NR(e,n,t){return Pf(e=KR(JI,")",e,t))?Se:fh(O,e)}function OR(e,n,t){return KR(Uu,"]",e,t)}function PR(e,n,t){var r=JR(e);n=J(r,0,null),r=J(r,1,null);var o=F(t=KR(Tv,"}",e,t)),i=Sk(2,t),l=Fk(i);return!Fh(o)&&PO(e,n,r,t),A.b(F(l),F(i))||mP(e,Tv,i),o<=2*pj?rj(hg(t)):Wj(hg(t))}function QR(e,n){for(var t=function(){var e=new zc;return e.append(n),e}(),r=tO(e);;){if(p(function(){var e=mO(r);return e||(p(e=zR.a?zR.a(r):zR.call(null,r))?e:null==r)}())){var o=q.a(t);vO(e,r);var i=tP(o);return p(i)?i:LO(e,G(["Invalid number: ",o,"."]))}o=function(){var e=t;return e.append(r),e}(),i=tO(e),t=o,r=i}}function RR(e){var n=tO(e);switch(n){case"t":return"\t";case"r":return"\r";case"n":return"\n";case"\\":return"\\";case'"':return'"';case"b":return"\b";case"f":return"\f";case"u":return n=tO(e),-1===parseInt(0|n,16)?RO(e,n):HR(e,n,16,4,!0);default:return nO(n)?255<(0|(n=HR(e,n,8,3,!1)))?bP(e):n:dP(e,n)}}function SR(e){for(var n=new zc,t=tO(e);;){var r=t;if(A.b(null,r))return WO(e,xn,G(['"',n]));if(A.b("\\",r)){r=function(){var t=n;return t.append(RR(e)),t}();var o=tO(e);n=r,t=o}else{if(A.b('"',r))return q.a(n);r=function(){var e=n;return e.append(t),e}(),o=tO(e),n=r,t=o}}}function TR(e,n){if(!p(n=BR(e,xu,n,!0)))return null;switch(n){case"nil":return null;case"true":return!0;case"false":return!1;case"/":return dA;default:var t=uP(n);return t=p(t)?Me.b(t.a?t.a(0):t.call(null,0),t.a?t.a(1):t.call(null,1)):null,p(t)?t:SO(e,xu,n)}}function UR(e){var n=tO(e);if(mO(n))return eP(e);var t=uP(n=BR(e,FJ,n,!0));if(p(p(t)?-1===n.indexOf("::"):t)){var r=t.a?t.a(0):t.call(null,0);return t=t.a?t.a(1):t.call(null,1),":"===pf(n,0)?SO(e,FJ,n):Kg.b(r,t)}return SO(e,FJ,n)}function VR(e,n,t){return M(n=oO(LR?LR(e,!0,null,t):MR.call(null,e,!0,null,t)))||fP(e,n),null!=(t=LR?LR(e,!0,null,t):MR.call(null,e,!0,null,t))&&(131072&t.h||h===t.xd)?Kf(t,wk.g(G([Lf(t),n]))):gP(e,t)}function WR(e,n,t){return t=Fk(n=KR(yA,"}",e,t)),A.b(F(n),F(t))||mP(e,yA,n),t}function YR(e){return LR?LR(e,!0,null,!0):MR.call(null,e,!0,null,!0),e}function ZR(e,n,t){n=tO(e);var r=null==(n=BR(e,VE,n,!0))?null:uP(n);return p(r=null==r?null:rO(r))?"{"===oP(e)?(!Fh(F(t=KR(VE,"}",e,t)))&&PO(e,null,null,t),n=qO(q.a(r),Sk(2,t)),t=Sk(2,Re(t)),A.b(F(Fk(n)),F(n))||mP(e,VE,n),Ik(n,t)):hP(e,n):iP(e,n)}function $R(e,n,t){return n=LR?LR(e,!0,null,t):MR.call(null,e,!0,null,t),A.b(iy,n)?Number.NaN:A.b(QC,n)?Number.NEGATIVE_INFINITY:A.b(Rw,n)?Number.POSITIVE_INFINITY:LO(e,G([["Invalid token: ##",q.a(n)].join("")]))}function zR(e){switch(e){case'"':return SR;case":":return UR;case";":return vP;case"^":return VR;case"(":return NR;case")":return FR;case"[":return OR;case"]":return FR;case"{":return PR;case"}":return FR;case"\\":return IR;case"#":return CR;default:return null}}function DR(e){switch(e){case"^":return VR;case"{":return WR;case"<":return wP("Unreadable form");case"!":return vP;case"_":return YR;case":":return ZR;case"#":return $R;default:return null}}function ER(e,n,t){n=LR?LR(e,!0,null,t):MR.call(null,e,!0,null,t);var r=LR?LR(e,!0,null,t):MR.call(null,e,!0,null,t);n instanceof w||jP(e,"Reader tag must be a symbol");var o=x.b(Ry.a(t),n);return o=p(o)?o:S.a?S.a(n):S.call(null,n),p(o)?o.a?o.a(r):o.call(null,r):p(t=em.a(t))?t.b?t.b(n,r):t.call(null,n,r):kP(e,n)}function MR(e){switch(arguments.length){case 1:return aS(S,arguments[0]);case 2:return aS(arguments[0],arguments[1]);case 4:return LR(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}}function aS(e,n){e=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e;var t=x.b(e,gv);return LR(n,!N(e,gv),t,e)}function LR(e,t,r,o){try{for(;;){var i=tO(e);if(!mO(i)){if(null==i)return p(t)?nP(e,null):r;if(nO(i)||("+"===i||"-"===i)&&nO(e.Dc(null)))return QR(e,i);var l=zR(i);if(!p(l))return TR(e,i);var a=l.c?l.c(e,i,o):l.call(null,e,i,o);if(a!==e)return a}}}catch(u){if(u instanceof Error){if((t=u)instanceof hm){if(r=km(t),A.b(fr,U.a(r)))throw t;throw jm(t.message,wk.g(G([new n(null,1,[U,fr],null),r,BO(e)?new n(null,3,[en,wO(e),ux,xO(e),OD,yO(e)],null):null])),t)}throw jm(t.message,wk.g(G([new n(null,1,[U,fr],null),BO(e)?new n(null,3,[en,wO(e),ux,xO(e),OD,yO(e)],null):null])),t)}throw u}}function bS(e,n){return p(p(n)?kh.b(n,""):n)?aS(e,CO(n)):null}var cS=function(){var e=new Q(null,13,5,R,[null,31,28,31,30,31,30,31,31,30,31,30,31],null),n=new Q(null,13,5,R,[null,31,29,31,30,31,30,31,31,30,31,30,31],null);return function(t,r){return x.b(p(r)?n:e,t)}}(),dS=/(\d\d\d\d)(?:-(\d\d)(?:-(\d\d)(?:[T](\d\d)(?::(\d\d)(?::(\d\d)(?:[.](\d+))?)?)?)?)?)?(?:[Z]|([-+])(\d\d):(\d\d))?/;function eS(e){return e=parseInt(e,10),Tc(isNaN(e))?e:null}function fS(e,n,t,r){if(!(e<=n&&n<=t))throw Error([q.a(r)," Failed:  ",q.a(e),"<=",q.a(n),"<=",q.a(t)].join(""));return n}function gS(e){var n=Wk(dS,e);J(n,0,null);var t=J(n,1,null),r=J(n,2,null),o=J(n,3,null),i=J(n,4,null),l=J(n,5,null),a=J(n,6,null),u=J(n,7,null),s=J(n,8,null),c=J(n,9,null),d=J(n,10,null);if(Tc(n))throw Error(["Unrecognized date/time syntax: ",q.a(e)].join(""));e=eS(t),n=function(){var e=eS(r);return p(e)?e:1}(),t=function(){var e=eS(o);return p(e)?e:1}();var f=function(){var e=eS(i);return p(e)?e:0}(),h=function(){var e=eS(l);return p(e)?e:0}(),_=function(){var e=eS(a);return p(e)?e:0}(),g=function(){e:if(A.b(3,F(u)))var e=u;else if(3<F(u))e=u.substring(0,3);else for(e=new zc(u);;){if(!(3>e.getLength())){e=e.toString();break e}e=e.append("0")}return p(e=eS(e))?e:0}();return s=A.b(s,"-")?-1:1,s*=60*function(){var e=eS(c);return p(e)?e:0}()+function(){var e=eS(d);return p(e)?e:0}(),new Q(null,8,5,R,[e,fS(1,n,12,"timestamp month field must be in range 1..12"),fS(1,t,cS(n,0===(e%4+4)%4&&(0!==(e%100+100)%100||0===(e%400+400)%400)),"timestamp day field must be in range 1..last day in month"),fS(0,f,23,"timestamp hour field must be in range 0..23"),fS(0,h,59,"timestamp minute field must be in range 0..59"),fS(0,_,A.b(h,59)?60:59,"timestamp second field must be in range 0..60"),fS(0,g,999,"timestamp millisecond field must be in range 0..999"),s],null)}var hS=Oh(null),iS=Oh(wk.g(G([new n(null,4,[uw,function(e){if("string"===typeof e){var n=gS(e);if(!p(n))throw Error(["Unrecognized date/time syntax: ",q.a(e)].join(""));e=J(n,0,null);var t=J(n,1,null),r=J(n,2,null),o=J(n,3,null),i=J(n,4,null),l=J(n,5,null),a=J(n,6,null);return n=J(n,7,null),n=new Date(Date.UTC(e,t-1,r,o,i,l,a)-6e4*n)}throw Error("Instance literal expects a string for its timestamp.")},es,function(e){if("string"===typeof e)return new fm(e.toLowerCase());throw Error("UUID literal expects a string as its representation.")},js,function(e){if(Vf(e))return ji.b(cj,e);throw Error("Queue literal expects a vector for its elements.")},iv,function(e){if(Vf(e)){var n=[];e=B(e);for(var t=null,r=0,o=0;;)if(o<r){var i=t.W(null,o);n.push(i),o+=1}else{if(!(e=B(e)))break;Wf(t=e)?(e=re(t),o=se(t),t=e,r=F(e),e=o):(e=C(t),n.push(e),e=D(t),t=null,r=0),o=0}return n}if(M(e)){for(n={},e=B(e),t=null,o=r=0;;)if(o<r){var l=t.W(null,o);i=J(l,0,null),l=J(l,1,null),n[i=Lg(i)]=l,o+=1}else{if(!(e=B(e)))break;Wf(e)?(r=re(e),e=se(e),t=r,r=F(r)):(t=J(r=C(e),0,null),r=J(r,1,null),n[t=Lg(t)]=r,e=D(e),t=null,r=0),o=0}return n}throw Error("JS literal expects a vector or map containing only string or unqualified keyword keys")}],null),S]))),jS=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};jS.a=function(e){return bS(new n(null,3,[Ry,t(iS),em,t(hS),gv,null],null),e)},jS.b=function(e,r){return bS(pi(wk.g(G([new n(null,1,[em,t(hS)],null),e])),Ry,(function(e){return wk.g(G([t(iS),e]))})),r)},jS.F=2;var kS=vR("\n    expr=and-or\n    <and-or>=<ws*> (eq-neq | and | or)\n    <eq-neq>=<ws*> (term | eq | neq | match)\n    and=and-or <ws*> <'&&'> eq-neq\n    or=and-or <ws*> <'||'> eq-neq\n    eq=eq-neq <ws*> <'=='> term\n    neq=eq-neq <ws*> <'!='> term\n    match=eq-neq <ws*> <'?'> term\n    <term>=<ws*> (ident | own-ident | number | str | lparen and-or rparen)\n    <lparen> = <ws*'('ws*>\n    <rparen> = <ws*')'ws*>\n    ident=<'$'> word\n    own-ident=<'#'> word\n    str=<'\\''> #'[^\\']+' <'\\''>\n    word=#'[a-zA-Z]+'\n    number=#'[-+]?[0-9]*\\.?[0-9]+'\n    ws=#'[\\s\\t]+'\n    ");function lS(e){if(B(e)){if(null==(e=rR(kS,e)))var t=null;else t=p(t=e instanceof uN?e:Lf(e)instanceof uN?Lf(e):null)?q.a(t):null;if(p(t))throw im(["Error parsing restrictions ",t].join(""),new n(null,1,[sr,t],null));return e}return null}function mS(e,n,t){return!B(e)||eO(Xj([xI,dF,Wz,yI,Fv,pC,xA,LC,hs,tH],[A,jS,function(e,n){return p(e)?e:n},lg,lg,kh,function(e){J(e,0,null),e=J(e,1,null);var n=x.b(t,e);return p(n)?n:x.b(t,Kg.a(e))},function(e,n){return A.b(e,n)},function(e){J(e,0,null),e=J(e,1,null);var t=x.b(n,e);return p(t)?t:x.b(n,Kg.a(e))},function(e,n){return p(p(n)?e:n)?Wk(Zk(n),e):null}]),e)}var nS={},oS={},aX,bX,cX,dX,rX,sX,tX,uX,vX,SY;function zS(e,n){if(null!=e&&null!=e.Zb)e=e.Zb(e,n);else{var t=zS[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=zS._))throw Zc("Spec.conform*",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function AS(e,n){if(null!=e&&null!=e.$b)e=e.$b(e,n);else{var t=AS[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=AS._))throw Zc("Spec.with-gen*",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}var BS=Oh(S);function CS(e){if(Jg(e)){var n=t(BS);if(Jg(e=x.b(n,e)))e:for(;;){if(!Jg(e)){n=e;break e}e=x.b(n,e)}else n=e;return n}return e}function DS(e){if(Jg(e)){var n=CS(e);if(p(n))return n;throw Error(["Unable to resolve spec: ",q.a(e)].join(""))}return e}function ES(e){return null!=e&&h===e.rc?e:null}function FS(e){var n=pB.a(e);return p(n)?e:n}function GS(e,n){return Jg(e)?e:p(FS(e))?K.c(e,So,n):null!=e&&(131072&e.h||h===e.xd)?Kf(e,K.c(Lf(e),So,n)):null}function HS(e){return Jg(e)?e:p(FS(e))?So.a(e):null!=e&&(131072&e.h||h===e.xd)?So.a(Lf(e)):null}function IS(e){var n=function(){var n=!!Jg(e)&&CS(e);return p(n)||p(n=ES(e))||p(n=FS(e))?n:null}();return p(FS(n))?GS(JS(n,null),HS(n)):n}function KS(e){var n=IS(e);if(p(n))return n;if(Jg(e))throw Error(["Unable to resolve spec: ",q.a(e)].join(""));return null}function LS(e){if(ec(null==e?"":String(e)))return null;if(2<=F(e=Wh.b(Qm,UL(e,"$",0)))&&Dh((function(e){return!ec(null==e?"":String(e))}),e)){var n=Uk(Hk,Bf)(e);return e=J(n,0,null),n=J(n,1,null),Me.a([SL(".",e),"/",q.a(n)].join(""))}return null}var wZ=function(){function e(e,n){var t=MS[db(null==e?null:e)];if(null!=t)return t.b?t.b(e,n):t.call(null,e,n);if(null!=(t=MS._))return t.b?t.b(e,n):t.call(null,e,n);throw Zc("Specize.specize*",e)}function n(e){var n=MS[db(null==e?null:e)];if(null!=n)return n.a?n.a(e):n.call(null,e);if(null!=(n=MS._))return n.a?n.a(e):n.call(null,e);throw Zc("Specize.specize*",e)}var t;return(t=function(t,r){switch(arguments.length){case 1:return n.call(this,t);case 2:return e.call(this,t,r)}throw Error("Invalid arity: "+arguments.length)}).a=n,t.b=e,t}(),MS=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};MS.a=function(e){return null!=e&&null!=e.Db?e.Db(e):wZ(e)},MS.b=function(e,n){return null!=e&&null!=e.Eb?e.Eb(e,n):wZ(e,n)},MS.F=2,z.prototype.Db=function(){return MS(DS(this))},z.prototype.Eb=function(){return MS(DS(this))},w.prototype.Db=function(){return MS(DS(this))},w.prototype.Eb=function(){return MS(DS(this))},Bk.prototype.Db=function(){return NS(this,this,null,null,null)},Bk.prototype.Eb=function(e,n){return NS(n,this,null,null,null)},MS._=function(){function e(e){var n=!!If(e)&&LS(e.name);return p(n)?NS(n,e,null,null,null):NS(Nx,e,null,null,null)}var n;return(n=function(n,t){switch(arguments.length){case 1:return e.call(this,n);case 2:return NS(t,n,null,null,null)}throw Error("Invalid arity: "+arguments.length)}).a=e,n.b=function(e,n){return NS(n,e,null,null,null)},n}();var OS=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function PS(e){return P(Nr,e)}function QS(e,n){return zS(OS.a(e),n)}function RS(e,n){return p(FS(e=CS(e)))?K.c(e,kH,n):AS(OS.a(e),n)}function Z(e,n,r){if(null==r)Rh.c(BS,Hf,e);else{var o=ES(r);p(o)||(o=p(o=FS(r))?o:x.b(t(BS),r)),n=p(o)?r:NS(n,r,null,null,null),Rh.A(BS,K,e,GS(n,e))}}function SS(e,n,t){if(p(e)){var r=KS(e);if(p(r))return QS(r,n);if(If(e)||(null!=e?1&e.h||h===e.Nh||!e.h&&Xc(id,e):Xc(id,e)))return p(null)?e.a?e.a(n):e.call(null,n):p(e.a?e.a(n):e.call(null,n))?n:Nr;throw Error([ol.g(G([t]))," is not a fn, expected predicate fn"].join(""))}return n}function TS(e,n){return!PS(zS(e=OS.a(e),n))}OS.a=function(e){var n=ES(e);return p(n)?n:MS(e)},OS.b=function(e,n){var t=ES(e);return p(t)?t:MS(e,n)},OS.F=2;var US=function e(n){var r=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,o=x.b(r,jJ),i=x.b(r,ir),l=x.b(r,iA),a=x.b(r,TE),u=x.b(r,Wt),s=x.b(r,ot),c=x.b(r,hx),d=x.b(r,CG),f=x.b(r,Lu),_=x.b(r,QI),g=x.b(r,JF),m=x.b(r,GE),w=Ik(Xg.b(_,c),Xg.b(d,g)),v=gm();return"undefined"!==typeof Ac&&"undefined"!==typeof nS&&"undefined"!==typeof oS&&"undefined"!==typeof aX||((aX=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w){this.Qb=e,this.he=n,this.ph=t,this.Eh=r,this.sh=o,this.jb=i,this.vh=l,this.ie=a,this.ff=u,this.qh=s,this.Dh=c,this.ih=d,this.Bh=f,this.id=p,this.Ch=h,this.rh=_,this.Ig=g,this.wh=m,this.Og=w,this.h=393216,this.I=0}).prototype.O=function(e,n){return new aX(this.Qb,this.he,this.ph,this.Eh,this.sh,this.jb,this.vh,this.ie,this.ff,this.qh,this.Dh,this.ih,this.Bh,this.id,this.Ch,this.rh,this.Ig,this.wh,n)},aX.prototype.N=function(){return this.Og},aX.prototype.Db=function(){return this},aX.prototype.Eb=function(){return this},aX.prototype.rc=h,aX.prototype.Zb=function(e,n){if(!p(this.ie.a?this.ie.a(n):this.ie.call(null,n)))return Nr;e=t(BS);var r=B(n),o=C(r);for(D(r),J(o,0,null),J(o,1,null),o=r=n;;){n=r;var i=B(o);r=C(i);var l=D(i);if(r=J(i=r,0,null),i=J(i,1,null),!p(o))return n;if(o=this.he.a?this.he.a(r):this.he.call(null,r),p(o=x.b(e,o))){if(PS(o=QS(o,i)))return Nr;n=o===i?n:K.c(n,r,o),o=l,r=n}else o=l,r=n}},aX.prototype.$b=function(n,t){return n=K.c(this.ff,TE,t),e.a?e.a(n):e.call(null,n)},aX.Pa=function(){return new Q(null,19,5,R,[qG,cz,PA,xF,Qn,Sv,fy,Su,Wm,Ws,BF,XE,$I,Xt,FF,Np,yp,WH,lK],null)},aX.Ia=!0,aX.Da="cljs.spec.alpha/t_cljs$spec$alpha11516",aX.Ja=function(e){return ce(e,"cljs.spec.alpha/t_cljs$spec$alpha11516")}),new aX(r,(function(e){var n=w.a?w.a(e):w.call(null,e);return p(n)?n:e}),o,i,l,a,u,s,r,c,d,n,f,v,_,g,w,m,S)};function NS(e,n,t,r,o){return p(ES(n))?p(t)?RS(n,t):n:p(FS(n))?JS(n,t):Jg(n)?(e=KS(n),p(t)?RS(e,t):e):("undefined"!==typeof Ac&&"undefined"!==typeof nS&&"undefined"!==typeof oS&&"undefined"!==typeof bX||((bX=function(e,n,t,r,o,i){this.form=e,this.Sb=n,this.jb=t,this.Oe=r,this.Sf=o,this.Qg=i,this.h=393216,this.I=0}).prototype.O=function(e,n){return new bX(this.form,this.Sb,this.jb,this.Oe,this.Sf,n)},bX.prototype.N=function(){return this.Qg},bX.prototype.Db=function(){return this},bX.prototype.Eb=function(){return this},bX.prototype.rc=h,bX.prototype.Zb=function(e,n){return e=this.Sb.a?this.Sb.a(n):this.Sb.call(null,n),p(this.Oe)?e:p(e)?n:Nr},bX.prototype.$b=function(e,n){return NS(this.form,this.Sb,n,this.Oe,this.Sf)},bX.Pa=function(){return new Q(null,6,5,R,[wF,Oo,Sv,pt,bs,BT],null)},bX.Ia=!0,bX.Da="cljs.spec.alpha/t_cljs$spec$alpha11760",bX.Ja=function(e){return ce(e,"cljs.spec.alpha/t_cljs$spec$alpha11760")}),new bX(e,n,t,r,o,S))}function VS(e,n){return WS(e,n,U,null)}function WS(e,n,r,o){var i=gm(),l=r instanceof z?function(e,n){return K.c(e,r,n)}:r;return"undefined"!==typeof Ac&&"undefined"!==typeof nS&&"undefined"!==typeof oS&&"undefined"!==typeof cX||((cX=function(e,n,t,r,o,i,l,a,u){this.form=e,this.Cf=n,this.Of=t,this.jb=r,this.id=o,this.oe=i,this.yg=l,this.tag=a,this.Rg=u,this.h=393216,this.I=0}).prototype.O=function(e,n){return new cX(this.form,this.Cf,this.Of,this.jb,this.id,this.oe,this.yg,this.tag,n)},cX.prototype.N=function(){return this.Rg},cX.prototype.Db=function(){return this},cX.prototype.Eb=function(){return this},cX.prototype.rc=h,cX.prototype.Zb=function(e,n){return p(e=this.oe.a?this.oe.a(n):this.oe.call(null,n))?SS(e,n,this.form):Nr},cX.prototype.$b=function(e,n){return WS(this.form,this.Cf,this.Of,n)},cX.Pa=function(){return new Q(null,9,5,R,[wF,aH,rD,Sv,Xt,OC,yD,qw,HH],null)},cX.Ia=!0,cX.Da="cljs.spec.alpha/t_cljs$spec$alpha11900",cX.Ja=function(e){return ce(e,"cljs.spec.alpha/t_cljs$spec$alpha11900")}),new cX(e,n,r,o,i,(function(e){var r=t(n),o=bm(r);return p(o=am(r,o=o.a?o.a(e):o.call(null,e)))?r.a?r.a(e):r.call(null,e):o}),(function(e){var r=bm(t(n));return r.a?r.a(e):r.call(null,e)}),l,S)}function XS(e,n){return YS(e,n,null)}function YS(e,n,r){var o=new xl((function(){return ki.c(OS,n,e)})),i=F(n);return"undefined"!==typeof Ac&&"undefined"!==typeof nS&&"undefined"!==typeof oS&&"undefined"!==typeof dX||((dX=function(e,n,t,r,o,i){this.forms=e,this.Cb=n,this.jb=t,this.td=r,this.C=o,this.Sg=i,this.h=393216,this.I=0}).prototype.O=function(e,n){return new dX(this.forms,this.Cb,this.jb,this.td,this.C,n)},dX.prototype.N=function(){return this.Sg},dX.prototype.Db=function(){return this},dX.prototype.Eb=function(){return this},dX.prototype.rc=h,dX.prototype.Zb=function(e,n){if(e=t(this.td),!Vf(n)||!A.b(F(n),this.C))return Nr;for(var r=n,o=0;;){if(A.b(o,this.C))return r;var i=n.a?n.a(o):n.call(null,o),l=zS(e.a?e.a(o):e.call(null,o),i);if(PS(l))return Nr;r=l===i?r:K.c(r,o,l),o+=1}},dX.prototype.$b=function(e,n){return YS(this.forms,this.Cb,n)},dX.Pa=function(){return new Q(null,6,5,R,[Do,MC,Sv,Lt,Vs,wK],null)},dX.Ia=!0,dX.Da="cljs.spec.alpha/t_cljs$spec$alpha11983",dX.Ja=function(e){return ce(e,"cljs.spec.alpha/t_cljs$spec$alpha11983")}),new dX(e,n,r,o,i,S)}function ZS(e,n){return new Gi(e,n)}var $S=function e(n,r,o,i){var l=gm(),a=Ik(n,o),u=new xl((function(){return ki.c(OS,o,r)})),s=function(){switch(F(o)){case 2:return function(e){var r=t(u),o=zS(r.a?r.a(0):r.call(null,0),e);return PS(o)?PS(e=zS(r.a?r.a(1):r.call(null,1),e))?Nr:ZS(n.a?n.a(1):n.call(null,1),e):ZS(n.a?n.a(0):n.call(null,0),o)};case 3:return function(e){var r=t(u),o=zS(r.a?r.a(0):r.call(null,0),e);return PS(o)?PS(o=zS(r.a?r.a(1):r.call(null,1),e))?PS(e=zS(r.a?r.a(2):r.call(null,2),e))?Nr:ZS(n.a?n.a(2):n.call(null,2),e):ZS(n.a?n.a(1):n.call(null,1),o):ZS(n.a?n.a(0):n.call(null,0),o)};default:return function(e){for(var r=t(u),o=0;;){if(!(o<F(r)))return Nr;var i=r.a?r.a(o):r.call(null,o);if(!PS(i=zS(i,e)))return ZS(n.a?n.a(o):n.call(null,o),i);o+=1}}}}();return"undefined"!==typeof Ac&&"undefined"!==typeof nS&&"undefined"!==typeof oS&&"undefined"!==typeof rX||((rX=function(e,n,t,r,o,i,l,a,u){this.keys=e,this.forms=n,this.Cb=t,this.jb=r,this.id=o,this.Lg=i,this.td=l,this.yc=a,this.Tg=u,this.h=393216,this.I=0}).prototype.O=function(e,n){return new rX(this.keys,this.forms,this.Cb,this.jb,this.id,this.Lg,this.td,this.yc,n)},rX.prototype.N=function(){return this.Tg},rX.prototype.Db=function(){return this},rX.prototype.Eb=function(){return this},rX.prototype.rc=h,rX.prototype.Zb=function(e,n){return this.yc.a?this.yc.a(n):this.yc.call(null,n)},rX.prototype.$b=function(n,t){return e.A?e.A(this.keys,this.forms,this.Cb,t):e.call(null,this.keys,this.forms,this.Cb,t)},rX.Pa=function(){return new Q(null,9,5,R,[OF,Do,MC,Sv,Xt,lw,Lt,tA,tS],null)},rX.Ia=!0,rX.Da="cljs.spec.alpha/t_cljs$spec$alpha12118",rX.Ja=function(e){return ce(e,"cljs.spec.alpha/t_cljs$spec$alpha12118")}),new rX(n,r,o,i,l,a,u,s,S)};function aT(e,n,t){var r=B(n);for(C(r),D(r),C(r=B(t)),D(r),r=t;;){t=e,e=C(n=B(n)),n=D(n);var o=B(r),i=r=C(o);if(r=o=D(o),!p(e))return t;if(PS(t=SS(e,t,i)))return Nr;e=t}}var bT=function e(n,r,o){var i=new xl((function(){return ki.c(OS,r,n)})),l=function(){switch(F(r)){case 2:return function(e){var n=t(i);return PS(e=zS(n.a?n.a(0):n.call(null,0),e))?Nr:zS(n.a?n.a(1):n.call(null,1),e)};case 3:return function(e){var n=t(i);return PS(e=zS(n.a?n.a(0):n.call(null,0),e))||PS(e=zS(n.a?n.a(1):n.call(null,1),e))?Nr:zS(n.a?n.a(2):n.call(null,2),e)};default:return function(e){for(var n=t(i),r=0;;){if(!(r<F(n)))return e;if(PS(e=zS(n.a?n.a(r):n.call(null,r),e)))return Nr;r+=1}}}}();return"undefined"!==typeof Ac&&"undefined"!==typeof nS&&"undefined"!==typeof oS&&"undefined"!==typeof sX||((sX=function(e,n,t,r,o,i){this.forms=e,this.Cb=n,this.jb=t,this.td=r,this.yc=o,this.Ug=i,this.h=393216,this.I=0}).prototype.O=function(e,n){return new sX(this.forms,this.Cb,this.jb,this.td,this.yc,n)},sX.prototype.N=function(){return this.Ug},sX.prototype.Db=function(){return this},sX.prototype.Eb=function(){return this},sX.prototype.rc=h,sX.prototype.Zb=function(e,n){return this.yc.a?this.yc.a(n):this.yc.call(null,n)},sX.prototype.$b=function(n,t){return e.c?e.c(this.forms,this.Cb,t):e.call(null,this.forms,this.Cb,t)},sX.Pa=function(){return new Q(null,6,5,R,[Do,MC,Sv,Lt,tA,zT],null)},sX.Ia=!0,sX.Da="cljs.spec.alpha/t_cljs$spec$alpha12210",sX.Ja=function(e){return ce(e,"cljs.spec.alpha/t_cljs$spec$alpha12210")}),new sX(n,r,o,i,l,S)},cT=function e(n,t,r){return"undefined"!==typeof Ac&&"undefined"!==typeof nS&&"undefined"!==typeof oS&&"undefined"!==typeof tX||((tX=function(e,n,t,r){this.forms=e,this.Cb=n,this.jb=t,this.Vg=r,this.h=393216,this.I=0}).prototype.O=function(e,n){return new tX(this.forms,this.Cb,this.jb,n)},tX.prototype.N=function(){return this.Vg},tX.prototype.Db=function(){return this},tX.prototype.Eb=function(){return this},tX.prototype.rc=h,tX.prototype.Zb=function(e,n){return p(Eh(PS,e=Wh.c((function(e,t){return SS(e,n,t)}),this.Cb,this.forms)))?Nr:fh(wk,e)},tX.prototype.$b=function(n,t){return e.c?e.c(this.forms,this.Cb,t):e.call(null,this.forms,this.Cb,t)},tX.Pa=function(){return new Q(null,4,5,R,[Do,MC,Sv,eU],null)},tX.Ia=!0,tX.Da="cljs.spec.alpha/t_cljs$spec$alpha12265",tX.Ja=function(e){return ce(e,"cljs.spec.alpha/t_cljs$spec$alpha12265")}),new tX(n,t,r,S)},dT=new n(null,4,[XF,I,VB,Dk,qv,Se,Hq,S],null);function eT(e,n,r,o){function i(e,n,t,r){return Cf.b(e,r)}var l=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,a=x.b(l,KJ),u=x.b(l,Zn),s=x.c(l,MB,20),c=x.b(l,NC),d=x.b(l,cA),f=x.b(l,NH),_=x.b(l,aE),g=x.b(l,QF),m=x.b(l,gw),w=x.b(l,cu),v=x.b(l,Os),b=x.b(l,sy),y=x.b(l,uC),k=p(y)?Ef(y):x.b(dT,u),I=new xl((function(){return OS.a(n)})),E=p(g)?g:function(e){return e};return"undefined"!==typeof Ac&&"undefined"!==typeof nS&&"undefined"!==typeof oS&&"undefined"!==typeof uX||((uX=function(e,n,t,r,o,i,l,a,u,s,c,d,f,p,h,_,g,m,w,v,b,y,k,C,I){this.form=e,this.Pg=n,this.Tb=t,this.jh=r,this.$f=o,this.jb=i,this.Hg=l,this.Sb=a,this.ce=u,this.ug=s,this.Kg=c,this.Yf=d,this.Xd=f,this.wg=p,this.xg=h,this.Sd=_,this.Jg=g,this.Gg=m,this.count=w,this.mh=v,this.Df=b,this.kind=y,this.uf=k,this.tg=C,this.Wg=I,this.h=393216,this.I=0}).prototype.O=function(e,n){return new uX(this.form,this.Pg,this.Tb,this.jh,this.$f,this.jb,this.Hg,this.Sb,this.ce,this.ug,this.Kg,this.Yf,this.Xd,this.wg,this.xg,this.Sd,this.Jg,this.Gg,this.count,this.mh,this.Df,this.kind,this.uf,this.tg,n)},uX.prototype.N=function(){return this.Wg},uX.prototype.Db=function(){return this},uX.prototype.Eb=function(){return this},uX.prototype.rc=h,uX.prototype.Zb=function(e,n){if(e=t(this.Sd),Tc(this.ce.a?this.ce.a(n):this.ce.call(null,n)))return Nr;if(p(this.uf)){var r=this.Xd.a?this.Xd.a(n):this.Xd.call(null,n),o=J(r,0,null),i=J(r,1,null);r=J(r,2,null);var l=o.a?o.a(n):o.call(null,n);o=0;var a=B(n);for(C(n=B(a)),D(n),n=l;;){var u=a;if(a=C(l=B(u)),l=D(l),!u)return r.a?r.a(n):r.call(null,n);if(PS(u=zS(e,a)))return Nr;n=i.A?i.A(n,o,a,u):i.call(null,n,o,a,u),o+=1,a=l}}else if(mf(n))for(i=1>(i=sg(F(n)/101))?1:i,o=0;;){if(o>=F(n))return n;if(!TS(e,pf(n,o)))return Nr;o+=i}else for(o=0,i=B(n),C(r=B(i)),D(r);;){if(r=C(a=B(i)),l=D(a),a=r,null==(u=i)||A.b(o,101))return n;if(!TS(e,a))return Nr;i=l,o+=1}},uX.prototype.$b=function(e,n){return eT(this.form,this.Sb,this.Df,n)},uX.Pa=function(){return new Q(null,25,5,R,[wF,Ao,OG,yF,UE,Sv,yG,Oo,Op,dz,vA,NB,xG,Js,DG,hy,rA,gu,wB,jC,nx,$D,SF,bo,nF],null)},uX.Ia=!0,uX.Da="cljs.spec.alpha/t_cljs$spec$alpha12350",uX.Ja=function(e){return ce(e,"cljs.spec.alpha/t_cljs$spec$alpha12350")}),new uX(e,a,l,r,(function(e){return TS(t(I),e)}),o,s,n,c,d,u,i,(function(e){return Vf(e)&&(Tc(y)||Vf(y))?new Q(null,3,5,R,[lg,function(e,n,t,r){return t===r?e:K.c(e,n,r)},lg],null):p(!!M(e)&&function(){var e=p(v)?Tc(y):v;return p(e)?e:M(y)}())?new Q(null,3,5,R,[p(d)?Ef:lg,function(e,n,t,r){return t===r&&Tc(d)?e:K.c(e,pf(p(d)?r:t,0),pf(r,1))},lg],null):Cg(y)||$f(y)||Tc(y)&&(Cg(e)||$f(e))?new Q(null,3,5,R,[Ef,i,Eg],null):new Q(null,3,5,R,[function(e){return Ef(p(y)?y:e)},i,lg],null)}),f,_,I,E,k,m,w,l,v,b,y,S)}function fT(e){return new n(null,2,[pB,$s,Mu,e],null)}function gT(e){return e=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e,e=x.b(e,pB),A.b($s,e)}var hT=function e(t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,Iz),i=C(t=B(o));t=D(t);var l=x.b(r,hz),a=B(l),u=C(a);a=D(a);var s=x.b(r,jr),c=B(s);C(c),c=D(c);var d=x.b(r,Mu);return r=x.b(r,dy),Dh(lg,o)?gT(i)?(o=Mu.a(i),o=Cf.b(d,p(l)?Gf([u,o]):o),t?(t=new n(null,4,[Iz,t,hz,a,jr,c,Mu,o],null),e.a?e.a(t):e.call(null,t)):fT(o)):new n(null,6,[pB,Or,Iz,o,Mu,d,hz,l,jr,s,dy,r],null):null};function iT(e,t,r,o,i){return p(e)?(o=new n(null,5,[pB,Ww,Ly,t,sw,o,jr,i,qJ,gm()],null),gT(e)?K.g(o,My,t,G([Mu,Cf.b(r,Mu.a(e))])):K.g(o,My,e,G([Mu,r]))):null}function jT(e,n,t,r){return p(p(n)?n:t)?(e=fi.b((function(e){return e=C(e),r.a?r.a(e):r.call(null,e)}),Wh.A(Ri,e,function(){var e=B(n);return e||new $h(null,-1,null,null)}(),function(){var e=B(t);return e||new $h(null,-1,null,null)}())),new Q(null,3,5,R,[B(Wh.b(C,e)),p(n)?B(Wh.b(zf,e)):null,p(t)?B(Wh.b((function(e){return pf(e,2)}),e)):null],null)):new Q(null,3,5,R,[B(fi.b(r,e)),n,t],null)}function kT(e,t,r){var o=jT(e,t,r,lg);e=C(r=B(t=J(o,0,null))),r=D(r);var i=J(o,1,null),l=J(i,0,null);return o=J(o,2,null),p(t)?(t=new n(null,4,[pB,Kn,Iz,t,hz,i,jr,o],null),null==r?p(l)?gT(e)?fT(ZS(l,Mu.a(e))):t:e:t):null}function lT(e,n){return p(p(e)?n:e)?kT(G([e,n]),null,null):p(e)?e:n}var mT=function e(n){var t=null!=(n=DS(n))&&(64&n.h||h===n.D)?fh(qk,n):n,r=x.b(t,pB),o=x.b(t,Iz);n=x.b(t,My);var i=x.b(t,Ly);if(t=x.b(t,jr),A.b($s,r))return!0;if(A.b(null,r))return null;if(A.b(En,r))return p(r=e.a?e.a(n):e.call(null,n))?!PS(n=aT(nT(n),o,D(t))):r;if(A.b(Ww,r))return(o=n===i)?o:e.a?e.a(n):e.call(null,n);if(A.b(Or,r))return Dh(e,o);if(A.b(Kn,r))return Eh(e,o);throw Error(["No matching clause: ",q.a(r)].join(""))},nT=function e(t){var r=null!=(t=DS(t))&&(64&t.h||h===t.D)?fh(qk,t):t,o=B(t=x.b(r,Iz)),i=C(o);D(o);var l=x.b(r,hz),a=J(l,0,null),u=x.b(r,pB);o=x.b(r,My);var s=x.b(r,Mu);if(r=x.b(r,jr),A.b($s,u))return s;if(A.b(null,u))return null;if(A.b(En,u))return i=e.a?e.a(o):e.call(null,o),(l=A.b(i,Yn))?o=l:(o=pB.a(DS(o)),o=p(o=(l=new Bk(null,new n(null,2,[Ww,null,Or,null],null),null)).a?l.a(o):l.call(null,o))?Pf(i):o,o=p(o)?o:null),p(o)?Yn:aT(i,t,r);if(A.b(Ww,u))return oT(o,s,a);if(A.b(Or,u))return oT(i,s,a);if(A.b(Kn,u))return t=J(r=jT(t,l,r,mT),0,null),t=J(t,0,null),r=J(r,1,null),r=J(r,0,null),t=null==t?Yn:e.a?e.a(t):e.call(null,t),p(r)?ZS(r,t):t;throw Error(["No matching clause: ",q.a(u)].join(""))};function oT(e,n,t){var r=null!=(e=DS(e))&&(64&e.h||h===e.D)?fh(qk,e):e,o=x.b(r,pB);if(x.b(r,Iz),e=x.b(r,sw),A.b(null,o))return n;if(A.b(Kn,o)||A.b($s,o)||A.b(En,o))return e=nT(r),A.b(e,Yn)?n:Cf.b(n,p(t)?Gf([t,e]):e);if(A.b(Ww,o)||A.b(Or,o))return Pf(r=nT(r))||(t=p(t)?Gf([t,r]):r,n=(e=p(e)?ji:Cf).b?e.b(n,t):e.call(null,n,t)),n;throw Error(["No matching clause: ",q.a(o)].join(""))}var pT=function e(t,r){var o=null!=(t=DS(t))&&(64&t.h||h===t.D)?fh(qk,t):t,i=x.b(o,jr),l=x.b(o,Ly),a=B(t=x.b(o,Iz)),u=C(a),s=D(a),c=x.b(o,Mu);a=x.b(o,pB);var d=x.b(o,sw),f=x.b(o,hz),_=B(f),g=C(_),m=D(_);_=x.b(o,JC);var w=x.b(o,My);if(p(o)){if(A.b($s,a))return null;if(A.b(null,a))return PS(t=SS(o,r,o))?null:fT(t);if(A.b(En,a))return p(o=e.b?e.b(w,r):e.call(null,w,r))?A.b($s,pB.a(o))?PS(t=aT(nT(o),t,D(i)))?null:fT(t):new n(null,5,[pB,En,My,o,JC,_,Iz,t,jr,i],null):null;if(A.b(Or,a))return lT(hT(new n(null,4,[Iz,vf(e.b?e.b(u,r):e.call(null,u,r),s),hz,f,jr,i,Mu,c],null)),p(mT(u))?function(){var t=hT(new n(null,4,[Iz,s,hz,m,jr,D(i),Mu,oT(u,c,g)],null));return e.b?e.b(t,r):e.call(null,t,r)}():null);if(A.b(Kn,a))return kT(Wh.b((function(n){return e.b?e.b(n,r):e.call(null,n,r)}),t),f,i);if(A.b(Ww,a))return lT(iT(e.b?e.b(w,r):e.call(null,w,r),l,c,d,i),p(mT(w))?function(){var n=iT(l,l,oT(w,c,null),d,i);return e.b?e.b(n,r):e.call(null,n,r)}():null);throw Error(["No matching clause: ",q.a(a)].join(""))}return null};function qT(e,n){for(;;){var t=B(n),r=C(t);if(t=D(t),Pf(n))return p(mT(e))?(e=nT(e),A.b(e,Yn)?null:e):Nr;if(!p(e=pT(e,r)))return Nr;n=t}}var JS=function e(n,t){return"undefined"!==typeof Ac&&"undefined"!==typeof nS&&"undefined"!==typeof oS&&"undefined"!==typeof vX||((vX=function(e,n,t){this.qe=e,this.jb=n,this.Yg=t,this.h=393216,this.I=0}).prototype.O=function(e,n){return new vX(this.qe,this.jb,n)},vX.prototype.N=function(){return this.Yg},vX.prototype.Db=function(){return this},vX.prototype.Eb=function(){return this},vX.prototype.rc=h,vX.prototype.Zb=function(e,n){return null==n||Tf(n)?qT(this.qe,B(n)):Nr},vX.prototype.$b=function(n,t){return e.b?e.b(this.qe,t):e.call(null,this.qe,t)},vX.Pa=function(){return new Q(null,3,5,R,[Pp,Sv,fU],null)},vX.Ia=!0,vX.Da="cljs.spec.alpha/t_cljs$spec$alpha13104",vX.Ja=function(e){return ce(e,"cljs.spec.alpha/t_cljs$spec$alpha13104")}),new vX(n,t,S)};Z(Ls,O(YG,O(Cm,new Q(null,1,5,R,[dU],null),O(Cs,O(Tw,ur,dU),O(Tw,rr,dU))),O(Cm,new Q(null,1,5,R,[LH],null),O(Tw,O(W,new Q(null,1,5,R,[new Q(null,2,5,R,[Lp,Jp],null)],null),new n(null,2,[ur,Lp,rr,Jp],null)),LH))),NS(O(YG,O(W,new Q(null,1,5,R,[V],null),O(Cs,O(Tw,ur,V),O(Tw,rr,V))),O(W,new Q(null,1,5,R,[V],null),O(Tw,O(W,new Q(null,1,5,R,[new Q(null,2,5,R,[Lp,Jp],null)],null),new n(null,2,[ur,Lp,rr,Jp],null)),V))),(function(e){return Ik(Wh.b(ur,e),Wh.b(rr,e))}),null,!0,(function(e){return Wh.b((function(e){var t=J(e,0,null);return e=J(e,1,null),new n(null,2,[ur,t,rr,e],null)}),e)})));var rT=function e(n,r,o){var i=new xl((function(){return OS.b(r,n)}));return"undefined"!==typeof Ac&&"undefined"!==typeof nS&&"undefined"!==typeof oS&&"undefined"!==typeof SY||((SY=function(e,n,t,r,o){this.form=e,this.Sb=n,this.jb=t,this.Sd=r,this.Zg=o,this.h=393216,this.I=0}).prototype.O=function(e,n){return new SY(this.form,this.Sb,this.jb,this.Sd,n)},SY.prototype.N=function(){return this.Zg},SY.prototype.Db=function(){return this},SY.prototype.Eb=function(){return this},SY.prototype.rc=h,SY.prototype.Zb=function(e,n){return null==n?null:zS(t(this.Sd),n)},SY.prototype.$b=function(n,t){return e.c?e.c(this.form,this.Sb,t):e.call(null,this.form,this.Sb,t)},SY.Pa=function(){return new Q(null,5,5,R,[wF,Oo,Sv,hy,kI],null)},SY.Ia=!0,SY.Da="cljs.spec.alpha/t_cljs$spec$alpha13317",SY.Ja=function(e){return ce(e,"cljs.spec.alpha/t_cljs$spec$alpha13317")}),new SY(n,r,o,i,S)};Z(Uz,Bo,Vc),Z(zF,Bo,Vc),Z(yB,Gw,yg),Z(fq,lI,Uc),Z(ay,O(wt,ir,new Q(null,3,5,R,[Uz,zF,yB],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[Uz,zF,yB],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,$v)},function(e){return N(e,Rn)},function(e){return N(e,Ln)}],null),function(e){return M(e)&&N(e,$v)&&N(e,Rn)&&N(e,Ln)},I,new Q(null,3,5,R,[Uz,zF,yB],null),null,new Q(null,3,5,R,[$v,Rn,Ln],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,$v)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Rn)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Ln))],null),null]))),Z(GA,Bo,Vc),Z(To,O(vI,GA,O(wt,ir,new Q(null,2,5,R,[fq,ay],null))),eT(O(gr,GA,O(uu,ir,new Q(null,2,5,R,[fq,ay],null))),XS(new Q(null,2,5,R,[GA,O(wt,ir,new Q(null,2,5,R,[fq,ay],null))],null),new Q(null,2,5,R,[GA,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[fq,ay],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,tq)},function(e){return N(e,sD)}],null),function(e){return M(e)&&N(e,tq)&&N(e,sD)},I,new Q(null,2,5,R,[fq,ay],null),null,new Q(null,2,5,R,[tq,sD],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,tq)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,sD))],null),null]))],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,GA,O(wt,ir,new Q(null,2,5,R,[fq,ay],null)))],null),null)),Z(JA,Bo,Vc),Z(GF,O(CJ,Bo),rT(Bo,Vc,null)),Z(nn,GC,cg),Z(pq,Bo,Vc);var sT,xZ=Oh(S),yZ=Oh(S),zZ=Oh(S),AZ=Oh(S),F0=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));sT=new dm(Me.b(Ta,"address-type"),U,F0,xZ,yZ,zZ,AZ),Z(ws,BI,Wc),sT.v(null,Fs,(function(){return US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[rn,ws],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,U)},function(e){return N(e,lD)}],null),function(e){return M(e)&&N(e,U)&&N(e,lD)},I,new Q(null,2,5,R,[rn,ws],null),null,new Q(null,2,5,R,[U,lD],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,lD))],null),null]))})),Z(Yo,Bo,Vc),sT.v(null,WI,(function(){return US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[rn,zq,Yo],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,U)},function(e){return N(e,Fp)},function(e){return N(e,Yp)}],null),function(e){return M(e)&&N(e,U)&&N(e,Fp)&&N(e,Yp)},I,new Q(null,3,5,R,[rn,zq,Yo],null),null,new Q(null,3,5,R,[U,Fp,Yp],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Fp)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Yp))],null),null]))})),sT.v(null,Zv,(function(){return US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[rn],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,U)}],null),function(e){return M(e)&&N(e,U)},I,new Q(null,1,5,R,[rn],null),null,new Q(null,1,5,R,[U],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U))],null),null]))})),sT.v(null,Yp,(function(){return US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[rn,Yo],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,U)},function(e){return N(e,Yp)}],null),function(e){return M(e)&&N(e,U)&&N(e,Yp)},I,new Q(null,2,5,R,[rn,Yo],null),null,new Q(null,2,5,R,[U,Yp],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Yp))],null),null]))})),sT.v(null,em,(function(){return US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[rn],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,U)}],null),function(e){return M(e)&&N(e,U)},I,new Q(null,1,5,R,[rn],null),null,new Q(null,1,5,R,[U],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U))],null),null]))})),Z(av,O(io,XA,U),VS(XA,new Ne((function(){return sT}),XA,Xj([By,yw,OD,ho,ux,en,fz,AE,Dv,jF],[jx,dp,"gateway/state/spec/common.cljc",23,1,10,10,Se,null,p(sT)?sT.ld:null])))),Z(Br,O(io,XA,U),VS(XA,new Ne((function(){return sT}),XA,Xj([By,yw,OD,ho,ux,en,fz,AE,Dv,jF],[jx,dp,"gateway/state/spec/common.cljc",23,1,10,10,Se,null,p(sT)?sT.ld:null])))),Z(Wx,O(vI,O(ZB,UD,Bo,GJ,Qp),BI),eT(O(gr,O(KF,UD,Uy,GJ,ep),qC),XS(new Q(null,2,5,R,[O(ZB,UD,Bo,GJ,Qp),BI],null),new Q(null,2,5,R,[$S(new Q(null,2,5,R,[UD,GJ],null),new Q(null,2,5,R,[Bo,Qp],null),new Q(null,2,5,R,[Vc,Hg],null),null),Wc],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,O(ZB,UD,Bo,GJ,Qp),BI)],null),null)),Z(nH,O(ZB,Po,Bx,Fn,Bo,IJ,XF),$S(new Q(null,3,5,R,[Po,Fn,IJ],null),new Q(null,3,5,R,[Bx,Bo,XF],null),new Q(null,3,5,R,[Qc,Vc,Vf],null),null)),Z(Bp,O(kD,Bo,Hp),bT(new Q(null,2,5,R,[Bo,Hp],null),new Q(null,2,5,R,[Vc,B],null),null)),Z(Xy,Bo,Vc),Z(LI,O(CJ,Hq),rT(Hq,M,null)),Z(nB,nH,nH),Z(tI,nH,nH),Z(bn,O(kD,Qp,O(Cm,new Q(null,1,5,R,[aF],null),O(jG,new Bk(null,new n(null,4,[aI,"null",Tr,"null",Go,"null",Mw,"null"],null),null),aF))),bT(new Q(null,2,5,R,[Qp,O(W,new Q(null,1,5,R,[V],null),O(jG,new Bk(null,new n(null,4,[aI,"null",Tr,"null",Go,"null",Mw,"null"],null),null),V))],null),new Q(null,2,5,R,[Hg,function(e){return N(new Bk(null,new n(null,4,[aI,null,Tr,null,Go,null,Mw,null],null),null),e)}],null),null)),Z(wn,O(hq,JA,Os,VB),eT(JA,JA,new n(null,5,[Zn,VB,NC,function(e){return Rf(e)},Os,Rf,sy,!0,NH,O(hq,JA,Os,VB)],null),null)),Z(Ex,JA,JA),Z(Tp,gq,Sc),Z(In,gq,Sc),Z(ZC,O(wt,ir,new Q(null,2,5,R,[Tp,In],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[Tp,In],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,HA)},function(e){return N(e,Zt)}],null),function(e){return M(e)&&N(e,HA)&&N(e,Zt)},I,new Q(null,2,5,R,[Tp,In],null),null,new Q(null,2,5,R,[HA,Zt],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,HA)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Zt))],null),null]))),Z(WE,O(wt,ir,new Q(null,3,5,R,[Bp,bn,wn],null),iA,new Q(null,6,5,R,[Xy,nB,tI,LI,Ex,ZC],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[Bp,bn,wn],null),new Q(null,6,5,R,[Xy,nB,tI,LI,Ex,ZC],null),null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,qJ)},function(e){return N(e,Zz)},function(e){return N(e,tD)}],null),function(e){return M(e)&&N(e,qJ)&&N(e,Zz)&&N(e,tD)},new Q(null,6,5,R,[yw,gz,Ys,yn,oA,Ln],null),new Q(null,3,5,R,[Bp,bn,wn],null),null,new Q(null,3,5,R,[qJ,Zz,tD],null),new Q(null,6,5,R,[Xy,nB,tI,LI,Ex,ZC],null),new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,qJ)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Zz)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,tD))],null),null]))),Z(Gy,O(vI,Bp,WE),eT(O(gr,Bp,WE),XS(new Q(null,2,5,R,[Bp,WE],null),new Q(null,2,5,R,[Bp,WE],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,Bp,WE)],null),null)),Z(Rr,GC,cg),Z(EH,Bo,Vc),Z(cw,O(vI,lI,BI),eT(O(gr,CA,qC),XS(new Q(null,2,5,R,[lI,BI],null),new Q(null,2,5,R,[Uc,Wc],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,lI,BI)],null),null)),Z(fJ,O(vI,lI,BI),eT(O(gr,CA,qC),XS(new Q(null,2,5,R,[lI,BI],null),new Q(null,2,5,R,[Uc,Wc],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,lI,BI)],null),null)),Z(Nq,O(wt,ir,new Q(null,2,5,R,[Rr,EH],null),iA,new Q(null,2,5,R,[cw,fJ],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[Rr,EH],null),new Q(null,2,5,R,[cw,fJ],null),null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,qJ)},function(e){return N(e,KH)}],null),function(e){return M(e)&&N(e,qJ)&&N(e,KH)},new Q(null,2,5,R,[PH,fv],null),new Q(null,2,5,R,[Rr,EH],null),null,new Q(null,2,5,R,[qJ,KH],null),new Q(null,2,5,R,[cw,fJ],null),new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,qJ)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,KH))],null),null]))),Z(hF,O(vI,EH,Nq),eT(O(gr,EH,Nq),XS(new Q(null,2,5,R,[EH,Nq],null),new Q(null,2,5,R,[EH,Nq],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,EH,Nq)],null),null)),Z(AA,Bo,Vc),Z(yv,AA,AA),Z(Wr,O(vI,lI,lI),eT(O(gr,CA,CA),XS(new Q(null,2,5,R,[lI,lI],null),new Q(null,2,5,R,[Uc,Uc],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,lI,lI)],null),null)),Z(Gv,O(wt,ir,new Q(null,1,5,R,[AA],null),iA,new Q(null,2,5,R,[yv,Wr],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[AA],null),new Q(null,2,5,R,[yv,Wr],null),null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,U)}],null),function(e){return M(e)&&N(e,U)},new Q(null,2,5,R,[yw,PH],null),new Q(null,1,5,R,[AA],null),null,new Q(null,1,5,R,[U],null),new Q(null,2,5,R,[yv,Wr],null),new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U))],null),null]))),Z(Sq,Gv,Gv),Z(Ft,O(hq,Gv,Os,XF),eT(Gv,Gv,new n(null,5,[Zn,XF,NC,function(e){return Vf(e)},Os,Vf,sy,!0,NH,O(hq,Gv,Os,XF)],null),null)),Z(PD,O(vI,lI,lI),eT(O(gr,CA,CA),XS(new Q(null,2,5,R,[lI,lI],null),new Q(null,2,5,R,[Uc,Uc],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,lI,lI)],null),null)),Z(Eq,nH,nH),Z(VD,O(wt,ir,new Q(null,2,5,R,[yv,Sq],null),iA,new Q(null,3,5,R,[Ft,PD,Eq],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[yv,Sq],null),new Q(null,3,5,R,[Ft,PD,Eq],null),null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,yw)},function(e){return N(e,uH)}],null),function(e){return M(e)&&N(e,yw)&&N(e,uH)},new Q(null,3,5,R,[aG,Rz,Kx],null),new Q(null,2,5,R,[yv,Sq],null),null,new Q(null,2,5,R,[yw,uH],null),new Q(null,3,5,R,[Ft,PD,Eq],null),new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yw)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,uH))],null),null]))),Z(dv,Bo,Vc),Z(tr,O(vI,dv,O(vI,AA,VD)),eT(O(gr,dv,O(HF,AA,VD)),XS(new Q(null,2,5,R,[dv,O(vI,AA,VD)],null),new Q(null,2,5,R,[dv,eT(O(gr,AA,VD),XS(new Q(null,2,5,R,[AA,VD],null),new Q(null,2,5,R,[AA,VD],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,AA,VD)],null),null)],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,dv,O(vI,AA,VD))],null),null)),Z(Cn,Bo,Vc),Z(ht,Bp,Bp),Z(Tq,JA,JA),Z(Sy,JA,JA),Z(mr,O(hq,JA,Os,VB),eT(JA,JA,new n(null,5,[Zn,VB,NC,function(e){return Rf(e)},Os,Rf,sy,!0,NH,O(hq,JA,Os,VB)],null),null)),Z(NA,O(hq,JA,Os,VB),eT(JA,JA,new n(null,5,[Zn,VB,NC,function(e){return Rf(e)},Os,Rf,sy,!0,NH,O(hq,JA,Os,VB)],null),null)),Z(RB,WE,WE),Z(sI,O(wt,ir,new Q(null,3,5,R,[AA,RB,Sy],null),iA,new Q(null,3,5,R,[NA,oC,wu],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[AA,RB,Sy],null),new Q(null,3,5,R,[NA,oC,wu],null),null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,U)},function(e){return N(e,fI)},function(e){return N(e,oA)}],null),function(e){return M(e)&&N(e,U)&&N(e,fI)&&N(e,oA)},new Q(null,3,5,R,[fs,Iw,YC],null),new Q(null,3,5,R,[AA,RB,Sy],null),null,new Q(null,3,5,R,[U,fI,oA],null),new Q(null,3,5,R,[NA,oC,wu],null),new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,fI)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,oA))],null),null]))),Z(wu,O(vI,Cn,sI),eT(O(gr,Cn,sI),XS(new Q(null,2,5,R,[Cn,sI],null),new Q(null,2,5,R,[Cn,sI],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,Cn,sI)],null),null)),Z(Jy,Cn,Cn),Z(GB,jH,Zf),Z(lB,O(wt,ir,new Q(null,4,5,R,[Cn,AA,Mq,Tq],null),iA,new Q(null,5,5,R,[GB,Sy,NA,mr,wu],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,4,5,R,[Cn,AA,Mq,Tq],null),new Q(null,5,5,R,[GB,Sy,NA,mr,wu],null),null,new Q(null,5,5,R,[function(e){return M(e)},function(e){return N(e,qJ)},function(e){return N(e,U)},function(e){return N(e,ap)},function(e){return N(e,ln)}],null),function(e){return M(e)&&N(e,qJ)&&N(e,U)&&N(e,ap)&&N(e,ln)},new Q(null,5,5,R,[Io,oA,fs,zG,YC],null),new Q(null,4,5,R,[Cn,AA,Mq,Tq],null),null,new Q(null,4,5,R,[qJ,U,ap,ln],null),new Q(null,5,5,R,[GB,Sy,NA,mr,wu],null),new Q(null,5,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,qJ)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ap)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ln))],null),null]))),Z(vE,O(vI,Cn,lB),eT(O(gr,Cn,lB),XS(new Q(null,2,5,R,[Cn,lB],null),new Q(null,2,5,R,[Cn,lB],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,Cn,lB)],null),null)),Z(DD,O(wt,iA,new Q(null,1,5,R,[hF],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[null,new Q(null,1,5,R,[hF],null),null,new Q(null,1,5,R,[function(e){return M(e)}],null),function(e){return M(e)},new Q(null,1,5,R,[ZF],null),I,null,I,new Q(null,1,5,R,[hF],null),new Q(null,1,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V))],null),null]))),Z(DB,O(vI,O(ZB,U,AA,yC,O($A,pH,yC)),O(hq,JA,Os,VB)),eT(O(gr,O(KF,U,AA,yC,O(Ou,lF,yC)),O(mz,JA,Os,KA)),XS(new Q(null,2,5,R,[O(ZB,U,AA,yC,O($A,pH,yC)),O(hq,JA,Os,VB)],null),new Q(null,2,5,R,[$S(new Q(null,2,5,R,[U,yC],null),new Q(null,2,5,R,[AA,O($A,pH,yC)],null),new Q(null,2,5,R,[AA,Jh(A,yC)],null),null),eT(JA,JA,new n(null,5,[Zn,VB,NC,function(e){return Rf(e)},Os,Rf,sy,!0,NH,O(hq,JA,Os,VB)],null),null)],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,O(ZB,U,AA,yC,O($A,pH,yC)),O(hq,JA,Os,VB))],null),null)),Z(RG,GC,cg),Z(uB,Bo,Vc),Z(Uo,GC,cg),Z(KD,Bo,Vc),Z(lr,Bo,Vc),Z(xE,Bo,Vc),Z(hv,Bo,Vc),Z(LD,O(wt,ir,new Q(null,6,5,R,[RG,uB,Uo,mp,KD,lr],null),iA,new Q(null,3,5,R,[xE,hv,nH],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,6,5,R,[RG,uB,Uo,mp,KD,lr],null),new Q(null,3,5,R,[xE,hv,nH],null),null,new Q(null,7,5,R,[function(e){return M(e)},function(e){return N(e,qJ)},function(e){return N(e,yw)},function(e){return N(e,Ln)},function(e){return N(e,fv)},function(e){return N(e,vp)},function(e){return N(e,up)}],null),function(e){return M(e)&&N(e,qJ)&&N(e,yw)&&N(e,Ln)&&N(e,fv)&&N(e,vp)&&N(e,up)},new Q(null,3,5,R,[Uv,Rn,os],null),new Q(null,6,5,R,[RG,uB,Uo,mp,KD,lr],null),null,new Q(null,6,5,R,[qJ,yw,Ln,fv,vp,up],null),new Q(null,3,5,R,[xE,hv,nH],null),new Q(null,7,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,qJ)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yw)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Ln)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,fv)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,vp)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,up))],null),null]))),Z(XH,O(ZB,kB,dD,xo,O(vI,RG,LD)),$S(new Q(null,2,5,R,[kB,xo],null),new Q(null,2,5,R,[dD,O(vI,RG,LD)],null),new Q(null,2,5,R,[Pf,eT(O(gr,RG,LD),XS(new Q(null,2,5,R,[RG,LD],null),new Q(null,2,5,R,[RG,LD],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,RG,LD)],null),null)],null),null)),Z(Qs,O(vI,JA,XH),eT(O(gr,JA,XH),XS(new Q(null,2,5,R,[JA,XH],null),new Q(null,2,5,R,[JA,XH],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,JA,XH)],null),null)),Z($G,RG,RG),Z(vy,GF,GF),Z(EI,GF,GF),Z(gG,GF,GF),Z(py,JA,JA),Z(dr,O(wt,ir,new Q(null,3,5,R,[py,$G,vy],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[py,$G,vy],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,Yr)},function(e){return N(e,MI)},function(e){return N(e,qu)}],null),function(e){return M(e)&&N(e,Yr)&&N(e,MI)&&N(e,qu)},I,new Q(null,3,5,R,[py,$G,vy],null),null,new Q(null,3,5,R,[Yr,MI,qu],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Yr)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,MI)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,qu))],null),null]))),Z(Vo,O(vI,gG,dr),eT(O(gr,gG,dr),XS(new Q(null,2,5,R,[gG,dr],null),new Q(null,2,5,R,[gG,dr],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,gG,dr)],null),null)),Z(ry,JA,JA),Z($t,O(wt,ir,new Q(null,3,5,R,[ry,$G,gG],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[ry,$G,gG],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,Qr)},function(e){return N(e,MI)},function(e){return N(e,is)}],null),function(e){return M(e)&&N(e,Qr)&&N(e,MI)&&N(e,is)},I,new Q(null,3,5,R,[ry,$G,gG],null),null,new Q(null,3,5,R,[Qr,MI,is],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Qr)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,MI)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,is))],null),null]))),Z(BE,O(vI,vy,$t),eT(O(gr,vy,$t),XS(new Q(null,2,5,R,[vy,$t],null),new Q(null,2,5,R,[vy,$t],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,vy,$t)],null),null)),Z(mD,Bo,Vc),Z(oD,mD,mD),Z(Es,JA,JA),Z(bq,O(wt,ir,new Q(null,3,5,R,[Es,$G,gG],null),iA,new Q(null,1,5,R,[oD],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[Es,$G,gG],null),new Q(null,1,5,R,[oD],null),null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,vo)},function(e){return N(e,MI)},function(e){return N(e,is)}],null),function(e){return M(e)&&N(e,vo)&&N(e,MI)&&N(e,is)},new Q(null,1,5,R,[sJ],null),new Q(null,3,5,R,[Es,$G,gG],null),null,new Q(null,3,5,R,[vo,MI,is],null),new Q(null,1,5,R,[oD],null),new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,vo)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,MI)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,is))],null),null]))),Z(RA,O(vI,EI,bq),eT(O(gr,EI,bq),XS(new Q(null,2,5,R,[EI,bq],null),new Q(null,2,5,R,[EI,bq],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,EI,bq)],null),null)),Z(Ho,JA,JA),Z(Vq,O(wt,Oq,new Q(null,2,5,R,[Ho,RG],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[null,null,null,new Q(null,1,5,R,[function(e){return M(e)}],null),function(e){return M(e)},I,I,null,I,I,new Q(null,1,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V))],null),null]))),Z(gy,O(vI,EI,Vq),eT(O(gr,EI,Vq),XS(new Q(null,2,5,R,[EI,Vq],null),new Q(null,2,5,R,[EI,Vq],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,EI,Vq)],null),null)),Z(gF,O(vI,JA,O(hq,EI,Os,VB)),eT(O(gr,JA,O(mz,EI,Os,KA)),XS(new Q(null,2,5,R,[JA,O(hq,EI,Os,VB)],null),new Q(null,2,5,R,[JA,eT(EI,EI,new n(null,5,[Zn,VB,NC,function(e){return Rf(e)},Os,Rf,sy,!0,NH,O(hq,EI,Os,VB)],null),null)],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,JA,O(hq,EI,Os,VB))],null),null)),Z(aJ,O(vI,mD,gF),eT(O(gr,mD,gF),XS(new Q(null,2,5,R,[mD,gF],null),new Q(null,2,5,R,[mD,gF],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,mD,gF)],null),null)),Z(sF,O(wt,iA,new Q(null,7,5,R,[nH,Qs,Vo,BE,RA,gy,aJ],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[null,new Q(null,7,5,R,[nH,Qs,Vo,BE,RA,gy,aJ],null),null,new Q(null,1,5,R,[function(e){return M(e)}],null),function(e){return M(e)},new Q(null,7,5,R,[os,Zw,jA,Xw,qy,$n,AD],null),I,null,I,new Q(null,7,5,R,[nH,Qs,Vo,BE,RA,gy,aJ],null),new Q(null,1,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V))],null),null]))),Z(eo,GF,GF),Z(Az,Bo,Vc),Z(yq,BI,Wc),Z(XI,O(wt,ir,new Q(null,1,5,R,[Az],null),iA,new Q(null,2,5,R,[yq,Ey],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[Az],null),new Q(null,2,5,R,[yq,Ey],null),null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Zo)}],null),function(e){return M(e)&&N(e,Zo)},new Q(null,2,5,R,[mF,MH],null),new Q(null,1,5,R,[Az],null),null,new Q(null,1,5,R,[Zo],null),new Q(null,2,5,R,[yq,Ey],null),new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Zo))],null),null]))),Z(Ss,O(vI,eo,XI),eT(O(gr,eo,XI),XS(new Q(null,2,5,R,[eo,XI],null),new Q(null,2,5,R,[eo,XI],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,eo,XI)],null),null)),Z(ZG,O(wt,iA,new Q(null,1,5,R,[Ss],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[null,new Q(null,1,5,R,[Ss],null),null,new Q(null,1,5,R,[function(e){return M(e)}],null),function(e){return M(e)},new Q(null,1,5,R,[qy],null),I,null,I,new Q(null,1,5,R,[Ss],null),new Q(null,1,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V))],null),null]))),Z(dE,Bo,Vc),Z(mB,GC,cg),Z(Qz,JA,JA),Z(VC,GF,GF),Z(Kv,O(wt,ir,new Q(null,2,5,R,[Qz,VC],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[Qz,VC],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,hD)},function(e){return N(e,AH)}],null),function(e){return M(e)&&N(e,hD)&&N(e,AH)},I,new Q(null,2,5,R,[Qz,VC],null),null,new Q(null,2,5,R,[hD,AH],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,hD)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,AH))],null),null]))),Z(eH,GF,GF),Z(Ns,Bo,Vc),Z(eF,jH,Zf),Z($r,O(wt,Oq,new Q(null,2,5,R,[Ns,eF],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[null,null,null,new Q(null,1,5,R,[function(e){return M(e)}],null),function(e){return M(e)},I,I,null,I,I,new Q(null,1,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V))],null),null]))),Z(Fu,dE,dE),Z(tu,new Bk(null,new n(null,2,[BB,"null",Tr,"null"],null),null),new Bk(null,new n(null,2,[BB,null,Tr,null],null),null)),Z(Dw,O(wt,ir,new Q(null,2,5,R,[Ns,tu],null),iA,new Q(null,3,5,R,[Yy,$r,EH],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[Ns,tu],null),new Q(null,3,5,R,[Yy,$r,EH],null),null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,qJ)},function(e){return N(e,U)}],null),function(e){return M(e)&&N(e,qJ)&&N(e,U)},new Q(null,3,5,R,[gn,Tr,KH],null),new Q(null,2,5,R,[Ns,tu],null),null,new Q(null,2,5,R,[qJ,U],null),new Q(null,3,5,R,[Yy,$r,EH],null),new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,qJ)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U))],null),null]))),Z(Ks,O(vI,eH,Dw),eT(O(gr,eH,Dw),XS(new Q(null,2,5,R,[eH,Dw],null),new Q(null,2,5,R,[eH,Dw],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,eH,Dw)],null),null)),Z(qp,GC,cg),Z(Rt,Dw,Dw),Z(zy,O(wt,ir,new Q(null,2,5,R,[Br,Wx],null),iA,new Q(null,6,5,R,[cD,sF,DD,ZG,Rt,EH],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[Br,Wx],null),new Q(null,6,5,R,[cD,sF,DD,ZG,Rt,EH],null),null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,lz)},function(e){return N(e,pD)}],null),function(e){return M(e)&&N(e,lz)&&N(e,pD)},new Q(null,6,5,R,[eI,ip,by,Gq,dH,KH],null),new Q(null,2,5,R,[Br,Wx],null),null,new Q(null,2,5,R,[lz,pD],null),new Q(null,6,5,R,[cD,sF,DD,ZG,Rt,EH],null),new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,lz)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,pD))],null),null]))),Z(dw,O(vI,JA,zy),eT(O(gr,JA,zy),XS(new Q(null,2,5,R,[JA,zy],null),new Q(null,2,5,R,[JA,zy],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,JA,zy)],null),null)),Z(zD,O(vI,O(ZB,Ot,Bo,Iu,new Bk(null,new n(null,1,[Qy,"null"],null),null)),O(hq,JA)),eT(O(gr,O(KF,Ot,Uy,Iu,new Bk(null,new n(null,1,[Qy,"null"],null),null)),O(mz,JA)),XS(new Q(null,2,5,R,[O(ZB,Ot,Bo,Iu,new Bk(null,new n(null,1,[Qy,"null"],null),null)),O(hq,JA)],null),new Q(null,2,5,R,[$S(new Q(null,2,5,R,[Ot,Iu],null),new Q(null,2,5,R,[Bo,new Bk(null,new n(null,1,[Qy,"null"],null),null)],null),new Q(null,2,5,R,[Vc,new Bk(null,new n(null,1,[Qy,null],null),null)],null),null),eT(JA,JA,new n(null,4,[Zn,null,NC,function(e){return Qf(e)},sy,!0,NH,O(hq,JA)],null),null)],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,O(ZB,Ot,Bo,Iu,new Bk(null,new n(null,1,[Qy,"null"],null),null)),O(hq,JA))],null),null)),Z(rB,O(hq,JA),eT(JA,JA,new n(null,4,[Zn,null,NC,function(e){return Qf(e)},sy,!0,NH,O(hq,JA)],null),null)),Z(au,Gy,Gy),Z(rG,tr,tr),Z(Fo,DB,DB),Z(cs,O(vI,Wx,JA),eT(O(gr,Wx,JA),XS(new Q(null,2,5,R,[Wx,JA],null),new Q(null,2,5,R,[Wx,JA],null)),new n(null,7,[uC,S,Zn,Hq,NC,function(e){return M(e)},Os,M,QF,function(e,n){return pf(n,0)},sy,!0,NH,O(vI,Wx,JA)],null),null)),Z(OI,BI,Wc),Z(Lw,Bo,Vc),Z(bH,Gw,yg),Z(nw,O(wt,ir,new Q(null,2,5,R,[Lw,bH],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[Lw,bH],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,$y)},function(e){return N(e,Qq)}],null),function(e){return M(e)&&N(e,$y)&&N(e,Qq)},I,new Q(null,2,5,R,[Lw,bH],null),null,new Q(null,2,5,R,[$y,Qq],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,$y)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Qq))],null),null]))),Z(gp,Bo,Vc),Z(wp,O(wt,ir,new Q(null,2,5,R,[nw,gp],null),iA,new Q(null,11,5,R,[OI,To,dw,zD,rB,cs,au,Ks,vE,rG,Fo],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[nw,gp],null),new Q(null,11,5,R,[OI,To,dw,zD,rB,cs,au,Ks,vE,rG,Fo],null),null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,Mx)},function(e){return N(e,pn)}],null),function(e){return M(e)&&N(e,Mx)&&N(e,pn)},new Q(null,11,5,R,[er,pz,Dn,Av,bt,vu,ao,aC,vs,Vr,EF],null),new Q(null,2,5,R,[nw,gp],null),null,new Q(null,2,5,R,[Mx,pn],null),new Q(null,11,5,R,[OI,To,dw,zD,rB,cs,au,Ks,vE,rG,Fo],null),new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Mx)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,pn))],null),null]))),Z(NE,Bo,Vc),Z(Tm,Qp,Hg);var yT,G0=Oh(S),H0=Oh(S),I0=Oh(S),J0=Oh(S),e2=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));function ET(e){if(null!=e&&null!=e.Yc)e=e.Yc(e);else{var n=ET[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=ET._))throw Zc("Domain.info",e);e=n.a?n.a(e):n.call(null,e)}}return e}function FT(e,n){if(null!=e&&null!=e.Zc)e=e.Zc(e,n);else{var t=FT[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=FT._))throw Zc("Domain.init",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function GT(e,n){if(null!=e&&null!=e.Wc)e=e.Wc(e,n);else{var t=GT[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=GT._))throw Zc("Domain.destroy",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function HT(e,n,t){if(null!=e&&null!=e.Xc)e=e.Xc(e,n,t);else{var r=HT[db(null==e?null:e)];if(null!=r)e=r.c?r.c(e,n,t):r.call(null,e,n,t);else{if(null==(r=HT._))throw Zc("Domain.handle-message",e);e=r.c?r.c(e,n,t):r.call(null,e,n,t)}}return e}function IT(e,n,t,r,o,i,l){this.id=e,this.fc=n,this.source=t,this.options=r,this.Mb=o,this.j=i,this.B=l,this.h=2230716170,this.I=139264}yT=new dm(Me.b(ta,"message-body"),U,e2,G0,H0,I0,J0),Z(QD,Bo,Vc),Z(dC,Bo,Vc),Z(Nt,O(CJ,JA),rT(JA,JA,null)),Z(kG,O(wt,ir,new Q(null,2,5,R,[NE,Tm],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[NE,Tm],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,tq)},function(e){return N(e,U)}],null),function(e){return M(e)&&N(e,tq)&&N(e,U)},I,new Q(null,2,5,R,[NE,Tm],null),null,new Q(null,2,5,R,[tq,U],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,tq)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U))],null),null]))),Z(Wp,O(wt,ir,new Q(null,2,5,R,[GF,JA],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[GF,JA],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,is)},function(e){return N(e,ow)}],null),function(e){return M(e)&&N(e,is)&&N(e,ow)},I,new Q(null,2,5,R,[GF,JA],null),null,new Q(null,2,5,R,[is,ow],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,is)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ow))],null),null]))),Z(On,O(wt,ir,new Q(null,1,5,R,[JA],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[JA],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,ow)}],null),function(e){return M(e)&&N(e,ow)},I,new Q(null,1,5,R,[JA],null),null,new Q(null,1,5,R,[ow],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ow))],null),null]))),Z(rs,O(xv,kG,On),cT(new Q(null,2,5,R,[kG,On],null),new Q(null,2,5,R,[kG,On],null),null)),Z(tv,O(xv,kG,On,O(wt,ir,new Q(null,1,5,R,[GF],null))),cT(new Q(null,3,5,R,[kG,On,O(wt,ir,new Q(null,1,5,R,[GF],null))],null),new Q(null,3,5,R,[kG,On,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[GF],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,is)}],null),function(e){return M(e)&&N(e,is)},I,new Q(null,1,5,R,[GF],null),null,new Q(null,1,5,R,[is],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,is))],null),null]))],null),null)),yT.v(null,IA,(function(){return cT(new Q(null,2,5,R,[kG,O(wt,ir,new Q(null,2,5,R,[QD,dC],null),iA,new Q(null,1,5,R,[Nt],null))],null),new Q(null,2,5,R,[kG,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[QD,dC],null),new Q(null,1,5,R,[Nt],null),null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,uE)},function(e){return N(e,kJ)}],null),function(e){return M(e)&&N(e,uE)&&N(e,kJ)},new Q(null,1,5,R,[ow],null),new Q(null,2,5,R,[QD,dC],null),null,new Q(null,2,5,R,[uE,kJ],null),new Q(null,1,5,R,[Nt],null),new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,uE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,kJ))],null),null]))],null),null)})),yT.v(null,qz,(function(){return cT(new Q(null,2,5,R,[kG,O(wt,iA,new Q(null,1,5,R,[Nt],null))],null),new Q(null,2,5,R,[kG,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[null,new Q(null,1,5,R,[Nt],null),null,new Q(null,1,5,R,[function(e){return M(e)}],null),function(e){return M(e)},new Q(null,1,5,R,[ow],null),I,null,I,new Q(null,1,5,R,[Nt],null),new Q(null,1,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V))],null),null]))],null),null)})),Z(YI,O(io,Ir,U),VS(Ir,new Ne((function(){return yT}),Ir,Xj([By,yw,OD,ho,ux,en,fz,AE,Dv,jF],[CB,so,"gateway/common/spec/messages.cljc",23,1,8,8,Se,null,p(yT)?yT.ld:null])))),Z(DJ,av,av),Z(TC,O(wt,ir,new Q(null,2,5,R,[Br,YI],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[Br,YI],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,lz)},function(e){return N(e,Xv)}],null),function(e){return M(e)&&N(e,lz)&&N(e,Xv)},I,new Q(null,2,5,R,[Br,YI],null),null,new Q(null,2,5,R,[lz,Xv],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,lz)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Xv))],null),null]))),Z(rv,O(wt,ir,new Q(null,2,5,R,[DJ,YI],null),iA,new Q(null,1,5,R,[Br],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[DJ,YI],null),new Q(null,1,5,R,[Br],null),null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,Fy)},function(e){return N(e,Xv)}],null),function(e){return M(e)&&N(e,Fy)&&N(e,Xv)},new Q(null,1,5,R,[lz],null),new Q(null,2,5,R,[DJ,YI],null),null,new Q(null,2,5,R,[Fy,Xv],null),new Q(null,1,5,R,[Br],null),new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Fy)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Xv))],null),null]))),Z(wy,O(CJ,O(hq,rv)),rT(O(hq,rv),eT(rv,rv,new n(null,4,[Zn,null,NC,function(e){return Qf(e)},sy,!0,NH,O(hq,rv)],null),null),null)),Z(bB,jH,Zf),Z(hE,O(wt,ir,new Q(null,1,5,R,[bB],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[bB],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Fs)}],null),function(e){return M(e)&&N(e,Fs)},I,new Q(null,1,5,R,[bB],null),null,new Q(null,1,5,R,[Fs],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Fs))],null),null]))),yT.v(null,SE,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[iD,Wx,hE],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[iD,Wx,hE],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,dB)},function(e){return N(e,pD)},function(e){return N(e,Mc)}],null),function(e){return M(e)&&N(e,dB)&&N(e,pD)&&N(e,Mc)},I,new Q(null,3,5,R,[iD,Wx,hE],null),null,new Q(null,3,5,R,[dB,pD,Mc],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,dB)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,pD)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Mc))],null),null]))],null),null)})),Z(cF,JA,JA),yT.v(null,mE,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[cF,QD,dC],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[cF,QD,dC],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,EJ)},function(e){return N(e,uE)},function(e){return N(e,kJ)}],null),function(e){return M(e)&&N(e,EJ)&&N(e,uE)&&N(e,kJ)},I,new Q(null,3,5,R,[cF,QD,dC],null),null,new Q(null,3,5,R,[EJ,uE,kJ],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,EJ)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,uE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,kJ))],null),null]))],null),null)})),Z(mx,O(CJ,O(gr,O(CJ,wp),O(CJ,O(hq,rv)))),rT(O(gr,O(CJ,wp),O(CJ,O(hq,rv))),XS(new Q(null,2,5,R,[O(CJ,wp),O(CJ,O(hq,rv))],null),new Q(null,2,5,R,[rT(wp,wp,null),rT(O(hq,rv),eT(rv,rv,new n(null,4,[Zn,null,NC,function(e){return Qf(e)},sy,!0,NH,O(hq,rv)],null),null),null)],null)),null)),g=IT.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"id":return this.id;case"identity":return this.fc;case"source":return this.source;case"options":return this.options;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#gateway.state.peers.Peer{",", ","}",t,Xg.b(new Q(null,4,5,R,[new Q(null,2,5,R,[qJ,this.id],null),new Q(null,2,5,R,[pD,this.fc],null),new Q(null,2,5,R,[lz,this.source],null),new Q(null,2,5,R,[eI,this.options],null)],null),this.j))},g.ua=function(){return new gj(this,4,new Q(null,4,5,R,[qJ,pD,lz,eI],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 4+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=802532213^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.id,n.id)&&A.b(this.fc,n.fc)&&A.b(this.source,n.source)&&A.b(this.options,n.options)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,4,[pD,null,lz,null,qJ,null,eI,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new IT(this.id,this.fc,this.source,this.options,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(qJ,n):P.call(null,qJ,n))?new IT(t,this.fc,this.source,this.options,this.Mb,this.j,null):p(P.b?P.b(pD,n):P.call(null,pD,n))?new IT(this.id,t,this.source,this.options,this.Mb,this.j,null):p(P.b?P.b(lz,n):P.call(null,lz,n))?new IT(this.id,this.fc,t,this.options,this.Mb,this.j,null):p(P.b?P.b(eI,n):P.call(null,eI,n))?new IT(this.id,this.fc,this.source,t,this.Mb,this.j,null):new IT(this.id,this.fc,this.source,this.options,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,4,5,R,[new Gi(qJ,this.id),new Gi(pD,this.fc),new Gi(lz,this.source),new Gi(eI,this.options)],null),this.j))},g.O=function(e,n){return new IT(this.id,this.fc,this.source,this.options,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)};var JT=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function KT(e,n){if(null==n)throw im("Peer id is missing",S);if(p(e=JT.b(e,n)))return e;throw im(["Unable to find peer with id ",q.a(n)].join(""),S)}function LT(e,n,t){if(null==n)throw im("Peer id is missing",S);if(p(e=JT.c(e,n,t)))return e;throw im(["Unable to find peer with id ",q.a(n)," in domain ",q.a(t)].join(""),S)}function MT(e){return A.b(Fs,mi.b(e,new Q(null,2,5,R,[lz,U],null)))}function NT(e,n){return Dl(G([Wh.a(Jh(JT,e)),mi.b(e,new Q(null,2,5,R,[zr,n],null))]))}function OT(e,n){var t=U.a(n);switch(t instanceof z?t.da:null){case"node":return A.b(Yp.a(n),Yp.a(e));case"peer":return A.b(Yp.a(n),Yp.a(e))&&A.b(Fp.a(n),Fp.a(e));case"local":return A.b(lD.a(n),lD.a(e));default:return!1}}function PT(e,n){return Dl(G([Ih.b(Wh.a(Qi),fi.a((function(e){return OT(lz.a(e),n)}))),Dn.a(e)]))}function QT(e,n,t){return Dl(G([fi.a((function(e){return OT(lz.a(e),n)})),NT(e,t)]))}function RT(e,n,t,r,o,i){var l=JT.b(e,t);if(p(l)){var a=l;return new Q(null,2,5,R,[e,a],null)}a=function(){var e=new IT(t,r,n,i,null,null,null);return p(o)?K.c(e,dH,o):e}();var u=dt.b(r,Qy);return l=function(){var n=ni(oi.A(ni(e,new Q(null,2,5,R,[vu,r],null),t),new Q(null,2,5,R,[Av,u],null),Mh(Cf,Dk),t),new Q(null,2,5,R,[Dn,t],null),a);return p(po.a(i))?qi(n,bt,Mh(Cf,Dk),t):n}(),new Q(null,2,5,R,[l,a],null)}function ST(e,n){var t=pD.a(n),r=qJ.a(n),o=dt.b(t,Qy);return qi(qi(pi(qi(e,vu,Hf,t),Av,(function(e){var n=Of.b(x.b(e,o),r);return B(n)?K.c(e,o,n):Hf.b(e,o)})),Dn,Hf,r),bt,Mh(Of,Dk),r)}function TT(e,n,t){return ni(e,new Q(null,2,5,R,[Dn,n],null),t)}function UT(e){for(var n=[],t=arguments.length,r=0;r<t;)n.push(arguments[r]),r+=1;return ih(oi,arguments[0],new Q(null,2,5,R,[Dn,arguments[1]],null),arguments[2],3<n.length?new Qe(n.slice(3),0,null):null)}JT.b=function(e,n){return p(n)?mi.b(e,new Q(null,2,5,R,[Dn,n],null)):null},JT.c=function(e,n,t){return e=JT.b(e,n),p(x.b(e,t))?e:null},JT.F=3;var VT=function e(n){switch(arguments.length){case 6:return e.la(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function WT(e,n,t,r){return Dl(G([fi.a((function(e){var o=VT.c(n,t,e);return p(o)?o:p(r)?A.b(qJ.a(e),qJ.a(t)):r})),Xg.b(NT(e,n),Wh.b(Jh(JT,e),bt.a(e)))]))}function XT(e,n,t,r){if(p(mi.b(t,new Q(null,2,5,R,[eI,po],null))))return WT(e,n,t,r);var o=mi.b(t,new Q(null,2,5,R,[pD,dt],null));return p(o)?Dl(G([Ih.b(Wh.a(Jh(JT,e)),fi.a((function(e){var o=x.b(e,n);return o=p(o)?VT.c(n,t,e):o,p(o)?o:p(r)?A.b(qJ.a(e),qJ.a(t)):r}))),Xg.b(mi.b(e,new Q(null,2,5,R,[Av,o],null)),bt.a(e))])):WT(e,n,t,r)}function YT(e,t,r,o,i){return gd.c((function(t,r){var l=pD.a(r),a=qJ.a(r),u=qJ.a(i),s=MT(i);return t=s?Cf.b(t,AL.la(e,o,u,a,l,new n(null,1,[Fs,s],null))):t,MT(r)?Cf.b(t,AL.la(e,lz.a(r),a,u,pD.a(i),new n(null,1,[Fs,s],null))):t}),I,XT(r,t,i,!1))}function ZT(e,n,t,r,o,i){var l=qJ.a(r);return new Q(null,2,5,R,[pL(t,l,n),gd.c((function(n,t){return n=Cf.b(n,BL.K(e,lz.a(t),qJ.a(t),l,o)),Tc(i)?Cf.b(n,BL.K(e,lz.a(r),l,qJ.a(t),o)):n}),I,XT(t,n,r,!1))],null)}function $T(e,n){var t=gh(Jk,e,n);return vf(t,gi.b((function(e){return t===e}),n))}function aU(e,n){return F(e)<F(n)?gd.c(Cf,n,e):gd.c(Cf,e,n)}function bU(e,n,t){return e=$T(F,Cf.g(t,n,G([e]))),gd.c(ji,C(e),Re(e))}VT.la=function(e,n,t,r,o,i){return null==n&&null==o?(r=dt.a(r),e=dt.a(e),p(i)?i:p(t)?t:A.b(r,e)):p(t=mS(n,e,r))?mS(o,r,e):t},VT.c=function(e,n,t){var r=pD.a(n),o=mi.b(n,new Q(null,2,5,R,[e,os],null)),i=mi.b(n,new Q(null,2,5,R,[eI,po],null)),l=pD.a(t);e=mi.b(t,new Q(null,2,5,R,[e,os],null));var a=mi.b(t,new Q(null,2,5,R,[eI,po],null));return!!kh.b(qJ.a(t),qJ.a(n))&&VT.la(r,o,i,l,e,a)},VT.F=6;var cU={},Z2,F3,R4,X4,Y4,$4,jU=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};jU.g=function(e){return ce(Dc,fh(ql,e))},jU.F=0,jU.G=function(e){return this.g(B(e))};var kU=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};function lU(e){for(var n=[],t=arguments.length,r=0;r<t;)n.push(arguments[r]),r+=1;fh(kU,0<n.length?new Qe(n.slice(0),0,null):null),ce(Dc,"\n")}function mU(e){if("number"===typeof e)return e;if("string"===typeof e&&1===e.length)return e.charCodeAt(0);throw Error("Argument to char must be a character or number")}function nU(e,n,t){var r=t;for(t=I;;){if(Pf(r))return new Q(null,2,5,R,[t,n],null);var o=C(r);r=D(r),n=J(o=fh(e,new Q(null,2,5,R,[o,n],null)),0,null),o=J(o,1,null),t=Cf.b(t,n),n=o}}function oU(e,n){var t=n;for(n=I;;){var r=fh(e,new Q(null,1,5,R,[t],null));if(t=J(r,0,null),r=J(r,1,null),Tc(t))return new Q(null,2,5,R,[n,r],null);n=Cf.b(n,t),t=r}}function pU(e){return new Q(null,2,5,R,[ji.b(S,function e(n){return new Mg(null,(function(){for(;;){var t=B(n);if(t){if(Wf(t)){var r=re(t),o=F(r),i=Qg(o);e:for(var l=0;;){if(!(l<o)){r=!0;break e}var a=qd(r,l),u=J(a,0,null);a=J(a,1,null);var s=J(a,0,null);J(a,1,null),i.add(new Q(null,2,5,R,[u,s],null)),l+=1}return Sg(Ug(i),r?e(se(t)):null)}return i=J(r=C(t),0,null),r=J(r,1,null),o=J(r,0,null),J(r,1,null),vf(new Q(null,2,5,R,[i,o],null),e(Re(t)))}return null}}),null,null)}(e)),ji.b(S,function e(n){return new Mg(null,(function(){for(;;){var t=B(n);if(t){if(Wf(t)){var r=re(t),o=F(r),i=Qg(o);e:for(var l=0;;){if(!(l<o)){r=!0;break e}var a=qd(r,l),u=J(a,0,null);a=J(a,1,null),J(a,0,null),a=J(a,1,null),i.add(new Q(null,2,5,R,[u,a],null)),l+=1}return Sg(Ug(i),r?e(se(t)):null)}return i=J(r=C(t),0,null),r=J(r,1,null),J(r,0,null),r=J(r,1,null),vf(new Q(null,2,5,R,[i,r],null),e(Re(t)))}return null}}),null,null)}(e))],null)}function qU(e,n){return ji.b(S,function e(t){return new Mg(null,(function(){for(;;){var r=B(t);if(r){if(Wf(r)){var o=re(r),i=F(o),l=Qg(i);e:for(var a=0;;){if(!(a<i)){o=!0;break e}var u=qd(o,a),s=J(u,0,null);u=J(u,1,null),l.add(new Q(null,2,5,R,[s,new Q(null,2,5,R,[u,n],null)],null)),a+=1}return Sg(Ug(l),o?e(se(r)):null)}return l=J(o=C(r),0,null),o=J(o,1,null),vf(new Q(null,2,5,R,[l,new Q(null,2,5,R,[o,n],null)],null),e(Re(r)))}return null}}),null,null)}(e))}function rU(){var e=Dc;if(null!=e&&null!=e.Le)e=e.Le(e);else{var n=rU[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=rU._))throw Zc("IPrettyFlush.-ppflush",e);e=n.a?n.a(e):n.call(null,e)}}return e}function sU(e,n){return e=t(t(e)),n.a?n.a(e):n.call(null,e)}function tU(e,n,r){Rh.A(t(e),K,n,r)}function uU(e,n){return A.b(n,"\n")?(tU(e,kr,0),tU(e,en,sU(e,en)+1)):tU(e,kr,sU(e,kr)+1),ce(sU(e,LA),n)}function vU(e,t){var r=Oh(new n(null,4,[bw,t,kr,0,en,0,LA,e],null));return"undefined"!==typeof Ac&&"undefined"!==typeof cU&&"undefined"!==typeof Z2||((Z2=function(e,n,t,r){this.ya=e,this.Ve=n,this.Vc=t,this.zg=r,this.h=1074167808,this.I=0}).prototype.O=function(e,n){return new Z2(this.ya,this.Ve,this.Vc,n)},Z2.prototype.N=function(){return this.zg},Z2.prototype.zb=function(){return this.Vc},Z2.prototype.qc=function(){return de(this.ya)},Z2.prototype.Pc=function(e,n){if(e=Yc(n),p(A.b?A.b(String,e):A.call(null,String,e)))return 0>(e=n.lastIndexOf("\n"))?tU(this,kr,sU(this,kr)+F(n)):(tU(this,kr,F(n)-e-1),tU(this,en,sU(this,en)+F(fi.b((function(e){return A.b(e,"\n")}),n)))),ce(sU(this,LA),n);if(p(A.b?A.b(Number,e):A.call(null,Number,e)))return uU(this,n);throw Error(["No matching clause: ",q.a(e)].join(""))},Z2.Pa=function(){return new Q(null,4,5,R,[tG,Rp,zu,sS],null)},Z2.Ia=!0,Z2.Da="cljs.pprint/t_cljs$pprint11254",Z2.Ja=function(e){return ce(e,"cljs.pprint/t_cljs$pprint11254")}),new Z2(e,t,r,S)}function wU(e,n,t,r,o,i,l,a,u,s,c,d,f){this.parent=e,this.xb=n,this.lb=t,this.kb=r,this.sb=o,this.tb=i,this.prefix=l,this.wb=a,this.yb=u,this.ub=s,this.Mb=c,this.j=d,this.B=f,this.h=2230716170,this.I=139264}function xU(e,n){for(n=Dq.a(n);;){if(null==n)return!1;if(e===n)return!0;n=Dq.a(n)}}function yU(e,n,t,r,o,i,l,a){this.V=e,this.data=n,this.Ub=t,this.U=r,this.T=o,this.Mb=i,this.j=l,this.B=a,this.h=2230716170,this.I=139264}function zU(e,n,t,r,o,i,l,a){this.V=e,this.type=n,this.ba=t,this.U=r,this.T=o,this.Mb=i,this.j=l,this.B=a,this.h=2230716170,this.I=139264}function AU(e,n,t,r,o,i,l){this.V=e,this.ba=n,this.U=t,this.T=r,this.Mb=o,this.j=i,this.B=l,this.h=2230716170,this.I=139264}function BU(e,n,t,r,o,i,l){this.V=e,this.ba=n,this.U=t,this.T=r,this.Mb=o,this.j=i,this.B=l,this.h=2230716170,this.I=139264}function CU(e,n,t,r,o,i,l,a,u){this.V=e,this.ba=n,this.Jb=t,this.offset=r,this.U=o,this.T=i,this.Mb=l,this.j=a,this.B=u,this.h=2230716170,this.I=139264}kU.g=function(e){return ce(Dc,fh(ol,e))},kU.F=0,kU.G=function(e){return this.g(B(e))},g=wU.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"parent":return this.parent;case"section":return this.xb;case"start-col":return this.lb;case"indent":return this.kb;case"done-nl":return this.sb;case"intra-block-nl":return this.tb;case"prefix":return this.prefix;case"per-line-prefix":return this.wb;case"suffix":return this.yb;case"logical-block-callback":return this.ub;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#cljs.pprint.logical-block{",", ","}",t,Xg.b(new Q(null,10,5,R,[new Q(null,2,5,R,[Dq,this.parent],null),new Q(null,2,5,R,[Ow,this.xb],null),new Q(null,2,5,R,[rC,this.lb],null),new Q(null,2,5,R,[xJ,this.kb],null),new Q(null,2,5,R,[Hn,this.sb],null),new Q(null,2,5,R,[KB,this.tb],null),new Q(null,2,5,R,[SA,this.prefix],null),new Q(null,2,5,R,[sn,this.wb],null),new Q(null,2,5,R,[Yw,this.yb],null),new Q(null,2,5,R,[Ax,this.ub],null)],null),this.j))},g.ua=function(){return new gj(this,10,new Q(null,10,5,R,[Dq,Ow,rC,xJ,Hn,KB,SA,sn,Yw,Ax],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 10+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=1977012399^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.parent,n.parent)&&A.b(this.xb,n.xb)&&A.b(this.lb,n.lb)&&A.b(this.kb,n.kb)&&A.b(this.sb,n.sb)&&A.b(this.tb,n.tb)&&A.b(this.prefix,n.prefix)&&A.b(this.wb,n.wb)&&A.b(this.yb,n.yb)&&A.b(this.ub,n.ub)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,10,[Yw,null,xJ,null,Dq,null,Ow,null,Hn,null,rC,null,SA,null,sn,null,Ax,null,KB,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new wU(this.parent,this.xb,this.lb,this.kb,this.sb,this.tb,this.prefix,this.wb,this.yb,this.ub,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(Dq,n):P.call(null,Dq,n))?new wU(t,this.xb,this.lb,this.kb,this.sb,this.tb,this.prefix,this.wb,this.yb,this.ub,this.Mb,this.j,null):p(P.b?P.b(Ow,n):P.call(null,Ow,n))?new wU(this.parent,t,this.lb,this.kb,this.sb,this.tb,this.prefix,this.wb,this.yb,this.ub,this.Mb,this.j,null):p(P.b?P.b(rC,n):P.call(null,rC,n))?new wU(this.parent,this.xb,t,this.kb,this.sb,this.tb,this.prefix,this.wb,this.yb,this.ub,this.Mb,this.j,null):p(P.b?P.b(xJ,n):P.call(null,xJ,n))?new wU(this.parent,this.xb,this.lb,t,this.sb,this.tb,this.prefix,this.wb,this.yb,this.ub,this.Mb,this.j,null):p(P.b?P.b(Hn,n):P.call(null,Hn,n))?new wU(this.parent,this.xb,this.lb,this.kb,t,this.tb,this.prefix,this.wb,this.yb,this.ub,this.Mb,this.j,null):p(P.b?P.b(KB,n):P.call(null,KB,n))?new wU(this.parent,this.xb,this.lb,this.kb,this.sb,t,this.prefix,this.wb,this.yb,this.ub,this.Mb,this.j,null):p(P.b?P.b(SA,n):P.call(null,SA,n))?new wU(this.parent,this.xb,this.lb,this.kb,this.sb,this.tb,t,this.wb,this.yb,this.ub,this.Mb,this.j,null):p(P.b?P.b(sn,n):P.call(null,sn,n))?new wU(this.parent,this.xb,this.lb,this.kb,this.sb,this.tb,this.prefix,t,this.yb,this.ub,this.Mb,this.j,null):p(P.b?P.b(Yw,n):P.call(null,Yw,n))?new wU(this.parent,this.xb,this.lb,this.kb,this.sb,this.tb,this.prefix,this.wb,t,this.ub,this.Mb,this.j,null):p(P.b?P.b(Ax,n):P.call(null,Ax,n))?new wU(this.parent,this.xb,this.lb,this.kb,this.sb,this.tb,this.prefix,this.wb,this.yb,t,this.Mb,this.j,null):new wU(this.parent,this.xb,this.lb,this.kb,this.sb,this.tb,this.prefix,this.wb,this.yb,this.ub,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,10,5,R,[new Gi(Dq,this.parent),new Gi(Ow,this.xb),new Gi(rC,this.lb),new Gi(xJ,this.kb),new Gi(Hn,this.sb),new Gi(KB,this.tb),new Gi(SA,this.prefix),new Gi(sn,this.wb),new Gi(Yw,this.yb),new Gi(Ax,this.ub)],null),this.j))},g.O=function(e,n){return new wU(this.parent,this.xb,this.lb,this.kb,this.sb,this.tb,this.prefix,this.wb,this.yb,this.ub,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)},g=yU.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"type-tag":return this.V;case"data":return this.data;case"trailing-white-space":return this.Ub;case"start-pos":return this.U;case"end-pos":return this.T;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#cljs.pprint.buffer-blob{",", ","}",t,Xg.b(new Q(null,5,5,R,[new Q(null,2,5,R,[Ny,this.V],null),new Q(null,2,5,R,[yn,this.data],null),new Q(null,2,5,R,[bp,this.Ub],null),new Q(null,2,5,R,[VA,this.U],null),new Q(null,2,5,R,[EE,this.T],null)],null),this.j))},g.ua=function(){return new gj(this,5,new Q(null,5,5,R,[Ny,yn,bp,VA,EE],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 5+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=1809113693^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.V,n.V)&&A.b(this.data,n.data)&&A.b(this.Ub,n.Ub)&&A.b(this.U,n.U)&&A.b(this.T,n.T)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,5,[EE,null,bp,null,Ny,null,VA,null,yn,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new yU(this.V,this.data,this.Ub,this.U,this.T,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(Ny,n):P.call(null,Ny,n))?new yU(t,this.data,this.Ub,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(yn,n):P.call(null,yn,n))?new yU(this.V,t,this.Ub,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(bp,n):P.call(null,bp,n))?new yU(this.V,this.data,t,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(VA,n):P.call(null,VA,n))?new yU(this.V,this.data,this.Ub,t,this.T,this.Mb,this.j,null):p(P.b?P.b(EE,n):P.call(null,EE,n))?new yU(this.V,this.data,this.Ub,this.U,t,this.Mb,this.j,null):new yU(this.V,this.data,this.Ub,this.U,this.T,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,5,5,R,[new Gi(Ny,this.V),new Gi(yn,this.data),new Gi(bp,this.Ub),new Gi(VA,this.U),new Gi(EE,this.T)],null),this.j))},g.O=function(e,n){return new yU(this.V,this.data,this.Ub,this.U,this.T,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)},g=zU.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"type-tag":return this.V;case"type":return this.type;case"logical-block":return this.ba;case"start-pos":return this.U;case"end-pos":return this.T;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#cljs.pprint.nl-t{",", ","}",t,Xg.b(new Q(null,5,5,R,[new Q(null,2,5,R,[Ny,this.V],null),new Q(null,2,5,R,[U,this.type],null),new Q(null,2,5,R,[nq,this.ba],null),new Q(null,2,5,R,[VA,this.U],null),new Q(null,2,5,R,[EE,this.T],null)],null),this.j))},g.ua=function(){return new gj(this,5,new Q(null,5,5,R,[Ny,U,nq,VA,EE],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 5+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=-1640656800^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.V,n.V)&&A.b(this.type,n.type)&&A.b(this.ba,n.ba)&&A.b(this.U,n.U)&&A.b(this.T,n.T)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,5,[EE,null,U,null,nq,null,Ny,null,VA,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new zU(this.V,this.type,this.ba,this.U,this.T,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(Ny,n):P.call(null,Ny,n))?new zU(t,this.type,this.ba,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(U,n):P.call(null,U,n))?new zU(this.V,t,this.ba,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(nq,n):P.call(null,nq,n))?new zU(this.V,this.type,t,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(VA,n):P.call(null,VA,n))?new zU(this.V,this.type,this.ba,t,this.T,this.Mb,this.j,null):p(P.b?P.b(EE,n):P.call(null,EE,n))?new zU(this.V,this.type,this.ba,this.U,t,this.Mb,this.j,null):new zU(this.V,this.type,this.ba,this.U,this.T,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,5,5,R,[new Gi(Ny,this.V),new Gi(U,this.type),new Gi(nq,this.ba),new Gi(VA,this.U),new Gi(EE,this.T)],null),this.j))},g.O=function(e,n){return new zU(this.V,this.type,this.ba,this.U,this.T,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)},g=AU.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"type-tag":return this.V;case"logical-block":return this.ba;case"start-pos":return this.U;case"end-pos":return this.T;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#cljs.pprint.start-block-t{",", ","}",t,Xg.b(new Q(null,4,5,R,[new Q(null,2,5,R,[Ny,this.V],null),new Q(null,2,5,R,[nq,this.ba],null),new Q(null,2,5,R,[VA,this.U],null),new Q(null,2,5,R,[EE,this.T],null)],null),this.j))},g.ua=function(){return new gj(this,4,new Q(null,4,5,R,[Ny,nq,VA,EE],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 4+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=-414877272^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.V,n.V)&&A.b(this.ba,n.ba)&&A.b(this.U,n.U)&&A.b(this.T,n.T)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,4,[EE,null,nq,null,Ny,null,VA,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new AU(this.V,this.ba,this.U,this.T,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(Ny,n):P.call(null,Ny,n))?new AU(t,this.ba,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(nq,n):P.call(null,nq,n))?new AU(this.V,t,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(VA,n):P.call(null,VA,n))?new AU(this.V,this.ba,t,this.T,this.Mb,this.j,null):p(P.b?P.b(EE,n):P.call(null,EE,n))?new AU(this.V,this.ba,this.U,t,this.Mb,this.j,null):new AU(this.V,this.ba,this.U,this.T,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,4,5,R,[new Gi(Ny,this.V),new Gi(nq,this.ba),new Gi(VA,this.U),new Gi(EE,this.T)],null),this.j))},g.O=function(e,n){return new AU(this.V,this.ba,this.U,this.T,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)},g=BU.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"type-tag":return this.V;case"logical-block":return this.ba;case"start-pos":return this.U;case"end-pos":return this.T;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#cljs.pprint.end-block-t{",", ","}",t,Xg.b(new Q(null,4,5,R,[new Q(null,2,5,R,[Ny,this.V],null),new Q(null,2,5,R,[nq,this.ba],null),new Q(null,2,5,R,[VA,this.U],null),new Q(null,2,5,R,[EE,this.T],null)],null),this.j))},g.ua=function(){return new gj(this,4,new Q(null,4,5,R,[Ny,nq,VA,EE],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 4+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=1365867980^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.V,n.V)&&A.b(this.ba,n.ba)&&A.b(this.U,n.U)&&A.b(this.T,n.T)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,4,[EE,null,nq,null,Ny,null,VA,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new BU(this.V,this.ba,this.U,this.T,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(Ny,n):P.call(null,Ny,n))?new BU(t,this.ba,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(nq,n):P.call(null,nq,n))?new BU(this.V,t,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(VA,n):P.call(null,VA,n))?new BU(this.V,this.ba,t,this.T,this.Mb,this.j,null):p(P.b?P.b(EE,n):P.call(null,EE,n))?new BU(this.V,this.ba,this.U,t,this.Mb,this.j,null):new BU(this.V,this.ba,this.U,this.T,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,4,5,R,[new Gi(Ny,this.V),new Gi(nq,this.ba),new Gi(VA,this.U),new Gi(EE,this.T)],null),this.j))},g.O=function(e,n){return new BU(this.V,this.ba,this.U,this.T,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)},g=CU.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"type-tag":return this.V;case"logical-block":return this.ba;case"relative-to":return this.Jb;case"offset":return this.offset;case"start-pos":return this.U;case"end-pos":return this.T;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#cljs.pprint.indent-t{",", ","}",t,Xg.b(new Q(null,6,5,R,[new Q(null,2,5,R,[Ny,this.V],null),new Q(null,2,5,R,[nq,this.ba],null),new Q(null,2,5,R,[jv,this.Jb],null),new Q(null,2,5,R,[qE,this.offset],null),new Q(null,2,5,R,[VA,this.U],null),new Q(null,2,5,R,[EE,this.T],null)],null),this.j))},g.ua=function(){return new gj(this,6,new Q(null,6,5,R,[Ny,nq,jv,qE,VA,EE],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 6+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=-1602780238^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.V,n.V)&&A.b(this.ba,n.ba)&&A.b(this.Jb,n.Jb)&&A.b(this.offset,n.offset)&&A.b(this.U,n.U)&&A.b(this.T,n.T)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,6,[qE,null,EE,null,jv,null,nq,null,Ny,null,VA,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new CU(this.V,this.ba,this.Jb,this.offset,this.U,this.T,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(Ny,n):P.call(null,Ny,n))?new CU(t,this.ba,this.Jb,this.offset,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(nq,n):P.call(null,nq,n))?new CU(this.V,t,this.Jb,this.offset,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(jv,n):P.call(null,jv,n))?new CU(this.V,this.ba,t,this.offset,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(qE,n):P.call(null,qE,n))?new CU(this.V,this.ba,this.Jb,t,this.U,this.T,this.Mb,this.j,null):p(P.b?P.b(VA,n):P.call(null,VA,n))?new CU(this.V,this.ba,this.Jb,this.offset,t,this.T,this.Mb,this.j,null):p(P.b?P.b(EE,n):P.call(null,EE,n))?new CU(this.V,this.ba,this.Jb,this.offset,this.U,t,this.Mb,this.j,null):new CU(this.V,this.ba,this.Jb,this.offset,this.U,this.T,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,6,5,R,[new Gi(Ny,this.V),new Gi(nq,this.ba),new Gi(jv,this.Jb),new Gi(qE,this.offset),new Gi(VA,this.U),new Gi(EE,this.T)],null),this.j))},g.O=function(e,n){return new CU(this.V,this.ba,this.Jb,this.offset,this.U,this.T,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)};var DU=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(ca,"write-token"),(function(e,n){return Ny.a(n)}),o,e,n,t,r)}();function FU(e,n,r){n=B(n);for(var o=null,i=0,l=0;;)if(l<i){var a=o.W(null,l);if(!A.b(Ny.a(a),fH)){var u=bp.a(t(t(e)));p(u)&&ce(LA.a(t(t(e))),u)}DU.b(e,a),Rh.A(t(e),K,bp,bp.a(a)),a=bp.a(t(t(e))),p(p(r)?a:r)&&(ce(LA.a(t(t(e))),a),Rh.A(t(e),K,bp,null)),l+=1}else{if(!(n=B(n)))break;Wf(n)?(o=re(n),n=se(n),a=o,i=F(o),o=a):(a=C(n),A.b(Ny.a(a),fH)||p(o=bp.a(t(t(e))))&&ce(LA.a(t(t(e))),o),DU.b(e,a),Rh.A(t(e),K,bp,bp.a(a)),a=bp.a(t(t(e))),p(p(r)?a:r)&&(ce(LA.a(t(t(e))),a),Rh.A(t(e),K,bp,null)),n=D(n),o=null,i=0),l=0}}function GU(e,n){var r,o=sU(LA.a(t(t(e))),bw);return(r=null==o)||(r=(e=sU(LA.a(t(t(e))),kr))+(n=(n=B(n))?EE.a(Bf(n))-VA.a(C(n)):0)<o),r}function HU(e,n,r){return p(n=t(Hn.a(n)))?n:!GU(e,r)}function IU(e,n,r){var o=iw.a(t(t(e))),i=sU(LA.a(t(t(e))),bw);return p(o)?p(i)?t(rC.a(n))>=i-o&&HU(e,n,r):i:o}DU.v(null,qn,(function(e,n){var r=Ax.a(t(t(e)));return p(r)&&(r.a?r.a(sz):r.call(null,sz)),n=nq.a(n),p(r=SA.a(n))&&ce(LA.a(t(t(e))),r),e=sU(LA.a(t(t(e))),kr),Ph(rC.a(n),e),Ph(xJ.a(n),e)})),DU.v(null,JJ,(function(e,n){var r=Ax.a(t(t(e)));return p(r)&&(r.a?r.a(Wu):r.call(null,Wu)),p(n=Yw.a(nq.a(n)))?ce(LA.a(t(t(e))),n):null})),DU.v(null,mG,(function(e,n){var r=nq.a(n),o=xJ.a(r),i=qE.a(n);if(n=jv.a(n),p(A.b?A.b(eE,n):A.call(null,eE,n)))e=t(rC.a(r));else{if(!p(A.b?A.b(wq,n):A.call(null,wq,n)))throw Error(["No matching clause: ",q.a(n)].join(""));e=sU(LA.a(t(t(e))),kr)}return Ph(o,i+e)})),DU.v(null,Xu,(function(e,n){return ce(LA.a(t(t(e))),yn.a(n))})),DU.v(null,fH,(function(e,n){var r=(r=A.b(U.a(n),go))?r:!A.b(U.a(n),SD)&&t(Hn.a(nq.a(n)));return p(r)?EU.b?EU.b(e,n):EU.call(null,e,n):p(n=bp.a(t(t(e))))&&ce(LA.a(t(t(e))),n),Rh.A(t(e),K,bp,null)}));var JU=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(ca,"emit-nl?"),(function(e){return U.a(e)}),o,e,n,t,r)}();function KU(e){var n=C(e),t=nq.a(n);return n=B(Mk((function(e){return!(A.b(Ny.a(e),fH)&&xU(nq.a(e),t))}),D(e))),new Q(null,2,5,R,[n,B(Yh(F(n)+1,e))],null)}function LU(e){var n=C(e),t=nq.a(n);return B(Mk((function(e){var n=nq.a(e);return!(A.b(Ny.a(e),fH)&&(A.b(n,t)||xU(n,t)))}),D(e)))}function EU(e,n){ce(LA.a(t(t(e))),"\n"),Rh.A(t(e),K,bp,null),n=nq.a(n);var r=sn.a(n);p(r)&&ce(LA.a(t(t(e))),r),r=fh(q,ai(t(xJ.a(n))-F(r)," ")),ce(LA.a(t(t(e))),r);e:for(Ph(KB.a(n),!0),Ph(Hn.a(n),!0),e=Dq.a(n);p(e);)Ph(Hn.a(e),!0),Ph(KB.a(e),!0),e=Dq.a(e);return null}function MU(e){var n=B(Mk((function(e){return!A.b(Ny.a(e),fH)}),e));return new Q(null,2,5,R,[n,B(Yh(F(n),e))],null)}JU.v(null,bF,(function(e,n,t){return HU(n,e=nq.a(e),t)})),JU.v(null,cI,(function(e,n,t){return IU(n,e=nq.a(e),t)})),JU.v(null,SD,(function(e,n,r,o){e=nq.a(e);var i=t(KB.a(e));return p(i)?i:(o=!GU(n,o))?o:IU(n,e,r)})),JU.v(null,go,(function(){return!0}));var NU=function e(n,t){var r=MU(t);t=J(r,0,null);var o=J(r,1,null);if(p(t)&&FU(n,t,!1),p(o)){t=J(r=KU(o),0,null),r=J(r,1,null);var i=C(o);return p(JU.A(i,n,t,LU(o)))&&(EU(n,i),o=D(o)),GU(n,o)?n=o:(o=e.b?e.b(n,t):e.call(null,n,t),A.b(o,t)?(FU(n,t,!1),n=r):n=ji.b(I,Xg.b(o,r))),n}return null};function OU(e){for(var n=cx.a(t(t(e)));;){if(Rh.A(t(e),K,cx,ji.b(I,n)),GU(e,n))return null;var r=NU(e,n);if(n===r)return null;n=r}}function PU(e,n){return Rh.A(t(e),K,cx,Cf.b(cx.a(t(t(e))),n)),GU(e,cx.a(t(t(e))))?null:OU(e)}function QU(e){var n=bp.a(t(t(e)));return p(n)?(ce(LA.a(t(t(e))),n),Rh.A(t(e),K,bp,null)):null}function RU(e,n){var r=UL(n,"\n",-1);if(A.b(F(r),1))return n;n=sn.a(C(XB.a(t(t(e)))));var o=C(r);if(A.b(eA,aw.a(t(t(e))))){var i=pr.a(t(t(e))),l=i+F(o);Rh.A(t(e),K,pr,l),PU(e,new yU(Xu,o,null,i,l,null,null,null)),OU(e),p(o=cx.a(t(t(e))))&&(FU(e,o,!0),Rh.A(t(e),K,cx,I))}else QU(e),ce(LA.a(t(t(e))),o);ce(LA.a(t(t(e))),"\n"),o=B(D(Hk(r))),i=null;for(var a=l=0;;)if(a<l){var u=i.W(null,a);ce(LA.a(t(t(e))),u),ce(LA.a(t(t(e))),"\n"),p(n)&&ce(LA.a(t(t(e))),n),a+=1}else{if(!(o=B(o)))break;Wf(i=o)?(o=re(i),a=se(i),i=o,l=F(o),o=a):(o=C(i),ce(LA.a(t(t(e))),o),ce(LA.a(t(t(e))),"\n"),p(n)&&ce(LA.a(t(t(e))),n),o=D(i),i=null,l=0),a=0}return Rh.A(t(e),K,eA,xq),Bf(r)}function SU(e){var n=TU,r=UU,o=new wU(null,null,Oh(0),Oh(0),Oh(!1),Oh(!1),null,null,null,null,null,null,null),i=Oh(Xj([XB,iw,eD,Er,kt,aw,pr,bp,LA,GD,cx],[o,r,o,!0,null,xq,0,null,vU(e,n),1,I]));return"undefined"!==typeof Ac&&"undefined"!==typeof cU&&"undefined"!==typeof F3||((F3=function(e,n,t,r,o,i){this.ya=e,this.Ve=n,this.nh=t,this.Mg=r,this.Vc=o,this.Xg=i,this.h=1074167808,this.I=0}).prototype.O=function(e,n){return new F3(this.ya,this.Ve,this.nh,this.Mg,this.Vc,n)},F3.prototype.N=function(){return this.Xg},F3.prototype.zb=function(){return this.Vc},F3.prototype.Pc=function(e,n){if(e=Yc(n),p(A.b?A.b(String,e):A.call(null,String,e))){var r=RU(this,n);n=r.replace(/\s+$/,""),e=r.substring(n.length);var o=aw.a(t(t(this)));return A.b(o,xq)?(QU(this),ce(LA.a(t(t(this))),n),Rh.A(t(this),K,bp,e)):(r=(o=pr.a(t(t(this))))+F(r),Rh.A(t(this),K,pr,r),PU(this,new yU(Xu,n,e,o,r,null,null,null)))}if(p(A.b?A.b(Number,e):A.call(null,Number,e)))return A.b(aw.a(t(t(this))),xq)?(QU(this),n=ce(LA.a(t(t(this))),n)):A.b(n,"\n")?n=RU(this,"\n"):(r=(e=pr.a(t(t(this))))+1,Rh.A(t(this),K,pr,r),n=rg(n),n=PU(this,new yU(Xu,n,null,e,r,null,null,null))),n;throw Error(["No matching clause: ",q.a(e)].join(""))},F3.prototype.qc=function(){return this.Le(null),de(LA.a(t(t(this))))},F3.prototype.Le=function(){return A.b(aw.a(t(t(this))),eA)?(FU(this,cx.a(t(t(this))),!0),Rh.A(t(this),K,cx,I)):QU(this)},F3.Pa=function(){return new Q(null,6,5,R,[tG,Rp,Yq,bv,zu,MJ],null)},F3.Ia=!0,F3.Da="cljs.pprint/t_cljs$pprint12452",F3.Ja=function(e){return ce(e,"cljs.pprint/t_cljs$pprint12452")}),new F3(e,n,r,o,i,S)}function VU(e,n){var r=Dc;if(n=new wU(XB.a(t(t(r))),null,Oh(0),Oh(0),Oh(!1),Oh(!1),e,null,n,null,null,null,null),Rh.A(t(r),K,XB,n),A.b(aw.a(t(t(r))),xq)){QU(r);var o=Ax.a(t(t(r)));p(o)&&(o.a?o.a(sz):o.call(null,sz)),p(e)&&ce(LA.a(t(t(r))),e),r=sU(LA.a(t(t(r))),kr),Ph(n.lb,r),Ph(n.kb,r)}else e=(o=pr.a(t(t(r))))+(p(e)?F(e):0),Rh.A(t(r),K,pr,e),PU(r,new AU(qn,n,o,e,null,null,null))}function WU(){var e=Dc,n=XB.a(t(t(e))),r=Yw.a(n);if(A.b(aw.a(t(t(e))),xq)){QU(e),p(r)&&ce(LA.a(t(t(e))),r);var o=Ax.a(t(t(e)));p(o)&&(o.a?o.a(Wu):o.call(null,Wu))}else r=(o=pr.a(t(t(e))))+(p(r)?F(r):0),Rh.A(t(e),K,pr,r),PU(e,new BU(JJ,n,o,r,null,null,null));Rh.A(t(e),K,XB,Dq.a(n))}var XU=!0,YU=null,TU=72,UU=40,ZU=null,$U=null,aV=null,bV=null,cV=10,dV=0,eV=null;function fV(e){return!!(null!=e?32768&e.h||h===e.nf||!e.h&&Xc(Ld,e):Xc(Ld,e))&&Er.a(t(t(e)))}function gV(e){var n=eV;return p(n)&&(n=p(n=Hc)?eV>=Hc:n),Tc(XU)?kU.call(null,e):p(n)?ce(Dc,"..."):(p(eV)&&(eV+=1),YU.call(null,e)),n}var hV=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],1<t.length?new Qe(t.slice(1),0,null):null)};hV.g=function(e,t){var r=wk.g(G([new n(null,1,[sJ,!0],null),fh(qk,t)]));t=cV;var o=$U,i=Hc,l=Ic,a=ZU,u=UU,s=YU,c=XU,d=bV,f=Gc,h=TU,_=aV,g=LA.b(r,cV),m=oz.b(r,$U),w=Ez.b(r,Hc),v=cn.b(r,Ic),b=lt.b(r,ZU),y=iw.b(r,UU),k=tw.b(r,YU),C=Jr.b(r,XU),I=YD.b(r,bV),x=Lc.b(r,Gc),E=Eo.b(r,TU),S=Aq.b(r,aV);cV=g,$U=m,Hc=w,Ic=v,ZU=b,UU=y,YU=k,XU=C,bV=I,Gc=x,TU=E,aV=S;try{var D=new zc,R=!N(r,sJ)||sJ.a(r),O=!0===R||null==R?new Ae(D):R;if(p(XU)){var A=Tc(fV(O));r=Dc,Dc=A?SU(O):O;try{gV(e),rU()}finally{Dc=r}}else{A=Dc,Dc=O;try{kU.call(null,e)}finally{Dc=A}}return!0===R&&cl(q.a(D)),null==R?q.a(D):null}finally{aV=_,TU=h,Gc=f,bV=d,XU=c,YU=s,UU=u,ZU=a,Ic=l,Hc=i,$U=o,cV=t}},hV.F=1,hV.G=function(e){var n=C(e);return e=D(e),this.g(n,e)};var iV=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function jV(e,n){if(Tc(n.a?n.a(e):n.call(null,e)))throw Error(["Bad argument: ",q.a(e),". It must be one of ",q.a(n)].join(""))}function kV(){var e=Ic;return p(e)?dV>=Ic:e}function lV(e){jV(e,new Bk(null,new n(null,4,[go,null,cI,null,SD,null,bF,null],null),null));var r=Dc;Rh.A(t(r),K,aw,eA);var o=pr.a(t(t(r))),i=XB.a(t(t(r)));PU(r,new zU(fH,e,i,o,o,null,null,null))}function mV(e,r){jV(e,new Bk(null,new n(null,2,[eE,null,wq,null],null),null));var o=Dc,i=XB.a(t(t(o)));if(A.b(aw.a(t(t(o))),xq)){QU(o);var l=xJ.a(i);if(p(A.b?A.b(eE,e):A.call(null,eE,e)))e=t(rC.a(i));else{if(!p(A.b?A.b(wq,e):A.call(null,wq,e)))throw Error(["No matching clause: ",q.a(e)].join(""));e=sU(LA.a(t(t(o))),kr)}Ph(l,r+e)}else l=pr.a(t(t(o))),PU(o,new CU(mG,i,e,r,l,l,null,null,null))}function nV(e,n,t){n="string"===typeof n?oV(n):n,t=pV(t);e:{var r=new zc,o=Tc(e)||!0===e?new Ae(r):e,i=qV(n)&&Tc(fV(o))?p(fV(o))?o:SU(o):o,l=Dc;Dc=i;try{try{rV(n,t)}finally{o!==i&&de(i)}var a=Tc(e)?q.a(r):!0===e?cl(q.a(r)):null;break e}finally{Dc=l}a=void 0}return a}iV.a=function(e){var n=new zc,t=Dc;Dc=new Ae(n);try{return iV.b(e,Dc),cl(q.a(n))}finally{Dc=t}},iV.b=function(e,n){var t=Tc(fV(n)),r=Dc;Dc=t?SU(n):n;try{n=XU,XU=!0;try{gV(e)}finally{XU=n}return A.b(0,sU(Dc,kr))||ce(Dc,"\n"),rU()}finally{Dc=r}},iV.F=2;var sV=null;function tV(e,n){throw e=[q.a(e),"\n",q.a(sV),"\n",q.a(fh(q,ai(n," "))),"^\n"].join(""),Error(e)}function uV(e,n,t,r,o,i){this.uc=e,this.ab=n,this.tc=t,this.Mb=r,this.j=o,this.B=i,this.h=2230716170,this.I=139264}function pV(e){return new uV(e=B(e),e,0,null,null,null)}function vV(e){var n=ts.a(e);if(p(n))return new Q(null,2,5,R,[C(n),new uV(wA.a(e),D(n),pr.a(e)+1,null,null,null)],null);throw Error("Not enough arguments for format definition")}function wV(e){var n=vV(e);return e=J(n,0,null),n=J(n,1,null),e="string"===typeof e?oV(e):e,new Q(null,2,5,R,[e,n],null)}function xV(e,n){return n>=pr.a(e)?(n=pr.a(e)-n,yV.b?yV.b(e,n):yV.call(null,e,n)):new uV(wA.a(e),Yh(n,wA.a(e)),n,null,null,null)}function yV(e,n){var t=pr.a(e)+n;return 0>n?xV(e,t):new uV(wA.a(e),Yh(n,ts.a(e)),t,null,null,null)}function zV(e,n,t,r,o,i,l){this.ec=e,this.bc=n,this.nc=t,this.offset=r,this.Mb=o,this.j=i,this.B=l,this.h=2230716170,this.I=139264}function AV(e,t){var r=J(e,0,null);e=J(e,1,null);var o=J(e,0,null);return e=J(e,1,null),t=J(o=N(new Bk(null,new n(null,2,[mt,null,IH,null],null),null),r)?new Q(null,2,5,R,[o,t],null):A.b(o,Ew)?vV(t):A.b(o,gD)?new Q(null,2,5,R,[F(ts.a(t)),t],null):new Q(null,2,5,R,[o,t],null),0,null),o=J(o,1,null),new Q(null,2,5,R,[new Q(null,2,5,R,[r,new Q(null,2,5,R,[t,e],null)],null),o],null)}function BV(e,n){return e=J(n=nU(AV,n,e),0,null),n=J(n,1,null),new Q(null,2,5,R,[ji.b(S,e),n],null)}g=uV.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"seq":return this.uc;case"rest":return this.ab;case"pos":return this.tc;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#cljs.pprint.arg-navigator{",", ","}",t,Xg.b(new Q(null,3,5,R,[new Q(null,2,5,R,[wA,this.uc],null),new Q(null,2,5,R,[ts,this.ab],null),new Q(null,2,5,R,[pr,this.tc],null)],null),this.j))},g.ua=function(){return new gj(this,3,new Q(null,3,5,R,[wA,ts,pr],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 3+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=-402038447^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.uc,n.uc)&&A.b(this.ab,n.ab)&&A.b(this.tc,n.tc)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,3,[pr,null,wA,null,ts,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new uV(this.uc,this.ab,this.tc,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(wA,n):P.call(null,wA,n))?new uV(t,this.ab,this.tc,this.Mb,this.j,null):p(P.b?P.b(ts,n):P.call(null,ts,n))?new uV(this.uc,t,this.tc,this.Mb,this.j,null):p(P.b?P.b(pr,n):P.call(null,pr,n))?new uV(this.uc,this.ab,t,this.Mb,this.j,null):new uV(this.uc,this.ab,this.tc,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,3,5,R,[new Gi(wA,this.uc),new Gi(ts,this.ab),new Gi(pr,this.tc)],null),this.j))},g.O=function(e,n){return new uV(this.uc,this.ab,this.tc,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)},g=zV.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"func":return this.ec;case"def":return this.bc;case"params":return this.nc;case"offset":return this.offset;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#cljs.pprint.compiled-directive{",", ","}",t,Xg.b(new Q(null,4,5,R,[new Q(null,2,5,R,[iG,this.ec],null),new Q(null,2,5,R,[yo,this.bc],null),new Q(null,2,5,R,[ns,this.nc],null),new Q(null,2,5,R,[qE,this.offset],null)],null),this.j))},g.ua=function(){return new gj(this,4,new Q(null,4,5,R,[iG,yo,ns,qE],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 4+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=-829256337^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.ec,n.ec)&&A.b(this.bc,n.bc)&&A.b(this.nc,n.nc)&&A.b(this.offset,n.offset)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,4,[qE,null,iG,null,ns,null,yo,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new zV(this.ec,this.bc,this.nc,this.offset,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(iG,n):P.call(null,iG,n))?new zV(t,this.bc,this.nc,this.offset,this.Mb,this.j,null):p(P.b?P.b(yo,n):P.call(null,yo,n))?new zV(this.ec,t,this.nc,this.offset,this.Mb,this.j,null):p(P.b?P.b(ns,n):P.call(null,ns,n))?new zV(this.ec,this.bc,t,this.offset,this.Mb,this.j,null):p(P.b?P.b(qE,n):P.call(null,qE,n))?new zV(this.ec,this.bc,this.nc,t,this.Mb,this.j,null):new zV(this.ec,this.bc,this.nc,this.offset,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,4,5,R,[new Gi(iG,this.ec),new Gi(yo,this.bc),new Gi(ns,this.nc),new Gi(qE,this.offset)],null),this.j))},g.O=function(e,n){return new zV(this.ec,this.bc,this.nc,this.offset,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)};var CV=new n(null,3,[2,"#b",8,"#o",16,"#x"],null);function DV(e){return bg(e)?A.b(cV,10)?[q.a(e),p(bV)?".":null].join(""):[q.a(p(bV)?function(){var e=x.b(CV,cV);return p(e)?e:["#",q.a(cV),"r"].join("")}():null),q.a(EV(cV,e))].join(""):null}function FV(e,n,t){var r=J(t=vV(t),0,null);t=J(t,1,null);var o=DV(r);return o=(o=(r=(e=p(o)?o:e.a?e.a(r):e.call(null,r)).length)+tt.a(n))>=Hx.a(n)?o:o+(tg(Hx.a(n)-o-1,lq.a(n))+1)*lq.a(n),r=fh(q,ai(o-r,UC.a(n))),p(IH.a(n))?jU.g(G([[q.a(r),q.a(e)].join("")])):jU.g(G([[q.a(e),q.a(r)].join("")])),t}function GV(e){return!!bg(e)||"number"===typeof e&&!isNaN(e)&&1/0!==e&&parseFloat(e)!==parseInt(e,10)&&A.b(e,Math.floor(e))}function HV(e,n){return Eg(C(oU((function(n){return new Q(null,2,5,R,0<n?[ug(n,e),tg(n,e)]:[null,null],null)}),n)))}function EV(e,n){return 0===n?"0":fh(q,Wh.b((function(e){return rg(10>e?mU("0")+e:mU("a")+(e-10))}),HV(e,n)))}function IV(e,n){return Eg(C(oU((function(n){return new Q(null,2,5,R,[B(Eg(Xh.b(e,n))),B(Yh(e,n))],null)}),Eg(n))))}function JV(e,t,r){var o=J(r=vV(r),0,null);if(r=J(r,1,null),GV(o)){var i=0>o,l=EV(e,i?-o:o);e=p(mt.a(t))?function(){var e=Wh.b((function(e){return fh(q,e)}),IV(vD.a(t),l)),n=ai(F(e),us.a(t));return fh(q,D(bi.b(n,e)))}():l,e=(e=i?["-",q.a(e)].join(""):p(IH.a(t))?["+",q.a(e)].join(""):e).length<Hx.a(t)?[q.a(fh(q,ai(Hx.a(t)-e.length,UC.a(t)))),q.a(e)].join(""):e,jU.g(G([e]))}else FV(ql,new n(null,5,[Hx,Hx.a(t),lq,1,tt,0,UC,UC.a(t),IH,!0],null),pV(new Q(null,1,5,R,[o],null)));return r}var KV=new Q(null,20,5,R,"zero one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nineteen".split(" "),null),LV=new Q(null,20,5,R,"zeroth first second third fourth fifth sixth seventh eighth ninth tenth eleventh twelfth thirteenth fourteenth fifteenth sixteenth seventeenth eighteenth nineteenth".split(" "),null),MV=new Q(null,10,5,R,"  twenty thirty forty fifty sixty seventy eighty ninety".split(" "),null),NV=new Q(null,10,5,R,"  twentieth thirtieth fortieth fiftieth sixtieth seventieth eightieth ninetieth".split(" "),null),OV=new Q(null,22,5,R," thousand million billion trillion quadrillion quintillion sextillion septillion octillion nonillion decillion undecillion duodecillion tredecillion quattuordecillion quindecillion sexdecillion septendecillion octodecillion novemdecillion vigintillion".split(" "),null);function PV(e){var n=tg(e,100),t=ug(e,100);return[0<n?[q.a(pf(KV,n))," hundred"].join(""):null,0<n&&0<t?" ":null,q.a(0<t?20>t?pf(KV,t):function(){var e=tg(t,10),n=ug(t,10);return[q.a(0<e?pf(MV,e):null),0<e&&0<n?"-":null,q.a(0<n?pf(KV,n):null)].join("")}():null)].join("")}function QV(e,n){var t=F(e),r=I;--t;var o=C(e);for(e=D(e);;){if(null==e)return[q.a(fh(q,di(", ",r))),Pf(o)||Pf(r)?null:", ",q.a(o),!Pf(o)&&0<t+n?[" ",q.a(pf(OV,t+n))].join(""):null].join("");r=Pf(o)?r:Cf.b(r,[q.a(o)," ",q.a(pf(OV,t+n))].join("")),--t,o=C(e),e=D(e)}}function RV(e){var n=tg(e,100),t=ug(e,100);return[0<n?[q.a(pf(KV,n))," hundred"].join(""):null,0<n&&0<t?" ":null,q.a(0<t?20>t?pf(LV,t):function(){var e=tg(t,10),n=ug(t,10);return 0<e&&!(0<n)?pf(NV,e):[q.a(0<e?pf(MV,e):null),0<e&&0<n?"-":null,q.a(0<n?pf(LV,n):null)].join("")}():0<n?"th":null)].join("")}var SV=new Q(null,4,5,R,[new Q(null,9,5,R,"I II III IIII V VI VII VIII VIIII".split(" "),null),new Q(null,9,5,R,"X XX XXX XXXX L LX LXX LXXX LXXXX".split(" "),null),new Q(null,9,5,R,"C CC CCC CCCC D DC DCC DCCC DCCCC".split(" "),null),new Q(null,3,5,R,["M","MM","MMM"],null)],null),TV=new Q(null,4,5,R,[new Q(null,9,5,R,"I II III IV V VI VII VIII IX".split(" "),null),new Q(null,9,5,R,"X XX XXX XL L LX LXX LXXX XC".split(" "),null),new Q(null,9,5,R,"C CC CCC CD D DC DCC DCCC CM".split(" "),null),new Q(null,3,5,R,["M","MM","MMM"],null)],null);function UV(e,t){var r=J(t=vV(t),0,null);if(t=J(t,1,null),"number"===typeof r&&0<r&&4e3>r){var o=HV(10,r);r=I;for(var i=F(o)-1;;){if(Pf(o)){jU.g(G([fh(q,r)]));break}var l=C(o);r=A.b(0,l)?r:Cf.b(r,pf(pf(e,i),l-1)),--i,o=D(o)}}else JV(10,new n(null,5,[Hx,0,UC," ",us,",",vD,3,mt,!0],null),pV(new Q(null,1,5,R,[r],null)));return t}var VV=new n(null,5,[8,"Backspace",9,"Tab",10,"Newline",13,"Return",32,"Space"],null);function WV(e,n){n=J(e=vV(n),0,null),e=J(e,1,null);var t=mU(n);n=127&t,t&=128;var r=x.b(VV,n);return 0<t&&jU.g(G(["Meta-"])),jU.g(G([p(r)?r:32>n?["Control-",q.a(rg(n+64))].join(""):A.b(n,127)?"Control-?":rg(n)])),e}function XV(e,n){var t=vV(n);if(n=J(t,0,null),t=J(t,1,null),e=sH.a(e),p(A.b?A.b("o",e):A.call(null,"o",e)))nV(!0,"\\o~3, '0o",G([mU(n)]));else if(p(A.b?A.b("u",e):A.call(null,"u",e)))nV(!0,"\\u~4, '0x",G([mU(n)]));else{if(!p(A.b?A.b(null,e):A.call(null,null,e)))throw Error(["No matching clause: ",q.a(e)].join(""));ce(Dc,p(A.b?A.b("\b",n):A.call(null,"\b",n))?"\\backspace":p(A.b?A.b(" ",n):A.call(null," ",n))?"\\space":p(A.b?A.b("\t",n):A.call(null,"\t",n))?"\\tab":p(A.b?A.b("\n",n):A.call(null,"\n",n))?"\\newline":p(A.b?A.b("\f",n):A.call(null,"\f",n))?"\\formfeed":p(A.b?A.b("\r",n):A.call(null,"\r",n))?"\\return":p(A.b?A.b('"',n):A.call(null,'"',n))?'\\"':p(A.b?A.b("\\",n):A.call(null,"\\",n))?"\\\\":["\\",q.a(n)].join(""))}return t}function YV(e,n){return e=J(n=vV(n),0,null),n=J(n,1,null),jU.g(G([e])),n}function ZV(e){return e=C(e),A.b(yx,e)||A.b(LG,e)}function $V(e,n,t){return zf(nU((function(e,n){if(ZV(n))return new Q(null,2,5,R,[null,n],null);var r=J(n=BV(ns.a(e),n),0,null);n=J(n,1,null);var o=pU(r);return r=J(o,0,null),o=J(o,1,null),r=K.c(r,qo,t),new Q(null,2,5,R,[null,fh(iG.a(e),new Q(null,3,5,R,[r,n,o],null))],null)}),n,e))}function aW(e){var n=(e=q.a(e).toLowerCase()).indexOf("e"),t=e.indexOf(".");n=J(e=new Q(null,2,5,R,0>n?0>t?[e,q.a(e.length-1)]:[[e.substring(0,t),e.substring(t+1)].join(""),q.a(t-1)]:0>t?[e.substring(0,n),e.substring(n+1)]:[[e.substring(0,1),e.substring(2,n)].join(""),e.substring(n+1)],null),0,null),e=J(e,1,null);e:if(t=F(n),0<t&&A.b(pf(n,F(n)-1),"0"))for(--t;;){if(0>t){n="";break e}if(!A.b(pf(n,t),"0")){n=n.substring(0,t+1);break e}--t}e:{var r=F(t=n);if(0<r&&A.b(pf(t,0),"0"))for(var o=0;;){if(A.b(o,r)||!A.b(pf(t,o),"0")){t=t.substring(o);break e}o+=1}}return n=F(n)-F(t),e=0<F(e)&&A.b(pf(e,0),"+")?e.substring(1):e,Pf(t)?new Q(null,2,5,R,["0",0],null):new Q(null,2,5,R,[t,parseInt(e,10)-n],null)}function bW(e,n,t,r){if(p(p(t)?t:r)){var o=F(e);r=p(r)?2>r?2:r:0,p(t)?t=n+t+1:0<=n?t=(t=n+1)>--r?t:r:t=r+n;var i=A.b(t,0)?new Q(null,4,5,R,[["0",q.a(e)].join(""),n+1,1,o+1],null):new Q(null,4,5,R,[e,n,t,o],null);if(t=J(i,0,null),o=J(i,1,null),r=J(i,2,null),i=J(i,3,null),p(r)){if(0>r)return new Q(null,3,5,R,["0",0,!1],null);if(i>r){if(n=pf(t,r),e=t.substring(0,r),mU(n)>=mU("5")){e:for(n=F(e)-1,t=0|n;;){if(0>t){n=gh(q,"1",ai(n+1,"0"));break e}if(!A.b("9",e.charAt(t))){n=hh(q,e.substring(0,t),rg(mU(e.charAt(t))+1),ai(n-t,"0"));break e}--t}return e=F(n)>e.length,new Q(null,3,5,R,[e?Bg(n,0,F(n)-1):n,o,e],null)}return new Q(null,3,5,R,[e,o,!1],null)}}}return new Q(null,3,5,R,[e,n,!1],null)}function cW(e,n,t){var r=new Q(null,2,5,R,0>n?[[q.a(fh(q,ai(-n-1,"0"))),q.a(e)].join(""),-1]:[e,n],null);e=J(r,0,null);var o=J(r,1,null);return t=(r=F(e))<(t=p(t)?o+t+1:o+1)?[q.a(e),q.a(fh(q,ai(t-r,"0")))].join(""):e,0>n?n=[".",q.a(t)].join(""):(n+=1,n=[t.substring(0,n),".",t.substring(n)].join("")),n}function dW(e,n){return 0>n?[".",q.a(e)].join(""):[e.substring(0,n),".",e.substring(n)].join("")}function eW(e,n){var t=eG.a(e),r=dG.a(e),o=J(n=vV(n),0,null);n=J(n,1,null);var i=new Q(null,2,5,R,0>o?["-",-o]:["+",o],null),l=J(i,0,null);i=J(i,1,null);var a=J(i=aW(i),0,null),u=J(i,1,null)+$F.a(e);o=p(i=IH.a(e))?i:0>o,i=Tc(r)&&F(a)-1<=u;var s=bW(a,u,r,p(t)?t-(p(o)?1:0):null);return a=J(s,0,null),u=J(s,1,null),a=cW(a,p(s=J(s,2,null))?u+1:u,r),r=p(p(t)?p(r)?1<=r&&A.b(a.charAt(0),"0")&&A.b(a.charAt(1),".")&&a.length>t-(p(o)?1:0):r:t)?a.substring(1):a,u=A.b(C(r),"."),p(t)?(a=r.length,a=p(o)?a+1:a,i=i&&!(a>=t),p((a=(u=u&&!(a>=t))||i?a+1:a)>t&&SI.a(e))?jU.g(G([fh(q,ai(t,SI.a(e)))])):jU.g(G([[q.a(fh(q,ai(t-a,UC.a(e)))),q.a(p(o)?l:null),u?"0":null,r,i?"0":null].join("")]))):jU.g(G([[q.a(p(o)?l:null),u?"0":null,r,i?"0":null].join("")])),n}function fW(e,n){var t=J(n=vV(n),0,null);n=J(n,1,null);var r=aW(0>t?-t:t);for(J(r,0,null),J(r,1,null);;){var o=J(r,0,null),i=J(r,1,null),l=eG.a(e),a=dG.a(e),u=bG.a(e),s=$F.a(e),c=function(){var n=Ko.a(e);return p(n)?n:"E"}();r=function(){var n=IH.a(e);return p(n)?n:0>t}();var d=0>=s,f=i-(s-1),h=q.a(Math.abs(f)),_=(c=[q.a(c),0>f?"-":"+",q.a(p(u)?fh(q,ai(u-h.length,"0")):null),h].join("")).length;if(f=F(o),o=[q.a(fh(q,ai(-s,"0"))),q.a(o),q.a(p(a)?fh(q,ai(a-(f-1)-(0>s?-s:0),"0")):null)].join(""),f=p(l)?l-_:null,f=J(o=bW(o,0,A.b(s,0)?a-1:0<s?a:0>s?a-1:null,p(f)?f-(p(r)?1:0):null),0,null),J(o,1,null),h=J(o,2,null),o=dW(f,s),a=A.b(s,F(f))&&null==a,Tc(h)){if(p(l)){i=o.length+_,i=p(r)?i+1:i;var g=(d=d&&!A.b(i,l))?i+1:i;i=a&&g<l,p(function(){var n=g>l;return n||(n=p(n=u)?_-2>u:n),p(n)?SI.a(e):n}())?jU.g(G([fh(q,ai(l,SI.a(e)))])):jU.g(G([[q.a(fh(q,ai(l-g-(i?1:0),UC.a(e)))),p(r)?0>t?"-":"+":null,d?"0":null,o,i?"0":null,c].join("")]))}else jU.g(G([[p(r)?0>t?"-":"+":null,d?"0":null,o,a?"0":null,c].join("")]));break}r=new Q(null,2,5,R,[f,i+1],null)}return n}function gW(e,t,r){var o=vV(t),i=J(o,0,null);J(o,1,null);var l=J(o=aW(0>i?-i:i),0,null);o=J(o,1,null);var a=eG.a(e),u=dG.a(e),s=bG.a(e);return o=A.b(i,0)?0:o+1,i=p(s)?s+2:4,a=p(a)?a-i:null,p(u)?l=u:l=(l=F(l))>(u=7>o?o:7)?l:u,0<=(o=l-o)&&o<=l?(e=eW(new n(null,6,[eG,a,dG,o,$F,0,SI,SI.a(e),UC,UC.a(e),IH,IH.a(e)],null),t),jU.g(G([fh(q,ai(i," "))])),e):fW(e,t)}function hW(e,n){var t=J(n=vV(n),0,null);n=J(n,1,null);var r=aW(Math.abs(t)),o=J(r,0,null),i=J(r,1,null),l=dG.a(e),a=hG.a(e);r=eG.a(e);var u=function(){var n=IH.a(e);return p(n)?n:0>t}(),s=bW(o,i,l,null);return o=J(s,0,null),i=J(s,1,null),l=cW(o,p(s=J(s,2,null))?i+1:i,l),a=[q.a(fh(q,ai(a-l.indexOf("."),"0"))),l].join(""),l=a.length+(p(u)?1:0),jU.g(G([[p(function(){var n=mt.a(e);return p(n)?u:n}())?0>t?"-":"+":null,q.a(fh(q,ai(r-l,UC.a(e)))),p(!!Tc(mt.a(e))&&u)?0>t?"-":"+":null,a].join("")])),n}function iW(e,n){var t=ZH.a(e);n=J(t=p(t)?new Q(null,2,5,R,[t,n],null):vV(n),0,null),t=J(t,1,null);var r=hw.a(e);return p(n=0>n||n>=F(r)?C(ks.a(e)):pf(r,n))?$V(n,t,qo.a(e)):t}function jW(e,n){var t=vV(n);n=J(t,0,null),t=J(t,1,null);var r=hw.a(e);return n=p(n)?zf(r):C(r),p(n)?$V(n,t,qo.a(e)):t}function kW(e,n){var t=vV(n),r=J(t,0,null);t=J(t,1,null);var o=hw.a(e);return o=p(r)?C(o):null,p(r)?p(o)?$V(o,n,qo.a(e)):n:t}function lW(e,n){var t=Px.a(e),r=C(hw.a(e));n=J(r=Pf(r)?wV(n):new Q(null,2,5,R,[r,n],null),0,null),r=J(r,1,null);var o=J(r=vV(r),0,null);r=J(r,1,null);var i=0;o=pV(o);for(var l=-1;;){if(Tc(t)&&A.b(pr.a(o),l)&&1<i)throw Error("%{ construct not consuming any arguments: Infinite loop!");if(p((l=Pf(ts.a(o))&&(Tc(mt.a(kp.a(e)))||0<i))||(p(t)?i>=t:t)))return r;if(l=$V(n,o,qo.a(e)),A.b(yx,C(l)))return r;i+=1;var a=pr.a(o);o=l,l=a}}function mW(e,n){var t=Px.a(e),r=C(hw.a(e));n=J(r=Pf(r)?wV(n):new Q(null,2,5,R,[r,n],null),0,null),r=J(r,1,null);var o=J(r=vV(r),0,null);r=J(r,1,null);for(var i=0;;){var l=Pf(o)&&(Tc(mt.a(kp.a(e)))||0<i);if(p(l||(p(t)?i>=t:t)))return r;if(l=$V(n,pV(C(o)),pV(D(o))),A.b(LG,C(l)))return r;i+=1,o=D(o)}}function nW(e,n){var t=Px.a(e),r=C(hw.a(e)),o=Pf(r)?wV(n):new Q(null,2,5,R,[r,n],null);n=J(o,0,null),r=0,o=J(o,1,null);for(var i=-1;;){if(Tc(t)&&A.b(pr.a(o),i)&&1<r)throw Error("%@{ construct not consuming any arguments: Infinite loop!");if(p((i=Pf(ts.a(o))&&(Tc(mt.a(kp.a(e)))||0<r))||(p(t)?r>=t:t)))return o;if(i=$V(n,o,qo.a(e)),A.b(yx,C(i)))return zf(i);r+=1;var l=pr.a(o);o=i,i=l}}function oW(e,n){var t=Px.a(e),r=C(hw.a(e)),o=Pf(r)?wV(n):new Q(null,2,5,R,[r,n],null);for(n=J(o,0,null),r=0,o=J(o,1,null);;){var i=Pf(ts.a(o))&&(Tc(mt.a(kp.a(e)))||0<r);if(p(i||(p(t)?r>=t:t)))return o;if(o=J(i=p(i=ts.a(o))?new Q(null,2,5,R,[C(i),new uV(wA.a(o),D(i),pr.a(o)+1,null,null,null)],null):new Q(null,2,5,R,[null,o],null),0,null),i=J(i,1,null),o=$V(n,pV(o),i),A.b(LG,C(o)))return i;o=i,r+=1}}function pW(e,n){if(p(mt.a(kp.a(e)))){var t=hw.a(e),r=F(t),o=1<r?xn.a(ns.a(C(C(t)))):p(mt.a(e))?"(":null,i=pf(t,1<r?1:0);if(t=2<r?xn.a(ns.a(C(pf(t,2)))):p(mt.a(e))?")":null,n=J(r=vV(n),0,null),r=J(r,1,null),p(kV()))ce(Dc,"#");else{var l=dV,a=eV;dV+=1,eV=0;try{VU(o,t),$V(i,pV(n),qo.a(e)),WU()}finally{eV=a,dV=l}}e=r}else e=qW(e,n);return e}function rW(e,n,t){for(var r=I;;){if(Pf(e))return new Q(null,2,5,R,[r,n],null);var o=C(e);e:{var i=new zc,l=Dc;Dc=new Ae(i);try{var a=new Q(null,2,5,R,[$V(o,n,t),q.a(i)],null);break e}finally{Dc=l}a=void 0}if(n=J(a,0,null),o=J(a,1,null),A.b(yx,C(n)))return new Q(null,2,5,R,[r,zf(n)],null);e=D(e),r=Cf.b(r,o)}}function qW(e,n){var r=function(){var t=ks.a(e);return p(t)?rW(t,n,qo.a(e)):null}(),o=J(r,0,null);o=J(o,0,null);var i=p(r=J(r,1,null))?r:n,l=J(r=function(){var n=HJ.a(e);return p(n)?BV(n,i):null}(),0,null),a=p(r=J(r,1,null))?r:i;r=function(){var e=C(pE.a(l));return p(e)?e:0}();var u=function(){var e=C(vH.a(l));return p(e)?e:sU(Dc,bw)}(),s=hw.a(e),c=J(a=rW(s,a,qo.a(e)),0,null);a=J(a,1,null);var d=function(){var n=F(c)-1+(p(mt.a(e))?1:0)+(p(IH.a(e))?1:0);return 1>n?1:n}();s=gd.b(pg,Wh.b(F,c));var f=Hx.a(e),h=tt.a(e),_=lq.a(e),g=s+d*h,m=(f=g<=f?f:f+_*(1+tg(g-f-1,_)))-s;s=function(){var e=tg(m,d);return h>e?h:e}(),_=m-s*d,s=fh(q,ai(s,UC.a(e))),p(p(o)?sU(LA.a(t(t(Dc))),kr)+r+f>u:o)&&jU.g(G([o])),r=_;for(var w=c,v=function(){var n=mt.a(e);return p(n)?n:A.b(F(w),1)&&Tc(IH.a(e))}();B(w);)jU.g(G([[q.a(Tc(v)?C(w):null),q.a(p(function(){var n=v;return p(n)||(n=D(w))?n:IH.a(e)}())?s:null),q.a(0<r?UC.a(e):null)].join("")])),--r,w=o=p(v)?w:D(w),v=!1;return a}function sW(e){return"undefined"!==typeof Ac&&"undefined"!==typeof cU&&"undefined"!==typeof R4||((R4=function(e,n){this.ya=e,this.$g=n,this.h=1074135040,this.I=0}).prototype.O=function(e,n){return new R4(this.ya,n)},R4.prototype.N=function(){return this.$g},R4.prototype.qc=function(){return de(this.ya)},R4.prototype.Pc=function(e,n){if(e=Yc(n),p(A.b?A.b(String,e):A.call(null,String,e)))return ce(this.ya,n.toLowerCase());if(p(A.b?A.b(Number,e):A.call(null,Number,e)))return ce(this.ya,rg(n).toLowerCase());throw Error(["No matching clause: ",q.a(e)].join(""))},R4.Pa=function(){return new Q(null,2,5,R,[tG,xT],null)},R4.Ia=!0,R4.Da="cljs.pprint/t_cljs$pprint13823",R4.Ja=function(e){return ce(e,"cljs.pprint/t_cljs$pprint13823")}),new R4(e,S)}function tW(e){return"undefined"!==typeof Ac&&"undefined"!==typeof cU&&"undefined"!==typeof X4||((X4=function(e,n){this.ya=e,this.ah=n,this.h=1074135040,this.I=0}).prototype.O=function(e,n){return new X4(this.ya,n)},X4.prototype.N=function(){return this.ah},X4.prototype.qc=function(){return de(this.ya)},X4.prototype.Pc=function(e,n){if(e=Yc(n),p(A.b?A.b(String,e):A.call(null,String,e)))return ce(this.ya,n.toUpperCase());if(p(A.b?A.b(Number,e):A.call(null,Number,e)))return ce(this.ya,rg(n).toUpperCase());throw Error(["No matching clause: ",q.a(e)].join(""))},X4.Pa=function(){return new Q(null,2,5,R,[tG,wT],null)},X4.Ia=!0,X4.Da="cljs.pprint/t_cljs$pprint13848",X4.Ja=function(e){return ce(e,"cljs.pprint/t_cljs$pprint13848")}),new X4(e,S)}function uW(e,n){var t=C(e);return fh(q,C(oU((function(e){if(Pf(e))return new Q(null,2,5,R,[null,null],null);var n=/\W\w/g.exec(e);return n=p(n)?n.index+1:n,p(n)?new Q(null,2,5,R,[[e.substring(0,n),pf(e,n).toUpperCase()].join(""),e.substring(n+1)],null):new Q(null,2,5,R,[e,null],null)}),p(p(n)?p(t)?wc(t):t:n)?[t.toUpperCase(),e.substring(1)].join(""):e)))}function vW(e){var n=Oh(!0);return"undefined"!==typeof Ac&&"undefined"!==typeof cU&&"undefined"!==typeof Y4||((Y4=function(e,n,t){this.ya=e,this.Od=n,this.bh=t,this.h=1074135040,this.I=0}).prototype.O=function(e,n){return new Y4(this.ya,this.Od,n)},Y4.prototype.N=function(){return this.bh},Y4.prototype.qc=function(){return de(this.ya)},Y4.prototype.Pc=function(e,n){if(e=Yc(n),p(A.b?A.b(String,e):A.call(null,String,e)))return ce(this.ya,uW(n.toLowerCase(),t(this.Od))),0<n.length?Ph(this.Od,ec(pf(n,F(n)-1))):null;if(p(A.b?A.b(Number,e):A.call(null,Number,e)))return n=rg(n),e=p(t(this.Od))?n.toUpperCase():n,ce(this.ya,e),Ph(this.Od,ec(n));throw Error(["No matching clause: ",q.a(e)].join(""))},Y4.Pa=function(){return new Q(null,3,5,R,[tG,ZA,vT],null)},Y4.Ia=!0,Y4.Da="cljs.pprint/t_cljs$pprint13893",Y4.Ja=function(e){return ce(e,"cljs.pprint/t_cljs$pprint13893")}),new Y4(e,n,S)}function wW(e){var n=Oh(!1);return"undefined"!==typeof Ac&&"undefined"!==typeof cU&&"undefined"!==typeof $4||(($4=function(e,n,t){this.ya=e,this.wd=n,this.dh=t,this.h=1074135040,this.I=0}).prototype.O=function(e,n){return new $4(this.ya,this.wd,n)},$4.prototype.N=function(){return this.dh},$4.prototype.qc=function(){return de(this.ya)},$4.prototype.Pc=function(e,n){if(e=Yc(n),p(A.b?A.b(String,e):A.call(null,String,e)))return n=n.toLowerCase(),Tc(t(this.wd))?(e=p(e=/\S/g.exec(n))?e.index:e,p(e)?(ce(this.ya,[n.substring(0,e),pf(n,e).toUpperCase(),n.substring(e+1).toLowerCase()].join("")),Ph(this.wd,!0)):ce(this.ya,n)):ce(this.ya,n.toLowerCase());if(p(A.b?A.b(Number,e):A.call(null,Number,e)))return n=rg(n),p(!!Tc(t(this.wd))&&wc(n))?(Ph(this.wd,!0),ce(this.ya,n.toUpperCase())):ce(this.ya,n.toLowerCase());throw Error(["No matching clause: ",q.a(e)].join(""))},$4.Pa=function(){return new Q(null,3,5,R,[tG,EG,CT],null)},$4.Ia=!0,$4.Da="cljs.pprint/t_cljs$pprint13925",$4.Ja=function(e){return ce(e,"cljs.pprint/t_cljs$pprint13925")}),new $4(e,n,S)}function xW(e,n){return mV(p(mt.a(e))?wq:eE,hG.a(e)),n}function yW(e,n){return lV(e=p(mt.a(e))?p(IH.a(e))?go:SD:p(IH.a(e))?cI:bF),n}var zW=Xj("ASDBOXRPCFEG$%&|~\nT*?()[;]{}<>^W_I".split(""),[new n(null,5,[Qo,"A",ns,new n(null,4,[Hx,new Q(null,2,5,R,[0,Number],null),lq,new Q(null,2,5,R,[1,Number],null),tt,new Q(null,2,5,R,[0,Number],null),UC,new Q(null,2,5,R,[" ",String],null)],null),fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,S,PI,function(){return function(e,n){return FV(ql,e,n)}}],null),new n(null,5,[Qo,"S",ns,new n(null,4,[Hx,new Q(null,2,5,R,[0,Number],null),lq,new Q(null,2,5,R,[1,Number],null),tt,new Q(null,2,5,R,[0,Number],null),UC,new Q(null,2,5,R,[" ",String],null)],null),fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,S,PI,function(){return function(e,n){return FV(ol,e,n)}}],null),new n(null,5,[Qo,"D",ns,new n(null,4,[Hx,new Q(null,2,5,R,[0,Number],null),UC,new Q(null,2,5,R,[" ",String],null),us,new Q(null,2,5,R,[",",String],null),vD,new Q(null,2,5,R,[3,Number],null)],null),fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,S,PI,function(){return function(e,n){return JV(10,e,n)}}],null),new n(null,5,[Qo,"B",ns,new n(null,4,[Hx,new Q(null,2,5,R,[0,Number],null),UC,new Q(null,2,5,R,[" ",String],null),us,new Q(null,2,5,R,[",",String],null),vD,new Q(null,2,5,R,[3,Number],null)],null),fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,S,PI,function(){return function(e,n){return JV(2,e,n)}}],null),new n(null,5,[Qo,"O",ns,new n(null,4,[Hx,new Q(null,2,5,R,[0,Number],null),UC,new Q(null,2,5,R,[" ",String],null),us,new Q(null,2,5,R,[",",String],null),vD,new Q(null,2,5,R,[3,Number],null)],null),fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,S,PI,function(){return function(e,n){return JV(8,e,n)}}],null),new n(null,5,[Qo,"X",ns,new n(null,4,[Hx,new Q(null,2,5,R,[0,Number],null),UC,new Q(null,2,5,R,[" ",String],null),us,new Q(null,2,5,R,[",",String],null),vD,new Q(null,2,5,R,[3,Number],null)],null),fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,S,PI,function(){return function(e,n){return JV(16,e,n)}}],null),new n(null,5,[Qo,"R",ns,new n(null,5,[LA,new Q(null,2,5,R,[null,Number],null),Hx,new Q(null,2,5,R,[0,Number],null),UC,new Q(null,2,5,R,[" ",String],null),us,new Q(null,2,5,R,[",",String],null),vD,new Q(null,2,5,R,[3,Number],null)],null),fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,S,PI,function(e){return p(C(LA.a(e)))?function(e,n){return JV(LA.a(e),e,n)}:p(function(){var n=IH.a(e);return p(n)?mt.a(e):n}())?function(e,n){return UV(SV,n)}:p(IH.a(e))?function(e,n){return UV(TV,n)}:p(mt.a(e))?function(e,t){if(t=J(e=vV(t),0,null),e=J(e,1,null),A.b(0,t))jU.g(G(["zeroth"]));else{var r=HV(1e3,0>t?-t:t);if(F(r)<=F(OV)){var o=Wh.b(PV,Zh(1,r));o=QV(o,1),r=RV(Bf(r)),jU.g(G([[0>t?"minus ":null,Pf(o)||Pf(r)?Pf(o)?r:[o,"th"].join(""):[o,", ",r].join("")].join("")]))}else JV(10,new n(null,5,[Hx,0,UC," ",us,",",vD,3,mt,!0],null),pV(new Q(null,1,5,R,[t],null))),t=11<(r=ug(t,100))||19>r,r=ug(r,10),jU.g(G([1===r&&t?"st":2===r&&t?"nd":3===r&&t?"rd":"th"]))}return e}:function(e,t){if(e=J(t=vV(t),0,null),t=J(t,1,null),A.b(0,e))jU.g(G(["zero"]));else{var r=HV(1e3,0>e?-e:e);F(r)<=F(OV)?(r=QV(r=Wh.b(PV,r),0),jU.g(G([[0>e?"minus ":null,r].join("")]))):JV(10,new n(null,5,[Hx,0,UC," ",us,",",vD,3,mt,!0],null),pV(new Q(null,1,5,R,[e],null)))}return t}}],null),new n(null,5,[Qo,"P",ns,S,fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,S,PI,function(){return function(e,n){n=p(mt.a(e))?yV(n,-1):n,e=p(IH.a(e))?new Q(null,2,5,R,["y","ies"],null):new Q(null,2,5,R,["","s"],null);var t=vV(n);return n=J(t,0,null),t=J(t,1,null),jU.g(G([A.b(n,1)?C(e):zf(e)])),t}}],null),new n(null,5,[Qo,"C",ns,new n(null,1,[sH,new Q(null,2,5,R,[null,String],null)],null),fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,S,PI,function(e){return p(mt.a(e))?WV:p(IH.a(e))?XV:YV}],null),new n(null,5,[Qo,"F",ns,new n(null,5,[eG,new Q(null,2,5,R,[null,Number],null),dG,new Q(null,2,5,R,[null,Number],null),$F,new Q(null,2,5,R,[0,Number],null),SI,new Q(null,2,5,R,[null,String],null),UC,new Q(null,2,5,R,[" ",String],null)],null),fv,new Bk(null,new n(null,1,[IH,null],null),null),Pw,S,PI,function(){return eW}],null),new n(null,5,[Qo,"E",ns,new n(null,7,[eG,new Q(null,2,5,R,[null,Number],null),dG,new Q(null,2,5,R,[null,Number],null),bG,new Q(null,2,5,R,[null,Number],null),$F,new Q(null,2,5,R,[1,Number],null),SI,new Q(null,2,5,R,[null,String],null),UC,new Q(null,2,5,R,[" ",String],null),Ko,new Q(null,2,5,R,[null,String],null)],null),fv,new Bk(null,new n(null,1,[IH,null],null),null),Pw,S,PI,function(){return fW}],null),new n(null,5,[Qo,"G",ns,new n(null,7,[eG,new Q(null,2,5,R,[null,Number],null),dG,new Q(null,2,5,R,[null,Number],null),bG,new Q(null,2,5,R,[null,Number],null),$F,new Q(null,2,5,R,[1,Number],null),SI,new Q(null,2,5,R,[null,String],null),UC,new Q(null,2,5,R,[" ",String],null),Ko,new Q(null,2,5,R,[null,String],null)],null),fv,new Bk(null,new n(null,1,[IH,null],null),null),Pw,S,PI,function(){return gW}],null),new n(null,5,[Qo,"$",ns,new n(null,4,[dG,new Q(null,2,5,R,[2,Number],null),hG,new Q(null,2,5,R,[1,Number],null),eG,new Q(null,2,5,R,[0,Number],null),UC,new Q(null,2,5,R,[" ",String],null)],null),fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,S,PI,function(){return hW}],null),new n(null,5,[Qo,"%",ns,new n(null,1,[gw,new Q(null,2,5,R,[1,Number],null)],null),fv,Dk,Pw,S,PI,function(){return function(e,n){e=gw.a(e);for(var t=0;t<e;)lU(),t+=1;return n}}],null),new n(null,5,[Qo,"&",ns,new n(null,1,[gw,new Q(null,2,5,R,[1,Number],null)],null),fv,new Bk(null,new n(null,1,[Jr,null],null),null),Pw,S,PI,function(){return function(e,n){0<(e=gw.a(e))&&((null!=Dc?32768&Dc.h||h===Dc.nf||!Dc.h&&Xc(Ld,Dc):Xc(Ld,Dc))&&A.b(0,sU(LA.a(t(t(Dc))),kr))||lU()),--e;for(var r=0;r<e;)lU(),r+=1;return n}}],null),new n(null,5,[Qo,"|",ns,new n(null,1,[gw,new Q(null,2,5,R,[1,Number],null)],null),fv,Dk,Pw,S,PI,function(){return function(e,n){e=gw.a(e);for(var t=0;t<e;)jU.g(G(["\f"])),t+=1;return n}}],null),new n(null,5,[Qo,"~",ns,new n(null,1,[hG,new Q(null,2,5,R,[1,Number],null)],null),fv,Dk,Pw,S,PI,function(){return function(e,n){return e=hG.a(e),jU.g(G([fh(q,ai(e,"~"))])),n}}],null),new n(null,5,[Qo,"\n",ns,S,fv,new Bk(null,new n(null,2,[mt,null,IH,null],null),null),Pw,S,PI,function(){return function(e,n){return p(IH.a(e))&&lU(),n}}],null),new n(null,5,[Qo,"T",ns,new n(null,2,[iI,new Q(null,2,5,R,[1,Number],null),lq,new Q(null,2,5,R,[1,Number],null)],null),fv,new Bk(null,new n(null,2,[IH,null,Jr,null],null),null),Pw,S,PI,function(e){return p(IH.a(e))?function(e,n){var r=iI.a(e);e=lq.a(e);var o=r+sU(LA.a(t(t(Dc))),kr);return o=0<e?ug(o,e):0,r+=A.b(0,o)?0:e-o,jU.g(G([fh(q,ai(r," "))])),n}:function(e,n){var r=iI.a(e);e=lq.a(e);var o=sU(LA.a(t(t(Dc))),kr);return r=o<r?r-o:A.b(e,0)?0:e-ug(o-r,e),jU.g(G([fh(q,ai(r," "))])),n}}],null),new n(null,5,[Qo,"*",ns,new n(null,1,[hG,new Q(null,2,5,R,[1,Number],null)],null),fv,new Bk(null,new n(null,2,[mt,null,IH,null],null),null),Pw,S,PI,function(){return function(e,n){var t=hG.a(e);return p(IH.a(e))?xV(n,t):yV(n,p(mt.a(e))?-t:t)}}],null),new n(null,5,[Qo,"?",ns,S,fv,new Bk(null,new n(null,1,[IH,null],null),null),Pw,S,PI,function(e){return p(IH.a(e))?function(e,n){var t=wV(n);return $V(n=J(t,0,null),t=J(t,1,null),qo.a(e))}:function(e,n){var t=wV(n);n=J(t,0,null);var r=vV(t=J(t,1,null));return t=J(r,0,null),r=J(r,1,null),$V(n,t=pV(t),qo.a(e)),r}}],null),new n(null,5,[Qo,"(",ns,S,fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,new n(null,3,[QB,")",FG,null,ks,null],null),PI,function(e){var n=p(function(){var n=IH.a(e);return p(n)?mt.a(e):n}())?tW:p(mt.a(e))?vW:p(IH.a(e))?wW:sW;return function(e,t){e:{var r=C(hw.a(e)),o=Dc;Dc=n.a?n.a(Dc):n.call(null,Dc);try{var i=$V(r,t,qo.a(e));break e}finally{Dc=o}i=void 0}return i}}],null),new n(null,5,[Qo,")",ns,S,fv,Dk,Pw,S,PI,function(){return null}],null),new n(null,5,[Qo,"[",ns,new n(null,1,[ZH,new Q(null,2,5,R,[null,Number],null)],null),fv,new Bk(null,new n(null,2,[mt,null,IH,null],null),null),Pw,new n(null,3,[QB,"]",FG,!0,ks,VF],null),PI,function(e){return p(mt.a(e))?jW:p(IH.a(e))?kW:iW}],null),new n(null,5,[Qo,";",ns,new n(null,2,[pE,new Q(null,2,5,R,[null,Number],null),vH,new Q(null,2,5,R,[null,Number],null)],null),fv,new Bk(null,new n(null,1,[mt,null],null),null),Pw,new n(null,1,[xD,!0],null),PI,function(){return null}],null),new n(null,5,[Qo,"]",ns,S,fv,Dk,Pw,S,PI,function(){return null}],null),new n(null,5,[Qo,"{",ns,new n(null,1,[Px,new Q(null,2,5,R,[null,Number],null)],null),fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,new n(null,2,[QB,"}",FG,!1],null),PI,function(e){var n=IH.a(e);return n=p(n)?mt.a(e):n,p(n)?oW:p(mt.a(e))?mW:p(IH.a(e))?nW:lW}],null),new n(null,5,[Qo,"}",ns,S,fv,new Bk(null,new n(null,1,[mt,null],null),null),Pw,S,PI,function(){return null}],null),new n(null,5,[Qo,"<",ns,new n(null,4,[Hx,new Q(null,2,5,R,[0,Number],null),lq,new Q(null,2,5,R,[1,Number],null),tt,new Q(null,2,5,R,[0,Number],null),UC,new Q(null,2,5,R,[" ",String],null)],null),fv,new Bk(null,new n(null,4,[mt,null,IH,null,Qu,null,Jr,null],null),null),Pw,new n(null,3,[QB,">",FG,!0,ks,YA],null),PI,function(){return pW}],null),new n(null,5,[Qo,">",ns,S,fv,new Bk(null,new n(null,1,[mt,null],null),null),Pw,S,PI,function(){return null}],null),new n(null,5,[Qo,"^",ns,new n(null,3,[HI,new Q(null,2,5,R,[null,Number],null),II,new Q(null,2,5,R,[null,Number],null),FI,new Q(null,2,5,R,[null,Number],null)],null),fv,new Bk(null,new n(null,1,[mt,null],null),null),Pw,S,PI,function(){return function(e,n){var t=HI.a(e),r=II.a(e),o=FI.a(e),i=p(mt.a(e))?LG:yx;return p(p(t)?p(r)?o:r:t)?t<=r&&r<=o?new Q(null,2,5,R,[i,n],null):n:p(p(t)?r:t)?A.b(t,r)?new Q(null,2,5,R,[i,n],null):n:p(t)?A.b(t,0)?new Q(null,2,5,R,[i,n],null):n:(p(mt.a(e))?Pf(ts.a(qo.a(e))):Pf(ts.a(n)))?new Q(null,2,5,R,[i,n],null):n}}],null),new n(null,5,[Qo,"W",ns,S,fv,new Bk(null,new n(null,4,[mt,null,IH,null,Qu,null,Jr,null],null),null),Pw,S,PI,function(e){if(p(function(){var n=IH.a(e);return p(n)?n:mt.a(e)}())){var n=Xg.b(p(IH.a(e))?new Q(null,4,5,R,[cn,null,Ez,null],null):I,p(mt.a(e))?new Q(null,2,5,R,[Jr,!0],null):I);return function(e,t){return e=J(t=vV(t),0,null),t=J(t,1,null),p(gh(hV,e,n))?new Q(null,2,5,R,[yx,t],null):t}}return function(e,n){return e=J(n=vV(n),0,null),n=J(n,1,null),p(gV(e))?new Q(null,2,5,R,[yx,n],null):n}}],null),new n(null,5,[Qo,"_",ns,S,fv,new Bk(null,new n(null,3,[mt,null,IH,null,Qu,null],null),null),Pw,S,PI,function(){return yW}],null),new n(null,5,[Qo,"I",ns,new n(null,1,[hG,new Q(null,2,5,R,[0,Number],null)],null),fv,new Bk(null,new n(null,1,[mt,null],null),null),Pw,S,PI,function(){return xW}],null)]),AW=/^([vV]|#|('.)|([+-]?\d+)|(?=,))/,BW=new Bk(null,new n(null,2,[gD,null,Ew,null],null),null);function CW(e){var n=J(e,0,null),t=J(e,1,null),r=J(e,2,null),o=(e=new RegExp(AW.source,"g")).exec(n);return p(o)?(r=C(o),n=n.substring(e.lastIndex),e=t+e.lastIndex,A.b(",",pf(n,0))?new Q(null,2,5,R,[new Q(null,2,5,R,[r,t],null),new Q(null,3,5,R,[n.substring(1),e+1,!0],null)],null):new Q(null,2,5,R,[new Q(null,2,5,R,[r,t],null),new Q(null,3,5,R,[n,e,!1],null)],null)):p(r)?tV("Badly formed parameters in format directive",t):new Q(null,2,5,R,[null,new Q(null,2,5,R,[n,t],null)],null)}function DW(e){var t=J(e,0,null);return e=J(e,1,null),new Q(null,2,5,R,[A.b(t.length,0)?null:A.b(t.length,1)&&N(new Bk(null,new n(null,2,["V",null,"v",null],null),null),pf(t,0))?Ew:A.b(t.length,1)&&A.b("#",pf(t,0))?gD:A.b(t.length,2)&&A.b("'",pf(t,0))?pf(t,1):parseInt(t,10),e],null)}var EW=new n(null,2,[":",mt,"@",IH],null);function FW(e,n){return oU((function(e){var n=J(e,0,null),t=J(e,1,null);if(e=J(e,2,null),Pf(n))return new Q(null,2,5,R,[null,new Q(null,3,5,R,[n,t,e],null)],null);var r=x.b(EW,C(n));return p(r)?N(e,r)?tV(['Flag "',q.a(C(n)),'" appears more than once in a directive'].join(""),t):new Q(null,2,5,R,[!0,new Q(null,3,5,R,[n.substring(1),t+1,K.c(e,r,new Q(null,2,5,R,[!0,t],null))],null)],null):new Q(null,2,5,R,[null,new Q(null,3,5,R,[n,t,e],null)],null)}),new Q(null,3,5,R,[e,n,S],null))}function GW(e,n){var t=fv.a(e);p(!!Tc(IH.a(t))&&IH.a(n))&&tV(['"@" is an illegal flag for format directive "',q.a(Qo.a(e)),'"'].join(""),pf(IH.a(n),1)),p(!!Tc(mt.a(t))&&mt.a(n))&&tV(['":" is an illegal flag for format directive "',q.a(Qo.a(e)),'"'].join(""),pf(mt.a(n),1)),p(!!Tc(Qu.a(t))&&function(){var e=IH.a(n);return p(e)?mt.a(n):e}())&&tV(['Cannot combine "@" and ":" flags for format directive "',q.a(Qo.a(e)),'"'].join(""),function(){var e=pf(mt.a(n),1),t=pf(IH.a(n),1);return e<t?e:t}())}function HW(e,n,t,r){return GW(e,t),F(n)>F(ns.a(e))&&tV(nV(null,'Too many parameters for directive "~C": ~D~:* ~[were~;was~:;were~] specified but only ~D~:* ~[are~;is~:;are~] allowed',G([Qo.a(e),F(n),F(ns.a(e))])),zf(C(n))),Vk(Wh.c((function(n,t){var r=C(n);return null==r||N(BW,r)||A.b(zf(zf(t)),Yc(r))?null:tV(["Parameter ",Lg(C(t)),' has bad type in directive "',q.a(Qo.a(e)),'": ',q.a(Yc(r))].join(""),zf(n))}),n,ns.a(e))),wk.g(G([ji.b(S,Eg(function e(n){return new Mg(null,(function(){for(;;){var t=B(n);if(t){if(Wf(t)){var o=re(t),i=F(o),l=Qg(i);e:for(var a=0;;){if(!(a<i)){o=!0;break e}var u=qd(o,a),s=J(u,0,null);u=J(u,1,null),u=J(u,0,null),l.add(new Q(null,2,5,R,[s,new Q(null,2,5,R,[u,r],null)],null)),a+=1}return Sg(Ug(l),o?e(se(t)):null)}return l=J(o=C(t),0,null),o=J(o,1,null),o=J(o,0,null),vf(new Q(null,2,5,R,[l,new Q(null,2,5,R,[o,r],null)],null),e(Re(t)))}return null}}),null,null)}(ns.a(e)))),gd.c((function(e,n){return gh(K,e,n)}),S,fi.b((function(e){return C(pf(e,1))}),Ik(mj(ns.a(e)),n))),t]))}function IW(e,n){e=J(n=oU(CW,new Q(null,3,5,R,[e,n,!1],null)),0,null);var t=J(n,1,null);n=J(t,0,null),t=J(t,1,null),J(n=FW(n,t),0,null),n=J(n,1,null);var r=J(n,0,null),o=J(n,1,null);n=J(n,2,null),t=C(r);var i=x.b(zW,t.toUpperCase()),l=p(i)?HW(i,Wh.b(DW,e),n,o):null;return Tc(t)&&tV("Format string ended in the middle of a directive",o),Tc(i)&&tV(['Directive "',q.a(t),'" is undefined'].join(""),o),new Q(null,2,5,R,[new zV(function(){var e=PI.a(i);return e.b?e.b(l,o):e.call(null,l,o)}(),i,l,o,null,null,null),function(){var e=r.substring(1),n=o+1;if(A.b("\n",Qo.a(i))&&Tc(mt.a(l)))e:{var t=new Q(null,2,5,R,[" ","\t"],null);t=Qf(t)?Fk(t):Ek([t]);for(var a=0;;){var u;if((u=A.b(a,F(e)))||(u=pf(e,a),u=Tc(u=t.a?t.a(u):t.call(null,u))),u){t=a;break e}a+=1}}else t=0;return new Q(null,2,5,R,[e.substring(t),n+t],null)}()],null)}function JW(e,t){return new zV((function(n,t){return jU.g(G([e])),t}),null,new n(null,1,[xn,e],null),t,null,null,null)}function KW(e,n){var t=LW(Pw.a(yo.a(e)),qE.a(e),n);return n=J(t,0,null),t=J(t,1,null),new Q(null,2,5,R,[new zV(iG.a(e),yo.a(e),wk.g(G([ns.a(e),qU(n,qE.a(e))])),qE.a(e),null,null,null),t],null)}function MW(e,n,t){return oU((function(t){if(Pf(t))return tV("No closing bracket found.",n);var r=C(t);if(t=D(t),p(QB.a(Pw.a(yo.a(r)))))r=KW(r,t);else if(A.b(QB.a(e),Qo.a(yo.a(r))))r=new Q(null,2,5,R,[null,new Q(null,4,5,R,[Kq,ns.a(r),null,t],null)],null);else{var o=xD.a(Pw.a(yo.a(r)));o=p(o)?mt.a(ns.a(r)):o,r=p(o)?new Q(null,2,5,R,[null,new Q(null,4,5,R,[ks,null,ns.a(r),t],null)],null):p(xD.a(Pw.a(yo.a(r))))?new Q(null,2,5,R,[null,new Q(null,4,5,R,[xD,null,null,t],null)],null):new Q(null,2,5,R,[r,t],null)}return r}),t)}function LW(e,t,r){return zf(oU((function(r){var o=J(r,0,null),i=J(r,1,null);r=J(r,2,null);var l=MW(e,t,r);r=J(l,0,null);var a=J(l,1,null);l=J(a,0,null);var u=J(a,1,null),s=J(a,2,null);return a=J(a,3,null),A.b(l,Kq)?new Q(null,2,5,R,[null,new Q(null,2,5,R,[xk.g(Xg,G([o,Gf([p(i)?ks:hw,new Q(null,1,5,R,[r],null),kp,u])])),a],null)],null):A.b(l,ks)?p(ks.a(o))?tV('Two else clauses ("~:;") inside bracket construction.',t):Tc(ks.a(e))?tV('An else clause ("~:;") is in a bracket type that doesn\'t support it.',t):A.b(YA,ks.a(e))&&B(hw.a(o))?tV('The else clause ("~:;") is only allowed in the first position for this directive.',t):A.b(YA,ks.a(e))?new Q(null,2,5,R,[!0,new Q(null,3,5,R,[xk.g(Xg,G([o,new n(null,2,[ks,new Q(null,1,5,R,[r],null),HJ,s],null)])),!1,a],null)],null):new Q(null,2,5,R,[!0,new Q(null,3,5,R,[xk.g(Xg,G([o,new n(null,1,[hw,new Q(null,1,5,R,[r],null)],null)])),!0,a],null)],null):A.b(l,xD)?p(i)?tV('A plain clause (with "~;") follows an else clause ("~:;") inside bracket construction.',t):Tc(FG.a(e))?tV('A separator ("~;") is in a bracket type that doesn\'t support it.',t):new Q(null,2,5,R,[!0,new Q(null,3,5,R,[xk.g(Xg,G([o,new n(null,1,[hw,new Q(null,1,5,R,[r],null)],null)])),!1,a],null)],null):null}),new Q(null,3,5,R,[new n(null,1,[hw,I],null),!1,r],null)))}function NW(e){return C(oU((function(e){var n=C(e);e=D(e);var t=Pw.a(yo.a(n));return p(QB.a(t))?KW(n,e):new Q(null,2,5,R,[n,e],null)}),e))}function oV(e){var n=sV;sV=e;try{return NW(C(oU((function(e){var n=J(e,0,null);if(e=J(e,1,null),Pf(n))return new Q(null,2,5,R,[null,n],null);var t=n.indexOf("~");return 0>t?new Q(null,2,5,R,[JW(n,e),new Q(null,2,5,R,["",e+n.length],null)],null):0===t?IW(n.substring(1),e+1):new Q(null,2,5,R,[JW(n.substring(0,t),e),new Q(null,2,5,R,[n.substring(t),t+e],null)],null)}),new Q(null,2,5,R,[e,0],null))))}finally{sV=n}}var qV=function e(n){for(;;){if(Pf(n))return!1;var t=Jr.a(fv.a(yo.a(C(n))));if(p(t)||(t=p(t=Eh(e,C(hw.a(ns.a(C(n))))))?t:Eh(e,C(ks.a(ns.a(C(n)))))),p(t))return!0;n=D(n)}};function rV(e,n){return nU((function(e,n){if(ZV(n))return new Q(null,2,5,R,[null,n],null);var t=J(n=BV(ns.a(e),n),0,null);n=J(n,1,null);var r=pU(t);return t=J(r,0,null),r=J(r,1,null),t=K.c(t,qo,n),new Q(null,2,5,R,[null,fh(iG.a(e),new Q(null,3,5,R,[t,n,r],null))],null)}),n,e),null}var OW=function(e){var n=Oh(S);return function(){function r(e){var n=null;if(0<arguments.length){n=0;for(var t=Array(arguments.length-0);n<t.length;)t[n]=arguments[n+0],++n;n=new Qe(t,0,null)}return o.call(this,n)}function o(r){var o=x.c(t(n),r,Yf);return o===Yf?(o=fh(e,r),Rh.A(n,K,r,o),o):o}return r.F=0,r.G=function(e){return o(e=B(e))},r.g=o,r}()}(oV),PW=new n(null,6,[Hm,"'",Gm,"#'",Xq,"@",Zu,"~",Un,"@",Tz,"~"],null);function QW(e){var n=C(e);return p(p(n=PW.a?PW.a(n):PW.call(null,n))?A.b(2,F(e)):n)?(ce(Dc,n),gV(zf(e)),!0):null}function RW(e){if(p(kV()))ce(Dc,"#");else{var n=dV,t=eV;dV+=1,eV=0;try{VU("[","]");for(var r=0,o=B(e);;){if(Tc(Hc)||r<Hc){if(o&&(gV(C(o)),D(o))){ce(Dc," "),lV(bF),e=r+1;var i=D(o);r=e,o=i;continue}}else ce(Dc,"...");break}WU()}finally{eV=t,dV=n}}return null}function SW(e){var n=Uf(e)?null:function(){var n=new Ne((function(){return ul}),YF,Xj([Jn,By,yw,OD,ho,ux,en,fz,AE,Dv,jF],[!0,Hy,Cu,"cljs/core.cljs",15,1,10307,10307,O(new Q(null,1,5,R,[Kp],null)),"Returns [lifted-ns lifted-map] or nil if m can't be lifted.",p(ul)?ul.ld:null]));return n.a?n.a(e):n.call(null,e)}(),t=J(n,0,null),r=p(n=J(n,1,null))?n:e,o=p(t)?["#:",q.a(t),"{"].join(""):"{";if(p(kV()))ce(Dc,"#");else{t=dV,n=eV,dV+=1,eV=0;try{VU(o,"}"),o=0;for(var i=B(r);;){if(Tc(Hc)||o<Hc){if(i){if(p(kV()))ce(Dc,"#");else{r=dV;var l=eV;dV+=1,eV=0;try{VU(null,null),gV(C(C(i))),ce(Dc," "),lV(bF),eV=0,gV(Af(C(i))),WU()}finally{eV=l,dV=r}}if(D(i)){ce(Dc,", "),lV(bF),r=o+1;var a=D(i);o=r,i=a;continue}}}else ce(Dc,"...");break}WU()}finally{eV=n,dV=t}}return null}function TW(e){return ce(Dc,ol.g(G([e])))}!function(){var e=OW("~<[~;~@{~w~^, ~:_~}~;]~:>");(function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}n.F=0,n.G=function(e){return t(e=B(e))},n.g=t})()}();var UW=function(){var e=OW("~<#{~;~@{~w~^ ~:_~}~;}~:>");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}(),VW=new n(null,2,["core$future_call","Future","core$promise","Promise"],null);function WW(e){var n=Xk(/^[^$]+\$[^$]+/,e);return n=p(n)?VW.a?VW.a(n):VW.call(null,n):null,p(n)?n:e}var XW=function(){var e=OW("~<<-(~;~@{~w~^ ~_~}~;)-<~:>");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}();function YW(e){return e instanceof bj?TH:(null!=e?32768&e.h||h===e.nf||!e.h&&Xc(Ld,e):Xc(Ld,e))?Lx:e instanceof w?xu:$f(e)?JI:M(e)?Tv:Vf(e)?Uu:Rf(e)?yA:null==e?null:em}var ZW,a5=Oh(S),b5=Oh(S),c5=Oh(S),d5=Oh(S),g5=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));function eX(e){return Vf(e)?new Q(null,2,5,R,["[","]"],null):new Q(null,2,5,R,["(",")"],null)}function fX(e){if(Tf(e)){var n=eX(e),t=J(n,0,null),r=J(n,1,null),o=B(e),i=C(o),l=D(o);if(p(kV()))ce(Dc,"#");else{var a=dV,u=eV,s=dV+1;dV=s,eV=0;try{VU(t,r),function(){var e=OW("~w~:i");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(i);for(var c=l;B(c);){!function(){var e,n=OW(" ");return e=n,function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()();var d=C(c);if(Tf(d)){var f=eX(d),h=J(f,0,null),_=J(f,1,null);if(p(kV()))ce(Dc,"#");else{var g=dV,m=eV,w=dV+1;dV=w,eV=0;try{if(VU(h,_),A.b(F(d),3)&&zf(d)instanceof z){var v=d,b=J(v,0,null),y=J(v,1,null),k=J(v,2,null);!function(){var e,n=OW("~w ~w ");return e=n,function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(b,y),Tf(k)?function(){var e,n=Vf(k)?"~<[~;~@{~w~^ ~:_~}~;]~:>":"~<(~;~@{~w~^ ~:_~}~;)~:>",t="string"===typeof n?OW(n):n;return e=t,function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(k):gV(k)}else fh(function(){var e,n=OW("~w ~:i~@{~w~^ ~:_~}");return e=n,function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}(),d);WU()}finally{eV=m,dV=g}}D(c)&&function(){var e,n=OW("~_");return e=n,function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()()}else gV(d),D(c)&&function(){var e,n=OW("~:_");return e=n,function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()();c=D(c)}WU()}finally{eV=u,dV=a}}}else gV(e)}ZW=new dm(Me.b(ca,"simple-dispatch"),YW,g5,a5,b5,c5,d5),$l(ZW,JI,(function(e){if(Tc(QW(e)))if(p(kV()))ce(Dc,"#");else{var n=dV,t=eV;dV+=1,eV=0;try{VU("(",")");for(var r=0,o=B(e);;){if(Tc(Hc)||r<Hc){if(o&&(gV(C(o)),D(o))){ce(Dc," "),lV(bF),e=r+1;var i=D(o);r=e,o=i;continue}}else ce(Dc,"...");break}WU()}finally{eV=t,dV=n}}return null})),$l(ZW,Uu,RW),$l(ZW,Tv,SW),$l(ZW,yA,UW),$l(ZW,null,(function(){return ce(Dc,ol.g(G([null])))})),$l(ZW,em,TW),YU=ZW;var gX=function(){var e=OW("~:<~w~^ ~@_~w~^ ~_~@{~w~^ ~_~}~:>");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}();function hX(e,n){B(e)&&(p(n)?function(){var e=OW(" ~_");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()():function(){var e=OW(" ~@_");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(),function(){var e=OW("~{~w~^ ~_~}");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(e))}function iX(e){B(e)&&function(){var e=OW(" ~_~{~w~^ ~_~}");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(e)}function jX(e){if(D(e)){var n=B(e);e=C(n);var t=D(n);n=C(t);var r="string"===typeof C(t=D(t))?new Q(null,2,5,R,[C(t),D(t)],null):new Q(null,2,5,R,[null,t],null);t=J(r,0,null);var o=M(C(r=J(r,1,null)))?new Q(null,2,5,R,[C(r),D(r)],null):new Q(null,2,5,R,[null,r],null);if(r=J(o,0,null),o=J(o,1,null),p(kV()))ce(Dc,"#");else{var i=dV,l=eV;dV+=1,eV=0;try{VU("(",")"),function(){var e=OW("~w ~1I~@_~w");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(e,n),p(t)&&function(){var e=OW(" ~_~w");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(t),p(r)&&function(){var e=OW(" ~_~w");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(r),Vf(C(o))?hX(o,p(t)?t:r):iX(o),WU()}finally{eV=l,dV=i}}return null}return kX(e)}function lX(e){if(p(kV()))ce(Dc,"#");else{var n=dV,t=eV;dV+=1,eV=0;try{VU("[","]");for(var r=0;;){if(Tc(Hc)||r<Hc){if(B(e)){if(p(kV()))ce(Dc,"#");else{var o=dV,i=eV;dV+=1,eV=0;try{VU(null,null),gV(C(e)),D(e)&&(ce(Dc," "),lV(cI),gV(zf(e))),WU()}finally{eV=i,dV=o}}if(D(Re(e))){ce(Dc," "),lV(bF),o=r+1;var l=D(Re(e));r=o,e=l;continue}}}else ce(Dc,"...");break}WU()}finally{eV=t,dV=n}}}function mX(e){var n=C(e);if(p(kV()))ce(Dc,"#");else{var t=dV,r=eV;dV+=1,eV=0;try{VU("(",")"),D(e)&&Vf(zf(e))?(function(){var e=OW("~w ~1I~@_");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(n),lX(zf(e)),function(){var e=OW(" ~_~{~w~^ ~_~}");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(D(Re(e)))):kX(e),WU()}finally{eV=r,dV=t}}return null}var nX=function(){var e=OW("~:<~1I~w~^ ~@_~w~@{ ~_~w~}~:>");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}(),oX=S;function kX(e){if(p(kV()))ce(Dc,"#");else{var n=dV,t=eV;dV+=1,eV=0;try{VU("(",")"),mV(eE,1);for(var r=0,o=B(e);;){if(Tc(Hc)||r<Hc){if(o&&(gV(C(o)),D(o))){ce(Dc," "),lV(bF),e=r+1;var i=D(o);r=e,o=i;continue}}else ce(Dc,"...");break}WU()}finally{eV=t,dV=n}}return null}var pX=function(e){return ji.b(S,ei(lg,G([function e(n){return new Mg(null,(function(){for(;;){var t=B(n);if(t){if(Wf(t)){var r=re(t),o=F(r),i=Qg(o);e:for(var l=0;;){if(!(l<o)){r=!0;break e}var a=qd(r,l);a=new Q(null,2,5,R,[a,new Q(null,2,5,R,[Me.a(Lg(C(a))),zf(a)],null)],null),i.add(a),l+=1}return Sg(Ug(i),r?e(se(t)):null)}return i=C(t),vf(new Q(null,2,5,R,[i,new Q(null,2,5,R,[Me.a(Lg(C(i))),zf(i)],null)],null),e(Re(t)))}return null}}),null,null)}(e)])))}((a=Xj([Fm,Cm,sp,wm,bJ,Fr,oy,OE,Bw,PE,kv,Kz,ix,Km,TB,Hz,vF,BD,yH,ym,aA,oH,Qt,ou,$w,pA,wE,ZI,jw,ss],[gX,function(e){var n=zf(e),t=C(Re(Re(e)));if(!Vf(n))return kX(e);e=oX,oX=A.b(1,F(n))?Gf([C(n),"%"]):ji.b(S,Wh.c((function(e,n){return new Q(null,2,5,R,[e,["%",q.a(n)].join("")],null)}),n,Rk(1,F(n)+1)));try{return function(){var e=OW("~<#(~;~@{~w~^ ~_~}~;)~:>");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(t)}finally{oX=e}},mX,nX,function(e){if(3<F(e)){if(p(kV()))ce(Dc,"#");else{var n=dV,t=eV;dV+=1,eV=0;try{VU("(",")"),mV(eE,1),fh(function(){var e=OW("~w ~@_~w ~@_~w ~_");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}(),e);for(var r=0,o=B(Yh(3,e));;){if(Tc(Hc)||r<Hc){if(o){if(p(kV()))ce(Dc,"#");else{e=dV;var i=eV;dV+=1,eV=0;try{VU(null,null),gV(C(o)),D(o)&&(ce(Dc," "),lV(cI),gV(zf(o))),WU()}finally{eV=i,dV=e}}if(D(Re(o))){ce(Dc," "),lV(bF),e=r+1;var l=D(Re(o));r=e,o=l;continue}}}else ce(Dc,"...");break}WU()}finally{eV=t,dV=n}}return null}return kX(e)},gX,jX,jX,mX,gX,mX,nX,nX,gX,nX,mX,mX,gX,mX,function(e){if(D(e)){var n=B(e);e=C(n);var t=D(n);n=C(t);var r="string"===typeof C(t=D(t))?new Q(null,2,5,R,[C(t),D(t)],null):new Q(null,2,5,R,[null,t],null);t=J(r,0,null),r=J(r,1,null);var o=J(r=M(C(r))?new Q(null,2,5,R,[C(r),D(r)],null):new Q(null,2,5,R,[null,r],null),0,null),i=J(r,1,null);if(p(kV()))ce(Dc,"#");else{r=dV;var l=eV;dV+=1,eV=0;try{for(VU("(",")"),function(){var e=OW("~w ~1I~@_~w");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(e,n),p(p(t)?t:p(o)?o:B(i))&&function(){var e=OW("~@:_");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(),p(t)&&nV(!0,'"~a"~:[~;~:@_~]',G([t,p(o)?o:B(i)])),p(o)&&function(){var e=OW("~w~:[~;~:@_~]");return function(){function n(e){var n=null;if(0<arguments.length){n=0;for(var r=Array(arguments.length-0);n<r.length;)r[n]=arguments[n+0],++n;n=new Qe(r,0,null)}return t.call(this,n)}function t(n){return n=pV(n),rV(e,n)}return n.F=0,n.G=function(e){return t(e=B(e))},n.g=t,n}()}()(o,B(i)),e=i;;){fX(C(e));var a=D(e);if(!a)break;n=a,lV(bF),e=n}WU()}finally{eV=l,dV=r}}return null}return gV(e)},mX,function(e){if(p(kV()))ce(Dc,"#");else{var n=dV,t=eV;dV+=1,eV=0;try{if(VU("(",")"),mV(eE,1),gV(C(e)),D(e)){ce(Dc," "),lV(bF);for(var r=0,o=D(e);;){if(Tc(Hc)||r<Hc){if(o){if(p(kV()))ce(Dc,"#");else{e=dV;var i=eV;dV+=1,eV=0;try{VU(null,null),gV(C(o)),D(o)&&(ce(Dc," "),lV(cI),gV(zf(o))),WU()}finally{eV=i,dV=e}}if(D(Re(o))){ce(Dc," "),lV(bF),e=r+1;var l=D(Re(o));r=e,o=l;continue}}}else ce(Dc,"...");break}}WU()}finally{eV=t,dV=n}}return null},mX,jX,jX,gX,gX,mX,mX,gX]),ji.b(S,Wh.b((function(e){var n=J(e,0,null),t=J(e,1,null),r=Ig(n);return Tc(r=p(r)?r:mm(n))?new Q(null,2,5,R,[Me.b("clojure.core",Lg(n)),t],null):e}),a)))),qX,h5=Oh(S),i5=Oh(S),j5=Oh(S),k5=Oh(S),l5=x.c(S,ku,Ql.o?Ql.o():Ql.call(null)),a;qX=new dm(Me.b(ca,"code-dispatch"),YW,l5,h5,i5,j5,k5),$l(qX,JI,(function(e){if(Tc(QW(e))){var n=pX.call(null,C(e));return p(n)?n.a?n.a(e):n.call(null,e):kX(e)}return null})),$l(qX,xu,(function(e){var n=e.a?e.a(oX):e.call(null,oX);return p(n)?jU.g(G([n])):p(aV)?jU.g(G([Lg(e)])):kU.call(null,e)})),$l(qX,Uu,RW),$l(qX,Tv,SW),$l(qX,yA,UW),$l(qX,TH,XW),$l(qX,Lx,(function(e){var n=["#<",q.a(WW(Yc(e).name)),"@",q.a(hb(e)),": "].join("");if(p(kV()))ce(Dc,"#");else{var r=dV,o=eV;dV+=1,eV=0;try{VU(n,">"),mV(eE,-(n.length-2)),lV(bF),gV((null!=e?1&e.I||h===e.Uh||!e.I&&Xc(ge,e):Xc(ge,e))&&!he(e)?Jz:t(e)),WU()}finally{eV=o,dV=r}}return null})),$l(qX,null,kU),$l(qX,em,TW),YU=ZW;var wX=null;function xX(){var e=wX;return p(e)||(e=new n(null,5,[Sx,new n(null,4,[jF,0,IE,0,fB,0,IA,0],null),qt,Se,uD,Se,zt,ol,RE,EC],null),e=A.b(az,EC)?K.g(e,RE,EC,G([zt,iV])):e),e}function yX(e){for(var n=[],t=arguments.length,r=0;r<t;)n.push(arguments[r]),r+=1;return t=arguments[0],r=arguments[1],n=2<n.length?new Qe(n.slice(2),0,null):null,wX=ih(oi,xX(),t,r,n)}function zX(e){var n=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e;e=x.b(n,OD);var t=x.b(n,en);return n=x.b(n,ux),[q.a(Eg(Wh.b((function(e){return yw.a(Lf(e))}),qt.a(xX()))))," (",q.a(e),":",q.a(t),p(n)?[":",q.a(n)].join(""):null,")"].join("")}function AX(e){return p(Sx.a(xX()))?yX(new Q(null,2,5,R,[Sx,e],null),Mh($e,0)):null}var BX=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(ea,"report"),(function(e){return new Q(null,2,5,R,[RE.a(xX()),U.a(e)],null)}),o,e,n,t,r)}();function CX(e){var n=function(){var e=zt.a(xX());return p(e)?e:ol}();return sl(G(["expected:",function(){var t=Cy.a(e);return n.a?n.a(t):n.call(null,t)}()])),sl(G(["  actual:",function(){var t=MA.a(e);return n.a?n.a(t):n.call(null,t)}()]))}function DX(a){if(a=String(a),!/^\s*$/.test(a)&&/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)}function EX(e){var n=[];return FX(new GX,e,n),n.join("")}function GX(){this.re=void 0}function FX(e,n,t){if(null==n)t.push("null");else{if("object"==typeof n){if("array"==db(n)){var r=n;n=r.length,t.push("[");for(var o="",i=0;i<n;i++)t.push(o),o=r[i],FX(e,e.re?e.re.call(r,String(i),o):o,t),o=",";return void t.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(r in t.push("{"),i="",n)Object.prototype.hasOwnProperty.call(n,r)&&("function"!=typeof(o=n[r])&&(t.push(i),HX(r,t),t.push(":"),FX(e,e.re?e.re.call(n,r,o):o,t),i=","));return void t.push("}")}n=n.valueOf()}switch(typeof n){case"string":HX(n,t);break;case"number":t.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":t.push(String(n));break;case"function":t.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}BX.v(null,em,(function(){return null})),BX.v(null,new Q(null,2,5,R,[EC,IE],null),(function(){return AX(IE)})),BX.v(null,new Q(null,2,5,R,[EC,fB],null),(function(e){AX(fB),sl(G(["\nFAIL in",zX(e)])),B(uD.a(xX()))&&sl(G([fh(q,di(" ",Eg(uD.a(xX()))))]));var n=sr.a(e);return p(n)&&sl(G([n])),CX(e)})),BX.v(null,new Q(null,2,5,R,[EC,IA],null),(function(e){AX(IA),sl(G(["\nERROR in",zX(e)])),B(uD.a(xX()))&&sl(G([fh(q,di(" ",Eg(uD.a(xX()))))]));var n=sr.a(e);return p(n)&&sl(G([n])),CX(e)})),BX.v(null,new Q(null,2,5,R,[EC,Kr],null),(function(e){return sl(G(["\nRan",jF.a(e),"tests containing",IE.a(e)+fB.a(e)+IA.a(e),"assertions."])),sl(G([fB.a(e),"failures,",IA.a(e),"errors."]))})),BX.v(null,new Q(null,2,5,R,[EC,zs],null),(function(e){return sl(G(["\nTesting",Lg(By.a(e))]))})),BX.v(null,new Q(null,2,5,R,[EC,Fw],null),(function(){return null})),BX.v(null,new Q(null,2,5,R,[EC,co],null),(function(){return null})),BX.v(null,new Q(null,2,5,R,[EC,tJ],null),(function(){return null})),BX.v(null,new Q(null,2,5,R,[EC,Jx],null),(function(){return null})),BX.v(null,new Q(null,2,5,R,[EC,lx],null),(function(){return null})),BX.v(null,new Q(null,2,5,R,[EC,Xz],null),(function(){return null})),aK&&kK("9"),!dK||kK("528"),cK&&kK("1.9b")||aK&&kK("8")||$J&&kK("9.5")||dK&&kK("528"),cK&&!kK("8")||aK&&kK("9");var IX={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},JX=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function HX(e,n){n.push('"',e.replace(JX,(function(e){var n=IX[e];return n||(n="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),IX[e]=n),n})),'"')}var KX=new Q(null,3,5,R,[2,91,0],null);function LX(e){return"string"===typeof e?A.b(e,"")?null:e:null}function MX(e){return"number"===typeof e?sg(e):"string"===typeof e?(e=parseInt(e,10),p(isNaN(e))?null:e):null}function NX(e,n,t){return og(Lk(),mg((function(n,t){var r=J(t,0,null);return t=J(t,1,null),e.c?e.c(n,r,t):e.call(null,n,r,t)}),lg),n,t)}function OX(e,n){return gd.c((function(n,t){return p(n=e.a?e.a(t):e.call(null,t))?bf(n):null}),null,n)}function PX(e){var t=J(e=UL(q.a(e),/-/,2),0,null);e=J(e,1,null);if("string"!==typeof t)throw new TypeError("re-seq must match against a string.");return t=p(t=Yk(/\d+/,t))?ki.b(MX,t):null,new n(null,2,[Ln,t,gH,p(e)?e.toLowerCase():null],null)}function QX(e){var t=J(KX,0,null),r=J(KX,1,null),o=J(KX,2,null),i=Vf(e)?e:Ln.a(PX(e));e=J(i,0,null);var l=J(i,1,null);if(i=J(i,2,null),e=J(i=ki.b((function(e){return p(e)?e:0}),new Q(null,3,5,R,[e,l,i],null)),0,null),l=J(i,1,null),i=J(i,2,null),!(t>e||A.b(t,e)&&(r>l||A.b(r,l)&&o>=i)))throw im("Insufficient `com.taoensso/encore` version, you may have a dependency conflict: see http://goo.gl/qBbLvC for solutions.",new n(null,2,[FE,SL(".",new Q(null,3,5,R,[e,l,i],null)),rq,SL(".",new Q(null,3,5,R,[t,r,o],null))],null))}A.b("default","nodejs");var RX=function e(n){switch(arguments.length){case 3:return e.c(arguments[0],arguments[1],arguments[2]);case 2:return e.b(arguments[0],arguments[1]);default:for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],arguments[2],new Qe(t.slice(3),0,null))}};RX.c=function(e,n,t){return N(e,n)?e:K.c(e,n,t)},RX.g=function(e,n,t,r){return NX(RX,RX.c(e,n,t),r)},RX.G=function(e){var n=C(e),t=D(e);e=C(t);var r=D(t);return t=C(r),r=D(r),this.g(n,e,t,r)},RX.b=function(e,n){return kg((function(e,n,t){return N(e,n)?e:K.c(e,n,t)}),null==e?S:e,n)},RX.F=3;var SX=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};SX.b=function(e,n){n=0>n?0:n;var t=F(e);return n>=t?I:Wi(e,n,t)},SX.c=function(e,n,t){n=0>n?0:n;var r=sg(F(e));return n>=(t=t>r?r:t)?I:Wi(e,n,t)},SX.F=3;var TX=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function UX(e){var n=new Uh(S),r={};return function(){function o(e){var n=null;if(0<arguments.length){n=0;for(var t=Array(arguments.length-0);n<t.length;)t[n]=arguments[n+0],++n;n=new Qe(t,0,null)}return i.call(this,n)}function i(o){var i=C(o);return p(P.b?P.b(i,wr):P.call(null,i,wr))?(i=C(o=D(o)),p(P.b?P.b(i,hA):P.call(null,i,hA))?xe(n,S):n.Cc(null,Hf.b(n.zb(null),o)),null):p(P.b?P.b(i,dI):P.call(null,i,dI))?(o=D(o),i=fh(e,o),n.Cc(null,K.c(n.zb(null),o,i)),i):(i=x.c(t(n),o,r))===r?(i=fh(e,o),n.Cc(null,K.c(n.zb(null),o,i)),i):i}return o.F=0,o.G=function(e){return i(e=B(e))},o.g=i,o}()}function VX(e,n){this.n=e,this.We=n}function WX(e,n){this.n=e,this.$e=n}function XX(e,n,t){this.Ue=e,this.Uf=n,this.cf=t}function YX(e){if(M(e))return kg((function(e,n,t){var r=J(t,0,null);return t=J(t,1,null),K.c(e,n,new VX(r,t))}),S,e);if(Vf(e)){var n=new Uh(-1);return gd.c((function(e,t){var r=J(t,0,null),o=J(t,1,null);return t=J(t,2,null),K.c(e,p(t)?t:n.Cc(null,n.zb(null)+1),new VX(r,o))}),S,e)}throw im("No matching `encore/cond!` clause",S)}function ZX(e){function r(e,n){var r=(new Date).getTime();for(Tc(n)&&625e-7>=Math.random()&&(Ph(o,null),Rh.b(i,(function(e){return le(kg((function(e,n,t){return Pf(t=kg((function(e,n,t){var o=x.b(l,n);return p(o)?r>=t.$e+o.We?Hf.b(e,n):e:Hf.b(e,n)}),t,t))?ne(e,n):me(e,n,t)}),je(p(e)?e:S),e))})));;){var a=t(i),u=x.b(a,e),s=null==u?null:kg(function(e,n,t,r,o,i){return function(e,n,r){var o=x.b(i,n);return p(o)?r.n<o.n||0>=(r=r.$e+o.We-t)?e:null==e?new XX(Gf([n,r]),n,r):r>e.cf?new XX(K.c(e.Ue,n,r),n,r):new XX(K.c(e.Ue,n,r),e.Uf,e.cf):e}}(0,0,r,0,0,l),null,u);return p(p(n)?n:s)?p(n=s)?new Q(null,3,5,R,[(e=n).Uf,e.cf,e.Ue],null):null:(p(n=t(o))||(u=kg(function(e,n,t,r,o){return function(e,n,r){return K.c(e,n,function(){var e=x.b(t,n);if(p(e)){var i=e.$e;return o>=i+r.We?new WX(1,o):new WX(e.n+1,i)}return new WX(1,o)}())}}(0,0,u,0,r),u,l),Ph(i,K.c(a,e,u))),null)}}if(Pf(e))return new Q(null,2,5,R,[null,Hh(null)],null);var o=Oh(null),i=Oh(null),l=YX(e);return new Q(null,2,5,R,[i,function(){function e(e,t){if(p(P.b?P.b(e,nu):P.call(null,e,nu)))return p(P.b?P.b(t,JD):P.call(null,t,JD))?Ph(i,null):Rh.c(i,Hf,t),null;if(p(P.b?P.b(e,MG):P.call(null,e,MG)))return r(t,!0);throw im("Unrecognized rate limiter command",new n(null,2,[uF,e,Lq,t],null))}function t(e){return r(e,!1)}function o(){return r(null,!1)}var l;return(l=function(n,r){switch(arguments.length){case 0:return o.call(this);case 1:return t.call(this,n);case 2:return e.call(this,n,r)}throw Error("Invalid arity: "+arguments.length)}).o=o,l.a=t,l.b=e,l}()],null)}TX.b=function(e,n){var t=F(e);return 0>n?Wi(e,0>(n+=t)?0:n,t):n>=t?I:Wi(e,n,t)},TX.c=function(e,n,t){if(0>=t)return I;var r=sg(F(e));return 0>n?Wi(e,n=0>(n+=r)?0:n,(t=n+t)>r?r:t):n>=(r=(t=n+t)>r?r:t)?I:Wi(e,n,r)},TX.F=3;var $X=function(){function e(e){return new zc(e)}function n(){return new zc}var t;return(t=function(t){switch(arguments.length){case 0:return n.call(this);case 1:return e.call(this,t)}throw Error("Invalid arity: "+arguments.length)}).o=n,t.a=e,t}(),aY=function(){function e(e,n){return e=e instanceof zc?e:$X.a(q.a(e)),n=q.a(n),e.append(n)}function n(e){return e instanceof zc?e:$X.a(q.a(e))}function t(){return $X.o()}var r;return(r=function(r,o){switch(arguments.length){case 0:return t.call(this);case 1:return n.call(this,r);case 2:return e.call(this,r,o)}throw Error("Invalid arity: "+arguments.length)}).o=t,r.a=n,r.b=e,r}();function bY(e,n){if(p(p(" ")?kh.b(" ",""):" ")){var t=ci(),r=mg(aY,q);return p(e)?ng(Ih.b(e,t),r,n):ng(t,r,n)}return p(e)?ng(e,mg(aY,q),n):q.a(gd.b(aY,n))}var cY=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};cY.b=function(e,n){return e.substring(n)},cY.c=function(e,n,t){return n>=t?"":e.substring(n,t)},cY.F=3;var dY=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function eY(e){return void 0===e||null==e?"nil":e}dY.b=function(e,n){return LX(e.substr(n))},dY.c=function(e,n,t){return LX(e.substr(n,t))},dY.F=3;var fY=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(0<t.length?new Qe(t.slice(0),0,null):null)};fY.g=function(e){e=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e;var n=x.b(e,Oy),t=x.b(e,Dx),r=x.b(e,ky),o=x.b(e,XD),i=x.b(e,Uq),l=x.b(e,ZE),a=x.b(e,Pn),u=x.b(e,HE),s=x.b(e,Zs);return mj(e),Math.round((p(s)?31536e6*s:0)+(p(o)?2551392e3*o:0)+(p(t)?6048e5*t:0)+(p(a)?864e5*a:0)+(p(u)?36e5*u:0)+(p(l)?6e4*l:0)+(p(i)?1e3*i:0)+(p(r)?r:0)+(p(n)?n:0))},fY.F=0,fY.G=function(e){return this.g(B(e))},Ih.b((function(e){return tg(sg(e),1e3)}),fY);var gY=function(){function e(e){if(e instanceof RegExp)return function(n){return Xk(e,n)};if("string"===typeof e){if(kh.b(-1,e.indexOf("*"))){var t=Zk(RL(RL(["^",e,"$"].join(""),".","\\."),"*","(.*)"));return function(e){return Xk(t,e)}}return function(n){return A.b(n,e)}}throw im("Unexpected ns-pattern type",new n(null,2,[uF,e,U,Yc(e)],null))}return function(){function n(n,t){var r=B(n)?function(){var t=ki.b(e,n),r=B(t),o=C(r);return D(r)?function(e){return OX((function(n){return n.a?n.a(e):n.call(null,e)}),t)}:function(e){return o.a?o.a(e):o.call(null,e)}}():null,o=B(t)?function(){var n=ki.b(e,t),r=B(n),o=C(r);return D(r)?function(e){return Tc(OX((function(n){return n.a?n.a(e):n.call(null,e)}),n))}:function(e){return Tc(o.a?o.a(e):o.call(null,e))}}():null;return p(p(r)?o:r)?function(e){return e=q.a(e),p(r.a?r.a(e):r.call(null,e))&&!!p(o.a?o.a(e):o.call(null,e))||null}:p(r)?function(e){return!!p(r(q.a(e)))||null}:p(o)?function(e){return!!p(o(q.a(e)))||null}:function(){return!0}}function t(n){if(M(n))return r.b(ty.a(n),Lz.a(n));if(Vf(n)||Rf(n))return r.b(n,null);if(A.b(n,"*"))return function(){return!0};var t=e(n);return function(e){return!!p(t(q.a(e)))||null}}var r=null;return(r=function(e,r){switch(arguments.length){case 1:return t.call(this,e);case 2:return n.call(this,e,r)}throw Error("Invalid arity: "+arguments.length)}).a=t,r.b=n,r}()}();function hY(e){for(var n=[],t=arguments.length,r=0;r<t;)n.push(arguments[r]),r+=1;return iY(0<n.length?new Qe(n.slice(0),0,null):null)}function iY(e){return J(e,0,null),new n(null,6,[Ju,!0,tB,!1,GI,null,eC,null,vr,dx,qI,"undefined"!==typeof console?function(e){var n=function(e){var n=function(){var n=e instanceof z?e.da:null;switch(n){case"trace":return console.trace;case"debug":return console.debug;case"info":return console.info;case"warn":return console.warn;case"error":case"fatal":return console.error;case"report":return console.info;default:throw Error(["No matching clause: ",q.a(n)].join(""))}}();return p(n)?n:console.log}(cn.a(e));if(p(n)){if(p(function(){var n=bA.a(e);return p(n)?n:mi.b(e,new Q(null,2,5,R,[xw,bA],null))}())){var t=function(){var n=K.g(e,fx,"",G([eB,null])),t=vr.a(e);return t.a?t.a(n):t.call(null,n)}(),r=function(){var n=QH.a(e),r=eB.a(e);return p(r)?vf(t,vf(r,n)):vf(t,n)}();return n.apply(console,fd(r))}return n.call(console,Bl(Qx.a(e)))}return null}:function(){return null}],null)}Ih.b(lh,SX),Ih.b(lh,TX),Ih.b(LX,cY),Ih.b(LX,dY),Vf(KX)?QX(new Q(null,3,5,R,[2,87,0],null)):QX(2.87);var jY=function e(n){switch(arguments.length){case 1:return e.a(arguments[0]);case 2:return e.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};jY.a=function(e){return jY.b(null,e)},jY.b=function(e,n){var t=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e,r=x.b(t,xB);x.b(t,UH);var o=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n;n=x.b(o,cn),t=x.b(o,eB);var i=x.b(o,fx),l=x.b(o,uq),a=x.b(o,Pv);return x.b(o,et),x.b(o,pI),o=x.b(o,iF),[Lg(n).toUpperCase()," [",q.a(p(l)?l:p(a)?a:"?"),":",q.a(p(o)?o:"?"),"] - ",q.a(Bl(i)),p(r)?null:p(t)?["\n",q.a(kY?kY(t):lY.call(null,t,e))].join(""):null].join("")},jY.F=2;var mY=new n(null,6,[cn,AG,tz,I,tp,I,Eu,I,vr,jY,HG,new n(null,1,[zI,hY.a?hY.a(S):hY.call(null,S)],null)],null);function nY(e){for(var n=[],t=arguments.length,r=0;r<t;)n.push(arguments[r]),r+=1;return mY=gh(arguments[0],mY,1<n.length?new Qe(n.slice(1),0,null):null)}function oY(e){return nY((function(){return e}))}var pY=Fk(new Q(null,7,5,R,[mu,AG,sD,VH,IA,$B,rz],null)),qY=Ik(new Q(null,7,5,R,[mu,AG,sD,VH,IA,$B,rz],null),D(Rk(0,Number.MAX_VALUE)));function rY(e){var t=pY.a?pY.a(e):pY.call(null,e);if(p(t))return t;throw im("Invalid Timbre logging level",new n(null,1,[uF,e],null))}function sY(e,n){return function(){var n=rY(e);return qY.a?qY.a(n):qY.call(null,n)}()>=function(){var e=rY(n);return qY.a?qY.a(e):qY.call(null,e)}()}var tY=UX(gY),uY=UX((function(e,n,t){return(e=tY(e,n)).a?e.a(t):e.call(null,t)}));function vY(e,n,t){return t=p(t)?t:mY,sY(e,x.c(t,cn,rz))&&ag(uY(x.b(t,tz),x.b(t,tp),n))&&!0}function wY(e){return bY(Wh.a((function(e){return Uf(e=eY(e))?ol.g(G([e])):e})),e)}var xY=UX((function(e,n){return J(e=ZX(n),0,null),J(e,1,null)}));function yY(e){return 1<F(e)?Wi(e,1,F(e)):I}function zY(e){var n=P.b?P.b(mq,mq):P.call(null,mq,mq),t=P.b?P.b(fG,cG):P.call(null,fG,cG),r=J(e,0,null);if(p(p(n)?r instanceof Error:n)){n=r,r=null;var o=yY(e);return e=p(t)?J(o,0,null):null,t=p(t)?yY(o):o,new Q(null,4,5,R,[n,r,e,t],null)}return r=p(!!M(r)&&Mc.a(Lf(r)))?r:null,n=p(o=SB.a(r))?o:p(n)?null:mq,o=p(r=Hf.b(r,SB))?yY(e):e,e=p(t)?J(o,0,null):null,t=p(t)?yY(o):o,new Q(null,4,5,R,[n,r,e,t],null)}function AY(e,r,o,i,l){var a=mY;if(vY(e,r,a)){var u=new Date,s=J(i=zY(i=t(i)),0,null),c=J(i,1,null),d=J(i,2,null);if(i=J(i,3,null),u=Cf.b(p(null)?null:S,Xj([BC,Yx,QH,Pv,xs,uq,cn,eB,fI,iF,dn,xw,jt],[u,a,i,null,function(){var t=new Bk(null,new n(null,2,[$B,null,IA,null],null),null);return t.a?t.a(e):t.call(null,e)}(),r,e,s,null,o,new xl((function(){return s})),c,d])),p(u=gd.c((function(e,n){return null==(e=n.a?n.a(e):n.call(null,e))?bf(null):e}),u,Eu.a(a)))){i=null!=u&&(64&u.h||h===u.D)?fh(qk,u):u;var f=x.b(i,QH);u=K.c(u,uo,new xl((function(){return f})));var _=RX.g(u,fx,new xl((function(){if(A.b(null,fG))return"";if(A.b(fG,fG))return wY(f);if(A.b(cG,fG)){if("string"!==typeof d)throw im("Timbre format-style logging call without a format pattern (string)",new n(null,2,[cn,e,Ht,[q.a(p(r)?r:p(null)?null:"?"),":",q.a(p(o)?o:"?")].join("")],null));return gh(WQ,p(d)?d:"",ki.b(eY,f))}throw Error(["No matching clause: ",q.a(fG)].join(""))})),G([Lv,new xl((function(){return Je(new Q(null,3,5,R,[l,d,x.c(c,AI,f)],null))}))])),g=UX(x.c(a,vr,jY));kg((function(t,o,i){if(p(function(){var n=Ju.a(i);return p(n)&&(n=GI.a(i),n=sY(e,p(n)?n:mu)),n}())&&p(uY(tz.a(i),tp.a(i),r))){var l=eC.a(i);if(function(){var e=Pf(l);if(e)return e;e=xY(o,l);var n=Bl(Lv.a(_));return Tc(e=e.a?e.a(n):e.call(null,n))}()){var a=null!=i&&(64&i.h||h===i.D)?fh(qk,i):i;t=x.b(a,qI),x.b(a,tB);var u=function(){var e=vr.a(i),n=(n=null==e)?n:P.b?P.b(e,dx):P.call(null,e,dx);return p(n)?g:e}(),s=Cf.b(_,new n(null,4,[Fz,o,Cw,i,vr,u,Qx,new xl((function(){return u.a?u.a(_):u.call(null,_)}))],null));return a=function(){var e=Py.a(i);return p(e)?e.a?e.a(s):e.call(null,s):s}(),p(a)?t.a?t.a(a):t.call(null,a):null}}return null}),null,HG.a(a))}}return null}function lY(e){switch(arguments.length){case 1:case 2:return kY(arguments[0]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}}function kY(e){return q.a(e)}function BY(e,n,t){var r=BY[db(null)];if(null!=r)r.A?r.A(null,e,n,t):r.call(null,null,e,n,t);else{if(null==(r=BY._))throw Zc("Measurements.record!",null);r.A?r.A(null,e,n,t):r.call(null,null,e,n,t)}}function CY(e){if(null!=e&&null!=e.yf)e.yf(e);else{var n=CY[db(null==e?null:e)];if(null!=n)n.a?n.a(e):n.call(null,e);else{if(null==(n=CY._))throw Zc("Node.close",e);n.a?n.a(e):n.call(null,e)}}}function DY(e,n){if(null!=e&&null!=e.zf)e.zf(e,n);else{var t=DY[db(null==e?null:e)];if(null!=t)t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=DY._))throw Zc("Node.message",e);t.b?t.b(e,n):t.call(null,e,n)}}}function EY(e,n){if(null==e||null==e.Fg){var t=EY[db(null==e?null:e)];if(null!=t)t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=EY._))throw Zc("Node.add-source",e);t.b?t.b(e,n):t.call(null,e,n)}}}function FY(e,n){if(null!=e&&null!=e.Af)e.Af(e,n);else{var t=FY[db(null==e?null:e)];if(null!=t)t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=FY._))throw Zc("Node.remove-source",e);t.b?t.b(e,n):t.call(null,e,n)}}}function GY(e,n,t){if(t=ow.a(t),p(p(e=JT.b(e,t))?kh.b(n,lz.a(e)):e))throw im(["The original source of peer ",q.a(t)," doesnt match the current source"].join(""),S)}function HY(e,n,t){return gd.c((function(n,t){var r=J(n,0,null);n=J(n,1,null),AY(AG,Pa,33,new xl((function(){return new Q(null,2,5,R,["about to remove source from domain",ET(t)],null)})),-1707658676);var o=HT(t,r,e);return p(o)?(r=J(o,0,null),o=J(o,1,null),AY(AG,Pa,36,new xl((function(){return new Q(null,2,5,R,["removed source from domain",ET(t)],null)})),-1765538511),new Q(null,2,5,R,[r,ji.b(n,o)],null)):new Q(null,2,5,R,[r,n],null)}),new Q(null,2,5,R,[n,I],null),fi.b(Uc,Cf.b(ki.b((function(e){return J(e,0,null),e=J(e,1,null),tq.a(e)}),Hf.b(t,"global")),mi.b(t,new Q(null,2,5,R,["global",tq],null)))))}function IY(e,n,t,r,o){try{if(A.b(Nz,U.a(o)))return HY(t,n,e);var i=mi.b(e,new Q(null,2,5,R,[tq.b(o,"global"),tq],null));return p(i)?(AY(AG,Pa,59,new xl((function(){return new Q(null,4,5,R,["Handling message with domain",i,"message: \n",q.a(t)],null)})),-150357184),GY(n,r,o),HT(i,n,t)):new Q(null,2,5,R,[n,new Q(null,1,5,R,[xL.K(tq.a(o),r,is.a(o),ow.a(o),mL("global.errors.failure",["Unable to find domain for message ",q.a(t)].join("")))],null)],null)}finally{p(e=U.a(o))&&p(null)&&BY(HC,["inv/",Lg(e)].join(""),0)}}var JY={};function KY(e){e=bL(e);var n=U.a(e);return p(n)?K.c(e,U,Kg.a(n)):e}function LY(e,r,o,i){e=KY(e);var l=mi.b(t(r),new Q(null,2,5,R,[i,lz],null));if(p(l)){A.b(cJ,U.a(e))||DY(o,new n(null,3,[Hv,Fs,lz,l,Xv,e],null));var a=(new Date).getTime();return Rh.b(r,(function(e){return ni(e,new Q(null,2,5,R,[i,Nn],null),a)}))}return AY(VH,na,31,new xl((function(){return new Q(null,2,5,R,["Cannot process message for not-registered key",i],null)})),-1344154771)}function MY(e,n){YK(lD.a(e));try{FY(n,e)}catch(r){if(!(r instanceof Error))throw r;var t=r;AY(IA,na,39,new xl((function(){return new Q(null,3,5,R,[t,"Unable to remove client for",Pi],null)})),-1803855914)}}function NY(e,n,t){AY(sD,na,43,new xl((function(){return new Q(null,2,5,R,["removing client for",t],null)})),38438999);var r=J(e=Th(e,t),0,null);J(e,1,null),p(e=mi.b(r,new Q(null,2,5,R,[t,lz],null)))&&MY(e,n)}function OY(e,t,r,o){Rh.A(e,K,r,new n(null,2,[lz,o,Nn,(new Date).getTime()],null)),EY(t,o)}function PY(e,n,t){return ji.b(S,function(){function r(e){return J(e,0,null),e=J(e,1,null),Nn.a(e)<n}return e.b?e.b(r,t):e.call(null,r,t)}())}function QY(e,n,t){AY(AG,na,61,new xl((function(){return new Q(null,2,5,R,["running client scavenger. collecting everything older than",t],null)})),695701546);for(var r=J(e=Sh(e,Kh(PY,gi,t)),0,null),o=(J(e,1,null),B(PY(fi,t,r))),i=null,l=0,a=0;;)if(a<l){var u=i.W(null,a),s=J(u,0,null),c=J(u,1,null),d=lz.a(c);AY(sD,na,66,new xl(function(e,n,t,r,o,i,l){return function(){return new Q(null,2,5,R,["scavenging client for",l],null)}}(0,0,0,0,0,0,s)),-1066526687),MY(d,n),a+=1}else{if(!(d=B(o)))break;if(Wf(u=d))o=re(u),a=se(u),i=o,l=F(o),o=a;else{var f=C(u);s=J(f,0,null),c=J(f,1,null);var p=lz.a(c);AY(sD,na,66,new xl(function(e,n,t,r,o,i,l){return function(){return new Q(null,2,5,R,["scavenging client for",l],null)}}(0,0,0,0,0,0,s)),697620603),MY(p,n),o=D(u),i=null,l=0}a=0}}var RY={},m5;function TY(e,t,r,o){var i=OK(1);return uK((function(){var n=function(){function n(n){var t=n[1];if(7===t)return n[2]=n[2],n[1]=3,yz;if(1===t)return n[2]=null,n[1]=2,yz;if(4===t)return t=n[7],t=n[2],n[7]=t,n[1]=p(t)?5:6,yz;if(13===t)return n[2]=null,n[1]=14,yz;if(6===t)return n[2]=null,n[1]=7,yz;if(3===t)return LK(n,n[2]);if(12===t)return t=n[7],t=Hl(t),t=e.b?e.b(o,t):e.call(null,o,t),n[2]=t,n[1]=14,yz;if(2===t)return KK(n,r);if(11===t){if(n[4]=Re(n[4]),t=n[2],n[5]=t,!(t instanceof Error))throw t;return n[1]=10,n[5]=null,yz}if(9===t)return n[8]=n[2],n[2]=null,n[1]=2,yz;if(5===t)return n[2]=null,n[1]=8,yz;if(14===t)return t=n[2],n[4]=Re(n[4]),n[2]=t,n[1]=9,yz;if(10===t){t=n[7];var i=n[2];return t=AY(IA,oa,15,new xl((function(){return new Q(null,2,5,R,[i,"error while invoking the client callback"],null)})),377597321),n[2]=t,n[1]=9,yz}return 8===t?(n[4]=vf(11,n[4]),n[1]=p(e)?12:13,yz):null}return function(){function e(e){for(;;){e:try{for(;;){var t=n(e);if(!P(t,yz)){var r=t;break e}}}catch(o){if(r=o,e[2]=r,!B(e[4]))throw r;e[1]=C(e[4]),r=yz}if(!P(r,yz))return r}}function t(){var e=[null,null,null,null,null,null,null,null,null];return e[0]=r,e[1]=1,e}var r=null;return(r=function(n){switch(arguments.length){case 0:return t.call(this);case 1:return e.call(this,n)}throw Error("Invalid arity: "+arguments.length)}).o=t,r.a=e,r}()}();return JK(function(){var e=n();return e[6]=i,e}())})),new n(null,3,[U,Fs,lD,r,Rs,tn.b(t,"127.0.0.1")],null)}function UY(e,n){return p(p(e)?n:e)&&(e=t(e),NY(kE.a(e),Yp.a(e),n),AY(sD,oa,27,new xl((function(){return new Q(null,1,5,R,["local client disconnected"],null)})),1501190767)),Promise.resolve(!0)}function VY(e,n,r){if(p(p(e)?n:e)){AY(AG,oa,33,new xl((function(){return new Q(null,3,5,R,["Processing incoming message",r,"from local client"],null)})),1854402887);var o=Ll(r);return e=t(e),LY(o,kE.a(e),Yp.a(e),n)}return null}function WY(e,n){var r=t(e),o=OK(new YJ(WJ(100),100)),i=("undefined"!==typeof SK&&"undefined"!==typeof JY&&"undefined"!==typeof RY&&"undefined"!==typeof m5||((m5=function(e,n,t,r,o){this.Qe=e,this.Wd=n,this.qd=t,this.ch=r,this.fh=o,this.h=393216,this.I=0}).prototype.O=function(e,n){return new m5(this.Qe,this.Wd,this.qd,this.ch,n)},m5.prototype.N=function(){return this.fh},m5.prototype.disconnect=function(){return UY(this.Qe,this.ch)},m5.prototype.send=function(e){return VY(this.Qe,this.ch,e)},m5.Pa=function(){return new Q(null,5,5,R,[zp,Kt,hu,Jt,eK],null)},m5.Ia=!0,m5.Da="gateway.cljs.local-client/t_gateway$cljs$local_client14811",m5.Ja=function(e){return ce(e,"gateway.cljs.local-client/t_gateway$cljs$local_client14811")}),new m5(e,n,r,o,S));AY(sD,oa,46,new xl((function(){return new Q(null,1,5,R,["local client connected"],null)})),113159820);var l=TY(n,r,o,i);return OY(kE.a(r),Yp.a(r),o,l),Promise.resolve(i)}var n5=function(){function e(e,n,t){var r=XY[db(null==e?null:e)];if(null!=r)return r.c?r.c(e,n,t):r.call(null,e,n,t);if(null!=(r=XY._))return r.c?r.c(e,n,t):r.call(null,e,n,t);throw Zc("IPromise.-then",e)}function n(e,n){var t=XY[db(null==e?null:e)];if(null!=t)return t.b?t.b(e,n):t.call(null,e,n);if(null!=(t=XY._))return t.b?t.b(e,n):t.call(null,e,n);throw Zc("IPromise.-then",e)}var t;return(t=function(t,r,o){switch(arguments.length){case 2:return n.call(this,t,r);case 3:return e.call(this,t,r,o)}throw Error("Invalid arity: "+arguments.length)}).b=n,t.c=e,t}(),XY=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};XY.b=function(e,n){return null!=e&&null!=e.If?e.If(e,n):n5(e,n)},XY.c=function(e,n,t){return null!=e&&null!=e.Jf?e.Jf(e,n,t):n5(e,n,t)},XY.F=3;var o5=function(){function e(e,n,t){var r=YY[db(null==e?null:e)];if(null!=r)return r.c?r.c(e,n,t):r.call(null,e,n,t);if(null!=(r=YY._))return r.c?r.c(e,n,t):r.call(null,e,n,t);throw Zc("IPromise.-thenErr",e)}function n(e,n){var t=YY[db(null==e?null:e)];if(null!=t)return t.b?t.b(e,n):t.call(null,e,n);if(null!=(t=YY._))return t.b?t.b(e,n):t.call(null,e,n);throw Zc("IPromise.-thenErr",e)}var t;return(t=function(t,r,o){switch(arguments.length){case 2:return n.call(this,t,r);case 3:return e.call(this,t,r,o)}throw Error("Invalid arity: "+arguments.length)}).b=n,t.c=e,t}(),YY=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function ZY(e){if(null!=e&&null!=e.Xe)e=e.Xe(e);else{var n=ZY[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=ZY._))throw Zc("IPromiseFactory.-promise",e);e=n.a?n.a(e):n.call(null,e)}}return e}function $Y(e){if(null!=e&&null!=e.Ff)e.Ff(e);else{var n=$Y[db(null==e?null:e)];if(null!=n)n.a?n.a(e):n.call(null,e);else{if(null==(n=$Y._))throw Zc("ICancellable.-cancel!",e);n.a?n.a(e):n.call(null,e)}}}function aZ(e,n){if(null!=e&&null!=e.Hf)e=e.Hf(e,n);else{var t=aZ[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=aZ._))throw Zc("ICompletable.-resolve!",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function bZ(e,n){if(null!=e&&null!=e.Gf)e=e.Gf(e,n);else{var t=bZ[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=bZ._))throw Zc("ICompletable.-reject!",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function cZ(e,n,t){if(null!=e&&null!=e.Mf)e=e.Mf(e,n,t);else{var r=cZ[db(null==e?null:e)];if(null!=r)e=r.c?r.c(e,n,t):r.call(null,e,n,t);else{if(null==(r=cZ._))throw Zc("IScheduler.-schedule!",e);e=r.c?r.c(e,n,t):r.call(null,e,n,t)}}return e}YY.b=function(e,n){return null!=e&&null!=e.Kf?e.Kf(e,n):o5(e,n)},YY.c=function(e,n,t){return null!=e&&null!=e.Lf?e.Lf(e,n,t):o5(e,n,t)},YY.F=3;var eZ=new xl((function(){return dZ.o?dZ.o():dZ.call(null)}));function fZ(e){return cZ(eZ instanceof xl?t(eZ):eZ,1e3,e)}function gZ(e,n){cZ(eZ instanceof xl?t(eZ):eZ,e,n)}function hZ(e){this.state=e,this.I=1,this.h=0}function iZ(){}function dZ(){return new iZ}hZ.prototype.Bd=function(){return t(Vb(this.state,"done"))},hZ.prototype.Ff=function(){if(p(Vb(this.state,"cancelled")))return null;var e=Vb(this.state,"cancel-fn");return this.state.cancelled=!0,e.o?e.o():e.call(null)},iZ.prototype.Mf=function(e,n,t){var r=new Uh(!1),o=setTimeout((function(){try{return t.o?t.o():t.call(null)}finally{xe(r,!0)}}),n);return new hZ({done:r,cancelled:!1,"cancel-fn":function(){return clearTimeout(o)}})};var jZ=Promise;function kZ(){var e={},n=new jZ((function(n,t){return e.resolve=n,e.reject=t}));return n.Zh=h,n.Hf=function(n,t){return e.resolve(t)},n.Gf=function(n,t){return e.reject(t)},n}function lZ(e){var n=kZ();try{var t=function(e){return aZ(n,e)},r=function(e){return bZ(n,e)};e.b?e.b(t,r):e.call(null,t,r)}catch(o){bZ(n,o)}return n}function mZ(e,n){return XY(e,n)}function nZ(e,n){return YY(e,n)}function oZ(){return this}function pZ(e,n){return qZ(e,n)}function qZ(e,t){var r=new n(null,2,[U,lC,sr,"Authentication timed out"],null),o=kZ();return gZ(t,(function(){return A.b(r,Ix)?bZ(o,new oZ("Operation timed out.")):aZ(o,r)})),jZ.race(fd(Wh.b(ZY,new Q(null,2,5,R,[e,o],null))))}function rZ(e,n){if(null!=e&&null!=e.wf)e=e.wf(e,n);else{var t=rZ[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=rZ._))throw Zc("Authenticator.authenticate",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function sZ(e){if(null!=e&&null!=e.xf)e.xf(e);else{var n=sZ[db(null==e?null:e)];if(null!=n)n.a?n.a(e):n.call(null,e);else{if(null==(n=sZ._))throw Zc("Authenticator.stop",e);n.a?n.a(e):n.call(null,e)}}}function tZ(e){var t=null!=(e=YB.a(e))&&(64&e.h||h===e.D)?fh(qk,e):e;return e=x.b(t,Gs),t=x.b(t,Ro),p(p(e)?t:e)?jZ.resolve(new n(null,3,[U,qz,dt,e,Gs,e],null)):jZ.reject(im("Missing login/secret",new n(null,2,[U,lC,sr,"Missing login/secret"],null)))}function uZ(e){return A.b(Ts.a(e),"gateway-token")?$p.a(e):null}!function(e){e.prototype.Xe=function(){return this},e.prototype.If=function(e,n){return this.then((function(e){return n.a?n.a(e):n.call(null,e)}))},e.prototype.Jf=function(e,n){return this.then((function(e){return n.a?n.a(e):n.call(null,e)}))},e.prototype.Kf=function(e,n){return this.catch((function(e){return n.a?n.a(e):n.call(null,e)}))},e.prototype.Lf=function(e,n){return this.catch((function(e){return n.a?n.a(e):n.call(null,e)}))}}(Promise),YY._=function(){function e(e,n,t){return YY(ZY(e),n,t)}function n(e,n){return YY(ZY(e),n)}var t;return(t=function(t,r,o){switch(arguments.length){case 2:return n.call(this,t,r);case 3:return e.call(this,t,r,o)}throw Error("Invalid arity: "+arguments.length)}).b=n,t.c=e,t}(),Error.prototype.Xe=function(){return jZ.reject(this)},ZY._=function(e){return jZ.resolve(e)},Promise.prototype.ma=h,Promise.prototype.S=function(e,n){return ce(n,"#<Promise[~]>")},ub(oZ,Error),Z(KI,BI,Wc),Z(dq,Wx,Wx),Z(RC,O(wt,ir,new Q(null,1,5,R,[KI],null),iA,new Q(null,2,5,R,[GF,dq],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[KI],null),new Q(null,2,5,R,[GF,dq],null),null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,YB)}],null),function(e){return M(e)&&N(e,YB)},new Q(null,2,5,R,[is,su],null),new Q(null,1,5,R,[KI],null),null,new Q(null,1,5,R,[YB],null),new Q(null,2,5,R,[GF,dq],null),new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,YB))],null),null]))),Z(fE,Qp,Hg);var vZ,p5=Oh(S),q5=Oh(S),r5=Oh(S),s5=Oh(S),t5=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));vZ=new dm(Me.b(ka,"response-type"),U,t5,p5,q5,r5,s5),Z(ey,Bo,Vc),vZ.v(null,lC,(function(){return US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[fE,ey],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,U)},function(e){return N(e,sr)}],null),function(e){return M(e)&&N(e,U)&&N(e,sr)},I,new Q(null,2,5,R,[fE,ey],null),null,new Q(null,2,5,R,[U,sr],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,sr))],null),null]))})),Z(br,Bo,Vc),Z(Xs,Bo,Vc),Z(gB,Bo,Vc),vZ.v(null,qz,(function(){return US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[fE,br,Xs],null),new Q(null,1,5,R,[gB],null),null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,U)},function(e){return N(e,Gs)},function(e){return N(e,dt)}],null),function(e){return M(e)&&N(e,U)&&N(e,Gs)&&N(e,dt)},new Q(null,1,5,R,[Gu],null),new Q(null,3,5,R,[fE,br,Xs],null),null,new Q(null,3,5,R,[U,Gs,dt],null),new Q(null,1,5,R,[gB],null),new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Gs)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,dt))],null),null]))})),vZ.v(null,fF,(function(){return US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[fE,KI],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,U)},function(e){return N(e,YB)}],null),function(e){return M(e)&&N(e,U)&&N(e,YB)},I,new Q(null,2,5,R,[fE,KI],null),null,new Q(null,2,5,R,[U,YB],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,YB))],null),null]))})),Z(wH,O(io,$o,U),VS($o,new Ne((function(){return vZ}),$o,Xj([By,yw,OD,ho,ux,en,fz,AE,Dv,jF],[ms,vC,"gateway/auth/spec.cljc",24,1,14,14,Se,null,p(vZ)?vZ.ld:null]))));var BZ=new n(null,6,["application",new n(null,1,[ax,!0],null),"instance",new n(null,1,[ax,!1],null),"region",new n(null,1,[ax,!1],null),"environment",new n(null,1,[ax,!1],null),"machine",new n(null,1,[ax,!1],null),"user",new n(null,1,[ax,!1],null)],null);function CZ(e){return kg((function(e,n,t){return K.c(e,N(BZ,n)?Kg.a(n):n,t)}),S,e)}function DZ(e){var n=Eh((function(n){var t=J(n,0,null);return J(n,1,null),p(n=ax.a(t))?null==x.b(e,Kg.a(t)):n}),BZ);if(p(n)){var t=J(n,0,null);return J(n,1,null),t}return null}function EZ(e){var n=DZ(e);if(p(n))throw im(["Identity ",q.a(e)," is missing a required key: ",q.a(n)].join(""),S)}function Z4(e,n){var t=p(e)?-1!=e.indexOf("127.0.0.1"):e;return p(t)?p(t=n)?t:e:p(t=e)?t:n}function FZ(e){for(var n=[],t=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);255<o&&(n[t++]=255&o,o>>=8),n[t++]=o}return n}pc(),ZJ()||oc("iPod"),oc("iPad"),!oc("Android")||qc()||pc()||oc("Opera")||oc("Silk"),qc();var GZ=oc("Safari")&&!(qc()||oc("Coast")||oc("Opera")||oc("Edge")||oc("Edg/")||oc("OPR")||pc()||oc("Silk")||oc("Android"))&&!(ZJ()||oc("iPad")||oc("iPod")),HZ={},IZ=null,JZ=cK||dK&&!GZ||$J,KZ=JZ||"function"==typeof cb.btoa,LZ=JZ||!GZ&&!aK&&"function"==typeof cb.atob,UZ;function MZ(e,n){void 0===n&&(n=0),NZ(),n=HZ[n];for(var t=[],r=0;r<e.length;r+=3){var o=e[r],i=r+1<e.length,l=i?e[r+1]:0,a=r+2<e.length,u=a?e[r+2]:0,s=o>>2;o=(3&o)<<4|l>>4,l=(15&l)<<2|u>>6,u&=63,a||(u=64,i||(l=64)),t.push(n[s],n[o],n[l]||"",n[u]||"")}return t.join("")}function OZ(e){return KZ?cb.btoa(e):MZ(FZ(e),void 0)}function PZ(e){if(LZ)return cb.atob(e);var n="";return QZ(e,(function(e){n+=String.fromCharCode(e)})),n}function QZ(e,n){function t(n){for(;r<e.length;){var t=e.charAt(r++),o=IZ[t];if(null!=o)return o;if(!ec(t))throw Error("Unknown base64 encoding at char: "+t)}return n}NZ();for(var r=0;;){var o=t(-1),i=t(0),l=t(64),a=t(64);if(64===a&&-1===o)break;n(o<<2|i>>4),64!=l&&(n(i<<4&240|l>>2),64!=a&&n(l<<6&192|a))}}function NZ(){if(!IZ){IZ={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),n=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++){var r=e.concat(n[t].split(""));HZ[t]=r;for(var o=0;o<r.length;o++){var i=r[o];void 0===IZ[i]&&(IZ[i]=o)}}}}function RZ(){this.bb=-1}function SZ(e,n){this.bb=TZ,this.zc=cb.Uint8Array?new Uint8Array(this.bb):Array(this.bb),this.Lc=this.rd=0,this.aa=[],this.me=e,this.ge=n,this.af=cb.Int32Array?new Int32Array(64):Array(64),void 0===UZ&&(UZ=cb.Int32Array?new Int32Array(VZ):VZ),this.reset()}ub(SZ,RZ);var TZ=64,WZ=Kb(128,Rb(TZ-1));SZ.prototype.reset=function(){this.Lc=this.rd=0,this.aa=cb.Int32Array?new Int32Array(this.ge):Lb(this.ge)},SZ.prototype.Tc=function(){for(var e=this.zc,n=this.af,t=0,r=0;r<e.length;)n[t++]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r=4*t;for(e=16;64>e;e++){r=0|n[e-15],t=0|n[e-2];var o=(0|n[e-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,i=(0|n[e-7])+((t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)|0;n[e]=o+i|0}t=0|this.aa[0],r=0|this.aa[1];var l=0|this.aa[2],a=0|this.aa[3],u=0|this.aa[4],s=0|this.aa[5],c=0|this.aa[6];for(o=0|this.aa[7],e=0;64>e;e++){var d=((t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10))+(t&r^t&l^r&l)|0;i=(o=o+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))|0)+((i=(i=u&s^~u&c)+(0|UZ[e])|0)+(0|n[e])|0)|0,o=c,c=s,s=u,u=a+i|0,a=l,l=r,r=t,t=i+d|0}this.aa[0]=this.aa[0]+t|0,this.aa[1]=this.aa[1]+r|0,this.aa[2]=this.aa[2]+l|0,this.aa[3]=this.aa[3]+a|0,this.aa[4]=this.aa[4]+u|0,this.aa[5]=this.aa[5]+s|0,this.aa[6]=this.aa[6]+c|0,this.aa[7]=this.aa[7]+o|0},SZ.prototype.update=function(e,n){void 0===n&&(n=e.length);var t=0,r=this.rd;if("string"===typeof e)for(;t<n;)this.zc[r++]=e.charCodeAt(t++),r==this.bb&&(this.Tc(),r=0);else{if(!eb(e))throw Error("message must be string or array");for(;t<n;){var o=e[t++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");this.zc[r++]=o,r==this.bb&&(this.Tc(),r=0)}}this.rd=r,this.Lc+=n},SZ.prototype.digest=function(){var e=[],n=8*this.Lc;56>this.rd?this.update(WZ,56-this.rd):this.update(WZ,this.bb-(this.rd-56));for(var t=63;56<=t;t--)this.zc[t]=255&n,n/=256;for(this.Tc(),t=n=0;t<this.me;t++)for(var r=24;0<=r;r-=8)e[n++]=this.aa[t]>>r&255;return e};var VZ=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function XZ(){SZ.call(this,8,YZ)}ub(XZ,SZ);var YZ=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ZZ(e,n){this.bb=128,this.zc=cb.Uint8Array?new Uint8Array(this.bb):Array(this.bb),this.Lc=this.fd=0,this.aa=[],this.me=e,this.af=[],this.ge=$Z(n),this.le=!1,this.reset()}ub(ZZ,RZ);var a_=Kb([128],Rb(127));function $Z(e){for(var n=[],t=0;t<e.length;t+=2)n.push(new xb(e[t+1],e[t]));return n}g=ZZ.prototype,g.reset=function(){this.Lc=this.fd=0,this.aa=Lb(this.ge),this.le=!1},g.update=function(e,n){if(n=void 0!==n?n:e.length,this.le)throw Error("this hasher needs to be reset");var t=this.fd;if("string"===typeof e)for(var r=0;r<n;r++){var o=e.charCodeAt(r);if(255<o)throw Error("Characters must be in range [0,255]");this.zc[t++]=o,t==this.bb&&(this.Tc(),t=0)}else{if(!eb(e))throw Error("message must be string or array");for(r=0;r<n;r++){if("number"!==typeof(o=e[r])||0>o||255<o||o!=(0|o))throw Error("message must be a byte array");this.zc[t++]=o,t==this.bb&&(this.Tc(),t=0)}}this.fd=t,this.Lc+=n},g.digest=function(){if(this.le)throw Error("this hasher needs to be reset");var e=8*this.Lc;112>this.fd?this.update(a_,112-this.fd):this.update(a_,this.bb-this.fd+112);for(var n=127;112<=n;n--)this.zc[n]=255&e,e/=256;this.Tc(),e=0;var t=Array(8*this.me);for(n=0;n<this.me;n++){var r=this.aa[n],o=r.ea;r=r.ja;for(var i=24;0<=i;i-=8)t[e++]=o>>i&255;for(i=24;0<=i;i-=8)t[e++]=r>>i&255}return this.le=!0,t},g.Tc=function(){for(var e=this.zc,n=this.af,t=0;16>t;t++){var r=8*t;n[t]=new xb(e[r+4]<<24|e[r+5]<<16|e[r+6]<<8|e[r+7],e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])}for(t=16;80>t;t++){e=(r=n[t-15]).ja,r=r.ea;var o=n[t-2],i=o.ja;o=o.ea,n[t]=this.Rf(n[t-16],n[t-7],new xb(e>>>1^r<<31^e>>>8^r<<24^e>>>7^r<<25,r>>>1^e<<31^r>>>8^e<<24^r>>>7),new xb(i>>>19^o<<13^o>>>29^i<<3^i>>>6^o<<26,o>>>19^i<<13^i>>>29^o<<3^o>>>6))}e=this.aa[0],r=this.aa[1],i=this.aa[2],o=this.aa[3];var l=this.aa[4],a=this.aa[5],u=this.aa[6],s=this.aa[7];for(t=0;80>t;t++){var c=e.ja,d=e.ea;c=new xb(c>>>28^d<<4^d>>>2^c<<30^d>>>7^c<<25,d>>>28^c<<4^c>>>2^d<<30^c>>>7^d<<25).add(new xb(e.ja&r.ja|r.ja&i.ja|e.ja&i.ja,e.ea&r.ea|r.ea&i.ea|e.ea&i.ea)),d=l.ja;var f=l.ea,p=l.ja,h=l.ea;d=this.Rf(s,new xb(d>>>14^f<<18^d>>>18^f<<14^f>>>9^d<<23,f>>>14^d<<18^f>>>18^d<<14^d>>>9^f<<23),new xb(p&a.ja|~p&u.ja,h&a.ea|~h&u.ea),b_[t],n[t]),s=u,u=a,a=l,l=o.add(d),o=i,i=r,r=e,e=d.add(c)}this.aa[0]=this.aa[0].add(e),this.aa[1]=this.aa[1].add(r),this.aa[2]=this.aa[2].add(i),this.aa[3]=this.aa[3].add(o),this.aa[4]=this.aa[4].add(l),this.aa[5]=this.aa[5].add(a),this.aa[6]=this.aa[6].add(u),this.aa[7]=this.aa[7].add(s)},g.Rf=function(e,n,t){for(var r=(2147483648^e.ja)+(2147483648^n.ja),o=e.ea+n.ea,i=arguments.length-1;2<=i;--i)r+=2147483648^arguments[i].ja,o+=arguments[i].ea;return 1&arguments.length&&(r+=2147483648),o+=arguments.length>>1,new xb(r,o+=Math.floor(r/4294967296))};var b_=$Z([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c_(){ZZ.call(this,6,d_)}ub(c_,ZZ);var d_=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428];function e_(){ZZ.call(this,8,f_)}ub(e_,ZZ);var f_=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];function g_(e,n,t){for(this.bb=-1,this.Rb=e,this.bb=t||e.bb||16,this.Bf=Array(this.bb),this.Te=Array(this.bb),(e=n).length>this.bb&&(this.Rb.update(e),e=this.Rb.digest(),this.Rb.reset()),t=0;t<this.bb;t++)n=t<e.length?e[t]:0,this.Bf[t]=92^n,this.Te[t]=54^n;this.Rb.update(this.Te)}ub(g_,RZ),g_.prototype.reset=function(){this.Rb.reset(),this.Rb.update(this.Te)},g_.prototype.update=function(e,n){this.Rb.update(e,n)},g_.prototype.digest=function(){var e=this.Rb.digest();return this.Rb.reset(),this.Rb.update(this.Bf),this.Rb.update(e),this.Rb.digest()},g_.prototype.getHmac=function(e){return this.reset(),this.update(e),this.digest()};var h_=new n(null,4,"HS256 sha256 HS384 sha384 HS512 sha512 RS256 RSA-SHA256".split(" "),null),i_=new n(null,4,"HS256 hmac HS384 hmac HS512 hmac RS256 sign".split(" "),null);function j_(e){return RL(RL(RL(e,"+","-"),"/","_"),"=","")}function k_(e,n){return new g_(function(){switch(e){case"sha256":return new XZ;case"sha384":return new c_;case"sha512":return new e_;default:throw Error([q.a(e)," hashing not supported"].join(""))}}(),n)}function l_(e,n,t,r){switch(r){case"hmac":return j_(MZ(k_(t,FZ(n)).getHmac(e)));default:throw Error("algorithm not supported")}}function m_(e,n,t,r,o){switch(o){case"hmac":return A.b(n,l_(e,t,r,o));default:throw Error("algorithm not supported")}}function n_(e,t){t=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;var r=x.b(t,rt),o=x.b(t,yu),i=x.b(t,MD),l=x.c(t,WD,(new Date).getTime()),a=x.c(t,iH,0);if(p(function(){if(p(o)){var n=yu.a(e);return Qf(o)?n=Tc(Eh(n=Ek([n]),o)):n=kh.b(n,o),n}return o}()))throw im(["Issuer does not match ",q.a(o)].join(""),new n(null,2,[U,Sw,TD,yu],null));if(p(function(){if(p(i)){var n=MD.a(e);if(Qf(n))n=Tc(Eh(Ek([i]),n));else n=kh.b(i,n);return n}return i}()))throw im(["Audience does not match ",q.a(i)].join(""),new n(null,2,[U,Sw,TD,MD],null));if(p(function(){var n=bD.a(e);return p(n)?bD.a(e)<=l-a:n}()))throw im(["Token is expired ",q.a(bD.a(e))].join(""),new n(null,2,[U,Sw,TD,bD],null));if(p(function(){var n=IB.a(e);return p(n)?IB.a(e)>l+a:n}()))throw im(["Token is not yet valid ",q.a(IB.a(e))].join(""),new n(null,2,[U,Sw,TD,IB],null));if(p(function(){var n=px.a(e);return p(n)?"number"===typeof r&&l-px.a(e)>r:n}()))throw im(["Token is older than max-age ",q.a(r)].join(""),new n(null,2,[U,Sw,TD,rt],null));return e}var o_=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};tb("gateway.common.jwt.unsign",o_),o_.b=function(e,n){return o_.c(e,n,S)},o_.c=function(e,n,t){t=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;var r=x.c(t,At,!1),o=UL(e,".",0);e=x.b(o,0);var i=x.b(o,1);if(o=x.b(o,2),p(Eh(Qc,new Q(null,3,5,R,[e,i,o],null))))throw Error("invalid token");var l=DX(PZ(e)).alg,a=kg((function(e,n,t){return K.c(e,Kg.a(n),t)}),S,Ll(DX(PZ(i)))),u=x.b(h_,l);if(l=x.b(i_,l),p(r))return a;if(Tc(p(u)?l:u))throw Error("algorithm not supported");if(Tc(m_([q.a(e),".",q.a(i)].join(""),o,n,u,l)))throw Error("signature verification failed");return n_(a,t)},o_.F=3;var p_=function e(n){for(var t=[],r=arguments.length,o=0;o<r;)t.push(arguments[o]),o+=1;return e.g(arguments[0],arguments[1],2<t.length?new Qe(t.slice(2),0,null):null)};tb("gateway.common.jwt.sign",p_),p_.g=function(e,t,r){var o=J(r,0,null);r=J(r,1,null);var i=p(o)?o:"HS256",l=p(r)?r:S;if(o=x.b(h_,i),r=x.b(i_,i),!M(e))throw Error("payload should be in JSON format");if(!M(l))throw Error("extra-headers should be a map");if(!p(p(o)?r:o))throw Error("algorithm not supported");return t=l_([i=j_(OZ(EX(Hl(gh(Cf,l,new n(null,2,[nC,i,Cr,"JWT"],null)))))),".",e=j_(OZ(EX(Hl(e))))].join(""),t,o,r),[i,".",e,".",q.a(t)].join("")},p_.F=2,p_.G=function(e){var n=C(e),t=D(e);return e=C(t),t=D(t),this.g(n,e,t)};var q_=6e5;function r_(e,t,r){var o=TK()+q_;return t=new n(null,3,[U,hI,hD,t,hI,r],null),o=p(o)?K.c(t,bD,o):t,p_(o,pn.a(e))}function s_(e,t){var r=TK();return e=pi(pi(o_.c(t,e,p(r)?new n(null,1,[WD,r],null):null),U,Kg),hD,CZ),A.b(U.a(e),hI)?pi(e,hI,(function(e){return pi(hO(e),U,Kg)})):e}function t_(e,n){if(null!=e&&null!=e.Re)e=e.Re(e,n);else{var t=t_[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=t_._))throw Zc("AuthImpl.auth",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function u_(e,t){switch(e=s_(e,t),(t=U.a(e))instanceof z?t.da:null){case"gw-request":return p(t=hI.a(e))?jZ.resolve(new n(null,3,[U,qz,hI,t,hD,hD.a(e)],null)):jZ.reject(new n(null,2,[U,lC,sr,"Token is missing the gateway request information"],null));case"authentication":return p(t=dt.a(e))?jZ.resolve(new n(null,2,[U,qz,dt,t],null)):jZ.reject(new n(null,2,[U,lC,sr,"Token is missing the impersonation information"],null));default:return jZ.reject(new n(null,2,[U,lC,sr,["Invalid gateway token type: ",q.a(U.a(e))].join("")],null))}}function v_(e,t,r){var o=uZ(YB.a(r));return p(o)?u_(pn.a(r),o):p(e)?pZ(lZ((function(n,t){return QK(e,new Q(null,3,5,R,[n,t,r],null))})),t):jZ.reject(im("No authenticator configured",new n(null,2,[U,lC,sr,"No authenticator configured"],null)))}function w_(e,n){this.we=e,this.timeout=n}function I_(e,n){var t=OK(new YJ(WJ(2e4),2e4));AY(sD,ja,85,new xl((function(){return new Q(null,2,5,R,["starting authenticator",n],null)})),1826837962);var r=OK(1);return uK((function(){var e=function(){function e(e){var r=e[1];if(1===r)return e[2]=null,e[1]=2,yz;if(2===r)return KK(e,t);if(3===r)return LK(e,e[2]);if(4===r)return r=e[7],r=e[2],e[7]=r,e[1]=p(r)?5:6,yz;if(5===r){var o=J(r=e[7],0,null),i=J(r,1,null),l=pi(r=J(r,2,null),YB,hO),a=YB.a(l);return r=AY(AG,ja,92,new xl((function(){return new Q(null,2,5,R,["processing authentication",p(Ro.a(a))?K.c(a,Ro,"XXX"):K.c(a,$p,"XXX")],null)})),781137680),l=nZ(l=mZ(l=t_(n,l),(function(e){return o.a?o.a(e):o.call(null,e)})),(function(e){return i.a?i.a(e):i.call(null,e)})),e[8]=l,e[9]=r,e[2]=null,e[1]=2,yz}return 6===r?(e[2]=null,e[1]=7,yz):7===r?(e[2]=e[2],e[1]=3,yz):null}return function(){function n(n){for(;;){e:try{for(;;){var t=e(n);if(!P(t,yz)){var r=t;break e}}}catch(o){if(r=o,n[2]=r,!B(n[4]))throw r;n[1]=C(n[4]),r=yz}if(!P(r,yz))return r}}function t(){var e=[null,null,null,null,null,null,null,null,null,null];return e[0]=r,e[1]=1,e}var r=null;return(r=function(e){switch(arguments.length){case 0:return t.call(this);case 1:return n.call(this,e)}throw Error("Invalid arity: "+arguments.length)}).o=t,r.a=n,r}()}();return JK(function(){var n=e();return n[6]=r,n}())})),new w_(t,yE.b(e,5e3))}function J_(e){this.ve=e}function K_(e,n,t){this.ca=e,this.n=n,this.se=0,this.ne=t,this.h=2,this.I=0}function L_(e,n){return new K_(WJ(e),e,n)}w_.prototype.xf=function(){return p(this.we)?YK(this.we):null},w_.prototype.wf=function(e,n){return v_(this.we,this.timeout,n)},J_.prototype.Re=function(e,t){var r=this;return nZ(mZ(function(){var e=Hl(t);return r.ve.a?r.ve.a(e):r.ve.call(null,e)}(),(function(e){var n=pi(hO(Ll(e)),U,Kg);return AY(AG,ma,15,new xl((function(){return new Q(null,2,5,R,["auth response",n],null)})),460971887),n})),(function(e){throw AY(AG,ma,18,new xl((function(){return new Q(null,2,5,R,["auth failure",e],null)})),1008486204),im(e,new n(null,2,[U,lC,sr,e],null))}))},K_.prototype.Dd=function(){return!1},K_.prototype.ae=function(e,n){return this.ca.length!==this.n?this.ca.unshift(n):(this.se+=1,p(this.ne)&&(this.ne.b?this.ne.b(n,this.se):this.ne.call(null,n,this.se))),this},K_.prototype.X=function(){return this.ca.length};var M_=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(Oa,"process-response"),(function(e){e=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e;var n=x.b(e,Fy);return x.b(e,Xv),U.a(n)}),o,e,n,t,r)}();function N_(e){this.ch=e}function O_(e,t,r){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,lz),l=x.b(o,Xv),a=x.b(o,Hv);x.b(o,Fy),mi.b(e,new Q(null,2,5,R,[Mx,$y],null));try{return A.b(l,new n(null,1,[Ev,1],null))?AY(sD,Oa,65,new xl((function(){return new Q(null,1,5,R,[function(){var n=new zc,t=Fc,r=Ec;Fc=!0,Ec=function(e){return n.append(e)};try{iV.a(e)}finally{Ec=r,Fc=t}return q.a(n)}()],null)})),843983722):A.b(a,Zv)?null:IY(t,e,r,i,l)}catch(s){if(s instanceof Error){var u=s;return AY(IA,Oa,70,new xl((function(){return new Q(null,3,5,R,[u,"Error handling message",r],null)})),-2130846531),new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.K(null,i,is.a(l),ow.a(l),jL(u,"global.errors.failure"))],null)],null)}throw s}}function P_(e,n){var t=ow.a(n);return p(t)?p(e=JT.b(e,t))?pD.a(e):null:p(e=pD.a(n))?K.c(e,dt,dt.a(n)):null}function Q_(e,r,o){var i=new Uh(null);try{if(AY(mu,Oa,89,new xl((function(){return new Q(null,2,5,R,["domain handler processing message",o],null)})),1671393030),p(!1)){var l=Xv.a(o),a=U.a(l);switch(Vh(i,P_(e,l)),a instanceof z?a.da:null){case"gateway.common.commands/source-removed":break;case"hello":p(!1)&&AY(sD,Oa,null,new xl((function(){return new Q(null,2,5,R,[OA,new n(null,2,[pD,t(i),OA,UK(l,new Q(null,2,5,R,[YB,"secret"],null))],null)],null)})),1370516204);break;default:p(!1)&&AY(sD,Oa,null,new xl((function(){return new Q(null,2,5,R,[OA,new n(null,2,[pD,t(i),OA,l],null)],null)})),-468633239)}}var u=O_(e,r,o),s=J(u,0,null),c=J(u,1,null),d=p(s)?s:e,f=B(c);r=null;for(var h=a=0;;)if(h<a){var _=r.W(null,h);M_.a(_),p(!1)&&p(!1)&&AY(sD,Oa,null,new xl(function(e,r,o,i,l,a,u,s,c,d){return function(){return new Q(null,2,5,R,[OA,new n(null,2,[pD,t(d),OA,Xv.a(l)],null)],null)}}(0,0,0,0,_,0,0,0,0,i)),337746494),h+=1}else{var g=B(f);if(!g)break;var m=g;if(Wf(m)){var w=re(m),v=se(m);m=w;var b=F(w);f=v,r=m,a=b}else{var y=C(m);M_.a(y),p(!1)&&p(!1)&&AY(sD,Oa,null,new xl(function(e,r,o,i,l,a,u,s,c,d,f,p){return function(){return new Q(null,2,5,R,[OA,new n(null,2,[pD,t(p),OA,Xv.a(l)],null)],null)}}(0,0,0,0,y,0,0,0,0,0,0,i)),422427538),f=D(m),r=null,a=0}h=0}return d}catch(I){if(I instanceof Error){var k=I;return AY(IA,Oa,107,new xl((function(){return new Q(null,3,5,R,[k,"error handling message",o],null)})),-220733563),e}throw I}}function R_(e){return ji.b(S,Wh.b((function(e){var t=ET(e);return new Q(null,2,5,R,[$v.a(t),new n(null,2,[tq,e,sD,t],null)],null)}),e))}function S_(e){var n=S,t=Ds.b(n,2e4);AY(sD,Oa,120,new xl((function(){return new Q(null,2,5,R,["node buffer size:",t],null)})),-208696662);var r=OK(L_(t,(function(e,n){return AY(VH,Oa,125,new xl((function(){return new Q(null,4,5,R,["the message",e,"is dropped. total dropped so far",n],null)})),-1405000850)}))),o=R_(e);AY(AG,Oa,128,new xl((function(){return new Q(null,1,5,R,[q.a(o)],null)})),-477682962),Bt.a(n);var i=cL(),l=OK(1);return uK((function(){var e=function(){function e(e){var n=e[1];if(1===n){n=function(e,n){return FT(n,e)};var t=K.c(nL(i),pz,o);t=K.c(t,er,r);var l=nj(o);return l=Wh.b(tq,l),n=gd.c(n,t,l),e[7]=n,e[2]=null,e[1]=2,yz}return 2===n?KK(e,r):3===n?LK(e,e[2]):4===n?(t=e[8],n=e[2],e[8]=n,e[1]=p(null==n)?5:6,yz):5===n?(t=e[8],n=e[7],t=function(e,n){return GT(n,e)},l=nj(o),l=Wh.b(tq,l),n=gd.c(t,n,l),e[2]=n,e[1]=7,yz):6===n?(t=e[8],n=Q_(n=e[7],o,t),e[7]=n,e[2]=null,e[1]=2,yz):7===n?(e[2]=e[2],e[1]=3,yz):null}return function(){function n(n){for(;;){e:try{for(;;){var t=e(n);if(!P(t,yz)){var r=t;break e}}}catch(o){if(r=o,n[2]=r,!B(n[4]))throw r;n[1]=C(n[4]),r=yz}if(!P(r,yz))return r}}function t(){var e=[null,null,null,null,null,null,null,null,null];return e[0]=r,e[1]=1,e}var r=null;return(r=function(e){switch(arguments.length){case 0:return t.call(this);case 1:return n.call(this,e)}throw Error("Invalid arity: "+arguments.length)}).o=t,r.a=n,r}()}();return JK(function(){var n=e();return n[6]=l,n}())})),new N_(r)}M_.v(null,Zv,(function(){return null})),M_.v(null,Yp,(function(){return null})),M_.v(null,WI,(function(){return null})),M_.v(null,Fs,(function(e){e=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e;var n=x.b(e,Fy),t=x.b(e,Xv);return AY(AG,Oa,38,new xl((function(){return new Q(null,3,5,R,["Sending message",t,"to local peer"],null)})),-1251927606),QK(lD.a(n),t)})),M_.v(null,em,(function(e){return AY(IA,Oa,42,new xl((function(){return new Q(null,2,5,R,["Unable to process response",e],null)})),-521125095)})),N_.prototype.yf=function(){return PJ(this.ch)},N_.prototype.zf=function(e,n){return QK(this.ch,n)},N_.prototype.Fg=function(){return null},N_.prototype.Af=function(e,t){return QK(this.ch,new n(null,3,[Hv,Fs,lz,t,Xv,new n(null,1,[U,Nz],null)],null))};var T_=iL("agm.peer-removed","Peer has been removed"),U_=iL("agm.method-removed","Method has been removed"),V_=iL("agm.errors.subscription.invalid_subscription","Trying to drop a subscription that wasnt established. Did you mean to return an error instead?");function W_(e,t,r,o,i){return uL(e,new n(null,6,[tq,"agm",U,jD,ow,t,ov,i,Tu,r,Zw,o],null))}function X_(e,t,r,o){return uL(e,new n(null,5,[tq,"agm",U,TA,ow,t,Tu,r,Zw,o],null))}function Y_(e,t,r,o){return uL(e,new n(null,5,[tq,"agm",U,Ru,is,t,ow,r,Ru,o],null))}function Z_(e,t,r,o,i,l){return uL(e,t=new n(null,8,[tq,"agm",U,ut,fA,t,ow,r,MI,o,zz,i,uE,$v.a(l),kJ,sr.a(l)],null))}function $_(e,t,r){return new n(null,6,[tq,"agm",U,Uw,fA,e,ow,t,uE,$v.a(r),kJ,sr.a(r)],null)}function a0(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.b(r,Tu);var o=x.b(r,MI),i=x.b(r,kq);r=x.b(r,Xr),kh.b(qJ.a(e),qJ.a(n))&&Tc(VT.c(ip,e,n))&&kL("agm.errors.invocation.failure","Unable to invoke methods across different users"),p(mi.b(e,new Q(null,4,5,R,[ip,Zw,t,o],null)))||kL("agm.errors.invocation.failure",["Unable to find method with id ",q.a(o)," on server id ",q.a(t)," registered with this peer"].join("")),B(i)&&B(r)&&kL("agm.errors.invocation.failure","Cant use positional and by-name arguments at the same time")}function b0(e,n){return"string"===typeof e?A.b(e,n):null!=n&&Wk(e,n)}function c0(e,n){return gd.c((function(e,t){return!!p(b0(t,n))&&bf(!0)}),!1,e)}function d0(e,n){return gd.c((function(e,t){return p(b0(t,n))?bf(!0):e}),!1,Lz.a(e))}function e0(e,n){return!p(e=ty.a(e))||gd.c((function(e,t){return p(b0(t,n))?bf(!0):e}),!1,e)}function f0(e,n){return M(n)?kg((function(n,t,r){return p(d0(e,t))?K.c(n,t,"<REMOVED>"):p(e0(e,t))?K.c(n,t,r):K.c(n,t,"<REMOVED>")}),S,n):n}function g0(e,t){var r=gd.c((function(e,n){var r=b0(yw.a(n),t);return r=p(r)?Cp.b(n,!0):r,p(r)?bf(n):e}),null,Zw.a(e));if(null!=r)return r;switch((e=lH.a(e))instanceof z?e.da:null){case"whitelist":return new n(null,1,[kq,new n(null,1,[Lz,I],null)],null);case"blacklist":return null;default:return new n(null,1,[kq,new n(null,1,[Lz,I],null)],null)}}var h0=new n(null,1,[TF,null],null);function i0(){return null!=TF.a(h0)&&mi.b(h0,new Q(null,2,5,R,[mo,QG],null))}function j0(e,n){return f0(kq.a(e),n)}function k0(e,n,t){p(e=TF.a(e))&&(e.c?e.c("interop",n,t):e.call(null,"interop",n,t))}function l0(e){if(null!=TF.a(h0)){var n=t(e);n=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,n=x.b(n,Ts);var r=yw.a(n);n=mi.b(h0,new Q(null,2,5,R,[mo,ND],null));var o=WA.a(n);if(p(o)){if(p(o.a?o.a(r):o.call(null,r))){var i=fp.a(n);k0(h0,"invoke",K.c(pi(t(e),rI,(function(e){return p(i)?i.b?i.b(r,e):i.call(null,r,e):e})),Ts,r))}}else{var l=g0(nr.a(n),r);p(l)&&k0(h0,"invoke",K.c(pi(t(e),rI,(function(e){return j0(l,e)})),Ts,r))}}}function m0(e){if(null!=TF.a(h0)){var n=t(e);n=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,n=x.b(n,Ts),n=yw.a(n);var r=mi.b(h0,new Q(null,2,5,R,[mo,ND],null)),o=WA.a(r);p(o)?p(o.a?o.a(n):o.call(null,n))&&k0(h0,"yield",K.c(t(e),Ts,n)):p(g0(nr.a(r),n))&&k0(h0,"yield",K.c(t(e),Ts,n))}}function n0(e){if(null!=TF.a(h0)){var n=t(e);n=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,n=x.b(n,Ts);var r=yw.a(n);n=mi.b(h0,new Q(null,2,5,R,[mo,ND],null));var o=WA.a(n);if(p(o)){if(p(o.a?o.a(r):o.call(null,r))){var i=fp.a(n);k0(h0,"subscribe",K.c(pi(t(e),rI,(function(e){return p(i)?i.b?i.b(r,e):i.call(null,r,e):e})),Ts,r))}}else{var l=g0(nr.a(n),r);p(l)&&k0(h0,"subscribe",K.c(pi(t(e),rI,(function(e){return j0(l,e)})),Ts,r))}}}function o0(e){if(null!=TF.a(h0)){var n=t(e);n=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,n=x.b(n,Ts),n=yw.a(n);var r=mi.b(h0,new Q(null,2,5,R,[mo,ND],null)),o=WA.a(r);p(o)?p(o.a?o.a(n):o.call(null,n))&&k0(h0,"unsubscribe",K.c(t(e),Ts,n)):p(g0(nr.a(r),n))&&k0(h0,"unsubscribe",K.c(t(e),Ts,n))}}function p0(e){if(null!=TF.a(h0)){var n=t(e);n=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,n=x.b(n,Ts);var r=yw.a(n);n=mi.b(h0,new Q(null,2,5,R,[mo,ND],null));var o=WA.a(n);if(p(o)){if(p(o.a?o.a(r):o.call(null,r))){var i=fp.a(n);k0(h0,"event",K.c(pi(t(e),yn,(function(e){return p(i)?i.b?i.b(r,e):i.call(null,r,e):e})),Ts,r))}}else{var l=g0(nr.a(n),r);p(l)&&k0(h0,"event",K.c(pi(t(e),yn,(function(e){return j0(l,e)})),Ts,r))}}}function q0(e,t){return new n(null,3,[U,WI,Fp,t,Yp,e],null)}function r0(e,n,t,r){return oi.A(e,new Q(null,4,5,R,[ip,AD,n,t],null),Mh(Cf,Dk),r)}function s0(e,n,t,r){return null==n?e:XK(e,new Q(null,4,5,R,[ip,AD,n,t],null),r)}function t0(e,n,t,r,o){var i=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.b(i,vo);var l=x.b(i,sJ);return i=x.b(i,MI),e=TT(e,t,l=s0(UK(JT.b(e,t),new Q(null,3,5,R,[ip,$n,n],null)),l,r,n)),MT(l)?new Q(null,2,5,R,[e,Z_(lz.a(l),n,t,i,r,o)],null):new Q(null,2,5,R,[e,null],null)}function u0(e,n,t){var r=mi.b(n,new Q(null,2,5,R,[ip,qy],null)),o=qJ.a(n);return n=gd.c((function(e,n){var r=J(n,0,null),i=J(n,1,null);return n=J(e,0,null),e=J(e,1,null),r=J(i=t0(n,r,i,o,t),0,null),i=J(i,1,null),new Q(null,2,5,R,[p(r)?r:n,$f(i)||Vf(i)?gd.c(Mh(Cf,I),e,i):null!=i?Mh(Cf,I)(e,i):e],null)}),new Q(null,2,5,R,[e,I],null),r),e=J(n,0,null),n=J(n,1,null),new Q(null,2,5,R,[e,n],null)}function v0(e,t,r){if(p(i0())){var o=qJ.a(t);r=B(r);for(var i=null,l=0,a=0;;)if(a<l){var u=i.W(null,a),s=C(u),c=zf(u),d=mi.b(t,new Q(null,4,5,R,[ip,Zw,o,MI.a(c)],null));o0(new xl(function(r,o,i,l,a,u,s){return function(){return new n(null,4,[fA,a,Dz,pD.a(e),vo,pD.a(t),Ts,s],null)}}(0,0,0,0,s,0,d))),a+=1}else{if(!(c=B(r)))break;if(Wf(s=c))r=re(s),a=se(s),i=r,l=F(r),r=a;else{u=C(s),d=C(u);var f=zf(u);o0(new xl(function(r,o,i,l,a,u,s){return function(){return new n(null,4,[fA,a,Dz,pD.a(e),vo,pD.a(t),Ts,s],null)}}(0,0,0,0,d,0,mi.b(t,new Q(null,4,5,R,[ip,Zw,o,MI.a(f)],null))))),r=D(s),i=null,l=0}a=0}}}function w0(e,n,t){return kg((function(e,r,o){return A.b(n,vo.a(o))&&(Pf(t)||N(t,MI.a(o)))?pi(e,Hr,(function(e){return K.c(e,r,o)})):pi(e,fD,(function(e){return K.c(e,r,o)}))}),S,e)}function x0(e,n,t,r,o){var i=qJ.a(t);i=null!=(r=w0(mi.b(n,new Q(null,2,5,R,[ip,qy],null)),i,r))&&(64&r.h||h===r.D)?fh(qk,r):r,r=x.b(i,Hr);var l=x.b(i,fD);return i=kg((function(e,t,r){return C(t0(e,t,r,qJ.a(n),o))}),e,r),B(r)?(v0(n,t,r),new Q(null,2,5,R,[UT(i,qJ.a(n),(function(e){return B(l)?ni(e,new Q(null,2,5,R,[ip,qy],null),l):qi(e,ip,Hf,qy)})),zL(lz.a(n))?ki.b((function(e){return uL(lz.a(n),$_(e=Dd(e),qJ.a(n),o))}),r):null],null)):new Q(null,2,5,R,[e,null],null)}function y0(e,t,r){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,ow),l=x.b(o,Tu),a=x.b(o,fA),u=x.b(o,MI),s=x.b(o,kq),c=x.b(o,Xr),d=x.b(o,fI);o=x.b(o,fv);var f=JT.b(t,l);if(p(f)){var _=ni(f,new Q(null,3,5,R,[ip,$n,a],null),new n(null,2,[Dz,i,MI,u],null));f=lz.a(_);var g=mi.b(e,new Q(null,4,5,R,[ip,Zw,l,u],null));return n0(new xl((function(){return new n(null,5,[fA,a,Dz,pD.a(e),vo,pD.a(_),Ts,g,rI,c],null)}))),new Q(null,2,5,R,[TT(t,l,_),zL(f)?new Q(null,1,5,R,[uL(f,Xj([kq,U,zz,fA,ow,fI,tq,fv,Xr,MI],[s,mH,i,a,l,d,"agm",o,c,u]))],null):new Q(null,1,5,R,[wL(q0(dL(Mx.a(t)),i),new n(null,2,[U,Yp,Yp,Yp.a(f)],null),r)],null)],null)}throw im(["Unable to find server with id ",q.a(l)].join(""),S)}function z0(e,t,r){var o=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,i=x.b(o,is),l=x.b(o,ow),a=x.b(o,Tu);return o=x.b(o,MI),a0(i=ni(LT(e,l,ip),new Q(null,3,5,R,[ip,qy,r],null),new n(null,3,[vo,a,MI,o,is,i],null)),a=LT(e,a,ip),t),y0(i,TT(e,l,i),K.c(t,fA,r))}function A0(e,n,t,r,o,i,l){if(p(n)){var a=new Q(null,3,5,R,[ip,qy,r],null),u=mi.b(n,a);u=is.a(u);var s=lz.a(n);return new Q(null,2,5,R,[TT(e,t,UK(n,a)),zL(s)?p(l)?new Q(null,1,5,R,[xL.la("agm",s,u,t,o,i)],null):new Q(null,1,5,R,[uL(s,$_(r,t,o))],null):null],null)}return new Q(null,2,5,R,[e,null],null)}function B0(e,t,r,o,i){var l=JT.b(e,t),a=mi.b(l,new Q(null,4,5,R,[ip,qy,r,is],null));return e=TT(e,t,ni(l,new Q(null,4,5,R,[ip,qy,r,sJ],null),o)),o=lz.a(l),MT(l)?new Q(null,2,5,R,[e,new Q(null,1,5,R,[uL(o,new n(null,5,[tq,"agm",U,Gz,is,a,ow,t,fA,r],null))],null)],null):new Q(null,2,5,R,[e,new Q(null,1,5,R,[wL(q0(dL(Mx.a(e)),ow.a(i)),new n(null,2,[U,Yp,Yp,Yp.a(o)],null),i)],null)],null)}function C0(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,fA),i=x.b(r,ow);null==(r=x.b(r,Is))&&kL("agm.errors.subscription.invalid_subscription","Invalid or missing stream id");var l=mi.b(n,new Q(null,3,5,R,[ip,$n,o],null));return p(l)?(l=Dz.a(l),B0(TT(e,i,r0(ni(n,new Q(null,4,5,R,[ip,$n,o,sJ],null),r),r,l,o)),l,o,r,t)):AY(AG,Fa,247,new xl((function(){return new Q(null,3,5,R,["Subscription accept response",t,"for missing interest"],null)})),1825397101)}function D0(e,n){var t=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,r=x.b(t,fA),o=x.b(t,ow);return t=x.b(t,GH),p(o=JT.c(e,o,ip))?C0(e,o,n):(AY(VH,Fa,257,new xl((function(){return new Q(null,3,5,R,["Subscription accept response",n,"from missing peer"],null)})),-944687329),A0(e,JT.b(e,t),t,r,iL("agm.errors.subscription.failure","Received a response from a missing server"),null,!0))}Z(Oz,RG,RG),Z(Cq,JA,JA),Z(YH,O(CJ,O(hq,BI)),rT(O(hq,BI),eT(qC,Wc,new n(null,4,[Zn,null,NC,function(e){return Qf(e)},sy,!0,NH,O(hq,BI)],null),null),null)),Z(UB,O(CJ,Hq),rT(Hq,M,null)),Z(xz,O(CJ,Hq),rT(Hq,M,null)),Z(hr,O(CJ,Hq),rT(Hq,M,null)),Z(KC,O(xv,Wp,O(wt,ir,new Q(null,2,5,R,[Cq,Oz],null),iA,new Q(null,4,5,R,[YH,UB,xz,hr],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,2,5,R,[Cq,Oz],null),iA,new Q(null,4,5,R,[YH,UB,xz,hr],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[Cq,Oz],null),new Q(null,4,5,R,[YH,UB,xz,hr],null),null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,Tu)},function(e){return N(e,MI)}],null),function(e){return M(e)&&N(e,Tu)&&N(e,MI)},new Q(null,4,5,R,[kq,Xr,fv,fI],null),new Q(null,2,5,R,[Cq,Oz],null),null,new Q(null,2,5,R,[Tu,MI],null),new Q(null,4,5,R,[YH,UB,xz,hr],null),new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Tu)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,MI))],null),null]))],null),null)),Z(JG,Bo,Vc),Z(Bq,O(xv,Wp,O(wt,ir,new Q(null,3,5,R,[JG,QD,dC],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,3,5,R,[JG,QD,dC],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[JG,QD,dC],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,fA)},function(e){return N(e,uE)},function(e){return N(e,kJ)}],null),function(e){return M(e)&&N(e,fA)&&N(e,uE)&&N(e,kJ)},I,new Q(null,3,5,R,[JG,QD,dC],null),null,new Q(null,3,5,R,[fA,uE,kJ],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,fA)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,uE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,kJ))],null),null]))],null),null)),Z(AF,JA,JA),Z(St,O(wt,ir,new Q(null,4,5,R,[JG,JA,Oz,AF],null),iA,new Q(null,4,5,R,[YH,UB,xz,hr],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,4,5,R,[JG,JA,Oz,AF],null),new Q(null,4,5,R,[YH,UB,xz,hr],null),null,new Q(null,5,5,R,[function(e){return M(e)},function(e){return N(e,fA)},function(e){return N(e,ow)},function(e){return N(e,MI)},function(e){return N(e,zz)}],null),function(e){return M(e)&&N(e,fA)&&N(e,ow)&&N(e,MI)&&N(e,zz)},new Q(null,4,5,R,[kq,Xr,fv,fI],null),new Q(null,4,5,R,[JG,JA,Oz,AF],null),null,new Q(null,4,5,R,[fA,ow,MI,zz],null),new Q(null,4,5,R,[YH,UB,xz,hr],null),new Q(null,5,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,fA)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ow)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,MI)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,zz))],null),null]))),Z(Wo,O(wt,ir,new Q(null,6,5,R,[JG,JA,Oz,AF,QD,dC],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,6,5,R,[JG,JA,Oz,AF,QD,dC],null),null,null,new Q(null,7,5,R,[function(e){return M(e)},function(e){return N(e,fA)},function(e){return N(e,ow)},function(e){return N(e,MI)},function(e){return N(e,zz)},function(e){return N(e,uE)},function(e){return N(e,kJ)}],null),function(e){return M(e)&&N(e,fA)&&N(e,ow)&&N(e,MI)&&N(e,zz)&&N(e,uE)&&N(e,kJ)},I,new Q(null,6,5,R,[JG,JA,Oz,AF,QD,dC],null),null,new Q(null,6,5,R,[fA,ow,MI,zz,uE,kJ],null),I,new Q(null,7,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,fA)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ow)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,MI)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,zz)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,uE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,kJ))],null),null]))),Z(hn,Bo,Vc),Z(Yu,O(wt,ir,new Q(null,3,5,R,[JG,JA,hn],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[JG,JA,hn],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,fA)},function(e){return N(e,ow)},function(e){return N(e,Is)}],null),function(e){return M(e)&&N(e,fA)&&N(e,ow)&&N(e,Is)},I,new Q(null,3,5,R,[JG,JA,hn],null),null,new Q(null,3,5,R,[fA,ow,Is],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,fA)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ow)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Is))],null),null]))),Z(wJ,O(wt,ir,new Q(null,4,5,R,[JA,JG,QD,dC],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,4,5,R,[JA,JG,QD,dC],null),null,null,new Q(null,5,5,R,[function(e){return M(e)},function(e){return N(e,ow)},function(e){return N(e,fA)},function(e){return N(e,uE)},function(e){return N(e,kJ)}],null),function(e){return M(e)&&N(e,ow)&&N(e,fA)&&N(e,uE)&&N(e,kJ)},I,new Q(null,4,5,R,[JA,JG,QD,dC],null),null,new Q(null,4,5,R,[ow,fA,uE,kJ],null),I,new Q(null,5,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ow)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,fA)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,uE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,kJ))],null),null]))),Z(pG,gq,Sc),Z(Vm,jH,Zf),Z(IF,Hq,M),Z(HD,O(wt,ir,new Q(null,4,5,R,[JA,pG,Vm,IF],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,4,5,R,[JA,pG,Vm,IF],null),null,null,new Q(null,5,5,R,[function(e){return M(e)},function(e){return N(e,ow)},function(e){return N(e,cE)},function(e){return N(e,Jq)},function(e){return N(e,yn)}],null),function(e){return M(e)&&N(e,ow)&&N(e,cE)&&N(e,Jq)&&N(e,yn)},I,new Q(null,4,5,R,[JA,pG,Vm,IF],null),null,new Q(null,4,5,R,[ow,cE,Jq,yn],null),I,new Q(null,5,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ow)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,cE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Jq)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yn))],null),null]))),Z(Bs,O(xv,HD,O(wt,ir,new Q(null,1,5,R,[JG],null))),cT(new Q(null,2,5,R,[HD,O(wt,ir,new Q(null,1,5,R,[JG],null))],null),new Q(null,2,5,R,[HD,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[JG],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,fA)}],null),function(e){return M(e)&&N(e,fA)},I,new Q(null,1,5,R,[JG],null),null,new Q(null,1,5,R,[fA],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,fA))],null),null]))],null),null)),Z(ar,O(xv,HD,O(wt,ir,new Q(null,1,5,R,[hn],null))),cT(new Q(null,2,5,R,[HD,O(wt,ir,new Q(null,1,5,R,[hn],null))],null),new Q(null,2,5,R,[HD,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[hn],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Is)}],null),function(e){return M(e)&&N(e,Is)},I,new Q(null,1,5,R,[hn],null),null,new Q(null,1,5,R,[Is],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Is))],null),null]))],null),null)),Z(jq,O(xv,Wp,O(wt,ir,new Q(null,2,5,R,[Cq,Oz],null),iA,new Q(null,3,5,R,[YH,UB,hr],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,2,5,R,[Cq,Oz],null),iA,new Q(null,3,5,R,[YH,UB,hr],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[Cq,Oz],null),new Q(null,3,5,R,[YH,UB,hr],null),null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,Tu)},function(e){return N(e,MI)}],null),function(e){return M(e)&&N(e,Tu)&&N(e,MI)},new Q(null,3,5,R,[kq,Xr,fI],null),new Q(null,2,5,R,[Cq,Oz],null),null,new Q(null,2,5,R,[Tu,MI],null),new Q(null,3,5,R,[YH,UB,hr],null),new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Tu)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,MI))],null),null]))],null),null)),Z(Dy,Bo,Vc),Z(vw,O(wt,ir,new Q(null,4,5,R,[Dy,AF,JA,Oz],null),iA,new Q(null,3,5,R,[YH,UB,hr],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,4,5,R,[Dy,AF,JA,Oz],null),new Q(null,3,5,R,[YH,UB,hr],null),null,new Q(null,5,5,R,[function(e){return M(e)},function(e){return N(e,qu)},function(e){return N(e,zz)},function(e){return N(e,ow)},function(e){return N(e,MI)}],null),function(e){return M(e)&&N(e,qu)&&N(e,zz)&&N(e,ow)&&N(e,MI)},new Q(null,3,5,R,[kq,Xr,fI],null),new Q(null,4,5,R,[Dy,AF,JA,Oz],null),null,new Q(null,4,5,R,[qu,zz,ow,MI],null),new Q(null,3,5,R,[YH,UB,hr],null),new Q(null,5,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,qu)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,zz)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ow)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,MI))],null),null]))),Z(ev,Hq,M),Z(uz,O(wt,ir,new Q(null,3,5,R,[Dy,JA,ev],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[Dy,JA,ev],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,qu)},function(e){return N(e,ow)},function(e){return N(e,Ru)}],null),function(e){return M(e)&&N(e,qu)&&N(e,ow)&&N(e,Ru)},I,new Q(null,3,5,R,[Dy,JA,ev],null),null,new Q(null,3,5,R,[qu,ow,Ru],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,qu)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ow)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Ru))],null),null])));var E0,u5=Oh(S),v5=Oh(S),w5=Oh(S),x5=Oh(S),y5=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));function K0(e,t,r,o){var i=ow.a(r),l=x.b(r,p(o)?is:fA),a=LT(e,i,ip),u=mi.b(a,new Q(null,3,5,R,[ip,$n,l],null));if(p(u)){var s=Dz.a(u),c=x.b(u,sJ);u=JT.b(e,s);var d=lz.a(u);return p(p(c)?c:o)?(t=J(a=new Q(null,2,5,R,[TT(e,i,s0(UK(a,new Q(null,3,5,R,[ip,$n,l],null)),c,s,l)),I],null),0,null),a=J(a,1,null),o=J(l=A0(t,u,s,l,lL(r),fI.a(r),o),0,null),l=J(l,1,null),o=J(l=new Q(null,2,5,R,[p(o)?o:t,$f(l)||Vf(l)?gd.c(Mh(Cf,I),a,l):null!=l?Mh(Cf,I)(a,l):a],null),0,null),l=J(l,1,null),e=J(r=p(p(u)?!zL(d):u)?new Q(null,2,5,R,[null,wL(q0(dL(Mx.a(e)),i),new n(null,2,[U,Yp,Yp,Yp.a(d)],null),r)],null):null,0,null),r=J(r,1,null),new Q(null,2,5,R,[p(e)?e:o,$f(r)||Vf(r)?gd.c(Mh(Cf,I),l,r):null!=r?Mh(Cf,I)(l,r):l],null)):new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.la("agm",t,l,i,V_,null)],null)],null)}return new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.la("agm",t,l,i,iL("agm.errors.subscription.invalid_subscription","Trying to drop a non-existing subscription"),null)],null)],null)}function L0(e,t,r,o,i){var l=JT.b(e,r);if(p(l)){var a=mi.b(l,new Q(null,3,5,R,[ip,$n,o],null));if(p(a)){o0(new xl((function(){return new n(null,4,[fA,o,Dz,pD.a(t),vo,pD.a(l),Ts,mi.b(l,new Q(null,4,5,R,[ip,Zw,r,MI.a(a)],null))],null)})));var u=qJ.a(t),s=lz.a(l);return e=TT(e,r,s0(UK(l,new Q(null,3,5,R,[ip,$n,o],null)),sJ.a(a),u,o)),new Q(null,2,5,R,[e,new Q(null,1,5,R,[zL(s)?Z_(s,o,r,MI.a(a),u,lL(i)):wL(q0(dL(Mx.a(e)),u),new n(null,2,[U,Yp,Yp,Yp.a(s)],null),i)],null)],null)}}return null}function M0(e,n,t,r){var o=LT(e,t,ip),i=new Q(null,3,5,R,[ip,qy,r],null),l=mi.b(o,i);return l=null!=l&&(64&l.h||h===l.D)?fh(qk,l):l,p(l=x.b(l,vo))?p(n=L0(e=TT(e,t,UK(o,i)),o,l,r,n))?n:new Q(null,2,5,R,[e,I],null):kL("agm.errors.subscription.invalid_subscription",["Unable to find subscription with id ",q.a(r)," on subscriber id ",q.a(t)].join(""))}function N0(e,t,r,o,i,l,a){if(p(i0())){var u=qJ.a(r),s=mi.b(r,new Q(null,2,5,R,[ip,$n],null)),c=mi.b(r,new Q(null,3,5,R,[ip,Zw,u],null));e=B(e);for(var d=null,f=0,h=0;;)if(h<f){var _=d.W(null,h),g=x.b(s,_),m=x.b(c,MI.a(g));p0(new xl(function(e,u,s,c,d,f,p){return function(){return new n(null,8,[fA,p,Dz,pD.a(t),vo,pD.a(r),Ts,f,UI,o,$H,i,Jq,l,yn,a],null)}}(0,0,0,0,0,m,_))),h+=1}else{if(!(m=B(e)))break;if(Wf(g=m))e=re(g),h=se(g),d=e,f=F(e),e=h;else{_=C(g);var w=x.b(s,_);p0(new xl(function(e,u,s,c,d,f,p){return function(){return new n(null,8,[fA,p,Dz,pD.a(t),vo,pD.a(r),Ts,f,UI,o,$H,i,Jq,l,yn,a],null)}}(0,0,0,0,0,x.b(c,MI.a(w)),_))),e=D(g),d=null,f=0}h=0}}}function O0(e,r){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,ow),l=x.b(o,Is),a=x.b(o,cE),u=x.b(o,Jq),s=x.b(o,yn),c=JT.c(e,i,ip);o=mi.b(c,new Q(null,3,5,R,[ip,AD,l],null));var d=new Uh(Dk);return new Q(null,2,5,R,[e,Vk(fi.b(Uc,ei((function(o){var l=J(o,0,null);o=J(o,1,null);var f=JT.b(e,l),p=lz.a(f);return zL(p)?(N0(o,f,c,!1,a,u,s),Wh.b((function(e){return uL(p,new n(null,8,[tq,"agm",U,OA,ow,l,fA,e,UI,!1,cE,a,Jq,u,yn,s],null))}),o)):(o=Yp.a(p),N(t(d),o)?null:(d.Cc(null,Cf.b(d.zb(null),o)),new Q(null,1,5,R,[wL(q0(dL(Mx.a(e)),i),new n(null,2,[U,Yp,Yp,o],null),r)],null)))}),G([o]))))],null)}function P0(e){e=bL(e);var n=lS(os.a(e));return p(n)?K.c(e,Bu,n):e}function Q0(e,n,t){return!p(e=Bu.a(e))||mS(e,n,t)}function R0(e,n,t){var r=JT.b(e,t),o=new Q(null,3,5,R,[ip,Zw,n],null),i=ji.b(Dk,Wh.b(C,mi.b(r,o)));return B(i)?S0(e,n,r,o,i):new Q(null,2,5,R,[UT(e,t,(function(e){return aL(UK(e,o),ip)})),null],null)}function S0(e,n,t,r,o){var i=JT.b(e,n);return o=gd.c((function(e,n){var t=J(e,0,null);e=J(e,1,null);var o=Cf.b(r,n);return p(mi.b(t,o))?new Q(null,2,5,R,[UK(t,o),Cf.b(e,n)],null):new Q(null,2,5,R,[t,e],null)}),new Q(null,2,5,R,[t,Dk],null),o),t=J(o,0,null),o=J(o,1,null),e=TT(e,qJ.a(t),aL(t,ip)),Tc(B(o))?new Q(null,2,5,R,[e,null],null):(i=J(e=x0(e,t,i,o,U_),0,null),e=J(e,1,null),n=J(t=new Q(null,2,5,R,[i,MT(t)?X_(lz.a(t),qJ.a(t),n,Ni(o)):null],null),0,null),t=J(t,1,null),new Q(null,2,5,R,[p(n)?n:i,$f(t)||Vf(t)?gd.c(Mh(Cf,I),e,t):null!=t?Mh(Cf,I)(e,t):e],null))}function T0(e,n){n=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n;var t=x.b(n,ow),r=x.b(n,Zw),o=new Q(null,3,5,R,[ip,Zw,t],null);n=aL(gd.c((function(e,n){var t=Cf.b(o,n);return p(mi.b(e,t))?UK(e,t):kL("agm.errors.unregistration.failure",["Unable to unregister missing method ",q.a(n)].join(""))}),KT(e,t),r),ip);var i=TT(e,t,n);return n=og(gi.a((function(e){return A.b(t,qJ.a(e))})),mg((function(e,n){var i=J(e,0,null);e=J(e,1,null);var l=S0(i,t,n,o,r);return n=J(l,0,null),l=J(l,1,null),new Q(null,2,5,R,[p(n)?n:i,$f(l)||Vf(l)?gd.c(Mh(Cf,I),e,l):null!=l?Mh(Cf,I)(e,l):e],null)}),lg),new Q(null,2,5,R,[i,I],null),XT(e,ip,n,!1)),e=J(n,0,null),n=J(n,1,null),new Q(null,2,5,R,[e,n],null)}function U0(e,n,t,r){var o=qJ.a(n),i=pD.a(n),l=qJ.a(r),a=pD.a(r),u=mi.b(r,new Q(null,3,5,R,[ip,Zw,o],null));return u=og(fi.a((function(e){return Q0(e,i,a)})),mg((function(e,n){var t=J(e,0,null);return e=J(e,1,null),new Q(null,2,5,R,[K.c(t,qJ.a(n),n),Cf.b(e,Hf.b(n,Bu))],null)}),lg),new Q(null,2,5,R,[u,I],null),t),t=J(u,0,null),B(u=J(u,1,null))?new Q(null,2,5,R,[TT(e,l,ni(r,new Q(null,3,5,R,[ip,Zw,o],null),t)),MT(r)?W_(lz.a(r),l,o,u,U.a(lz.a(n))):null],null):new Q(null,2,5,R,[e,null],null)}function V0(e,n){n=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n;var t=x.b(n,ow);n=x.b(n,Zw);var r=Wh.b(P0,n),o=gd.c((function(e,n){return ni(e,new Q(null,4,5,R,[ip,Zw,t,qJ.a(n)],null),n)}),KT(e,t),r);return n=TT(e,t,o),gd.c((function(e,n){var t=J(e,0,null);e=J(e,1,null);var i=U0(t,o,r,n);return n=J(i,0,null),i=J(i,1,null),new Q(null,2,5,R,[p(n)?n:t,$f(i)||Vf(i)?gd.c(Mh(Cf,I),e,i):null!=i?Mh(Cf,I)(e,i):e],null)}),new Q(null,2,5,R,[n,I],null),XT(e,ip,o,!1))}function W0(e,n,t){var r=pD.a(e),o=pD.a(t);return og(fi.a((function(e){return Q0(e,r,o)})),mg((function(n,t){return Cf.b(n,K.c(Hf.b(t,Bu),Tu,qJ.a(e)))}),lg),I,n)}function X0(e,t,r){var o=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,i=x.b(o,is),l=x.b(o,ow),a=x.b(o,Tu),u=x.b(o,qu),s=x.b(o,MI),c=x.b(o,kq),d=x.b(o,Xr);o=x.b(o,fI);var f=ni(r,new Q(null,3,5,R,[ip,Xw,u],null),new n(null,3,[Qr,l,MI,s,is,i],null)),p=!MT(f);return r=R,i=TT(e,a,f),p?l=new Q(null,1,5,R,[wL(q0(dL(Mx.a(e)),l),new n(null,2,[U,Yp,Yp,mi.b(f,new Q(null,2,5,R,[lz,Yp],null))],null),t)],null):l=new Q(null,1,5,e=R,[l=uL(t=lz.a(f),Xj([kq,qu,U,zz,ow,fI,tq,Xr,MI],[c,u,ND,l,a,o,"agm",d,s]))],null),new Q(null,2,5,r,[i,l],null)}function Y0(e,t,r,o,i){var l=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,a=x.b(l,is),u=x.b(l,ow),s=x.b(l,Tu),c=x.b(l,MI),d=ni(i,new Q(null,3,5,R,[ip,jA,a],null),new n(null,3,[Yr,s,MI,c,qu,r],null));return l0(new xl((function(){return new n(null,5,[is,a,Qr,pD.a(d),vo,pD.a(o),Ts,mi.b(o,new Q(null,4,5,R,[ip,Zw,s,c],null)),rI,Xr.a(t)],null)}))),X0(TT(e,u,d),K.c(t,qu,r),A.b(u,s)?d:o)}function Z0(e,n,t,r){var o=qJ.a(r);r=null!=(r=Ol((function(e){return A.b(Yr.a(Ed(e)),o)}),mi.b(t,new Q(null,2,5,R,[ip,jA],null))))&&(64&r.h||h===r.D)?fh(qk,r):r;var i=x.b(r,!0),l=x.b(r,!1);return B(i)?new Q(null,2,5,R,[UT(e,qJ.a(t),(function(e){return B(l)?ni(e,new Q(null,2,5,R,[ip,jA],null),ji.b(S,l)):qi(e,ip,Hf,jA)})),MT(t)?ki.b((function(e){return xL.K("agm",n,Dd(e),qJ.a(t),iL("agm.errors.invocation.failure","Peer has left while waiting for result"))}),i):null],null):new Q(null,2,5,R,[e,null],null)}function $0(e,t,r,o,i){var l=is.a(r),a=Qr.a(r),u=MI.a(r),s=function(){var n=JT.b(e,a);return null==n?null:UK(n,new Q(null,3,5,R,[ip,jA,l],null))}();if(p(s)){var c=TT(e,a,s),d=JT.b(c,t),f=mi.b(d,new Q(null,4,5,R,[ip,Zw,t,u],null)),h=qz.a(i),_=lC.a(i);return MT(s)?p(h)?(m0(new xl((function(){return new n(null,6,[is,is.a(r),Qr,pD.a(s),vo,pD.a(d),Ts,f,qz,!0,Ru,Ru.a(h)],null)}))),new Q(null,2,5,R,[c,new Q(null,1,5,R,[Y_(lz.a(s),l,a,Ru.a(h))],null)],null)):(m0(new xl((function(){return new n(null,6,[is,is.a(r),Qr,pD.a(s),vo,pD.a(d),Ts,f,qz,!1,Ru,yk(_,new Q(null,2,5,R,[kJ,uE],null))],null)}))),new Q(null,2,5,R,[c,new Q(null,1,5,R,[xL.la("agm",lz.a(s),l,a,lL(_),fI.a(_))],null)],null)):new Q(null,2,5,R,[c,new Q(null,1,5,R,[wL(q0(dL(Mx.a(c)),t),new n(null,2,[U,Yp,Yp,mi.b(s,new Q(null,2,5,R,[lz,Yp],null))],null),o)],null)],null)}return null}function a1(e,n,t,r,o){var i=JT.b(e,t),l=mi.b(i,new Q(null,3,5,R,[ip,Xw,n],null));return p(l)?(e=J(n=new Q(null,2,5,R,[TT(e,t,UK(i,new Q(null,3,5,R,[ip,Xw,n],null))),I],null),0,null),n=J(n,1,null),t=J(r=$0(e,t,l,r,o),0,null),r=J(r,1,null),new Q(null,2,5,R,[p(t)?t:e,$f(r)||Vf(r)?gd.c(Mh(Cf,I),n,r):null!=r?Mh(Cf,I)(n,r):n],null)):null}function b1(e,t,r,o,i,l){return t=new n(null,6,[tq,"global",U,Bv,is,t,ow,r,Tn,o,ko,i],null),uL(e,l=p(l)?K.c(t,eI,l):t)}function c1(e,t,r){var o=LT(e,r,ip);return gd.c((function(e,o){var i=J(e,0,null);J(e,1,null);var l=J(e,0,null);e=J(e,1,null),i=JT.b(i,r);var a=pD.a(o),u=qJ.a(o),s=Dl(G([Wh.a(Qi),mi.b(o,new Q(null,3,5,R,[ip,Zw,u],null))])),c=qJ.a(i),d=MT(i),f=MT(o);return a=d?Cf.b(I,AL.la("agm",t,c,u,a,new n(null,1,[Fs,f],null))):I,u=f?Cf.b(a,AL.la("agm",lz.a(o),u,c,pD.a(i),new n(null,1,[Fs,d],null))):a,o=J(i=U0(l,o,s,i),0,null),i=J(i,1,null),o=J(i=new Q(null,2,5,R,[o,p(i)?Cf.b(u,i):u],null),0,null),i=J(i,1,null),new Q(null,2,5,R,[p(o)?o:l,$f(i)||Vf(i)?gd.c(Mh(Cf,I),e,i):null!=i?Mh(Cf,I)(e,i):e],null)}),new Q(null,2,5,R,[e,I],null),XT(e,ip,o,!1))}function d1(e,n,t,r){return r=lS(r),c1(oL(e,t,ip,r),n,t)}function e1(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is),i=x.b(r,ow);if(x.b(r,pD),r=x.b(r,os),p(qL(e,i,ip)))return new Q(null,2,5,R,[e,new Q(null,1,5,R,[yL.A("agm",n,o,i)],null)],null);var l=d1(e,n,i,r);r=J(l,0,null),l=J(l,1,null);var a=JT.b(r,i);return new Q(null,2,5,R,[r,Cf.g(l,yL.A("agm",n,o,i),G([vL(q0(dL(Mx.a(e)),i),function(){var e=K.c(t,U,ds);return p(eI.a(a))?K.c(e,eI,eI.a(a)):e}())]))],null)}function f1(e,n,t,r){var o=JT.b(e,t),i=lz.a(o),l=function(){var r=new Q(null,2,5,R,[e,null],null),l=function(){var e=J(r,0,null),t=J(r,1,null),l=Z0(e,i,o,n),a=J(l,0,null);return l=J(l,1,null),new Q(null,2,5,R,[p(a)?a:e,$f(l)||Vf(l)?gd.c(Mh(Cf,I),t,l):null!=l?Mh(Cf,I)(t,l):t],null)}(),a=function(){var e=J(l,0,null),t=J(l,1,null),r=x0(e,o,n,null,T_),i=J(r,0,null);return r=J(r,1,null),new Q(null,2,5,R,[p(i)?i:e,$f(r)||Vf(r)?gd.c(Mh(Cf,I),t,r):null!=r?Mh(Cf,I)(t,r):t],null)}(),u=J(a,0,null);a=J(a,1,null);var s=R0(u,qJ.a(n),t),c=J(s,0,null);return s=J(s,1,null),new Q(null,2,5,R,[p(c)?c:u,$f(s)||Vf(s)?gd.c(Mh(Cf,I),a,s):null!=s?Mh(Cf,I)(a,s):a],null)}(),a=J(l,0,null);return l=J(l,1,null),new Q(null,2,5,R,[a,zL(i)?Cf.b(l,BL.K("agm",i,t,qJ.a(n),r)):l],null)}function g1(e,n,t){var r=qJ.a(n),o=og(Wh.a(qJ),mg((function(e,r){var o=J(e,0,null);e=J(e,1,null);var i=f1(o,n,r,t);return r=J(i,0,null),i=J(i,1,null),new Q(null,2,5,R,[p(r)?r:o,$f(i)||Vf(i)?gd.c(Mh(Cf,I),e,i):null!=i?Mh(Cf,I)(e,i):e],null)}),lg),u0(e,n,t),XT(e,ip,n,!1));return e=J(o,0,null),o=J(o,1,null),new Q(null,2,5,R,[pL(e,r,ip),o],null)}function h1(e,n){return AY(AG,Aa,195,new xl((function(){return new Q(null,1,5,R,["removing source from agm domain"],null)})),1481016309),n=Ch(QT(e,n,ip)),e=og(Wh.a(qJ),mg((function(e,n){return pL(e,n,ip)}),lg),e,n),e=gd.c((function(e,n){var t=J(e,0,null);e=J(e,1,null);var r=g1(t,n,T_);return n=J(r,0,null),r=J(r,1,null),new Q(null,2,5,R,[p(n)?n:t,$f(r)||Vf(r)?gd.c(Mh(Cf,I),e,r):null!=r?Mh(Cf,I)(e,r):e],null)}),new Q(null,2,5,R,[e,null],null),n),AY(AG,Aa,206,new xl((function(){return new Q(null,1,5,R,["removed source from agm domain"],null)})),-1463453410),e}function i1(e,t,r){r=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r;var o=x.b(r,ow);r=x.b(r,is);var i=LT(e,o,ip);return i=Ni(ii(Wh.b((function(n){n=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n;var t=x.b(n,qJ),r=JT.b(e,o);return W0(n,t=nj(mi.b(n,new Q(null,3,5,R,[ip,Zw,t],null))),r)}),fi.b(MT,XT(e,ip,i,!1))))),new Q(null,2,5,R,[e,new Q(null,1,5,R,[uL(t,new n(null,4,[Zw,i,is,r,U,Zw,ow,o],null))],null)],null)}E0=new dm(Me.b(Fa,"drop-interest-rq"),U,y5,u5,v5,w5,x5),E0.v(null,IA,(function(){return YI})),E0.v(null,OB,(function(){return wJ})),Z(Cx,O(io,nJ,U),VS(nJ,new Ne((function(){return E0}),nJ,Xj([By,yw,OD,ho,ux,en,fz,AE,Dv,jF],[vt,xx,"gateway/domains/agm/subscriptions.cljc",27,1,283,283,Se,null,p(E0)?E0.ld:null])))),Z(at,O(hq,LD),eT(LD,LD,new n(null,4,[Zn,null,NC,function(e){return Qf(e)},sy,!0,NH,O(hq,LD)],null),null)),Z(vG,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[at],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[at],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[at],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Zw)}],null),function(e){return M(e)&&N(e,Zw)},I,new Q(null,1,5,R,[at],null),null,new Q(null,1,5,R,[Zw],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Zw))],null),null]))],null),null)),Z(iE,O(hq,RG),eT(RG,RG,new n(null,4,[Zn,null,NC,function(e){return Qf(e)},sy,!0,NH,O(hq,RG)],null),null)),Z(Bn,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[iE],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[iE],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[iE],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Zw)}],null),function(e){return M(e)&&N(e,Zw)},I,new Q(null,1,5,R,[iE],null),null,new Q(null,1,5,R,[Zw],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Zw))],null),null]))],null),null)),Z(Pz,Bo,Vc),Z(zv,Bo,Vc),Z(sC,jH,Zf),Z(Wn,O(wt,ir,new Q(null,1,5,R,[sC],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[sC],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Fs)}],null),function(e){return M(e)&&N(e,Fs)},I,new Q(null,1,5,R,[sC],null),null,new Q(null,1,5,R,[Fs],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Fs))],null),null]))),yT.v(null,SE,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[nv,Wx,Wn],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[nv,Wx,Wn],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,dB)},function(e){return N(e,pD)},function(e){return N(e,Mc)}],null),function(e){return M(e)&&N(e,dB)&&N(e,pD)&&N(e,Mc)},I,new Q(null,3,5,R,[nv,Wx,Wn],null),null,new Q(null,3,5,R,[dB,pD,Mc],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,dB)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,pD)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Mc))],null),null]))],null),null)})),Z(RF,JA,JA),yT.v(null,mE,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[RF,Pz,zv],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[RF,Pz,zv],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,EJ)},function(e){return N(e,uE)},function(e){return N(e,kJ)}],null),function(e){return M(e)&&N(e,EJ)&&N(e,uE)&&N(e,kJ)},I,new Q(null,3,5,R,[RF,Pz,zv],null),null,new Q(null,3,5,R,[EJ,uE,kJ],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,EJ)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,uE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,kJ))],null),null]))],null),null)})),yT.v(null,TA,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,1,5,R,[iE],null),iA,new Q(null,2,5,R,[Pz,zv],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[iE],null),new Q(null,2,5,R,[Pz,zv],null),null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Zw)}],null),function(e){return M(e)&&N(e,Zw)},new Q(null,2,5,R,[uE,kJ],null),new Q(null,1,5,R,[iE],null),null,new Q(null,1,5,R,[Zw],null),new Q(null,2,5,R,[Pz,zv],null),new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Zw))],null),null]))],null),null)})),Z(GG,new Bk(null,new n(null,4,[Zv,"null",WI,"null",Yp,"null",Fs,"null"],null),null),new Bk(null,new n(null,4,[Zv,null,WI,null,Yp,null,Fs,null],null),null)),yT.v(null,jD,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[Cq,GG,qB],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[Cq,GG,qB],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,Tu)},function(e){return N(e,ov)},function(e){return N(e,Zw)}],null),function(e){return M(e)&&N(e,Tu)&&N(e,ov)&&N(e,Zw)},I,new Q(null,3,5,R,[Cq,GG,qB],null),null,new Q(null,3,5,R,[Tu,ov,Zw],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Tu)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ov)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Zw))],null),null]))],null),null)})),yT.v(null,mH,(function(){return cT(new Q(null,2,5,R,[rs,St],null),new Q(null,2,5,R,[rs,St],null),null)})),yT.v(null,ut,(function(){return cT(new Q(null,2,5,R,[rs,Wo],null),new Q(null,2,5,R,[rs,Wo],null),null)})),yT.v(null,Nu,(function(){return cT(new Q(null,2,5,R,[kG,KC],null),new Q(null,2,5,R,[kG,KC],null),null)})),yT.v(null,Gr,(function(){return cT(new Q(null,2,5,R,[kG,Yu],null),new Q(null,2,5,R,[kG,Yu],null),null)})),yT.v(null,Gz,(function(){return cT(new Q(null,2,5,R,[tv,O(wt,ir,new Q(null,1,5,R,[JG],null))],null),new Q(null,2,5,R,[tv,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[JG],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,fA)}],null),function(e){return M(e)&&N(e,fA)},I,new Q(null,1,5,R,[JG],null),null,new Q(null,1,5,R,[fA],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,fA))],null),null]))],null),null)})),yT.v(null,OB,(function(){return cT(new Q(null,2,5,R,[kG,wJ],null),new Q(null,2,5,R,[kG,wJ],null),null)})),yT.v(null,Uw,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[JG,Pz,zv],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[JG,Pz,zv],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,fA)},function(e){return N(e,uE)},function(e){return N(e,kJ)}],null),function(e){return M(e)&&N(e,fA)&&N(e,uE)&&N(e,kJ)},I,new Q(null,3,5,R,[JG,Pz,zv],null),null,new Q(null,3,5,R,[fA,uE,kJ],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,fA)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,uE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,kJ))],null),null]))],null),null)})),yT.v(null,fw,(function(){return cT(new Q(null,2,5,R,[kG,vG],null),new Q(null,2,5,R,[kG,vG],null),null)})),yT.v(null,nt,(function(){return cT(new Q(null,2,5,R,[kG,Bn],null),new Q(null,2,5,R,[kG,Bn],null),null)})),yT.v(null,ox,(function(){return cT(new Q(null,2,5,R,[kG,Bs],null),new Q(null,2,5,R,[kG,Bs],null),null)})),yT.v(null,wG,(function(){return cT(new Q(null,2,5,R,[kG,ar],null),new Q(null,2,5,R,[kG,ar],null),null)})),Z(Xx,jH,Zf),yT.v(null,OA,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,5,5,R,[JG,Xx,pG,Vm,IF],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,5,5,R,[JG,Xx,pG,Vm,IF],null),null,null,new Q(null,6,5,R,[function(e){return M(e)},function(e){return N(e,fA)},function(e){return N(e,UI)},function(e){return N(e,cE)},function(e){return N(e,Jq)},function(e){return N(e,yn)}],null),function(e){return M(e)&&N(e,fA)&&N(e,UI)&&N(e,cE)&&N(e,Jq)&&N(e,yn)},I,new Q(null,5,5,R,[JG,Xx,pG,Vm,IF],null),null,new Q(null,5,5,R,[fA,UI,cE,Jq,yn],null),I,new Q(null,6,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,fA)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,UI)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,cE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Jq)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yn))],null),null]))],null),null)})),yT.v(null,mw,(function(){return cT(new Q(null,2,5,R,[kG,jq],null),new Q(null,2,5,R,[kG,jq],null),null)})),yT.v(null,ND,(function(){return cT(new Q(null,2,5,R,[kG,vw],null),new Q(null,2,5,R,[kG,vw],null),null)})),yT.v(null,Ox,(function(){return cT(new Q(null,2,5,R,[kG,uz],null),new Q(null,2,5,R,[kG,uz],null),null)})),yT.v(null,Ru,(function(){return cT(new Q(null,2,5,R,[tv,O(wt,ir,new Q(null,1,5,R,[ev],null))],null),new Q(null,2,5,R,[tv,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[ev],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Ru)}],null),function(e){return M(e)&&N(e,Ru)},I,new Q(null,1,5,R,[ev],null),null,new Q(null,1,5,R,[Ru],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Ru))],null),null]))],null),null)})),Z(Mv,Bo,Vc),Z(vx,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[Wx],null),iA,new Q(null,1,5,R,[Mv],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[Wx],null),iA,new Q(null,1,5,R,[Mv],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[Wx],null),new Q(null,1,5,R,[Mv],null),null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,pD)}],null),function(e){return M(e)&&N(e,pD)},new Q(null,1,5,R,[os],null),new Q(null,1,5,R,[Wx],null),null,new Q(null,1,5,R,[pD],null),new Q(null,1,5,R,[Mv],null),new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,pD))],null),null]))],null),null));var j1=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(Aa,"handle-request"),(function(e,n,t){return U.a(t)}),o,e,n,t,r)}();function k1(e,n){var t=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,r=x.b(t,lz);t=x.b(t,Xv);try{return j1.c(e,r,t)}catch(i){var o=i;return p(km(o))||AY(IA,Aa,317,new xl((function(){return new Q(null,3,5,R,[o,"Error handling request",n],null)})),-39438057),zL(r)?new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.K("agm",r,is.a(t),ow.a(t),jL(o,"agm.errors.failure"))],null)],null):null}}function l1(){}j1.v(null,xH,(function(e,n,t){if(zL(n))e=e1(e,n,t);else{var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.b(r,ow),x.b(r,pD),r=x.b(r,os),e=p(qL(e,t,ip))?null:d1(e,n,t,r)}return e})),j1.v(null,LF,(function(e,n,t){if(zL(n)){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is),i=g1(e,KT(e,r=x.b(r,ow)),lL(t)),l=J(i,0,null);i=J(i,1,null),e=new Q(null,2,5,R,[l,Cf.g(i,yL.A("agm",n,o,r),G([vL(q0(dL(Mx.a(e)),r),K.c(t,U,bu))]))],null)}else n=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,n=x.b(n,ow),e=p(n=JT.b(e,n))?g1(e,n,lL(t)):null;return e})),j1.v(null,fw,(function(e,n,t){if(zL(n)){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is),i=x.b(r,ow);r=x.b(r,Zw);var l=V0(e,t);e=J(l,0,null),l=J(l,1,null),n=new Q(null,2,5,R,[e,Cf.g(l,W_(n,i,i,r,Fs),G([yL.A("agm",n,o,i),vL(q0(dL(Mx.a(e)),i),t)]))],null)}else n=V0(e,t);return n})),j1.v(null,nt,(function(e,n,t){if(zL(n)){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is),i=x.b(r,ow);r=x.b(r,Zw);var l=T0(e,t),a=J(l,0,null);l=J(l,1,null),e=new Q(null,2,5,R,[a,Cf.g(l,X_(n,i,i,r),G([yL.A("agm",n,o,i),vL(q0(dL(Mx.a(e)),i),t)]))],null)}else e=T0(e,t);return e})),j1.v(null,mw,(function(e,n,t){if(zL(n)){n=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,x.b(n,is);var r=x.b(n,ow);n=LT(e,n=x.b(n,Tu),ip),r=LT(e,r,ip);var o=eL(Mx.a(e)),i=J(o,0,null);o=J(o,1,null),a0(r,n,t),e=Y0(K.c(e,Mx,i),t,o,n,r)}else i=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,x.b(i,is),n=x.b(i,ow),r=x.b(i,Tu),i=x.b(i,qu),e=MT(r=JT.c(e,r,ip))?Y0(e,t,i,r,LT(e,n,ip)):null;return e})),j1.v(null,Ox,(function(e,t,r){zL(t);var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r;return t=x.b(o,qu),LT(e,o=x.b(o,ow),ip),a1(e,t,o,r,new n(null,1,[qz,r],null))})),j1.v(null,Nu,(function(e,n,t){if(zL(n)){var r=eL(Mx.a(e));n=J(r,0,null),r=J(r,1,null),e=z0(K.c(e,Mx,n),t,r)}else r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,n=x.b(r,fA),r=x.b(r,Tu),e=p(JT.b(e,r))?z0(e,t,n):null;return e})),j1.v(null,hH,(function(e,n,t){if(zL(n)){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is),i=x.b(r,ow);e=J(t=M0(e,t,i,r=x.b(r,fA)),0,null),t=J(t,1,null),e=new Q(null,2,5,R,[e,Cf.b(t,yL.A("agm",n,o,i))],null)}else o=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,x.b(o,is),e=M0(e,t,n=x.b(o,ow),o=x.b(o,fA));return e})),j1.v(null,OB,(function(e,n,t){return K0(e,n,t,!1)})),j1.v(null,Gr,(function(e,n,t){return zL(n)?(n=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,x.b(n,fA),e=C0(e,n=LT(e,n=x.b(n,ow),ip),t)):e=D0(e,t),e})),j1.v(null,wG,(function(e,n,t){return O0(e,t)})),j1.v(null,ox,(function(e,t,r){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,ow);t=x.b(o,fA);var l=x.b(o,cE),a=x.b(o,Jq);o=x.b(o,yn);var u=JT.c(e,i,ip),s=mi.b(u,new Q(null,4,5,R,[ip,$n,t,Dz],null)),c=JT.b(e,s),d=lz.a(c);if(p(d)){var f=s=R;MT(c)?(N0(new Q(null,1,5,R,[t],null),c,u,!0,l,a,o),r=qJ.a(c),r=uL(d,new n(null,8,[tq,"agm",U,OA,ow,r,fA,t,UI,!0,cE,l,Jq,a,yn,o],null))):r=wL(q0(dL(Mx.a(e)),i),new n(null,2,[U,Yp,Yp,Yp.a(d)],null),r),e=new Q(null,2,5,s,[e,new Q(null,1,5,f,[r],null)],null)}else e=null;return e})),j1.v(null,IA,(function(e,t,r){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,is);return KT(e,o=x.b(o,ow)),p(i=a1(e,i,o,r,new n(null,1,[lC,r],null)))?i:K0(e,t,r,!0)})),j1.v(null,Nz,(function(e,n){return h1(e,n)})),j1.v(null,$z,(function(e,n,t){return i1(e,n,t)})),j1.v(null,em,(function(e,n,t){return AY(IA,Aa,300,new xl((function(){return new Q(null,2,5,R,["Unhandled message",t],null)})),-855943582),new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.K("agm",n,is.b(t,-1),ow.a(t),mL("agm.errors.unhandled_message",["Unhandled message ",q.a(t)].join("")))],null)],null)})),l1.prototype.Yc=function(){return new n(null,3,[$v,"agm",Rn,"",Ln,1],null)},l1.prototype.Zc=function(e,n){return n},l1.prototype.Wc=function(e,n){return n},l1.prototype.Xc=function(e,n,t){return k1(n,t)};var m1=iL("activity.peer-removed","Peer has been removed"),n1=iL("activity.destroyed","Activity destroyed");function o1(e,t,r,o){return uL(e,t=new n(null,6,[tq,"activity",U,BG,ow,t,bz,r,uE,$v.a(o),kJ,sr.a(o)],null))}function p1(e,t){return new n(null,4,[tq,"activity",U,Dp,ow,e,$E,t],null)}function q1(e,t,r,o){return uL(e,new n(null,5,[tq,"activity",U,qr,is,t,ow,r,Zr,o],null))}var r1=function e(n){return ji.b(S,Wh.b((function(n){var t=J(n,0,null);return n=J(n,1,null),new Q(null,2,5,R,[t,pi(pi(n,fI,yn),YC,e)],null)}),n))};function s1(e,t){return e=JT.b(e,t),new n(null,3,[ow,t,yw,Vu.a(e),U,KH.a(e)],null)}function t1(e,n,t,r,o){var i=YC.a(r),l=Vu.a(t),a=KH.a(t);return e=Xj([fs,ln,U,ow,tE,WB,tq,Dt,Zr,oA],[ki.b(Jh(s1,e),zG.a(r)),ln.a(r),Tx,qJ.a(t),U.a(r),o,"activity",ap.a(r),qJ.a(r),s1(e,oA.a(r))]),l=p(l)?K.c(e,Vu,l):e,a=p(a)?K.c(l,KH,a):l,uL(n,i=p(i)?K.c(a,YC,r1(i)):a)}var u1=function e(n){switch(arguments.length){case 4:return e.A(arguments[0],arguments[1],arguments[2],arguments[3]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};u1.A=function(e,n,t,r){return uL(n,u1.c(e,t,r))},u1.c=function(e,n,t){var r=YC.a(t);return e=Xj([fs,ln,U,ow,tE,tq,Dt,Zr,oA],[ki.b(Jh(s1,e),aU(fs.a(t),zG.a(t))),ln.a(t),bI,n,U.a(t),"activity",ap.a(t),qJ.a(t),s1(e,oA.a(t))]),p(r)?K.c(e,YC,r1(r)):e},u1.F=4;var v1=Jh(yL,"activity"),w1=Jh(xL,"activity");function x1(e,n,t){return gd.c((function(e,n){return n=new Q(null,2,5,R,[ZF,n],null),ni(e,n,Cf.b(mi.c(e,n,I),t))}),e,n)}function y1(e,n,t){return p(function(){var e=B(n);return e?t:e}())?gd.c((function(e,n){n=new Q(null,2,5,R,[ZF,n],null);var r=ZK(t,mi.c(e,n,null));return B(r)?ni(e,n,r):UK(e,n)}),e,n):e}function z1(e,n){return p(n)?mi.b(e,new Q(null,2,5,R,[vs,n],null)):null}function A1(e,n,t){return p(n)?ni(e,new Q(null,2,5,R,[vs,n],null),t):e}function B1(e,n){return mi.b(e,new Q(null,2,5,R,[Vr,n],null))}function C1(e,n,t){return gd.c((function(e,t){return ni(e,new Q(null,3,5,R,[Vr,n,yw.a(t)],null),t)}),e,t)}function D1(e,n,t){return gd.c((function(e,t){return UK(e,new Q(null,3,5,R,[Vr,n,t],null))}),e,t)}function E1(e,n){return aU(mi.b(e,new Q(null,2,5,R,[EF,n],null)),mi.b(e,new Q(null,2,5,R,[EF,yC],null)))}function F1(e,n,t){return oi.A(e,new Q(null,2,5,R,[EF,t],null),Mh(Cf,Dk),n)}function G1(e,n,t){return oi.A(e,new Q(null,2,5,R,[EF,t],null),Of,n)}function H1(e,n){return p(n)?p(e=z1(e,n))?e:kL("activity.errors.invalid_activity",["Unable to find activity with id ",q.a(n)].join("")):null}function I1(e,n){return ni(e,new Q(null,2,5,R,[ao,qJ.a(n)],null),n)}function J1(e,n){return p(n)?mi.b(e,new Q(null,2,5,R,[ao,n],null)):null}function K1(e,n,t){return p(p(n)?t:n)?N(x.b(n,tD),t)?e:ni(e,new Q(null,2,5,R,[ao,qJ.a(n)],null),qi(n,tD,Mh(Cf,Dk),t)):e}function L1(e,n,t){var r=qi(n,tD,Of,t);return t=A.b(t,oA.a(r))?Hf.b(r,oA):r,new Q(null,2,5,R,[ni(e,new Q(null,2,5,R,[ao,qJ.a(n)],null),t),t],null)}var M1=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(Ma,"apply-command"),(function(e,n){return C(n)}),o,e,n,t,r)}();function N1(e,n,t){var r=Ol(KH,t);return x1(TT(e,qJ.a(n),oi.c(n,new Q(null,2,5,R,[by,ZF],null),Mh((function(e){return kg((function(e,n,t){return K.c(e,n,C(t))}),e,r)}),S))),mj(r),qJ.a(n))}function O1(e,t,r){return ki.b((function(e){var o=lz.a(e);e=qJ.a(e);var i=qJ.a(t);return uL(o,new n(null,5,[tq,"activity",U,FH,ow,e,mA,i,ZF,r],null))}),XT(e,by,t,!1))}function P1(e,t,r,o){var i=qJ.a(t);return li(Uc,Wh.b((function(e){if(p(p(o)?o:kh.b(i,qJ.a(e)))){var t=lz.a(e);e=qJ.a(e);var l=Ni(r);t=uL(t,new n(null,5,[tq,"activity",U,wI,ow,e,mA,i,ex,l],null))}else t=null;return t}),XT(e,by,t,!1)))}M1.v(null,Hr,(function(e,n){return J(n,0,null),B(n=J(n,1,null))?gh(Hf,e,n):e})),M1.v(null,Qv,(function(e,n){return J(n,0,null),null!=(n=J(n,1,null))?kg(K,e,n):e})),M1.v(null,BA,(function(e,n){return J(n,0,null),null!=(n=J(n,1,null))?kg((function(e,n,t){return pi(e,n,(function(e){return Vf(t)||$f(t)||Vf(e)||$f(e)?t:Sf(t)&&Sf(e)?wk.g(G([e,t])):t}))}),e,n):e})),M1.v(null,vq,(function(e,n){return J(n,0,null),p(n=J(n,1,null))?n:e})),M1.v(null,em,(function(e,n){var t=J(n,0,null),r=J(n,1,null);return AY(VH,Ma,101,new xl((function(){return new Q(null,4,5,R,["ignoring unknown context delta command",t,"with payload",r],null)})),31928e4),e}));var Q1=function e(n){switch(arguments.length){case 2:return e.b(arguments[0],arguments[1]);case 3:return e.c(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function R1(e,n){n=KH.a(n),p(mi.b(e,new Q(null,3,5,R,[by,ZF,n],null)))&&kL("activity.errors.factory_already_registered",["Factory for type ",q.a(n)," is already registered by this peer"].join(""))}function S1(e,n){return $K((function(e){return A.b(qJ.a(e),n)}),nj(e))}function T1(e,n){var t=mi.b(e,new Q(null,2,5,R,[by,ZF],null));return n=gd.c((function(e,n){var r=J(e,0,null);return e=J(e,1,null),p(n=S1(t,n))?new Q(null,2,5,R,[UK(r,new Q(null,3,5,R,[by,ZF,KH.a(n)],null)),Cf.b(e,n)],null):new Q(null,2,5,R,[r,e],null)}),new Q(null,2,5,R,[e,Dk],null),n),e=J(n,0,null),n=J(n,1,null),new Q(null,2,5,R,[aL(e,by),n],null)}function U1(e,t,r,o,i,l,a,u){return l=p(l)?K.c(S,Tr,new n(null,4,[qJ,qJ.a(l),U,U.a(l),Dt,qJ.a(a),WF,yn.a(a)],null)):S,u=p(u)?K.c(l,Vu,u):l,l=lz.a(e),e=qJ.a(e),a=qJ.a(t),t=wk.g(G([PH.a(t),r])),uL(l,wk.g(G([new n(null,7,[tq,"activity",U,Lr,is,i,ow,e,gx,a,PG,o,PH,t],null),u])))}function V1(e,n,t){var r=JT.b(e,ow.a(t));return p(r)?new Q(null,2,5,R,[e,new Q(null,1,5,R,[w1(lz.a(r),is.a(t),qJ.a(r),n)],null)],null):new Q(null,2,5,R,[e,null],null)}function W1(e,n,t){return e=JT.b(e,p(n)?n:C(mi.b(e,new Q(null,2,5,R,[ZF,t],null)))),p(n=mi.b(e,new Q(null,3,5,R,[by,ZF,t],null)))?new Q(null,2,5,R,[e,n],null):kL("activity.errors.missing_factory",["Unable to find factory owner for type ",q.a(t)].join(""))}function X1(e,t,r,o,i,l,a){var u=W1(e,null,U.a(r)),s=J(u,0,null);u=J(u,1,null);var c=KT(e,t),d=eL(Mx.a(e));return t=J(d,0,null),d=J(d,1,null),l=new n(null,4,[U,Tr,qJ,d,KH,U.a(r),Tr,new n(null,2,[qJ,qJ.a(o),yy,l],null)],null),r=p(yw.a(r))?K.c(l,Vu,yw.a(r)):l,l=r_(e,l=pD.a(c),r),e=rL(K.c(e,Mx,t),d,r),new n(null,3,[Sz,e,eu,new Q(null,1,5,R,[U1(s,u,a,l,d,o,i,null)],null),WG,d],null)}function Y1(e){return nj(mi.b(e,new Q(null,1,5,R,[ao],null)))}function Z1(e,n,t){var r=function(){var e=null==t?null:pD.a(t);return null==e?null:dt.a(e)}(),o=function(){var e=null==t?null:eI.a(t);return null==e?null:po.a(e)}();e=nj(ao.a(e));var i=gd.c((function(e,t){return A.b(n,yw.a(t))&&A.b(r,function(){var e=null==t?null:pD.a(t);return null==e?null:dt.a(e)}())?bf(t):null}),null,e);return p(i)?i:gd.c((function(e,t){return A.b(n,yw.a(t))?p(o)?e=o:e=null==(e=null==t?null:eI.a(t))?null:po.a(e):e=!1,p(e)?bf(t):null}),null,e)}function $1(e,n){if(p(e=mi.b(e,new Q(null,2,5,R,[ao,n],null))))return e;throw im(["Unable to find context with id ",q.a(n)].join(""),S)}function a2(e,n,t){return p(p(n)?t:n)?N(x.b(n,tD),t)?e:ni(e,new Q(null,2,5,R,[ao,qJ.a(n)],null),qi(n,tD,Mh(Cf,Dk),t)):e}Q1.b=function(e,n){return li(Uc,Wh.b(Kh(Q1,e,n),fi.b(Kh(VT,by,n),Wh.b(Jh(JT,e),Fk(ii(nj(x.b(e,ZF))))))))},Q1.c=function(e,t,r){var o=nj(mi.b(r,new Q(null,2,5,R,[by,ZF],null)));return p(o)?(e=lz.a(t),t=qJ.a(t),r=qJ.a(r),o=Ni(o),e=uL(e,new n(null,5,[tq,"activity",U,FH,ow,t,mA,r,ZF,o],null))):e=null,e},Q1.F=3;var e5=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(sa,"apply-delta-cmd"),(function(e,n){return C(n)}),o,e,n,t,r)}();e5.v(null,Hr,(function(e,n){return J(n,0,null),B(n=J(n,1,null))?gh(Hf,e,n):e})),e5.v(null,Qv,(function(e,n){return J(n,0,null),null!=(n=J(n,1,null))?kg(K,e,n):e})),e5.v(null,BA,(function(e,n){return J(n,0,null),null!=(n=J(n,1,null))?kg((function(e,n,t){return pi(e,n,(function(e){return Vf(t)&&Vf(e)?t:Sf(t)&&Sf(e)?wk.g(G([e,t])):t}))}),e,n):e})),e5.v(null,vq,(function(e,n){return J(n,0,null),p(n=J(n,1,null))?n:e}));var b2=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(sa,"apply-command"),(function(e,n){return Kg.a(U.a(n))}),o,e,n,t,r)}(),f5=function e(n,t,r){var o=C(t=B(t)),i=D(t);return null==o?r:i?K.c(n,o,function(){var t=x.b(n,o);return t=null!=t&&M(t)?t:S,e.c?e.c(t,i,r):e.call(null,t,i,r)}()):K.c(n,o,r)};function c2(e,n,t,r){var o=qJ.a(n);return ni(ni(e,new Q(null,3,5,R,[ao,o,yn],null),gd.c(e5,function(){var e=yn.a(n);return p(e)?e:S}(),t)),new Q(null,3,5,R,[ao,o,Ln],null),r)}function d2(e,t,r,o,i,l,a){var u=new n(null,2,[HA,0,Zt,(new Date).getTime()],null),s=pD.a(e);return e=eI.a(e),t=Xj([Ys,pD,yw,gz,qJ,Zz,tD,Ln,yn],[l,s,t,i,a,o,Dk,u,r]),p(e)?K.c(t,eI,e):t}function f2(e,n,t,r,o,i,l){this.id=e,this.type=n,this.ac=t,this.Nb=r,this.Mb=o,this.j=i,this.B=l,this.h=2230716170,this.I=139264}function g2(e,n,t,r){return new f2(e,n,t,r,null,null,null)}function h2(e,n,t){var r=fL(Mx.a(e)),o=J(r,0,null);t=d2(t,r=J(r,1,null),Wq.a(n),Tr,gz.a(n),Ys.a(n),r);var i=Qq.b(o,1),l=["a-",q.a($y.a(o)),"-",q.a(i)].join("");return o=J(i=new Q(null,2,5,R,[K.c(o,Qq,i+1),l],null),0,null),i=J(i,1,null),n=K.c(g2(i,tE.a(n),r,ow.a(n)),gn,n),new Q(null,3,5,R,[K.c(e,Mx,o),n,t],null)}function i2(e,n,t){return ji.c(I,Ih.b(fi.a((function(e){return A.b(n,mi.b(e,new Q(null,2,5,R,[pD,dt],null)))})),Wh.a((function(e){return uL(lz.a(e),p1(e=qJ.a(e),t))}))),NT(e,by))}function j2(e,t,r){return ji.c(I,Ih.b(fi.a((function(e){return A.b(t,mi.b(e,new Q(null,2,5,R,[pD,dt],null)))})),Wh.a((function(e){var t=lz.a(e);return e=qJ.a(e),uL(t,new n(null,4,[tq,"activity",U,pF,ow,e,$E,r],null))}))),NT(e,by))}function k2(e,n){B(e=Fk(nj(B1(e,mi.b(n,new Q(null,2,5,R,[pD,dt],null))))))?n=new Q(null,1,5,R,[uL(lz.a(n),p1(n=qJ.a(n),e))],null):n=null;return n}function l2(e,n,t){return p(e=x.b(B1(e,mi.b(n,new Q(null,2,5,R,[pD,dt],null))),t))?e:kL("activity.errors.missing_type",["Unable to find activity type ",q.a(t)].join(""))}function m2(e,t){var r=PH.a(e);return wk.g(G([r,x.b(t,new n(null,1,[U,U.a(e)],null)),x.b(t,new n(null,2,[U,U.a(e),yw,yw.a(e)],null))]))}function n2(e,n,t,r,o){return e=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e,n=X1(x.b(e,Sz),t,n,x.b(e,Tr),r,!0,m2(n,o)),VK(WK(K.c(e,Sz,Sz.a(n)),new Q(null,1,5,R,[eu],null),eu.a(n)),new Q(null,2,5,R,[Tr,aC],null),G([WG.a(n)]))}function o2(e,n,t,r,o){e=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e,x.b(e,Sz);var i=x.b(e,Tr);return gd.c((function(e,n){try{var l=X1(Sz.a(e),t,n,Tr.a(e),r,!1,m2(n,o)),a=null!=l&&(64&l.h||h===l.D)?fh(qk,l):l,u=x.b(a,Sz),s=x.b(a,eu),c=x.b(a,WG);return VK(WK(K.c(e,Sz,u),new Q(null,1,5,R,[eu],null),s),new Q(null,2,5,R,[Tr,aC],null),G([c]))}catch(f){var d=f;return AY(VH,ya,157,new xl((function(){return new Q(null,5,5,R,[d,"Unable to create helper type",n,"for activity",qJ.a(i)],null)})),2059607643),e}}),e,n)}function p2(e,t,r,o){var i=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,l=x.b(i,is),a=LT(e,i=x.b(i,ow),by),u=l2(e,a,tE.a(r));o=ji.b(S,Wh.b((function(e){return new Q(null,2,5,R,[yk(e,new Q(null,2,5,R,[U,yw],null)),PH.a(e)],null)}),o));var s=rx.a(r);return p(p(s)?!Pf(o):s)&&kL("activity.errors.activity_is_child","Cannot specify types override and custom configuration at the same time"),r=J(e=h2(e,r,a),0,null),a=J(e,1,null),e=J(e,2,null),i=null!=(t=o2(n2(new n(null,3,[Sz,r,eu,new Q(null,1,5,R,[q1(t,l,i,qJ.a(a))],null),Tr,a],null),function(){var e=uH.a(s);return p(e)?e:uH.a(u)}(),i,e,o),function(){var e=aG.a(s);return p(e)?e:aG.a(u)}(),i,e,o))&&(64&t.h||h===t.D)?fh(qk,t):t,l=x.b(i,Sz),t=x.b(i,eu),i=x.b(i,Tr),l=A1(I1(l,e),qJ.a(i),i),new Q(null,2,5,R,[l,t],null)}function q2(e,n,t){var r=qJ.a(t);return!!(N(zG.a(e),r)||N(fs.a(e),r)||A.b(oA.a(e),r))||VT.la(pD.a(n),gz.a(e),mi.b(n,new Q(null,2,5,R,[eI,po],null)),pD.a(t),null,mi.b(t,new Q(null,2,5,R,[eI,po],null)))}function r2(e,n,t){var r=oA.a(n),o=zG.a(n);return ki.b((function(r){return t1(e,lz.a(r),r,n,t)}),fi.b(Uc,Wh.b((function(n){return JT.b(e,n)}),Cf.b(o,r))))}function s2(e,n){return bU(Ek([n]),x.c(e,fs,Dk),G([x.b(e,zG)]))}function t2(e,n,t,r){return fi.b(Kh(q2,t,r),Wh.b(Jh(JT,e),gi.b(Jh(A,n),aU(E1(e,U.a(t)),p(!0)?s2(t,qJ.a(r)):null))))}function u2(e,n){var t=U.a(n),r=JT.b(e,oA.a(n));return ki.b((function(t){return u1.A(e,lz.a(t),qJ.a(t),n)}),fi.b((function(e){return q2(n,r,e)}),Wh.b(Jh(JT,e),E1(e,t))))}function v2(e,t,r,o){return p(Io.a(t))?(r=JT.b(e,r),ki.b((function(e){var r=lz.a(e);e=qJ.a(e);var i=qJ.a(t);return uL(r,e=new n(null,6,[tq,"activity",U,Hw,ow,e,Zr,i,uE,$v.a(o),kJ,sr.a(o)],null))}),t2(e,null,t,r))):null}function w2(e,t,r){if(p(Io.a(t))){var o=qJ.a(r);return ki.b((function(e){var o=lz.a(e),i=qJ.a(e),l=qJ.a(t),a=Vu.a(r);return e=KH.a(r),i=new n(null,5,[tq,"activity",U,kF,ow,i,Zr,l,mA,qJ.a(r)],null),a=p(a)?K.c(i,Vu,a):i,uL(o,e=p(e)?K.c(a,KH,e):a)}),t2(e,o,t,r))}return null}function x2(e,t,r,o){var i=qJ.a(t);return ki.b((function(e){var o=lz.a(e),i=qJ.a(e),l=qJ.a(r);return e=Vu.a(t),i=new n(null,6,[tq,"activity",U,aD,ow,i,Zr,l,sv,qJ.a(t),Ky,KH.a(t)],null),uL(o,e=p(e)?K.c(i,Zx,e):i)}),t2(e,i,r,o))}function y2(e,t,r,o){var i=JT.b(e,oA.a(r));return ki.b((function(e){var i=lz.a(e);e=qJ.a(e);var l=qJ.a(r);return uL(i,e=new n(null,7,[tq,"activity",U,mn,ow,e,Zr,l,lu,t,uE,$v.a(o),kJ,sr.a(o)],null))}),t2(e,t,r,i))}function z2(e,t,r){var o=qJ.a(r),i=ap.a(t);if(i=J1(e,i),t=qi(t,zG,Mh(Cf,Dk),o),p(Io.a(t))){var l=oA.a(t);l=JT.b(e,l),r=Cf.b(x2(e,r,t,l),t1(e,lz.a(r),r,t,yn.a(i)))}else r=null;return new n(null,3,[Sz,K1(e,i,o),Tr,t,eu,r],null)}function A2(e){return aL(UK(UK(e,new Q(null,2,5,R,[by,eJ],null)),new Q(null,2,5,R,[by,oA],null)),by)}function B2(e,n,t){return gd.c((function(e,n){var r=J(e,0,null);e=J(e,1,null);var o=JT.b(r,n);return p(o)?new Q(null,2,5,R,[TT(r,n,A2(o)),Cf.b(e,o1(lz.a(o),n,null,t))],null):new Q(null,2,5,R,[r,e],null)}),new Q(null,2,5,R,[e,I],null),n)}function C2(e,n){return gd.c((function(e,n){return C(sL(e,n))}),e,aC.a(n))}function D2(e,n,t){var r=gn.a(n),o=oA.a(n);qJ.a(n);var i=R;e=C2(e,n);var l=qJ.a(n);e=UK(e,new Q(null,2,5,R,[vs,l],null)),l=ap.a(n),e=UK(e,new Q(null,2,5,R,[ao,l],null)),i=J(e=new Q(null,2,5,i,[e,null],null),0,null),e=J(e,1,null);var a=B2(i,bU(Ek([o]),fs.a(n),G([zG.a(n)])),t);return l=J(a,0,null),a=J(a,1,null),i=J(e=new Q(null,2,5,R,[p(l)?l:i,$f(a)||Vf(a)?gd.c(Mh(Cf,I),e,a):null!=a?Mh(Cf,I)(e,a):e],null),0,null),e=J(e,1,null),n=J(o=new Q(null,2,5,R,[i,v2(i,n,o,t)],null),0,null),o=J(o,1,null),n=J(o=new Q(null,2,5,R,[p(n)?n:i,$f(o)||Vf(o)?gd.c(Mh(Cf,I),e,o):null!=o?Mh(Cf,I)(e,o):e],null),0,null),o=J(o,1,null),i=p(r)?JT.b(n,ow.a(r)):r,p(i)?new Q(null,2,5,R,[n,Cf.b(o,w1(lz.a(i),is.a(r),ow.a(r),t))],null):new Q(null,2,5,R,[n,o],null)}function E2(e,n){return p(yy.a(n))?e=D2(e,n=z1(e,qJ.a(n)),iL("activity.errors.owner_creation","Activity owner cannot be created")):e=new Q(null,2,5,R,[e,null],null),e}function F2(e,n){var t=p(fs.a(e))?qi(e,fs,Of,n):e;return p(zG.a(e))?qi(t,zG,Of,n):t}function G2(e,t,r,o){AY(AG,ya,563,new xl((function(){return new Q(null,5,5,R,["a participant",qJ.a(r),"of activity",qJ.a(t),"has left"],null)})),-209386152);var i=qJ.a(r),l=F2(t,i),a=qJ.a(l);return o=y2(e,i,l,o),new n(null,3,[Sz,C(L1(A1(TT(e,i,A2(r)),a,l),J1(e,ap.a(l)),i)),Tr,l,eu,o],null)}function H2(e,n,t,r,o){var i=qJ.a(t);return AY(AG,ya,583,new xl((function(){return new Q(null,5,5,R,["the owner",i,"of activity",qJ.a(n),"has left"],null)})),1899025864),p(o)?D2(TT(e,i,A2(t)),n,r):(t=null!=(e=G2(e,n,t,r))&&(64&e.h||h===e.D)?fh(qk,e):e,e=x.b(t,Sz),t=x.b(t,eu),new Q(null,2,5,R,[e,t],null))}function I2(e,n,t,r,o,i){return e=B(o)?gd.c((function(e,n){return i.c?i.c(e,r,n):i.call(null,e,r,n)}),e,gi.b(Qc,o)):i.c?i.c(e,r,yC):i.call(null,e,r,yC),new Q(null,2,5,R,[e,new Q(null,1,5,R,[v1(n,t,r)],null)],null)}function J2(e,n,t){t=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;var r=x.b(t,is),o=x.b(t,ow),i=x.b(t,lp);return t=LT(e,o,by),e=J(n=I2(e,n,r,o,i,F1),0,null),n=J(n,1,null),r=fi.b(Io,nj(x.b(e,vs))),new Q(null,2,5,R,[e,ji.b(n,ki.b(Lh(u1,e,lz.a(t),qJ.a(t)),B(i)?fi.b((function(e){return N(i,U.a(e))}),r):r))],null)}function K2(e,t,r,o,i){return uL(t,new n(null,5,[tq,e,U,du,is,r,ow,o,Dt,i],null))}function L2(e,t,r,o,i){return uL(t,new n(null,6,[tq,e,U,KE,ow,r,Dt,o,uE,$v.a(i),kJ,sr.a(i)],null))}function M2(e){return[q.a(e),".errors.not_authorized"].join("")}function N2(e){return mL([q.a(e),".destroyed"].join(""),"Context destroyed explicitly")}function O2(e){return mL([q.a(e),".peer-left"].join(""),"Context destroyed because its owner/last peer left")}function P2(e){return[q.a(e),".errors.failure"].join("")}function Q2(e,n){return e=Ln.a(e),n=Ln.a(n),HA.a(e)>HA.a(n)||A.b(HA.a(e),HA.a(n))&&Zt.a(e)>=Zt.a(n)}function R2(e,n){var t=Zz.a(e);if(A.b(t,Tr))e=N(tD.a(e),qJ.a(n));else{var r=(t=A.b(Zz.a(e),Mw))&&A.b(oA.a(e),qJ.a(n));e=r||!t&&mS(Ys.a(e),pD.a(e),pD.a(n))}return e}function S2(e,n,t){A.b(Zz.a(n),Tr)&&kL(M2(e),"Activity contexts cannot be explicitly destroyed");var r=Zz.a(n);if(A.b(r,Tr))n=N(tD.a(n),qJ.a(t));else{var o=(r=A.b(Zz.a(n),Mw))&&A.b(oA.a(n),qJ.a(t));n=o||!r&&mS(Ys.a(n),pD.a(n),pD.a(t))}p(n)||kL(M2(e),"Not authorized to update context")}function T2(e,n){return mS(gz.a(e),pD.a(e),pD.a(n))}function U2(e,n){return!!MT(e)&&(!!kh.b(Zz.a(n),Tr)&&T2(n,e))}function V2(e,n,t){p(T2(n,t))||kL(M2(e),"Not authorized to read context")}function W2(e){return p(mi.b(e,new Q(null,2,5,R,[eI,pu],null)))?"global":"context"}function X2(e,t,r,o,i){var l=qJ.a(t);return e=c2(e,t,o,i),new Q(null,2,5,R,[e,ki.b((function(e){var t=W2(e),i=lz.a(e);return e=qJ.a(e),uL(i,new n(null,6,[tq,t,U,PB,ow,e,CE,r,Dt,l,oo,o],null))}),fi.b(MT,Wh.b(Jh(JT,e),gi.b(Jh(A,r),tD.a(t)))))],null)}function Y2(e,n){var t=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n;x.b(t,is);var r=x.b(t,ow),o=x.b(t,yw);t=x.b(t,oo);try{var i=KT(e,r),l=Z1(e,o,i);return p(l)?p(function(){var e=R2(l,i);return p(e)?Q2(n,l):e}())?X2(e,l,r,bL(t),Ln.a(n)):new Q(null,2,5,R,[e,null],null):(AY(VH,pa,155,new xl((function(){return new Q(null,2,5,R,["unable to find remote context",o],null)})),1931868431),new Q(null,2,5,R,[e,null],null))}catch(u){var a=u;return AY(IA,pa,159,new xl((function(){return new Q(null,2,5,R,[a,"error performing remote context update"],null)})),222751919),new Q(null,2,5,R,[e,null],null)}}function $2(e,t,r,o){if(zL(r)){var i=null!=o&&(64&o.h||h===o.D)?fh(qk,o):o,l=x.b(i,is),a=x.b(i,ow),u=x.b(i,Dt);i=x.b(i,oo);try{var s=KT(t,a),c=$1(t,u),d=Ln.b(c,new n(null,1,[HA,0],null)),f=K.c(pi(d,HA,$e),Zt,(new Date).getTime());p(R2(c,s))||kL(e,"Not authorized to update context");var _=X2(t,c,a,bL(i),f),g=J(_,0,null),m=J(_,1,null),w=new Q(null,2,5,R,[g,new Q(null,2,5,R,[yL.A(e,r,l,a),vL(q0(dL(Mx.a(t)),a),K.g(o,U,pJ,G([Ln,f,yw,yw.a(c)])))],null)],null),v=J(w,0,null),b=J(w,1,null),y=new Q(null,2,5,R,[p(v)?v:g,$f(b)||Vf(b)?gd.c(Mh(Cf,I),m,b):null!=b?Mh(Cf,I)(m,b):m],null)}catch(k){y=new Q(null,2,5,R,[t,new Q(null,1,5,R,[xL.K(e,r,l,a,jL(k,P2(e)))],null)],null)}}else y=Y2(t,o);return y}function a3(e){if(e instanceof z)return e;switch(e){case"ownership":return Mw;case"ref-counted":return Go;case"retained":return aI;default:return null}}function b3(e,n,t,r){r=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r;var o=x.b(r,yw),i=x.b(r,yn),l=x.b(r,Zz),a=x.b(r,gz),u=x.b(r,Ys),s=x.b(r,ow),c=fL(Mx.a(e));return r=J(c,0,null),c=J(c,1,null),n=K.g(d2(n,o,i,l,a,u,c),tD,Ek([s]),G([an,t])),n=A.b(l,Mw)?K.c(n,oA,s):n,t=R,e=K.c(e,Mx,r),e=ni(e,new Q(null,2,5,R,[ao,qJ.a(n)],null),n),new Q(null,2,5,t,[e,n],null)}function c3(e,t,r,o,i,l){t=a2(t,i,l);var a=R,u=R,s=qJ.a(i);return i=yn.a(i),new Q(null,2,5,a,[t,new Q(null,1,5,u,[uL(r,new n(null,6,[tq,e,U,ly,is,o,ow,l,Dt,s,yn,i],null))],null)],null)}function d3(e,n,t){t=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,x.b(t,is);var r=x.b(t,ow),o=x.b(t,yw);try{var i=KT(n,r),l=Z1(n,o,i);return p(l)?(V2(e,l,i),new Q(null,2,5,R,[a2(n,l,r),null],null)):(AY(VH,pa,254,new xl((function(){return new Q(null,2,5,R,["unable to find remote context",o],null)})),303241329),new Q(null,2,5,R,[n,null],null))}catch(a){return new Q(null,2,5,R,[n,null],null)}}function e3(e,n,t,r){if(zL(t)){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,is),l=x.b(o,ow);o=x.b(o,Dt);try{var a=KT(n,l),u=$1(n,o),s=Jh(c3,e);V2(e,u,a);var c=new Q(null,2,5,R,[n,null],null),d=J(c,0,null),f=J(c,1,null),_=s(d,t,i,u,l),g=J(_,0,null),m=J(_,1,null),w=new Q(null,2,5,R,[p(g)?g:d,$f(m)||Vf(m)?gd.c(Mh(Cf,I),f,m):null!=m?Mh(Cf,I)(f,m):f],null),v=J(w,0,null),b=J(w,1,null),y=new Q(null,2,5,R,[null,vL(q0(dL(Mx.a(n)),l),K.g(r,U,Qw,G([yw,yw.a(u)])))],null),k=J(y,0,null),C=J(y,1,null),E=new Q(null,2,5,R,[p(k)?k:v,$f(C)||Vf(C)?gd.c(Mh(Cf,I),b,C):null!=C?Mh(Cf,I)(b,C):b],null)}catch(S){E=new Q(null,2,5,R,[n,new Q(null,1,5,R,[xL.K(e,t,i,l,jL(S,P2(e)))],null)],null)}}else E=d3(e,n,r);return E}function f3(e,t,r){var o=yw.a(t),i=qJ.a(t),l=qJ.a(r);return ji.c(I,Ih.c(fi.a(MT),fi.a(Jh(T2,t)),Wh.a((function(e){var t=W2(e),r=lz.a(e);return e=qJ.a(e),uL(r,new n(null,6,[tq,t,U,on,ow,e,Vp,l,Dt,i,yw,o],null))}))),XT(e,ct,r,!0))}function g3(e,n,t){var r=qJ.a(e);return ji.c(I,Ih.c(fi.a(MT),fi.a(Jh(T2,e)),Wh.a((function(e){return L2(W2(e),lz.a(e),qJ.a(e),r,t)}))),n)}function h3(e,t){var r=lS(gz.a(t)),o=lS(Ys.a(t)),i=a3(Zz.a(t));return p(i)||kL([q.a(e),".errors.bad_lifetime"].join(""),["Bad lifetime value ",q.a(i)].join("")),wk.g(G([t,new n(null,3,[gz,r,Ys,o,Zz,i],null)]))}function i3(e,n,t,r){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,is),l=x.b(o,ow);o=x.b(o,yw);try{var a=KT(n,l),u=Z1(n,o,a);if(p(u))return V2(e,u,l),c3(e,n,t,i,u,l);var s=b3(n,a,!0,h3(e,r)),c=J(s,0,null),d=J(s,1,null);return new Q(null,2,5,R,[c,Cf.g(f3(c,d,a),K2(e,t,i,l,qJ.a(d)),G([vL(q0(dL(Mx.a(n)),l),K.g(r,U,Pu,G([Ln,Ln.a(d)])))]))],null)}catch(_){var f=_;return AY(IA,pa,383,new xl((function(){return new Q(null,2,5,R,[f,"error"],null)})),-3677801),new Q(null,2,5,R,[n,new Q(null,1,5,R,[xL.K(e,t,i,l,jL(f,P2(e)))],null)],null)}}function j3(e,t,r,o){if(zL(r))var i=i3(e,t,r,o);else{var l=null!=o&&(64&o.h||h===o.D)?fh(qk,o):o;x.b(l,is),r=x.b(l,ow),l=x.b(l,yw);try{var a=KT(t,r),u=Z1(t,l,a);if(p(u))V2(e,u,r),i=Q2(o,u)?X2(t,u,r,new n(null,1,[vq,yn.a(o)],null),Ln.a(o)):new Q(null,2,5,R,[t,null],null);else{var s=b3(t,a,!1,h3(e,o)),c=J(s,0,null),d=J(s,1,null);i=new Q(null,2,5,R,[c,f3(c,d,a)],null)}}catch(f){i=new Q(null,2,5,R,[t,null],null)}}return i}function k3(e,n,t,r){var o=qJ.a(t),i=tD.a(t);return new Q(null,2,5,R,[UK(n,new Q(null,2,5,R,[ao,o],null)),gd.c(Cf,ki.b((function(n){return L2(e,lz.a(n),qJ.a(n),o,r)}),fi.b(MT,Wh.b(Jh(JT,n),i))),g3(t,Dl(G([gi.b((function(e){return x.b(i,qJ.a(e))}),NT(n,ct))])),r))],null)}function l3(e,n,t){t=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;var r=x.b(t,ow),o=x.b(t,yw);try{var i=KT(n,r),l=Z1(n,o,i);return p(l)?(S2(e,l,i),k3(e,n,l,N2(e))):(AY(VH,pa,437,new xl((function(){return new Q(null,2,5,R,["unable to find remote context",o],null)})),1815829467),new Q(null,2,5,R,[n,null],null))}catch(a){return new Q(null,2,5,R,[n,null],null)}}function m3(e,n,t,r){if(zL(t)){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,is),l=x.b(o,ow);o=x.b(o,Dt);try{var a=KT(n,l),u=$1(n,o);S2(e,u,a);var s=k3(e,n,u,N2(e)),c=J(s,0,null),d=J(s,1,null),f=new Q(null,2,5,R,[null,new Q(null,2,5,R,[yL.A(e,t,i,l),vL(q0(dL(Mx.a(n)),l),K.g(r,U,Tt,G([yw,yw.a(u)])))],null)],null),_=J(f,0,null),g=J(f,1,null),m=new Q(null,2,5,R,[p(_)?_:c,$f(g)||Vf(g)?gd.c(Mh(Cf,I),d,g):null!=g?Mh(Cf,I)(d,g):d],null)}catch(w){m=new Q(null,2,5,R,[n,new Q(null,1,5,R,[xL.K(e,t,i,l,jL(w,P2(e)))],null)],null)}}else m=l3(e,n,r);return m}b2.v(null,yA,(function(e,n){var t=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n;return n=x.b(t,jK),t=x.b(t,JO),e=p(e)?e:S,t=ec(null==t?"":String(t))?null:UL(t,/\./,0),f5(e,t,n)})),b2.v(null,iK,(function(e,t){return t=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,null==(t=ec(null==(t=x.b(t,JO))?"":String(t))?null:UL(t,/\./,0))?S:UK.g(e,t,G([new n(null,1,[FO,!0],null)]))})),e5.v(null,hK,(function(e,n){return J(n,0,null),n=J(n,1,null),gd.c((function(e,n){return b2.b(e,bL(n))}),e,n)})),e5.v(null,em,(function(e,n){var t=J(n,0,null),r=J(n,1,null);return AY(VH,sa,154,new xl((function(){return new Q(null,4,5,R,["ignoring unknown context delta command",t,"with payload",r],null)})),1689008759),e})),g=f2.prototype,g.ia=function(e,n){return this.M(null,n,null)},g.M=function(e,n,t){switch(n instanceof z?n.da:null){case"id":return this.id;case"type":return this.type;case"context-id":return this.ac;case"initiator":return this.Nb;default:return x.c(this.j,n,t)}},g.Aa=function(e,n,t){return gd.c((function(e,t){var r=J(t,0,null);return t=J(t,1,null),n.c?n.c(e,r,t):n.call(null,e,r,t)}),t,this)},g.S=function(e,n,t){return $k(n,(function(e){return $k(n,hl,""," ","",t,e)}),"#gateway.domains.activity.activity.Activity{",", ","}",t,Xg.b(new Q(null,4,5,R,[new Q(null,2,5,R,[qJ,this.id],null),new Q(null,2,5,R,[U,this.type],null),new Q(null,2,5,R,[ap,this.ac],null),new Q(null,2,5,R,[ln,this.Nb],null)],null),this.j))},g.ua=function(){return new gj(this,4,new Q(null,4,5,R,[qJ,U,ap,ln],null),p(this.j)?ze(this.j):mh())},g.N=function(){return this.Mb},g.X=function(){return 4+F(this.j)},g.Z=function(){var e=this.B;return null!=e?e:this.B=e=246370226^Ye(this)},g.Y=function(e,n){return null!=n&&this.constructor===n.constructor&&A.b(this.id,n.id)&&A.b(this.type,n.type)&&A.b(this.ac,n.ac)&&A.b(this.Nb,n.Nb)&&A.b(this.j,n.j)},g.Ka=function(e,t){return N(new Bk(null,new n(null,4,[ln,null,U,null,qJ,null,ap,null],null),null),t)?Hf.b(Pd(ji.b(S,this),this.Mb),t):new f2(this.id,this.type,this.ac,this.Nb,this.Mb,lh(Hf.b(this.j,t)),null)},g.fa=function(e,n,t){return p(P.b?P.b(qJ,n):P.call(null,qJ,n))?new f2(t,this.type,this.ac,this.Nb,this.Mb,this.j,null):p(P.b?P.b(U,n):P.call(null,U,n))?new f2(this.id,t,this.ac,this.Nb,this.Mb,this.j,null):p(P.b?P.b(ap,n):P.call(null,ap,n))?new f2(this.id,this.type,t,this.Nb,this.Mb,this.j,null):p(P.b?P.b(ln,n):P.call(null,ln,n))?new f2(this.id,this.type,this.ac,t,this.Mb,this.j,null):new f2(this.id,this.type,this.ac,this.Nb,this.Mb,K.c(this.j,n,t),null)},g.$=function(){return B(Xg.b(new Q(null,4,5,R,[new Gi(qJ,this.id),new Gi(U,this.type),new Gi(ap,this.ac),new Gi(ln,this.Nb)],null),this.j))},g.O=function(e,n){return new f2(this.id,this.type,this.ac,this.Nb,n,this.j,this.B)},g.ga=function(e,n){return Vf(n)?this.fa(null,qd(n,0),qd(n,1)):gd.c(od,this,n)},Z(zB,Bo,Vc),Z(ps,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[Wx],null),iA,new Q(null,1,5,R,[zB],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[Wx],null),iA,new Q(null,1,5,R,[zB],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[Wx],null),new Q(null,1,5,R,[zB],null),null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,pD)}],null),function(e){return M(e)&&N(e,pD)},new Q(null,1,5,R,[os],null),new Q(null,1,5,R,[Wx],null),null,new Q(null,1,5,R,[pD],null),new Q(null,1,5,R,[zB],null),new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,pD))],null),null]))],null),null)),Z(rJ,Bp,Bp),Z(DI,O(hq,Bo),eT(Uy,Vc,new n(null,4,[Zn,null,NC,function(e){return Qf(e)},sy,!0,NH,O(hq,Bo)],null),null)),Z(cC,Hq,M),Z(ro,Hq,M),Z(mC,Hq,M),Z(jo,new Bk(null,new n(null,2,[iK,"null",yA,"null"],null),null),new Bk(null,new n(null,2,[iK,null,yA,null],null),null)),Z(tT,Bo,Vc),Z(uT,BI,Wc),Z(GO,O(wt,ir,new Q(null,2,5,R,[jo,tT],null),iA,new Q(null,1,5,R,[uT],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[jo,tT],null),new Q(null,1,5,R,[uT],null),null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,U)},function(e){return N(e,JO)}],null),function(e){return M(e)&&N(e,U)&&N(e,JO)},new Q(null,1,5,R,[jK],null),new Q(null,2,5,R,[jo,tT],null),null,new Q(null,2,5,R,[U,JO],null),new Q(null,1,5,R,[uT],null),new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,JO))],null),null]))),Z(HO,O(hq,GO,Os,XF,uC,I),eT(GO,GO,new n(null,6,[uC,I,Zn,XF,NC,function(e){return Vf(e)},Os,Vf,sy,!0,NH,O(hq,GO,uC,I,Os,XF)],null),null)),Z(wx,O(wt,iA,new Q(null,5,5,R,[DI,cC,ro,mC,HO],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[null,new Q(null,5,5,R,[DI,cC,ro,mC,HO],null),null,new Q(null,1,5,R,[function(e){return M(e)}],null),function(e){return M(e)},new Q(null,5,5,R,[Hr,Qv,BA,vq,hK],null),I,null,I,new Q(null,5,5,R,[DI,cC,ro,mC,HO],null),new Q(null,1,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V))],null),null]))),Z(cr,O(xv,Wp,O(wt,ir,new Q(null,2,5,R,[rJ,wx],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,2,5,R,[rJ,wx],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[rJ,wx],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,Dt)},function(e){return N(e,oo)}],null),function(e){return M(e)&&N(e,Dt)&&N(e,oo)},I,new Q(null,2,5,R,[rJ,wx],null),null,new Q(null,2,5,R,[Dt,oo],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,oo))],null),null]))],null),null)),Z(Cz,O(W,new Q(null,1,5,R,[V],null),O(Fq,bn,O(Xp,V))),(function(e){return QS(bn,Kg.a(e))})),Z(Pr,O(CJ,Bo),rT(Bo,Vc,null)),Z(gE,O(CJ,Bo),rT(Bo,Vc,null)),Z(JB,O(xv,Wp,O(wt,ir,new Q(null,3,5,R,[Xy,LI,Cz],null),iA,new Q(null,3,5,R,[ZC,Pr,gE],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,3,5,R,[Xy,LI,Cz],null),iA,new Q(null,3,5,R,[ZC,Pr,gE],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[Xy,LI,Cz],null),new Q(null,3,5,R,[ZC,Pr,gE],null),null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,yw)},function(e){return N(e,yn)},function(e){return N(e,Zz)}],null),function(e){return M(e)&&N(e,yw)&&N(e,yn)&&N(e,Zz)},new Q(null,3,5,R,[Ln,gz,Ys],null),new Q(null,3,5,R,[Xy,LI,Cz],null),null,new Q(null,3,5,R,[yw,yn,Zz],null),new Q(null,3,5,R,[ZC,Pr,gE],null),new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yw)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yn)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Zz))],null),null]))],null),null)),Z(rJ,Bp,Bp),Z(IC,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[rJ],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[rJ],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[rJ],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Dt)}],null),function(e){return M(e)&&N(e,Dt)},I,new Q(null,1,5,R,[rJ],null),null,new Q(null,1,5,R,[Dt],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt))],null),null]))],null),null)),Z(fu,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[rJ],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[rJ],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[rJ],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Dt)}],null),function(e){return M(e)&&N(e,Dt)},I,new Q(null,1,5,R,[rJ],null),null,new Q(null,1,5,R,[Dt],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt))],null),null]))],null),null)),Z(Sp,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[rJ],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[rJ],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[rJ],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Dt)}],null),function(e){return M(e)&&N(e,Dt)},I,new Q(null,1,5,R,[rJ],null),null,new Q(null,1,5,R,[Dt],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt))],null),null]))],null),null)),Z(rF,Bo,Vc),Z(ww,Bo,Vc),Z(bE,JA,JA),yT.v(null,PB,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[bE,yt,wx],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[bE,yt,wx],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,CE)},function(e){return N(e,Dt)},function(e){return N(e,oo)}],null),function(e){return M(e)&&N(e,CE)&&N(e,Dt)&&N(e,oo)},I,new Q(null,3,5,R,[bE,yt,wx],null),null,new Q(null,3,5,R,[CE,Dt,oo],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,CE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,oo))],null),null]))],null),null)})),yT.v(null,pJ,(function(){return cT(new Q(null,2,5,R,[kG,cr],null),new Q(null,2,5,R,[kG,cr],null),null)})),yT.v(null,du,(function(){return cT(new Q(null,2,5,R,[tv,O(wt,ir,new Q(null,1,5,R,[yt],null))],null),new Q(null,2,5,R,[tv,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[yt],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Dt)}],null),function(e){return M(e)&&N(e,Dt)},I,new Q(null,1,5,R,[yt],null),null,new Q(null,1,5,R,[Dt],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt))],null),null]))],null),null)})),Z(qH,JA,JA),Z(yt,Bp,Bp),yT.v(null,on,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[qH,yt,Xy],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[qH,yt,Xy],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,Vp)},function(e){return N(e,Dt)},function(e){return N(e,yw)}],null),function(e){return M(e)&&N(e,Vp)&&N(e,Dt)&&N(e,yw)},I,new Q(null,3,5,R,[qH,yt,Xy],null),null,new Q(null,3,5,R,[Vp,Dt,yw],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Vp)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yw))],null),null]))],null),null)})),yT.v(null,ly,(function(){return cT(new Q(null,2,5,R,[tv,O(wt,ir,new Q(null,2,5,R,[yt,LI],null))],null),new Q(null,2,5,R,[tv,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[yt,LI],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,Dt)},function(e){return N(e,yn)}],null),function(e){return M(e)&&N(e,Dt)&&N(e,yn)},I,new Q(null,2,5,R,[yt,LI],null),null,new Q(null,2,5,R,[Dt,yn],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yn))],null),null]))],null),null)})),yT.v(null,KE,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[yt,rF,ww],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[yt,rF,ww],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,Dt)},function(e){return N(e,uE)},function(e){return N(e,kJ)}],null),function(e){return M(e)&&N(e,Dt)&&N(e,uE)&&N(e,kJ)},I,new Q(null,3,5,R,[yt,rF,ww],null),null,new Q(null,3,5,R,[Dt,uE,kJ],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,uE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,kJ))],null),null]))],null),null)})),yT.v(null,Pu,(function(){return cT(new Q(null,2,5,R,[kG,JB],null),new Q(null,2,5,R,[kG,JB],null),null)})),yT.v(null,Tt,(function(){return cT(new Q(null,2,5,R,[kG,Sp],null),new Q(null,2,5,R,[kG,Sp],null),null)})),yT.v(null,Qw,(function(){return cT(new Q(null,2,5,R,[kG,IC],null),new Q(null,2,5,R,[kG,IC],null),null)})),yT.v(null,bx,(function(){return cT(new Q(null,2,5,R,[kG,fu],null),new Q(null,2,5,R,[kG,fu],null),null)}));var n3=function e(n){switch(arguments.length){case 3:return e.c(arguments[0],arguments[1],arguments[2]);case 4:return e.A(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",q.a(arguments.length)].join(""))}};function o3(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;x.b(r,is);var o=x.b(r,ow),i=x.b(r,yw);try{var l=KT(n,o),a=Z1(n,i,l);return p(a)?n3.A(e,n,o,a):(AY(VH,pa,508,new xl((function(){return new Q(null,2,5,R,["unable to find remote context",i],null)})),1349283870),new Q(null,2,5,R,[n,null],null))}catch(s){var u=s;return AY(VH,pa,512,new xl((function(){return new Q(null,3,5,R,[u,"unable to process remote unsubscribe",t],null)})),82328913),new Q(null,2,5,R,[n,null],null)}}function p3(e,n,t,r){if(zL(t)){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,is),l=x.b(o,ow);o=x.b(o,Dt);try{KT(n,l);var a=$1(n,o),u=n3.A(e,n,l,a),s=J(u,0,null),c=J(u,1,null),d=new Q(null,2,5,R,[null,new Q(null,2,5,R,[yL.A(e,t,i,l),vL(q0(dL(Mx.a(n)),l),K.g(r,U,bx,G([yw,yw.a(a)])))],null)],null),f=J(d,0,null),_=J(d,1,null),g=new Q(null,2,5,R,[p(f)?f:s,$f(_)||Vf(_)?gd.c(Mh(Cf,I),c,_):null!=_?Mh(Cf,I)(c,_):c],null)}catch(m){g=new Q(null,2,5,R,[n,new Q(null,1,5,R,[xL.K(e,t,i,l,jL(m,P2(e)))],null)],null)}}else g=o3(e,n,r);return g}function q3(e,t,r){var o=lz.a(r),i=qJ.a(r);return Wh.b((function(t){var r=oA.a(t),l=qJ.a(t);return t=yw.a(t),uL(o,new n(null,6,[tq,e,U,on,ow,i,Vp,r,Dt,l,yw,t],null))}),fi.b(Jh(U2,r),Y1(t)))}function r3(e,n){return p(e=JT.b(e,ow.a(Xv.a(n))))?Tc(pu.a(eI.a(e))):null}n3.c=function(e,n,t){var r=qJ.a(t),o=Jh(n3,e);return gd.c((function(e,n){var t=J(e,0,null);e=J(e,1,null);var i=o(t,r,n);return n=J(i,0,null),i=J(i,1,null),new Q(null,2,5,R,[p(n)?n:t,$f(i)||Vf(i)?gd.c(Mh(Cf,I),e,i):null!=i?Mh(Cf,I)(e,i):e],null)}),new Q(null,2,5,R,[n,I],null),Y1(n))},n3.A=function(e,n,t,r){if(N(tD.a(r),t)){var o=qi(r,tD,Of,t);t=A.b(t,oA.a(o))?Hf.b(o,oA):o,n=J(r=new Q(null,2,5,R,[ni(n,new Q(null,2,5,R,[ao,qJ.a(r)],null),t),t],null),0,null),r=J(r,1,null);e:switch(t=Zz.a(r),t instanceof z?t.da:null){case"ownership":t=null==oA.a(r);break e;case"ref-counted":t=Pf(tD.a(r));break e;default:t=!1}return p(t)?k3(e,n,r,O2(e)):new Q(null,2,5,R,[n,null],null)}return new Q(null,2,5,R,[n,null],null)},n3.F=4;var s3=Jh($2,"activity");function t3(e,n){var t=sL(e,is.a(n));e=J(t,0,null);var r=J(t,1,null);if(!p(r))return null;switch((t=U.a(r))instanceof z?t.da:null){case"activity":return p(n=Tr.a(r))?E2(e,n):null;case"create-peer":return V1(e,lL(n),gn.a(r));default:return AY(IA,za,35,new xl((function(){return new Q(null,2,5,R,["Unable to handle error for an unknown incoming request type",U.a(r)],null)})),223675566)}}var u3=Kh(ZT,"activity",by);function v3(e,n,t,r){var o=new Q(null,2,5,R,[e,null],null),i=function(){var e=J(o,0,null),r=J(o,1,null),i=mi.b(n,new Q(null,2,5,R,[by,eJ],null)),l=z1(e,i);if(p(l)){i=oA.a(l);var a=qJ.a(n),u=N(Us.a(l),a);l=u?qi(l,Us,Mh(Of,Dk),a):l,A.b(i,a)?a=H2(e,l,n,t,!u):(a=null!=(i=G2(e,l,n,t))&&(64&i.h||h===i.D)?fh(qk,i):i,i=x.b(a,Sz),a=x.b(a,eu),a=new Q(null,2,5,R,[i,a],null))}else a=null;return i=J(a,0,null),a=J(a,1,null),new Q(null,2,5,R,[p(i)?i:e,$f(a)||Vf(a)?gd.c(Mh(Cf,I),r,a):null!=a?Mh(Cf,I)(r,a):r],null)}(),l=function(){var e=J(i,0,null),t=J(i,1,null),r=nj(mi.b(n,new Q(null,2,5,R,[by,ZF],null))),o=p(r)?new Q(null,2,5,R,[y1(e,Wh.b(KH,r),qJ.a(n)),P1(e,n,Wh.b(qJ,r),!1)],null):null;return r=J(o,0,null),o=J(o,1,null),new Q(null,2,5,R,[p(r)?r:e,$f(o)||Vf(o)?gd.c(Mh(Cf,I),t,o):null!=o?Mh(Cf,I)(t,o):t],null)}();e=J(l,0,null),l=J(l,1,null);var a=u3(e,n,t,r);return r=J(a,0,null),a=J(a,1,null),new Q(null,2,5,R,[p(r)?r:e,$f(a)||Vf(a)?gd.c(Mh(Cf,I),l,a):null!=a?Mh(Cf,I)(l,a):l],null)}function w3(e,n){return n=QT(e,n,by),e=og(Wh.a(qJ),mg((function(e,n){return pL(e,n,by)}),lg),e,n),gd.c((function(e,n){var t=J(e,0,null);e=J(e,1,null);var r=v3(t,n,m1,!0);return n=J(r,0,null),r=J(r,1,null),new Q(null,2,5,R,[p(n)?n:t,$f(r)||Vf(r)?gd.c(Mh(Cf,I),e,r):null!=r?Mh(Cf,I)(e,r):e],null)}),new Q(null,2,5,R,[e,null],null),n)}var x3=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(za,"handle-request"),(function(e,n,t){return U.a(t)}),o,e,n,t,r)}();function y3(e){return pi(pi(e,uH,bL),aG,Jh(ki,bL))}function z3(e){return ki.b((function(e){return y3(yk(bL(e),new Q(null,4,5,R,[yw,uH,aG,Rz],null)))}),e)}function A3(){}function B3(e,n,t){return p(t=SC.a(t))?F(mi.b(e,new Q(null,2,5,R,[Av,p(n)?n:Qy],null)))>=t:null}function C3(e,n){return kg((function(e,t,r){return K.c(e,t,A.b("?",r)?n:r)}),S,e)}function D3(e,t,r){function o(e,n){return xL.K("global",t,l,a,iL(e,n))}var i=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,l=x.b(i,is),a=x.b(i,ow);i=x.b(i,zo);var u=pD.a(JT.b(e,a));if(p(u)){var s=tL(e,i);return p(s)?HT(s,e,new n(null,3,[Hv,Fs,lz,t,Xv,K.c(K.c(r,pD,u),U,xH)],null)):new Q(null,2,5,R,[e,new Q(null,1,5,R,[o("global.errors.invalid_domain",["Unable to join missing domain ",q.a(i)].join(""))],null)],null)}return new Q(null,2,5,R,[e,new Q(null,1,5,R,[o("global.errors.invalid_peer",["Unable to find peer with id ",q.a(a)].join(""))],null)],null)}function E3(e,n,t){return D3(e,n,t)}function G3(e,t,r,o,i){var l=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,a=x.b(l,is),u=x.b(l,Wv),s=x.b(l,hI),c=x.b(l,dt),d=x.b(l,Gu),f=x.b(l,eI);l=dJ.a(o);var _=J(e=sL(e,qJ.a(s)),0,null);J(e,1,null);var g=function(){var e=wk.g(G([new n(null,1,[cy,Z4(Rs.a(t),tn.a(i))],null),CZ(u),yk(r,new Q(null,2,5,R,[dt,Gs],null))]));if(p(hD.a(r))){var o=hD.a(r);e=p(o=dt.a(o))?K.c(e,dt,o):e}return e}(),m=p(jp.a(g))?new Q(null,2,5,R,[g,_],null):function(){var e=Mx.a(_),n=Qq.b(e,1),t=["i-",q.a($y.a(e)),"-",q.a(n)].join("");return e=J(n=new Q(null,2,5,R,[K.c(e,Qq,n+1),t],null),0,null),n=J(n,1,null),new Q(null,2,5,R,[K.c(g,jp,n),K.c(_,Mx,e)],null)}();e=J(m,0,null),m=J(m,1,null),f=K.c(f,pu,!0);try{p(mi.b(m,new Q(null,2,5,R,[vu,e],null)))&&kL("global.errors.already_seen","Hello already received once"),EZ(e),p(B3(m,c,l))&&kL("global.errors.limits_exceeded","Maximum number of peers per user have been reached");var w=gL(Mx.a(m)),v=J(w,0,null),b=J(w,1,null),y=C3(e,b),k=RT(K.c(m,Mx,v),t,b,y,s,f),C=J(k,0,null),E=J(k,1,null),S=b1(t,a,qJ.a(E),Wh.b(sD,nj(pz.a(C))),y,wk.g(G([function(){var e=sD.a(o);return p(e)?new n(null,1,[sD,e],null):null}(),p(d)?new n(null,1,[Gu,d],null):null])));p(null)&&BY(dF,"global/peer-count",F(Dn.a(C)));var D=new Q(null,2,5,R,[C,new Q(null,1,5,R,[S],null)],null),O=J(D,0,null),A=J(D,1,null),T=E3(O,t,new n(null,6,[is,a,ow,qJ.a(E),pD,y,eI,f,zo,"context",tq,"global"],null)),M=J(T,0,null),P=J(T,1,null);return new Q(null,2,5,R,[p(M)?M:O,$f(P)||Vf(P)?gd.c(Mh(Cf,I),A,P):null!=P?Mh(Cf,I)(A,P):A],null)}catch(j){return s=j,zL(t)?new Q(null,2,5,R,[m,new Q(null,1,5,R,[xL.K("global",t,a,null,jL(s,"global.errors.failure"))],null)],null):null}}function H3(e,t,r){AY(AG,Ia,229,new xl((function(){return new Q(null,1,5,R,["removing source from global domain"],null)})),1035225972);var o=mi.b(e,new Q(null,2,5,R,[Mx,$y],null));e=gd.c((function(e,i){var l=J(e,0,null);e=J(e,1,null);var a=new Q(null,2,5,R,[ST(l,i),null],null),u=J(a,0,null);return a=J(a,1,null),l=J(e=new Q(null,2,5,R,[p(u)?u:l,$f(a)||Vf(a)?gd.c(Mh(Cf,I),e,a):null!=a?Mh(Cf,I)(e,a):e],null),0,null),e=J(e,1,null),i=J(u=new Q(null,2,5,R,[null,zL(t)?vL(new n(null,3,[U,WI,Fp,qJ.a(i),Yp,o],null),r):null],null),0,null),u=J(u,1,null),new Q(null,2,5,R,[p(i)?i:l,$f(u)||Vf(u)?gd.c(Mh(Cf,I),e,u):null!=u?Mh(Cf,I)(e,u):e],null)}),new Q(null,2,5,R,[e,null],null),PT(e,t));var i=J(e,0,null);return J(e,1,null),AY(AG,Ia,242,new xl((function(){return new Q(null,1,5,R,["removed source from global domain"],null)})),321153352),p(null)&&BY(dF,"global/peer-count",F(Dn.a(i))),e}function I3(e,t,r,o,i){r=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r;var l=x.b(r,is),a=x.b(r,pD);r=hO(r=x.b(r,YB));var u=Kg.a(mI.b(r,em.a(o)));return p(o=mi.b(o,new Q(null,2,5,R,[rw,u],null)))?(mZ(nZ(mZ(rZ(o,new n(null,4,[is,l,Wv,a,YB,r,pn,pn.a(e)],null)),(function(e){return pi(e,U,(function(e){switch(e instanceof z?e.da:null){case"success":return AC;case"continue":return DE;default:return e}}))})),(function(e){return K.c(km(e),U,QE)})),(function(e){return QK(i,new n(null,3,[Hv,Fs,lz,t,Xv,K.g(e,is,l,G([Wv,a]))],null))})),new Q(null,2,5,R,[e,null],null)):new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.K("global",t,l,null,mL("global.errors.authentication.failure",["Requested authentication provider ",q.a(u)," is not available"].join("")))],null)],null)}x3.v(null,xH,(function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.b(r,is);var o=x.b(r,ow);if(r=x.b(r,os),p(qL(e,o,by)))n=new Q(null,2,5,R,[e,new Q(null,1,5,R,[v1(n,t,o)],null)],null);else{r=lS(r),r=oL(e,o,by,r),e=JT.b(r,o);e:{var i=dH.a(e);if(p(i)){var l=Vu.a(i),a=KH.a(i);switch(l=p(l)?K.c(e,Vu,l):e,a=p(a)?K.c(l,KH,a):l,l=(l=U.a(i))instanceof z?l.da:null){case"activity":var u=z1(r,l=mi.b(i,new Q(null,2,5,R,[Tr,qJ],null)));if(p(u)){var s=qJ.a(a),c=mi.b(i,new Q(null,2,5,R,[Tr,yy],null)),d=J1(r,ap.a(u));u=VK(u,new Q(null,1,5,R,[fs],null),G([s])),c=p(c)?K.c(u,oA,qJ.a(a)):u,r=K1(TT(A1(r,l,c=XK(c,new Q(null,1,5,R,[aC],null),qJ.a(i))),s,ni(ni(a,new Q(null,2,5,R,[by,eJ],null),l),new Q(null,2,5,R,[by,zE],null),zE.a(i))),d,s)}break e;case"create-peer":r=TT(r,qJ.a(a),a);break e;default:throw Error(["No matching clause: ",q.a(l)].join(""))}}}n=Cf.b(ji.b(ji.b(YT("activity",by,r,n,e),k2(r,e)),Q1.b(r,e)),v1(n,t,o)),n=new Q(null,2,5,R,[r,n],null)}return n})),x3.v(null,LF,(function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is);return e=J(t=v3(e,LT(e,r=x.b(r,ow),by),lL(t),!1),0,null),t=J(t,1,null),n=J(o=new Q(null,2,5,R,[null,v1(n,o,r)],null),0,null),o=J(o,1,null),new Q(null,2,5,R,[p(n)?n:e,$f(o)||Vf(o)?gd.c(Mh(Cf,I),t,o):null!=o?Mh(Cf,I)(t,o):t],null)})),x3.v(null,zl,(function(e,t,r){r=ow.a(r),r=JT.b(e,r);var o=mi.b(r,new Q(null,2,5,R,[by,eJ],null));if(p(o)){var i=qJ.a(r),l=z1(e,o);if(p(l)){var a=A.b(oA.a(l),i);t=a?l:qi(l,zG,Mh(Cf,Dk),i),t=XK(t,new Q(null,1,5,R,[fs],null),i),a?(i=ap.a(t),i=yn.a(J1(e,i)),a=qJ.a(r),l=mi.b(r,new Q(null,2,5,R,[by,zE],null)),t=Hf.b(K.g(t,oA,a,G([Io,!0])),gn),e=new n(null,3,[Sz,A1(TT(e,a,ni(r,new Q(null,2,5,R,[by,eJ],null),qJ.a(t))),qJ.a(t),t),Tr,t,eu,p(l)?ji.b(new Q(null,1,5,R,[t1(e,lz.a(r),r,t,i)],null),w2(e,t,r)):ji.b(r2(e,t,i),u2(e,t))],null)):e=z2(e,t,r),t=null!=e&&(64&e.h||h===e.D)?fh(qk,e):e,e=x.b(t,Sz),r=x.b(t,Tr),t=x.b(t,eu),e=new Q(null,2,5,R,[A1(e,o,r),t],null)}else e=new Q(null,2,5,R,[TT(e,i,A2(r)),new Q(null,1,5,R,[o1(t,i,null,n1)],null)],null)}else p(l=mi.b(r,new Q(null,2,5,R,[dH,gn],null)))?(o=ow.a(l),a=JT.b(e,o),i=t=R,a=lz.a(a),l=is.a(l),r=qJ.a(r),e=new Q(null,2,5,t,[e,new Q(null,1,5,i,[uL(a,new n(null,5,[tq,"activity",U,Aw,is,l,ow,o,gC,r],null))],null)],null)):e=kL("activity.errors.invalid_peer",["Unable to find originating request for a ready message from peer ",q.a(qJ.a(r))].join(""));return e})),x3.v(null,Ov,(function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.b(r,is);var o=x.b(r,ow);r=z3(r=x.b(r,$E));var i=LT(e,o,by),l=mi.b(i,new Q(null,2,5,R,[pD,dt],null));return p(l)?new Q(null,2,5,R,[C1(e,l,r),Cf.b(i2(e,l,r),v1(n,t,o))],null):new Q(null,2,5,R,[e,new Q(null,1,5,R,[w1(n,t,o,mL("activity.errors.registration.failure",["Registering peer is missing an user in its identity",q.a(pD.a(i))].join("")))],null)],null)})),x3.v(null,qD,(function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.b(r,is);var o=x.b(r,ow),i=x.b(r,$E),l=LT(e,o,by);return p(r=mi.b(l,new Q(null,2,5,R,[pD,dt],null)))?(i=Fk(i),i=Fk(fi.b(i,mj(B1(e,r)))),e=new Q(null,2,5,R,[D1(e,r,i),Cf.b(j2(e,r,i),v1(n,t,o))],null)):e=new Q(null,2,5,R,[e,new Q(null,1,5,R,[w1(n,t,o,mL("activity.errors.registration.failure",["Removing peer is missing an user in its identity",q.a(pD.a(l))].join("")))],null)],null),e})),x3.v(null,cv,(function(e,n,t){var r=Hf.b(t,PH);return p2(e,n,r=p(rx.a(t))?pi(r,rx,Ih.b(y3,bL)):r,Wh.b(bL,PH.a(t)))})),x3.v(null,RI,(function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is),i=x.b(r,ow),l=x.b(r,Zr);r=LT(e,i,by),l=H1(e,l);var a=qJ.a(r);return N(zG.a(l),a)||N(fs.a(l),a)||A.b(oA.a(l),a)?r=!0:(a=JT.b(e,oA.a(l)),r=VT.la(pD.a(a),Ys.a(l),!1,pD.a(r),null,!1)),p(r)?(e=J(t=D2(e,l,lL(t)),0,null),t=J(t,1,null),n=J(o=new Q(null,2,5,R,[null,v1(n,o,i)],null),0,null),o=J(o,1,null),n=new Q(null,2,5,R,[p(n)?n:e,$f(o)||Vf(o)?gd.c(Mh(Cf,I),t,o):null!=o?Mh(Cf,I)(t,o):t],null)):n=new Q(null,2,5,R,[e,w1(n,o,i,iL("activity.errors.not_authorized","Not authorized to destroy activity"))],null),n})),x3.v(null,Nu,(function(e,n,t){return J2(e,n,t)})),x3.v(null,hH,(function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.b(r,is);var o=x.b(r,ow);return r=x.b(r,lp),LT(e,o,by),I2(e,n,t,o,r,G1)})),x3.v(null,Yz,(function(e,t,r){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r;r=x.b(o,is);var i=x.b(o,ow),l=x.b(o,LB),a=x.b(o,Zr),u=x.b(o,KH),s=x.b(o,Vu);return LT(e,i,by),o=H1(e,a),l=wk.g(G([LT(e,l,by),ji.b(S,fi.b(zf,new n(null,2,[Vu,s,KH,u],null)))])),s=by.a(l),u=eJ.a(s),s=oA.a(s),u=z1(e,p(u)?u:s),A.b(qJ.a(u),a)?t=new Q(null,2,5,R,[e,new Q(null,1,5,R,[v1(t,r,i)],null)],null):p(u)?t=kL("activity.errors.activity_is_child",["Peer is already in activity ",q.a(qJ.a(u))].join("")):(a=qJ.a(o),u=qJ.a(l),s=null!=(e=z2(e,o,l))&&(64&e.h||h===e.D)?fh(qk,e):e,e=x.b(s,Sz),o=x.b(s,Tr),s=x.b(s,eu),l=null!=(e=new n(null,3,[Sz,TT(A1(e,a,o),u,ni(l,new Q(null,2,5,R,[by,eJ],null),a)),Tr,o,eu,s],null))&&(64&e.h||h===e.D)?fh(qk,e):e,e=x.b(l,Sz),l=x.b(l,eu),t=new Q(null,2,5,R,[e,Cf.b(l,v1(t,r,i))],null)),t})),x3.v(null,Du,(function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is),i=LT(e,r=x.b(r,ow),by),l=mi.b(i,new Q(null,2,5,R,[by,eJ],null));l=z1(e,l);var a=oA.a(l);return p(l)||kL("activity.errors.not_a_member","Not a member of an activity"),t=lL(t),A.b(a,r)?t=H2(e,l,i,t,!0):(t=null!=(e=G2(e,l,i,t))&&(64&e.h||h===e.D)?fh(qk,e):e,e=x.b(t,Sz),t=x.b(t,eu),t=new Q(null,2,5,R,[e,t],null)),e=J(t,0,null),t=J(t,1,null),n=J(o=new Q(null,2,5,R,[null,v1(n,o,r)],null),0,null),o=J(o,1,null),new Q(null,2,5,R,[p(n)?n:e,$f(o)||Vf(o)?gd.c(Mh(Cf,I),t,o):null!=o?Mh(Cf,I)(t,o):t],null)})),x3.v(null,Hs,(function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.b(r,is);var o=x.b(r,ow),i=x.b(r,ZF);r=LT(e,o,by);for(var l=B(i=Wh.b(hO,i)),a=null,u=0,s=0;;)if(s<u){R1(r,a.W(null,s)),s+=1}else{if(!(l=B(l)))break;Wf(a=l)?(l=re(a),s=se(a),a=l,u=F(l),l=s):(R1(r,l=C(a)),l=D(a),a=null,u=0),s=0}return e=N1(e,r,i),new Q(null,2,5,R,[e,Cf.b(O1(e,r,i),v1(n,t,o))],null)})),x3.v(null,Iv,(function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.b(r,is);var o=x.b(r,ow),i=x.b(r,ex),l=T1(r=LT(e,o,by),i);return i=J(l,0,null),l=J(l,1,null),e=y1(TT(e,o,i),Wh.b(KH,l),o),n=Cf.b(P1(e,r,ki.b(qJ,l),!0),v1(n,t,o)),new Q(null,2,5,R,[e,n],null)})),x3.v(null,BB,(function(e,t,r){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,is),l=x.b(o,ow),a=x.b(o,mA),u=x.b(o,KH),s=x.b(o,Vu);o=x.b(o,Zr),LT(e,l,by),o=p(o)?H1(e,o):null,s=p(s)?s:u;var c=PH.a(r),d=W1(e,a,u);a=J(d,0,null),d=J(d,1,null);var f=KT(e,l),_=eL(Mx.a(e)),g=J(_,0,null);return _=J(_,1,null),r=yk(r,new Q(null,2,5,R,[is,ow],null)),u=new n(null,4,[U,BB,qJ,_,KH,u,gn,r],null),u=p(s)?K.c(u,Vu,s):u,r=r_(e,r=pD.a(f),u),u=rL(K.c(e,Mx,g),_,u),e=new n(null,3,[Sz,u,eu,new Q(null,1,5,R,[U1(a,d,c,r,_,o,J1(e,ap.a(o)),s)],null),WG,_],null),new Q(null,2,5,R,[Sz.a(e),Cf.b(eu.a(e),v1(t,i,l))],null)})),x3.v(null,cp,(function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;n=x.b(r,is);var o=x.b(r,ow);r=x.b(r,sG),LT(e,o,by);var i=KT(e,r);return new Q(null,2,5,R,[e,new Q(null,2,5,R,[o1(lz.a(i),r,o,lL(t)),v1(n,o)],null)],null)})),x3.v(null,IA,(function(e,n,t){return t3(e,t)})),x3.v(null,zE,(function(e,t,r){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r;r=x.b(o,is);var i=KT(e,o=x.b(o,ow)),l=mi.b(i,new Q(null,2,5,R,[by,eJ],null)),a=z1(e,l),u=eL(Mx.a(e)),s=J(u,0,null),c=J(u,1,null);return u=new n(null,5,[U,Tr,qJ,c,KH,KH.a(i),Tr,new n(null,2,[qJ,qJ.a(a),yy,A.b(qJ.a(i),oA.a(a))],null),zE,!0],null),u=p(Vu.a(i))?K.c(u,Vu,Vu.a(i)):u,c=rL(K.c(e,Mx,s),c,u),s=R,l=p(l)?A1(c,l,qi(a,Us,Mh(Cf,Dk),o)):c,a=R,e=r_(e,i=pD.a(i),u),new Q(null,2,5,s,[l,new Q(null,1,5,a,[uL(t,new n(null,5,[tq,"activity",U,$p,is,r,ow,o,$p,e],null))],null)],null)})),x3.v(null,pJ,(function(e,n,t){return s3(e,n,t)})),x3.v(null,Nz,(function(e,n){return w3(e,n)})),x3.v(null,em,(function(e,n,t){return AY(IA,za,246,new xl((function(){return new Q(null,2,5,R,["Unhandled message",t],null)})),271523315),new Q(null,2,5,R,[e,new Q(null,1,5,R,[w1(n,is.b(t,-1),ow.a(t),mL("activity.errors.unhandled_message",["Unhandled message ",q.a(t)].join("")))],null)],null)})),A3.prototype.Yc=function(){return new n(null,3,[$v,"activity",Rn,"",Ln,2],null)},A3.prototype.Zc=function(e,n){return n},A3.prototype.Wc=function(e,n){return n},A3.prototype.Xc=function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;e=x.b(r,lz),r=x.b(r,Xv),U.a(r);try{return x3.c(n,e,r)}catch(i){var o=i;return p(km(o))||AY(IA,za,270,new xl((function(){return new Q(null,3,5,R,[o,"Error handling request",t],null)})),2018153646),zL(e)?new Q(null,2,5,R,[n,new Q(null,1,5,R,[w1(e,is.a(r),ow.a(r),jL(o,"activity.errors.failure"))],null)],null):null}},Z(iB,O(W,new Q(null,1,5,R,[V],null),O(Fq,KI,O(fC,V))),(function(e){return QS(KI,hO(e))})),Z(ez,O(wt,ir,new Q(null,3,5,R,[GF,Wx,iB],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[GF,Wx,iB],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,is)},function(e){return N(e,pD)},function(e){return N(e,YB)}],null),function(e){return M(e)&&N(e,is)&&N(e,pD)&&N(e,YB)},I,new Q(null,3,5,R,[GF,Wx,iB],null),null,new Q(null,3,5,R,[is,pD,YB],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,is)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,pD)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,YB))],null),null]))),Z(Ut,GA,GA),Z(ju,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[Ut],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[Ut],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[Ut],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,zo)}],null),function(e){return M(e)&&N(e,zo)},I,new Q(null,1,5,R,[Ut],null),null,new Q(null,1,5,R,[zo],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,zo))],null),null]))],null),null)),Z(Zp,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[Ut],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[Ut],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[Ut],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,zo)}],null),function(e){return M(e)&&N(e,zo)},I,new Q(null,1,5,R,[Ut],null),null,new Q(null,1,5,R,[zo],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,zo))],null),null]))],null),null)),Z(rp,O(W,new Q(null,1,5,R,[V],null),O(Fq,bn,O(Xp,V))),(function(e){return QS(bn,Kg.a(e))})),Z(Iy,O(CJ,Bo),rT(Bo,Vc,null)),Z(Jo,O(CJ,Bo),rT(Bo,Vc,null)),Z(CF,O(xv,Wp,O(wt,ir,new Q(null,5,5,R,[Xy,LI,rp,Iy,Jo],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,5,5,R,[Xy,LI,rp,Iy,Jo],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,5,5,R,[Xy,LI,rp,Iy,Jo],null),null,null,new Q(null,6,5,R,[function(e){return M(e)},function(e){return N(e,yw)},function(e){return N(e,yn)},function(e){return N(e,Zz)},function(e){return N(e,gz)},function(e){return N(e,Ys)}],null),function(e){return M(e)&&N(e,yw)&&N(e,yn)&&N(e,Zz)&&N(e,gz)&&N(e,Ys)},I,new Q(null,5,5,R,[Xy,LI,rp,Iy,Jo],null),null,new Q(null,5,5,R,[yw,yn,Zz,gz,Ys],null),I,new Q(null,6,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yw)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yn)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Zz)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,gz)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Ys))],null),null]))],null),null)),Z(Xo,Bp,Bp),Z(DF,O(hq,Bo),eT(Uy,Vc,new n(null,4,[Zn,null,NC,function(e){return Qf(e)},sy,!0,NH,O(hq,Bo)],null),null)),Z(tx,Hq,M),Z(JE,Hq,M),Z(ys,Hq,M),Z(UF,O(wt,iA,new Q(null,4,5,R,[DF,tx,JE,ys],null)),US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[null,new Q(null,4,5,R,[DF,tx,JE,ys],null),null,new Q(null,1,5,R,[function(e){return M(e)}],null),function(e){return M(e)},new Q(null,4,5,R,[Hr,Qv,BA,vq],null),I,null,I,new Q(null,4,5,R,[DF,tx,JE,ys],null),new Q(null,1,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V))],null),null]))),Z(or,O(xv,Wp,O(wt,ir,new Q(null,2,5,R,[Xo,UF],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,2,5,R,[Xo,UF],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[Xo,UF],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,Dt)},function(e){return N(e,oo)}],null),function(e){return M(e)&&N(e,Dt)&&N(e,oo)},I,new Q(null,2,5,R,[Xo,UF],null),null,new Q(null,2,5,R,[Dt,oo],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,oo))],null),null]))],null),null)),Z(iu,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[Xo],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[Xo],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[Xo],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Dt)}],null),function(e){return M(e)&&N(e,Dt)},I,new Q(null,1,5,R,[Xo],null),null,new Q(null,1,5,R,[Dt],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt))],null),null]))],null),null)),Z(oJ,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[Xo],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[Xo],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[Xo],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Dt)}],null),function(e){return M(e)&&N(e,Dt)},I,new Q(null,1,5,R,[Xo],null),null,new Q(null,1,5,R,[Dt],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt))],null),null]))],null),null)),Z(qs,O(xv,Wp,O(wt,ir,new Q(null,1,5,R,[Xo],null))),cT(new Q(null,2,5,R,[Wp,O(wt,ir,new Q(null,1,5,R,[Xo],null))],null),new Q(null,2,5,R,[Wp,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[Xo],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Dt)}],null),function(e){return M(e)&&N(e,Dt)},I,new Q(null,1,5,R,[Xo],null),null,new Q(null,1,5,R,[Dt],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt))],null),null]))],null),null)),Z(sB,Bo,Vc),Z(qq,Bo,Vc),yT.v(null,BH,(function(){return cT(new Q(null,2,5,R,[kG,ez],null),new Q(null,2,5,R,[kG,ez],null),null)})),yT.v(null,ds,(function(){return cT(new Q(null,2,5,R,[kG,ju],null),new Q(null,2,5,R,[kG,ju],null),null)})),yT.v(null,bu,(function(){return cT(new Q(null,2,5,R,[kG,Zp],null),new Q(null,2,5,R,[kG,Zp],null),null)})),Z(kz,Wx,Wx),yT.v(null,AC,(function(){return US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,5,5,R,[oE,GF,kz,Xs,br],null),new Q(null,1,5,R,[gB],null),null,new Q(null,6,5,R,[function(e){return M(e)},function(e){return N(e,U)},function(e){return N(e,is)},function(e){return N(e,Wv)},function(e){return N(e,dt)},function(e){return N(e,Gs)}],null),function(e){return M(e)&&N(e,U)&&N(e,is)&&N(e,Wv)&&N(e,dt)&&N(e,Gs)},new Q(null,1,5,R,[Gu],null),new Q(null,5,5,R,[oE,GF,kz,Xs,br],null),null,new Q(null,5,5,R,[U,is,Wv,dt,Gs],null),new Q(null,1,5,R,[gB],null),new Q(null,6,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,U)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,is)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Wv)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,dt)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Gs))],null),null]))})),Z(Vw,O(hq,ay),eT(ay,ay,new n(null,4,[Zn,null,NC,function(e){return Qf(e)},sy,!0,NH,O(hq,ay)],null),null)),Z(uv,Wx,Wx),yT.v(null,Bv,(function(){return cT(new Q(null,2,5,R,[tv,O(wt,ir,new Q(null,2,5,R,[Vw,uv],null))],null),new Q(null,2,5,R,[tv,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[Vw,uv],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,Tn)},function(e){return N(e,ko)}],null),function(e){return M(e)&&N(e,Tn)&&N(e,ko)},I,new Q(null,2,5,R,[Vw,uv],null),null,new Q(null,2,5,R,[Tn,ko],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Tn)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,ko))],null),null]))],null),null)})),yT.v(null,du,(function(){return cT(new Q(null,2,5,R,[tv,O(wt,ir,new Q(null,1,5,R,[kC],null))],null),new Q(null,2,5,R,[tv,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,1,5,R,[kC],null),null,null,new Q(null,2,5,R,[function(e){return M(e)},function(e){return N(e,Dt)}],null),function(e){return M(e)&&N(e,Dt)},I,new Q(null,1,5,R,[kC],null),null,new Q(null,1,5,R,[Dt],null),I,new Q(null,2,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt))],null),null]))],null),null)})),Z($m,JA,JA),Z(kC,Bp,Bp),yT.v(null,on,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[$m,kC,Xy],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[$m,kC,Xy],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,Vp)},function(e){return N(e,Dt)},function(e){return N(e,yw)}],null),function(e){return M(e)&&N(e,Vp)&&N(e,Dt)&&N(e,yw)},I,new Q(null,3,5,R,[$m,kC,Xy],null),null,new Q(null,3,5,R,[Vp,Dt,yw],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Vp)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yw))],null),null]))],null),null)})),yT.v(null,ly,(function(){return cT(new Q(null,2,5,R,[tv,O(wt,ir,new Q(null,2,5,R,[kC,LI],null))],null),new Q(null,2,5,R,[tv,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,2,5,R,[kC,LI],null),null,null,new Q(null,3,5,R,[function(e){return M(e)},function(e){return N(e,Dt)},function(e){return N(e,yn)}],null),function(e){return M(e)&&N(e,Dt)&&N(e,yn)},I,new Q(null,2,5,R,[kC,LI],null),null,new Q(null,2,5,R,[Dt,yn],null),I,new Q(null,3,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,yn))],null),null]))],null),null)})),Z(Up,JA,JA),yT.v(null,PB,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[Up,kC,UF],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[Up,kC,UF],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,CE)},function(e){return N(e,Dt)},function(e){return N(e,oo)}],null),function(e){return M(e)&&N(e,CE)&&N(e,Dt)&&N(e,oo)},I,new Q(null,3,5,R,[Up,kC,UF],null),null,new Q(null,3,5,R,[CE,Dt,oo],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,CE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,oo))],null),null]))],null),null)})),yT.v(null,KE,(function(){return cT(new Q(null,2,5,R,[rs,O(wt,ir,new Q(null,3,5,R,[kC,sB,qq],null))],null),new Q(null,2,5,R,[rs,US(Xj([ir,iA,TE,Wt,ot,hx,CG,Lu,QI,JF,GE,jJ],[new Q(null,3,5,R,[kC,sB,qq],null),null,null,new Q(null,4,5,R,[function(e){return M(e)},function(e){return N(e,Dt)},function(e){return N(e,uE)},function(e){return N(e,kJ)}],null),function(e){return M(e)&&N(e,Dt)&&N(e,uE)&&N(e,kJ)},I,new Q(null,3,5,R,[kC,sB,qq],null),null,new Q(null,3,5,R,[Dt,uE,kJ],null),I,new Q(null,4,5,R,[O(W,new Q(null,1,5,R,[V],null),O(Hq,V)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,Dt)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,uE)),O(W,new Q(null,1,5,R,[V],null),O(jG,V,kJ))],null),null]))],null),null)}));var J3=Jh($2,"global"),K3=Jh(j3,"global"),L3=Jh(m3,"global"),M3=Jh(e3,"global"),N3=Jh(p3,"global"),O3=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(Ia,"handle-request"),(function(e,n,t){return U.a(t)}),o,e,n,t,r)}();function P3(e,n,t,r,o){var i=null!=o&&(64&o.h||h===o.D)?fh(qk,o):o,l=x.b(i,lz);i=x.b(i,Xv);try{return O3.la(r,l,i,e,n,t)}catch(u){if(u instanceof Error){var a=u;return p(km(a))||AY(IA,Ia,432,new xl((function(){return new Q(null,3,5,R,[a,"Error processing message",o],null)})),1026914181),new Q(null,2,5,R,[r,new Q(null,1,5,R,[xL.K("global",l,is.b(i,-1),ow.a(i),jL(a,"global.errors.failure"))],null)],null)}throw u}}function Q3(e){this.Pe=new n(null,1,[tn,"127.0.0.1"],null),this.Zf=e,this.configuration=null}function R3(e,n){return kg((function(e,t,r){return!Tc(b0(r,x.b(n,t)))||bf(!1)}),!0,e)}function S3(e,n,t){var r=gd.c((function(e,r){return p(R3(TF.a(r),n))?p(c0(mi.b(r,new Q(null,2,5,R,[Ym,Lz],null)),t))?bf(!1):p(e)?e:c0(mi.b(r,new Q(null,2,5,R,[Ym,ty],null)),t):e}),null,CH.a(e));if(null!=r)return r;switch((e=lH.a(e))instanceof z?e.da:null){case"whitelist":return!0;case"blacklist":return!1;default:return!0}}function T3(e){if(null!=e&&null!=e.Cg)e=e.Cg(e);else{var n=T3[db(null==e?null:e)];if(null!=n)e=n.a?n.a(e):n.call(null,e);else{if(null==(n=T3._))throw Zc("Repository.start!",e);e=n.a?n.a(e):n.call(null,e)}}return e}function U3(e){if(null!=e&&null!=e.Dg)e.Dg(e);else{var n=U3[db(null==e?null:e)];if(null!=n)n.a?n.a(e):n.call(null,e);else{if(null==(n=U3._))throw Zc("Repository.stop!",e);n.a?n.a(e):n.call(null,e)}}}function V3(e,n){if(null!=e&&null!=e.Ag)e=e.Ag(e,n);else{var t=V3[db(null==e?null:e)];if(null!=t)e=t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=V3._))throw Zc("Repository.add!",e);e=t.b?t.b(e,n):t.call(null,e,n)}}return e}function W3(e,n){if(null!=e&&null!=e.Bg)e.Bg(e,n);else{var t=W3[db(null==e?null:e)];if(null!=t)t.b?t.b(e,n):t.call(null,e,n);else{if(null==(t=W3._))throw Zc("Repository.publish!",e);t.b?t.b(e,n):t.call(null,e,n)}}}function X3(e,n){if(null!=e&&null!=e.Eg)e=e.Eg(e,n,null);else{var t=X3[db(null==e?null:e)];if(null!=t)e=t.c?t.c(e,n,null):t.call(null,e,n,null);else{if(null==(t=X3._))throw Zc("RepositoryFactory.repository",e);e=t.c?t.c(e,n,null):t.call(null,e,n,null)}}return e}O3.v(null,BH,(function(e,n,t,r){return I3(e,n,t,r,er.a(e))})),O3.v(null,ds,(function(e,t,r){if(zL(t))t=D3(e,t,r);else{var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,ow),l=x.b(o,zo);o=x.b(o,eI),p(l=tL(e,l))?(i=J(e=RT(e,t,i,pD.a(r),null,o),0,null),J(e,1,null),t=HT(l,i,new n(null,3,[Hv,Zv,lz,t,Xv,K.c(r,U,xH)],null))):t=null}return t})),O3.v(null,bu,(function(e,t,r){if(zL(t)){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(o,is),l=x.b(o,ow);if(o=x.b(o,zo),p(JT.b(e,l))){var a=tL(e,o);e=p(a)?HT(a,e,new n(null,3,[Hv,Fs,lz,t,Xv,K.c(r,U,LF)],null)):new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.K("global",t,i,l,mL("global.errors.invalid_domain",["Unable to leave missing domain ",q.a(o)].join("")))],null)],null)}else e=new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.K("global",t,i,l,mL("global.errors.invalid_peer",["Unable to find peer with id ",q.a(l)].join("")))],null)],null)}else l=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,i=x.b(l,ow),l=x.b(l,zo),p(JT.b(e,i))?e=p(i=tL(e,l))?HT(i,e,new n(null,3,[Hv,Fs,lz,t,Xv,K.c(r,U,LF)],null)):null:e=null;return e})),O3.v(null,AC,(function(e,n,t,r,o,i){return G3(e,n,t,o,i)})),O3.v(null,QE,(function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;return t=x.b(r,sr),r=x.b(r,is),new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.K("global",n,r,null,iL("global.errors.authentication.failure",t))],null)],null)})),O3.v(null,DE,(function(e,t,r){var o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r;return r=x.b(o,is),o=x.b(o,YB),new Q(null,2,5,R,[e,new Q(null,1,5,R,[uL(t,new n(null,4,[tq,"global",U,PC,is,r,YB,o],null))],null)],null)})),O3.v(null,Pu,(function(e,n,t){return K3(e,n,t)})),O3.v(null,pJ,(function(e,n,t){return J3(e,n,t)})),O3.v(null,Qw,(function(e,n,t){return M3(e,n,t)})),O3.v(null,bx,(function(e,n,t){return N3(e,n,t)})),O3.v(null,Tt,(function(e,n,t){return L3(e,n,t)})),O3.v(null,cJ,(function(e){return new Q(null,1,5,R,[e],null)})),O3.v(null,Nz,(function(e,n,t){return H3(e,n,t)})),O3.v(null,to,(function(e,t,r,o,i){o=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,r=x.b(o,is);var l=KT(e,o=x.b(o,ow)),a=R,u=R;e:{var s=q_;i=1e3*mi.c(i,new Q(null,2,5,R,[YB,ew],null),0),q_=0<i?i:q_;try{var c=pD.a(l),d=TK()+q_,f=new n(null,2,[U,YB,dt,dt.a(c)],null),_=p(d)?K.c(f,bD,d):f,g=p_(_,pn.a(e));break e}finally{q_=s}g=void 0}return new Q(null,2,5,a,[e,new Q(null,1,5,u,[uL(t,new n(null,5,[tq,"global",U,$p,is,r,ow,o,$p,g],null))],null)],null)})),O3.v(null,em,(function(e,n,t){return AY(IA,Ia,416,new xl((function(){return new Q(null,2,5,R,["Unhandled message",t],null)})),-1372641111),new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.K("global",n,is.b(t,-1),ow.a(t),mL("global.errors.unhandled_message",["Unhandled message ",q.a(t)].join("")))],null)],null)})),Q3.prototype.Yc=function(){return new n(null,3,[$v,"global",Rn,"",Ln,1],null)},Q3.prototype.Zc=function(e,n){return n},Q3.prototype.Wc=function(e,n){return n},Q3.prototype.Xc=function(e,n,t){return P3(this.Zf,this.configuration,this.Pe,n,t)};var Y3=new Bk(null,new n(null,3,[lJ,null,Zq,null,jp,null],null),null);function Z3(e){var n=Eh((function(n){return!N(e,n)&&n}),Y3);p(n)&&kL("metrics.errors.bad_identity",["Repository is missing required ",q.a(n)," property"].join(""))}function $3(e,t,r){var o=cy.a(r);return p(o)?t=o:t=p(t=Z4(Rs.a(t),tn.a(e)))?t:"127.0.0.1",new n(null,6,[cy,t,Sn,Sn.a(e),No,(new Date).getTime(),Vz,Vz.a(e),Zq,Zq.a(r),lJ,Mr.a(r)],null)}function a4(e,n){var t=qJ.a(n);if(B(n=mi.b(n,new Q(null,2,5,R,[nE,vz],null)))){AY(sD,Na,72,new xl((function(){return new Q(null,2,5,R,["stopping metrics publishing for peer",t],null)})),-295205215),n=B(n);for(var r=null,o=0,i=0;;)if(i<o){U3(r.W(null,i)),i+=1}else{if(!(n=B(n)))break;Wf(r=n)?(n=re(r),i=se(r),r=n,o=F(n),n=i):(U3(n=C(r)),n=D(r),r=null,o=0),i=0}}return pL(e,t,nE)}function b4(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is);return e=a4(e,KT(e,r=x.b(r,ow)),lL(t)),new Q(null,2,5,R,[e,new Q(null,1,5,R,[yL.A("metrics",n,o,r)],null)],null)}function c4(e){return kg((function(e,n,t){return K.c(e,n,d4.a?d4.a(t):d4.call(null,t))}),S,e)}function d4(e){return kg((function(e,n,t){return n=Kg.a(n),K.c(e,n,A.b(n,Mt)?c4(t):t)}),S,e)}function e4(e,n,t){var r=mi.b(t,new Q(null,2,5,R,[nE,vz],null));if(p(r))return new Q(null,2,5,R,[e,r],null);r=qJ.a(t);var o=mi.b(t,new Q(null,2,5,R,[nE,jB],null));return n=Vk(Wh.b((function(e){return T3(X3(e,o))}),n)),new Q(null,2,5,R,[ni(e,new Q(null,4,5,R,[Dn,r,nE,vz],null),n),n],null)}function f4(e,n,t,r){var o=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n;n=x.b(o,ow),o=x.b(o,Ym);var i=KT(e,n),l=mi.b(i,new Q(null,2,5,R,[nE,jB],null)),a=fi.b((function(e){return S3(r,l,yw.a(e))}),Wh.b(d4,o));return B(a)?(AY(AG,Na,130,new xl((function(){return new Q(null,4,5,R,["publisher",l,"adding metrics",Wh.b(yw,a)],null)})),72937979),e=J(t=e4(e,t,i),0,null),B(t=J(t,1,null))?new Q(null,2,5,R,[ni(e,new Q(null,4,5,R,[Dn,n,nE,vz],null),Vk(Wh.b((function(e){return V3(e,a)}),t))),null],null):null):null}function g4(e,n,t){var r=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n;n=x.b(r,ow),r=x.b(r,nA),n=KT(e,n);var o=mi.b(n,new Q(null,2,5,R,[nE,jB],null));if(!B(e=fi.b((function(e){return S3(t,o,yw.a(e))}),Wh.b(bL,r))))return null;if(!p(n=mi.b(n,new Q(null,2,5,R,[nE,vz],null))))return null;n=B(n),r=null;for(var i=0,l=0;;)if(l<i){var a=r.W(null,l);W3(a,e),l+=1}else{if(!(n=B(n)))return null;Wf(r=n)?(n=re(r),i=se(r),r=n,a=F(n),n=i,i=a):(W3(a=C(r),e),n=D(r),r=null,i=0),l=0}}function h4(e,n){return AY(AG,Na,154,new xl((function(){return new Q(null,2,5,R,["removing source",n],null)})),405066030),e=gd.c((function(e,n){return a4(e,n)}),e,QT(e,n,nE)),new Q(null,2,5,R,[e,null],null)}var i4=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(Na,"handle-request"),function(){function e(e,n,t,r){if(3<arguments.length)for(var o=0,i=Array(arguments.length-3);o<i.length;)i[o]=arguments[o+3],++o;return U.a(t)}return e.F=3,e.G=function(e){C(e),C(e=D(e));var n=C(e=D(e));return Re(e),U.a(n)},e.g=function(e,n,t){return U.a(t)},e}(),o,e,n,t,r)}();function j4(e){this.Pe=e,this.filters=this.Ah=null}function k4(){var e=l4;return AY(AG,Na,228,new xl((function(){return new Q(null,2,5,R,["initializing metrics domain with filters",null],null)})),895504579),new j4(e)}function m4(e,n){return AY(AG,Ga,53,new xl((function(){return new Q(null,2,5,R,["removing source",n],null)})),1712681111),e=gd.c((function(e,n){return pL(e,Fp.a(n),Gq)}),e,QT(e,n,Gq)),new Q(null,2,5,R,[e,null],null)}function n4(e){return ei((function(e){var t=J(e,0,null);return e=J(e,1,null),Wh.c((function(e,t){return new n(null,2,[WI,e,gJ,t],null)}),new $h(null,-1,t,null),e)}),G([Wh.b((function(e){return new Q(null,2,5,R,[e,mi.b(e,new Q(null,2,5,R,[Gq,qy],null))],null)}),e)]))}function o4(e,n,t){J(t,0,null);var r=null!=(t=J(t,1,null))&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,Zo);return e=p(r=x.b(r,mF))?Wk(r,e):A.b(o,e),p(e)?n=Tc(e=MH.a(t))||Tc(n)||A.b(e,n):n=e,n}function p4(e,n){var t=pD.a(n);return kg((function(e,n,r){return!!A.b(x.b(t,n),r)||bf(!1)}),!0,e)}function q4(e,r,o){var i=yn.a(r);if(p(i)){var l=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,a=x.b(l,Zo),u=x.b(l,zH),s=x.b(l,ow);l=x.b(l,wC);var c=Kh(o4,a,u);a=Jh(p4,CZ(l));var d=pD.a(o),f=new Uh(Dk);return o=gd.c((function(o,l){l=null!=l&&(64&l.h||h===l.D)?fh(qk,l):l;var a=x.b(l,WI),u=x.b(l,gJ);return l=lz.a(a),a=qJ.a(a),zL(l)?(u=C(u),l=uL(l,new n(null,6,[tq,"bus",U,OA,ow,a,fA,u,EB,d,yn,i],null))):A.b(s,a)?l=null:(l=Yp.a(l),N(t(f),l)?l=null:(f.Cc(null,Cf.b(f.zb(null),l)),l=wL(q0(dL(Mx.a(e)),s),new n(null,2,[U,Yp,Yp,l],null),r))),p(l)?Cf.b(o,l):o}),I,fi.b((function(e){return c(gJ.a(e))}),n4(fi.b(a,XT(e,Gq,o,!0))))),new Q(null,2,5,R,[e,o],null)}return null}function r4(e,t,r,o){var i=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,l=x.b(i,Zo),a=x.b(i,zH),u=x.b(i,is);i=x.b(i,ow);var s=lz.a(o),c=new Q(null,3,5,R,[Gq,qy,r],null);return a=new n(null,2,[Zo,l,MH,a],null),l=-1!=l.indexOf(">")||-1!=l.indexOf("*")?K.c(a,mF,Zk(RL(RL(RL(l,".","\\."),"*","[a-zA-Z_0-9]+"),">",".*"))):a,o=ni(o,c,l),new Q(null,2,5,R,[TT(e,i,o),zL(s)?new Q(null,2,5,R,[uL(s,new n(null,5,[tq,"bus",U,Gz,is,u,ow,i,fA,r],null)),vL(q0(dL(Mx.a(e)),i),K.c(t,fA,r))],null):null],null)}function s4(e,n,t){var r=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,o=x.b(r,is),i=x.b(r,ow),l=x.b(r,fA);return r=lz.a(t),t=oi.A(t,new Q(null,2,5,R,[Gq,qy],null),Hf,l),new Q(null,2,5,R,[TT(e,i,t),zL(r)?new Q(null,2,5,R,[yL.A("bus",r,o,i),vL(q0(dL(Mx.a(e)),i),n)],null):null],null)}i4.v(null,xH,function(){function e(e,t,r,o){var i=null;if(3<arguments.length){i=0;for(var l=Array(arguments.length-3);i<l.length;)l[i]=arguments[i+3],++i;i=new Qe(l,0,null)}return n.call(this,e,t,r,i)}function n(e,n,t,r){r=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r;var o=x.b(r,uI),i=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.b(i,is),r=x.b(i,ow);var l=x.b(i,pD);return i=x.b(i,eI),o=wk.g(G([$3(o,n,l),bL(i),bL(l)])),p(qL(e,r,nE))||(Z3(o),e=ni(oL(e,r,nE,null),new Q(null,4,5,R,[Dn,r,nE,jB],null),o)),n=new Q(null,2,5,R,[e,new Q(null,1,5,R,[yL.A("metrics",n,t,r)],null)],null)}return e.F=3,e.G=function(e){return n(C(e),C(e=D(e)),C(e=D(e)),e=Re(e))},e.g=n,e}()),i4.v(null,LF,function(){function e(e,n,t,r){if(3<arguments.length)for(var o=0,i=Array(arguments.length-3);o<i.length;)i[o]=arguments[o+3],++o;return b4(e,n,t)}return e.F=3,e.G=function(e){var n=C(e),t=C(e=D(e)),r=C(e=D(e));return Re(e),b4(n,t,r)},e.g=function(e,n,t){return b4(e,n,t)},e}()),i4.v(null,Nz,function(){function e(e,n,t,r){if(3<arguments.length)for(var o=0,i=Array(arguments.length-3);o<i.length;)i[o]=arguments[o+3],++o;return h4(e,n)}return e.F=3,e.G=function(e){var n=C(e),t=C(e=D(e));return C(e=D(e)),Re(e),h4(n,t)},e.g=function(e,n){return h4(e,n)},e}()),i4.v(null,rE,function(){function e(e,t,r,o){var i=null;if(3<arguments.length){i=0;for(var l=Array(arguments.length-3);i<l.length;)l[i]=arguments[i+3],++i;i=new Qe(l,0,null)}return n.call(this,e,t,r,i)}function n(e,n,t,r){return r=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,f4(e,t,x.b(r,kn),r=x.b(r,nr))}return e.F=3,e.G=function(e){var t=C(e);C(e=D(e));return n(t,0,C(e=D(e)),e=Re(e))},e.g=n,e}()),i4.v(null,wG,function(){function e(e,t,r,o){var i=null;if(3<arguments.length){i=0;for(var l=Array(arguments.length-3);i<l.length;)l[i]=arguments[i+3],++i;i=new Qe(l,0,null)}return n.call(this,e,t,r,i)}function n(e,n,t,r){return n=null!=r&&(64&r.h||h===r.D)?fh(qk,r):r,g4(e,t,n=x.b(n,nr))}return e.F=3,e.G=function(e){return n(C(e),C(e=D(e)),C(e=D(e)),e=Re(e))},e.g=n,e}()),i4.v(null,em,function(){function e(e,t,r,o){var i=null;if(3<arguments.length){i=0;for(var l=Array(arguments.length-3);i<l.length;)l[i]=arguments[i+3],++i;i=new Qe(l,0,null)}return n.call(this,e,t,r,i)}function n(e,n,t){return AY(IA,Na,185,new xl((function(){return new Q(null,2,5,R,["Unhandled message",t],null)})),-1669920594),new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.K("metrics",n,is.b(t,-1),ow.a(t),mL("metrics.errors.unhandled_message",["Unhandled message ",q.a(t)].join("")))],null)],null)}return e.F=3,e.G=function(e){var t=C(e),r=C(e=D(e)),o=C(e=D(e));return e=Re(e),n(t,r,o)},e.g=n,e}()),j4.prototype.Yc=function(){return new n(null,3,[$v,"metrics",Rn,"",Ln,1],null)},j4.prototype.Zc=function(e,n){return n},j4.prototype.Wc=function(e,n){return gd.c((function(e,n){return a4(e,n)}),n,NT(n,nE))},j4.prototype.Xc=function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;e=x.b(r,lz),r=x.b(r,Xv);try{return i4.Xa(n,e,r,uI,this.Pe,kn,this.Ah,nr,this.filters)}catch(i){var o=i;return p(km(o))||AY(IA,Na,218,new xl((function(){return new Q(null,3,5,R,[o,"Error processing message",t],null)})),971732128),new Q(null,2,5,R,[n,new Q(null,1,5,R,[xL.K("metrics",e,is.a(r),ow.a(r),jL(o,"metrics.errors.failure"))],null)],null)}};var t4=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(Ga,"handle-request"),(function(e,n,t){return U.a(t)}),o,e,n,t,r)}();function u4(){}t4.v(null,xH,(function(e,n,t){if(zL(n)){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is),i=x.b(r,ow);if(x.b(r,pD),r=x.b(r,os),p(qL(e,i,Gq)))e=new Q(null,2,5,R,[e,new Q(null,1,5,R,[yL.A("bus",n,o,i)],null)],null);else{r=oL(e,i,Gq,lS(r));var l=JT.b(r,i),a=R,u=R;n=yL.A("bus",n,o,i),e=q0(dL(Mx.a(e)),i),t=K.c(t,U,ds),e=new Q(null,2,5,a,[r,new Q(null,2,5,u,[n,vL(e,t=p(eI.a(l))?K.c(t,eI,eI.a(l)):t)],null)],null)}}else r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,t=x.b(r,ow),r=x.b(r,os),e=p(qL(e,t,Gq))?null:new Q(null,2,5,R,[oL(e,t,Gq,lS(r)),null],null);return e})),t4.v(null,LF,(function(e,n,t){if(zL(n)){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is),i=pL(e,r=x.b(r,ow),Gq);e=new Q(null,2,5,R,[i,new Q(null,2,5,R,[yL.A("bus",n,o,r),vL(q0(dL(Mx.a(e)),r),K.c(t,U,bu))],null)],null)}else n=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,n=x.b(n,ow),e=p(t=JT.b(e,n))?new Q(null,2,5,R,[pL(e,n,Gq),null],null):null;return e})),t4.v(null,wG,(function(e,n,t){return zL(n)?e=p(n=KT(e,n=ow.a(t)))?q4(e,t,n):null:(n=ow.a(t),e=p(n=JT.b(e,n))?q4(e,t,n):null),e})),t4.v(null,Nu,(function(e,n,t){if(zL(n)){var r=eL(Mx.a(e));n=J(r,0,null),r=J(r,1,null);var o=ow.a(t);o=LT(e,o,Gq),e=r4(K.c(e,Mx,n),t,r,o)}else r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,n=x.b(r,fA),r=x.b(r,ow),e=p(r=JT.c(e,r,Gq))?r4(e,t,n,r):null;return e})),t4.v(null,hH,(function(e,n,t){return zL(n)?e=s4(e,t,n=LT(e,ow.a(t),Gq)):e=p(n=JT.b(e,ow.a(t)))?s4(e,t,n):null,e})),t4.v(null,Nz,(function(e,n){return m4(e,n)})),t4.v(null,em,(function(e,n,t){return AY(IA,Ga,306,new xl((function(){return new Q(null,2,5,R,["Unhandled message",t],null)})),1841638886),new Q(null,2,5,R,[e,new Q(null,1,5,R,[xL.K("bus",n,is.b(t,-1),ow.a(t),mL("bus.errors.unhandled_message",["Unhandled message ",q.a(t)].join("")))],null)],null)})),u4.prototype.Yc=function(){return new n(null,3,[$v,"bus",Rn,"",Ln,1],null)},u4.prototype.Zc=function(e,n){return n},u4.prototype.Wc=function(e,n){return n},u4.prototype.Xc=function(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;e=x.b(r,lz),r=x.b(r,Xv);try{return t4.c(n,e,r)}catch(i){var o=i;return p(km(o))||AY(IA,Ga,342,new xl((function(){return new Q(null,3,5,R,[o,"Error processing message",t],null)})),-2096053543),new Q(null,2,5,R,[n,new Q(null,1,5,R,[xL.K("bus",e,is.a(r),ow.a(r),jL(o,"bus.errors.failure"))],null)],null)}},O2("context");var v4=iL("context.peer-removed","Peer has been removed"),w4=Jh(yL,"context"),x4=Jh(xL,"context"),y4=Jh($2,"context"),z4=Jh(j3,"context"),A4=Jh(m3,"context"),B4=Jh(e3,"context"),C4=Jh(p3,"context"),D4=Jh((function(e,n,t,r,o){var i=Jh(n3,e);return e=J(n=ZT(e,ct,n,t,r,o),0,null),n=J(n,1,null),n=fi.b(Jh(r3,e),n),e=J(n=new Q(null,2,5,R,[e,n],null),0,null),n=J(n,1,null),t=J(i=i(e,t),0,null),i=J(i,1,null),new Q(null,2,5,R,[p(t)?t:e,$f(i)||Vf(i)?gd.c(Mh(Cf,I),n,i):null!=i?Mh(Cf,I)(n,i):n],null)}),"context");function E4(e,n,t,r){var o=LT(e,t,ct),i=function(){var i=fi.b(Jh(r3,e),YT("context",ct,e,n,o));return p(r)?gi.b((function(e){return A.b(t,dB.a(Xv.a(e)))}),i):i}();return Ni(Xg.b(i,Tc(r)?q3(W2(o),e,o):Se))}function F4(e,n,t,r,o){var i=lS(r);return r=function(){var n=oL(e,t,ct,i);return p(o)?UT(n,t,(function(e){return UK(e,new Q(null,2,5,R,[eI,pu],null))})):n}(),new Q(null,2,5,R,[r,E4(r,n,t,o)],null)}function G4(e,n,t){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is),i=x.b(r,ow);x.b(r,pD),r=x.b(r,os);var l=mi.b(t,new Q(null,2,5,R,[eI,pu],null)),a=function(){var n=JT.b(e,i);return null==(n=null==n?null:eI.a(n))?null:pu.a(n)}(),u=qL(e,i,ct);if(p(p(u)?Tc(a):u))return new Q(null,2,5,R,[e,new Q(null,1,5,R,[w4(n,o,i)],null)],null);a=J(r=F4(e,n,i,r,p(u)?a:u),0,null);var s=J(r,1,null),c=JT.b(a,i);return new Q(null,2,5,R,[a,function(){var r=Cf.b(s,vL(q0(dL(Mx.a(e)),i),function(){var e=K.c(t,U,ds);return p(eI.a(c))?K.c(e,eI,eI.a(c)):e}()));return Tc(l)?Cf.b(r,w4(n,o,i)):r}()],null)}function H4(e,t){AY(AG,Ha,124,new xl((function(){return new Q(null,1,5,R,["removing source from the context domain"],null)})),649478531),t=Ch(QT(e,t,ct)),e=og(Wh.a(qJ),mg((function(e,n){return pL(e,n,ct)}),lg),e,t);var r=new n(null,6,[is,null,tq,"global",U,bu,zo,"context",uE,v4.uri,kJ,v4.message],null);return e=gd.c((function(e,n){var t=J(e,0,null);e=J(e,1,null);var o=D4(t,n,v4,!0),i=J(o,0,null);return o=J(o,1,null),t=J(e=new Q(null,2,5,R,[p(i)?i:t,$f(o)||Vf(o)?gd.c(Mh(Cf,I),e,o):null!=o?Mh(Cf,I)(e,o):e],null),0,null),e=J(e,1,null),n=J(i=new Q(null,2,5,R,[t,vL(q0(dL(Mx.a(t)),qJ.a(n)),K.c(r,ow,qJ.a(n)))],null),0,null),i=J(i,1,null),new Q(null,2,5,R,[p(n)?n:t,$f(i)||Vf(i)?gd.c(Mh(Cf,I),e,i):null!=i?Mh(Cf,I)(e,i):e],null)}),new Q(null,2,5,R,[e,null],null),t),AY(AG,Ha,144,new xl((function(){return new Q(null,1,5,R,["removed source from context domain"],null)})),-323325377),e}var I4=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(Ha,"handle-request"),(function(e,n,t){return U.a(t)}),o,e,n,t,r)}();function J4(e,n){var t=null!=n&&(64&n.h||h===n.D)?fh(qk,n):n,r=x.b(t,lz);t=x.b(t,Xv);try{return I4.c(e,r,t)}catch(i){var o=i;return p(km(o))||AY(IA,Ha,226,new xl((function(){return new Q(null,3,5,R,[o,"Error handling request",n],null)})),1720562813),zL(r)?new Q(null,2,5,R,[e,new Q(null,1,5,R,[x4(r,is.a(t),ow.a(t),jL(o,"context.errors.failure"))],null)],null):null}}function K4(){}I4.v(null,xH,(function(e,n,t){if(zL(n))e=G4(e,n,t);else{var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t;t=x.b(r,ow),x.b(r,pD),r=x.b(r,os);var o=JT.b(e,t);e=p(!!Tc(o=null==(o=null==o?null:eI.a(o))?null:pu.a(o))&&qL(e,t,ct))?null:F4(e,n,t,r,o)}return e})),I4.v(null,LF,(function(e,n,t){if(zL(n)){var r=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,o=x.b(r,is);r=x.b(r,ow);var i=D4(e,KT(e,r),lL(t),!1),l=J(i,0,null);i=J(i,1,null),e=new Q(null,2,5,R,[l,Cf.g(i,w4(n,o,r),G([vL(q0(dL(Mx.a(e)),r),K.c(t,U,bu))]))],null)}else n=null!=t&&(64&t.h||h===t.D)?fh(qk,t):t,n=x.b(n,ow),e=p(n=JT.b(e,n))?D4(e,n,lL(t),!1):null;return e})),I4.v(null,Pu,(function(e,n,t){return z4(e,n,t)})),I4.v(null,pJ,(function(e,n,t){return y4(e,n,t)})),I4.v(null,Qw,(function(e,n,t){return B4(e,n,t)})),I4.v(null,bx,(function(e,n,t){return C4(e,n,t)})),I4.v(null,Tt,(function(e,n,t){return A4(e,n,t)})),I4.v(null,Nz,(function(e,n){return H4(e,n)})),I4.v(null,em,(function(e,n,t){return AY(IA,Ha,209,new xl((function(){return new Q(null,2,5,R,["Unhandled message",t],null)})),1383824357),new Q(null,2,5,R,[e,new Q(null,1,5,R,[x4(n,is.b(t,-1),ow.a(t),mL([q.a("context"),".errors.unhandled_message"].join(""),["Unhandled message ",q.a(t)].join("")))],null)],null)})),K4.prototype.Yc=function(){return new n(null,3,[$v,"context",Rn,"",Ln,2],null)},K4.prototype.Zc=function(e,n){return n},K4.prototype.Wc=function(e,n){return n},K4.prototype.Xc=function(e,n,t){return J4(n,t)};var L4=function(){var e=Oh(S),n=Oh(S),t=Oh(S),r=Oh(S),o=x.c(S,ku,Ql.o?Ql.o():Ql.call(null));return new dm(Me.b(la,"authenticate"),(function(e){return mi.b(e,new Q(null,2,5,R,[YB,Ts],null))}),o,e,n,t,r)}();function M4(e,n){this.Gh=e,this.Ih=n}function N4(e,n){return new M4(e,n)}function O4(){var e=S;return AY(sD,la,57,new xl((function(){return new Q(null,2,5,R,["creating basic authenticator with configuration",e],null)})),617112893),I_(e,N4(cL(),1e3*Rq.b(e,6e4)))}L4.v(null,"secret",(function(e,t,r){return mZ(tZ(e),(function(e){var o=p_(new n(null,2,[dt,dt.a(e),bD,TK()+r],null),t);return K.c(e,Gu,o)}))})),L4.v(null,"access-token",(function(e,t){try{var r=mi.b(e,new Q(null,2,5,R,[YB,$p],null)),o=dt.a(o_.c(r,t,new n(null,1,[WD,TK()],null)));return jZ.resolve(new n(null,4,[U,qz,Gs,o,dt,o,Gu,r],null))}catch(l){var i=l;return AY(AG,la,37,new xl((function(){return new Q(null,2,5,R,[i,"Error processing access token authentication request"],null)})),-2143320436),jZ.reject(im(lm(i),new n(null,2,[U,lC,sr,["Invalid or expired token: ",q.a(lm(i))].join("")],null)))}})),L4.v(null,em,(function(e){e=mi.b(e,new Q(null,2,5,R,[YB,Ts],null));var t=["Unknown authentication method ",q.a(e)].join("");return AY(AG,la,44,new xl((function(){return new Q(null,1,5,R,[t],null)})),-1961658750),jZ.reject(im(t,new n(null,2,[U,lC,sr,t],null)))})),M4.prototype.Re=function(e,n){return L4.c(n,this.Gh,this.Ih)};var P4={},Q4={},z5;!function(e){nY((function(n){return K.c(n,cn,e)}))}(sD);var l4=new n(null,1,[No,(new Date).getTime()],null);function S4(e){return new n(null,6,[Ju,!0,tB,!1,GI,null,eC,null,vr,dx,qI,function(n){return n={time:BC.a(n),level:Lg(cn.a(n)),namespace:uq.a(n),file:Pv.a(n),line:iF.a(n),stacktrace:eB.a(n),message:Bl(fx.a(n)),output:Bl(Qx.a(n))},e.a?e.a(n):e.call(null,n)}],null)}function T4(e){return p(e=mi.b(e,new Q(null,2,5,R,[YB,my],null)))?(AY(sD,ha,65,new xl((function(){return new Q(null,1,5,R,["will be using custom JS authenticator"],null)})),1345826046),new n(null,2,[em,ED,rw,new n(null,1,[ED,I_(S,new J_(e))],null)],null)):new n(null,2,[em,ED,rw,new n(null,1,[ED,O4()],null)],null)}tb("gateway_web.core.configure_logging",(function(e){e=Ml(e,G([Nl,!0]));var t=new n(null,2,[cn,sD,HG,new n(null,1,[VI,hY.a?hY.a(S):hY.call(null,S)],null)],null);return t=p(cn.a(e))?K.c(t,cn,Kg.a(cn.a(e))):t,t=p(ty.a(e))?K.c(t,Kw,ty.a(e)):t,t=p(Lz.a(e))?K.c(t,un,Lz.a(e)):t,oY(e=p(Cw.a(e))?ni(t,new Q(null,2,5,R,[HG,VI],null),S4(Cw.a(e))):t)}));var U4=function e(n,r,o,i,l){return p(function(){var e=t(n);return p(e)?0<l:e}())?(QY(o,i,(new Date).getTime()-1e3*l),Rh.b(r,(function(){return fZ((function(){return e.K?e.K(n,r,o,i,l):e.call(null,n,r,o,i,l)}))}))):null};function V4(e){var n=Yx.a(t(e));AY(sD,ha,82,new xl((function(){return new Q(null,2,5,R,["starting gateway with configuration",n],null)})),-1715714573),Rh.b(e,(function(e){var t=T4(n),r=new Q(null,6,5,R,[new l1,new A3,new Q3(t),new u4,new K4,k4()],null);r=S_(r);var o=Oh(S),i=Oh(null),l=Oh(!0),a=mi.c(n,new Q(null,2,5,R,[kE,FD],null),60);return 0<a&&(AY(sD,ha,97,new xl((function(){return new Q(null,3,5,R,["clients inactive for",a,"will be scavenged"],null)})),811655706),U4(l,i,o,r,a)),K.g(e,JH,l,G([iq,t,Yp,r,kE,o,QA,i]))}))}function W4(e){AY(sD,ha,115,new xl((function(){return new Q(null,1,5,R,["stopping gateway"],null)})),661929129),Rh.b(e,(function(e){Rh.b(JH.a(e),Hh(!1));var r=QA.a(e);if(null!=(r=null==r?null:t(r))&&$Y(r),null!=(r=Yp.a(e))&&CY(r),null!=(r=iq.a(e)))e:{r=B(nj(rw.a(r)));for(var o=null,i=0,l=0;;)if(l<i){var a=o.W(null,l);sZ(a),l+=1}else{if(!(r=B(r)))break e;Wf(o=r)?(r=re(o),i=se(o),o=r,a=F(r),r=i,i=a):(sZ(a=C(o)),r=D(o),o=null,i=0),l=0}}return new n(null,1,[Yx,Yx.a(e)],null)}))}tb("gateway_web.core.create",(function(e){var t=Oh(new n(null,1,[Yx,hO(Ll(e))],null));return"undefined"!==typeof P4&&"undefined"!==typeof Q4&&"undefined"!==typeof z5||((z5=function(e,n,t){this.rg=e,this.qd=n,this.gh=t,this.h=393216,this.I=0}).prototype.O=function(e,n){return new z5(this.rg,this.qd,n)},z5.prototype.N=function(){return this.gh},z5.prototype.start=function(){var e=this,n=this;return new Promise((function(t){return V4(e.qd),t.a?t.a(n):t.call(null,n)}))},z5.prototype.stop=function(){var e=this,n=this;return new Promise((function(t){return W4(e.qd),t.a?t.a(n):t.call(null,n)}))},z5.prototype.connect=function(e){return WY(this.qd,e)},z5.Pa=function(){return new Q(null,3,5,R,[op,hu,HK],null)},z5.Ia=!0,z5.Da="gateway-web.core/t_gateway_web$core15330",z5.Ja=function(e){return ce(e,"gateway-web.core/t_gateway_web$core15330")}),new z5(e,t,S)}))}).call(commonjsGlobal);var Glue42CoreMessageTypes={connectionRequest:{name:"connectionRequest"},connectionAccepted:{name:"connectionAccepted"},platformPing:{name:"platformPing"},platformReady:{name:"platformReady"},platformUnload:{name:"platformUnload"},clientUnload:{name:"clientUnload"},parentPing:{name:"parentPing"},parentReady:{name:"parentReady"}},GlueWebPlatformControlName$1="T42.Web.Platform.Control",GlueWebPlatformStreamName$1="T42.Web.Platform.Stream",GlueClientControlName$1="T42.Web.Client.Control",GlueWebPlatformWorkspacesStreamName="T42.Web.Platform.WSP.Stream",GlueWorkspaceFrameClientControlName="T42.Workspaces.Control",GlueWebIntentsPrefix="Tick42.FDC3.Intents.",ChannelContextPrefix="___channel___",dbName="glue42core",dbVersion=1,Gateway=function(){function e(){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.configureLogging=window.gateway_web.core.configure_logging,this.create=window.gateway_web.core.create}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(null===e||void 0===e?void 0:e.logging)&&this.configureLogging({level:e.logging.level,appender:e.logging.appender}),this._gatewayWebInstance=this.create({}),n.next=4,this._gatewayWebInstance.start();case 4:case"end":return n.stop()}}),n,this)})))}},{key:"connectClient",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._gatewayWebInstance.connect((function(n,t){return e.postMessage(t)}));case 2:r=t.sent,e.onmessage=function(e){var t,o=null===(t=e.data)||void 0===t?void 0:t.glue42core;if(o&&o.type===Glue42CoreMessageTypes.clientUnload.name)return n&&n(o.data.clientId),void r.disconnect();r.send(e.data)};case 4:case"end":return t.stop()}}),t,this)})))}}]),e}(),ok$1=function(e){return{ok:!0,result:e}},isOk$1=function(e){return!0===e.ok},err$1=function(e){return{ok:!1,error:e}},isErr$1=function(e){return!1===e.ok},asPromise$1=function(e){return!0===e.ok?Promise.resolve(e.result):Promise.reject(e.error)},withDefault$1=function(e,n){return!0===n.ok?n.result:e},withException$1=function(e){if(!0===e.ok)return e.result;throw e.error},successes$1=function(e){return e.reduce((function(e,n){return!0===n.ok?e.concat(n.result):e}),[])},map$1=function(e,n){return!0===n.ok?ok$1(e(n.result)):n},map2$1=function(e,n,t){return!1===n.ok?n:!1===t.ok?t:ok$1(e(n.result,t.result))},mapError$1=function(e,n){return!0===n.ok?n:err$1(e(n.error))},andThen$1=function(e,n){return!0===n.ok?e(n.result):n},result$1=Object.freeze({ok:ok$1,isOk:isOk$1,err:err$1,isErr:isErr$1,asPromise:asPromise$1,withDefault:withDefault$1,withException:withException$1,successes:successes$1,map:map$1,map2:map2$1,mapError:mapError$1,andThen:andThen$1}),_assign$2=function(){return(_assign$2=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function __rest$2(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}function isEqual$1(e,n){if(e===n)return!0;if(null===e&&null===n)return!0;if(typeof e!==typeof n)return!1;if("object"===typeof e){if(Array.isArray(e)){if(!Array.isArray(n))return!1;if(e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(!isEqual$1(e[t],n[t]))return!1;return!0}var r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(t=0;t<r.length;t++){if(!n.hasOwnProperty(r[t]))return!1;if(!isEqual$1(e[r[t]],n[r[t]]))return!1}return!0}}var isJsonArray$1=function(e){return Array.isArray(e)},isJsonObject$1=function(e){return"object"===typeof e&&null!==e&&!isJsonArray$1(e)},typeString$1=function(e){switch(typeof e){case"string":return"a string";case"number":return"a number";case"boolean":return"a boolean";case"undefined":return"undefined";case"object":return e instanceof Array?"an array":null===e?"null":"an object";default:return JSON.stringify(e)}},expectedGot$1=function(e,n){return"expected "+e+", got "+typeString$1(n)},printPath$1=function(e){return e.map((function(e){return"string"===typeof e?"."+e:"["+e+"]"})).join("")},prependAt$1=function(e,n){var t=n.at,r=__rest$2(n,["at"]);return _assign$2({at:e+(t||"")},r)},Decoder$1=function(){function e(n){var t=this;this.decode=n,this.run=function(e){return mapError$1((function(n){return{kind:"DecoderError",input:e,at:"input"+(n.at||""),message:n.message||""}}),t.decode(e))},this.runPromise=function(e){return asPromise$1(t.run(e))},this.runWithException=function(e){return withException$1(t.run(e))},this.map=function(n){return new e((function(e){return map$1(n,t.decode(e))}))},this.andThen=function(n){return new e((function(e){return andThen$1((function(t){return n(t).decode(e)}),t.decode(e))}))},this.where=function(n,r){return t.andThen((function(t){return n(t)?e.succeed(t):e.fail(r)}))}}return e.string=function(){return new e((function(e){return"string"===typeof e?ok$1(e):err$1({message:expectedGot$1("a string",e)})}))},e.number=function(){return new e((function(e){return"number"===typeof e?ok$1(e):err$1({message:expectedGot$1("a number",e)})}))},e.boolean=function(){return new e((function(e){return"boolean"===typeof e?ok$1(e):err$1({message:expectedGot$1("a boolean",e)})}))},e.constant=function(n){return new e((function(e){return isEqual$1(e,n)?ok$1(n):err$1({message:"expected "+JSON.stringify(n)+", got "+JSON.stringify(e)})}))},e.object=function(n){return new e((function(e){if(isJsonObject$1(e)&&n){var t={};for(var r in n)if(n.hasOwnProperty(r)){var o=n[r].decode(e[r]);if(!0!==o.ok)return void 0===e[r]?err$1({message:"the key '"+r+"' is required but was not present"}):err$1(prependAt$1("."+r,o.error));void 0!==o.result&&(t[r]=o.result)}return ok$1(t)}return isJsonObject$1(e)?ok$1(e):err$1({message:expectedGot$1("an object",e)})}))},e.array=function(n){return new e((function(e){if(isJsonArray$1(e)&&n){return e.reduce((function(e,t,r){return map2$1((function(e,n){return e.concat([n])}),e,function(e,t){return mapError$1((function(e){return prependAt$1("["+t+"]",e)}),n.decode(e))}(t,r))}),ok$1([]))}return isJsonArray$1(e)?ok$1(e):err$1({message:expectedGot$1("an array",e)})}))},e.tuple=function(n){return new e((function(e){if(isJsonArray$1(e)){if(e.length!==n.length)return err$1({message:"expected a tuple of length "+n.length+", got one of length "+e.length});for(var t=[],r=0;r<n.length;r++){var o=n[r].decode(e[r]);if(!o.ok)return err$1(prependAt$1("["+r+"]",o.error));t[r]=o.result}return ok$1(t)}return err$1({message:expectedGot$1("a tuple of length "+n.length,e)})}))},e.union=function(n,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.oneOf.apply(e,[n,t].concat(r))},e.intersection=function(n,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return new e((function(e){return[n,t].concat(r).reduce((function(n,t){return map2$1(Object.assign,n,t.decode(e))}),ok$1({}))}))},e.anyJson=function(){return new e((function(e){return ok$1(e)}))},e.unknownJson=function(){return new e((function(e){return ok$1(e)}))},e.dict=function(n){return new e((function(e){if(isJsonObject$1(e)){var t={};for(var r in e)if(e.hasOwnProperty(r)){var o=n.decode(e[r]);if(!0!==o.ok)return err$1(prependAt$1("."+r,o.error));t[r]=o.result}return ok$1(t)}return err$1({message:expectedGot$1("an object",e)})}))},e.optional=function(n){return new e((function(e){return void 0===e||null===e?ok$1(void 0):n.decode(e)}))},e.oneOf=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return new e((function(e){for(var t=[],r=0;r<n.length;r++){var o=n[r].decode(e);if(!0===o.ok)return o;t[r]=o.error}var i=t.map((function(e){return"at error"+(e.at||"")+": "+e.message})).join('", "');return err$1({message:'expected a value matching one of the decoders, got the errors ["'+i+'"]'})}))},e.withDefault=function(n,t){return new e((function(e){return ok$1(withDefault$1(n,t.decode(e)))}))},e.valueAt=function(n,t){return new e((function(e){for(var r=e,o=0;o<n.length;o++){if(void 0===r)return err$1({at:printPath$1(n.slice(0,o+1)),message:"path does not exist"});if("string"===typeof n[o]&&!isJsonObject$1(r))return err$1({at:printPath$1(n.slice(0,o+1)),message:expectedGot$1("an object",r)});if("number"===typeof n[o]&&!isJsonArray$1(r))return err$1({at:printPath$1(n.slice(0,o+1)),message:expectedGot$1("an array",r)});r=r[n[o]]}return mapError$1((function(e){return void 0===r?{at:printPath$1(n),message:"path does not exist"}:prependAt$1(printPath$1(n),e)}),t.decode(r))}))},e.succeed=function(n){return new e((function(e){return ok$1(n)}))},e.fail=function(n){return new e((function(e){return err$1({message:n})}))},e.lazy=function(n){return new e((function(e){return n().decode(e)}))},e}(),string$1=Decoder$1.string,number$1=Decoder$1.number,boolean$1=Decoder$1.boolean,anyJson$1=Decoder$1.anyJson,constant$1=Decoder$1.constant,object$1=Decoder$1.object,array$1=Decoder$1.array,optional$1=Decoder$1.optional,oneOf$1=Decoder$1.oneOf,intersection=Decoder$1.intersection,fail=Decoder$1.fail,lazy$1=Decoder$1.lazy,nonNegativeNumberDecoder$1=number$1().where((function(e){return e>=0}),"Expected a non-negative number"),nonEmptyStringDecoder$1=string$1().where((function(e){return e.length>0}),"Expected a non-empty string"),windowRelativeDirectionDecoder$1=oneOf$1(constant$1("top"),constant$1("left"),constant$1("right"),constant$1("bottom")),logLevelDecoder=oneOf$1(constant$1("trace"),constant$1("debug"),constant$1("info"),constant$1("warn"),constant$1("error")),channelMetaDecoder=anyJson$1().where((function(e){return"string"===typeof e.color&&e.color.length>0}),"Expected color to be a non-empty string"),layoutTypeDecoder$1=oneOf$1(constant$1("Global"),constant$1("Activity"),constant$1("ApplicationDefault"),constant$1("Swimlane"),constant$1("Workspace")),componentTypeDecoder$1=oneOf$1(constant$1("application"),constant$1("activity")),functionCheck=function(e,n){var t=typeof e;return"function"===t?anyJson$1():fail("The provided argument as ".concat(n," should be of type function, provided: ").concat(typeof t))},layoutSummaryDecoder$1=object$1({name:nonEmptyStringDecoder$1,type:layoutTypeDecoder$1,context:optional$1(anyJson$1()),metadata:optional$1(anyJson$1())}),windowLayoutComponentDecoder$1=object$1({type:constant$1("window"),componentType:componentTypeDecoder$1,state:object$1({name:anyJson$1(),context:anyJson$1(),url:nonEmptyStringDecoder$1,bounds:anyJson$1(),id:nonEmptyStringDecoder$1,parentId:optional$1(nonEmptyStringDecoder$1),main:boolean$1()})}),libDomainDecoder$1=oneOf$1(constant$1("windows"),constant$1("appManager"),constant$1("layouts"),constant$1("workspaces"),constant$1("intents")),windowLayoutItemDecoder$1=object$1({type:constant$1("window"),config:object$1({appName:nonEmptyStringDecoder$1,url:optional$1(nonEmptyStringDecoder$1),title:optional$1(string$1())})}),groupLayoutItemDecoder$1=object$1({type:constant$1("group"),config:anyJson$1(),children:array$1(oneOf$1(windowLayoutItemDecoder$1))}),columnLayoutItemDecoder$1=object$1({type:constant$1("column"),config:anyJson$1(),children:array$1(oneOf$1(groupLayoutItemDecoder$1,windowLayoutItemDecoder$1,lazy$1((function(){return columnLayoutItemDecoder$1})),lazy$1((function(){return rowLayoutItemDecoder$1}))))}),rowLayoutItemDecoder$1=object$1({type:constant$1("row"),config:anyJson$1(),children:array$1(oneOf$1(columnLayoutItemDecoder$1,groupLayoutItemDecoder$1,windowLayoutItemDecoder$1,lazy$1((function(){return rowLayoutItemDecoder$1}))))}),workspaceLayoutComponentDecoder$1=object$1({type:constant$1("Workspace"),state:object$1({config:anyJson$1(),context:anyJson$1(),children:array$1(oneOf$1(rowLayoutItemDecoder$1,columnLayoutItemDecoder$1,groupLayoutItemDecoder$1,windowLayoutItemDecoder$1))})}),glueLayoutDecoder$1=object$1({name:nonEmptyStringDecoder$1,type:layoutTypeDecoder$1,components:array$1(oneOf$1(windowLayoutComponentDecoder$1,workspaceLayoutComponentDecoder$1)),context:optional$1(anyJson$1()),metadata:optional$1(anyJson$1())}),applicationDetailsDecoder$1=object$1({url:nonEmptyStringDecoder$1,top:optional$1(number$1()),left:optional$1(number$1()),width:optional$1(nonNegativeNumberDecoder$1),height:optional$1(nonNegativeNumberDecoder$1)}),intentDefinitionDecoder$1=object$1({name:nonEmptyStringDecoder$1,displayName:optional$1(string$1()),contexts:optional$1(array$1(string$1())),customConfig:optional$1(object$1())}),glueCoreAppDefinitionDecoder=object$1({name:nonEmptyStringDecoder$1,type:nonEmptyStringDecoder$1.where((function(e){return"window"===e}),"Expected a value of window"),title:optional$1(nonEmptyStringDecoder$1),version:optional$1(nonEmptyStringDecoder$1),customProperties:optional$1(anyJson$1()),icon:optional$1(nonEmptyStringDecoder$1),caption:optional$1(nonEmptyStringDecoder$1),details:applicationDetailsDecoder$1,intents:optional$1(array$1(intentDefinitionDecoder$1))}),fdc3AppDefinitionDecoder$1=object$1({name:nonEmptyStringDecoder$1,title:optional$1(nonEmptyStringDecoder$1),version:optional$1(nonEmptyStringDecoder$1),appId:nonEmptyStringDecoder$1,manifest:nonEmptyStringDecoder$1,manifestType:nonEmptyStringDecoder$1,tooltip:optional$1(nonEmptyStringDecoder$1),description:optional$1(nonEmptyStringDecoder$1),contactEmail:optional$1(nonEmptyStringDecoder$1),supportEmail:optional$1(nonEmptyStringDecoder$1),publisher:optional$1(nonEmptyStringDecoder$1),images:optional$1(array$1(object$1({url:optional$1(nonEmptyStringDecoder$1)}))),icons:optional$1(array$1(object$1({icon:optional$1(nonEmptyStringDecoder$1)}))),customConfig:anyJson$1(),intents:optional$1(array$1(intentDefinitionDecoder$1))}),remoteStoreDecoder=object$1({url:nonEmptyStringDecoder$1,pollingInterval:optional$1(nonNegativeNumberDecoder$1),requestTimeout:optional$1(nonNegativeNumberDecoder$1)}),supplierDecoder=object$1({fetch:anyJson$1().andThen((function(e){return functionCheck(e,"supplier fetch")})),timeout:optional$1(nonNegativeNumberDecoder$1),pollingInterval:optional$1(nonNegativeNumberDecoder$1),save:optional$1(anyJson$1().andThen((function(e){return functionCheck(e,"supplier save")}))),delete:optional$1(anyJson$1().andThen((function(e){return functionCheck(e,"supplier delete")})))}),channelDefinitionDecoder=object$1({name:nonEmptyStringDecoder$1,meta:channelMetaDecoder,data:optional$1(anyJson$1())}),pluginDefinitionDecoder=object$1({name:nonEmptyStringDecoder$1,start:anyJson$1(),config:anyJson$1()}),allApplicationDefinitionsDecoder$1=oneOf$1(glueCoreAppDefinitionDecoder,fdc3AppDefinitionDecoder$1),appsCollectionDecoder=array$1(allApplicationDefinitionsDecoder$1),applicationsConfigDecoder=object$1({local:optional$1(array$1(allApplicationDefinitionsDecoder$1))}),layoutsConfigDecoder=object$1({mode:optional$1(oneOf$1(constant$1("idb"),constant$1("session"))),local:optional$1(array$1(glueLayoutDecoder$1))}),channelsConfigDecoder=object$1({definitions:array$1(channelDefinitionDecoder)}),pluginsConfigDecoder=object$1({definitions:array$1(pluginDefinitionDecoder)}),gatewayConfigDecoder=object$1({logging:optional$1(object$1({level:optional$1(logLevelDecoder),appender:optional$1(anyJson$1().andThen((function(e){return functionCheck(e,"gateway log appender")})))}))}),glueConfigDecoder=anyJson$1(),workspacesConfigDecoder=object$1({src:nonEmptyStringDecoder$1,isFrame:optional$1(boolean$1())}),windowsConfigDecoder=object$1({windowResponseTimeoutMs:optional$1(nonNegativeNumberDecoder$1),defaultWindowOpenBounds:optional$1(object$1({top:number$1(),left:number$1(),width:nonNegativeNumberDecoder$1,height:nonNegativeNumberDecoder$1}))}),platformConfigDecoder=object$1({windows:optional$1(windowsConfigDecoder),applications:optional$1(applicationsConfigDecoder),layouts:optional$1(layoutsConfigDecoder),channels:optional$1(channelsConfigDecoder),plugins:optional$1(pluginsConfigDecoder),gateway:optional$1(gatewayConfigDecoder),glue:optional$1(glueConfigDecoder),workspaces:optional$1(workspacesConfigDecoder),glueFactory:optional$1(anyJson$1().andThen((function(e){return functionCheck(e,"glueFactory")})))}),windowOpenSettingsDecoder$1=object$1({top:optional$1(number$1()),left:optional$1(number$1()),width:optional$1(nonNegativeNumberDecoder$1),height:optional$1(nonNegativeNumberDecoder$1),context:optional$1(anyJson$1()),relativeTo:optional$1(nonEmptyStringDecoder$1),relativeDirection:optional$1(windowRelativeDirectionDecoder$1)}),PlatformLogger=function(){function e(){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"setLogger",value:function(e){this._logger=e}},{key:"get",value:function(e){if(this._logger)return this._logger.subLogger(e)}}]),e}(),logger=new PlatformLogger,seed$1=1;function getNextValue$1(){return(seed$1=(9301*seed$1+49297)%233280)/233280}function setSeed$2(e){seed$1=e}var randomFromSeed$1={nextValue:getNextValue$1,seed:setSeed$2},ORIGINAL$1="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",alphabet$1,previousSeed$1,shuffled$1;function reset$1(){shuffled$1=!1}function setCharacters$1(e){if(e){if(e!==alphabet$1){if(e.length!==ORIGINAL$1.length)throw new Error("Custom alphabet for shortid must be "+ORIGINAL$1.length+" unique characters. You submitted "+e.length+" characters: "+e);var n=e.split("").filter((function(e,n,t){return n!==t.lastIndexOf(e)}));if(n.length)throw new Error("Custom alphabet for shortid must be "+ORIGINAL$1.length+" unique characters. These characters were not unique: "+n.join(", "));alphabet$1=e,reset$1()}}else alphabet$1!==ORIGINAL$1&&(alphabet$1=ORIGINAL$1,reset$1())}function characters$1(e){return setCharacters$1(e),alphabet$1}function setSeed$3(e){randomFromSeed$1.seed(e),previousSeed$1!==e&&(reset$1(),previousSeed$1=e)}function shuffle$1(){alphabet$1||setCharacters$1(ORIGINAL$1);for(var e,n=alphabet$1.split(""),t=[],r=randomFromSeed$1.nextValue();n.length>0;)r=randomFromSeed$1.nextValue(),e=Math.floor(r*n.length),t.push(n.splice(e,1)[0]);return t.join("")}function getShuffled$1(){return shuffled$1||(shuffled$1=shuffle$1())}function lookup$1(e){return getShuffled$1()[e]}function get(){return alphabet$1||ORIGINAL$1}var alphabet_1$1={get:get,characters:characters$1,seed:setSeed$3,lookup:lookup$1,shuffled:getShuffled$1},crypto$1="object"===typeof window&&(window.crypto||window.msCrypto),randomByte$1;randomByte$1=crypto$1&&crypto$1.getRandomValues?function(e){return crypto$1.getRandomValues(new Uint8Array(e))}:function(e){for(var n=[],t=0;t<e;t++)n.push(Math.floor(256*Math.random()));return n};var randomByteBrowser$1=randomByte$1,format_browser=function(e,n,t){for(var r=(2<<Math.log(n.length-1)/Math.LN2)-1,o=-~(1.6*r*t/n.length),i="";;)for(var l=e(o),a=o;a--;)if((i+=n[l[a]&r]||"").length===+t)return i};function generate(e){for(var n,t=0,r="";!n;)r+=format_browser(randomByteBrowser$1,alphabet_1$1.get(),1),n=e<Math.pow(16,t+1),t++;return r}var generate_1=generate,REDUCE_TIME=1567752802062,version$2=7,counter,previousSeconds;function build(e){var n="",t=Math.floor(.001*(Date.now()-REDUCE_TIME));return t===previousSeconds?counter++:(counter=0,previousSeconds=t),n+=generate_1(version$2),n+=generate_1(e),counter>0&&(n+=generate_1(counter)),n+=generate_1(t)}var build_1=build;function isShortId$1(e){return!(!e||"string"!==typeof e||e.length<6)&&!new RegExp("[^"+alphabet_1$1.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}var isValid$1=isShortId$1,lib$2=createCommonjsModule$1((function(e){var n=0;function t(){return build_1(n)}e.exports=t,e.exports.generate=t,e.exports.seed=function(n){return alphabet_1$1.seed(n),e.exports},e.exports.worker=function(t){return n=t,e.exports},e.exports.characters=function(e){return void 0!==e&&alphabet_1$1.characters(e),alphabet_1$1.shuffled()},e.exports.isValid=isValid$1})),shortid$1=lib$2,PlatformController=function(){function e(n,t,r,o,i,l,a,u,s){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.glueController=n,this.windowsController=t,this.applicationsController=r,this.layoutsController=o,this.workspacesController=i,this.intentsController=l,this.channelsController=a,this.portsBridge=u,this.stateController=s,this.controllers={windows:this.windowsController,appManager:this.applicationsController,layouts:this.layoutsController,workspaces:this.workspacesController,intents:this.intentsController,channels:this.channelsController}}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){var n,t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.portsBridge.start(e.gateway);case 2:return this.portsBridge.onClientUnloaded(this.handleClientUnloaded.bind(this)),r.next=5,this.glueController.start(e);case 5:return r.next=7,Promise.all([this.glueController.createPlatformSystemMethod(this.handleControlMessage.bind(this)),this.glueController.createPlatformSystemStream()]);case 7:return this.stateController.start(),r.next=10,Promise.all(Object.values(this.controllers).map((function(n){return n.start(e)})));case 10:return r.next=12,this.glueController.initClientGlue(null===e||void 0===e?void 0:e.glue,null===e||void 0===e?void 0:e.glueFactory,null===(n=null===e||void 0===e?void 0:e.workspaces)||void 0===n?void 0:n.isFrame);case 12:null===(t=e.plugins)||void 0===t||t.definitions.forEach(this.startPlugin.bind(this));case 13:case"end":return r.stop()}}),r,this)})))}},{key:"getClientGlue",value:function(){return this.glueController.clientGlue}},{key:"startPlugin",value:function(e){var n;try{e.start(this.glueController.clientGlue,e.config)}catch(t){null===(n=this.logger)||void 0===n||n.warn("Plugin: ".concat(e.name," threw while initiating: ").concat(JSON.stringify(t.message)))}}},{key:"handleControlMessage",value:function(e,n,t,r){var o,i,l=this,a=libDomainDecoder$1.run(e.domain);if(!a.ok){var u=JSON.stringify(a.error);return null===(o=this.logger)||void 0===o||o.trace("rejecting execution of a command, because of a domain validation error: ".concat(u)),r("Cannot execute this platform control, because of domain validation error: ".concat(u))}var s=a.result;e.commandId=shortid$1.generate(),null===(i=this.logger)||void 0===i||i.trace("[".concat(e.commandId,"] received a command for a valid domain: ").concat(s," from window ").concat(n.windowId," and interop id ").concat(n.instance,", forwarding to the appropriate controller")),this.controllers[s].handleControl(e).then((function(n){var r;t(n),null===(r=l.logger)||void 0===r||r.trace("[".concat(e.commandId,"] this command was executed successfully, sending the result to the caller."))})).catch((function(n){var t,o="string"===typeof n?n:JSON.stringify(n.message);null===(t=l.logger)||void 0===t||t.trace("[".concat(e.commandId,"] this command's execution was rejected, reason: ").concat(o)),r("The platform rejected operation ".concat(e.operation," for domain: ").concat(s," with reason: ").concat(o))}))}},{key:"handleClientUnloaded",value:function(e){var n,t=this;null===(n=this.logger)||void 0===n||n.trace("detected unloading of client: ".concat(e.windowId,", notifying all controllers")),Object.values(this.controllers).forEach((function(n,r){var o,i;try{null===(o=n.handleClientUnloaded)||void 0===o||o.call(n,e.windowId,e.win)}catch(a){var l=Object.keys(t.controllers)[r];null===(i=t.logger)||void 0===i||i.error("".concat(l," controller threw when handling unloaded client ").concat(e.windowId," with error message: ").concat(JSON.stringify(a.message)))}}))}},{key:"logger",get:function(){return logger.get("main.web.platform")}}]),e}(),defaultPlatformConfig={windows:{windowResponseTimeoutMs:1e4,defaultWindowOpenBounds:{top:0,left:0,width:600,height:600}},applications:{local:[]},layouts:{mode:"idb",local:[]},channels:{definitions:[]},plugins:{definitions:[]},gateway:{logging:{level:"info"}},glue:{}},defaultTargetString="*",isMergeableObject=function(e){return isNonNullObject(e)&&!isSpecial(e)};function isNonNullObject(e){return!!e&&"object"===typeof e}function isSpecial(e){var n=Object.prototype.toString.call(e);return"[object RegExp]"===n||"[object Date]"===n||isReactElement(e)}var canUseSymbol="function"===typeof Symbol&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(e){return e.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(e){return Array.isArray(e)?[]:{}}function cloneUnlessOtherwiseSpecified(e,n){return!1!==n.clone&&n.isMergeableObject(e)?deepmerge(emptyTarget(e),e,n):e}function defaultArrayMerge(e,n,t){return e.concat(n).map((function(e){return cloneUnlessOtherwiseSpecified(e,t)}))}function getMergeFunction(e,n){if(!n.customMerge)return deepmerge;var t=n.customMerge(e);return"function"===typeof t?t:deepmerge}function getEnumerableOwnPropertySymbols(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(n){return e.propertyIsEnumerable(n)})):[]}function getKeys(e){return Object.keys(e).concat(getEnumerableOwnPropertySymbols(e))}function propertyIsOnObject(e,n){try{return n in e}catch(t){return!1}}function propertyIsUnsafe(e,n){return propertyIsOnObject(e,n)&&!(Object.hasOwnProperty.call(e,n)&&Object.propertyIsEnumerable.call(e,n))}function mergeObject(e,n,t){var r={};return t.isMergeableObject(e)&&getKeys(e).forEach((function(n){r[n]=cloneUnlessOtherwiseSpecified(e[n],t)})),getKeys(n).forEach((function(o){propertyIsUnsafe(e,o)||(propertyIsOnObject(e,o)&&t.isMergeableObject(n[o])?r[o]=getMergeFunction(o,t)(e[o],n[o],t):r[o]=cloneUnlessOtherwiseSpecified(n[o],t))})),r}function deepmerge(e,n,t){(t=t||{}).arrayMerge=t.arrayMerge||defaultArrayMerge,t.isMergeableObject=t.isMergeableObject||isMergeableObject,t.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var r=Array.isArray(n);return r===Array.isArray(e)?r?t.arrayMerge(e,n,t):mergeObject(e,n,t):cloneUnlessOtherwiseSpecified(n,t)}deepmerge.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,t){return deepmerge(e,t,n)}),{})};var deepmerge_1=deepmerge,cjs=deepmerge_1,version$3="1.0.8",Platform=function(){function e(n,t){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.controller=n,this.checkSingleton(t),this.processConfig(t)}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"ready",value:function(){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.start(this.platformConfig);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getClientGlue",value:function(){return this.controller.getClientGlue()}},{key:"exposeAPI",value:function(){return{version:this.version}}},{key:"checkSingleton",value:function(e){var n,t=window.glue42core;if(t&&t.platformStarted)throw new Error("The Glue42 Core Platform has already been started for this application.");window.glue42core=t?{platformStarted:!0,isFrame:!!(null===(n=null===e||void 0===e?void 0:e.workspaces)||void 0===n?void 0:n.isFrame)}:{platformStarted:!0}}},{key:"processConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=platformConfigDecoder.runWithException(e);this.validatePlugins(n),this.platformConfig=cjs(defaultPlatformConfig,n)}},{key:"validatePlugins",value:function(e){var n;if(null===(n=e.plugins)||void 0===n?void 0:n.definitions){var t=e.plugins.definitions.reduce((function(e,n){var t=typeof n.start,r=n.name;return"function"!==t&&e.push({name:r,startType:t}),e}),[]);if(t.length){var r=t.map((function(e){return"The start function for plugin ".concat(e.name," was expected to be of type function, but was provided: ").concat(e.startType)})).join("\n");throw new Error(r)}}}},{key:"version",get:function(){return version$3}}]),e}(),_extendStatics$=function(e,n){return(_extendStatics$=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};function __extends$1(e,n){function t(){this.constructor=e}_extendStatics$(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var _assign$3=function(){return(_assign$3=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function __awaiter$2(e,n,t,r){return new(t||(t=Promise))((function(o,i){function l(e){try{u(r.next(e))}catch(n){i(n)}}function a(e){try{u(r.throw(e))}catch(n){i(n)}}function u(e){e.done?o(e.value):new t((function(n){n(e.value)})).then(l,a)}u((r=r.apply(e,n||[])).next())}))}function __generator$1(e,n){var t,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(a){i=[6,a],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function __spreadArrays$1(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var r=Array(e),o=0;for(n=0;n<t;n++)for(var i=arguments[n],l=0,a=i.length;l<a;l++,o++)r[o]=i[l];return r}var MetricTypes$1={STRING:1,NUMBER:2,TIMESTAMP:3,OBJECT:4};function getMetricTypeByValue$1(e){return e.type===MetricTypes$1.TIMESTAMP?"timestamp":e.type===MetricTypes$1.NUMBER?"number":e.type===MetricTypes$1.STRING?"string":e.type===MetricTypes$1.OBJECT?"object":"unknown"}function getTypeByValue$1(e){return e.constructor===Date?"timestamp":"number"===typeof e?"number":"string"===typeof e?"string":"object"===typeof e?"object":"string"}function serializeMetric$1(e){var n={},t=getMetricTypeByValue$1(e);if("object"===t){var r=Object.keys(e.value).reduce((function(n,t){var r=getTypeByValue$1(e.value[t]);if("object"===r){var o=defineNestedComposite$1(e.value[t]);n[t]={type:"object",description:"",context:{},composite:o}}else n[t]={type:r,description:"",context:{}};return n}),{});n.composite=r}return n.name=normalizeMetricName$1(e.path.join("/")+"/"+e.name),n.type=t,n.description=e.description,n.context={},n}function defineNestedComposite$1(e){return Object.keys(e).reduce((function(n,t){var r=getTypeByValue$1(e[t]);return n[t]="object"===r?{type:"object",description:"",context:{},composite:defineNestedComposite$1(e[t])}:{type:r,description:"",context:{}},n}),{})}function normalizeMetricName$1(e){return"undefined"!==typeof e&&e.length>0&&"/"!==e[0]?"/"+e:e}function getMetricValueByType$1(e){return"timestamp"===getMetricTypeByValue$1(e)?Date.now():publishNestedComposite$1(e.value)}function publishNestedComposite$1(e){return"object"!==typeof e?e:Object.keys(e).reduce((function(n,t){var r=e[t];return"object"===typeof r&&r.constructor!==Date?n[t]=publishNestedComposite$1(r):r.constructor===Date?n[t]=new Date(r).getTime():r.constructor===Boolean?n[t]=r.toString():n[t]=r,n}),{})}function flatten$1(e){return e.reduce((function(e,n){return e.concat(Array.isArray(n)?flatten$1(n):n)}),[])}function getHighestState$1(e){return e.sort((function(e,n){return e.state?n.state?n.state-e.state:-1:1}))[0]}function aggregateDescription$1(e){var n="";return e.forEach((function(e,t,r){var o=e.path.join(".");t===r.length-1?n+=o+"."+e.name+": "+e.description:n+=o+"."+e.name+": "+e.description+","})),n.length>100?n.slice(0,100)+"...":n}function composeMsgForRootStateMetric$1(e){var n=flatten$1(e.root.getAggregateState()),t=getHighestState$1(n);return{description:aggregateDescription$1(n),value:t.state}}function gw3$1(e,n){var t,r,o=this;if(!e||"object"!==typeof e)throw new Error("Connection is required parameter");var i=function(e){l(e.root)},l=function e(n){a(n),n.metrics.forEach((function(e){u(e)})),n.subSystems.forEach((function(n){e(n)}))},a=function(e){return __awaiter$2(o,void 0,void 0,(function(){var n,o;return __generator$1(this,(function(i){switch(i.label){case 0:return void 0===e.parent?[2]:[4,t];case 1:return i.sent(),n={name:normalizeMetricName$1(e.path.join("/")+"/"+e.name+"/State"),type:"object",composite:{Description:{type:"string",description:""},Value:{type:"number",description:""}},description:"System state",context:{}},o={type:"define",metrics:[n]},r.send(o),[2]}}))}))},u=function(e){return __awaiter$2(o,void 0,void 0,(function(){var n,o,i;return __generator$1(this,(function(l){switch(l.label){case 0:return n=c(e),[4,t];case 1:return l.sent(),o=serializeMetric$1(n),i={type:"define",metrics:[o]},r.send(i),"undefined"!==typeof n.value&&s(n),[2]}}))}))},s=function(e){if(d()){var n=getMetricValueByType$1(e),t={type:"publish",values:[{name:normalizeMetricName$1(e.path.join("/")+"/"+e.name),value:n,timestamp:Date.now()}]};return r.sendFireAndForget(t)}return Promise.resolve()},c=function(e){var n=_assign$3({},e);return"object"===typeof e.value&&null!==e.value&&(n.value=_assign$3({},e.value)),n},d=function(){var e;try{return(null!==(e=n.canUpdateMetric)&&void 0!==e?e:function(){return!0})()}catch(t){return!0}};return{init:function(o){var l;t=new Promise((function(e){l=e})),(r=e.domain("metrics")).onJoined((function(e){!e&&l&&(l(),l=void 0);var n={type:"define",metrics:[{name:"/State",type:"object",composite:{Description:{type:"string",description:""},Value:{type:"number",description:""}},description:"System state",context:{}}]};r.send(n),e&&i(o)})),r.join({system:n.system,service:n.service,instance:n.instance})},createSystem:a,updateSystem:function(n,i){return __awaiter$2(o,void 0,void 0,(function(){var o,l,a;return __generator$1(this,(function(u){switch(u.label){case 0:return[4,t];case 1:return u.sent(),o={type:"publish",values:[{name:normalizeMetricName$1(n.path.join("/")+"/"+n.name+"/State"),value:{Description:i.description,Value:i.state},timestamp:Date.now()}]},r.send(o),l=composeMsgForRootStateMetric$1(n),a={type:"publish",peer_id:e.peerId,values:[{name:"/State",value:{Description:l.description,Value:l.value},timestamp:Date.now()}]},r.send(a),[2]}}))}))},createMetric:u,updateMetric:function(e){return __awaiter$2(o,void 0,void 0,(function(){var n;return __generator$1(this,(function(r){switch(r.label){case 0:return n=c(e),[4,t];case 1:return r.sent(),s(n),[2]}}))}))}}}var Helpers$1={validate:function(e,n,t){if(null===e||"object"!==typeof e)throw new Error("Missing definition");if(null===n||"object"!==typeof n)throw new Error("Missing parent");if(null===t||"object"!==typeof t)throw new Error("Missing transport")}},BaseMetric$1=function(){function e(e,n,t,r,o){this.definition=e,this.system=n,this.transport=t,this.value=r,this.type=o,this.path=[],Helpers$1.validate(e,n,t),this.path=n.path.slice(0),this.path.push(n.name),this.name=e.name,this.description=e.description,t.createMetric(this)}return Object.defineProperty(e.prototype,"repo",{get:function(){var e;return null===(e=this.system)||void 0===e?void 0:e.repo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.system.path+"/"+name},enumerable:!0,configurable:!0}),e.prototype.update=function(e){return this.value=e,this.transport.updateMetric(this)},e}(),NumberMetric$1=function(e){function n(n,t,r,o){return e.call(this,n,t,r,o,MetricTypes$1.NUMBER)||this}return __extends$1(n,e),n.prototype.incrementBy=function(e){this.update(this.value+e)},n.prototype.increment=function(){this.incrementBy(1)},n.prototype.decrement=function(){this.incrementBy(-1)},n.prototype.decrementBy=function(e){this.incrementBy(-1*e)},n}(BaseMetric$1),ObjectMetric$1=function(e){function n(n,t,r,o){return e.call(this,n,t,r,o,MetricTypes$1.OBJECT)||this}return __extends$1(n,e),n.prototype.update=function(e){return this.mergeValues(e),this.transport.updateMetric(this)},n.prototype.mergeValues=function(e){var n=this;return Object.keys(this.value).forEach((function(t){"undefined"!==typeof e[t]&&(n.value[t]=e[t])}))},n}(BaseMetric$1),StringMetric$1=function(e){function n(n,t,r,o){return e.call(this,n,t,r,o,MetricTypes$1.STRING)||this}return __extends$1(n,e),n}(BaseMetric$1),TimestampMetric$1=function(e){function n(n,t,r,o){return e.call(this,n,t,r,o,MetricTypes$1.TIMESTAMP)||this}return __extends$1(n,e),n.prototype.now=function(){this.update(new Date)},n}(BaseMetric$1);function system$1(e,n,t,r,o){if(!n)throw new Error("Repository is required");if(!t)throw new Error("Transport is required");var i,l,a=t,u=e,s=o||"",c=n,d=r,f=function e(n){if(!n||!n.parent)return[];var t=e(n.parent);return t.push(n.name),t}(r),p={},h=(l="/",((i=f)&&i.length>0?i.join(l):"")+e),_=n.root,g=[],m=[];function w(e,n,t,r){var o={name:""};o="string"===typeof e?{name:e}:e;var i=m.filter((function(e){return e.name===o.name}));if(i.length>0){var l=i[0];if(l.type!==n)throw new Error("A metric named "+o.name+" is already defined with different type.");return"undefined"!==typeof t&&l.update(t).catch((function(){})),l}var a=r(o);return m.push(a),a}var v={get name(){return u},get description(){return s},get repo(){return c},get parent(){return d},path:f,id:h,root:_,get subSystems(){return g},get metrics(){return m},subSystem:function(e,n){if(!e||0===e.length)throw new Error("name is required");var t=g.filter((function(n){return n.name===e}));if(t.length>0)return t[0];var r=system$1(e,c,a,v,n);return g.push(r),r},getState:function(){return p},setState:function(e,n){p={state:e,description:n},a.updateSystem(v,p)},stringMetric:function(e,n){return w(e,MetricTypes$1.STRING,n,(function(e){return new StringMetric$1(e,v,a,n)}))},timestampMetric:function(e,n){return w(e,MetricTypes$1.TIMESTAMP,n,(function(e){return new TimestampMetric$1(e,v,a,n)}))},objectMetric:function(e,n){return w(e,MetricTypes$1.OBJECT,n,(function(e){return new ObjectMetric$1(e,v,a,n)}))},numberMetric:function(e,n){return w(e,MetricTypes$1.NUMBER,n,(function(e){return new NumberMetric$1(e,v,a,n)}))},getAggregateState:function(){var e=[];return Object.keys(p).length>0&&e.push({name:u,path:f,state:p.state,description:p.description}),g.forEach((function(n){var t=n.getAggregateState();t.length>0&&e.push.apply(e,t)})),e}};return a.createSystem(v),v}var Repository$1=function(){function e(e,n){n.init(this),this.root=system$1("",this,n),this.addSystemMetrics(this.root,e.clickStream||void 0===e.clickStream)}return e.prototype.addSystemMetrics=function(e,n){if("undefined"!==typeof navigator&&e.stringMetric("UserAgent",navigator.userAgent),n&&"undefined"!==typeof document){var t=e.subSystem("ClickStream"),r=function(e){if(e.target){var n=e.target;t.objectMetric("LastBrowserEvent",{type:"click",timestamp:new Date,target:{className:e.target?n.className:"",id:n.id,type:"<"+n.tagName.toLowerCase()+">",href:n.href||""}})}};t.objectMetric("Page",{title:document.title,page:window.location.href}),document.addEventListener?document.addEventListener("click",r):document.attachEvent("onclick",r)}e.stringMetric("StartTime",(new Date).toString());var o=e.stringMetric("StartURL",""),i=e.stringMetric("AppName","");if("undefined"!==typeof window){if("undefined"!==typeof window.location){var l=window.location.href;o.update(l)}"undefined"!==typeof window.glue42gd&&i.update(window.glue42gd.appName)}},e}(),NullProtocol$1=function(){function e(){}return e.prototype.init=function(e){},e.prototype.createSystem=function(e){return Promise.resolve()},e.prototype.updateSystem=function(e,n){return Promise.resolve()},e.prototype.createMetric=function(e){return Promise.resolve()},e.prototype.updateMetric=function(e){return Promise.resolve()},e}(),PerfTracker$1=function(){function e(e,n,t){this.api=e,this.lastCount=0,this.initialPublishTimeout=1e4,this.publishInterval=6e4,this.initialPublishTimeout=null!==n&&void 0!==n?n:this.initialPublishTimeout,this.publishInterval=null!==t&&void 0!==t?t:this.publishInterval,this.scheduleCollection(),this.system=this.api.subSystem("performance","Performance data published by the web application")}return e.prototype.scheduleCollection=function(){var e=this;setTimeout((function(){e.collect(),setInterval((function(){e.collect()}),e.publishInterval)}),this.initialPublishTimeout)},e.prototype.collect=function(){try{this.collectMemory(),this.collectEntries()}catch(e){}},e.prototype.collectMemory=function(){var e=window.performance.memory;this.system.stringMetric("memory",JSON.stringify({totalJSHeapSize:e.totalJSHeapSize,usedJSHeapSize:e.usedJSHeapSize}))},e.prototype.collectEntries=function(){var e=window.performance.getEntries();if(!(e.length<=this.lastCount)){this.lastCount=e.length;var n=e.map((function(e){return e.toJSON()}));this.system.stringMetric("entries",JSON.stringify(n))}},e}(),metrics$1=function(e){var n;n=e.connection&&"object"===typeof e.connection?gw3$1(e.connection,e):new NullProtocol$1;var t=new Repository$1(e,n).root;e.disableAutoAppSystem||(t=t.subSystem("App"));var r=addFAVSupport$1(t);return initPerf$1(r,e.pagePerformanceMetrics),r},perf$1;function initPerf$1(e,n){var t,r;if("undefined"!==typeof window){var o=null===(r=null===(t=null===window||void 0===window?void 0:window.glue42gd)||void 0===t?void 0:t.metrics)||void 0===r?void 0:r.pagePerformanceMetrics;o&&(n=o),(null===n||void 0===n?void 0:n.enabled)&&(perf$1=new PerfTracker$1(e,n.initialPublishTimeout,n.publishInterval))}}function addFAVSupport$1(e){var n,t=e.subSystem("reporting"),r={name:"features"};return e.featureMetric=function(e,o,i){if("undefined"===typeof e||""===e)throw new Error("name is mandatory");if("undefined"===typeof o||""===o)throw new Error("action is mandatory");if("undefined"===typeof i||""===i)throw new Error("payload is mandatory");n?n.update({name:e,action:o,payload:i}):n=t.objectMetric(r,{name:e,action:o,payload:i})},e}function createRegistry$2(e){if(e&&e.errorHandling&&"function"!==typeof e.errorHandling&&"log"!==e.errorHandling&&"silent"!==e.errorHandling&&"throw"!==e.errorHandling)throw new Error('Invalid options passed to createRegistry. Prop errorHandling should be ["log" | "silent" | "throw" | (err) => void], but '+typeof e.errorHandling+" was passed");var n=e&&"function"===typeof e.errorHandling&&e.errorHandling,t={};function r(t,r){var o=t instanceof Error?t:new Error(t);if(n)n(o);else{var i='[ERROR] callback-registry: User callback for key "'+r+'" failed: '+o.stack;if(e)switch(e.errorHandling){case"log":return console.error(i);case"silent":return;case"throw":throw new Error(i)}console.error(i)}}return{add:function(e,n,o){var i=t[e];return i||(i=[],t[e]=i),i.push(n),o&&setTimeout((function(){o.forEach((function(o){var i;if(null===(i=t[e])||void 0===i?void 0:i.includes(n))try{Array.isArray(o)?n.apply(void 0,o):n.apply(void 0,[o])}catch(err){r(err,e)}}))}),0),function(){var r=t[e];r&&(0===(r=r.reduce((function(e,t,r){return t===n&&e.length===r||e.push(t),e}),[])).length?delete t[e]:t[e]=r)}},execute:function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=t[e];if(!i||0===i.length)return[];var l=[];return i.forEach((function(t){try{var o=t.apply(void 0,n);l.push(o)}catch(err){l.push(void 0),r(err,e)}})),l},clear:function(){t={}},clearKey:function(e){t[e]&&delete t[e]}}}createRegistry$2.default=createRegistry$2;var lib$3=createRegistry$2,InProcTransport$1=function(){function e(e,n){var t=this;this.registry=lib$3(),this.gw=e.facade,this.gw.connect((function(e,n){t.messageHandler(n)})).then((function(e){t.client=e}))}return Object.defineProperty(e.prototype,"isObjectBasedTransport",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.sendObject=function(e){return this.client?(this.client.send(e),Promise.resolve(void 0)):Promise.reject("not connected")},e.prototype.send=function(e){return Promise.reject("not supported")},e.prototype.onMessage=function(e){return this.registry.add("onMessage",e)},e.prototype.onConnectedChanged=function(e){e(!0)},e.prototype.close=function(){return Promise.resolve()},e.prototype.open=function(){return Promise.resolve()},e.prototype.name=function(){return"in-memory"},e.prototype.reconnect=function(){return Promise.resolve()},e.prototype.messageHandler=function(e){this.registry.execute("onMessage",e)},e}(),SharedWorkerTransport$1=function(){function e(e,n){var t=this;this.logger=n,this.registry=lib$3(),this.worker=new SharedWorker(e),this.worker.port.onmessage=function(e){t.messageHandler(e.data)}}return Object.defineProperty(e.prototype,"isObjectBasedTransport",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.sendObject=function(e){return this.worker.port.postMessage(e),Promise.resolve()},e.prototype.send=function(e){return Promise.reject("not supported")},e.prototype.onMessage=function(e){return this.registry.add("onMessage",e)},e.prototype.onConnectedChanged=function(e){e(!0)},e.prototype.close=function(){return Promise.resolve()},e.prototype.open=function(){return Promise.resolve()},e.prototype.name=function(){return"shared-worker"},e.prototype.reconnect=function(){return Promise.resolve()},e.prototype.messageHandler=function(e){this.registry.execute("onMessage",e)},e}(),Utils$1=function(){function e(){}return e.getGDMajorVersion=function(){if("undefined"!==typeof window&&window.glueDesktop&&window.glueDesktop.version){var e=Number(window.glueDesktop.version.substr(0,1));return isNaN(e)?void 0:e}},e.isNode=function(){if("undefined"!==typeof e._isNode)return e._isNode;if("undefined"!==typeof window)return e._isNode=!1,!1;try{e._isNode="[object process]"===Object.prototype.toString.call(global.process)}catch(n){e._isNode=!1}return e._isNode},e}(),PromiseWrapper$1=function(){function e(){var e=this;this.rejected=!1,this.resolved=!1,this.promise=new Promise((function(n,t){e.resolve=function(t){e.resolved=!0,n(t)},e.reject=function(n){e.rejected=!0,t(n)}}))}return e.delay=function(e){return new Promise((function(n){return setTimeout(n,e)}))},Object.defineProperty(e.prototype,"ended",{get:function(){return this.rejected||this.resolved},enumerable:!0,configurable:!0}),e}(),timers$1={};function getAllTimers$1(){return timers$1}function timer$1(e){var n=timers$1[e];if(n)return n;var t=[];function r(){return(new Date).getTime()}var o,i,l=r();function a(e,n){var o=null!==n&&void 0!==n?n:r(),i=0;t.length>0&&(i=o-t[t.length-1].time),t.push({name:e,time:o,diff:i})}a("start",l);var u={get startTime(){return l},get endTime(){return o},get period(){return i},stop:function(){return a("end",o=r()),i=o-l},mark:a,marks:t};return timers$1[e]=u,u}var WebSocketConstructor$1=Utils$1.isNode()?__webpack_require__(19):window.WebSocket,WS$1=function(){function e(e,n){if(this.startupTimer=timer$1("connection"),this._running=!0,this._registry=lib$3(),this.wsRequests=[],this.settings=e,this.logger=n,!this.settings.ws)throw new Error("ws is missing")}return e.prototype.onMessage=function(e){return this._registry.add("onMessage",e)},e.prototype.send=function(e,n){var t=this;return new Promise((function(n,r){t.waitForSocketConnection((function(){var o;try{null===(o=t.ws)||void 0===o||o.send(e),n()}catch(i){r(i)}}),r)}))},e.prototype.open=function(){var e=this;return this.logger.info("opening ws..."),this._running=!0,new Promise((function(n,t){e.waitForSocketConnection(n,t)}))},e.prototype.close=function(){return this._running=!1,this.ws&&this.ws.close(),Promise.resolve()},e.prototype.onConnectedChanged=function(e){return this._registry.add("onConnectedChanged",e)},e.prototype.name=function(){return"ws "+this.settings.ws},e.prototype.reconnect=function(){var e;null===(e=this.ws)||void 0===e||e.close();var n=new PromiseWrapper$1;return this.waitForSocketConnection((function(){n.resolve()})),n.promise},e.prototype.waitForSocketConnection=function(e,n){var t;n=null!==n&&void 0!==n?n:function(){},this._running?1!==(null===(t=this.ws)||void 0===t?void 0:t.readyState)?(this.wsRequests.push({callback:e,failed:n}),this.wsRequests.length>1||this.openSocket()):e():n("wait for socket on "+this.settings.ws+" failed - socket closed by user")},e.prototype.openSocket=function(e,n){return __awaiter$2(this,void 0,void 0,(function(){var t=this;return __generator$1(this,(function(r){switch(r.label){case 0:if(this.startupTimer.mark("opening-socket"),void 0===e&&(e=this.settings.reconnectInterval),void 0!==n){if(0===n)return this.notifyForSocketState("wait for socket on "+this.settings.ws+" failed - no more retries left"),[2];this.logger.debug("will retry "+n+" more times (every "+e+" ms)")}r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.initiateSocket()];case 2:return r.sent(),this.startupTimer.mark("socket-initiated"),this.notifyForSocketState(),[3,4];case 3:return r.sent(),setTimeout((function(){var r=void 0===n?void 0:n-1;t.openSocket(e,r)}),e),[3,4];case 4:return[2]}}))}))},e.prototype.initiateSocket=function(){var e=this,n=new PromiseWrapper$1;return this.logger.debug("initiating ws to "+this.settings.ws+"..."),this.ws=new WebSocketConstructor$1(this.settings.ws||""),this.ws.onerror=function(t){var r="";try{r=JSON.stringify(t)}catch(i){var o=new WeakSet;r=JSON.stringify(t,(function(e,n){if("object"===typeof n&&null!==n){if(o.has(n))return;o.add(n)}return n}))}n.reject("error"),e.notifyStatusChanged(!1,r)},this.ws.onclose=function(t){e.logger.info("ws closed "+t),n.reject("closed"),e.notifyStatusChanged(!1)},this.ws.onopen=function(){var t;e.startupTimer.mark("ws-opened"),e.logger.info("ws opened "+(null===(t=e.settings.identity)||void 0===t?void 0:t.application)),n.resolve(),e.notifyStatusChanged(!0)},this.ws.onmessage=function(n){e._registry.execute("onMessage",n.data)},n.promise},e.prototype.notifyForSocketState=function(e){this.wsRequests.forEach((function(n){e?n.failed&&n.failed(e):n.callback()})),this.wsRequests=[]},e.prototype.notifyStatusChanged=function(e,n){this._registry.execute("onConnectedChanged",e,n)},e}();function createCommonjsModule$2(e,n){return e(n={exports:{}},n.exports),n.exports}var seed$2=1;function getNextValue$2(){return(seed$2=(9301*seed$2+49297)%233280)/233280}function setSeed$4(e){seed$2=e}var randomFromSeed$2={nextValue:getNextValue$2,seed:setSeed$4},ORIGINAL$2="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",alphabet$2,previousSeed$2,shuffled$2;function reset$2(){shuffled$2=!1}function setCharacters$2(e){if(e){if(e!==alphabet$2){if(e.length!==ORIGINAL$2.length)throw new Error("Custom alphabet for shortid must be "+ORIGINAL$2.length+" unique characters. You submitted "+e.length+" characters: "+e);var n=e.split("").filter((function(e,n,t){return n!==t.lastIndexOf(e)}));if(n.length)throw new Error("Custom alphabet for shortid must be "+ORIGINAL$2.length+" unique characters. These characters were not unique: "+n.join(", "));alphabet$2=e,reset$2()}}else alphabet$2!==ORIGINAL$2&&(alphabet$2=ORIGINAL$2,reset$2())}function characters$2(e){return setCharacters$2(e),alphabet$2}function setSeed$1$1(e){randomFromSeed$2.seed(e),previousSeed$2!==e&&(reset$2(),previousSeed$2=e)}function shuffle$2(){alphabet$2||setCharacters$2(ORIGINAL$2);for(var e,n=alphabet$2.split(""),t=[],r=randomFromSeed$2.nextValue();n.length>0;)r=randomFromSeed$2.nextValue(),e=Math.floor(r*n.length),t.push(n.splice(e,1)[0]);return t.join("")}function getShuffled$2(){return shuffled$2||(shuffled$2=shuffle$2())}function lookup$2(e){return getShuffled$2()[e]}var alphabet_1$2={characters:characters$2,seed:setSeed$1$1,lookup:lookup$2,shuffled:getShuffled$2},crypto$2="object"===typeof window&&(window.crypto||window.msCrypto);function randomByte$2(){if(!crypto$2||!crypto$2.getRandomValues)return 48&Math.floor(256*Math.random());var e=new Uint8Array(1);return crypto$2.getRandomValues(e),48&e[0]}var randomByteBrowser$2=randomByte$2;function encode$1(e,n){for(var t,r=0,o="";!t;)o+=e(n>>4*r&15|randomByteBrowser$2()),t=n<Math.pow(16,r+1),r++;return o}var encode_1$1=encode$1;function decode$1(e){var n=alphabet_1$2.shuffled();return{version:15&n.indexOf(e.substr(0,1)),worker:15&n.indexOf(e.substr(1,1))}}var decode_1$1=decode$1;function isShortId$2(e){if(!e||"string"!==typeof e||e.length<6)return!1;for(var n=alphabet_1$2.characters(),t=e.length,r=0;r<t;r++)if(-1===n.indexOf(e[r]))return!1;return!0}var isValid$2=isShortId$2,lib$1$2=createCommonjsModule$2((function(e){var n,t,r=0;function o(){var e="",o=Math.floor(.001*(Date.now()-1459707606518));return o===t?n++:(n=0,t=o),e+=encode_1$1(alphabet_1$2.lookup,6),e+=encode_1$1(alphabet_1$2.lookup,r),n>0&&(e+=encode_1$1(alphabet_1$2.lookup,n)),e+=encode_1$1(alphabet_1$2.lookup,o)}e.exports=o,e.exports.generate=o,e.exports.seed=function(n){return alphabet_1$2.seed(n),e.exports},e.exports.worker=function(n){return r=n,e.exports},e.exports.characters=function(e){return void 0!==e&&alphabet_1$2.characters(e),alphabet_1$2.shuffled()},e.exports.decode=decode_1$1,e.exports.isValid=isValid$2})),lib_1$1=lib$1$2.generate,lib_2$1=lib$1$2.seed,lib_3$1=lib$1$2.worker,lib_4$1=lib$1$2.characters,lib_5$1=lib$1$2.decode,lib_6$1=lib$1$2.isValid,shortid$2=lib$1$2;function domainSession$1(e,n,t,r,o){null==e&&(e="global"),r=r||["success"],o=o||["error"];var i,l=!1,a=!1,u=!1,s=lib$3();n.disconnected((function(){u=!1,t.debug("connection is down"),l=!1,a=!0,s.execute("onLeft",{disconnected:!0})})),n.loggedIn((function(){u=!0,a&&(t.debug("connection is now up - trying to reconnect..."),d(i))})),n.on("success",(function(e){return p(e)})),n.on("error",(function(e){return f(e)})),n.on("result",(function(e){return p(e)})),r&&r.forEach((function(e){n.on(e,(function(e){return p(e)}))})),o&&o.forEach((function(e){n.on(e,(function(e){return f(e)}))}));var c={};function d(n){return i=n,new Promise((function(r,o){if(l)r();else{var i;if("global"===e)i=u?Promise.resolve({}):Promise.reject("not connected to gateway");else t.debug("joining domain "+e),i=_({type:"join",destination:e,domain:"global",options:n});i.then((function(){!function(){t.debug("did join "+e),l=!0;var n=a;a=!1,s.execute("onJoined",n)}(),r()})).catch((function(n){t.debug("error joining "+e+" domain: "+JSON.stringify(n)),o(n)}))}}))}function f(n){if(e===n.domain){var t=n.request_id;if(t){var r=c[t];r&&r.error(n)}}}function p(n){if(n.domain===e){var t=n.request_id;if(t){var r=c[t];r&&r.success(n)}}}function h(){return shortid$2()}function _(r,o,i){i=i||{},r.request_id=r.request_id||h(),r.domain=r.domain||e,i.skipPeerId||(r.peer_id=n.peerId);var l=r.request_id;return new Promise((function(e,a){c[l]={success:function(n){delete c[l],n._tag=o,e(n)},error:function(e){t.warn("GW error - "+JSON.stringify(e)+" for request "+JSON.stringify(r)),delete c[l],e._tag=o,a(e)}},n.send(r,i).catch((function(e){c[l].error({err:e})}))}))}return{join:d,leave:function(){return"global"===e?Promise.resolve():(t.debug("stopping session "+e+"..."),a=!1,_({type:"leave",destination:e,domain:"global"}).then((function(){l=!1,s.execute("onLeft")})))},onJoined:function(e){return l&&e(!1),s.add("onJoined",e)},onLeft:function(e){return l||e(),s.add("onLeft",e)},send:_,sendFireAndForget:function(t){return t.request_id=t.request_id?t.request_id:h(),t.domain=t.domain||e,t.peer_id=n.peerId,n.send(t)},on:function(r,o){n.on(r,(function(n){if(n.domain===e)try{o(n)}catch(r){t.error("Callback  failed: "+r+" \n "+r.stack+" \n msg was: "+JSON.stringify(n),r)}}))},loggedIn:function(e){return n.loggedIn(e)},connected:function(e){return n.connected(e)},disconnected:function(e){return n.disconnected(e)},get peerId(){return n.peerId},get domain(){return e}}}var GW3ProtocolImpl$1=function(){function e(e,n,t){var r=this;this.connection=e,this.settings=n,this.logger=t,this.protocolVersion=3,this.datePrefix="#T42_DATE#",this.datePrefixLen=this.datePrefix.length,this.dateMinLen=this.datePrefixLen+1,this.datePrefixFirstChar=this.datePrefix[0],this.registry=lib$3(),this._isLoggedIn=!1,this.shouldTryLogin=!0,this.initialLogin=!0,this.initialLoginAttempts=3,this.sessions=[],e.disconnected((function(){r.handleDisconnected()})),this.ping()}return Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return this._isLoggedIn},enumerable:!0,configurable:!0}),e.prototype.processStringMessage=function(e){var n=this,t=JSON.parse(e,(function(e,t){if("string"!==typeof t)return t;if(t.length<n.dateMinLen)return t;if(t[0]!==n.datePrefixFirstChar)return t;if(t.substring(0,n.datePrefixLen)!==n.datePrefix)return t;try{var r=parseInt(t.substring(n.datePrefixLen,t.length),10);return isNaN(r)?t:new Date(r)}catch(o){return t}}));return{msg:t,msgType:t.type}},e.prototype.createStringMessage=function(e){var n=Date.prototype.toJSON;try{var t=this.datePrefix;return Date.prototype.toJSON=function(){return t+this.getTime()},JSON.stringify(e)}finally{Date.prototype.toJSON=n}},e.prototype.processObjectMessage=function(e){if(!e.type)throw new Error("Object should have type property");return{msg:e,msgType:e.type}},e.prototype.createObjectMessage=function(e){return e},e.prototype.login=function(e,n){return __awaiter$2(this,void 0,void 0,(function(){var t,r,o,i,l,a,u,s,c,d;return __generator$1(this,(function(f){switch(f.label){case 0:if(this.logger.debug("logging in..."),this.loginConfig=e,this.loginConfig||(this.loginConfig={username:"",password:""}),this.shouldTryLogin=!0,t={},this.connection.gatewayToken=e.gatewayToken,!e.gatewayToken)return[3,5];if(!n)return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.getNewGWToken()];case 2:return s=f.sent(),e.gatewayToken=s,[3,4];case 3:return r=f.sent(),this.logger.warn("failed to get GW token when reconnecting "+((null===r||void 0===r?void 0:r.message)||r)),[3,4];case 4:return t.method="gateway-token",t.token=e.gatewayToken,this.connection.gatewayToken=e.gatewayToken,[3,10];case 5:return"sspi"!==e.flowName?[3,9]:(t.provider="win",t.method="access-token",e.flowCallback&&e.sessionId?(o=t,[4,e.flowCallback(e.sessionId,null)]):[3,7]);case 6:return o.token=f.sent().data.toString("base64"),[3,8];case 7:throw new Error("Invalid SSPI config");case 8:return[3,10];case 9:if(e.token)t.method="access-token",t.token=e.token;else{if(!e.username)throw new Error("invalid auth message"+JSON.stringify(e));t.method="secret",t.login=e.username,t.secret=e.password}f.label=10;case 10:i={type:"hello",identity:this.settings.identity,authentication:t},e.sessionId&&(i.request_id=e.sessionId),this.globalDomain=domainSession$1("global",this.connection,this.logger.subLogger("global-domain"),["welcome","token","authentication-request"]),l={skipPeerId:!0},this.initialLogin&&(l.retryInterval=this.settings.reconnectInterval,l.maxRetries=this.settings.reconnectAttempts),f.label=11;case 11:f.trys.push([11,19,20,21]),a=void 0,f.label=12;case 12:return[4,this.globalDomain.send(i,void 0,l)];case 13:return"authentication-request"!==(u=f.sent()).type?[3,16]:(s=Buffer.from(u.authentication.token,"base64"),e.flowCallback&&e.sessionId?(c=i.authentication,[4,e.flowCallback(e.sessionId,s)]):[3,15]);case 14:c.token=f.sent().data.toString("base64"),f.label=15;case 15:return i.request_id=e.sessionId,[3,12];case 16:if("welcome"===u.type)return a=u,[3,18];throw"error"===u.type?new Error("Authentication failed: "+u.reason):new Error("Unexpected message type during authentication: "+u.type);case 17:return[3,12];case 18:return this.initialLogin=!1,this.logger.debug("login successful with peerId "+a.peer_id),this.connection.peerId=a.peer_id,this.connection.resolvedIdentity=a.resolved_identity,this.connection.availableDomains=a.available_domains,a.options&&(this.connection.token=a.options.access_token,this.connection.info=a.options.info),this.setLoggedIn(!0),[2,a.resolved_identity];case 19:throw d=f.sent(),this.logger.error("error sending hello message - "+(d.message||d.msg||d.reason||d),d),d;case 20:return e&&e.flowCallback&&e.sessionId&&e.flowCallback(e.sessionId,null),[7];case 21:return[2]}}))}))},e.prototype.logout=function(){return __awaiter$2(this,void 0,void 0,(function(){var e;return __generator$1(this,(function(n){switch(n.label){case 0:return this.logger.debug("logging out..."),this.shouldTryLogin=!1,this.pingTimer&&clearTimeout(this.pingTimer),e=this.sessions.map((function(e){e.leave()})),[4,Promise.all(e)];case 1:return n.sent(),[2]}}))}))},e.prototype.loggedIn=function(e){return this._isLoggedIn&&e(),this.registry.add("onLoggedIn",e)},e.prototype.domain=function(e,n,t,r){var o=this.sessions.filter((function(n){return n.domain===e}))[0];return o||(o=domainSession$1(e,this.connection,n,t,r),this.sessions.push(o)),o},e.prototype.handleDisconnected=function(){var e=this;if(this.setLoggedIn(!1),this.shouldTryLogin&&this.initialLogin){if(this.initialLoginAttempts<=0)return;this.initialLoginAttempts--}if(this.logger.debug("disconnected - will try new login?"+this.shouldTryLogin),this.shouldTryLogin){if(!this.loginConfig)throw new Error("no login info");this.connection.login(this.loginConfig,!0).catch((function(){setTimeout(e.handleDisconnected.bind(e),e.settings.reconnectInterval||1e3)}))}},e.prototype.setLoggedIn=function(e){this._isLoggedIn=e,this._isLoggedIn&&this.registry.execute("onLoggedIn")},e.prototype.ping=function(){var e=this;this.shouldTryLogin&&(this._isLoggedIn&&this.connection.send({type:"ping"}),this.pingTimer=setTimeout((function(){e.ping()}),3e4))},e.prototype.authToken=function(){return this.globalDomain?this.globalDomain.send({type:"create-token"}).then((function(e){return e.token})):Promise.reject(new Error("no global domain session"))},e.prototype.getNewGWToken=function(){if(void 0!==typeof window){var e=window.glue42gd;if(e)return e.getGWToken()}return Promise.reject(new Error("not running in GD"))},e}(),MessageReplayerImpl$1=function(){function e(e){this.specsNames=[],this.messages={},this.subs={},this.subsRefCount={},this.specs={};for(var n=0,t=e;n<t.length;n++){var r=t[n];this.specs[r.name]=r,this.specsNames.push(r.name)}}return e.prototype.init=function(e){var n=this;this.connection=e;for(var t=0,r=this.specsNames;t<r.length;t++)for(var o=r[t],i=function(t){var r=l.subsRefCount[t];if(r||(r=0),r+=1,l.subsRefCount[t]=r,r>1)return"continue";var o=e.on(t,(function(e){return n.processMessage(t,e)}));l.subs[t]=o},l=this,a=0,u=this.specs[o].types;a<u.length;a++){i(u[a])}},e.prototype.processMessage=function(e,n){if(!this.isDone&&n)for(var t=0,r=this.specsNames;t<r.length;t++){var o=r[t];if(-1!==this.specs[o].types.indexOf(e)){var i=this.messages[o]||[];this.messages[o]=i,i.push(n)}}},e.prototype.drain=function(e,n){var t;n&&(this.messages[e]||[]).forEach(n),delete this.messages[e];for(var r=0,o=this.specs[e].types;r<o.length;r++){var i=o[r];this.subsRefCount[i]-=1,this.subsRefCount[i]<=0&&(null===(t=this.connection)||void 0===t||t.off(this.subs[i]),delete this.subs[i],delete this.subsRefCount[i])}delete this.specs[e],this.specs.length||(this.isDone=!0)},e}(),PromisePlus$2=function(e,n,t){return new Promise((function(r,o){var i=setTimeout((function(){o(t||"Promise timeout hit: "+n)}),n);new Promise(e).then((function(e){clearTimeout(i),r(e)})).catch((function(e){clearTimeout(i),o(e)}))}))},WebPlatformTransport$1=function(){function e(e,n,t){this.settings=e,this.logger=n,this.identity=t,this.parentReady=!1,this.iAmConnected=!1,this.rejected=!1,this.children=[],this.parentPingTimeout=3e3,this.connectionRequestTimeout=5e3,this.defaultTargetString="*",this.registry=lib$3(),this.messages={connectionAccepted:{name:"connectionAccepted",handle:this.handleConnectionAccepted.bind(this)},connectionRejected:{name:"connectionRejected",handle:this.handleConnectionRejected.bind(this)},connectionRequest:{name:"connectionRequest",handle:this.handleConnectionRequest.bind(this)},parentReady:{name:"parentReady",handle:this.handleParentReady.bind(this)},parentPing:{name:"parentPing",handle:this.handleParentPing.bind(this)},platformPing:{name:"platformPing",handle:this.handlePlatformPing.bind(this)},platformUnload:{name:"platformUnload",handle:this.handlePlatformUnload.bind(this)},platformReady:{name:"platformReady",handle:this.handlePlatformReady.bind(this)},clientUnload:{name:"clientUnload",handle:this.handleClientUnload.bind(this)}},this.setUpMessageListener(),this.setUpUnload(),this.settings.port||(this.parent=window.opener||window.top,this.parentType=window.opener?"opener":-1!==window.name.indexOf("#wsp")?"workspace":"top")}return Object.defineProperty(e.prototype,"transportWindowId",{get:function(){return this.publicWindowId},enumerable:!0,configurable:!0}),e.prototype.sendObject=function(e){return __awaiter$2(this,void 0,void 0,(function(){return __generator$1(this,(function(n){if(!this.port)throw new Error("Cannot send message, because the port was not opened yet");return this.port.postMessage(e),[2]}))}))},Object.defineProperty(e.prototype,"isObjectBasedTransport",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.onMessage=function(e){return this.registry.add("onMessage",e)},e.prototype.send=function(){return Promise.reject("not supported")},e.prototype.onConnectedChanged=function(e){return this.registry.add("onConnectedChanged",e)},e.prototype.open=function(){return __awaiter$2(this,void 0,void 0,(function(){return __generator$1(this,(function(e){switch(e.label){case 0:return this.logger.debug("opening a connection to the web platform gateway."),[4,this.connect()];case 1:return e.sent(),this.notifyStatusChanged(!0),[2]}}))}))},e.prototype.close=function(){return Promise.resolve()},e.prototype.name=function(){return"web-platform"},e.prototype.reconnect=function(){return Promise.resolve()},e.prototype.connect=function(){return __awaiter$2(this,void 0,void 0,(function(){var e=this;return __generator$1(this,(function(n){switch(n.label){case 0:if(this.parentReady)return this.logger.debug("cancelling connection attempt, because this client's parent has already given a ready signal"),[2];if(this.settings.port)return this.logger.debug("opening an internal web platform connection"),this.port=this.settings.port,this.publicWindowId=this.settings.windowId,this.identity&&(this.identity.windowId=this.publicWindowId),this.port.onmessage=function(n){return e.registry.execute("onMessage",n.data)},this.logger.debug("internal web platform connection completed"),[2];if(!this.parentType||!this.parent)throw new Error("Cannot initiate a connection, because there is no opener, no top and no port.");return this.logger.debug("opening a "+("opener"===this.parentType?"child":"grandchild")+" client web platform connection"),[4,this.waitParent(this.parent,this.parentType)];case 1:return n.sent(),[4,this.initiateRemoteConnection(this.parent,this.parentType)];case 2:return n.sent(),this.logger.debug("the "+("opener"===this.parentType?"child":"grandchild")+" client is connected"),[2]}}))}))},e.prototype.initiateRemoteConnection=function(e,n){var t=this;return PromisePlus$2((function(r,o){t.connectionResolve=r,t.connectionReject=o,t.myClientId=shortid$2();var i="workspace"===t.parentType?window.name.substring(0,window.name.indexOf("#wsp")):window.name,l={glue42core:{type:t.messages.connectionRequest.name,clientId:t.myClientId,clientType:"top"===n||"workspace"===n?"grandChild":"child",bridgeInstanceId:i}};t.logger.debug("sending connection request to "+n),e.postMessage(l,t.defaultTargetString)}),this.connectionRequestTimeout,"The connection to the opener/top window timed out")},e.prototype.waitParent=function(e,n){var t=this;return PromisePlus$2((function(r){t.parentPingResolve=r;var o={glue42core:{type:"opener"===n?t.messages.platformPing.name:t.messages.parentPing.name}};t.logger.debug("checking for "+n+" window availability"),e.postMessage(o,t.defaultTargetString)}),this.parentPingTimeout,"Cannot initiate glue, because this window was not opened or created by a glue client")},e.prototype.setUpMessageListener=function(){var e=this;this.settings.port?this.logger.debug("skipping generic message listener, because this is an internal client"):window.addEventListener("message",(function(n){var t,r=null===(t=n.data)||void 0===t?void 0:t.glue42core;if(r&&!e.rejected)if(e.checkMessageTypeValid(r.type)){var o=r.type;e.logger.debug("received valid glue42core message of type: "+o),e.messages[o].handle(n)}else e.logger.error("cannot handle the incoming glue42 core message, because the type is invalid: "+r.type)}))},e.prototype.setUpUnload=function(){var e=this;this.settings.port?this.logger.debug("skipping unload event listener, because this is an internal client"):window.addEventListener("beforeunload",(function(){var n,t,r={glue42core:{type:e.messages.clientUnload.name,data:{clientId:e.myClientId,ownWindowId:null===(n=e.identity)||void 0===n?void 0:n.windowId}}};e.parent&&e.parent.postMessage(r,e.defaultTargetString),null===(t=e.port)||void 0===t||t.postMessage(r)}))},e.prototype.handleParentReady=function(){if(this.logger.debug("handling the ready signal from the parent, by resoling the pending promise."),this.parentReady=!0,this.parentPingResolve)return this.parentPingResolve(),void delete this.parentPingResolve;this.logger.debug("silently handling the ready signal from the top parent, because there is no defined promise")},e.prototype.handlePlatformReady=function(){if(this.logger.debug("the web platform gave the ready signal"),this.parentReady=!0,this.parentPingResolve)return this.parentPingResolve(),void delete this.parentPingResolve;this.logger.debug("silently handling the ready signal from the top parent, because there is no defined promise")},e.prototype.handleConnectionAccepted=function(e){var n,t=null===(n=e.data)||void 0===n?void 0:n.glue42core;return this.myClientId===t.clientId?this.handleAcceptanceOfMyRequest(t):this.handleAcceptanceOfGrandChildRequest(t,e)},e.prototype.handleAcceptanceOfMyRequest=function(e){var n=this;if(this.logger.debug("handling a connection accepted signal targeted at me."),e.port){if(this.publicWindowId="opener"===this.parentType?window.name:"top"===this.parentType?e.parentWindowId:window.name.substring(0,window.name.indexOf("#wsp")),this.identity&&"top"!==this.parentType&&(this.identity.windowId=this.publicWindowId),this.identity&&e.appName&&(this.identity.application=e.appName,this.identity.applicationName=e.appName),this.port=e.port,this.port.onmessage=function(e){return n.registry.execute("onMessage",e.data)},this.connectionResolve)return this.logger.debug("my connection is set up, calling the connection resolve."),this.connectionResolve(),void delete this.connectionResolve;this.logger.error("unable to call the connection resolve, because no connection promise was found")}else this.logger.error("cannot set up my connection, because I was not provided with a port")},e.prototype.handleAcceptanceOfGrandChildRequest=function(e,n){this.logger.debug("handling a connection accepted signal targeted at a grandchild: "+e.clientId);var t=this.children.find((function(n){return n.grandChildId===e.clientId}));t?(t.connected=!0,this.logger.debug("the grandchild connection for "+e.clientId+" is set up, forwarding the success message and the gateway port"),e.parentWindowId=this.publicWindowId,t.source.postMessage(n.data,t.origin,[e.port])):this.logger.error("cannot handle connection accepted for grandchild: "+e.clientId+", because there is no grandchild with this id")},e.prototype.handleConnectionRejected=function(){this.logger.debug("handling a connection rejection. Most likely the reason is that this window was not created by a glue API call"),this.connectionReject&&(this.connectionReject("The platform connection was rejected. Most likely because this window was not created by a glue API call"),delete this.connectionReject)},e.prototype.handleConnectionRequest=function(e){var n=e.source,t=e.data.glue42core;return t.clientType&&"grandChild"===t.clientType?t.clientId?"opener"===this.parentType&&this.parent?(this.logger.debug("handling a connection request for a grandchild: "+t.clientId),this.children.push({grandChildId:t.clientId,source:n,connected:!1,origin:e.origin}),this.logger.debug("grandchild: "+t.clientId+" is prepared, forwarding connection request to the platform"),void this.parent.postMessage(e.data,this.defaultTargetString)):this.rejectConnectionRequest(n,e.origin,"Cannot forward the connection request, because no direct connection to the platform was found"):this.rejectConnectionRequest(n,e.origin,"rejecting a connection request, because the source did not provide a valid id"):this.rejectConnectionRequest(n,e.origin,"rejecting a connection request, because the source was not opened by a glue API call")},e.prototype.handleParentPing=function(e){if(this.parentReady)if(this.iAmConnected){var n={glue42core:{type:this.messages.parentReady.name}},t=e.source;this.logger.debug("responding to a parent ping with a ready message"),t.postMessage(n,e.origin)}else this.logger.debug("i am not fully connected yet, I am ignoring the parent ping");else this.logger.debug("my parent is not ready, I am ignoring the parent ping")},e.prototype.handlePlatformUnload=function(e){this.logger.debug("detected a web platform unload"),this.parentReady=!1,this.children.length&&(this.logger.debug("forwarding the platform unload to all known children and starting platform discovery polling"),this.children.forEach((function(n){return n.source.postMessage(e.data,n.origin)}))),this.notifyStatusChanged(!1,"Gateway unloaded")},e.prototype.handleClientUnload=function(e){var n=e.data.glue42core;n.clientId?this.children.find((function(e){return e.grandChildId===n.clientId}))?(this.logger.debug("handling grandchild unload for id: "+n.clientId),this.children=this.children.filter((function(e){return e.grandChildId!==n.clientId}))):this.logger.warn("cannot process grand child unload, because this client is unaware of this grandchild"):this.logger.warn("cannot process grand child unload, because the provided id was not valid")},e.prototype.handlePlatformPing=function(){this.logger.error("cannot handle platform ping, because this is not a platform calls handling component")},e.prototype.notifyStatusChanged=function(e,n){this.iAmConnected=e,this.registry.execute("onConnectedChanged",e,n)},e.prototype.checkMessageTypeValid=function(e){return"string"===typeof e&&!!this.messages[e]},e.prototype.rejectConnectionRequest=function(e,n,t){this.rejected=!0,this.logger.error(t);var r={glue42core:{type:this.messages.connectionRejected.name}};e.postMessage(r,n)},e}(),Connection$1=function(){function e(e,n){if(this.settings=e,this.logger=n,this.messageHandlers={},this.ids=1,this.registry=lib$3(),this._connected=!1,this.isTrace=!1,(e=e||{}).reconnectAttempts=e.reconnectAttempts||10,e.reconnectInterval=e.reconnectInterval||1e3,e.inproc)this.transport=new InProcTransport$1(e.inproc,n.subLogger("inMemory"));else if(e.sharedWorker)this.transport=new SharedWorkerTransport$1(e.sharedWorker,n.subLogger("shared-worker"));else if(e.webPlatform)this.transport=new WebPlatformTransport$1(e.webPlatform,n.subLogger("web-platform"),e.identity);else{if(void 0===e.ws)throw new Error("No connection information specified");this.transport=new WS$1(e,n.subLogger("ws"))}this.isTrace=n.canPublish("trace"),n.debug("starting with "+this.transport.name()+" transport"),this.protocol=new GW3ProtocolImpl$1(this,e,n.subLogger("protocol")),this.transport.onConnectedChanged(this.handleConnectionChanged.bind(this)),this.transport.onMessage(this.handleTransportMessage.bind(this)),e.replaySpecs&&e.replaySpecs.length&&(this.replayer=new MessageReplayerImpl$1(e.replaySpecs),this.replayer.init(this))}return Object.defineProperty(e.prototype,"protocolVersion",{get:function(){var e;return null===(e=this.protocol)||void 0===e?void 0:e.protocolVersion},enumerable:!0,configurable:!0}),e.prototype.send=function(e,n){if(this.transport.sendObject&&this.transport.isObjectBasedTransport){var t=this.protocol.createObjectMessage(e);return this.isTrace&&this.logger.trace(">> "+JSON.stringify(t)),this.transport.sendObject(t,n)}var r=this.protocol.createStringMessage(e);return this.isTrace&&this.logger.trace(">> "+r),this.transport.send(r,n)},e.prototype.on=function(e,n){e=e.toLowerCase(),void 0===this.messageHandlers[e]&&(this.messageHandlers[e]={});var t=this.ids++;return this.messageHandlers[e][t]=n,{type:e,id:t}},e.prototype.off=function(e){delete this.messageHandlers[e.type.toLowerCase()][e.id]},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this.protocol.isLoggedIn},enumerable:!0,configurable:!0}),e.prototype.connected=function(e){var n=this;return this.protocol.loggedIn((function(){e(n.settings.ws||n.settings.sharedWorker||"")}))},e.prototype.disconnected=function(e){return this.registry.add("disconnected",e)},e.prototype.login=function(e,n){return __awaiter$2(this,void 0,void 0,(function(){var t;return __generator$1(this,(function(r){switch(r.label){case 0:return[4,this.transport.open()];case 1:return r.sent(),timer$1("connection").mark("transport-opened"),t=this.protocol.login(e,n),timer$1("connection").mark("protocol-logged-in"),[2,t]}}))}))},e.prototype.logout=function(){return __awaiter$2(this,void 0,void 0,(function(){return __generator$1(this,(function(e){switch(e.label){case 0:return[4,this.protocol.logout()];case 1:return e.sent(),[4,this.transport.close()];case 2:return e.sent(),[2]}}))}))},e.prototype.loggedIn=function(e){return this.protocol.loggedIn(e)},e.prototype.domain=function(e,n,t){return this.protocol.domain(e,this.logger.subLogger("domain="+e),n,t)},e.prototype.authToken=function(){return this.protocol.authToken()},e.prototype.reconnect=function(){return this.transport.reconnect()},e.prototype.distributeMessage=function(e,n){var t=this,r=this.messageHandlers[n.toLowerCase()];void 0!==r&&Object.keys(r).forEach((function(n){var o=r[n];if(void 0!==o)try{o(e)}catch(i){try{t.logger.error("Message handler failed with "+i.stack,i)}catch(l){console.log("Message handler failed",i)}}}))},e.prototype.handleConnectionChanged=function(e){this._connected!==e&&(this._connected=e,e?this.registry.execute("connected"):this.registry.execute("disconnected"))},e.prototype.handleTransportMessage=function(e){var n;n="string"===typeof e?this.protocol.processStringMessage(e):this.protocol.processObjectMessage(e),this.isTrace&&this.logger.trace("<< "+JSON.stringify(n)),this.distributeMessage(n.msg,n.msgType)},e}(),order$1=["trace","debug","info","warn","error","off"],Logger$1=function(){function e(e,n,t){this.name=e,this.parent=n,this.subLoggers=[],this.logFn=console,this.customLogFn=!1,this.name=e,this.path=n?n.path+"."+e:e,this.loggerFullName="["+this.path+"]",this.includeTimeAndLevel=!t,t&&(this.logFn=t,this.customLogFn=!0)}return e.prototype.subLogger=function(n){var t=this.subLoggers.filter((function(e){return e.name===n}))[0];if(void 0!==t)return t;Object.keys(this).forEach((function(e){if(e===n)throw new Error("This sub logger name is not allowed.")}));var r=new e(n,this,this.customLogFn?this.logFn:void 0);return this.subLoggers.push(r),r},e.prototype.publishLevel=function(e){var n;return e&&(this._publishLevel=e),this._publishLevel||(null===(n=this.parent)||void 0===n?void 0:n.publishLevel())},e.prototype.consoleLevel=function(e){var n;return e&&(this._consoleLevel=e),this._consoleLevel||(null===(n=this.parent)||void 0===n?void 0:n.consoleLevel())},e.prototype.log=function(e,n,t){this.publishMessage(n||"info",e,t)},e.prototype.trace=function(e){this.log(e,"trace")},e.prototype.debug=function(e){this.log(e,"debug")},e.prototype.info=function(e){this.log(e,"info")},e.prototype.warn=function(e){this.log(e,"warn")},e.prototype.error=function(e,n){this.log(e,"error")},e.prototype.canPublish=function(e,n){return order$1.indexOf(e)>=order$1.indexOf(n||this.consoleLevel()||"trace")},e.prototype.publishMessage=function(n,t,r){var o=this.loggerFullName;if("error"===n&&!r){var i=new Error;i.stack&&(t=t+"\n"+i.stack.split("\n").slice(3).join("\n"))}if(this.canPublish(n,this.publishLevel())){var l=e.Interop;if(l)try{l.methods({name:e.InteropMethodName}).length>0&&l.invoke(e.InteropMethodName,{msg:""+t,logger:o,level:n})}catch(c){}}if(this.canPublish(n)){var a="";if(this.includeTimeAndLevel){var u=new Date;a="["+(u.getHours()+":"+u.getMinutes()+":"+u.getSeconds()+":"+u.getMilliseconds())+"] ["+n+"] "}var s=""+a+o+": "+t;switch(n){case"trace":this.logFn.debug(s);break;case"debug":this.logFn.debug?this.logFn.debug(s):this.logFn.log(s);break;case"info":this.logFn.info(s);break;case"warn":this.logFn.warn(s);break;case"error":this.logFn.error(s,r)}}},e.InteropMethodName="T42.AppLogger.Log",e}(),GW_MESSAGE_CREATE_CONTEXT$1="create-context",GW_MESSAGE_ACTIVITY_CREATED$1="created",GW_MESSAGE_ACTIVITY_DESTROYED$1="destroyed",GW_MESSAGE_CONTEXT_CREATED$1="context-created",GW_MESSAGE_CONTEXT_ADDED$1="context-added",GW_MESSAGE_SUBSCRIBE_CONTEXT$1="subscribe-context",GW_MESSAGE_SUBSCRIBED_CONTEXT$1="subscribed-context",GW_MESSAGE_UNSUBSCRIBE_CONTEXT$1="unsubscribe-context",GW_MESSAGE_DESTROY_CONTEXT$1="destroy-context",GW_MESSAGE_CONTEXT_DESTROYED$1="context-destroyed",GW_MESSAGE_UPDATE_CONTEXT$1="update-context",GW_MESSAGE_CONTEXT_UPDATED$1="context-updated",GW_MESSAGE_JOINED_ACTIVITY$1="joined",ContextMessageReplaySpec$1={get name(){return"context"},get types(){return[GW_MESSAGE_CREATE_CONTEXT$1,GW_MESSAGE_ACTIVITY_CREATED$1,GW_MESSAGE_ACTIVITY_DESTROYED$1,GW_MESSAGE_CONTEXT_CREATED$1,GW_MESSAGE_CONTEXT_ADDED$1,GW_MESSAGE_SUBSCRIBE_CONTEXT$1,GW_MESSAGE_SUBSCRIBED_CONTEXT$1,GW_MESSAGE_UNSUBSCRIBE_CONTEXT$1,GW_MESSAGE_DESTROY_CONTEXT$1,GW_MESSAGE_CONTEXT_DESTROYED$1,GW_MESSAGE_UPDATE_CONTEXT$1,GW_MESSAGE_CONTEXT_UPDATED$1,GW_MESSAGE_JOINED_ACTIVITY$1]}},version$4="5.4.1";function prepareConfig$1(e,n,t){var r,o,i,l,a,u;if(Utils$1.isNode()){var s=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})._GD_STARTING_CONTEXT_;if(s)try{u=JSON.parse(s)}catch(_){}}function c(){if(e.application)return e.application;if(t)return t.applicationName;var n=shortid$2();return Utils$1.isNode()?u?u.applicationConfig.name:"NodeJS"+n:"undefined"!==typeof window&&"undefined"!==typeof document?document.title+" ("+n+")":n}var d=function(){var r,o,i,l,a,s,d,f,p,h,_=e.gateway,g=null!==(r=null===_||void 0===_?void 0:_.protocolVersion)&&void 0!==r?r:3,m=null===_||void 0===_?void 0:_.reconnectInterval,w=null===_||void 0===_?void 0:_.reconnectAttempts,v=null===_||void 0===_?void 0:_.ws,b=null===_||void 0===_?void 0:_.sharedWorker,y=null===_||void 0===_?void 0:_.inproc,k=null!==(o=null===_||void 0===_?void 0:_.webPlatform)&&void 0!==o?o:void 0;t&&(v=t.gwURL),Utils$1.isNode()&&u&&u.gwURL&&(v=u.gwURL),v||b||y||(v="ws://localhost:8385");var C=c(),I=C;"undefined"!==typeof t?(d=t.windowId,f=t.pid,t.env&&(p=t.env.env,h=t.env.region),I=null!==(i=t.application)&&void 0!==i?i:"glue-app",s=t.appInstanceId):Utils$1.isNode()&&(f=process.pid,u&&(p=u.env,h=u.region,s=u.instanceId));var x=null!==(a=null===(l=e.gateway)||void 0===l?void 0:l.replaySpecs)&&void 0!==a?a:[];return x.push(ContextMessageReplaySpec$1),{identity:{application:I,applicationName:C,windowId:d,instance:s,process:f,region:h,environment:p,api:n.version||version$4},reconnectInterval:m,ws:v,sharedWorker:b,webPlatform:k,inproc:y,protocolVersion:g,reconnectAttempts:w,replaySpecs:x}}(),f=c();if("undefined"!==typeof window){var p=window,h=p.htmlContainer?p.htmlContainer.containerName+"."+p.htmlContainer.application:null===(r=null===p||void 0===p?void 0:p.glue42gd)||void 0===r?void 0:r.application;h&&(f=h)}return{bus:null!==(o=e.bus)&&void 0!==o&&o,application:f,auth:function(){var n,t,r;return"string"===typeof e.auth?{token:e.auth}:e.auth?e.auth:Utils$1.isNode()&&u&&u.gwToken?{gatewayToken:u.gwToken}:(null===(n=e.gateway)||void 0===n?void 0:n.webPlatform)||(null===(t=e.gateway)||void 0===t?void 0:t.inproc)||(null===(r=e.gateway)||void 0===r?void 0:r.sharedWorker)?{username:"glue42",password:"glue42"}:void 0}(),logger:function(){var n,r,o,i=e.logger,l="warn";return i||(i=l),t&&(o=t.consoleLogLevel),"string"===typeof i?{console:null!==o&&void 0!==o?o:i,publish:l}:{console:null!==(n=null!==o&&void 0!==o?o:i.console)&&void 0!==n?n:l,publish:null!==(r=i.publish)&&void 0!==r?r:l}}(),connection:d,metrics:null===(i=e.metrics)||void 0===i||i,contexts:null===(l=e.contexts)||void 0===l||l,version:n.version||version$4,libs:null!==(a=n.libs)&&void 0!==a?a:[],customLogger:e.customLogger}}var GW3ContextData$1=function(){function e(e,n,t,r){this.updateCallbacks={},this.contextId=e,this.name=n,this.isAnnounced=t,this.activityId=r,this.context={}}return e.prototype.hasCallbacks=function(){return Object.keys(this.updateCallbacks).length>0},e.prototype.getState=function(){return this.isAnnounced&&this.hasCallbacks()?3:this.isAnnounced?2:this.hasCallbacks()?1:0},e}();function applyContextDelta$1(e,n,t){try{if((null===t||void 0===t?void 0:t.canPublish("trace"))&&(null===t||void 0===t||t.trace("applying context delta "+JSON.stringify(n)+" on context "+JSON.stringify(e))),!n)return e;if(n.reset)return e=_assign$3({},n.reset);if(e=deepClone$1(e,void 0),n.commands){for(var r=0,o=n.commands;r<o.length;r++){var i=o[r];"remove"===i.type?deletePath$1(e,i.path):"set"===i.type&&setValueToPath$1(e,i.value,i.path)}return e}var l=n.added,a=n.updated,u=n.removed;return l&&Object.keys(l).forEach((function(n){e[n]=l[n]})),a&&Object.keys(a).forEach((function(n){mergeObjectsProperties$1(n,e,a)})),u&&u.forEach((function(n){delete e[n]})),e}catch(s){return null===t||void 0===t||t.error("error applying context delta "+JSON.stringify(n)+" on context "+JSON.stringify(e),s),e}}function deepClone$1(e,n){if(n=n||new WeakMap,Object(e)!==e)return e;if(e instanceof Set)return new Set(e);if(n.has(e))return n.get(e);var t=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e.constructor?new e.constructor:Object.create(null);return n.set(e,t),e instanceof Map&&Array.from(e,(function(e){var r=e[0],o=e[1];return t.set(r,deepClone$1(o,n))})),Object.assign.apply(Object,__spreadArrays$1([t],Object.keys(e).map((function(t){var r;return(r={})[t]=deepClone$1(e[t],n),r}))))}var mergeObjectsProperties$1=function(e,n,t){var r=t[e];if(void 0===r)return n;var o=n[e];return o&&r?"string"===typeof o||"number"===typeof o||"boolean"===typeof o||"string"===typeof r||"number"===typeof r||"boolean"===typeof r||Array.isArray(o)||Array.isArray(r)?(n[e]=r,n):(n[e]=Object.assign({},o,r),n):(n[e]=r,n)};function deepEqual$1(e,n){if(e===n)return!0;if(!(e instanceof Object)||!(n instanceof Object))return!1;if(e.constructor!==n.constructor)return!1;for(var t in e)if(e.hasOwnProperty(t)){if(!n.hasOwnProperty(t))return!1;if(e[t]!==n[t]){if("object"!==typeof e[t])return!1;if(!deepEqual$1(e[t],n[t]))return!1}}for(var t in n)if(n.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;return!0}function setValueToPath$1(e,n,t){var r,o=t.split(".");for(r=0;r<o.length-1;r++)e[o[r]]||(e[o[r]]={}),"object"!==typeof e[o[r]]&&(e[o[r]]={}),e=e[o[r]];e[o[r]]=n}function isSubset$1(e,n){return Object.keys(n).every((function(t){return"object"===typeof n[t]?isSubset$1((null===e||void 0===e?void 0:e[t])||{},n[t]||{}):n[t]===(null===e||void 0===e?void 0:e[t])}))}function deletePath$1(e,n){var t,r=n.split(".");for(t=0;t<r.length-1;t++){if(!e[r[t]])return;e=e[r[t]]}delete e[r[t]]}var GW3Bridge$1=function(){function e(e){var n,t=this;this._contextNameToData={},this._gw3Subscriptions=[],this._nextCallbackSubscriptionNumber=0,this._contextNameToId={},this._contextIdToName={},this._protocolVersion=void 0,this._connection=e.connection,this._logger=e.logger,this._gw3Session=this._connection.domain("global",[GW_MESSAGE_CONTEXT_CREATED$1,GW_MESSAGE_SUBSCRIBED_CONTEXT$1,GW_MESSAGE_CONTEXT_DESTROYED$1,GW_MESSAGE_CONTEXT_UPDATED$1]),this.subscribeToContextCreatedMessages(),this.subscribeToContextUpdatedMessages(),this.subscribeToContextDestroyedMessages(),null===(n=this._connection.replayer)||void 0===n||n.drain(ContextMessageReplaySpec$1.name,(function(e){var n=e.type;n&&(n===GW_MESSAGE_CONTEXT_CREATED$1||n===GW_MESSAGE_CONTEXT_ADDED$1||n===GW_MESSAGE_ACTIVITY_CREATED$1?t.handleContextCreatedMessage(e):n===GW_MESSAGE_SUBSCRIBED_CONTEXT$1||n===GW_MESSAGE_CONTEXT_UPDATED$1||n===GW_MESSAGE_JOINED_ACTIVITY$1?t.handleContextUpdatedMessage(e):n!==GW_MESSAGE_CONTEXT_DESTROYED$1&&n!==GW_MESSAGE_ACTIVITY_DESTROYED$1||t.handleContextDestroyedMessage(e))}))}return Object.defineProperty(e.prototype,"protocolVersion",{get:function(){var e;if(!this._protocolVersion){var n=this._connection.availableDomains.find((function(e){return"context"===e.uri}));this._protocolVersion=null!==(e=null===n||void 0===n?void 0:n.version)&&void 0!==e?e:1}return this._protocolVersion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setPathSupported",{get:function(){return this.protocolVersion>=2},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(var e=0,n=this._gw3Subscriptions;e<n.length;e++){var t=n[e];this._connection.off(t)}for(var r in this._gw3Subscriptions.length=0,this._contextNameToData)this._contextNameToId.hasOwnProperty(r)&&delete this._contextNameToData[r]},e.prototype.createContext=function(e,n){var t=this;return this._gw3Session.send({type:GW_MESSAGE_CREATE_CONTEXT$1,domain:"global",name:e,data:n,lifetime:"retained"}).then((function(r){t._contextNameToId[e]=r.context_id,t._contextIdToName[r.context_id]=e;var o=t._contextNameToData[e]||new GW3ContextData$1(r.context_id,e,!0,void 0);return o.isAnnounced=!0,o.name=e,o.contextId=r.context_id,o.context=n,t._contextNameToData[e]=o,r.context_id}))},e.prototype.all=function(){var e=this;return Object.keys(this._contextNameToData).filter((function(n){return e._contextNameToData[n].isAnnounced}))},e.prototype.update=function(e,n){var t;return __awaiter$2(this,void 0,void 0,(function(){var r,o,i,l=this;return __generator$1(this,(function(a){switch(a.label){case 0:return(r=this._contextNameToData[e])&&r.isAnnounced?(o=r.context,r.hasCallbacks()?[3,2]:[4,this.get(r.name)]):[2,this.createContext(e,n)];case 1:o=a.sent(),a.label=2;case 2:return i=2===this.protocolVersion?this.calculateContextDeltaV2(o,n):this.calculateContextDeltaV1(o,n),Object.keys(i.added).length||Object.keys(i.updated).length||i.removed.length||(null===(t=i.commands)||void 0===t?void 0:t.length)?[2,this._gw3Session.send({type:GW_MESSAGE_UPDATE_CONTEXT$1,domain:"global",context_id:r.contextId,delta:i},{},{skipPeerId:!1}).then((function(e){l.handleUpdated(r,i,{updaterId:e.peer_id})}))]:[2,Promise.resolve()]}}))}))},e.prototype.set=function(e,n){var t=this,r=this._contextNameToData[e];return r&&r.isAnnounced?this._gw3Session.send({type:GW_MESSAGE_UPDATE_CONTEXT$1,domain:"global",context_id:r.contextId,delta:{reset:n}},{},{skipPeerId:!1}).then((function(e){t.handleUpdated(r,{reset:n,added:{},removed:[],updated:{}},{updaterId:e.peer_id})})):this.createContext(e,n)},e.prototype.setPath=function(e,n,t){return this.setPathSupported?this.setPaths(e,[{path:n,value:t}]):Promise.reject("glue.contexts.setPath operation is not supported, use Glue42 3.10 or later")},e.prototype.setPaths=function(e,n){var t=this;if(!this.setPathSupported)return Promise.reject("glue.contexts.setPaths operation is not supported, use Glue42 3.10 or later");var r=this._contextNameToData[e];if(!r||!r.isAnnounced){for(var o={},i=0,l=n;i<l.length;i++){setValueToPath$1(o,(c=l[i]).value,c.path)}return this.createContext(e,o)}for(var a=[],u=0,s=n;u<s.length;u++){var c;null===(c=s[u]).value?a.push({type:"remove",path:c.path}):a.push({type:"set",path:c.path,value:c.value})}return this._gw3Session.send({type:GW_MESSAGE_UPDATE_CONTEXT$1,domain:"global",context_id:r.contextId,delta:{commands:a}},{},{skipPeerId:!1}).then((function(e){t.handleUpdated(r,{added:{},removed:[],updated:{},commands:a},{updaterId:e.peer_id})}))},e.prototype.get=function(e){var n,t=this,r=this._contextNameToData[e];if(!r||!r.isAnnounced)return Promise.resolve({});if(r&&!r.hasCallbacks())return new Promise((function(n,r){return __awaiter$2(t,void 0,void 0,(function(){var t=this;return __generator$1(this,(function(r){return this.subscribe(e,(function(e,r,o,i){t.unsubscribe(i),n(e)})),[2]}))}))}));var o=null!==(n=null===r||void 0===r?void 0:r.context)&&void 0!==n?n:{};return Promise.resolve(o)},e.prototype.subscribe=function(e,n){var t=this._nextCallbackSubscriptionNumber;this._nextCallbackSubscriptionNumber+=1;var r=this._contextNameToData[e];if(!r||!r.isAnnounced)return r=r||new GW3ContextData$1(void 0,e,!1,void 0),this._contextNameToData[e]=r,r.updateCallbacks[t]=n,Promise.resolve(t);var o,i=r.hasCallbacks();return r.updateCallbacks[t]=n,i||r.joinedActivity||r.context&&r.sentExplicitSubscription?(n(o=deepClone$1(r.context),o,[],t),Promise.resolve(t)):this.sendSubscribe(r).then((function(){return t}))},e.prototype.unsubscribe=function(e){for(var n=0,t=Object.keys(this._contextNameToData);n<t.length;n++){var r=t[n],o=(this._contextNameToId[r],this._contextNameToData[r]);if(!o)return;var i=o.hasCallbacks();delete o.updateCallbacks[e],o.isAnnounced&&i&&!o.hasCallbacks()&&o.sentExplicitSubscription&&this.sendUnsubscribe(o),o.isAnnounced||o.hasCallbacks()||delete this._contextNameToData[r]}},e.prototype.destroy=function(e){var n=this._contextNameToData[e];return n?this._gw3Session.send({type:GW_MESSAGE_DESTROY_CONTEXT$1,domain:"global",context_id:n.contextId}).then((function(e){})):Promise.reject("context with "+e+" does not exist")},e.prototype.handleUpdated=function(e,n,t){var r=e.context;e.context=applyContextDelta$1(e.context,n,this._logger),this._contextNameToData[e.name]!==e||deepEqual$1(r,e.context)||this.invokeUpdateCallbacks(e,n,t)},e.prototype.subscribeToContextCreatedMessages=function(){for(var e=0,n=[GW_MESSAGE_CONTEXT_ADDED$1,GW_MESSAGE_CONTEXT_CREATED$1,GW_MESSAGE_ACTIVITY_CREATED$1];e<n.length;e++){var t=n[e],r=this._connection.on(t,this.handleContextCreatedMessage.bind(this));this._gw3Subscriptions.push(r)}},e.prototype.handleContextCreatedMessage=function(e){var n=e.type;n===GW_MESSAGE_ACTIVITY_CREATED$1?(this._contextNameToId[e.activity_id]=e.context_id,this._contextIdToName[e.context_id]=e.activity_id):n===GW_MESSAGE_CONTEXT_ADDED$1&&(this._contextNameToId[e.name]=e.context_id,this._contextIdToName[e.context_id]=e.name);var t=this._contextIdToName[e.context_id];if(!t)throw new Error("Received created event for context with unknown name: "+e.context_id);if(!this._contextNameToId[t])throw new Error("Received created event for context with unknown id: "+e.context_id);var r=this._contextNameToData[t];if(r){if(r.isAnnounced)return;if(!r.hasCallbacks())throw new Error("Assertion failure: contextData.hasCallbacks()");r.isAnnounced=!0,r.contextId=e.context_id,r.activityId=e.activity_id,r.sentExplicitSubscription||this.sendSubscribe(r)}else this._contextNameToData[t]=r=new GW3ContextData$1(e.context_id,t,!0,e.activity_id)},e.prototype.subscribeToContextUpdatedMessages=function(){for(var e=0,n=[GW_MESSAGE_CONTEXT_UPDATED$1,GW_MESSAGE_SUBSCRIBED_CONTEXT$1,GW_MESSAGE_JOINED_ACTIVITY$1];e<n.length;e++){var t=n[e],r=this._connection.on(t,this.handleContextUpdatedMessage.bind(this));this._gw3Subscriptions.push(r)}},e.prototype.handleContextUpdatedMessage=function(e){var n=e.type,t=e.context_id,r=this._contextNameToData[this._contextIdToName[t]],o=!r||!r.isAnnounced;if(n===GW_MESSAGE_JOINED_ACTIVITY$1)r?(r.contextId=t,r.isAnnounced=!0,r.activityId=e.activity_id):(r=new GW3ContextData$1(t,e.activity_id,!0,e.activity_id),this._contextNameToData[e.activity_id]=r,this._contextIdToName[t]=e.activity_id,this._contextNameToId[e.activity_id]=t),r.joinedActivity=!0;else if(!r||!r.isAnnounced)return void(n===GW_MESSAGE_SUBSCRIBED_CONTEXT$1?((r=r||new GW3ContextData$1(t,e.name,!0,void 0)).sentExplicitSubscription=!0,this._contextNameToData[e.name]=r,this._contextIdToName[t]=e.name,this._contextNameToId[e.name]=t):this._logger.error("Received 'update' for unknown context: "+t));var i=r.context;if(n===GW_MESSAGE_SUBSCRIBED_CONTEXT$1)r.context=e.data||{};else if(n===GW_MESSAGE_JOINED_ACTIVITY$1)r.context=e.context_snapshot||{};else{if(n!==GW_MESSAGE_CONTEXT_UPDATED$1)throw new Error("Unrecognized context update message "+n);r.context=applyContextDelta$1(r.context,e.delta,this._logger)}!o&&deepEqual$1(r.context,i)&&n!==GW_MESSAGE_SUBSCRIBED_CONTEXT$1||this.invokeUpdateCallbacks(r,e.delta,{updaterId:e.updater_id})},e.prototype.invokeUpdateCallbacks=function(e,n,t){if((n=n||{added:{},updated:{},reset:{},removed:[]}).commands){n.added=n.updated=n.reset={},n.removed=[];for(var r=0,o=n.commands;r<o.length;r++){var i=o[r];"remove"===i.type?(-1===i.path.indexOf(".")&&n.removed.push(i.path),setValueToPath$1(n.updated,null,i.path)):"set"===i.type&&setValueToPath$1(n.updated,i.value,i.path)}}for(var l in e.updateCallbacks)if(e.updateCallbacks.hasOwnProperty(l))try{(0,e.updateCallbacks[l])(deepClone$1(e.context),Object.assign({},n.added||{},n.updated||{},n.reset||{}),n.removed,parseInt(l,10),t)}catch(err){this._logger.debug("callback error: "+JSON.stringify(err))}},e.prototype.subscribeToContextDestroyedMessages=function(){for(var e=0,n=[GW_MESSAGE_CONTEXT_DESTROYED$1,GW_MESSAGE_ACTIVITY_DESTROYED$1];e<n.length;e++){var t=n[e],r=this._connection.on(t,this.handleContextDestroyedMessage.bind(this));this._gw3Subscriptions.push(r)}},e.prototype.handleContextDestroyedMessage=function(e){var n,t;if(e.type===GW_MESSAGE_ACTIVITY_DESTROYED$1){if(t=e.activity_id,!(n=this._contextNameToId[t]))return void this._logger.error("Received 'destroyed' for unknown activity: "+e.activity_id)}else if(n=e.context_id,!(t=this._contextIdToName[n]))return void this._logger.error("Received 'destroyed' for unknown context: "+e.context_id);delete this._contextIdToName[n],delete this._contextNameToId[t];var r=this._contextNameToData[t];delete this._contextNameToData[t],r&&r.isAnnounced||this._logger.error("Received 'destroyed' for unknown context: "+n)},e.prototype.sendSubscribe=function(e){return e.sentExplicitSubscription=!0,this._gw3Session.send({type:GW_MESSAGE_SUBSCRIBE_CONTEXT$1,domain:"global",context_id:e.contextId}).then((function(e){}))},e.prototype.sendUnsubscribe=function(e){return e.sentExplicitSubscription=!1,this._gw3Session.send({type:GW_MESSAGE_UNSUBSCRIBE_CONTEXT$1,domain:"global",context_id:e.contextId}).then((function(e){}))},e.prototype.calculateContextDeltaV1=function(e,n){var t={added:{},updated:{},removed:[],reset:void 0};if(e)for(var r=0,o=Object.keys(e);r<o.length;r++){var i=o[r];-1===Object.keys(n).indexOf(i)||null===n[i]||deepEqual$1(e[i],n[i])||(t.updated[i]=n[i])}for(var l=0,a=Object.keys(n);l<a.length;l++){i=a[l];e&&-1!==Object.keys(e).indexOf(i)?null===n[i]&&t.removed.push(i):null!==n[i]&&(t.added[i]=n[i])}return t},e.prototype.calculateContextDeltaV2=function(e,n){for(var t,r,o={added:{},updated:{},removed:[],reset:void 0,commands:[]},i=0,l=Object.keys(n);i<l.length;i++){var a=l[i];if(null!==n[a])deepEqual$1(e?e[a]:null,n[a])||null===(t=o.commands)||void 0===t||t.push({type:"set",path:a,value:n[a]});else null===(r=o.commands)||void 0===r||r.push({type:"remove",path:a})}return o},e}(),ContextsModule$1=function(){function e(e){this._bridge=new GW3Bridge$1(e)}return e.prototype.all=function(){return this._bridge.all()},e.prototype.update=function(e,n){return this.checkName(e),this.checkData(n),this._bridge.update(e,n)},e.prototype.set=function(e,n){return this.checkName(e),this.checkData(n),this._bridge.set(e,n)},e.prototype.setPath=function(e,n,t){return this.checkName(e),this.checkPath(n),""===n?(this.checkData(t),this.set(e,t)):this._bridge.setPath(e,n,t)},e.prototype.setPaths=function(e,n){if(this.checkName(e),!Array.isArray(n))throw new Error("Please provide the paths as an array of PathValues!");for(var t=0,r=n;t<r.length;t++){var o=r[t],i=o.path,l=o.value;this.checkPath(i),""===i&&this.checkData(l)}return this._bridge.setPaths(e,n)},e.prototype.subscribe=function(e,n){var t=this;if(this.checkName(e),"function"!==typeof n)throw new Error("Please provide the callback as a function!");return this._bridge.subscribe(e,(function(e,r,o,i,l){return n(e,r,o,(function(){return t._bridge.unsubscribe(i)}),l)})).then((function(e){return function(){t._bridge.unsubscribe(e)}}))},e.prototype.get=function(e){return this.checkName(e),this._bridge.get(e)},e.prototype.ready=function(){return Promise.resolve(this)},e.prototype.destroy=function(e){return this.checkName(e),this._bridge.destroy(e)},Object.defineProperty(e.prototype,"setPathSupported",{get:function(){return this._bridge.setPathSupported},enumerable:!0,configurable:!0}),e.prototype.checkName=function(e){if("string"!==typeof e||""===e)throw new Error("Please provide the name as a non-empty string!")},e.prototype.checkPath=function(e){if("string"!==typeof e)throw new Error("Please provide the path as a dot delimited string!")},e.prototype.checkData=function(e){if("object"!==typeof e)throw new Error("Please provide the data as an object!")},e}(),InvokeStatus$1;function promisify$1(e,n,t){return"function"!==typeof n&&"function"!==typeof t?e:("function"!==typeof n?n=function(){}:"function"!==typeof t&&(t=function(){}),e.then(n,t))}function rejectAfter$1(e,n,t){var r;void 0===e&&(e=0);var o=function(){r&&clearTimeout(r)};return n.then((function(){o()})).catch((function(){o()})),new Promise((function(n,o){r=setTimeout((function(){return o(t)}),e)}))}!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(InvokeStatus$1||(InvokeStatus$1={}));var Client$1=function(){function e(e,n,t,r){this.protocol=e,this.repo=n,this.instance=t,this.configuration=r}return e.prototype.subscribe=function(e,n,t,r,o){var i=this,l=function(e,t,r,l){var a;n.methodResponseTimeout=null!==(a=n.methodResponseTimeout)&&void 0!==a?a:n.waitTimeoutMs,i.protocol.client.subscribe(t,n,e,r,l,o)};return promisify$1(new Promise((function(t,r){var o,a=function(e){t(e)},u=function(e){r(e)};if(e)if((o="string"===typeof e?{name:e}:e).name){void 0===n&&(n={});var s=n.target;if(void 0===s&&(s="best"),"string"!==typeof s||"all"===s||"best"===s){void 0===n.methodResponseTimeout&&(n.methodResponseTimeout=n.method_response_timeout,void 0===n.methodResponseTimeout&&(n.methodResponseTimeout=i.configuration.methodResponseTimeout)),void 0===n.waitTimeoutMs&&(n.waitTimeoutMs=n.wait_for_method_timeout,void 0===n.waitTimeoutMs&&(n.waitTimeoutMs=i.configuration.waitTimeoutMs));var c=0,d=i.getServerMethodsByFilterAndTarget(o,s);if(d.length>0)l(d,d[0].methods[0],a,u);else{setTimeout((function t(){if(s&&n.waitTimeoutMs)if(c+=500,(d=i.getServerMethodsByFilterAndTarget(o,s)).length>0){var r=d[0].methods[0];l(d,r,a,u)}else if(c>=n.waitTimeoutMs){l(d,"string"===typeof e?{name:e}:e,a,u)}else setTimeout(t,500)}),500)}}else r(new Error('"'+s+'" is not a valid target. Valid targets are "all", "best", or an instance.'))}else r("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.");else r("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.")})),t,r)},e.prototype.servers=function(e){var n=void 0===e?void 0:_assign$3({},e);return this.getServers(n).map((function(e){return e.server.instance}))},e.prototype.methods=function(e){return e="string"===typeof e?{name:e}:_assign$3({},e),this.getMethods(e)},e.prototype.methodsForInstance=function(e){return this.getMethodsForInstance(e)},e.prototype.methodAdded=function(e){return this.repo.onMethodAdded(e)},e.prototype.methodRemoved=function(e){return this.repo.onMethodRemoved(e)},e.prototype.serverAdded=function(e){return this.repo.onServerAdded(e)},e.prototype.serverRemoved=function(e){return this.repo.onServerRemoved((function(n,t){e(n,t)}))},e.prototype.serverMethodAdded=function(e){return this.repo.onServerMethodAdded((function(n,t){e({server:n,method:t})}))},e.prototype.serverMethodRemoved=function(e){return this.repo.onServerMethodRemoved((function(n,t){e({server:n,method:t})}))},e.prototype.invoke=function(e,n,t,r,o,i){return __awaiter$2(this,void 0,void 0,(function(){var l=this;return __generator$1(this,(function(a){return[2,promisify$1(function(){return __awaiter$2(l,void 0,void 0,(function(){var o,i,l,a,u,s,c,d,f,p,h,_,g=this;return __generator$1(this,(function(m){switch(m.label){case 0:if(!(o="string"===typeof e?{name:e}:_assign$3({},e)).name)return[2,Promise.reject("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.")];if(n||(n={}),t||(t="best"),"string"===typeof t&&"all"!==t&&"best"!==t&&"skipMine"!==t)return[2,Promise.reject(new Error('"'+t+'" is not a valid target. Valid targets are "all" and "best".'))];if(r||(r={}),void 0===r.methodResponseTimeoutMs&&(r.methodResponseTimeoutMs=r.method_response_timeout,void 0===r.methodResponseTimeoutMs&&(r.methodResponseTimeoutMs=this.configuration.methodResponseTimeout)),void 0===r.waitTimeoutMs&&(r.waitTimeoutMs=r.wait_for_method_timeout,void 0===r.waitTimeoutMs&&(r.waitTimeoutMs=this.configuration.waitTimeoutMs)),void 0!==r.waitTimeoutMs&&"number"!==typeof r.waitTimeoutMs)return[2,Promise.reject(new Error('"'+r.waitTimeoutMs+'" is not a valid number for "waitTimeoutMs" '))];if("object"!==typeof n)return[2,Promise.reject(new Error("The method arguments must be an object. method: "+o.name))];if(0!==(i=this.getServerMethodsByFilterAndTarget(o,t)).length)return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this.tryToAwaitForMethods(o,t,r)];case 2:return i=m.sent(),[3,4];case 3:return m.sent(),l=_assign$3(_assign$3({},o),{getServers:function(){return[]},supportsStreaming:!1,objectTypes:null!==(p=o.objectTypes)&&void 0!==p?p:[],flags:null!==(_=null===(h=o.flags)||void 0===h?void 0:h.metadata)&&void 0!==_?_:{}}),a={method:l,called_with:n,message:"Can not find a method matching "+JSON.stringify(e)+" with server filter "+JSON.stringify(t),executed_by:void 0,returned:void 0,status:void 0},[2,Promise.reject(a)];case 4:return u=r.methodResponseTimeoutMs,s=r,c=i.map((function(e){var t=shortid$2(),r=e.methods[0],o=e.server,i=g.protocol.client.invoke(t,r,n,o,s);return Promise.race([i,rejectAfter$1(u,i,{invocationId:t,message:"Invocation timeout ("+u+" ms) reached for method name: "+(null===r||void 0===r?void 0:r.name)+", target instance: "+JSON.stringify(o.instance)+", options: "+JSON.stringify(s),status:InvokeStatus$1.Error})])})),[4,Promise.all(c)];case 5:return d=m.sent(),f=this.getInvocationResultObj(d,o,n),d.every((function(e){return e.status===InvokeStatus$1.Error}))?[2,Promise.reject(f)]:[2,f]}}))}))}(),o,i)]}))}))},e.prototype.getInvocationResultObj=function(e,n,t){var r=e.filter((function(e){return e.status===InvokeStatus$1.Success})).reduce((function(e,r){return e=__spreadArrays$1(e,[{executed_by:r.instance,returned:r.result,called_with:t,method:n,message:r.message,status:r.status}])}),[]),o=e.filter((function(e){return e.status===InvokeStatus$1.Error})).reduce((function(e,r){return e=__spreadArrays$1(e,[{executed_by:r.instance,called_with:t,name:n.name,message:r.message}])}),[]),i=e[0];return{method:n,called_with:t,returned:i.result,executed_by:i.instance,all_return_values:r,all_errors:o,message:i.message,status:i.status}},e.prototype.tryToAwaitForMethods=function(e,n,t){var r=this;return new Promise((function(o,i){if(0!==t.waitTimeoutMs)var l=0,a=setInterval((function(){l+=500;var u=r.getServerMethodsByFilterAndTarget(e,n);if(u.length>0)clearInterval(a),o(u);else if(l>=(t.waitTimeoutMs||1e4))return clearInterval(a),void i()}),500);else i()}))},e.prototype.filterByTarget=function(e,n){var t=this;if("string"!==typeof e){return(Array.isArray(e)?e:[e]).reduce((function(e,r){var o=n.filter((function(e){return t.instanceMatch(r,e.server.instance)}));return e.concat(o)}),[])}if("all"===e)return __spreadArrays$1(n);if("best"===e){var r=n.find((function(e){return e.server.instance.isLocal}));if(r)return[r];if(void 0!==n[0])return[n[0]]}else if("skipMine"===e)return n.filter((function(e){return e.server.instance.peerId!==t.instance.peerId}));return[]},e.prototype.instanceMatch=function(e,n){return this.containsProps(e,n)},e.prototype.methodMatch=function(e,n){return this.containsProps(e,n)},e.prototype.containsProps=function(e,n){return Object.keys(e).filter((function(n){return void 0!==e[n]&&"function"!==typeof e[n]&&"object_types"!==n&&"display_name"!==n&&"id"!==n&&"gatewayId"!==n&&"identifier"!==n&&"_"!==n[0]})).every((function(t){var r,o=e[t],i=n[t];switch(t){case"objectTypes":r=(o||[]).every((function(e){return(i||[]).includes(e)}));break;case"flags":r=isSubset$1(i||{},o||{});break;default:r=String(o).toLowerCase()===String(i).toLowerCase()}return r}))},e.prototype.getMethods=function(e){var n=this;return void 0===e?this.repo.getMethods():this.repo.getMethods().filter((function(t){return n.methodMatch(e,t)}))},e.prototype.getMethodsForInstance=function(e){var n=this,t=this.repo.getServers().filter((function(t){return n.instanceMatch(e,t.instance)}));if(0===t.length)return[];var r={};return 1===t.length?r=t[0].methods:t.forEach((function(e){Object.keys(e.methods).forEach((function(n){var t=e.methods[n];r[t.identifier]=t}))})),Object.keys(r).map((function(e){return r[e]}))},e.prototype.getServers=function(e){var n=this,t=this.repo.getServers();return void 0===e?t.map((function(e){return{server:e,methods:[]}})):t.reduce((function(t,r){var o=Object.values(r.methods).filter((function(t){return n.methodMatch(e,t)}));return o.length>0&&t.push({server:r,methods:o}),t}),[])},e.prototype.getServerMethodsByFilterAndTarget=function(e,n){var t=this.getServers(e);return this.filterByTarget(n,t)},e}(),ServerSubscription$1=function(){function e(e,n,t){this.protocol=e,this.repoMethod=n,this.subscription=t}return Object.defineProperty(e.prototype,"stream",{get:function(){if(!this.repoMethod.stream)throw new Error("no stream");return this.repoMethod.stream},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arguments",{get:function(){return this.subscription.arguments||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"branchKey",{get:function(){return this.subscription.branchKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instance",{get:function(){if(!this.subscription.instance)throw new Error("no instance");return this.subscription.instance},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.protocol.server.closeSingleSubscription(this.repoMethod,this.subscription)},e.prototype.push=function(e){this.protocol.server.pushDataToSingle(this.repoMethod,this.subscription,e)},e}(),Request$1=function(){function e(e,n,t){this.protocol=e,this.repoMethod=n,this.requestContext=t,this.arguments=t.arguments,this.instance=t.instance}return e.prototype.accept=function(){this.protocol.server.acceptRequestOnBranch(this.requestContext,this.repoMethod,"")},e.prototype.acceptOnBranch=function(e){this.protocol.server.acceptRequestOnBranch(this.requestContext,this.repoMethod,e)},e.prototype.reject=function(e){this.protocol.server.rejectRequest(this.requestContext,this.repoMethod,e)},e}(),ServerStreaming$2=function(){function e(e,n){var t=this;this.protocol=e,this.server=n,e.server.onSubRequest((function(e,n){return t.handleSubRequest(e,n)})),e.server.onSubAdded((function(e,n){return t.handleSubAdded(e,n)})),e.server.onSubRemoved((function(e,n){return t.handleSubRemoved(e,n)}))}return e.prototype.handleSubRequest=function(e,n){if(n&&n.streamCallbacks&&"function"===typeof n.streamCallbacks.subscriptionRequestHandler){var t=new Request$1(this.protocol,n,e);n.streamCallbacks.subscriptionRequestHandler(t)}},e.prototype.handleSubAdded=function(e,n){if(n&&n.streamCallbacks&&"function"===typeof n.streamCallbacks.subscriptionAddedHandler){var t=new ServerSubscription$1(this.protocol,n,e);n.streamCallbacks.subscriptionAddedHandler(t)}},e.prototype.handleSubRemoved=function(e,n){if(n&&n.streamCallbacks&&"function"===typeof n.streamCallbacks.subscriptionRemovedHandler){var t=new ServerSubscription$1(this.protocol,n,e);n.streamCallbacks.subscriptionRemovedHandler(t)}},e}(),ServerBranch$1=function(){function e(e,n,t){this.key=e,this.protocol=n,this.repoMethod=t}return e.prototype.subscriptions=function(){var e=this;return this.protocol.server.getSubscriptionList(this.repoMethod,this.key).map((function(n){return new ServerSubscription$1(e.protocol,e.repoMethod,n)}))},e.prototype.close=function(){this.protocol.server.closeAllSubscriptions(this.repoMethod,this.key)},e.prototype.push=function(e){this.protocol.server.pushData(this.repoMethod,e,[this.key])},e}(),ServerStream$1=function(){function e(e,n,t){this._protocol=e,this._repoMethod=n,this._server=t,this.name=this._repoMethod.definition.name}return e.prototype.branches=function(e){var n=this,t=this._protocol.server.getBranchList(this._repoMethod);return e?t.indexOf(e)>-1?new ServerBranch$1(e,this._protocol,this._repoMethod):void 0:t.map((function(e){return new ServerBranch$1(e,n._protocol,n._repoMethod)}))},e.prototype.branch=function(e){return this.branches(e)},e.prototype.subscriptions=function(){var e=this;return this._protocol.server.getSubscriptionList(this._repoMethod).map((function(n){return new ServerSubscription$1(e._protocol,e._repoMethod,n)}))},Object.defineProperty(e.prototype,"definition",{get:function(){var e,n=this._repoMethod.definition;return{accepts:n.accepts,description:n.description,displayName:n.displayName,name:n.name,objectTypes:n.objectTypes,returns:n.returns,supportsStreaming:n.supportsStreaming,flags:null===(e=n.flags)||void 0===e?void 0:e.metadata}},enumerable:!0,configurable:!0}),e.prototype.close=function(){this._protocol.server.closeAllSubscriptions(this._repoMethod),this._server.unregister(this._repoMethod.definition,!0)},e.prototype.push=function(e,n){if("string"!==typeof n&&!Array.isArray(n)&&void 0!==n)throw new Error("invalid branches should be string or string array");if("object"!==typeof e)throw new Error("Invalid arguments. Data must be an object.");this._protocol.server.pushData(this._repoMethod,e,n)},e.prototype.updateRepoMethod=function(e){this._repoMethod=e},e}(),Server$1=function(){function e(e,n){this.protocol=e,this.serverRepository=n,this.invocations=0,this.currentlyUnregistering={},this.streaming=new ServerStreaming$2(e,this),this.protocol.server.onInvoked(this.onMethodInvoked.bind(this))}return e.prototype.createStream=function(e,n,t,r,o){var i=this;return promisify$1(new Promise((function(t,r){if(e){var l;if(!(l="string"===typeof e?{name:""+e}:_assign$3({},e)).name)return r("The \u201cname\u201d property is required for the \u201cstreamDefinition\u201d object and must be unique. Stream definition: "+JSON.stringify(l));if(i.serverRepository.getList().some((function(e){return e.definition.name===l.name})))return r('A stream with the name "'+l.name+'" already exists! Please, provide a unique name for the stream.');l.supportsStreaming=!0,n||(n={}),"function"!==typeof n.subscriptionRequestHandler&&(n.subscriptionRequestHandler=function(e){e.accept()});var a=i.serverRepository.add({definition:l,streamCallbacks:n,protocolState:{}});i.protocol.server.createStream(a).then((function(){var e;o?(e=o,o.updateRepoMethod(a)):e=new ServerStream$1(i.protocol,a,i),a.stream=e,t(e)})).catch((function(e){a.repoId&&i.serverRepository.remove(a.repoId),r(e)}))}else r("The stream name must be unique! Please, provide either a unique string for a stream name to \u201cglue.interop.createStream()\u201d or a \u201cmethodDefinition\u201d object with a unique \u201cname\u201d property for the stream.")})),t,r)},e.prototype.register=function(e,n){var t=this;if(!e)return Promise.reject("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.");if("function"!==typeof n)return Promise.reject("The second parameter must be a callback function. Method: "+("string"===typeof e?e:e.name));var r=function(e,r){return __awaiter$2(t,void 0,void 0,(function(){var t,o,i;return __generator$1(this,(function(l){switch(l.label){case 0:return l.trys.push([0,4,,5]),(t=n(e.args,e.instance))&&"function"===typeof t.then?[4,t]:[3,2];case 1:return o=l.sent(),r(void 0,o),[3,3];case 2:r(void 0,t),l.label=3;case 3:return[3,5];case 4:return(i=l.sent())||(i=""),r(i,i),[3,5];case 5:return[2]}}))}))};return r.userCallback=n,this.registerCore(e,r)},e.prototype.registerAsync=function(e,n){if(!e)return Promise.reject("Method definition is required. Please, provide either a unique string for a method name or a \u201cmethodDefinition\u201d object with a required \u201cname\u201d property.");if("function"!==typeof n)return Promise.reject("The second parameter must be a callback function. Method: "+("string"===typeof e?e:e.name));var t=function(e,t){try{var r=!1,o=function(e){r||t(void 0,e),r=!0},i=function(e){r||(e||(e=""),t(e,e)),r=!0},l=n(e.args,e.instance,o,i);l&&"function"===typeof l.then&&l.then(o).catch(i)}catch(a){t(a,void 0)}};return t.userCallbackAsync=n,this.registerCore(e,t)},e.prototype.unregister=function(e,n){return void 0===n&&(n=!1),__awaiter$2(this,void 0,void 0,(function(){var t,r;return __generator$1(this,(function(o){switch(o.label){case 0:return void 0===e?[2,Promise.reject("Please, provide either a unique string for a name or an object containing a \u201cname\u201d property.")]:"function"!==typeof e?[3,2]:[4,this.unregisterWithPredicate(e,n)];case 1:return o.sent(),[2];case 2:return void 0===(t="string"===typeof e?{name:e}:e).name?[2,Promise.reject("Method name is required. Cannot find a method if the method name is undefined!")]:(r=this.serverRepository.getList().find((function(e){return e.definition.name===t.name&&(e.definition.supportsStreaming||!1)===n})))?[4,this.removeMethodsOrStreams([r])]:[2,Promise.reject('Method with a name "'+t.name+'" does not exist or is not registered by your application!')];case 3:return o.sent(),[2]}}))}))},e.prototype.unregisterWithPredicate=function(e,n){return __awaiter$2(this,void 0,void 0,(function(){var t;return __generator$1(this,(function(r){switch(r.label){case 0:return(t=this.serverRepository.getList().filter((function(n){return e(n.definition)})).filter((function(e){return(e.definition.supportsStreaming||!1)===n})))&&0!==t.length?[4,this.removeMethodsOrStreams(t)]:[2,Promise.reject("Could not find a "+(n?"stream":"method")+" matching the specified condition!")];case 1:return r.sent(),[2]}}))}))},e.prototype.removeMethodsOrStreams=function(e){var n=this,t=[];return e.forEach((function(e){var r=n.protocol.server.unregister(e).then((function(){e.repoId&&n.serverRepository.remove(e.repoId)}));t.push(r),n.addAsCurrentlyUnregistering(e.definition.name,r)})),Promise.all(t)},e.prototype.addAsCurrentlyUnregistering=function(e,n){return __awaiter$2(this,void 0,void 0,(function(){var t,r=this;return __generator$1(this,(function(o){return t=new Promise((function(e){return setTimeout(e,5e3)})),this.currentlyUnregistering[e]=Promise.race([n,t]).then((function(){delete r.currentlyUnregistering[e]})),[2]}))}))},e.prototype.registerCore=function(e,n){return __awaiter$2(this,void 0,void 0,(function(){var t,r,o,i=this;return __generator$1(this,(function(l){switch(l.label){case 0:return(t="string"===typeof e?{name:""+e}:_assign$3({},e)).name?(r=this.currentlyUnregistering[t.name])?[4,r]:[3,2]:[2,Promise.reject("Please, provide a (unique) string value for the \u201cname\u201d property in the \u201cmethodDefinition\u201d object: "+JSON.stringify(e))];case 1:l.sent(),l.label=2;case 2:return this.serverRepository.getList().some((function(e){return e.definition.name===t.name}))?[2,Promise.reject('A method with the name "'+t.name+'" already exists! Please, provide a unique name for the method.')]:t.supportsStreaming?[2,Promise.reject("When you create methods with \u201cglue.interop.register()\u201d or \u201cglue.interop.registerAsync()\u201d the property \u201csupportsStreaming\u201d cannot be \u201ctrue\u201d. If you want \u201c"+t.name+"\u201d to be a stream, please use the \u201cglue.interop.createStream()\u201d method.")]:(o=this.serverRepository.add({definition:t,theFunction:n,protocolState:{}}),[2,this.protocol.server.register(o).catch((function(e){throw(null===o||void 0===o?void 0:o.repoId)&&i.serverRepository.remove(o.repoId),e}))])}}))}))},e.prototype.onMethodInvoked=function(e,n,t){var r=this;e&&e.theFunction&&e.theFunction(t,(function(t,o){if(void 0!==t&&null!==t)if(t.message&&"string"===typeof t.message)t=t.message;else if("string"!==typeof t)try{t=JSON.stringify(t)}catch(i){t="un-stringifyable error in onMethodInvoked! Top level prop names: "+Object.keys(t)}o?("object"!==typeof o||Array.isArray(o))&&(o={_value:o}):o={},r.protocol.server.methodInvocationResult(e,n,t,o)}))},e}(),InstanceWrapper$1=function(){function e(e,n,t){var r=this;this.wrapped={},this.wrapped.getMethods=function(){return e.methodsForInstance(this)},this.wrapped.getStreams=function(){return e.methodsForInstance(this).filter((function(e){return e.supportsStreaming}))},n&&this.refreshWrappedObject(n),t&&(t.loggedIn((function(){r.refresh(t)})),this.refresh(t))}return e.prototype.unwrap=function(){return this.wrapped},e.prototype.refresh=function(e){if(e){var n=null===e||void 0===e?void 0:e.resolvedIdentity,t=Object.assign({},null!==n&&void 0!==n?n:{},{peerId:null===e||void 0===e?void 0:e.peerId});this.refreshWrappedObject(t)}},e.prototype.refreshWrappedObject=function(e){var n,t,r;this.wrapped.user=e.user,this.wrapped.instance=e.instance,this.wrapped.application=null!==(n=e.application)&&void 0!==n?n:shortid$2(),this.wrapped.applicationName=e.applicationName,this.wrapped.pid=null!==(r=null!==(t=e.pid)&&void 0!==t?t:e.process)&&void 0!==r?r:Math.floor(1e10*Math.random()),this.wrapped.machine=e.machine,this.wrapped.environment=e.environment,this.wrapped.region=e.region,this.wrapped.windowId=e.windowId,this.wrapped.isLocal=!0,this.wrapped.api=e.api,this.wrapped.service=e.service,this.wrapped.peerId=e.peerId},e}(),hideMethodSystemFlags$1=function(e){return _assign$3(_assign$3({},e),{flags:e.flags.metadata||{}})},ClientRepository$1=function(){function e(e,n){this.logger=e,this.API=n,this.servers={},this.methodsCount={},this.callbacks=lib$3();var t=this.API.instance.peerId;this.myServer={id:t,methods:{},instance:this.API.instance,wrapper:this.API.unwrappedInstance},this.servers[t]=this.myServer}return e.prototype.addServer=function(e,n){this.logger.debug("adding server "+n);var t=this.servers[n];if(t)return t.id;var r=new InstanceWrapper$1(this.API,e),o={id:n,methods:{},instance:r.unwrap(),wrapper:r};return this.servers[n]=o,this.callbacks.execute("onServerAdded",o.instance),n},e.prototype.removeServerById=function(e,n){var t=this,r=this.servers[e];r?(this.logger.debug("removing server "+e),Object.keys(r.methods).forEach((function(n){t.removeServerMethod(e,n)})),delete this.servers[e],this.callbacks.execute("onServerRemoved",r.instance,n)):this.logger.warn("not aware of server "+e+", my state "+JSON.stringify(Object.keys(this.servers)))},e.prototype.addServerMethod=function(e,n){var t,r=this.servers[e];if(!r)throw new Error("server does not exists");if(!r.methods[n.id]){var o=this.createMethodIdentifier(n),i=this,l={identifier:o,gatewayId:n.id,name:n.name,displayName:n.display_name,description:n.description,version:n.version,objectTypes:n.object_types||[],accepts:n.input_signature,returns:n.result_signature,supportsStreaming:"undefined"!==typeof n.flags&&n.flags.streaming,flags:null!==(t=n.flags)&&void 0!==t?t:{},getServers:function(){return i.getServersByMethod(o)}};l.object_types=l.objectTypes,l.display_name=l.displayName,l.version=l.version,r.methods[n.id]=l;var a=hideMethodSystemFlags$1(l);return this.methodsCount[o]||(this.methodsCount[o]=0,this.callbacks.execute("onMethodAdded",a)),this.methodsCount[o]=this.methodsCount[o]+1,this.callbacks.execute("onServerMethodAdded",r.instance,a),l}},e.prototype.removeServerMethod=function(e,n){var t=this.servers[e];if(!t)throw new Error("server does not exists");var r=t.methods[n];delete t.methods[n];var o=hideMethodSystemFlags$1(r);this.methodsCount[r.identifier]=this.methodsCount[r.identifier]-1,0===this.methodsCount[r.identifier]&&this.callbacks.execute("onMethodRemoved",o),this.callbacks.execute("onServerMethodRemoved",t.instance,o)},e.prototype.getMethods=function(){return this.extractMethodsFromServers(Object.values(this.servers)).map(hideMethodSystemFlags$1)},e.prototype.getServers=function(){return Object.values(this.servers).map(this.hideServerMethodSystemFlags)},e.prototype.onServerAdded=function(e){var n=this.callbacks.add("onServerAdded",e),t=this.getServers().map((function(e){return e.instance}));return this.returnUnsubWithDelayedReplay(n,t,e)},e.prototype.onMethodAdded=function(e){var n=this.callbacks.add("onMethodAdded",e),t=this.getMethods();return this.returnUnsubWithDelayedReplay(n,t,e)},e.prototype.onServerMethodAdded=function(e){var n=this.callbacks.add("onServerMethodAdded",e),t=!1,r=this.getServers();return setTimeout((function(){r.forEach((function(n){var r=n.methods;Object.keys(r).forEach((function(o){t||e(n.instance,r[o])}))}))}),0),function(){t=!0,n()}},e.prototype.onMethodRemoved=function(e){return this.callbacks.add("onMethodRemoved",e)},e.prototype.onServerRemoved=function(e){return this.callbacks.add("onServerRemoved",e)},e.prototype.onServerMethodRemoved=function(e){return this.callbacks.add("onServerMethodRemoved",e)},e.prototype.getServerById=function(e){return this.hideServerMethodSystemFlags(this.servers[e])},e.prototype.reset=function(){var e,n=this;Object.keys(this.servers).forEach((function(e){n.removeServerById(e,"reset")})),this.servers=((e={})[this.myServer.id]=this.myServer,e),this.methodsCount={}},e.prototype.createMethodIdentifier=function(e){var n=void 0!==e.input_signature?e.input_signature:"",t=void 0!==e.result_signature?e.result_signature:"";return(e.name+n+t).toLowerCase()},e.prototype.getServersByMethod=function(e){var n=[];return Object.values(this.servers).forEach((function(t){Object.values(t.methods).forEach((function(r){r.identifier===e&&n.push(t.instance)}))})),n},e.prototype.returnUnsubWithDelayedReplay=function(e,n,t){var r=!1;return setTimeout((function(){n.forEach((function(e){r||t(e)}))}),0),function(){r=!0,e()}},e.prototype.hideServerMethodSystemFlags=function(e){var n={};return Object.entries(e.methods).forEach((function(e){var t=e[0],r=e[1];n[t]=hideMethodSystemFlags$1(r)})),_assign$3(_assign$3({},e),{methods:n})},e.prototype.extractMethodsFromServers=function(e){return Object.values(e).reduce((function(e,n){return __spreadArrays$1(e,Object.values(n.methods))}),[])},e}(),ServerRepository$1=function(){function e(){this.nextId=0,this.methods=[]}return e.prototype.add=function(e){return e.repoId=String(this.nextId),this.nextId+=1,this.methods.push(e),e},e.prototype.remove=function(e){if("string"!==typeof e)return new TypeError("Expecting a string");this.methods=this.methods.filter((function(n){return n.repoId!==e}))},e.prototype.getById=function(e){if("string"===typeof e)return this.methods.find((function(n){return n.repoId===e}))},e.prototype.getList=function(){return this.methods.map((function(e){return e}))},e.prototype.length=function(){return this.methods.length},e.prototype.reset=function(){this.methods=[]},e}(),SUBSCRIPTION_REQUEST$1="onSubscriptionRequest",SUBSCRIPTION_ADDED$1="onSubscriptionAdded",SUBSCRIPTION_REMOVED$1="onSubscriptionRemoved",ServerStreaming$1$1=function(){function e(e,n,t){var r=this;this.session=e,this.repository=n,this.serverRepository=t,this.ERR_URI_SUBSCRIPTION_FAILED="com.tick42.agm.errors.subscription.failure",this.callbacks=lib$3(),this.nextStreamId=0,e.on("add-interest",(function(e){r.handleAddInterest(e)})),e.on("remove-interest",(function(e){r.handleRemoveInterest(e)}))}return e.prototype.acceptRequestOnBranch=function(e,n,t){if("string"!==typeof t&&(t=""),"object"!==typeof n.protocolState.subscriptionsMap)throw new TypeError("The streaming method is missing its subscriptions.");if(!Array.isArray(n.protocolState.branchKeyToStreamIdMap))throw new TypeError("The streaming method is missing its branches.");var r=this.getStreamId(n,t),o=e.msg.subscription_id,i={id:o,arguments:e.arguments,instance:e.instance,branchKey:t,streamId:r,subscribeMsg:e.msg};n.protocolState.subscriptionsMap[o]=i,this.session.sendFireAndForget({type:"accepted",subscription_id:o,stream_id:r}),this.callbacks.execute(SUBSCRIPTION_ADDED$1,i,n)},e.prototype.rejectRequest=function(e,n,t){"string"!==typeof t&&(t=""),this.sendSubscriptionFailed("Subscription rejected by user. "+t,e.msg.subscription_id)},e.prototype.pushData=function(e,n,t){var r=this;if("object"===typeof e&&Array.isArray(e.protocolState.branchKeyToStreamIdMap)){if("object"!==typeof n)throw new Error("Invalid arguments. Data must be an object.");"string"===typeof t?t=[t]:(!Array.isArray(t)||t.length<=0)&&(t=[]),e.protocolState.branchKeyToStreamIdMap.filter((function(e){return!t||0===t.length||t.indexOf(e.key)>=0})).map((function(e){return e.streamId})).forEach((function(e){var t={type:"publish",stream_id:e,data:n};r.session.sendFireAndForget(t)}))}},e.prototype.pushDataToSingle=function(e,n,t){if("object"!==typeof t)throw new Error("Invalid arguments. Data must be an object.");var r={type:"post",subscription_id:n.id,data:t};this.session.sendFireAndForget(r)},e.prototype.closeSingleSubscription=function(e,n){e.protocolState.subscriptionsMap&&delete e.protocolState.subscriptionsMap[n.id];var t={type:"drop-subscription",subscription_id:n.id,reason:"Server dropping a single subscription"};this.session.sendFireAndForget(t);n.instance;this.callbacks.execute(SUBSCRIPTION_REMOVED$1,n,e)},e.prototype.closeMultipleSubscriptions=function(e,n){var t=this;if("object"===typeof e&&"object"===typeof e.protocolState.subscriptionsMap&&e.protocolState.subscriptionsMap){var r=e.protocolState.subscriptionsMap,o=Object.keys(r).map((function(e){return r[e]}));"string"===typeof n&&(o=o.filter((function(e){return e.branchKey===n}))),o.forEach((function(e){delete r[e.id];var n={type:"drop-subscription",subscription_id:e.id,reason:"Server dropping all subscriptions on stream_id: "+e.streamId};t.session.sendFireAndForget(n)}))}},e.prototype.getSubscriptionList=function(e,n){if("object"!==typeof e)return[];if(!e.protocolState.subscriptionsMap)return[];var t=e.protocolState.subscriptionsMap,r=Object.keys(t).map((function(e){return t[e]}));return"string"!==typeof n?r:r.filter((function(e){return e.branchKey===n}))},e.prototype.getBranchList=function(e){if("object"!==typeof e)return[];if(!e.protocolState.subscriptionsMap)return[];var n=e.protocolState.subscriptionsMap,t=Object.keys(n).map((function(e){return n[e]})),r=[];return t.forEach((function(e){var n="";"object"===typeof e&&"string"===typeof e.branchKey&&(n=e.branchKey),-1===r.indexOf(n)&&r.push(n)})),r},e.prototype.onSubAdded=function(e){this.onSubscriptionLifetimeEvent(SUBSCRIPTION_ADDED$1,e)},e.prototype.onSubRequest=function(e){this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REQUEST$1,e)},e.prototype.onSubRemoved=function(e){this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REMOVED$1,e)},e.prototype.handleRemoveInterest=function(e){var n=this.serverRepository.getById(e.method_id);if("string"===typeof e.subscription_id&&"object"===typeof n&&n.protocolState.subscriptionsMap&&"object"===typeof n.protocolState.subscriptionsMap[e.subscription_id]){var t=n.protocolState.subscriptionsMap[e.subscription_id];delete n.protocolState.subscriptionsMap[e.subscription_id],this.callbacks.execute(SUBSCRIPTION_REMOVED$1,t,n)}},e.prototype.onSubscriptionLifetimeEvent=function(e,n){this.callbacks.add(e,n)},e.prototype.getNextStreamId=function(){return this.nextStreamId+++""},e.prototype.handleAddInterest=function(e){var n=this.repository.getServerById(e.caller_id).instance,t={msg:e,arguments:e.arguments_kv||{},instance:n},r=this.serverRepository.getById(e.method_id);if(void 0!==r)r.protocolState.subscriptionsMap&&r.protocolState.subscriptionsMap[e.subscription_id]?this.sendSubscriptionFailed("A subscription with id "+e.subscription_id+" already exists.",e.subscription_id):this.callbacks.execute(SUBSCRIPTION_REQUEST$1,t,r);else{var o="No method with id "+e.method_id+" on this server.";this.sendSubscriptionFailed(o,e.subscription_id)}},e.prototype.sendSubscriptionFailed=function(e,n){var t={type:"error",reason_uri:this.ERR_URI_SUBSCRIPTION_FAILED,reason:e,request_id:n};this.session.sendFireAndForget(t)},e.prototype.getStreamId=function(e,n){if("string"!==typeof n&&(n=""),!e.protocolState.branchKeyToStreamIdMap)throw new Error("streaming "+e.definition.name+" method without protocol state");var t=e.protocolState.branchKeyToStreamIdMap.filter((function(e){return e.key===n}))[0],r=t?t.streamId:void 0;return"string"===typeof r&&""!==r||(r=this.getNextStreamId(),e.protocolState.branchKeyToStreamIdMap.push({key:n,streamId:r})),r},e}(),ServerProtocol$1=function(){function e(e,n,t,r){var o=this;this.session=e,this.clientRepository=n,this.serverRepository=t,this.logger=r,this.callbacks=lib$3(),this.streaming=new ServerStreaming$1$1(e,n,t),this.session.on("invoke",(function(e){return o.handleInvokeMessage(e)}))}return e.prototype.createStream=function(e){return e.protocolState.subscriptionsMap={},e.protocolState.branchKeyToStreamIdMap=[],this.register(e,!0)},e.prototype.register=function(e,n){var t,r=this,o=e.definition,i=Object.assign({},{metadata:null!==(t=o.flags)&&void 0!==t?t:{}},{streaming:n||!1}),l={type:"register",methods:[{id:e.repoId,name:o.name,display_name:o.displayName,description:o.description,version:o.version,flags:i,object_types:o.objectTypes||o.object_types,input_signature:o.accepts,result_signature:o.returns,restrictions:void 0}]};return this.session.send(l,{methodId:e.repoId}).then((function(){r.logger.debug("registered method "+e.definition.name+" with id "+e.repoId)})).catch((function(n){throw r.logger.warn("failed to register method "+e.definition.name+" with id "+e.repoId+" - "+JSON.stringify(n)),n}))},e.prototype.onInvoked=function(e){this.callbacks.add("onInvoked",e)},e.prototype.methodInvocationResult=function(e,n,t,r){var o;o=t||""===t?{type:"error",request_id:n,reason_uri:"agm.errors.client_error",reason:t,context:r,peer_id:void 0}:{type:"yield",invocation_id:n,peer_id:this.session.peerId,result:r,request_id:void 0},this.session.sendFireAndForget(o)},e.prototype.unregister=function(e){return __awaiter$2(this,void 0,void 0,(function(){var n;return __generator$1(this,(function(t){switch(t.label){case 0:return n={type:"unregister",methods:[e.repoId]},[4,this.session.send(n)];case 1:return t.sent(),[2]}}))}))},e.prototype.getBranchList=function(e){return this.streaming.getBranchList(e)},e.prototype.getSubscriptionList=function(e,n){return this.streaming.getSubscriptionList(e,n)},e.prototype.closeAllSubscriptions=function(e,n){this.streaming.closeMultipleSubscriptions(e,n)},e.prototype.pushData=function(e,n,t){this.streaming.pushData(e,n,t)},e.prototype.pushDataToSingle=function(e,n,t){this.streaming.pushDataToSingle(e,n,t)},e.prototype.closeSingleSubscription=function(e,n){this.streaming.closeSingleSubscription(e,n)},e.prototype.acceptRequestOnBranch=function(e,n,t){this.streaming.acceptRequestOnBranch(e,n,t)},e.prototype.rejectRequest=function(e,n,t){this.streaming.rejectRequest(e,n,t)},e.prototype.onSubRequest=function(e){this.streaming.onSubRequest(e)},e.prototype.onSubAdded=function(e){this.streaming.onSubAdded(e)},e.prototype.onSubRemoved=function(e){this.streaming.onSubRemoved(e)},e.prototype.handleInvokeMessage=function(e){var n=e.invocation_id,t=e.caller_id,r=e.method_id,o=e.arguments_kv,i=this.serverRepository.getList().filter((function(e){return e.repoId===r}))[0];if(void 0!==i){var l={args:o,instance:this.clientRepository.getServerById(t).instance};this.callbacks.execute("onInvoked",i,n,l)}},e}(),UserSubscription$1=function(){function e(e,n){this.repository=e,this.subscriptionData=n}return Object.defineProperty(e.prototype,"requestArguments",{get:function(){return this.subscriptionData.params.arguments||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){var e=this;return this.subscriptionData.trackedServers.filter((function(e){return e.subscriptionId})).map((function(n){return e.repository.getServerById(n.serverId).instance}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverInstance",{get:function(){return this.servers[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stream",{get:function(){return this.subscriptionData.method},enumerable:!0,configurable:!0}),e.prototype.onData=function(e){if("function"!==typeof e)throw new TypeError("The data callback must be a function.");this.subscriptionData.handlers.onData.push(e),1===this.subscriptionData.handlers.onData.length&&this.subscriptionData.queued.data.length>0&&this.subscriptionData.queued.data.forEach((function(n){e(n)}))},e.prototype.onClosed=function(e){if("function"!==typeof e)throw new TypeError("The callback must be a function.");this.subscriptionData.handlers.onClosed.push(e)},e.prototype.onFailed=function(e){},e.prototype.onConnected=function(e){if("function"!==typeof e)throw new TypeError("The callback must be a function.");this.subscriptionData.handlers.onConnected.push(e)},e.prototype.close=function(){this.subscriptionData.close()},e.prototype.setNewSubscription=function(e){this.subscriptionData=e},e}(),STATUS_AWAITING_ACCEPT$1="awaitingAccept",STATUS_SUBSCRIBED$1="subscribed",ERR_MSG_SUB_FAILED$1="Subscription failed.",ERR_MSG_SUB_REJECTED$1="Subscription rejected.",ON_CLOSE_MSG_SERVER_INIT$1="ServerInitiated",ON_CLOSE_MSG_CLIENT_INIT$1="ClientInitiated",ClientStreaming$1=function(){function e(e,n,t){var r=this;this.session=e,this.repository=n,this.logger=t,this.subscriptionsList={},this.subscriptionIdToLocalKeyMap={},this.nextSubLocalKey=0,this.handleErrorSubscribing=function(e){var n=e._tag,t=n.subLocalKey,o=r.subscriptionsList[t];if("object"===typeof o&&(o.trackedServers=o.trackedServers.filter((function(e){return e.serverId!==n.serverId})),o.trackedServers.length<=0)){if(clearTimeout(o.timeoutId),o.status===STATUS_AWAITING_ACCEPT$1){var i="string"===typeof e.reason&&""!==e.reason?' Publisher said "'+e.reason+'".':" No reason given.",l="object"===typeof o.params.arguments?JSON.stringify(o.params.arguments):"{}";o.error({message:ERR_MSG_SUB_REJECTED$1+i+" Called with:"+l,called_with:o.params.arguments,method:o.method})}else o.status===STATUS_SUBSCRIBED$1&&r.callOnClosedHandlers(o);delete r.subscriptionsList[t]}},this.handleSubscribed=function(e){var n=e._tag.subLocalKey,t=r.subscriptionsList[n];if("object"===typeof t){var o=e._tag.serverId,i=t.trackedServers.filter((function(e){return e.serverId===o}))[0];if("object"===typeof i){i.subscriptionId=e.subscription_id,r.subscriptionIdToLocalKeyMap[e.subscription_id]=n;var l=t.status===STATUS_AWAITING_ACCEPT$1;if(t.status=STATUS_SUBSCRIBED$1,l){var a=!1,u=t.subscription;u?(u.setNewSubscription(t),t.success(u),a=!0):(u=new UserSubscription$1(r.repository,t),t.subscription=u,t.success(u));for(var s=0,c=t.handlers.onConnected;s<c.length;s++){var d=c[s];try{d(u.serverInstance,a)}catch(f){}}}}}},this.handleEventData=function(e){var n=r.subscriptionIdToLocalKeyMap[e.subscription_id];if("undefined"!==typeof n){var t=r.subscriptionsList[n];if("object"===typeof t){var o=t.trackedServers.filter((function(n){return n.subscriptionId===e.subscription_id}));if(1===o.length){var i=e.oob,l=o[0].serverId,a=function(){return{data:e.data,server:r.repository.getServerById(l).instance,requestArguments:t.params.arguments,message:void 0,private:i}},u=t.handlers.onData,s=t.queued.data;u.length>0?u.forEach((function(e){"function"===typeof e&&e(a())})):s.push(a())}}}},this.handleSubscriptionCancelled=function(e){var n=r.subscriptionIdToLocalKeyMap[e.subscription_id];if("undefined"!==typeof n){var t=r.subscriptionsList[n];if("object"===typeof t){var o=t.trackedServers.length-1;t.trackedServers=t.trackedServers.filter((function(n){return n.subscriptionId!==e.subscription_id||(t.queued.closers.push(n.serverId),!1)})),t.trackedServers.length===o&&(t.trackedServers.length<=0&&(clearTimeout(t.timeoutId),r.callOnClosedHandlers(t),delete r.subscriptionsList[n]),delete r.subscriptionIdToLocalKeyMap[e.subscription_id])}}},e.on("subscribed",this.handleSubscribed),e.on("event",this.handleEventData),e.on("subscription-cancelled",this.handleSubscriptionCancelled)}return e.prototype.subscribe=function(e,n,t,r,o,i){var l=this;if(0!==t.length){var a=this.getNextSubscriptionLocalKey(),u=this.registerSubscription(a,e,n,r,o,n.methodResponseTimeout||1e4,i);"object"===typeof u?t.forEach((function(t){var r=t.server.id,o=t.methods.find((function(n){return n.name===e.name}));if(o){u.trackedServers.push({serverId:r,subscriptionId:void 0});var i={type:"subscribe",server_id:r,method_id:o.gatewayId,arguments_kv:n.arguments};l.session.send(i,{serverId:r,subLocalKey:a}).then((function(e){return l.handleSubscribed(e)})).catch((function(e){return l.handleErrorSubscribing(e)}))}else l.logger.error("can not find method "+e.name+" for target "+t.server.id)})):o({method:e,called_with:n.arguments,message:ERR_MSG_SUB_FAILED$1+" Unable to register the user callbacks."})}else o({method:e,called_with:n.arguments,message:ERR_MSG_SUB_FAILED$1+" No available servers matched the target params."})},e.prototype.drainSubscriptions=function(){var e=Object.values(this.subscriptionsList);return this.subscriptionsList={},this.subscriptionIdToLocalKeyMap={},e},e.prototype.getNextSubscriptionLocalKey=function(){var e=this.nextSubLocalKey;return this.nextSubLocalKey+=1,e},e.prototype.registerSubscription=function(e,n,t,r,o,i,l){var a=this,u={localKey:e,status:STATUS_AWAITING_ACCEPT$1,method:n,params:t,success:r,error:o,trackedServers:[],handlers:{onData:(null===l||void 0===l?void 0:l.handlers.onData)||[],onClosed:(null===l||void 0===l?void 0:l.handlers.onClosed)||[],onConnected:(null===l||void 0===l?void 0:l.handlers.onConnected)||[]},queued:{data:[],closers:[]},timeoutId:void 0,close:function(){return a.closeSubscription(e)},subscription:null===l||void 0===l?void 0:l.subscription};return l||(t.onData&&u.handlers.onData.push(t.onData),t.onClosed&&u.handlers.onClosed.push(t.onClosed),t.onConnected&&u.handlers.onConnected.push(t.onConnected)),this.subscriptionsList[e]=u,u.timeoutId=setTimeout((function(){if(void 0!==a.subscriptionsList[e]){var r=a.subscriptionsList[e];r.status===STATUS_AWAITING_ACCEPT$1?(o({method:n,called_with:t.arguments,message:ERR_MSG_SUB_FAILED$1+" Subscription attempt timed out after "+i+" ms."}),delete a.subscriptionsList[e]):r.status===STATUS_SUBSCRIBED$1&&r.trackedServers.length>0&&(r.trackedServers=r.trackedServers.filter((function(e){return"undefined"!==typeof e.subscriptionId})),delete r.timeoutId,r.trackedServers.length<=0&&(a.callOnClosedHandlers(r),delete a.subscriptionsList[e]))}}),i),u},e.prototype.callOnClosedHandlers=function(e,n){var t,r=e.queued.closers.length,o=r>0?e.queued.closers[r-1]:null;void 0!==o&&"string"===typeof o&&(t=this.repository.getServerById(o).instance),e.handlers.onClosed.forEach((function(r){"function"===typeof r&&r({message:n||ON_CLOSE_MSG_SERVER_INIT$1,requestArguments:e.params.arguments||{},server:t,stream:e.method})}))},e.prototype.closeSubscription=function(e){var n=this,t=this.subscriptionsList[e];"object"===typeof t&&(t.trackedServers.forEach((function(e){"undefined"!==typeof e.subscriptionId&&(t.queued.closers.push(e.serverId),n.session.sendFireAndForget({type:"unsubscribe",subscription_id:e.subscriptionId,reason_uri:"",reason:ON_CLOSE_MSG_CLIENT_INIT$1}),delete n.subscriptionIdToLocalKeyMap[e.subscriptionId])})),t.trackedServers=[],this.callOnClosedHandlers(t,ON_CLOSE_MSG_CLIENT_INIT$1),delete this.subscriptionsList[e])},e}(),ClientProtocol$1=function(){function e(e,n,t){var r=this;this.session=e,this.repository=n,this.logger=t,e.on("peer-added",(function(e){return r.handlePeerAdded(e)})),e.on("peer-removed",(function(e){return r.handlePeerRemoved(e)})),e.on("methods-added",(function(e){return r.handleMethodsAddedMessage(e)})),e.on("methods-removed",(function(e){return r.handleMethodsRemovedMessage(e)})),this.streaming=new ClientStreaming$1(e,n,t)}return e.prototype.subscribe=function(e,n,t,r,o,i){this.streaming.subscribe(e,n,t,r,o,i)},e.prototype.invoke=function(e,n,t,r){var o=this,i=r.id,l={type:"call",server_id:i,method_id:n.gatewayId,arguments_kv:t};return this.session.send(l,{invocationId:e,serverId:i}).then((function(e){return o.handleResultMessage(e)})).catch((function(e){return o.handleInvocationError(e)}))},e.prototype.drainSubscriptions=function(){return this.streaming.drainSubscriptions()},e.prototype.handlePeerAdded=function(e){var n=e.new_peer_id,t=e.identity,r=!e.meta||e.meta.local,o=Number(t.process),i={machine:t.machine,pid:isNaN(o)?t.process:o,instance:t.instance,application:t.application,applicationName:t.applicationName,environment:t.environment,region:t.region,user:t.user,windowId:t.windowId,peerId:n,api:t.api,isLocal:r};this.repository.addServer(i,n)},e.prototype.handlePeerRemoved=function(e){var n=e.removed_id,t=e.reason;this.repository.removeServerById(n,t)},e.prototype.handleMethodsAddedMessage=function(e){var n=this,t=e.server_id;e.methods.forEach((function(e){n.repository.addServerMethod(t,e)}))},e.prototype.handleMethodsRemovedMessage=function(e){var n=this,t=e.server_id,r=e.methods,o=this.repository.getServerById(t);Object.keys(o.methods).forEach((function(e){var i=o.methods[e];r.indexOf(i.gatewayId)>-1&&n.repository.removeServerMethod(t,e)}))},e.prototype.handleResultMessage=function(e){var n=e._tag.invocationId,t=e.result,r=e._tag.serverId;return{invocationId:n,result:t,instance:this.repository.getServerById(r).instance,status:InvokeStatus$1.Success,message:""}},e.prototype.handleInvocationError=function(e){if(this.logger.debug("handle invocation error "+JSON.stringify(e)),"_tag"in e){var n=e._tag.invocationId,t=e._tag.serverId,r=this.repository.getServerById(t),o=e.reason;return{invocationId:n,result:e.context,instance:r.instance,status:InvokeStatus$1.Error,message:o}}return{invocationId:"",message:e.message,status:InvokeStatus$1.Error,error:e}},e}();function gW3ProtocolFactory$1(e,n,t,r,o,i){var l,a=o.logger.subLogger("gw3-protocol"),u=new Promise((function(e){l=e})),s=n.domain("agm",["subscribed"]),c=new ServerProtocol$1(s,t,r,a.subLogger("server")),d=new ClientProtocol$1(s,t,a.subLogger("client"));return s.onJoined((function(o){t.addServer(e,n.peerId),o?function(){a.info("reconnected - will replay registered methods and subscriptions");for(var e=0,n=d.drainSubscriptions();e<n.length;e++){var t=n[e],o=t.method,l=Object.assign({},t.params);a.info("trying to re-subscribe to method "+o.name),i.client.subscribe(o,l,void 0,void 0,t)}var u=r.getList();r.reset();for(var s=0,c=u;s<c.length;s++){var f=c[s],p=f.definition;a.info("re-publishing method "+p.name),f.stream?i.server.createStream(p,f.streamCallbacks,void 0,void 0,f.stream):f.theFunction&&f.theFunction.userCallback?i.register(p,f.theFunction.userCallback):f.theFunction&&f.theFunction.userCallbackAsync&&i.registerAsync(p,f.theFunction.userCallbackAsync)}}():l&&(l({client:d,server:c}),l=void 0)})),s.onLeft((function(){t.reset()})),s.join(),u}var Interop$1=function(){function e(e){var n=this;if("undefined"===typeof e)throw new Error("configuration is required");if("undefined"===typeof e.connection)throw new Error("configuration.connections is required");var t,r=e.connection;if("number"!==typeof e.methodResponseTimeout&&(e.methodResponseTimeout=3e4),"number"!==typeof e.waitTimeoutMs&&(e.waitTimeoutMs=3e4),this.unwrappedInstance=new InstanceWrapper$1(this,void 0,r),this.instance=this.unwrappedInstance.unwrap(),this.clientRepository=new ClientRepository$1(e.logger.subLogger("cRep"),this),this.serverRepository=new ServerRepository$1,3!==r.protocolVersion)throw new Error("protocol "+r.protocolVersion+" not supported");t=gW3ProtocolFactory$1(this.instance,r,this.clientRepository,this.serverRepository,e,this),this.readyPromise=t.then((function(t){return n.protocol=t,n.client=new Client$1(n.protocol,n.clientRepository,n.instance,e),n.server=new Server$1(n.protocol,n.serverRepository),n}))}return e.prototype.ready=function(){return this.readyPromise},e.prototype.serverRemoved=function(e){return this.client.serverRemoved(e)},e.prototype.serverAdded=function(e){return this.client.serverAdded(e)},e.prototype.serverMethodRemoved=function(e){return this.client.serverMethodRemoved(e)},e.prototype.serverMethodAdded=function(e){return this.client.serverMethodAdded(e)},e.prototype.methodRemoved=function(e){return this.client.methodRemoved(e)},e.prototype.methodAdded=function(e){return this.client.methodAdded(e)},e.prototype.methodsForInstance=function(e){return this.client.methodsForInstance(e)},e.prototype.methods=function(e){return this.client.methods(e)},e.prototype.servers=function(e){return this.client.servers(e)},e.prototype.subscribe=function(e,n,t,r){return this.client.subscribe(e,n,t,r)},e.prototype.createStream=function(e,n,t,r){return this.server.createStream(e,n,t,r)},e.prototype.unregister=function(e){return this.server.unregister(e)},e.prototype.registerAsync=function(e,n){return this.server.registerAsync(e,n)},e.prototype.register=function(e,n){return this.server.register(e,n)},e.prototype.invoke=function(e,n,t,r,o,i){return this.client.invoke(e,n,t,r,o,i)},e.prototype.waitForMethod=function(e){var n=new PromiseWrapper$1,t=this.client.methodAdded((function(r){r.name===e&&(t(),n.resolve(r))}));return n.promise},e}(),successMessages$1=["subscribed","success"],MessageBus$1=function(){function e(e,n){var t=this;this.publish=function(e,n,r){var o=r||{},i=o.routingKey,l=o.target,a=t.removeEmptyValues({type:"publish",topic:e,data:n,peer_id:t.peerId,routing_key:i,target_identity:l});t.session.send(a)},this.subscribe=function(e,n,r){return new Promise((function(o,i){var l=r||{},a=l.routingKey,u=l.target,s=t.removeEmptyValues({type:"subscribe",topic:e,peer_id:t.peerId,routing_key:a,source:u});t.session.send(s).then((function(r){var i=r.subscription_id;t.subscriptions.push({subscription_id:i,topic:e,callback:n,source:u}),o({unsubscribe:function(){return t.session.send({type:"unsubscribe",subscription_id:i,peer_id:t.peerId}),t.subscriptions=t.subscriptions.filter((function(e){return e.subscription_id!==i})),Promise.resolve()}})})).catch((function(e){return i(e)}))}))},this.watchOnEvent=function(){t.session.on("event",(function(e){var n=e.data,r=e.subscription_id,o=e["publisher-identity"],i=t.subscriptions.find((function(e){return e.subscription_id===r}));i&&(i.source?t.keysMatch(i.source,o)&&i.callback(n,i.topic,o):i.callback(n,i.topic,o))}))},this.connection=e,this.logger=n,this.peerId=e.peerId,this.subscriptions=[],this.session=e.domain("bus",successMessages$1),this.readyPromise=this.session.join(),this.readyPromise.then((function(){t.watchOnEvent()}))}return e.prototype.ready=function(){return this.readyPromise},e.prototype.removeEmptyValues=function(e){var n={};return Object.keys(e).forEach((function(t){void 0!==e[t]&&null!==e[t]&&(n[t]=e[t])})),n},e.prototype.keysMatch=function(e,n){var t=Object.keys(e),r=!0;return t.forEach((function(t){e[t]!==n[t]&&(r=!1)})),r},e}(),GlueCore$1=function e(n,t){var r,o=Utils$1.getGDMajorVersion(),i=Promise.resolve();if(o){if(o<3)throw new Error("GD v2 is not supported. Use v4 of the API to run in that context.");o>=3&&(r=window.glue42gd,i=window.gdPreloadPromise||i)}var l,a,u,s,c,d,f,p=timer$1("glue"),h=prepareConfig$1(n=n||{},t=t||{},r),_={};function g(n,t,r){(f=u.canPublish("trace"))&&u.trace("registering "+n+" module");var o=function(){t.initTime=r.stop(),t.initEndTime=r.endTime,t.marks=r.marks,f&&u.trace(n+" is ready - "+(r.endTime-r.startTime))};t.initStartTime=r.startTime,t.ready?t.ready().then((function(){o()})):o(),Array.isArray(n)||(n=[n]),n.forEach((function(n){_[n]=t,e[n]=t}))}function m(){var e,n,t,o,i=timer$1("metrics"),a=h.metrics,c=null===r||void 0===r?void 0:r.getMetricsPublishingEnabled,d=h.connection.identity,f=c||function(){return!0},p=null!==(e="boolean"!==typeof a&&a.disableAutoAppSystem)&&void 0!==e&&e;return g("metrics",s=metrics$1({connection:a?l:void 0,logger:u.subLogger("metrics"),canUpdateMetric:f,system:"Glue42",service:null!==(n=null===d||void 0===d?void 0:d.service)&&void 0!==n?n:h.application,instance:null!==(o=null!==(t=null===d||void 0===d?void 0:d.instance)&&void 0!==t?t:null===d||void 0===d?void 0:d.windowId)&&void 0!==o?o:shortid$2(),disableAutoAppSystem:p,pagePerformanceMetrics:"boolean"!==typeof a?null===a||void 0===a?void 0:a.pagePerformanceMetrics:void 0}),i),Promise.resolve()}function w(){var e=timer$1("interop"),n={connection:l,logger:u.subLogger("interop")};return a=new Interop$1(n),Logger$1.Interop=a,g(["interop","agm"],a,e),Promise.resolve()}function v(){var e=h.activities&&3===l.protocolVersion;if(h.contexts||e){var n=timer$1("contexts");return g("contexts",c=new ContextsModule$1({connection:l,logger:u.subLogger("contexts")}),n),c}var t=l.replayer;t&&t.drain(ContextMessageReplaySpec$1.name)}function b(){return __awaiter$2(this,void 0,void 0,(function(){var e;return __generator$1(this,(function(n){return h.bus?(e=timer$1("bus"),g("bus",d=new MessageBus$1(l,u.subLogger("bus")),e),[2,Promise.resolve()]):[2,Promise.resolve()]}))}))}function y(e){try{return e.forEach((function(e){!function(e,n){var t=timer$1(e),r=n(_);r&&g(e,r,t)}(e.name,e.create)})),Promise.resolve()}catch(n){return Promise.reject(n)}}return i.then((function(){var e,n=timer$1("logger");return(u=new Logger$1(""+(null===(e=h.connection.identity)||void 0===e?void 0:e.application),void 0,h.customLogger)).consoleLevel(h.logger.console),u.publishLevel(h.logger.publish),u.canPublish("debug")&&u.debug("initializing glue..."),g("logger",u,n),Promise.resolve(void 0)})).then((function(){var e=timer$1("connection");l=new Connection$1(h.connection,u.subLogger("connection"));var n=Promise.resolve(h.auth);return h.connection&&!h.auth&&(n=r?r.getGWToken().then((function(e){return{gatewayToken:e}})):Promise.reject("You need to provide auth information")),n.then((function(n){var t;if(e.mark("auth-promise-resolved"),"[object Object]"!==Object.prototype.toString.call(n))throw new Error("Invalid auth object - "+JSON.stringify(n));return t=n,l.login(t)})).then((function(){return g("connection",l,e),h})).catch((function(e){throw l&&l.logout(),e}))})).then((function(){return Promise.all([m(),w(),v(),b()])})).then((function(){return a.readyPromise})).then((function(){return y(h.libs||[])})).then((function(){var e=Object.keys(_).map((function(e){var n=_[e];return n.ready?n.ready():Promise.resolve()}));return Promise.all(e)})).then((function(){var e={coreVersion:version$4,version:h.version};p.stop();var o={feedback:function(e){a&&a.invoke("T42.ACS.Feedback",e,"best")},info:e,logger:u,interop:a,agm:a,connection:l,metrics:s,contexts:c,bus:d,version:h.version,userConfig:n,done:function(){return null===u||void 0===u||u.info("done called by user..."),l.logout()}};if(o.performance={get glueVer(){return h.version},get glueConfig(){return JSON.stringify(n)},get browser(){return window.performance.timing.toJSON()},get memory(){return window.performance.memory},get initTimes(){var e=getAllTimers$1();return Object.keys(e).map((function(n){var t=e[n];return{name:n,duration:t.endTime-t.startTime,marks:t.marks}}))}},Object.keys(_).forEach((function(e){var n=_[e];o[e]=n})),o.config={},Object.keys(h).forEach((function(e){o.config[e]=h[e]})),t&&t.extOptions&&Object.keys(t.extOptions).forEach((function(e){o.config[e]=null===t||void 0===t?void 0:t.extOptions[e]})),(null===t||void 0===t?void 0:t.enrichGlue)&&t.enrichGlue(o),r&&r.updatePerfData&&r.updatePerfData(o.performance),o.agm){var i=function(e,n,t){return function(){return o.logger.warn("glue.js - 'glue.agm."+n+"' method is deprecated, use 'glue.interop."+t+"' instead."),e.apply(o.agm,arguments)}},f=o.agm;f.method_added=i(o.agm.methodAdded,"method_added","methodAdded"),f.method_removed=i(o.agm.methodRemoved,"method_removed","methodRemoved"),f.server_added=i(o.agm.serverAdded,"server_added","serverAdded"),f.server_method_aded=i(o.agm.serverMethodAdded,"server_method_aded","serverMethodAdded"),f.server_method_removed=i(o.agm.serverMethodRemoved,"server_method_removed","serverMethodRemoved")}return o})).catch((function(e){return Promise.reject({err:e,libs:_})}))};"undefined"!==typeof window&&(window.GlueCore=GlueCore$1),GlueCore$1.version=version$4,GlueCore$1.default=GlueCore$1;var PromiseWrap$1=function(e,n,t){return new Promise((function(r,o){var i=!0,l=setTimeout((function(){if(i){i=!1;var e=t||"Promise timeout hit: ".concat(n);o(e)}}),n);e().then((function(e){i&&(i=!1,clearTimeout(l),r(e))})).catch((function(e){i&&(i=!1,clearTimeout(l),o(e))}))}))},PromisePlus$3=function(e,n,t){return new Promise((function(r,o){var i=setTimeout((function(){var e=t||"Promise timeout hit: ".concat(n);o(e)}),n);new Promise(e).then((function(e){clearTimeout(i),r(e)})).catch((function(e){clearTimeout(i),o(e)}))}))},toStr=Object.prototype.toString,isArguments=function(e){var n=toStr.call(e),t="[object Arguments]"===n;return t||(t="[object Array]"!==n&&null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Function]"===toStr.call(e.callee)),t},keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty,toStr$1=Object.prototype.toString,isArgs=isArguments,isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call((function(){}),"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(e){var n=e.constructor;return n&&n.prototype===e},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"===typeof window)return!1;for(var e in window)try{if(!excludedKeys["$"+e]&&has.call(window,e)&&null!==window[e]&&"object"===typeof window[e])try{equalsConstructorPrototype(window[e])}catch(n){return!0}}catch(n){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(e){if("undefined"===typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(e);try{return equalsConstructorPrototype(e)}catch(n){return!1}};keysShim=function(e){var n=null!==e&&"object"===typeof e,t="[object Function]"===toStr$1.call(e),r=isArgs(e),o=n&&"[object String]"===toStr$1.call(e),i=[];if(!n&&!t&&!r)throw new TypeError("Object.keys called on a non-object");var l=hasProtoEnumBug&&t;if(o&&e.length>0&&!has.call(e,0))for(var a=0;a<e.length;++a)i.push(String(a));if(r&&e.length>0)for(var u=0;u<e.length;++u)i.push(String(u));else for(var s in e)l&&"prototype"===s||!has.call(e,s)||i.push(String(s));if(hasDontEnumBug)for(var c=equalsConstructorPrototypeIfNotBuggy(e),d=0;d<dontEnums.length;++d)c&&"constructor"===dontEnums[d]||!has.call(e,dontEnums[d])||i.push(dontEnums[d]);return i}}var implementation=keysShim,slice=Array.prototype.slice,origKeys=Object.keys,keysShim$1=origKeys?function(e){return origKeys(e)}:implementation,originalKeys=Object.keys;keysShim$1.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return isArguments(e)?originalKeys(slice.call(e)):originalKeys(e)}):Object.keys=keysShim$1;return Object.keys||keysShim$1};var objectKeys=keysShim$1,shams=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},n=Symbol("test"),t=Object(n);if("string"===typeof n)return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;for(n in e[n]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==n)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,n);if(42!==o.value||!0!==o.enumerable)return!1}return!0},origSymbol=commonjsGlobal.Symbol,hasSymbols=function(){return"function"===typeof origSymbol&&("function"===typeof Symbol&&("symbol"===typeof origSymbol("foo")&&("symbol"===typeof Symbol("bar")&&shams())))},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice$1=Array.prototype.slice,toStr$2=Object.prototype.toString,funcType="[object Function]",implementation$1=function(e){var n=this;if("function"!==typeof n||toStr$2.call(n)!==funcType)throw new TypeError(ERROR_MESSAGE+n);for(var t,r=slice$1.call(arguments,1),o=function(){if(this instanceof t){var o=n.apply(this,r.concat(slice$1.call(arguments)));return Object(o)===o?o:this}return n.apply(e,r.concat(slice$1.call(arguments)))},i=Math.max(0,n.length-r.length),l=[],a=0;a<i;a++)l.push("$"+a);if(t=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var u=function(){};u.prototype=n.prototype,t.prototype=new u,u.prototype=null}return t},functionBind=Function.prototype.bind||implementation$1,src=functionBind.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError=SyntaxError,$Function=Function,$TypeError=TypeError,getEvalledConstructor=function(e){try{return Function('"use strict"; return ('+e+").constructor;")()}catch(n){}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch(e){$gOPD=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return throwTypeError}catch(e){try{return $gOPD(arguments,"callee").get}catch(n){return throwTypeError}}}():throwTypeError,hasSymbols$1=hasSymbols(),getProto=Object.getPrototypeOf||function(e){return e.__proto__},asyncGenFunction=getEvalledConstructor("async function* () {}"),asyncGenFunctionPrototype=asyncGenFunction?asyncGenFunction.prototype:undefined$1,asyncGenPrototype=asyncGenFunctionPrototype?asyncGenFunctionPrototype.prototype:undefined$1,TypedArray="undefined"===typeof Uint8Array?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":"undefined"===typeof AggregateError?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$1?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":getEvalledConstructor("async function () {}"),"%AsyncGenerator%":asyncGenFunctionPrototype,"%AsyncGeneratorFunction%":asyncGenFunction,"%AsyncIteratorPrototype%":asyncGenPrototype?getProto(asyncGenPrototype):undefined$1,"%Atomics%":"undefined"===typeof Atomics?undefined$1:Atomics,"%BigInt%":"undefined"===typeof BigInt?undefined$1:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?undefined$1:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?undefined$1:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":getEvalledConstructor("function* () {}"),"%Int8Array%":"undefined"===typeof Int8Array?undefined$1:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?undefined$1:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$1?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":"object"===typeof JSON?JSON:undefined$1,"%Map%":"undefined"===typeof Map?undefined$1:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&hasSymbols$1?getProto((new Map)[Symbol.iterator]()):undefined$1,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?undefined$1:Promise,"%Proxy%":"undefined"===typeof Proxy?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?undefined$1:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&hasSymbols$1?getProto((new Set)[Symbol.iterator]()):undefined$1,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$1?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols$1?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":"undefined"===typeof Uint8Array?undefined$1:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?undefined$1:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?undefined$1:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?undefined$1:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?undefined$1:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?undefined$1:WeakSet},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$concat=functionBind.call(Function.call,Array.prototype.concat),$spliceApply=functionBind.call(Function.apply,Array.prototype.splice),$replace=functionBind.call(Function.call,String.prototype.replace),$strSlice=functionBind.call(Function.call,String.prototype.slice),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var n=$strSlice(e,0,1),t=$strSlice(e,-1);if("%"===n&&"%"!==t)throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if("%"===t&&"%"!==n)throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var r=[];return $replace(e,rePropName,(function(e,n,t,o){r[r.length]=t?$replace(o,reEscapeChar,"$1"):n||e})),r},getBaseIntrinsic=function(e,n){var t,r=e;if(src(LEGACY_ALIASES,r)&&(r="%"+(t=LEGACY_ALIASES[r])[0]+"%"),src(INTRINSICS,r)){var o=INTRINSICS[r];if("undefined"===typeof o&&!n)throw new $TypeError("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:t,name:r,value:o}}throw new $SyntaxError("intrinsic "+e+" does not exist!")},getIntrinsic=function(e,n){if("string"!==typeof e||0===e.length)throw new $TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof n)throw new $TypeError('"allowMissing" argument must be a boolean');var t=stringToPath(e),r=t.length>0?t[0]:"",o=getBaseIntrinsic("%"+r+"%",n),i=o.name,l=o.value,a=!1,u=o.alias;u&&(r=u[0],$spliceApply(t,$concat([0,1],u)));for(var s=1,c=!0;s<t.length;s+=1){var d=t[s],f=$strSlice(d,0,1),p=$strSlice(d,-1);if(('"'===f||"'"===f||"`"===f||'"'===p||"'"===p||"`"===p)&&f!==p)throw new $SyntaxError("property names with quotes must have matching quotes");if("constructor"!==d&&c||(a=!0),src(INTRINSICS,i="%"+(r+="."+d)+"%"))l=INTRINSICS[i];else if(null!=l){if(!(d in l)){if(!n)throw new $TypeError("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD&&s+1>=t.length){var h=$gOPD(l,d);l=(c=!!h)&&"get"in h&&!("originalValue"in h.get)?h.get:l[d]}else c=src(l,d),l=l[d];c&&!a&&(INTRINSICS[i]=l)}}return l},callBind=createCommonjsModule$1((function(n){var t=getIntrinsic("%Function.prototype.apply%"),r=getIntrinsic("%Function.prototype.call%"),o=getIntrinsic("%Reflect.apply%",!0)||functionBind.call(r,t),i=getIntrinsic("%Object.getOwnPropertyDescriptor%",!0),l=getIntrinsic("%Object.defineProperty%",!0),a=getIntrinsic("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}n.exports=function(e){var n=o(functionBind,r,arguments);if(i&&l){var t=i(n,"length");t.configurable&&l(n,"length",{value:1+a(0,e.length-(arguments.length-1))})}return n};var u=function(){return o(functionBind,t,arguments)};l?l(n.exports,"apply",{value:u}):n.exports.apply=u})),$indexOf=callBind(getIntrinsic("String.prototype.indexOf")),callBound=function(e,n){var t=getIntrinsic(e,!!n);return"function"===typeof t&&$indexOf(e,".prototype.")>-1?callBind(t):t},hasToStringTag="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,$toString=callBound("Object.prototype.toString"),isStandardArguments=function(e){return!(hasToStringTag&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===$toString(e)},isLegacyArguments=function(e){return!!isStandardArguments(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==$toString(e)&&"[object Function]"===$toString(e.callee)},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments$1=supportsStandardArguments?isStandardArguments:isLegacyArguments,hasSymbols$2="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),toStr$3=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,isFunction=function(e){return"function"===typeof e&&"[object Function]"===toStr$3.call(e)},arePropertyDescriptorsSupported=function(){var n={};try{for(var t in origDefineProperty(n,"x",{enumerable:!1,value:n}),n)return!1;return n.x===n}catch(e){return!1}},supportsDescriptors=origDefineProperty&&arePropertyDescriptorsSupported(),defineProperty=function(e,n,t,r){(!(n in e)||isFunction(r)&&r())&&(supportsDescriptors?origDefineProperty(e,n,{configurable:!0,enumerable:!1,value:t,writable:!0}):e[n]=t)},defineProperties=function(e,n){var t=arguments.length>2?arguments[2]:{},r=objectKeys(n);hasSymbols$2&&(r=concat.call(r,Object.getOwnPropertySymbols(n)));for(var o=0;o<r.length;o+=1)defineProperty(e,r[o],n[r[o]],t[r[o]])};defineProperties.supportsDescriptors=!!supportsDescriptors;var defineProperties_1=defineProperties,numberIsNaN=function(e){return e!==e},implementation$2=function(e,n){return 0===e&&0===n?1/e===1/n:e===n||!(!numberIsNaN(e)||!numberIsNaN(n))},polyfill=function(){return"function"===typeof Object.is?Object.is:implementation$2},shim=function(){var e=polyfill();return defineProperties_1(Object,{is:e},{is:function(){return Object.is!==e}}),e},polyfill$1=callBind(polyfill(),Object);defineProperties_1(polyfill$1,{getPolyfill:polyfill,implementation:implementation$2,shim:shim});var objectIs=polyfill$1,hasSymbols$3=hasSymbols(),hasToStringTag$1=hasSymbols$3&&"symbol"===typeof Symbol.toStringTag,hasOwnProperty,regexExec,isRegexMarker,badStringifier;if(hasToStringTag$1){hasOwnProperty=Function.call.bind(Object.prototype.hasOwnProperty),regexExec=Function.call.bind(RegExp.prototype.exec),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},"symbol"===typeof Symbol.toPrimitive&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var toStr$4=Object.prototype.toString,gOPD=Object.getOwnPropertyDescriptor,regexClass="[object RegExp]",isRegex=hasToStringTag$1?function(n){if(!n||"object"!==typeof n)return!1;var t=gOPD(n,"lastIndex");if(!(t&&hasOwnProperty(t,"value")))return!1;try{regexExec(n,badStringifier)}catch(e){return e===isRegexMarker}}:function(e){return!(!e||"object"!==typeof e&&"function"!==typeof e)&&toStr$4.call(e)===regexClass},undefined$2,$TypeError$1=TypeError,$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch(e){$gOPD$1=null}var throwTypeError$1=function(){throw new $TypeError$1},ThrowTypeError$1=$gOPD$1?function(){try{return throwTypeError$1}catch(e){try{return $gOPD$1(arguments,"callee").get}catch(n){return throwTypeError$1}}}():throwTypeError$1,hasSymbols$4=hasSymbols(),getProto$1=Object.getPrototypeOf||function(e){return e.__proto__},generatorFunction=undefined$2,asyncFunction=undefined$2,asyncGenFunction$1=undefined$2,TypedArray$1="undefined"===typeof Uint8Array?undefined$2:getProto$1(Uint8Array),INTRINSICS$1={"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?undefined$2:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"===typeof ArrayBuffer?undefined$2:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":hasSymbols$4?getProto$1([][Symbol.iterator]()):undefined$2,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":undefined$2,"%AsyncFunction%":asyncFunction,"%AsyncFunctionPrototype%":undefined$2,"%AsyncGenerator%":undefined$2,"%AsyncGeneratorFunction%":asyncGenFunction$1,"%AsyncGeneratorPrototype%":undefined$2,"%AsyncIteratorPrototype%":undefined$2,"%Atomics%":"undefined"===typeof Atomics?undefined$2:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"===typeof DataView?undefined$2:DataView,"%DataViewPrototype%":"undefined"===typeof DataView?undefined$2:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"===typeof Float32Array?undefined$2:Float32Array,"%Float32ArrayPrototype%":"undefined"===typeof Float32Array?undefined$2:Float32Array.prototype,"%Float64Array%":"undefined"===typeof Float64Array?undefined$2:Float64Array,"%Float64ArrayPrototype%":"undefined"===typeof Float64Array?undefined$2:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":undefined$2,"%GeneratorFunction%":generatorFunction,"%GeneratorPrototype%":undefined$2,"%Int8Array%":"undefined"===typeof Int8Array?undefined$2:Int8Array,"%Int8ArrayPrototype%":"undefined"===typeof Int8Array?undefined$2:Int8Array.prototype,"%Int16Array%":"undefined"===typeof Int16Array?undefined$2:Int16Array,"%Int16ArrayPrototype%":"undefined"===typeof Int16Array?undefined$2:Int8Array.prototype,"%Int32Array%":"undefined"===typeof Int32Array?undefined$2:Int32Array,"%Int32ArrayPrototype%":"undefined"===typeof Int32Array?undefined$2:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$4?getProto$1(getProto$1([][Symbol.iterator]())):undefined$2,"%JSON%":"object"===typeof JSON?JSON:undefined$2,"%JSONParse%":"object"===typeof JSON?JSON.parse:undefined$2,"%Map%":"undefined"===typeof Map?undefined$2:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&hasSymbols$4?getProto$1((new Map)[Symbol.iterator]()):undefined$2,"%MapPrototype%":"undefined"===typeof Map?undefined$2:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?undefined$2:Promise,"%PromisePrototype%":"undefined"===typeof Promise?undefined$2:Promise.prototype,"%PromiseProto_then%":"undefined"===typeof Promise?undefined$2:Promise.prototype.then,"%Promise_all%":"undefined"===typeof Promise?undefined$2:Promise.all,"%Promise_reject%":"undefined"===typeof Promise?undefined$2:Promise.reject,"%Promise_resolve%":"undefined"===typeof Promise?undefined$2:Promise.resolve,"%Proxy%":"undefined"===typeof Proxy?undefined$2:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"===typeof Reflect?undefined$2:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"===typeof Set?undefined$2:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&hasSymbols$4?getProto$1((new Set)[Symbol.iterator]()):undefined$2,"%SetPrototype%":"undefined"===typeof Set?undefined$2:Set.prototype,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?undefined$2:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"===typeof SharedArrayBuffer?undefined$2:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":hasSymbols$4?getProto$1(""[Symbol.iterator]()):undefined$2,"%StringPrototype%":String.prototype,"%Symbol%":hasSymbols$4?Symbol:undefined$2,"%SymbolPrototype%":hasSymbols$4?Symbol.prototype:undefined$2,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":ThrowTypeError$1,"%TypedArray%":TypedArray$1,"%TypedArrayPrototype%":TypedArray$1?TypedArray$1.prototype:undefined$2,"%TypeError%":$TypeError$1,"%TypeErrorPrototype%":$TypeError$1.prototype,"%Uint8Array%":"undefined"===typeof Uint8Array?undefined$2:Uint8Array,"%Uint8ArrayPrototype%":"undefined"===typeof Uint8Array?undefined$2:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?undefined$2:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"===typeof Uint8ClampedArray?undefined$2:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"===typeof Uint16Array?undefined$2:Uint16Array,"%Uint16ArrayPrototype%":"undefined"===typeof Uint16Array?undefined$2:Uint16Array.prototype,"%Uint32Array%":"undefined"===typeof Uint32Array?undefined$2:Uint32Array,"%Uint32ArrayPrototype%":"undefined"===typeof Uint32Array?undefined$2:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"===typeof WeakMap?undefined$2:WeakMap,"%WeakMapPrototype%":"undefined"===typeof WeakMap?undefined$2:WeakMap.prototype,"%WeakSet%":"undefined"===typeof WeakSet?undefined$2:WeakSet,"%WeakSetPrototype%":"undefined"===typeof WeakSet?undefined$2:WeakSet.prototype},$replace$1=functionBind.call(Function.call,String.prototype.replace),rePropName$1=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar$1=/\\(\\)?/g,stringToPath$1=function(e){var n=[];return $replace$1(e,rePropName$1,(function(e,t,r,o){n[n.length]=r?$replace$1(o,reEscapeChar$1,"$1"):t||e})),n},getBaseIntrinsic$1=function(e,n){if(!(e in INTRINSICS$1))throw new SyntaxError("intrinsic "+e+" does not exist!");if("undefined"===typeof INTRINSICS$1[e]&&!n)throw new $TypeError$1("intrinsic "+e+" exists, but is not available. Please file an issue!");return INTRINSICS$1[e]},GetIntrinsic=function(e,n){if("string"!==typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof n)throw new TypeError('"allowMissing" argument must be a boolean');for(var t=stringToPath$1(e),r=getBaseIntrinsic$1("%"+(t.length>0?t[0]:"")+"%",n),o=1;o<t.length;o+=1)if(null!=r)if($gOPD$1&&o+1>=t.length){var i=$gOPD$1(r,t[o]);if(!n&&!(t[o]in r))throw new $TypeError$1("base intrinsic for "+e+" exists, but the property is not available.");r=i&&"get"in i&&!("originalValue"in i.get)?i.get:r[t[o]]}else r=r[t[o]];return r},callBind$1=createCommonjsModule$1((function(n){var t=GetIntrinsic("%Function.prototype.apply%"),r=GetIntrinsic("%Function.prototype.call%"),o=GetIntrinsic("%Reflect.apply%",!0)||functionBind.call(r,t),i=GetIntrinsic("%Object.defineProperty%",!0);if(i)try{i({},"a",{value:1})}catch(e){i=null}n.exports=function(){return o(functionBind,r,arguments)};var l=function(){return o(functionBind,t,arguments)};i?i(n.exports,"apply",{value:l}):n.exports.apply=l})),$Object=Object,$TypeError$2=TypeError,implementation$3=function(){if(null!=this&&this!==$Object(this))throw new $TypeError$2("RegExp.prototype.flags getter called on non-object");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e},supportsDescriptors$1=defineProperties_1.supportsDescriptors,$gOPD$2=Object.getOwnPropertyDescriptor,$TypeError$3=TypeError,polyfill$2=function(){if(!supportsDescriptors$1)throw new $TypeError$3("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var e=$gOPD$2(RegExp.prototype,"flags");if(e&&"function"===typeof e.get&&"boolean"===typeof/a/.dotAll)return e.get}return implementation$3},supportsDescriptors$2=defineProperties_1.supportsDescriptors,gOPD$1=Object.getOwnPropertyDescriptor,defineProperty$1=Object.defineProperty,TypeErr=TypeError,getProto$2=Object.getPrototypeOf,regex=/a/,shim$1=function(){if(!supportsDescriptors$2||!getProto$2)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=polyfill$2(),n=getProto$2(regex),t=gOPD$1(n,"flags");return t&&t.get===e||defineProperty$1(n,"flags",{configurable:!0,enumerable:!1,get:e}),e},flagsBound=callBind$1(implementation$3);defineProperties_1(flagsBound,{getPolyfill:polyfill$2,implementation:implementation$3,shim:shim$1});var regexp_prototype_flags=flagsBound,toString={}.toString,isarray=Array.isArray||function(e){return"[object Array]"==toString.call(e)},getDay=Date.prototype.getDay,tryDateObject=function(n){try{return getDay.call(n),!0}catch(e){return!1}},toStr$5=Object.prototype.toString,dateClass="[object Date]",hasToStringTag$2="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,isDateObject=function(e){return"object"===typeof e&&null!==e&&(hasToStringTag$2?tryDateObject(e):toStr$5.call(e)===dateClass)},strValue=String.prototype.valueOf,tryStringObject=function(n){try{return strValue.call(n),!0}catch(e){return!1}},toStr$6=Object.prototype.toString,strClass="[object String]",hasToStringTag$3="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,isString=function(e){return"string"===typeof e||"object"===typeof e&&(hasToStringTag$3?tryStringObject(e):toStr$6.call(e)===strClass)},numToStr=Number.prototype.toString,tryNumberObject=function(n){try{return numToStr.call(n),!0}catch(e){return!1}},toStr$7=Object.prototype.toString,numClass="[object Number]",hasToStringTag$4="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,isNumberObject=function(e){return"number"===typeof e||"object"===typeof e&&(hasToStringTag$4?tryNumberObject(e):toStr$7.call(e)===numClass)},$boolToStr=callBound("Boolean.prototype.toString"),$toString$1=callBound("Object.prototype.toString"),tryBooleanObject=function(n){try{return $boolToStr(n),!0}catch(e){return!1}},boolClass="[object Boolean]",hasToStringTag$5="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,isBooleanObject=function(e){return"boolean"===typeof e||null!==e&&"object"===typeof e&&(hasToStringTag$5&&Symbol.toStringTag in e?tryBooleanObject(e):$toString$1(e)===boolClass)},isSymbol=createCommonjsModule$1((function(n){var t=Object.prototype.toString;if(hasSymbols()){var r=Symbol.prototype.toString,o=/^Symbol\(.*\)$/;n.exports=function(n){if("symbol"===typeof n)return!0;if("[object Symbol]"!==t.call(n))return!1;try{return function(e){return"symbol"===typeof e.valueOf()&&o.test(r.call(e))}(n)}catch(e){return!1}}}else n.exports=function(e){return!1}})),isBigint=createCommonjsModule$1((function(n){if("function"===typeof BigInt){var t=BigInt.prototype.valueOf;n.exports=function(n){return null!==n&&"undefined"!==typeof n&&"boolean"!==typeof n&&"string"!==typeof n&&"number"!==typeof n&&"symbol"!==typeof n&&"function"!==typeof n&&("bigint"===typeof n||function(n){try{return t.call(n),!0}catch(e){}return!1}(n))}}else n.exports=function(e){return!1}})),whichBoxedPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e?null:isString(e)?"String":isNumberObject(e)?"Number":isBooleanObject(e)?"Boolean":isSymbol(e)?"Symbol":isBigint(e)?"BigInt":void 0},$Map="function"===typeof Map&&Map.prototype?Map:null,$Set="function"===typeof Set&&Set.prototype?Set:null,exported;$Map||(exported=function(e){return!1});var $mapHas=$Map?Map.prototype.has:null,$setHas=$Set?Set.prototype.has:null;exported||$mapHas||(exported=function(e){return!1});var isMap=exported||function(n){if(!n||"object"!==typeof n)return!1;try{if($mapHas.call(n),$setHas)try{$setHas.call(n)}catch(e){return!0}return n instanceof $Map}catch(e){}return!1},$Map$1="function"===typeof Map&&Map.prototype?Map:null,$Set$1="function"===typeof Set&&Set.prototype?Set:null,exported$1;$Set$1||(exported$1=function(e){return!1});var $mapHas$1=$Map$1?Map.prototype.has:null,$setHas$1=$Set$1?Set.prototype.has:null;exported$1||$setHas$1||(exported$1=function(e){return!1});var isSet=exported$1||function(n){if(!n||"object"!==typeof n)return!1;try{if($setHas$1.call(n),$mapHas$1)try{$mapHas$1.call(n)}catch(e){return!0}return n instanceof $Set$1}catch(e){}return!1},$WeakMap="function"===typeof WeakMap&&WeakMap.prototype?WeakMap:null,$WeakSet="function"===typeof WeakSet&&WeakSet.prototype?WeakSet:null,exported$2;$WeakMap||(exported$2=function(e){return!1});var $mapHas$2=$WeakMap?$WeakMap.prototype.has:null,$setHas$2=$WeakSet?$WeakSet.prototype.has:null;exported$2||$mapHas$2||(exported$2=function(e){return!1});var isWeakmap=exported$2||function(n){if(!n||"object"!==typeof n)return!1;try{if($mapHas$2.call(n,$mapHas$2),$setHas$2)try{$setHas$2.call(n,$setHas$2)}catch(e){return!0}return n instanceof $WeakMap}catch(e){}return!1},isWeakset=createCommonjsModule$1((function(n){var t,r="function"===typeof WeakMap&&WeakMap.prototype?WeakMap:null,o="function"===typeof WeakSet&&WeakSet.prototype?WeakSet:null;r||(t=function(e){return!1});var i=r?r.prototype.has:null,l=o?o.prototype.has:null;t||l||(n.exports=function(e){return!1}),n.exports=t||function(n){if(!n||"object"!==typeof n)return!1;try{if(l.call(n,l),i)try{i.call(n,i)}catch(e){return!0}return n instanceof o}catch(e){}return!1}})),whichCollection=function(e){if(e&&"object"===typeof e){if(isMap(e))return"Map";if(isSet(e))return"Set";if(isWeakmap(e))return"WeakMap";if(isWeakset(e))return"WeakSet"}return!1},esGetIterator=createCommonjsModule$1((function(n){if(hasSymbols()||shams()){var t=Symbol.iterator;n.exports=function(e){return null!=e&&"undefined"!==typeof e[t]?e[t]():isArguments$1(e)?Array.prototype[t].call(e):void 0}}else{var r=isarray,o=isString,i=getIntrinsic,l=i("%Map%",!0),a=i("%Set%",!0),u=callBound,s=u("Array.prototype.push"),c=u("String.prototype.charCodeAt"),d=u("String.prototype.slice"),f=function(e){var n=0;return{next:function(){var t,r=n>=e.length;return r||(t=e[n],n+=1),{done:r,value:t}}}},p=function(e,n){if(r(e)||isArguments$1(e))return f(e);if(o(e)){var t=0;return{next:function(){var n=function(e,n){if(n+1>=e.length)return n+1;var t=c(e,n);if(t<55296||t>56319)return n+1;var r=c(e,n+1);return r<56320||r>57343?n+1:n+2}(e,t),r=d(e,t,n);return t=n,{done:n>e.length,value:r}}}}return n&&"undefined"!==typeof e["_es6-shim iterator_"]?e["_es6-shim iterator_"]():void 0};if(l||a){var h=isMap,_=isSet,g=u("Map.prototype.forEach",!0),m=u("Set.prototype.forEach",!0);if("undefined"===typeof process||!process.versions||!process.versions.node)var w=u("Map.prototype.iterator",!0),v=u("Set.prototype.iterator",!0),b=function(n){var t=!1;return{next:function(){try{return{done:t,value:t?void 0:n.next()}}catch(e){return t=!0,{done:!0,value:void 0}}}}};var y=u("Map.prototype.@@iterator",!0)||u("Map.prototype._es6-shim iterator_",!0),k=u("Set.prototype.@@iterator",!0)||u("Set.prototype._es6-shim iterator_",!0);n.exports=function(e){return function(e){if(h(e)){if(w)return b(w(e));if(y)return y(e);if(g){var n=[];return g(e,(function(e,t){s(n,[t,e])})),f(n)}}if(_(e)){if(v)return b(v(e));if(k)return k(e);if(m){var t=[];return m(e,(function(e){s(t,e)})),f(t)}}}(e)||p(e)}}else n.exports=function(e){if(null!=e)return p(e,!0)}}})),_nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$0=getAugmentedNamespace(_nodeResolve_empty$1),hasMap="function"===typeof Map&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&"function"===typeof mapSizeDescriptor.get?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet="function"===typeof Set&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&"function"===typeof setSizeDescriptor.get?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap="function"===typeof WeakMap&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet="function"===typeof WeakSet&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,match=String.prototype.match,bigIntValueOf="function"===typeof BigInt?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString="function"===typeof Symbol?Symbol.prototype.toString:null,isEnumerable$1=Object.prototype.propertyIsEnumerable,inspectCustom=require$$0.custom,inspectSymbol=inspectCustom&&isSymbol$1(inspectCustom)?inspectCustom:null,objectInspect=function e(n,t,r,o){var i=t||{};if(has$1(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$1(i,"maxStringLength")&&("number"===typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=!has$1(i,"customInspect")||i.customInspect;if("boolean"!==typeof l)throw new TypeError('option "customInspect", if provided, must be `true` or `false`');if(has$1(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if("undefined"===typeof n)return"undefined";if(null===n)return"null";if("boolean"===typeof n)return n?"true":"false";if("string"===typeof n)return inspectString(n,i);if("number"===typeof n)return 0===n?1/0/n>0?"0":"-0":String(n);if("bigint"===typeof n)return String(n)+"n";var a="undefined"===typeof i.depth?5:i.depth;if("undefined"===typeof r&&(r=0),r>=a&&a>0&&"object"===typeof n)return isArray(n)?"[Array]":"[Object]";var u=getIndent(i,r);if("undefined"===typeof o)o=[];else if(indexOf(o,n)>=0)return"[Circular]";function s(n,t,l){if(t&&(o=o.slice()).push(t),l){var a={depth:i.depth};return has$1(i,"quoteStyle")&&(a.quoteStyle=i.quoteStyle),e(n,a,r+1,o)}return e(n,i,r+1,o)}if("function"===typeof n){var c=nameOf(n),d=arrObjKeys(n,s);return"[Function"+(c?": "+c:" (anonymous)")+"]"+(d.length>0?" { "+d.join(", ")+" }":"")}if(isSymbol$1(n)){var f=symToString.call(n);return"object"===typeof n?markBoxed(f):f}if(isElement(n)){for(var p="<"+String(n.nodeName).toLowerCase(),h=n.attributes||[],_=0;_<h.length;_++)p+=" "+h[_].name+"="+wrapQuotes(quote(h[_].value),"double",i);return p+=">",n.childNodes&&n.childNodes.length&&(p+="..."),p+="</"+String(n.nodeName).toLowerCase()+">"}if(isArray(n)){if(0===n.length)return"[]";var g=arrObjKeys(n,s);return u&&!singleLineValues(g)?"["+indentedJoin(g,u)+"]":"[ "+g.join(", ")+" ]"}if(isError(n)){var m=arrObjKeys(n,s);return 0===m.length?"["+String(n)+"]":"{ ["+String(n)+"] "+m.join(", ")+" }"}if("object"===typeof n&&l){if(inspectSymbol&&"function"===typeof n[inspectSymbol])return n[inspectSymbol]();if("function"===typeof n.inspect)return n.inspect()}if(isMap$1(n)){var w=[];return mapForEach.call(n,(function(e,t){w.push(s(t,n,!0)+" => "+s(e,n))})),collectionOf("Map",mapSize.call(n),w,u)}if(isSet$1(n)){var v=[];return setForEach.call(n,(function(e){v.push(s(e,n))})),collectionOf("Set",setSize.call(n),v,u)}if(isWeakMap(n))return weakCollectionOf("WeakMap");if(isWeakSet(n))return weakCollectionOf("WeakSet");if(isNumber(n))return markBoxed(s(Number(n)));if(isBigInt(n))return markBoxed(s(bigIntValueOf.call(n)));if(isBoolean(n))return markBoxed(booleanValueOf.call(n));if(isString$1(n))return markBoxed(s(String(n)));if(!isDate(n)&&!isRegExp(n)){var b=arrObjKeys(n,s);return 0===b.length?"{}":u?"{"+indentedJoin(b,u)+"}":"{ "+b.join(", ")+" }"}return String(n)};function wrapQuotes(e,n,t){var r="double"===(t.quoteStyle||n)?'"':"'";return r+e+r}function quote(e){return String(e).replace(/"/g,"&quot;")}function isArray(e){return"[object Array]"===toStr$8(e)}function isDate(e){return"[object Date]"===toStr$8(e)}function isRegExp(e){return"[object RegExp]"===toStr$8(e)}function isError(e){return"[object Error]"===toStr$8(e)}function isSymbol$1(e){return"[object Symbol]"===toStr$8(e)}function isString$1(e){return"[object String]"===toStr$8(e)}function isNumber(e){return"[object Number]"===toStr$8(e)}function isBigInt(e){return"[object BigInt]"===toStr$8(e)}function isBoolean(e){return"[object Boolean]"===toStr$8(e)}var hasOwn=Object.prototype.hasOwnProperty||function(e){return e in this};function has$1(e,n){return hasOwn.call(e,n)}function toStr$8(e){return objectToString.call(e)}function nameOf(e){if(e.name)return e.name;var n=match.call(functionToString.call(e),/^function\s*([\w$]+)/);return n?n[1]:null}function indexOf(e,n){if(e.indexOf)return e.indexOf(n);for(var t=0,r=e.length;t<r;t++)if(e[t]===n)return t;return-1}function isMap$1(n){if(!mapSize||!n||"object"!==typeof n)return!1;try{mapSize.call(n);try{setSize.call(n)}catch(t){return!0}return n instanceof Map}catch(e){}return!1}function isWeakMap(n){if(!weakMapHas||!n||"object"!==typeof n)return!1;try{weakMapHas.call(n,weakMapHas);try{weakSetHas.call(n,weakSetHas)}catch(t){return!0}return n instanceof WeakMap}catch(e){}return!1}function isSet$1(n){if(!setSize||!n||"object"!==typeof n)return!1;try{setSize.call(n);try{mapSize.call(n)}catch(t){return!0}return n instanceof Set}catch(e){}return!1}function isWeakSet(n){if(!weakSetHas||!n||"object"!==typeof n)return!1;try{weakSetHas.call(n,weakSetHas);try{weakMapHas.call(n,weakMapHas)}catch(t){return!0}return n instanceof WeakSet}catch(e){}return!1}function isElement(e){return!(!e||"object"!==typeof e)&&("undefined"!==typeof HTMLElement&&e instanceof HTMLElement||"string"===typeof e.nodeName&&"function"===typeof e.getAttribute)}function inspectString(e,n){if(e.length>n.maxStringLength){var t=e.length-n.maxStringLength,r="... "+t+" more character"+(t>1?"s":"");return inspectString(e.slice(0,n.maxStringLength),n)+r}return wrapQuotes(e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,lowbyte),"single",n)}function lowbyte(e){var n=e.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return t?"\\"+t:"\\x"+(n<16?"0":"")+n.toString(16).toUpperCase()}function markBoxed(e){return"Object("+e+")"}function weakCollectionOf(e){return e+" { ? }"}function collectionOf(e,n,t,r){return e+" ("+n+") {"+(r?indentedJoin(t,r):t.join(", "))+"}"}function singleLineValues(e){for(var n=0;n<e.length;n++)if(indexOf(e[n],"\n")>=0)return!1;return!0}function getIndent(e,n){var t;if("\t"===e.indent)t="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;t=Array(e.indent+1).join(" ")}return{base:t,prev:Array(n+1).join(t)}}function indentedJoin(e,n){if(0===e.length)return"";var t="\n"+n.prev+n.base;return t+e.join(","+t)+"\n"+n.prev}function arrObjKeys(e,n){var t=isArray(e),r=[];if(t){r.length=e.length;for(var o=0;o<e.length;o++)r[o]=has$1(e,o)?n(e[o],e):""}for(var i in e)has$1(e,i)&&(t&&String(Number(i))===i&&i<e.length||(/[^\w$]/.test(i)?r.push(n(i,e)+": "+n(e[i],e)):r.push(i+": "+n(e[i],e))));if("function"===typeof gOPS)for(var l=gOPS(e),a=0;a<l.length;a++)isEnumerable$1.call(e,l[a])&&r.push("["+n(l[a])+"]: "+n(e[l[a]],e));return r}var $TypeError$4=getIntrinsic("%TypeError%"),$WeakMap$1=getIntrinsic("%WeakMap%",!0),$Map$2=getIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas$3=callBound("Map.prototype.has",!0),listGetNode=function(e,n){for(var t,r=e;null!==(t=r.next);r=t)if(t.key===n)return r.next=t.next,t.next=e.next,e.next=t,t},listGet=function(e,n){var t=listGetNode(e,n);return t&&t.value},listSet=function(e,n,t){var r=listGetNode(e,n);r?r.value=t:e.next={key:n,next:e.next,value:t}},listHas=function(e,n){return!!listGetNode(e,n)},sideChannel=function(){var e,n,t,r={assert:function(e){if(!r.has(e))throw new $TypeError$4("Side channel does not contain "+objectInspect(e))},get:function(r){if($WeakMap$1&&r&&("object"===typeof r||"function"===typeof r)){if(e)return $weakMapGet(e,r)}else if($Map$2){if(n)return $mapGet(n,r)}else if(t)return listGet(t,r)},has:function(r){if($WeakMap$1&&r&&("object"===typeof r||"function"===typeof r)){if(e)return $weakMapHas(e,r)}else if($Map$2){if(n)return $mapHas$3(n,r)}else if(t)return listHas(t,r);return!1},set:function(r,o){$WeakMap$1&&r&&("object"===typeof r||"function"===typeof r)?(e||(e=new $WeakMap$1),$weakMapSet(e,r,o)):$Map$2?(n||(n=new $Map$2),$mapSet(n,r,o)):(t||(t={key:{},next:null}),listSet(t,r,o))}};return r},hasOwn$1=Object.prototype.hasOwnProperty,toString$1=Object.prototype.toString,foreach=function(e,n,t){if("[object Function]"!==toString$1.call(n))throw new TypeError("iterator must be a function");var r=e.length;if(r===+r)for(var o=0;o<r;o++)n.call(t,e[o],o,e);else for(var i in e)hasOwn$1.call(e,i)&&n.call(t,e[i],i,e)},arrayFilter=function(e,n,t){if(e.filter)return e.filter(n,t);if(void 0===e||null===e)throw new TypeError;if("function"!=typeof n)throw new TypeError;for(var r=[],o=0;o<e.length;o++)if(hasOwn$2.call(e,o)){var i=e[o];n.call(t,i,o,e)&&r.push(i)}return r},hasOwn$2=Object.prototype.hasOwnProperty,availableTypedArrays=function(){return arrayFilter(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],(function(e){return"function"===typeof commonjsGlobal[e]}))},undefined$3,$SyntaxError$1=SyntaxError,$Function$1=Function,$TypeError$5=TypeError,getEvalledConstructor$1=function(n){try{return Function('"use strict"; return ('+n+").constructor;")()}catch(e){}},$gOPD$3=Object.getOwnPropertyDescriptor;if($gOPD$3)try{$gOPD$3({},"")}catch(e){$gOPD$3=null}var throwTypeError$2=function(){throw new $TypeError$5},ThrowTypeError$2=$gOPD$3?function(){try{return throwTypeError$2}catch(e){try{return $gOPD$3(arguments,"callee").get}catch(n){return throwTypeError$2}}}():throwTypeError$2,hasSymbols$5=hasSymbols(),getProto$3=Object.getPrototypeOf||function(e){return e.__proto__},asyncGenFunction$2=getEvalledConstructor$1("async function* () {}"),asyncGenFunctionPrototype$1=asyncGenFunction$2?asyncGenFunction$2.prototype:undefined$3,asyncGenPrototype$1=asyncGenFunctionPrototype$1?asyncGenFunctionPrototype$1.prototype:undefined$3,TypedArray$2="undefined"===typeof Uint8Array?undefined$3:getProto$3(Uint8Array),INTRINSICS$2={"%AggregateError%":"undefined"===typeof AggregateError?undefined$3:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?undefined$3:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$5?getProto$3([][Symbol.iterator]()):undefined$3,"%AsyncFromSyncIteratorPrototype%":undefined$3,"%AsyncFunction%":getEvalledConstructor$1("async function () {}"),"%AsyncGenerator%":asyncGenFunctionPrototype$1,"%AsyncGeneratorFunction%":asyncGenFunction$2,"%AsyncIteratorPrototype%":asyncGenPrototype$1?getProto$3(asyncGenPrototype$1):undefined$3,"%Atomics%":"undefined"===typeof Atomics?undefined$3:Atomics,"%BigInt%":"undefined"===typeof BigInt?undefined$3:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?undefined$3:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?undefined$3:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?undefined$3:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?undefined$3:FinalizationRegistry,"%Function%":$Function$1,"%GeneratorFunction%":getEvalledConstructor$1("function* () {}"),"%Int8Array%":"undefined"===typeof Int8Array?undefined$3:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?undefined$3:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?undefined$3:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$5?getProto$3(getProto$3([][Symbol.iterator]())):undefined$3,"%JSON%":"object"===typeof JSON?JSON:undefined$3,"%Map%":"undefined"===typeof Map?undefined$3:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&hasSymbols$5?getProto$3((new Map)[Symbol.iterator]()):undefined$3,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?undefined$3:Promise,"%Proxy%":"undefined"===typeof Proxy?undefined$3:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?undefined$3:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?undefined$3:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&hasSymbols$5?getProto$3((new Set)[Symbol.iterator]()):undefined$3,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?undefined$3:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$5?getProto$3(""[Symbol.iterator]()):undefined$3,"%Symbol%":hasSymbols$5?Symbol:undefined$3,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError$2,"%TypedArray%":TypedArray$2,"%TypeError%":$TypeError$5,"%Uint8Array%":"undefined"===typeof Uint8Array?undefined$3:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?undefined$3:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?undefined$3:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?undefined$3:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?undefined$3:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?undefined$3:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?undefined$3:WeakSet},LEGACY_ALIASES$1={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$concat$1=functionBind.call(Function.call,Array.prototype.concat),$spliceApply$1=functionBind.call(Function.apply,Array.prototype.splice),$replace$2=functionBind.call(Function.call,String.prototype.replace),rePropName$2=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar$2=/\\(\\)?/g,stringToPath$2=function(e){var n=[];return $replace$2(e,rePropName$2,(function(e,t,r,o){n[n.length]=r?$replace$2(o,reEscapeChar$2,"$1"):t||e})),n},getBaseIntrinsic$2=function(e,n){var t,r=e;if(src(LEGACY_ALIASES$1,r)&&(r="%"+(t=LEGACY_ALIASES$1[r])[0]+"%"),src(INTRINSICS$2,r)){var o=INTRINSICS$2[r];if("undefined"===typeof o&&!n)throw new $TypeError$5("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:t,name:r,value:o}}throw new $SyntaxError$1("intrinsic "+e+" does not exist!")},GetIntrinsic$1=function(e,n){if("string"!==typeof e||0===e.length)throw new $TypeError$5("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof n)throw new $TypeError$5('"allowMissing" argument must be a boolean');var t=stringToPath$2(e),r=t.length>0?t[0]:"",o=getBaseIntrinsic$2("%"+r+"%",n),i=o.name,l=o.value,a=!1,u=o.alias;u&&(r=u[0],$spliceApply$1(t,$concat$1([0,1],u)));for(var s=1,c=!0;s<t.length;s+=1){var d=t[s];if("constructor"!==d&&c||(a=!0),src(INTRINSICS$2,i="%"+(r+="."+d)+"%"))l=INTRINSICS$2[i];else if(null!=l){if($gOPD$3&&s+1>=t.length){var f=$gOPD$3(l,d);if(c=!!f,!n&&!(d in l))throw new $TypeError$5("base intrinsic for "+e+" exists, but the property is not available.");l=c&&"get"in f&&!("originalValue"in f.get)?f.get:l[d]}else c=src(l,d),l=l[d];c&&!a&&(INTRINSICS$2[i]=l)}}return l},$gOPD$4=GetIntrinsic$1("%Object.getOwnPropertyDescriptor%");if($gOPD$4)try{$gOPD$4([],"length")}catch(e){$gOPD$4=null}var getOwnPropertyDescriptor=$gOPD$4,undefined$4,$SyntaxError$2=SyntaxError,$Function$2=Function,$TypeError$6=TypeError,getEvalledConstructor$2=function(n){try{return Function('"use strict"; return ('+n+").constructor;")()}catch(e){}},$gOPD$5=Object.getOwnPropertyDescriptor;if($gOPD$5)try{$gOPD$5({},"")}catch(e){$gOPD$5=null}var throwTypeError$3=function(){throw new $TypeError$6},ThrowTypeError$3=$gOPD$5?function(){try{return throwTypeError$3}catch(e){try{return $gOPD$5(arguments,"callee").get}catch(n){return throwTypeError$3}}}():throwTypeError$3,hasSymbols$6=hasSymbols(),getProto$4=Object.getPrototypeOf||function(e){return e.__proto__},asyncGenFunction$3=getEvalledConstructor$2("async function* () {}"),asyncGenFunctionPrototype$2=asyncGenFunction$3?asyncGenFunction$3.prototype:undefined$4,asyncGenPrototype$2=asyncGenFunctionPrototype$2?asyncGenFunctionPrototype$2.prototype:undefined$4,TypedArray$3="undefined"===typeof Uint8Array?undefined$4:getProto$4(Uint8Array),INTRINSICS$3={"%AggregateError%":"undefined"===typeof AggregateError?undefined$4:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?undefined$4:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$6?getProto$4([][Symbol.iterator]()):undefined$4,"%AsyncFromSyncIteratorPrototype%":undefined$4,"%AsyncFunction%":getEvalledConstructor$2("async function () {}"),"%AsyncGenerator%":asyncGenFunctionPrototype$2,"%AsyncGeneratorFunction%":asyncGenFunction$3,"%AsyncIteratorPrototype%":asyncGenPrototype$2?getProto$4(asyncGenPrototype$2):undefined$4,"%Atomics%":"undefined"===typeof Atomics?undefined$4:Atomics,"%BigInt%":"undefined"===typeof BigInt?undefined$4:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?undefined$4:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?undefined$4:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?undefined$4:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?undefined$4:FinalizationRegistry,"%Function%":$Function$2,"%GeneratorFunction%":getEvalledConstructor$2("function* () {}"),"%Int8Array%":"undefined"===typeof Int8Array?undefined$4:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?undefined$4:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?undefined$4:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$6?getProto$4(getProto$4([][Symbol.iterator]())):undefined$4,"%JSON%":"object"===typeof JSON?JSON:undefined$4,"%Map%":"undefined"===typeof Map?undefined$4:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&hasSymbols$6?getProto$4((new Map)[Symbol.iterator]()):undefined$4,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?undefined$4:Promise,"%Proxy%":"undefined"===typeof Proxy?undefined$4:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?undefined$4:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?undefined$4:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&hasSymbols$6?getProto$4((new Set)[Symbol.iterator]()):undefined$4,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?undefined$4:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$6?getProto$4(""[Symbol.iterator]()):undefined$4,"%Symbol%":hasSymbols$6?Symbol:undefined$4,"%SyntaxError%":$SyntaxError$2,"%ThrowTypeError%":ThrowTypeError$3,"%TypedArray%":TypedArray$3,"%TypeError%":$TypeError$6,"%Uint8Array%":"undefined"===typeof Uint8Array?undefined$4:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?undefined$4:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?undefined$4:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?undefined$4:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?undefined$4:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?undefined$4:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?undefined$4:WeakSet},LEGACY_ALIASES$2={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$concat$2=functionBind.call(Function.call,Array.prototype.concat),$spliceApply$2=functionBind.call(Function.apply,Array.prototype.splice),$replace$3=functionBind.call(Function.call,String.prototype.replace),rePropName$3=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar$3=/\\(\\)?/g,stringToPath$3=function(e){var n=[];return $replace$3(e,rePropName$3,(function(e,t,r,o){n[n.length]=r?$replace$3(o,reEscapeChar$3,"$1"):t||e})),n},getBaseIntrinsic$3=function(e,n){var t,r=e;if(src(LEGACY_ALIASES$2,r)&&(r="%"+(t=LEGACY_ALIASES$2[r])[0]+"%"),src(INTRINSICS$3,r)){var o=INTRINSICS$3[r];if("undefined"===typeof o&&!n)throw new $TypeError$6("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:t,name:r,value:o}}throw new $SyntaxError$2("intrinsic "+e+" does not exist!")},GetIntrinsic$2=function(e,n){if("string"!==typeof e||0===e.length)throw new $TypeError$6("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof n)throw new $TypeError$6('"allowMissing" argument must be a boolean');var t=stringToPath$3(e),r=t.length>0?t[0]:"",o=getBaseIntrinsic$3("%"+r+"%",n),i=o.name,l=o.value,a=!1,u=o.alias;u&&(r=u[0],$spliceApply$2(t,$concat$2([0,1],u)));for(var s=1,c=!0;s<t.length;s+=1){var d=t[s];if("constructor"!==d&&c||(a=!0),src(INTRINSICS$3,i="%"+(r+="."+d)+"%"))l=INTRINSICS$3[i];else if(null!=l){if($gOPD$5&&s+1>=t.length){var f=$gOPD$5(l,d);if(c=!!f,!n&&!(d in l))throw new $TypeError$6("base intrinsic for "+e+" exists, but the property is not available.");l=c&&"get"in f&&!("originalValue"in f.get)?f.get:l[d]}else c=src(l,d),l=l[d];c&&!a&&(INTRINSICS$3[i]=l)}}return l},$gOPD$6=GetIntrinsic$2("%Object.getOwnPropertyDescriptor%");if($gOPD$6)try{$gOPD$6([],"length")}catch(e){$gOPD$6=null}var getOwnPropertyDescriptor$1=$gOPD$6,$toString$2=callBound("Object.prototype.toString"),hasSymbols$7=hasSymbols(),hasToStringTag$6=hasSymbols$7&&"symbol"===typeof Symbol.toStringTag,typedArrays=availableTypedArrays(),$indexOf$1=callBound("Array.prototype.indexOf",!0)||function(e,n){for(var t=0;t<e.length;t+=1)if(e[t]===n)return t;return-1},$slice=callBound("String.prototype.slice"),toStrTags={},getPrototypeOf=Object.getPrototypeOf;hasToStringTag$6&&getOwnPropertyDescriptor$1&&getPrototypeOf&&foreach(typedArrays,(function(e){var n=new commonjsGlobal[e];if(!(Symbol.toStringTag in n))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var t=getPrototypeOf(n),r=getOwnPropertyDescriptor$1(t,Symbol.toStringTag);if(!r){var o=getPrototypeOf(t);r=getOwnPropertyDescriptor$1(o,Symbol.toStringTag)}toStrTags[e]=r.get}));var tryTypedArrays=function(n){var t=!1;return foreach(toStrTags,(function(r,o){if(!t)try{t=r.call(n)===o}catch(e){}})),t},isTypedArray=function(e){if(!e||"object"!==typeof e)return!1;if(!hasToStringTag$6){var n=$slice($toString$2(e),8,-1);return $indexOf$1(typedArrays,n)>-1}return!!getOwnPropertyDescriptor$1&&tryTypedArrays(e)},$toString$3=callBound("Object.prototype.toString"),hasSymbols$8=hasSymbols(),hasToStringTag$7=hasSymbols$8&&"symbol"===typeof Symbol.toStringTag,typedArrays$1=availableTypedArrays(),$slice$1=callBound("String.prototype.slice"),toStrTags$1={},getPrototypeOf$1=Object.getPrototypeOf;hasToStringTag$7&&getOwnPropertyDescriptor&&getPrototypeOf$1&&foreach(typedArrays$1,(function(e){if("function"===typeof commonjsGlobal[e]){var n=new commonjsGlobal[e];if(!(Symbol.toStringTag in n))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var t=getPrototypeOf$1(n),r=getOwnPropertyDescriptor(t,Symbol.toStringTag);if(!r){var o=getPrototypeOf$1(t);r=getOwnPropertyDescriptor(o,Symbol.toStringTag)}toStrTags$1[e]=r.get}}));var tryTypedArrays$1=function(n){var t=!1;return foreach(toStrTags$1,(function(r,o){if(!t)try{var i=r.call(n);i===o&&(t=i)}catch(e){}})),t},whichTypedArray=function(e){return!!isTypedArray(e)&&(hasToStringTag$7?tryTypedArrays$1(e):$slice$1($toString$3(e),8,-1))},canBeObject=function(e){return"undefined"!==typeof e&&null!==e},hasSymbols$9=shams(),toObject=Object,$push=callBound("Array.prototype.push"),$propIsEnumerable=callBound("Object.prototype.propertyIsEnumerable"),originalGetSymbols=hasSymbols$9?Object.getOwnPropertySymbols:null,implementation$4=function(e,n){if(!canBeObject(e))throw new TypeError("target must be an object");var t,r,o,i,l,a,u,s=toObject(e);for(t=1;t<arguments.length;++t){r=toObject(arguments[t]),i=objectKeys(r);var c=hasSymbols$9&&(Object.getOwnPropertySymbols||originalGetSymbols);if(c)for(l=c(r),o=0;o<l.length;++o)u=l[o],$propIsEnumerable(r,u)&&$push(i,u);for(o=0;o<i.length;++o)a=r[u=i[o]],$propIsEnumerable(r,u)&&(s[u]=a)}return s},lacksProperEnumerationOrder=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",n=e.split(""),t={},r=0;r<n.length;++r)t[n[r]]=n[r];var o=Object.assign({},t),i="";for(var l in o)i+=l;return e!==i},assignHasPendingExceptions=function(){if(!Object.assign||!Object.preventExtensions)return!1;var n=Object.preventExtensions({1:2});try{Object.assign(n,"xy")}catch(e){return"y"===n[1]}return!1},polyfill$3=function(){return Object.assign?lacksProperEnumerationOrder()||assignHasPendingExceptions()?implementation$4:Object.assign:implementation$4},shim$2=function(){var e=polyfill$3();return defineProperties_1(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},polyfill$4=callBind.apply(polyfill$3()),bound=function(e,n){return polyfill$4(Object,arguments)};defineProperties_1(bound,{getPolyfill:polyfill$3,implementation:implementation$4,shim:shim$2});var object_assign=bound,$getTime=callBound("Date.prototype.getTime"),gPO=Object.getPrototypeOf,$objToString=callBound("Object.prototype.toString"),$Set$2=getIntrinsic("%Set%",!0),$mapHas$4=callBound("Map.prototype.has",!0),$mapGet$1=callBound("Map.prototype.get",!0),$mapSize=callBound("Map.prototype.size",!0),$setAdd=callBound("Set.prototype.add",!0),$setDelete=callBound("Set.prototype.delete",!0),$setHas$3=callBound("Set.prototype.has",!0),$setSize=callBound("Set.prototype.size",!0);function setHasEqualElement(e,n,t,r){for(var o,i=esGetIterator(e);(o=i.next())&&!o.done;)if(internalDeepEqual(n,o.value,t,r))return $setDelete(e,o.value),!0;return!1}function findLooseMatchingPrimitives(e){return"undefined"===typeof e?null:"object"!==typeof e?"symbol"!==typeof e&&("string"!==typeof e&&"number"!==typeof e||+e===+e):void 0}function mapMightHaveLoosePrim(e,n,t,r,o,i){var l=findLooseMatchingPrimitives(t);if(null!=l)return l;var a=$mapGet$1(n,l),u=object_assign({},o,{strict:!1});return!("undefined"===typeof a&&!$mapHas$4(n,l)||!internalDeepEqual(r,a,u,i))&&(!$mapHas$4(e,l)&&internalDeepEqual(r,a,u,i))}function setMightHaveLoosePrim(e,n,t){var r=findLooseMatchingPrimitives(t);return null!=r?r:$setHas$3(n,r)&&!$setHas$3(e,r)}function mapHasEqualEntry(e,n,t,r,o,i){for(var l,a,u=esGetIterator(e);(l=u.next())&&!l.done;)if(internalDeepEqual(t,a=l.value,o,i)&&internalDeepEqual(r,$mapGet$1(n,a),o,i))return $setDelete(e,a),!0;return!1}function internalDeepEqual(e,n,t,r){var o=t||{};if(o.strict?objectIs(e,n):e===n)return!0;if(whichBoxedPrimitive(e)!==whichBoxedPrimitive(n))return!1;if(!e||!n||"object"!==typeof e&&"object"!==typeof n)return o.strict?objectIs(e,n):e==n;var i,l=r.has(e),a=r.has(n);if(l&&a){if(r.get(e)===r.get(n))return!0}else i={};return l||r.set(e,i),a||r.set(n,i),objEquiv(e,n,o,r)}function isBuffer(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&("function"===typeof e.copy&&"function"===typeof e.slice&&(!(e.length>0&&"number"!==typeof e[0])&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))))}function setEquiv(e,n,t,r){if($setSize(e)!==$setSize(n))return!1;for(var o,i,l,a=esGetIterator(e),u=esGetIterator(n);(o=a.next())&&!o.done;)if(o.value&&"object"===typeof o.value)l||(l=new $Set$2),$setAdd(l,o.value);else if(!$setHas$3(n,o.value)){if(t.strict)return!1;if(!setMightHaveLoosePrim(e,n,o.value))return!1;l||(l=new $Set$2),$setAdd(l,o.value)}if(l){for(;(i=u.next())&&!i.done;)if(i.value&&"object"===typeof i.value){if(!setHasEqualElement(l,i.value,t.strict,r))return!1}else if(!t.strict&&!$setHas$3(e,i.value)&&!setHasEqualElement(l,i.value,t.strict,r))return!1;return 0===$setSize(l)}return!0}function mapEquiv(e,n,t,r){if($mapSize(e)!==$mapSize(n))return!1;for(var o,i,l,a,u,s,c=esGetIterator(e),d=esGetIterator(n);(o=c.next())&&!o.done;)if(a=o.value[0],u=o.value[1],a&&"object"===typeof a)l||(l=new $Set$2),$setAdd(l,a);else if("undefined"===typeof(s=$mapGet$1(n,a))&&!$mapHas$4(n,a)||!internalDeepEqual(u,s,t,r)){if(t.strict)return!1;if(!mapMightHaveLoosePrim(e,n,a,u,t,r))return!1;l||(l=new $Set$2),$setAdd(l,a)}if(l){for(;(i=d.next())&&!i.done;)if(a=i.value[0],s=i.value[1],a&&"object"===typeof a){if(!mapHasEqualEntry(l,e,a,s,t,r))return!1}else if(!t.strict&&(!e.has(a)||!internalDeepEqual($mapGet$1(e,a),s,t,r))&&!mapHasEqualEntry(l,e,a,s,object_assign({},t,{strict:!1}),r))return!1;return 0===$setSize(l)}return!0}function objEquiv(e,n,t,r){var o,i;if(typeof e!==typeof n)return!1;if(null==e||null==n)return!1;if($objToString(e)!==$objToString(n))return!1;if(isArguments$1(e)!==isArguments$1(n))return!1;if(isarray(e)!==isarray(n))return!1;var l=e instanceof Error,a=n instanceof Error;if(l!==a)return!1;if((l||a)&&(e.name!==n.name||e.message!==n.message))return!1;var u=isRegex(e),s=isRegex(n);if(u!==s)return!1;if((u||s)&&(e.source!==n.source||regexp_prototype_flags(e)!==regexp_prototype_flags(n)))return!1;var c=isDateObject(e),d=isDateObject(n);if(c!==d)return!1;if((c||d)&&$getTime(e)!==$getTime(n))return!1;if(t.strict&&gPO&&gPO(e)!==gPO(n))return!1;if(whichTypedArray(e)!==whichTypedArray(n))return!1;var f=isBuffer(e),p=isBuffer(n);if(f!==p)return!1;if(f||p){if(e.length!==n.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==n[o])return!1;return!0}if(typeof e!==typeof n)return!1;var h=objectKeys(e),_=objectKeys(n);if(h.length!==_.length)return!1;for(h.sort(),_.sort(),o=h.length-1;o>=0;o--)if(h[o]!=_[o])return!1;for(o=h.length-1;o>=0;o--)if(!internalDeepEqual(e[i=h[o]],n[i],t,r))return!1;var g=whichCollection(e),m=whichCollection(n);return g===m&&("Set"===g||"Set"===m?setEquiv(e,n,t,r):"Map"!==g||mapEquiv(e,n,t,r))}var deepEqual$2=function(e,n,t){return internalDeepEqual(e,n,t,sideChannel())},getRelativeBounds=function(e,n,t){if("bottom"===t)return{left:n.left,top:n.top+n.height+0,width:n.width,height:e.height};if("top"===t)return{left:n.left,top:n.top-e.height-0,width:n.width,height:e.height};if("right"===t)return{left:n.left+n.width+0,top:n.top,width:e.width,height:n.height};if("left"===t)return{left:n.left-e.width-0,top:n.top,width:e.width,height:n.height};throw new Error("invalid relativeDirection")},objEqual=function(e,n){return deepEqual$2(e,n,{strict:!0})},waitFor=function(e,n){var t=e;return function(){0===--t&&n()}},GlueController=function(){function e(n,t){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.portsBridge=n,this.sessionStorage=t}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.initSystemGlue(e.glue);case 2:this._systemGlue=n.sent,logger.setLogger(this._systemGlue.logger);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"initClientGlue",value:function(e,n,t){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o,i,l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.portsBridge.createInternalClient();case 2:if(o=r.sent,this.registerClientWindow(t),i={application:"Platform",gateway:{webPlatform:{port:o,windowId:this.platformWindowId}}},l=Object.assign({},e,i),!n){r.next=12;break}return r.next=9,n(l);case 9:r.t0=r.sent,r.next=15;break;case 12:return r.next=14,glueWebFactory(l);case 14:r.t0=r.sent;case 15:return this._clientGlue=r.t0,r.abrupt("return",this._clientGlue);case 17:case"end":return r.stop()}}),r,this)})))}},{key:"createPlatformSystemMethod",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.createMethodAsync(GlueWebPlatformControlName$1,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"createPlatformSystemStream",value:function(){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createStream(GlueWebPlatformStreamName$1);case 2:this._systemStream=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"createWorkspacesStream",value:function(){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createStream(GlueWebPlatformWorkspacesStreamName);case 2:this._workspacesStream=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"createWorkspacesEventsReceiver",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._systemGlue.interop.register("T42.Workspaces.Events",(function(n){return e(n)}));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"pushSystemMessage",value:function(e,n,t){if(!this._systemStream)throw new Error("Cannot push data to domain: ".concat(e,", because the system stream is not created"));this._systemStream.push({domain:e,operation:n,data:t})}},{key:"pushWorkspacesMessage",value:function(e){if(!this._workspacesStream)throw new Error("Cannot push data to domain: workspaces, because the workspaces stream is not created");this._workspacesStream.push({data:e})}},{key:"callFrame",value:function(e,n,t){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o,i,l,a,u;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o={operation:e.name,operationArguments:n},i="Internal Platform->Frame Communication Error. Attempted calling workspace frame: ".concat(t," for operation ").concat(e.name," "),!e.dataDecoder){r.next=6;break}if((l=e.dataDecoder.run(o.operationArguments)).ok){r.next=6;break}throw new Error("".concat(i," OutBound validation failed: ").concat(JSON.stringify(l.error)));case 6:return r.next=8,this.transmitMessage(GlueWorkspaceFrameClientControlName,o,i,{windowId:t},{methodResponseTimeoutMs:3e4,waitTimeoutMs:3e4});case 8:if(a=r.sent,!e.resultDecoder){r.next=13;break}if((u=e.resultDecoder.run(a)).ok){r.next=13;break}throw new Error("".concat(i," Result validation failed: ").concat(JSON.stringify(u.error)));case 13:return r.abrupt("return",a);case 14:case"end":return r.stop()}}),r,this)})))}},{key:"callWindow",value:function(e,n,t){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o,i,l,a,u,s;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=e.name,i={domain:"windows",operation:o,data:n},l="Internal Platform->Window Communication Error. Attempted calling client window: ".concat(t," for operation ").concat(o,". "),!e.dataDecoder){r.next=7;break}if((a=e.dataDecoder.run(i.data)).ok){r.next=7;break}throw new Error("".concat(l," OutBound validation failed: ").concat(JSON.stringify(a.error)));case 7:return r.next=9,this.transmitMessage(GlueClientControlName$1,i,l,{windowId:t},{methodResponseTimeoutMs:3e4,waitTimeoutMs:3e4});case 9:if(u=r.sent,!e.resultDecoder){r.next=14;break}if((s=e.resultDecoder.run(u)).ok){r.next=14;break}throw new Error("".concat(l," Result validation failed: ").concat(JSON.stringify(s.error)));case 14:return r.abrupt("return",u);case 15:case"end":return r.stop()}}),r,this)})))}},{key:"setInstanceStartContext",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="___instance___".concat(e),t.next=3,this._systemGlue.contexts.set(r,n);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setWindowStartContext",value:function(e,n){var t=this;return PromisePlus$3((function(r,o){var i,l=waitFor(3,(function(){r(),i()})),a="___window___".concat(e);t._clientGlue.contexts.subscribe(a,l).then((function(e){i=e,l()})),t._systemGlue.contexts.set(a,n).then(l).catch(o)}),1e4,"Timed out waiting to set the window context for: ".concat(e))}},{key:"getServers",value:function(){return this._clientGlue.interop.servers()}},{key:"subscribeForServerAdded",value:function(e){return this._clientGlue.interop.serverAdded(e)}},{key:"subscribeForMethodAdded",value:function(e){return this._clientGlue.interop.methodAdded(e)}},{key:"invokeMethod",value:function(e,n,t,r,o,i){return this._clientGlue.interop.invoke(e,n,t,r,o,i)}},{key:"initSystemGlue",value:function(e){var n,t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o,i;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.portsBridge.createInternalClient();case 2:return o=r.sent,i=null!==(t=null===(n=null===e||void 0===e?void 0:e.systemLogger)||void 0===n?void 0:n.level)&&void 0!==t?t:"info",r.next=6,GlueCore$1({application:"Platform",gateway:{webPlatform:{port:o}},logger:i});case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r,this)})))}},{key:"setContext",value:function(e,n){return this._systemGlue.contexts.set(e,n)}},{key:"registerClientWindow",value:function(e){if(e){var n=this.sessionStorage.getPlatformFrame();if(this._platformClientWindowId=n?n.windowId:shortid$1.generate(),!n){var t={windowId:this._platformClientWindowId,active:!0,isPlatform:!0};this.sessionStorage.saveFrameData(t)}}else{var r=this.sessionStorage.getWindowDataByName("Platform");this._platformClientWindowId=r?r.windowId:shortid$1.generate(),r||this.sessionStorage.saveWindowData({name:"Platform",windowId:this.platformWindowId})}}},{key:"createMethodAsync",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._systemGlue.interop.registerAsync(e,n);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"createStream",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this._systemGlue.interop.createStream(e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"transmitMessage",value:function(e,n,t,r,o){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,this._systemGlue.interop.invoke(e,n,r,o);case 3:if(l=i.sent){i.next=6;break}throw new Error("".concat(t," Received unsupported result from the client - empty result"));case 6:if(Array.isArray(l.all_return_values)&&0!==l.all_return_values.length){i.next=8;break}throw new Error("".concat(t," Received unsupported result from the client - empty values collection"));case 8:i.next=16;break;case 10:if(i.prev=10,i.t0=i.catch(0),!(i.t0&&i.t0.all_errors&&i.t0.all_errors.length)){i.next=15;break}throw a=i.t0.all_errors[0].message,new Error("".concat(t," -> Inner message: ").concat(a));case 15:throw new Error("".concat(t," -> Inner message: ").concat(i.t0.message));case 16:return i.abrupt("return",l.all_return_values[0].returned);case 17:case"end":return i.stop()}}),i,this,[[0,10]])})))}},{key:"clientGlue",get:function(){return this._clientGlue}},{key:"platformWindowId",get:function(){return this._platformClientWindowId.slice()}}]),e}();function createRegistry$3(e){if(e&&e.errorHandling&&"function"!==typeof e.errorHandling&&"log"!==e.errorHandling&&"silent"!==e.errorHandling&&"throw"!==e.errorHandling)throw new Error('Invalid options passed to createRegistry. Prop errorHandling should be ["log" | "silent" | "throw" | (err) => void], but '+typeof e.errorHandling+" was passed");var n=e&&"function"===typeof e.errorHandling&&e.errorHandling,t={};function r(t,r){var o=t instanceof Error?t:new Error(t);if(n)n(o);else{var i='[ERROR] callback-registry: User callback for key "'+r+'" failed: '+o.stack;if(e)switch(e.errorHandling){case"log":return console.error(i);case"silent":return;case"throw":throw new Error(i)}console.error(i)}}return{add:function(e,n,o){var i=t[e];return i||(i=[],t[e]=i),i.push(n),o&&setTimeout((function(){o.forEach((function(o){var i;if(null===(i=t[e])||void 0===i?void 0:i.includes(n))try{Array.isArray(o)?n.apply(void 0,o):n.apply(void 0,[o])}catch(err){r(err,e)}}))}),0),function(){var r=t[e];r&&(0===(r=r.reduce((function(e,t,r){return t===n&&e.length===r||e.push(t),e}),[])).length?delete t[e]:t[e]=r)}},execute:function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=t[e];if(!i||0===i.length)return[];var l=[];return i.forEach((function(t){try{var o=t.apply(void 0,n);l.push(o)}catch(err){l.push(void 0),r(err,e)}})),l},clear:function(){t={}},clearKey:function(e){t[e]&&delete t[e]}}}createRegistry$3.default=createRegistry$3;var lib$4=createRegistry$3,PortsBridge=function(){function e(n,t,r){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.gateway=n,this.sessionStorage=t,this.ioc=r,this.registry=lib$4(),this.clients={},this.unLoadStarted=!1}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.gateway.start(e);case 2:this.setUpGenericMessageHandler(),this.setUpBeforeUnload();case 4:case"end":return n.stop()}}),n,this)})))}},{key:"createInternalClient",value:function(){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var n;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.ioc.createMessageChannel(),e.next=3,this.gateway.connectClient(n.port1);case 3:return e.abrupt("return",n.port2);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"onClientUnloaded",value:function(e){return this.registry.add("client-unloaded",e)}},{key:"setUpBeforeUnload",value:function(){var e=this;window.addEventListener("beforeunload",(function(){e.unLoadStarted=!0;var n={glue42core:{type:Glue42CoreMessageTypes.platformUnload.name}};for(var t in e.clients)e.clients[t].postMessage(n,defaultTargetString)}))}},{key:"setUpGenericMessageHandler",value:function(){var e=this;window.addEventListener("message",(function(n){var t,r=null===(t=n.data)||void 0===t?void 0:t.glue42core;if(r&&!e.unLoadStarted){if(r.type===Glue42CoreMessageTypes.clientUnload.name){var o={windowId:r.data.ownWindowId,win:n.source};return e.registry.execute("client-unloaded",o)}return r.type===Glue42CoreMessageTypes.connectionRequest.name?e.handleRemoteConnectionRequest(n.source,n.origin,r.clientId,r.clientType,r.bridgeInstanceId):r.type===Glue42CoreMessageTypes.platformPing.name?e.handlePlatformPing(n.source,n.origin):r.type===Glue42CoreMessageTypes.parentPing.name?e.handleParentPing(n.source,n.origin):void 0}}))}},{key:"handleRemoteConnectionRequest",value:function(e,n,t,r,o){var i;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function l(){var a,u,s,c,d;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return a=this.ioc.createMessageChannel(),l.next=3,this.gateway.connectClient(a.port1,this.removeClient.bind(this));case 3:u=this.sessionStorage.getBridgeInstanceData(o),s=null===u||void 0===u?void 0:u.appName,c=null===(i=this.sessionStorage.getWindowDataByName("Platform"))||void 0===i?void 0:i.windowId,d={glue42core:{type:Glue42CoreMessageTypes.connectionAccepted.name,port:a.port2,parentWindowId:c,appName:s,clientId:t,clientType:r}},"child"===r&&(this.clients[t]=e),e.postMessage(d,n,[a.port2]);case 9:case"end":return l.stop()}}),l,this)})))}},{key:"handleParentPing",value:function(e,n){var t={glue42core:{type:Glue42CoreMessageTypes.parentReady.name}};e.postMessage(t,n)}},{key:"handlePlatformPing",value:function(e,n){var t={glue42core:{type:Glue42CoreMessageTypes.platformReady.name}};e.postMessage(t,n)}},{key:"removeClient",value:function(e){e&&this.clients[e]&&delete this.clients[e]}}]),e}(),windowOperationDecoder=oneOf$1(constant$1("openWindow"),constant$1("windowHello"),constant$1("getUrl"),constant$1("getTitle"),constant$1("setTitle"),constant$1("moveResize"),constant$1("focus"),constant$1("close"),constant$1("getBounds"),constant$1("registerWorkspaceWindow"),constant$1("unregisterWorkspaceWindow")),openWindowConfigDecoder$1=object$1({name:nonEmptyStringDecoder$1,url:nonEmptyStringDecoder$1,options:optional$1(windowOpenSettingsDecoder$1)}),openWindowSuccessDecoder=object$1({windowId:nonEmptyStringDecoder$1,name:nonEmptyStringDecoder$1}),simpleWindowDecoder$1=object$1({windowId:nonEmptyStringDecoder$1}),windowBoundsResultDecoder$1=object$1({windowId:nonEmptyStringDecoder$1,bounds:object$1({top:number$1(),left:number$1(),width:nonNegativeNumberDecoder$1,height:nonNegativeNumberDecoder$1})}),windowUrlResultDecoder$1=object$1({windowId:nonEmptyStringDecoder$1,url:nonEmptyStringDecoder$1}),windowMoveResizeConfigDecoder$1=object$1({windowId:nonEmptyStringDecoder$1,top:optional$1(number$1()),left:optional$1(number$1()),width:optional$1(nonNegativeNumberDecoder$1),height:optional$1(nonNegativeNumberDecoder$1),relative:optional$1(boolean$1())}),windowTitleConfigDecoder$1=object$1({windowId:nonEmptyStringDecoder$1,title:string$1()}),workspacesOperationDecoder=oneOf$1(constant$1("isWindowInWorkspace"),constant$1("createWorkspace"),constant$1("getAllFramesSummaries"),constant$1("getFrameSummary"),constant$1("getAllWorkspacesSummaries"),constant$1("getWorkspaceSnapshot"),constant$1("getAllLayoutsSummaries"),constant$1("openWorkspace"),constant$1("deleteLayout"),constant$1("saveLayout"),constant$1("importLayout"),constant$1("exportAllLayouts"),constant$1("restoreItem"),constant$1("maximizeItem"),constant$1("focusItem"),constant$1("closeItem"),constant$1("resizeItem"),constant$1("moveFrame"),constant$1("getFrameSnapshot"),constant$1("forceLoadWindow"),constant$1("ejectWindow"),constant$1("setItemTitle"),constant$1("moveWindowTo"),constant$1("addWindow"),constant$1("addContainer"),constant$1("bundleWorkspace"),constant$1("changeFrameState"),constant$1("getFrameState"),constant$1("frameHello")),frameHelloDecoder=object$1({windowId:optional$1(nonEmptyStringDecoder$1)}),workspaceWindowDataDecoder=object$1({name:nonEmptyStringDecoder$1,windowId:nonEmptyStringDecoder$1,frameId:nonEmptyStringDecoder$1,appName:optional$1(nonEmptyStringDecoder$1),context:optional$1(anyJson$1()),title:optional$1(nonEmptyStringDecoder$1)}),isWindowInSwimlaneResultDecoder=object$1({inWorkspace:boolean$1()}),allParentDecoder=oneOf$1(constant$1("workspace"),constant$1("row"),constant$1("column"),constant$1("group")),subParentDecoder=oneOf$1(constant$1("row"),constant$1("column"),constant$1("group")),frameStateDecoder=oneOf$1(constant$1("maximized"),constant$1("minimized"),constant$1("normal")),workspaceBuilderCreateConfigDecoder=object$1({saveLayout:optional$1(boolean$1())}),deleteLayoutConfigDecoder=object$1({name:nonEmptyStringDecoder$1}),swimlaneWindowDefinitionDecoder=object$1({type:optional$1(constant$1("window")),appName:optional$1(nonEmptyStringDecoder$1),windowId:optional$1(nonEmptyStringDecoder$1),context:optional$1(anyJson$1())}),strictSwimlaneWindowDefinitionDecoder=object$1({type:constant$1("window"),appName:optional$1(nonEmptyStringDecoder$1),windowId:optional$1(nonEmptyStringDecoder$1),context:optional$1(anyJson$1())}),parentDefinitionDecoder=object$1({type:optional$1(subParentDecoder),children:optional$1(lazy$1((function(){return array$1(oneOf$1(swimlaneWindowDefinitionDecoder,parentDefinitionDecoder))})))}),strictParentDefinitionDecoder=object$1({type:subParentDecoder,children:optional$1(lazy$1((function(){return array$1(oneOf$1(strictSwimlaneWindowDefinitionDecoder,strictParentDefinitionDecoder))})))}),stateDecoder=oneOf$1(string$1().where((function(e){return"maximized"===e.toLowerCase()}),"Expected a case insensitive variation of 'maximized'"),string$1().where((function(e){return"normal"===e.toLowerCase()}),"Expected a case insensitive variation of 'normal'")),newFrameConfigDecoder=object$1({bounds:optional$1(object$1({left:optional$1(number$1()),top:optional$1(number$1()),width:optional$1(nonNegativeNumberDecoder$1),height:optional$1(nonNegativeNumberDecoder$1)}))}),restoreTypeDecoder=oneOf$1(constant$1("direct"),constant$1("delayed"),constant$1("lazy")),restoreWorkspaceConfigDecoder=object$1({app:optional$1(nonEmptyStringDecoder$1),context:optional$1(anyJson$1()),restoreType:optional$1(restoreTypeDecoder),title:optional$1(nonEmptyStringDecoder$1),reuseWorkspaceId:optional$1(nonEmptyStringDecoder$1),frameId:optional$1(nonEmptyStringDecoder$1),lockdown:optional$1(boolean$1()),activateFrame:optional$1(boolean$1()),newFrame:optional$1(oneOf$1(newFrameConfigDecoder,boolean$1())),noTabHeader:optional$1(boolean$1()),inMemoryLayout:optional$1(boolean$1())}),openWorkspaceConfigDecoder=object$1({name:nonEmptyStringDecoder$1,restoreOptions:optional$1(restoreWorkspaceConfigDecoder)}),workspaceDefinitionDecoder=object$1({children:optional$1(array$1(oneOf$1(swimlaneWindowDefinitionDecoder,parentDefinitionDecoder))),context:optional$1(anyJson$1()),config:optional$1(object$1({title:optional$1(nonEmptyStringDecoder$1),position:optional$1(nonNegativeNumberDecoder$1),isFocused:optional$1(boolean$1()),noTabHeader:optional$1(boolean$1())})),frame:optional$1(object$1({reuseFrameId:optional$1(nonEmptyStringDecoder$1),newFrame:optional$1(oneOf$1(boolean$1(),newFrameConfigDecoder))}))}),builderConfigDecoder=object$1({type:allParentDecoder,definition:optional$1(oneOf$1(workspaceDefinitionDecoder,parentDefinitionDecoder))}),workspaceCreateConfigDecoder=intersection(workspaceDefinitionDecoder,object$1({saveConfig:optional$1(object$1({saveLayout:optional$1(boolean$1())}))})),getFrameSummaryConfigDecoder=object$1({itemId:nonEmptyStringDecoder$1}),frameSummaryDecoder=object$1({id:nonEmptyStringDecoder$1}),workspaceSummaryDecoder=object$1({id:nonEmptyStringDecoder$1,frameId:nonEmptyStringDecoder$1,positionIndex:number$1(),title:nonEmptyStringDecoder$1,focused:boolean$1(),layoutName:optional$1(nonEmptyStringDecoder$1)}),containerSummaryDecoder=object$1({type:subParentDecoder,id:nonEmptyStringDecoder$1,frameId:nonEmptyStringDecoder$1,workspaceId:nonEmptyStringDecoder$1,positionIndex:number$1()}),eventTypeDecoder=oneOf$1(constant$1("frame"),constant$1("workspace"),constant$1("container"),constant$1("window")),streamRequestArgumentsDecoder=object$1({type:eventTypeDecoder,branch:nonEmptyStringDecoder$1}),workspaceEventActionDecoder=oneOf$1(constant$1("opened"),constant$1("closing"),constant$1("closed"),constant$1("focus"),constant$1("added"),constant$1("loaded"),constant$1("removed"),constant$1("childrenUpdate"),constant$1("containerChange"),constant$1("maximized"),constant$1("minimized"),constant$1("normal"),constant$1("selected")),workspaceConfigResultDecoder=object$1({frameId:nonEmptyStringDecoder$1,title:nonEmptyStringDecoder$1,positionIndex:nonNegativeNumberDecoder$1,name:nonEmptyStringDecoder$1,layoutName:optional$1(nonEmptyStringDecoder$1)}),baseChildSnapshotConfigDecoder=object$1({frameId:nonEmptyStringDecoder$1,workspaceId:nonEmptyStringDecoder$1,positionIndex:number$1()}),parentSnapshotConfigDecoder=anyJson$1(),swimlaneWindowSnapshotConfigDecoder=intersection(baseChildSnapshotConfigDecoder,object$1({windowId:optional$1(nonEmptyStringDecoder$1),isMaximized:optional$1(boolean$1()),isFocused:boolean$1(),title:optional$1(string$1()),appName:optional$1(nonEmptyStringDecoder$1)})),childSnapshotResultDecoder=object$1({id:nonEmptyStringDecoder$1,config:oneOf$1(parentSnapshotConfigDecoder,swimlaneWindowSnapshotConfigDecoder),children:optional$1(lazy$1((function(){return array$1(childSnapshotResultDecoder)}))),type:oneOf$1(constant$1("window"),constant$1("row"),constant$1("column"),constant$1("group"))}),workspaceSnapshotResultDecoder=object$1({id:nonEmptyStringDecoder$1,config:workspaceConfigResultDecoder,children:array$1(childSnapshotResultDecoder),frameSummary:frameSummaryDecoder}),customWorkspaceChildSnapshotDecoder=object$1({id:nonEmptyStringDecoder$1,config:oneOf$1(parentSnapshotConfigDecoder,swimlaneWindowSnapshotConfigDecoder),children:optional$1(lazy$1((function(){return array$1(customWorkspaceChildSnapshotDecoder)}))),type:oneOf$1(constant$1("window"),constant$1("row"),constant$1("column"),constant$1("group"))}),groupLayoutItemDecoder$2=object$1({type:constant$1("group"),config:anyJson$1(),children:array$1(oneOf$1(windowLayoutItemDecoder$1))}),columnLayoutItemDecoder$2=object$1({type:constant$1("column"),config:anyJson$1(),children:array$1(oneOf$1(groupLayoutItemDecoder$2,windowLayoutItemDecoder$1,lazy$1((function(){return columnLayoutItemDecoder$2})),lazy$1((function(){return rowLayoutItemDecoder$2}))))}),rowLayoutItemDecoder$2=object$1({type:constant$1("row"),config:anyJson$1(),children:array$1(oneOf$1(columnLayoutItemDecoder$2,groupLayoutItemDecoder$2,windowLayoutItemDecoder$1,lazy$1((function(){return rowLayoutItemDecoder$2}))))}),workspaceLayoutDecoder=object$1({name:nonEmptyStringDecoder$1,type:constant$1("Workspace"),metadata:optional$1(anyJson$1()),components:array$1(object$1({type:constant$1("Workspace"),state:object$1({config:anyJson$1(),context:anyJson$1(),children:array$1(oneOf$1(rowLayoutItemDecoder$2,columnLayoutItemDecoder$2,groupLayoutItemDecoder$2,windowLayoutItemDecoder$1))})}))}),workspacesLayoutImportConfigDecoder=object$1({layout:workspaceLayoutDecoder,mode:oneOf$1(constant$1("replace"),constant$1("merge"))}),exportedLayoutsResultDecoder=object$1({layouts:array$1(workspaceLayoutDecoder)}),frameSummaryResultDecoder=object$1({id:nonEmptyStringDecoder$1}),frameSummariesResultDecoder=object$1({summaries:array$1(frameSummaryResultDecoder)}),workspaceSummaryResultDecoder=object$1({id:nonEmptyStringDecoder$1,config:workspaceConfigResultDecoder}),workspaceSummariesResultDecoder=object$1({summaries:array$1(workspaceSummaryResultDecoder)}),frameSnapshotResultDecoder=object$1({id:nonEmptyStringDecoder$1,config:anyJson$1(),workspaces:array$1(workspaceSnapshotResultDecoder)}),layoutSummaryDecoder$2=object$1({name:nonEmptyStringDecoder$1}),layoutSummariesDecoder=object$1({summaries:array$1(layoutSummaryDecoder$2)}),simpleWindowOperationSuccessResultDecoder=object$1({windowId:nonEmptyStringDecoder$1}),voidResultDecoder=anyJson$1(),frameStateResultDecoder=object$1({state:frameStateDecoder}),resizeConfigDecoder=object$1({width:optional$1(nonNegativeNumberDecoder$1),height:optional$1(nonNegativeNumberDecoder$1),relative:optional$1(boolean$1())}),moveConfigDecoder=object$1({top:optional$1(number$1()),left:optional$1(number$1()),relative:optional$1(boolean$1())}),simpleItemConfigDecoder=object$1({itemId:nonEmptyStringDecoder$1}),frameStateConfigDecoder=object$1({frameId:nonEmptyStringDecoder$1,requestedState:frameStateDecoder}),setItemTitleConfigDecoder=object$1({itemId:nonEmptyStringDecoder$1,title:nonEmptyStringDecoder$1}),moveWindowConfigDecoder=object$1({itemId:nonEmptyStringDecoder$1,containerId:nonEmptyStringDecoder$1}),resizeItemConfigDecoder=intersection(simpleItemConfigDecoder,resizeConfigDecoder),moveFrameConfigDecoder=intersection(simpleItemConfigDecoder,moveConfigDecoder),simpleParentDecoder=object$1({id:nonEmptyStringDecoder$1,type:subParentDecoder}),addWindowConfigDecoder=object$1({definition:swimlaneWindowDefinitionDecoder,parentId:nonEmptyStringDecoder$1,parentType:allParentDecoder}),addContainerConfigDecoder=object$1({definition:strictParentDefinitionDecoder,parentId:nonEmptyStringDecoder$1,parentType:allParentDecoder}),addItemResultDecoder=object$1({itemId:nonEmptyStringDecoder$1,windowId:optional$1(nonEmptyStringDecoder$1)}),pingResultDecoder=object$1({live:boolean$1()}),bundleConfigDecoder=object$1({type:oneOf$1(constant$1("row"),constant$1("column")),workspaceId:nonEmptyStringDecoder$1}),containerSummaryResultDecoder=object$1({itemId:nonEmptyStringDecoder$1,config:parentSnapshotConfigDecoder}),frameStreamDataDecoder=object$1({frameSummary:frameSummaryDecoder}),workspaceStreamDataDecoder=object$1({workspaceSummary:workspaceSummaryResultDecoder,frameSummary:frameSummaryDecoder}),containerStreamDataDecoder=object$1({containerSummary:containerSummaryResultDecoder}),windowStreamDataDecoder=object$1({windowSummary:object$1({itemId:nonEmptyStringDecoder$1,parentId:nonEmptyStringDecoder$1,config:swimlaneWindowSnapshotConfigDecoder})}),workspaceLayoutSaveConfigDecoder=object$1({name:nonEmptyStringDecoder$1,workspaceId:nonEmptyStringDecoder$1,saveContext:optional$1(boolean$1())}),WindowsController$1=function(){function e(n,t,r,o){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.glueController=n,this.sessionController=t,this.stateController=r,this.ioc=o,this.started=!1,this.operations={openWindow:{name:"openWindow",execute:this.openWindow.bind(this),dataDecoder:openWindowConfigDecoder$1},windowHello:{name:"windowHello",execute:this.handleWindowHello.bind(this)},getBounds:{name:"getBounds",dataDecoder:simpleWindowDecoder$1,resultDecoder:windowBoundsResultDecoder$1,execute:this.handleGetBounds.bind(this)},getUrl:{name:"getUrl",dataDecoder:simpleWindowDecoder$1,resultDecoder:windowUrlResultDecoder$1,execute:this.handleGetUrl.bind(this)},moveResize:{name:"moveResize",dataDecoder:windowMoveResizeConfigDecoder$1,execute:this.handleMoveResize.bind(this)},focus:{name:"focus",dataDecoder:simpleWindowDecoder$1,execute:this.handleFocus.bind(this)},close:{name:"close",dataDecoder:simpleWindowDecoder$1,execute:this.handleClose.bind(this)},getTitle:{name:"getTitle",dataDecoder:simpleWindowDecoder$1,resultDecoder:windowTitleConfigDecoder$1,execute:this.handleGetTitle.bind(this)},setTitle:{name:"setTitle",dataDecoder:windowTitleConfigDecoder$1,execute:this.handleSetTitle.bind(this)},registerWorkspaceWindow:{name:"registerWorkspaceWindow",dataDecoder:workspaceWindowDataDecoder,execute:this.registerWorkspaceWindow.bind(this)},unregisterWorkspaceWindow:{name:"unregisterWorkspaceWindow",dataDecoder:simpleWindowDecoder$1,execute:this.handleWorkspaceClientRemoval.bind(this)}}}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.clientResponseTimeoutMs=e.windows.windowResponseTimeoutMs,this.defaultBounds=e.windows.defaultWindowOpenBounds,this.started=!0,this.stateController.onWindowDisappeared(this.cleanUpWindow.bind(this));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"handleControl",value:function(e){var n,t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a,u,s,c,d,f;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.started,l=e.data,a=e.commandId,(u=windowOperationDecoder.run(e.operation)).ok){i.next=6;break}throw new Error("This window request cannot be completed, because the operation name did not pass validation: ".concat(JSON.stringify(u.error)));case 6:if(s=u.result,!(c=null===(n=this.operations[s].dataDecoder)||void 0===n?void 0:n.run(l))||c.ok){i.next=10;break}throw new Error("Windows request for ".concat(s," rejected, because the provided arguments did not pass the validation: ").concat(JSON.stringify(c.error)));case 10:return null===(t=this.logger)||void 0===t||t.debug("[".concat(a,"] ").concat(s," command is valid with data: ").concat(JSON.stringify(l))),i.next=13,this.operations[s].execute(l,a);case 13:if(d=i.sent,!(f=null===(r=this.operations[s].resultDecoder)||void 0===r?void 0:r.run(d))||f.ok){i.next=17;break}throw new Error("Windows request for ".concat(s," could not be completed, because the operation result did not pass the validation: ").concat(JSON.stringify(f.error)));case 17:return null===(o=this.logger)||void 0===o||o.trace("[".concat(a,"] ").concat(s," command was executed successfully")),i.abrupt("return",d);case 19:case"end":return i.stop()}}),i,this)})))}},{key:"getWindowTitle",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.handleGetTitle({windowId:e},n);case 2:return r=t.sent,t.abrupt("return",r.title);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getWindowBounds",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.handleGetBounds({windowId:e},n);case 2:return r=t.sent,t.abrupt("return",r.bounds);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"processNewWindow",value:function(e,n,t){var r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null===(r=this.logger)||void 0===r||r.trace("processing a new window with id: ".concat(e.windowId," and name: ").concat(e.name)),this.sessionController.saveWindowData(e),t&&this.stateController.add(t,e.windowId),!n){i.next=7;break}return null===(o=this.logger)||void 0===o||o.trace("setting the context for window ".concat(e.windowId)),i.next=7,this.glueController.setWindowStartContext(e.windowId,n);case 7:this.emitStreamData("windowAdded",e);case 8:case"end":return i.stop()}}),i,this)})))}},{key:"handleWorkspaceClientRemoval",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.cleanUpWindow(e.windowId));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"handleClientUnloaded",value:function(e,n){var t,r,o;if(null===(t=this.logger)||void 0===t||t.trace("handling unloading of ".concat(e)),e){if(n.closed)return null===(r=this.logger)||void 0===r||r.trace("".concat(e," detected as closed, processing window cleanup")),this.cleanUpWindow(e);null===(o=this.logger)||void 0===o||o.trace("".concat(e," detected as not closed, adding to state controller")),this.stateController.add(n,e)}}},{key:"cleanUpWindow",value:function(e){this.stateController.remove(e),this.sessionController.fullWindowClean(e)&&this.emitStreamData("windowRemoved",{windowId:e})}},{key:"registerWorkspaceWindow",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling workspace window registration with id: ").concat(e.windowId," and name: ").concat(e.name)),this.sessionController.saveWindowData({windowId:e.windowId,name:e.name}),this.sessionController.saveWorkspaceClient({windowId:e.windowId,frameId:e.frameId,initialTitle:e.title}),!e.context){o.next=6;break}return o.next=6,this.glueController.setWindowStartContext(e.windowId,e.context);case 6:this.emitStreamData("windowAdded",{windowId:e.windowId,name:e.name}),null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] workspace window registered successfully with id ").concat(e.windowId," and name ").concat(e.name));case 8:case"end":return o.stop()}}),o,this)})))}},{key:"emitStreamData",value:function(e,n){var t;null===(t=this.logger)||void 0===t||t.trace("sending notification of event: ".concat(e," with data: ").concat(JSON.stringify(n))),this.glueController.pushSystemMessage("windows",e,n)}},{key:"openWindow",value:function(e,n){var t,r,o,i,l,a;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function u(){var s,c,d,f;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(!this.sessionController.getWindowDataByName(e.name)){u.next=3;break}throw new Error("Cannot open a window with name: ".concat(e.name,", because a window with that name already exists."));case 3:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling open command with a valid name: ").concat(e.name,", url: ").concat(e.url," and options: ").concat(JSON.stringify(e.options))),s={name:e.name,windowId:null!==(o=null===(r=e.options)||void 0===r?void 0:r.windowId)&&void 0!==o?o:shortid$1.generate()},u.next=7,this.getStartingBounds(e,n);case 7:if(c=u.sent,d="left=".concat(c.left,",top=").concat(c.top,",width=").concat(c.width,",height=").concat(c.height),null===(i=this.logger)||void 0===i||i.trace("[".concat(n,"] calling native window open with bounds: ").concat(d)),f=window.open(e.url,s.windowId,d)){u.next=13;break}throw new Error("Cannot open window with url: ".concat(e.url," and name: ").concat(e.name,". The most likely reason is that the user has not approved popups or has a blocker."));case 13:return u.next=15,this.processNewWindow(s,null===(l=e.options)||void 0===l?void 0:l.context,f);case 15:return null===(a=this.logger)||void 0===a||a.trace("[".concat(n,"] the new window is opened, saved in session, state and announced, responding to the caller")),u.abrupt("return",s);case 17:case"end":return u.stop()}}),u,this)})))}},{key:"handleWindowHello",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i,l,a,u,s,c=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling a hello message from a real windowId: ").concat(e.windowId)),e.windowId&&(this.stateController.remove(e.windowId),(i=this.sessionController.getWorkspaceClientById(e.windowId))&&i.initialTitle&&(l=e.windowId,a=i.initialTitle,PromiseWrap$1((function(){return c.glueController.callWindow(c.operations.setTitle,{windowId:l,title:a},l)}),this.clientResponseTimeoutMs).catch((function(e){var t;return null===(t=c.logger)||void 0===t?void 0:t.trace("[".concat(n,"] error while setting the workspace window title: ").concat(e.message))})))),u=!(!e.windowId||!this.sessionController.getFrameData(e.windowId)),s=this.sessionController.getAllWindowsData().map((function(e){return{windowId:e.windowId,name:e.name}})),null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] a full list of all current windows has been compiled, sending it to the caller")),o.abrupt("return",{windows:s,isWorkspaceFrame:u});case 6:case"end":return o.stop()}}),o,this)})))}},{key:"handleGetUrl",value:function(e,n){var t,r=this;if(!this.sessionController.getWindowDataById(e.windowId))throw new Error("Cannot get the url of window: ".concat(e.windowId,", because it is does not exist for the platform"));null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling a get url request for window ").concat(e.windowId));var o="Cannot get the url of window: ".concat(e.windowId,", because it is either a non-glue window or it hasn't initiated it's glue yet");return PromiseWrap$1((function(){return r.glueController.callWindow(r.operations.getUrl,e,e.windowId)}),this.clientResponseTimeoutMs,o)}},{key:"handleGetTitle",value:function(e,n){var t,r=this;if(!this.sessionController.getWindowDataById(e.windowId))throw new Error("Cannot get the title of window: ".concat(e.windowId,", because it is does not exist for the platform"));null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling a get title request for window ").concat(e.windowId));var o="Cannot get the title of window: ".concat(e.windowId,", because it is either a non-glue window or it hasn't initiated it's glue yet");return PromiseWrap$1((function(){return r.glueController.callWindow(r.operations.getTitle,e,e.windowId)}),this.clientResponseTimeoutMs,o)}},{key:"handleSetTitle",value:function(e,n){var t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o,i=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.sessionController.getWindowDataById(e.windowId)){r.next=3;break}throw new Error("Cannot set the title of window: ".concat(e.windowId,", because it is does not exist for the platform"));case 3:if(!this.sessionController.getWorkspaceClientById(e.windowId)){r.next=7;break}return r.next=7,this.ioc.workspacesController.setItemTitle({itemId:e.windowId,title:e.title},n);case 7:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling a set title request for window ").concat(e.windowId," and title: ").concat(e.title)),o="Cannot set the title of window: ".concat(e.windowId,", because it is either a non-glue window or it hasn't initiated it's glue yet"),r.next=11,PromiseWrap$1((function(){return i.glueController.callWindow(i.operations.setTitle,e,e.windowId)}),this.clientResponseTimeoutMs,o);case 11:case"end":return r.stop()}}),r,this)})))}},{key:"handleMoveResize",value:function(e,n){var t,r=this;if(this.sessionController.getWorkspaceClientById(e.windowId))throw new Error("Cannot move resize window id ".concat(e.windowId,", because it is in a workspace. Consider using the workspaces API to get more control"));var o=this.sessionController.getWindowDataById(e.windowId);if(!o)throw new Error("Cannot move resize window: ".concat(e.windowId,", because it is does not exist for the platform"));if("Platform"===o.name)throw new Error("Move-resizing the main application is not allowed");null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling a move resize request for window ").concat(e.windowId," and data: ").concat(JSON.stringify(e)));var i="Cannot move resize window: ".concat(e.windowId,", because it is either a non-glue window or it hasn't initiated it's glue yet");return PromiseWrap$1((function(){return r.glueController.callWindow(r.operations.moveResize,e,e.windowId)}),this.clientResponseTimeoutMs,i)}},{key:"handleGetBounds",value:function(e,n){var t,r=this;if(this.sessionController.getWorkspaceClientById(e.windowId))throw new Error("Cannot get bounds of window id ".concat(e.windowId,", because it is in a workspace. Consider using the workspaces API to get more info"));if(!this.sessionController.getWindowDataById(e.windowId))throw new Error("Cannot get the bounds of window: ".concat(e.windowId,", because it is does not exist for the platform"));null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling a get bounds request for window ").concat(e.windowId));var o="Cannot get the bounds of window: ".concat(e.windowId,", because it is either a non-glue window or it hasn't initiated it's glue yet");return PromiseWrap$1((function(){return r.glueController.callWindow(r.operations.getBounds,e,e.windowId)}),this.clientResponseTimeoutMs,o)}},{key:"handleFocus",value:function(e,n){var t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.sessionController.getWorkspaceClientById(e.windowId)){r.next=3;break}throw new Error("Cannot focus window id ".concat(e.windowId,", because it is in a workspace. Consider using the workspaces API to get more control"));case 3:if(o=this.sessionController.getWindowDataById(e.windowId)){r.next=6;break}throw new Error("Cannot focus window: ".concat(e.windowId,", because it is not known by the platform"));case 6:if("Platform"!==o.name){r.next=8;break}throw new Error("Focusing the main application is not allowed");case 8:null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling a focus request for window ").concat(e.windowId)),window.open(void 0,o.windowId);case 10:case"end":return r.stop()}}),r,this)})))}},{key:"handleClose",value:function(e,n){var t,r,o,i;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function l(){var a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.sessionController.getWorkspaceClientById(e.windowId)){l.next=6;break}return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] this window is detected as a workspace window, closing via the workspaces controller")),l.next=5,this.ioc.workspacesController.closeItem({itemId:e.windowId},n);case 5:return l.abrupt("return");case 6:if(a=this.sessionController.getWindowDataById(e.windowId)){l.next=9;break}throw new Error("Cannot close window: ".concat(e.windowId,", because it is not known by the platform"));case 9:if("Platform"!==a.name){l.next=11;break}throw new Error("Closing the main application is not allowed");case 11:null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] handling a close request for window ").concat(e.windowId)),null===(o=window.open(void 0,a.windowId))||void 0===o||o.close(),this.cleanUpWindow(a.windowId),null===(i=this.logger)||void 0===i||i.trace("[".concat(n,"] window ").concat(e.windowId," has been closed, removed from session, state and announced"));case 15:case"end":return l.stop()}}),l,this)})))}},{key:"getStartingBounds",value:function(e,n){var t,r,o,i,l,a,u,s,c,d;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function f(){var p,h,_,g,m,w,v;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(p={top:null!==(r=null===(t=e.options)||void 0===t?void 0:t.top)&&void 0!==r?r:this.defaultBounds.top,left:null!==(i=null===(o=e.options)||void 0===o?void 0:o.left)&&void 0!==i?i:this.defaultBounds.left,height:null!==(a=null===(l=e.options)||void 0===l?void 0:l.height)&&void 0!==a?a:this.defaultBounds.height,width:null!==(s=null===(u=e.options)||void 0===u?void 0:u.width)&&void 0!==s?s:this.defaultBounds.width},null===(c=e.options)||void 0===c?void 0:c.relativeTo){f.next=3;break}return f.abrupt("return",p);case 3:if(h=e.options.relativeTo,_=this.sessionController.getWindowDataById(h)){f.next=7;break}return f.abrupt("return",p);case 7:return f.prev=7,f.next=10,this.handleGetBounds({windowId:_.windowId},n);case 10:return g=f.sent,m=g.bounds,w=null!==(d=e.options.relativeDirection)&&void 0!==d?d:"right",v=getRelativeBounds(p,m,w),f.abrupt("return",v);case 17:return f.prev=17,f.t0=f.catch(7),f.abrupt("return",p);case 20:case"end":return f.stop()}}),f,this,[[7,17]])})))}},{key:"logger",get:function(){return logger.get("windows.controller")}},{key:"moveResizeOperation",get:function(){return this.operations.moveResize}},{key:"setTitleOperation",get:function(){return this.operations.setTitle}}]),e}(),SessionStorageController=function(){function e(){var n=this;Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.windowsNamespace="g42_core_windows",this.instancesNamespace="g42_core_instances",this.bridgeInstancesNamespace="g42_core_bridge",this.nonGlueNamespace="g42_core_nonglue",this.workspaceWindowsNamespace="g42_core_workspace_clients",this.workspaceFramesNamespace="g42_core_workspace_frames",this.layoutNamespace="g42_core_layouts",this.appDefsNamespace="g42_core_app_definitions",this.sessionStorage=window.sessionStorage,[this.bridgeInstancesNamespace,this.windowsNamespace,this.instancesNamespace,this.nonGlueNamespace,this.workspaceWindowsNamespace,this.workspaceFramesNamespace,this.layoutNamespace,this.appDefsNamespace].forEach((function(e){n.sessionStorage.getItem(e)||n.sessionStorage.setItem(e,JSON.stringify([]))}))}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"getAllApps",value:function(){return JSON.parse(this.sessionStorage.getItem(this.appDefsNamespace))}},{key:"overwriteApps",value:function(e){this.sessionStorage.setItem(this.appDefsNamespace,JSON.stringify(e))}},{key:"removeApp",value:function(e){var n=this.getAllApps(),t=n.find((function(n){return n.name===e}));return t&&this.sessionStorage.setItem(this.appDefsNamespace,JSON.stringify(n.filter((function(n){return n.name!==e})))),t}},{key:"getLayoutSnapshot",value:function(){return{layouts:JSON.parse(this.sessionStorage.getItem(this.layoutNamespace))}}},{key:"saveLayoutSnapshot",value:function(e){this.sessionStorage.setItem(this.layoutNamespace,JSON.stringify(e.layouts))}},{key:"saveFrameData",value:function(e){var n=JSON.parse(this.sessionStorage.getItem(this.workspaceFramesNamespace));n.some((function(n){return n.windowId===e.windowId}))||(n.push(e),this.sessionStorage.setItem(this.workspaceFramesNamespace,JSON.stringify(n)))}},{key:"getPlatformFrame",value:function(){return this.getAllFrames().find((function(e){return e.isPlatform}))}},{key:"getAllFrames",value:function(){return JSON.parse(this.sessionStorage.getItem(this.workspaceFramesNamespace))}},{key:"getFrameData",value:function(e){return JSON.parse(this.sessionStorage.getItem(this.workspaceFramesNamespace)).find((function(n){return n.windowId===e}))}},{key:"setFrameActive",value:function(e){var n=JSON.parse(this.sessionStorage.getItem(this.workspaceFramesNamespace)),t=n.find((function(n){return n.windowId===e}));t&&!t.active&&(t.active=!0,this.sessionStorage.setItem(this.workspaceFramesNamespace,JSON.stringify(n)))}},{key:"removeFrameData",value:function(e){return!!e&&this.doRemove(e,this.workspaceFramesNamespace)}},{key:"saveWorkspaceClient",value:function(e){var n=JSON.parse(this.sessionStorage.getItem(this.workspaceWindowsNamespace));n.some((function(n){return n.windowId===e.windowId}))||(n.push(e),this.sessionStorage.setItem(this.workspaceWindowsNamespace,JSON.stringify(n)))}},{key:"getWorkspaceClientById",value:function(e){return JSON.parse(this.sessionStorage.getItem(this.workspaceWindowsNamespace)).find((function(n){return n.windowId===e}))}},{key:"pickWorkspaceClients",value:function(e){return JSON.parse(this.sessionStorage.getItem(this.workspaceWindowsNamespace)).filter(e)}},{key:"removeWorkspaceClient",value:function(e){return!!e&&this.doRemove(e,this.workspaceWindowsNamespace)}},{key:"getAllNonGlue",value:function(){return JSON.parse(this.sessionStorage.getItem(this.nonGlueNamespace))}},{key:"saveNonGlue",value:function(e){var n,t,r=JSON.parse(this.sessionStorage.getItem(this.nonGlueNamespace));return r.some((function(n){return n.windowId===e.windowId}))?(null===(n=this.logger)||void 0===n||n.trace("did not save this data: ".concat(JSON.stringify(e),", because an entry with this id already exists")),!1):(null===(t=this.logger)||void 0===t||t.trace("saving non glue window with id: ".concat(e.windowId)),r.push(e),this.sessionStorage.setItem(this.nonGlueNamespace,JSON.stringify(r)),!0)}},{key:"removeNonGlue",value:function(e){var n;return!(!e||!e.windowId)&&(null===(n=this.logger)||void 0===n||n.trace("removing non glue window with id: ".concat(e.windowId)),this.doRemove(e.windowId,this.nonGlueNamespace))}},{key:"saveBridgeInstanceData",value:function(e){var n,t,r=JSON.parse(this.sessionStorage.getItem(this.bridgeInstancesNamespace));r.some((function(n){return n.windowId===e.windowId}))?null===(n=this.logger)||void 0===n||n.trace("did not save this data: ".concat(JSON.stringify(e),", because an entry with this id already exists")):(null===(t=this.logger)||void 0===t||t.trace("saving new instance with id: ".concat(e.windowId," and app name: ").concat(e.appName)),r.push(e),this.sessionStorage.setItem(this.bridgeInstancesNamespace,JSON.stringify(r)))}},{key:"getBridgeInstanceData",value:function(e){return JSON.parse(this.sessionStorage.getItem(this.bridgeInstancesNamespace)).find((function(n){return n.windowId===e}))}},{key:"removeBridgeInstanceData",value:function(e){var n=JSON.parse(this.sessionStorage.getItem(this.bridgeInstancesNamespace));this.sessionStorage.setItem(this.bridgeInstancesNamespace,JSON.stringify(n.filter((function(n){return n.windowId!==e}))))}},{key:"saveInstanceData",value:function(e){var n,t,r=JSON.parse(this.sessionStorage.getItem(this.instancesNamespace));r.some((function(n){return n.id===e.id}))?null===(n=this.logger)||void 0===n||n.trace("did not save this data: ".concat(JSON.stringify(e),", because an entry with this id already exists")):(null===(t=this.logger)||void 0===t||t.trace("saving new instance with id: ".concat(e.id," and app name: ").concat(e.applicationName)),r.push(e),this.sessionStorage.setItem(this.instancesNamespace,JSON.stringify(r)))}},{key:"removeInstance",value:function(e){var n;null===(n=this.logger)||void 0===n||n.trace("removing instance with id: ".concat(e));var t=this.getAllInstancesData();this.sessionStorage.setItem(this.instancesNamespace,JSON.stringify(t.filter((function(n){return n.id!==e})))),this.removeBridgeInstanceData(e)}},{key:"getInstanceData",value:function(e){return this.getAllInstancesData().find((function(n){return n.id===e}))}},{key:"getAllInstancesData",value:function(){return JSON.parse(this.sessionStorage.getItem(this.instancesNamespace))}},{key:"saveWindowData",value:function(e){var n,t,r=JSON.parse(this.sessionStorage.getItem(this.windowsNamespace));r.some((function(n){return n.name===e.name}))?null===(n=this.logger)||void 0===n||n.trace("did not save this data: ".concat(JSON.stringify(e),", because an entry with this name already exists")):(null===(t=this.logger)||void 0===t||t.trace("saving window with id: ".concat(e.windowId," and name: ").concat(window.name)),r.push(e),this.sessionStorage.setItem(this.windowsNamespace,JSON.stringify(r)))}},{key:"getAllWindowsData",value:function(){return JSON.parse(this.sessionStorage.getItem(this.windowsNamespace))}},{key:"getWindowDataById",value:function(e){return this.getAllWindowsData().find((function(n){return n.windowId===e}))}},{key:"getWindowDataByName",value:function(e){return this.getAllWindowsData().find((function(n){return n.name===e}))}},{key:"removeWindowData",value:function(e){var n;return!!e&&(null===(n=this.logger)||void 0===n||n.trace("removing window with id: ".concat(e)),this.doRemove(e,this.windowsNamespace))}},{key:"fullWindowClean",value:function(e){var n=this.removeWindowData(e),t=this.removeNonGlue({windowId:e}),r=this.removeWorkspaceClient(e);return n||t||r}},{key:"doRemove",value:function(e,n){var t=JSON.parse(this.sessionStorage.getItem(n)).reduce((function(n,t){return t.windowId===e?n.removed=!0:n.newData.push(t),n}),{removed:!1,newData:[]});return this.sessionStorage.setItem(n,JSON.stringify(t.newData)),t.removed}},{key:"logger",get:function(){return logger.get("session.storage")}}]),e}(),StateController=function(){function e(n){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.sessionStorage=n,this.registry=lib$4(),this.checkIntervalMs=500,this.childrenToCheck=[],this.checkerCancelled=!1}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(){var e=this;this.sessionStorage.getAllNonGlue().forEach((function(n){var t;null===(t=e.logger)||void 0===t||t.trace("detected non glue window with id ".concat(n.windowId," from previous session, attempting reference refresh"));var r=window.open(void 0,n.windowId);r&&e.childrenToCheck.push({window:r,windowId:n.windowId})})),this.checkWindows()}},{key:"add",value:function(e,n){var t;null===(t=this.logger)||void 0===t||t.trace("adding window id: ".concat(n," to non glue state checking")),this.sessionStorage.saveNonGlue({windowId:n})&&this.childrenToCheck.push({window:e,windowId:n})}},{key:"remove",value:function(e){var n;null===(n=this.logger)||void 0===n||n.trace("removing window id: ".concat(e," from non glue state checking")),this.sessionStorage.removeNonGlue({windowId:e}),this.childrenToCheck=this.childrenToCheck.filter((function(n){return n.windowId!==e}))}},{key:"cancel",value:function(){this.currentTimeout&&clearTimeout(this.currentTimeout),this.checkerCancelled=!0}},{key:"onWindowDisappeared",value:function(e){return this.registry.add("window-disappear",e)}},{key:"checkWindows",value:function(){var e=this;this.checkerCancelled||(this.childrenToCheck.forEach((function(n){var t;if(!n.window||n.window.closed)return null===(t=e.logger)||void 0===t||t.trace("non glue window ".concat(n.windowId," has disappeared, removing from collections and announcing.")),e.remove(n.windowId),void e.registry.execute("window-disappear",n.windowId)})),this.currentTimeout=setTimeout(this.checkWindows.bind(this),this.checkIntervalMs))}},{key:"logger",get:function(){return logger.get("state.controller")}}]),e}(),appManagerOperationTypesDecoder$1=oneOf$1(constant$1("appHello"),constant$1("applicationStart"),constant$1("instanceStop"),constant$1("registerWorkspaceApp"),constant$1("unregisterWorkspaceApp"),constant$1("export"),constant$1("import"),constant$1("remove"),constant$1("clear")),basicInstanceDataDecoder$1=object$1({id:nonEmptyStringDecoder$1}),instanceDataDecoder$1=object$1({id:nonEmptyStringDecoder$1,applicationName:nonEmptyStringDecoder$1}),applicationDataDecoder$1=object$1({name:nonEmptyStringDecoder$1,type:nonEmptyStringDecoder$1.where((function(e){return"window"===e}),"Expected a value of window"),createOptions:applicationDetailsDecoder$1,instances:array$1(instanceDataDecoder$1),userProperties:optional$1(anyJson$1()),title:optional$1(nonEmptyStringDecoder$1),version:optional$1(nonEmptyStringDecoder$1),icon:optional$1(nonEmptyStringDecoder$1),caption:optional$1(nonEmptyStringDecoder$1)}),baseApplicationDataDecoder$1=object$1({name:nonEmptyStringDecoder$1,type:nonEmptyStringDecoder$1.where((function(e){return"window"===e}),"Expected a value of window"),createOptions:applicationDetailsDecoder$1,userProperties:optional$1(anyJson$1()),title:optional$1(nonEmptyStringDecoder$1),version:optional$1(nonEmptyStringDecoder$1),icon:optional$1(nonEmptyStringDecoder$1),caption:optional$1(nonEmptyStringDecoder$1)}),appHelloSuccessDecoder$1=object$1({apps:array$1(applicationDataDecoder$1)}),appHelloDecoder=object$1({windowId:optional$1(nonEmptyStringDecoder$1)}),applicationStartConfigDecoder$1=object$1({name:nonEmptyStringDecoder$1,id:optional$1(nonEmptyStringDecoder$1),context:optional$1(anyJson$1()),top:optional$1(number$1()),left:optional$1(number$1()),width:optional$1(nonNegativeNumberDecoder$1),height:optional$1(nonNegativeNumberDecoder$1),relativeTo:optional$1(nonEmptyStringDecoder$1),relativeDirection:optional$1(oneOf$1(constant$1("top"),constant$1("left"),constant$1("right"),constant$1("bottom"))),waitForAGMReady:optional$1(boolean$1())}),appsImportOperationDecoder$1=object$1({definitions:array$1(allApplicationDefinitionsDecoder$1),mode:oneOf$1(constant$1("replace"),constant$1("merge"))}),appRemoveConfigDecoder$1=object$1({name:nonEmptyStringDecoder$1}),appsExportOperationDecoder$1=object$1({definitions:array$1(glueCoreAppDefinitionDecoder)}),ApplicationsController=function(){function e(n,t,r,o){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.glueController=n,this.sessionStorage=t,this.stateController=r,this.ioc=o,this.applicationStartTimeoutMs=15e3,this.started=!1,this.locks={},this.operations={appHello:{name:"appHello",dataDecoder:appHelloDecoder,resultDecoder:appHelloSuccessDecoder$1,execute:this.handleAppHello.bind(this)},applicationStart:{name:"applicationStart",dataDecoder:applicationStartConfigDecoder$1,resultDecoder:instanceDataDecoder$1,execute:this.handleApplicationStart.bind(this)},instanceStop:{name:"instanceStop",dataDecoder:basicInstanceDataDecoder$1,execute:this.handleInstanceStop.bind(this)},registerWorkspaceApp:{name:"registerWorkspaceApp",dataDecoder:workspaceWindowDataDecoder,execute:this.registerWorkspaceApp.bind(this)},unregisterWorkspaceApp:{name:"unregisterWorkspaceApp",dataDecoder:simpleWindowDecoder$1,execute:this.unregisterWorkspaceApp.bind(this)},import:{name:"import",dataDecoder:appsImportOperationDecoder$1,execute:this.handleImport.bind(this)},remove:{name:"remove",dataDecoder:appRemoveConfigDecoder$1,execute:this.handleRemove.bind(this)},export:{name:"export",resultDecoder:appsExportOperationDecoder$1,execute:this.handleExport.bind(this)},clear:{name:"clear",execute:this.handleClear.bind(this)}}}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){var n,t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.config=e.applications,this.defaultBounds=e.windows.defaultWindowOpenBounds,null===(n=this.logger)||void 0===n||n.trace("initializing applications"),r.next=5,this.setupApps(this.config);case 5:this.started=!0,this.stateController.onWindowDisappeared(this.processInstanceClosed.bind(this)),null===(t=this.logger)||void 0===t||t.trace("initialization is completed");case 8:case"end":return r.stop()}}),r,this)})))}},{key:"setupApps",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.local&&e.local.length&&(t=e.local.map((function(e){return o.parseDefinition(e)})),r=this.sessionStorage.getAllApps(),this.mergeImport(r,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"handleControl",value:function(e){var n,t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a,u,s,c,d,f;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.started,l=e.data,a=e.commandId,(u=appManagerOperationTypesDecoder$1.run(e.operation)).ok){i.next=6;break}throw new Error("This appManager request cannot be completed, because the operation name did not pass validation: ".concat(JSON.stringify(u.error)));case 6:if(s=u.result,!(c=null===(n=this.operations[s].dataDecoder)||void 0===n?void 0:n.run(l))||c.ok){i.next=10;break}throw new Error("AppManager request for ".concat(s," rejected, because the provided arguments did not pass the validation: ").concat(JSON.stringify(c.error)));case 10:return null===(t=this.logger)||void 0===t||t.debug("[".concat(a,"] ").concat(s," command is valid with data: ").concat(JSON.stringify(l))),i.next=13,this.operations[s].execute(l,a);case 13:if(d=i.sent,!(f=null===(r=this.operations[s].resultDecoder)||void 0===r?void 0:r.run(d))||f.ok){i.next=17;break}throw new Error("AppManager request for ".concat(s," could not be completed, because the operation result did not pass the validation: ").concat(JSON.stringify(f.error)));case 17:return null===(o=this.logger)||void 0===o||o.trace("[".concat(a,"] ").concat(s," command was executed successfully")),i.abrupt("return",d);case 19:case"end":return i.stop()}}),i,this)})))}},{key:"handleClientUnloaded",value:function(e,n){var t,r,o;if(null===(t=this.logger)||void 0===t||t.trace("handling unloading of ".concat(e)),e)return n.closed?(null===(r=this.logger)||void 0===r||r.trace("".concat(e," detected as closed, processing instance closed")),this.processInstanceClosed(e)):void(null===(o=this.logger)||void 0===o||o.trace("".concat(e," detected as closed, skipping instance closed procedure")))}},{key:"unregisterWorkspaceApp",value:function(e){this.processInstanceClosed(e.windowId),this.ioc.windowsController.cleanUpWindow(e.windowId)}},{key:"handleApplicationStart",value:function(e,n){var t,r,o,i,l,a,u,s;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function c(){var d,f,p,h,_,g,m=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling application start command for application: ").concat(e.name)),d=this.sessionStorage.getAllApps().find((function(n){return n.name===e.name}))){c.next=4;break}throw new Error("Cannot start an instance of application: ".concat(e.name,", because it is not found."));case 4:return f={id:null!==(r=e.id)&&void 0!==r?r:shortid$1.generate(),applicationName:e.name},c.next=7,this.getStartingBounds(d.createOptions,e,n);case 7:if(p=c.sent,h="left=".concat(p.left,",top=").concat(p.top,",width=").concat(p.width,",height=").concat(p.height),null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] open arguments are valid, opening to bounds: ").concat(h)),_=window.open(d.createOptions.url,f.id,h)){c.next=13;break}throw new Error("Cannot an instance with url: ".concat(d.createOptions.url," for application: ").concat(e.name,". The most likely reason is that the user has not approved popups or has a blocker."));case 13:return this.sessionStorage.saveBridgeInstanceData({windowId:f.id,appName:f.applicationName}),null===(i=this.logger)||void 0===i||i.trace("[".concat(n,"] the new window has been opened successfully with id: ").concat(f.id,", checking for AGM ready and notifying windows")),e.waitForAGMReady&&(null===(l=this.logger)||void 0===l||l.trace("[".concat(n,"] wait for AGM is set, configuring the lock")),this.setLock(f.id)),c.next=18,this.notifyWindows(f,e.context,_);case 18:if(!this.locks[f.id]){c.next=27;break}return c.prev=19,c.next=22,PromiseWrap$1((function(){var e;return null===(e=m.locks[f.id])||void 0===e?void 0:e.keyOne}),this.applicationStartTimeoutMs);case 22:c.next=27;break;case 24:throw c.prev=24,c.t0=c.catch(19),new Error("Application start for ".concat(e.name," timed out waiting for client to initialize Glue"));case 27:return null===(a=this.logger)||void 0===a||a.trace("[".concat(n,"] the windows controller has been successfully notified")),g={data:f,monitorState:e.waitForAGMReady?void 0:{child:_},context:e.context},c.next=31,this.processNewInstance(g);case 31:return null===(u=this.logger)||void 0===u||u.trace("[".concat(n,"] the new instance with id ").concat(f.id," has been saved, announced and context set, lifting key two and responding to caller")),null===(s=this.locks[f.id])||void 0===s||s.openKeyTwo(),c.abrupt("return",f);case 34:case"end":return c.stop()}}),c,this,[[19,24]])})))}},{key:"processInstanceClosed",value:function(e){if(e){var n=this.sessionStorage.getInstanceData(e);n&&(this.sessionStorage.removeInstance(n.id),this.emitStreamData("instanceStopped",n))}}},{key:"notifyWindows",value:function(e,n,t){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o={windowId:e.id,name:"".concat(e.applicationName,"_").concat(e.id)},r.next=3,this.ioc.windowsController.processNewWindow(o,n,t);case 3:case"end":return r.stop()}}),r,this)})))}},{key:"handleAppHello",value:function(e,n){var t,r,o,i,l;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function a(){var u,s,c,d,f,p,h=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling hello message for id: ").concat(e.windowId)),!e.windowId||!this.locks[e.windowId]){a.next=8;break}return null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] found an app lock, unlocking key one and waiting for the second one")),this.locks[e.windowId].openKeyOne(),a.next=6,this.locks[e.windowId].keyTwo;case 6:delete this.locks[e.windowId],null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] the lock is lifted, proceeding"));case 8:return u=this.sessionStorage.getAllInstancesData(),s=this.sessionStorage.getAllApps().map((function(e){var n=u.filter((function(n){return n.applicationName===e.name}));return Object.assign({},e,{instances:n})})),e.windowId&&(null===(i=this.logger)||void 0===i||i.trace("[".concat(n,"] there is a valid windowId, removing ").concat(e.windowId," from the state controller")),this.stateController.remove(e.windowId),(c=s.find((function(n){return n.instances.some((function(n){return n.id===e.windowId}))})))&&c.title&&(d=e.windowId,f=c.title,PromiseWrap$1((function(){return h.glueController.callWindow(h.ioc.windowsController.setTitleOperation,{windowId:d,title:f},d)}),2e4).catch((function(e){var t;return null===(t=h.logger)||void 0===t?void 0:t.trace("[".concat(n,"] error while setting the application instance title: ").concat(e.message))})))),p={apps:s},null===(l=this.logger)||void 0===l||l.trace("[".concat(n,"] compiled a list of all active applications and instances and returning it to the caller")),a.abrupt("return",p);case 14:case"end":return a.stop()}}),a,this)})))}},{key:"handleInstanceStop",value:function(e,n){var t,r,o,i;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function l(){var a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling stop command for instance: ").concat(e.id)),!this.sessionStorage.getWorkspaceClientById(e.id)){l.next=7;break}return null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] this instance is detected as a workspace window, closing via the workspaces controller")),l.next=6,this.ioc.workspacesController.closeItem({itemId:e.id},n);case 6:return l.abrupt("return");case 7:if(this.sessionStorage.getInstanceData(e.id)){l.next=10;break}throw new Error("Cannot close instance: ".concat(e.id,", because it is not known by the platform"));case 10:if(a=this.sessionStorage.getWindowDataById(e.id)){l.next=13;break}throw new Error("Cannot close instance: ".concat(e.id,", because it's window is not known by the platform"));case 13:if("Platform"!==a.name){l.next=15;break}throw new Error("Closing the main application is not allowed");case 15:null===(o=window.open(void 0,a.windowId))||void 0===o||o.close(),this.processInstanceClosed(e.id),this.ioc.windowsController.cleanUpWindow(e.id),null===(i=this.logger)||void 0===i||i.trace("[".concat(n,"] instance ").concat(e.id," has been closed, removed from store, announced stopped and notified windows, responding to caller"));case 19:case"end":return l.stop()}}),l,this)})))}},{key:"handleImport",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a,u=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling import command")),l=e.definitions.map((function(e){return u.parseDefinition(e)})),a=this.sessionStorage.getAllApps(),"replace"!==e.mode){i.next=7;break}return this.replaceImport(a,l),null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] replace import command completed")),i.abrupt("return");case 7:return this.mergeImport(a,l),null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] merge import command completed")),i.abrupt("return");case 10:case"end":return i.stop()}}),i,this)})))}},{key:"handleRemove",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling remove command for ").concat(e.name)),(i=this.sessionStorage.removeApp(e.name))&&(null===(r=this.logger)||void 0===r||r.trace("definition ".concat(i.name," removed successfully")),this.emitStreamData("applicationRemoved",i));case 3:case"end":return o.stop()}}),o,this)})))}},{key:"handleExport",value:function(e,n){var t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var r,o,i=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling export command")),r=this.sessionStorage.getAllApps(),o=r.map((function(e){return i.reverseParseDefinition(e)})),e.abrupt("return",{definitions:o});case 4:case"end":return e.stop()}}),e,this)})))}},{key:"handleClear",value:function(e,n){var t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var r,o=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling clear command")),r=this.sessionStorage.getAllApps(),this.sessionStorage.overwriteApps([]),r.forEach((function(e){return o.emitStreamData("applicationRemoved",e)}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"mergeImport",value:function(e,n){var t,r,o,i=this,l=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(n);try{var a=function(){var n=o.value,l=e.findIndex((function(e){return e.name===n.name}));if(l>-1&&!objEqual(n,e[l]))return null===(t=i.logger)||void 0===t||t.trace("change detected at definition ".concat(n.name)),i.emitStreamData("applicationChanged",n),e[l]=n,"continue";l<0&&(null===(r=i.logger)||void 0===r||r.trace("new definition: ".concat(n.name," detected, adding and announcing")),i.emitStreamData("applicationAdded",n),e.push(n))};for(l.s();!(o=l.n()).done;)a()}catch(err){l.e(err)}finally{l.f()}this.sessionStorage.overwriteApps(e)}},{key:"replaceImport",value:function(e,n){var t,r,o,i=this,l=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(n);try{var a=function(){var n=o.value,l=e.findIndex((function(e){return e.name===n.name}));if(l<0)return null===(t=i.logger)||void 0===t||t.trace("new definition: ".concat(n.name," detected, adding and announcing")),i.emitStreamData("applicationAdded",n),"continue";objEqual(n,e[l])||(null===(r=i.logger)||void 0===r||r.trace("change detected at definition ".concat(n.name)),i.emitStreamData("applicationChanged",n)),e.splice(l,1)};for(l.s();!(o=l.n()).done;)a()}catch(err){l.e(err)}finally{l.f()}e.forEach((function(e){var n;null===(n=i.logger)||void 0===n||n.trace("definition ".concat(e.name," missing, removing and announcing")),i.emitStreamData("applicationRemoved",e)})),this.sessionStorage.overwriteApps(n)}},{key:"setLock",value:function(e){var n={},t=new Promise((function(e){n.openKeyOne=e})),r=new Promise((function(e){n.openKeyTwo=e}));n.keyOne=t,n.keyTwo=r,this.locks[e]=n}},{key:"registerWorkspaceApp",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.appName){o.next=2;break}throw new Error("Cannot register application with config: ".concat(JSON.stringify(e),", because no app name was found"));case 2:if(this.sessionStorage.getAllApps().some((function(n){return n.name===e.appName}))){o.next=4;break}throw new Error("Cannot register application with config: ".concat(JSON.stringify(e),", because no app with this name name was found"));case 4:if(this.sessionStorage.saveBridgeInstanceData({windowId:e.windowId,appName:e.appName}),null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] processing valid workspace application registration with id ").concat(e.windowId,", app name ").concat(e.appName," and frame ").concat(e.frameId)),!e.context){o.next=9;break}return o.next=9,this.glueController.setInstanceStartContext(e.windowId,e.context);case 9:return i={id:e.windowId,applicationName:e.appName},this.sessionStorage.saveInstanceData(i),this.emitStreamData("instanceStarted",i),null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] instance registration is completed and announced, calling windows registration")),o.next=15,this.ioc.windowsController.registerWorkspaceWindow(e,n);case 15:case"end":return o.stop()}}),o,this)})))}},{key:"processNewInstance",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.context){n.next=3;break}return n.next=3,this.glueController.setInstanceStartContext(e.data.id,e.context);case 3:this.sessionStorage.saveInstanceData(e.data),e.monitorState&&this.stateController.add(e.monitorState.child,e.data.id),this.emitStreamData("instanceStarted",e.data);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"emitStreamData",value:function(e,n){var t;null===(t=this.logger)||void 0===t||t.trace("sending notification of event: ".concat(e," with data: ").concat(JSON.stringify(n))),this.glueController.pushSystemMessage("appManager",e,n)}},{key:"reverseParseDefinition",value:function(e){var n=e.userProperties.details,t=__rest(e.userProperties,["details"]);return{name:e.name,type:e.type||"window",title:e.title,version:e.version,icon:e.icon,caption:e.caption,details:n,customProperties:t}}},{key:"parseDefinition",value:function(e){var n,t=["name","title","version","customProperties","icon","caption","type"],r=Object.fromEntries(Object.entries(e).filter((function(e){var n=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(e,1)[0];return!t.includes(n)}))),o={url:""};if(e.manifest){var i=JSON.parse(e.manifest),l=(null===(n=i.details)||void 0===n?void 0:n.url)||i.url;if(!l||"string"!==typeof l)throw new Error("The FDC3 definition: ".concat(e.name," is not valid, because there is not url defined in the manifest"));o.url=l}else o=e.details;var a={createOptions:o,type:e.type||"window",name:e.name,title:e.title,version:e.version,icon:e.icon,caption:e.caption,userProperties:Object.assign(Object.assign({},r),e.customProperties)};return a.userProperties.details||(a.userProperties.details=o),a}},{key:"getStartingBounds",value:function(e,n,t){var r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i,l,a,u;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=Object.assign({},this.defaultBounds,{top:e.top,left:e.left,width:e.width,height:e.height},{top:n.top,left:n.left,width:n.width,height:n.height}),n.relativeTo){o.next=3;break}return o.abrupt("return",i);case 3:return o.prev=3,o.next=6,this.ioc.windowsController.getWindowBounds(n.relativeTo,t);case 6:return l=o.sent,a=null!==(r=n.relativeDirection)&&void 0!==r?r:"right",u=getRelativeBounds(i,l,a),o.abrupt("return",u);case 12:return o.prev=12,o.t0=o.catch(3),o.abrupt("return",i);case 15:case"end":return o.stop()}}),o,this,[[3,12]])})))}},{key:"logger",get:function(){return logger.get("applications.controller")}}]),e}(),layoutTypeDecoder$2=oneOf$1(constant$1("Global"),constant$1("Workspace")),layoutDecoder=object$1({name:nonEmptyStringDecoder$1,type:layoutTypeDecoder$2,context:optional$1(anyJson$1()),metadata:optional$1(anyJson$1()),components:array$1(oneOf$1(workspaceLayoutComponentDecoder$1,windowLayoutComponentDecoder$1))}),layoutsOperationTypesDecoder$1=oneOf$1(constant$1("get"),constant$1("getAll"),constant$1("export"),constant$1("import"),constant$1("remove")),simpleLayoutConfigDecoder$1=object$1({name:nonEmptyStringDecoder$1,type:layoutTypeDecoder$2}),getAllLayoutsConfigDecoder$1=object$1({type:layoutTypeDecoder$2}),allLayoutsFullConfigDecoder$1=object$1({layouts:array$1(layoutDecoder)}),importModeDecoder$1=oneOf$1(constant$1("replace"),constant$1("merge")),layoutsImportConfigDecoder$1=object$1({layouts:array$1(layoutDecoder),mode:importModeDecoder$1}),allLayoutsSummariesResultDecoder$1=object$1({summaries:array$1(layoutSummaryDecoder$1)}),simpleLayoutResult$1=object$1({layout:layoutDecoder}),optionalSimpleLayoutResult$1=object$1({layout:optional$1(layoutDecoder)}),LayoutsController$1=function(){function e(n,t,r){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.glueController=n,this.idbStore=t,this.sessionStore=r,this.started=!1,this.operations={get:{name:"get",dataDecoder:simpleLayoutConfigDecoder$1,resultDecoder:optionalSimpleLayoutResult$1,execute:this.handleGetLayout.bind(this)},getAll:{name:"getAll",dataDecoder:getAllLayoutsConfigDecoder$1,resultDecoder:allLayoutsSummariesResultDecoder$1,execute:this.handleGetAll.bind(this)},export:{name:"export",dataDecoder:getAllLayoutsConfigDecoder$1,resultDecoder:allLayoutsFullConfigDecoder$1,execute:this.handleExport.bind(this)},import:{name:"import",dataDecoder:layoutsImportConfigDecoder$1,execute:this.handleImport.bind(this)},remove:{name:"remove",dataDecoder:simpleLayoutConfigDecoder$1,execute:this.handleRemove.bind(this)}}}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){var n,t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.config=e.layouts,null===(n=this.logger)||void 0===n||n.trace("initializing with mode: ".concat(this.config.mode)),!this.config.local||!this.config.local.length){r.next=5;break}return r.next=5,this.mergeImport(this.config.local);case 5:this.started=!0,null===(t=this.logger)||void 0===t||t.trace("initialization is completed");case 7:case"end":return r.stop()}}),r,this)})))}},{key:"handleControl",value:function(e){var n,t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a,u,s,c,d,f;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.started,l=e.data,a=e.commandId,(u=layoutsOperationTypesDecoder$1.run(e.operation)).ok){i.next=6;break}throw new Error("This layouts request cannot be completed, because the operation name did not pass validation: ".concat(JSON.stringify(u.error)));case 6:if(s=u.result,!(c=null===(n=this.operations[s].dataDecoder)||void 0===n?void 0:n.run(l))||c.ok){i.next=10;break}throw new Error("Layouts request for ".concat(s," rejected, because the provided arguments did not pass the validation: ").concat(JSON.stringify(c.error)));case 10:return null===(t=this.logger)||void 0===t||t.debug("[".concat(a,"] ").concat(s," command is valid with data: ").concat(JSON.stringify(l))),i.next=13,this.operations[s].execute(l,a);case 13:if(d=i.sent,!(f=null===(r=this.operations[s].resultDecoder)||void 0===r?void 0:r.run(d))||f.ok){i.next=17;break}throw new Error("Layouts request for ".concat(s," could not be completed, because the operation result did not pass the validation: ").concat(JSON.stringify(f.error)));case 17:return null===(o=this.logger)||void 0===o||o.trace("[".concat(a,"] ").concat(s," command was executed successfully")),i.abrupt("return",d);case 19:case"end":return i.stop()}}),i,this)})))}},{key:"handleGetAll",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i,l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling get all layout summaries request for type: ").concat(e.type)),o.next=3,this.getAll(e.type);case 3:return i=o.sent,l=i.map((function(e){return{name:e.name,type:e.type,context:e.context,metadata:e.metadata}})),null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] all summaries have been compiled, responding to caller")),o.abrupt("return",{summaries:l});case 7:case"end":return o.stop()}}),o,this)})))}},{key:"handleExport",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling get all layout full request for type: ").concat(e.type)),o.next=3,this.getAll(e.type);case 3:return i=o.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] full layouts collection have been compiled, responding to caller")),o.abrupt("return",{layouts:i});case 6:case"end":return o.stop()}}),o,this)})))}},{key:"handleImport",value:function(e,n){var t,r,o,i;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function l(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling mass import request for layout names: ").concat(e.layouts.map((function(e){return e.name})).join(", "))),"merge"!==e.mode){l.next=7;break}return null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] importing the layouts in merge mode")),l.next=5,this.mergeImport(e.layouts);case 5:l.next=10;break;case 7:return null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] importing the layouts in replace mode")),l.next=10,this.replaceImport(e.layouts);case 10:null===(i=this.logger)||void 0===i||i.trace("[".concat(n,"] mass import completed, responding to caller"));case 11:case"end":return l.stop()}}),l,this)})))}},{key:"handleRemove",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i,l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling remove request for ").concat(JSON.stringify(e))),o.next=3,this.getAll(e.type);case 3:return o.next=5,o.sent.find((function(n){return n.name===e.name&&n.type===e.type}));case 5:if(!(i=o.sent)){o.next=10;break}return o.next=9,this.delete(e.name,e.type);case 9:this.emitStreamData("layoutRemoved",i);case 10:l=i?"has been removed":"has not been removed, because it does not exist",null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] ").concat(e.name," of type ").concat(e.type," ").concat(l));case 12:case"end":return o.stop()}}),o,this)})))}},{key:"handleGetLayout",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i,l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling get layout request for name: ").concat(e.name," and type: ").concat(e.type)),o.next=3,this.getAll(e.type);case 3:return i=o.sent,l=i.find((function(n){return n.name===e.name})),null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] request completed, responding to the caller")),o.abrupt("return",{layout:l});case 7:case"end":return o.stop()}}),o,this)})))}},{key:"emitStreamData",value:function(e,n){var t;null===(t=this.logger)||void 0===t||t.trace("sending notification of event: ".concat(e," with data: ").concat(JSON.stringify(n))),this.glueController.pushSystemMessage("layouts",e,n)}},{key:"mergeImport",value:function(e){var n,t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o,i,l,a,u,s=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getAll("Workspace");case 2:o=r.sent,i=[],l=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(e),r.prev=5,u=function(){var e=a.value,r=o.findIndex((function(n){return n.name===e.name}));if(r>-1&&!objEqual(e,o[r]))return null===(n=s.logger)||void 0===n||n.trace("change detected at layout ".concat(e.name)),i.push({operation:"layoutChanged",layout:e}),o[r]=e,"continue";r<0&&(null===(t=s.logger)||void 0===t||t.trace("new layout: ".concat(e.name," detected, adding and announcing")),i.push({operation:"layoutAdded",layout:e}),o.push(e))},l.s();case 8:if((a=l.n()).done){r.next=14;break}if("continue"!==u()){r.next=12;break}return r.abrupt("continue",12);case 12:r.next=8;break;case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(5),l.e(r.t0);case 19:return r.prev=19,l.f(),r.finish(19);case 22:return r.next=24,this.cleanSave(o);case 24:i.forEach((function(e){return s.emitStreamData(e.operation,e.layout)}));case 25:case"end":return r.stop()}}),r,this,[[5,16,19,22]])})))}},{key:"replaceImport",value:function(e){var n,t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o,i,l,a,u,s=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getAll("Workspace");case 2:o=r.sent,i=[],l=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(e),r.prev=5,u=function(){var e=a.value,r=o.findIndex((function(n){return n.name===e.name}));if(r<0)return null===(n=s.logger)||void 0===n||n.trace("new layout: ".concat(e.name," detected, adding and announcing")),i.push({operation:"layoutAdded",layout:e}),"continue";objEqual(e,o[r])||(null===(t=s.logger)||void 0===t||t.trace("change detected at layout ".concat(e.name)),i.push({operation:"layoutChanged",layout:e})),o.splice(r,1)},l.s();case 8:if((a=l.n()).done){r.next=14;break}if("continue"!==u()){r.next=12;break}return r.abrupt("continue",12);case 12:r.next=8;break;case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(5),l.e(r.t0);case 19:return r.prev=19,l.f(),r.finish(19);case 22:return o.forEach((function(e){var n;null===(n=s.logger)||void 0===n||n.trace("layout ".concat(e.name," missing, removing and announcing")),i.push({operation:"layoutRemoved",layout:e})})),r.next=25,this.cleanSave(e);case 25:i.forEach((function(e){return s.emitStreamData(e.operation,e.layout)}));case 26:case"end":return r.stop()}}),r,this,[[5,16,19,22]])})))}},{key:"getAll",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("idb"!==this.config.mode){n.next=6;break}return n.next=3,this.idbStore.getAll(e);case 3:t=n.sent,n.next=7;break;case 6:t=this.sessionStore.getLayoutSnapshot().layouts;case 7:return n.abrupt("return",t);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"cleanSave",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("idb"!==this.config.mode){n.next=21;break}return n.next=3,this.idbStore.clear("Workspace");case 3:t=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(e),n.prev=4,t.s();case 6:if((r=t.n()).done){n.next=12;break}return o=r.value,n.next=10,this.idbStore.store(o,o.type);case 10:n.next=6;break;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(4),t.e(n.t0);case 17:return n.prev=17,t.f(),n.finish(17);case 20:return n.abrupt("return");case 21:this.sessionStore.saveLayoutSnapshot({layouts:e});case 22:case"end":return n.stop()}}),n,this,[[4,14,17,20]])})))}},{key:"delete",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("idb"!==this.config.mode){t.next=4;break}return t.next=3,this.idbStore.delete(e,n);case 3:return t.abrupt("return");case 4:r=this.sessionStore.getLayoutSnapshot().layouts,(o=r.findIndex((function(n){return n.name===e&&n.type})))>-1&&r.splice(o,1),this.sessionStore.saveLayoutSnapshot({layouts:r});case 8:case"end":return t.stop()}}),t,this)})))}},{key:"logger",get:function(){return logger.get("layouts.controller")}}]),e}(),instanceOfAny=function(e,n){return n.some((function(n){return e instanceof n}))},idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(e){var n=new Promise((function(n,t){var r=function(){e.removeEventListener("success",o),e.removeEventListener("error",i)},o=function(){n(wrap(e.result)),r()},i=function(){t(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return n.then((function(n){n instanceof IDBCursor&&cursorRequestMap.set(n,e)})).catch((function(){})),reverseTransformCache.set(n,e),n}function cacheDonePromiseForTransaction(e){if(!transactionDoneMap.has(e)){var n=new Promise((function(n,t){var r=function(){e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=function(){n(),r()},i=function(){t(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));transactionDoneMap.set(e,n)}}var idbProxyTraps={get:function(e,n,t){if(e instanceof IDBTransaction){if("done"===n)return transactionDoneMap.get(e);if("objectStoreNames"===n)return e.objectStoreNames||transactionStoreNamesMap.get(e);if("store"===n)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wrap(e[n])},set:function(e,n,t){return e[n]=t,!0},has:function(e,n){return e instanceof IDBTransaction&&("done"===n||"store"===n)||n in e}};function replaceTraps(e){idbProxyTraps=e(idbProxyTraps)}function wrapFunction(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?getCursorAdvanceMethods().includes(e)?function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return e.apply(unwrap(this),t),wrap(cursorRequestMap.get(this))}:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return wrap(e.apply(unwrap(this),t))}:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var i=e.call.apply(e,[unwrap(this),n].concat(r));return transactionStoreNamesMap.set(i,n.sort?n.sort():[n]),wrap(i)}}function transformCachableValue(e){return"function"===typeof e?wrapFunction(e):(e instanceof IDBTransaction&&cacheDonePromiseForTransaction(e),instanceOfAny(e,getIdbProxyableTypes())?new Proxy(e,idbProxyTraps):e)}function wrap(e){if(e instanceof IDBRequest)return promisifyRequest(e);if(transformCache.has(e))return transformCache.get(e);var n=transformCachableValue(e);return n!==e&&(transformCache.set(e,n),reverseTransformCache.set(n,e)),n}var unwrap=function(e){return reverseTransformCache.get(e)};function openDB(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.blocked,o=t.upgrade,i=t.blocking,l=t.terminated,a=indexedDB.open(e,n),u=wrap(a);return o&&a.addEventListener("upgradeneeded",(function(e){o(wrap(a.result),e.oldVersion,e.newVersion,wrap(a.transaction))})),r&&a.addEventListener("blocked",(function(){return r()})),u.then((function(e){l&&e.addEventListener("close",(function(){return l()})),i&&e.addEventListener("versionchange",(function(){return i()}))})).catch((function(){})),u}var readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(e,n){if(e instanceof IDBDatabase&&!(n in e)&&"string"===typeof n){if(cachedMethods.get(n))return cachedMethods.get(n);var t=n.replace(/FromIndex$/,""),r=n!==t,o=writeMethods.includes(t);if(t in(r?IDBIndex:IDBObjectStore).prototype&&(o||readMethods.includes(t))){var i=function(){var e=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(n){var i,l,a,u,s,c,d,f=arguments;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l=this.transaction(n,o?"readwrite":"readonly"),a=l.store,u=f.length,s=new Array(u>1?u-1:0),c=1;c<u;c++)s[c-1]=f[c];return r&&(a=a.index(s.shift())),e.next=6,(i=a)[t].apply(i,s);case 6:if(d=e.sent,!o){e.next=10;break}return e.next=10,l.done;case 10:return e.abrupt("return",d);case 11:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}();return cachedMethods.set(n,i),i}}}replaceTraps((function(e){return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},e),{},{get:function(n,t,r){return getMethod(n,t)||e.get(n,t,r)},has:function(n,t){return!!getMethod(n,t)||e.has(n,t)}})}));var IdbStore=function(){function e(){if(Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),!("indexedDB"in window))throw new Error("Cannot initialize the local storage, because IndexedDb is not supported")}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"getAll",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=e,n.next="Workspace"===n.t0?3:"Global"===n.t0?6:9;break;case 3:return n.next=5,this.database;case 5:return n.abrupt("return",n.sent.getAll("workspaceLayouts"));case 6:return n.next=8,this.database;case 8:return n.abrupt("return",n.sent.getAll("globalLayouts"));case 9:throw new Error("The provided layout type is not recognized: ".concat(e));case 10:case"end":return n.stop()}}),n,this)})))}},{key:"delete",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next="Workspace"===t.t0?3:"Global"===t.t0?6:9;break;case 3:return t.next=5,this.database;case 5:return t.abrupt("return",t.sent.delete("workspaceLayouts",e));case 6:return t.next=8,this.database;case 8:return t.abrupt("return",t.sent.delete("globalLayouts",e));case 9:throw new Error("The provided layout type is not recognized: ".concat(n));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"clear",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=e,n.next="Workspace"===n.t0?3:"Global"===n.t0?6:9;break;case 3:return n.next=5,this.database;case 5:return n.abrupt("return",n.sent.clear("workspaceLayouts"));case 6:return n.next=8,this.database;case 8:return n.abrupt("return",n.sent.clear("globalLayouts"));case 9:throw new Error("The provided layout type is not recognized: ".concat(e));case 10:case"end":return n.stop()}}),n,this)})))}},{key:"get",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next="Workspace"===t.t0?3:"Global"===t.t0?6:9;break;case 3:return t.next=5,this.database;case 5:return t.abrupt("return",t.sent.get("workspaceLayouts",e));case 6:return t.next=8,this.database;case 8:return t.abrupt("return",t.sent.get("globalLayouts",e));case 9:throw new Error("The provided layout type is not recognized: ".concat(n));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"store",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:layoutDecoder.runWithException(e),layoutTypeDecoder$2.runWithException(n),t.t0=n,t.next="Workspace"===t.t0?5:"Global"===t.t0?8:11;break;case 5:return t.next=7,this.database;case 7:return t.abrupt("return",t.sent.put("workspaceLayouts",e,e.name));case 8:return t.next=10,this.database;case 10:return t.abrupt("return",t.sent.put("globalLayouts",e,e.name));case 11:throw new Error("The provided layout type is not recognized: ".concat(n));case 12:case"end":return t.stop()}}),t,this)})))}},{key:"setUpDb",value:function(e){e.objectStoreNames.contains("workspaceLayouts")||e.createObjectStore("workspaceLayouts"),e.objectStoreNames.contains("globalLayouts")||e.createObjectStore("globalLayouts")}},{key:"database",get:function(){var e=this;return this._database?Promise.resolve(this._database):new Promise((function(n){openDB(dbName,dbVersion,{upgrade:e.setUpDb.bind(e)}).then((function(t){e._database=t,n(e._database)}))}))}}]),e}(),WorkspacesController=function(){function e(n,t,r,o){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.framesController=n,this.glueController=t,this.stateController=r,this.ioc=o,this.started=!1,this.operations={frameHello:{name:"frameHello",dataDecoder:frameHelloDecoder,execute:this.handleFrameHello.bind(this)},isWindowInWorkspace:{name:"isWindowInWorkspace",dataDecoder:simpleItemConfigDecoder,resultDecoder:isWindowInSwimlaneResultDecoder,execute:this.isWindowInWorkspace.bind(this)},createWorkspace:{name:"createWorkspace",dataDecoder:workspaceCreateConfigDecoder,resultDecoder:workspaceSnapshotResultDecoder,execute:this.createWorkspace.bind(this)},getAllFramesSummaries:{name:"getAllFramesSummaries",resultDecoder:frameSummariesResultDecoder,execute:this.getAllFramesSummaries.bind(this)},getFrameSummary:{name:"getFrameSummary",dataDecoder:getFrameSummaryConfigDecoder,resultDecoder:frameSummaryDecoder,execute:this.getFrameSummary.bind(this)},getAllWorkspacesSummaries:{name:"getAllWorkspacesSummaries",resultDecoder:workspaceSummariesResultDecoder,execute:this.getAllWorkspacesSummaries.bind(this)},getWorkspaceSnapshot:{name:"getWorkspaceSnapshot",dataDecoder:simpleItemConfigDecoder,resultDecoder:workspaceSnapshotResultDecoder,execute:this.getWorkspaceSnapshot.bind(this)},getAllLayoutsSummaries:{name:"getAllLayoutsSummaries",resultDecoder:layoutSummariesDecoder,execute:this.getAllLayoutsSummaries.bind(this)},openWorkspace:{name:"openWorkspace",dataDecoder:openWorkspaceConfigDecoder,resultDecoder:workspaceSnapshotResultDecoder,execute:this.openWorkspace.bind(this)},deleteLayout:{name:"deleteLayout",dataDecoder:deleteLayoutConfigDecoder,resultDecoder:voidResultDecoder,execute:this.deleteLayout.bind(this)},saveLayout:{name:"saveLayout",dataDecoder:workspaceLayoutSaveConfigDecoder,resultDecoder:workspaceLayoutDecoder,execute:this.saveLayout.bind(this)},importLayout:{name:"importLayout",dataDecoder:workspacesLayoutImportConfigDecoder,resultDecoder:voidResultDecoder,execute:this.importLayout.bind(this)},exportAllLayouts:{name:"exportAllLayouts",resultDecoder:exportedLayoutsResultDecoder,execute:this.exportAllLayouts.bind(this)},restoreItem:{name:"restoreItem",dataDecoder:simpleItemConfigDecoder,resultDecoder:voidResultDecoder,execute:this.restoreItem.bind(this)},maximizeItem:{name:"maximizeItem",dataDecoder:simpleItemConfigDecoder,resultDecoder:voidResultDecoder,execute:this.maximizeItem.bind(this)},focusItem:{name:"focusItem",dataDecoder:simpleItemConfigDecoder,resultDecoder:voidResultDecoder,execute:this.focusItem.bind(this)},closeItem:{name:"closeItem",dataDecoder:simpleItemConfigDecoder,resultDecoder:voidResultDecoder,execute:this.closeItem.bind(this)},resizeItem:{name:"resizeItem",dataDecoder:resizeItemConfigDecoder,resultDecoder:voidResultDecoder,execute:this.resizeItem.bind(this)},changeFrameState:{name:"changeFrameState",dataDecoder:frameStateConfigDecoder,resultDecoder:voidResultDecoder,execute:this.changeFrameState.bind(this)},getFrameState:{name:"getFrameState",dataDecoder:simpleItemConfigDecoder,resultDecoder:frameStateResultDecoder,execute:this.getFrameState.bind(this)},moveFrame:{name:"moveFrame",dataDecoder:moveFrameConfigDecoder,resultDecoder:voidResultDecoder,execute:this.moveFrame.bind(this)},getFrameSnapshot:{name:"getFrameSnapshot",dataDecoder:simpleItemConfigDecoder,resultDecoder:frameSnapshotResultDecoder,execute:this.getFrameSnapshot.bind(this)},forceLoadWindow:{name:"forceLoadWindow",dataDecoder:simpleItemConfigDecoder,resultDecoder:simpleWindowOperationSuccessResultDecoder,execute:this.forceLoadWindow.bind(this)},ejectWindow:{name:"ejectWindow",dataDecoder:simpleItemConfigDecoder,resultDecoder:simpleWindowOperationSuccessResultDecoder,execute:this.ejectWindow.bind(this)},setItemTitle:{name:"setItemTitle",dataDecoder:setItemTitleConfigDecoder,resultDecoder:voidResultDecoder,execute:this.setItemTitle.bind(this)},moveWindowTo:{name:"moveWindowTo",dataDecoder:moveWindowConfigDecoder,resultDecoder:voidResultDecoder,execute:this.moveWindowTo.bind(this)},addWindow:{name:"addWindow",dataDecoder:addWindowConfigDecoder,resultDecoder:addItemResultDecoder,execute:this.addWindow.bind(this)},addContainer:{name:"addContainer",dataDecoder:addContainerConfigDecoder,resultDecoder:addItemResultDecoder,execute:this.addContainer.bind(this)},bundleWorkspace:{name:"bundleWorkspace",dataDecoder:bundleConfigDecoder,resultDecoder:voidResultDecoder,execute:this.bundleWorkspace.bind(this)}}}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.workspaces){n.next=3;break}return this.started=!1,n.abrupt("return");case 3:return this.settings=e.workspaces,n.next=6,Promise.all([this.glueController.createWorkspacesStream(),this.glueController.createWorkspacesEventsReceiver(this.handleWorkspaceEvent.bind(this))]);case 6:return n.next=8,this.framesController.start(e.workspaces,e.windows.defaultWindowOpenBounds,this.operations.getFrameSummary);case 8:this.stateController.onWindowDisappeared((function(e){return t.framesController.handleFrameDisappeared(e)})),this.started=!0;case 10:case"end":return n.stop()}}),n,this)})))}},{key:"handleControl",value:function(e){var n,t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a,u,s,c,d,f;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.started){i.next=2;break}throw new Error("Cannot handle this workspaces control message, because the controller has not been started");case 2:if(l=e.data,a=e.commandId,(u=workspacesOperationDecoder.run(e.operation)).ok){i.next=7;break}throw new Error("This workspace request cannot be completed, because the operation name did not pass validation: ".concat(JSON.stringify(u.error)));case 7:if(s=u.result,!(c=null===(n=this.operations[s].dataDecoder)||void 0===n?void 0:n.run(l))||c.ok){i.next=11;break}throw new Error("Workspace request for ".concat(s," rejected, because the provided arguments did not pass the validation: ").concat(JSON.stringify(c.error)));case 11:return null===(t=this.logger)||void 0===t||t.debug("[".concat(a,"] ").concat(s," command is valid with data: ").concat(JSON.stringify(l))),i.next=14,this.operations[s].execute(l,a);case 14:if(d=i.sent,!(f=null===(r=this.operations[s].resultDecoder)||void 0===r?void 0:r.run(d))||f.ok){i.next=18;break}throw new Error("Workspace request for ".concat(s," could not be completed, because the operation result did not pass the validation: ").concat(JSON.stringify(f.error)));case 18:return null===(o=this.logger)||void 0===o||o.trace("[".concat(a,"] ").concat(s," command was executed successfully")),i.abrupt("return",d);case 20:case"end":return i.stop()}}),i,this)})))}},{key:"handleClientUnloaded",value:function(e,n){var t,r;null===(t=this.logger)||void 0===t||t.trace("handling unloading of ".concat(e)),n.closed&&(null===(r=this.logger)||void 0===r||r.trace("".concat(e," detected as closed, checking if frame and processing close")),this.framesController.handleFrameDisappeared(e))}},{key:"handleWorkspaceEvent",value:function(e){this.glueController.pushWorkspacesMessage(e)}},{key:"closeItem",value:function(e,n){var t,r,o,i,l,a;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function u(){var s,c;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling closeItem request with config ").concat(JSON.stringify(e))),!(s=this.framesController.getAll().find((function(n){return n.windowId===e.itemId})))){u.next=7;break}return null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] this is targeted at a frame, closing the frame")),null===(o=window.open(void 0,s.windowId))||void 0===o||o.close(),null===(i=this.logger)||void 0===i||i.trace("[".concat(n,"] the frame window is closed")),u.abrupt("return");case 7:return u.next=9,this.framesController.getFrameInstance(e);case 9:return c=u.sent,null===(l=this.logger)||void 0===l||l.trace("[".concat(n,"] targeting frame ").concat(c.windowId)),u.next=13,this.glueController.callFrame(this.operations.closeItem,e,c.windowId);case 13:null===(a=this.logger)||void 0===a||a.trace("[".concat(n,"] frame ").concat(c.windowId," gave a success signal, responding to caller"));case 14:case"end":return u.stop()}}),u,this)})))}},{key:"setItemTitle",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling setItemTitle request with config ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance(e);case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] targeting frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.setItemTitle,e,l.windowId);case 7:null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," gave a success signal, responding to caller"));case 8:case"end":return i.stop()}}),i,this)})))}},{key:"handleFrameHello",value:function(e,n){var t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling handleFrameHello command with config: ").concat(JSON.stringify(e))),e.windowId&&this.framesController.processNewHello(e.windowId);case 2:case"end":return r.stop()}}),r,this)})))}},{key:"isWindowInWorkspace",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a,u,s=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling isWindowInWorkspace command with config: ").concat(JSON.stringify(e))),l=this.framesController.getAll(),null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] sending isWindowInWorkspace to all known frames: ").concat(l.join(", "))),i.next=5,Promise.all(l.map((function(n){return s.glueController.callFrame(s.operations.isWindowInWorkspace,e,n.windowId)})));case 5:return a=i.sent,u=a.some((function(e){return e.inWorkspace})),null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] all frames responded, returning ").concat(u," to the caller")),i.abrupt("return",{inWorkspace:u});case 9:case"end":return i.stop()}}),i,this)})))}},{key:"createWorkspace",value:function(e,n){var t,r,o,i,l,a;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function u(){var s,c,d;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling createWorkspace command")),s={frameId:null===(r=e.frame)||void 0===r?void 0:r.reuseFrameId,newFrame:null===(o=e.frame)||void 0===o?void 0:o.newFrame,itemId:null===(i=e.config)||void 0===i?void 0:i.reuseWorkspaceId},u.next=4,this.framesController.getFrameInstance(s);case 4:return c=u.sent,null===(l=this.logger)||void 0===l||l.trace("[".concat(n,"] calling frame: ").concat(c.windowId,", based on selection config: ").concat(JSON.stringify(s))),u.next=8,this.glueController.callFrame(this.operations.createWorkspace,e,c.windowId);case 8:return d=u.sent,null===(a=this.logger)||void 0===a||a.trace("[".concat(n,"] frame ").concat(c.windowId," responded with a valid snapshot, returning to caller")),u.abrupt("return",d);case 11:case"end":return u.stop()}}),u,this)})))}},{key:"getAllFramesSummaries",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var i,l,a,u=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling getAllFramesSummaries request")),e.next=3,this.framesController.getAll();case 3:return i=e.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] sending getFrameSummary to all known frames: ").concat(i.join(", "))),e.next=7,Promise.all(i.map((function(e){return u.glueController.callFrame(u.operations.getFrameSummary,{itemId:e.windowId},e.windowId)})));case 7:return l=e.sent,a=l.filter((function(e){return"none"!==e.id})),null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] all frames responded, returning to caller")),e.abrupt("return",{summaries:a});case 11:case"end":return e.stop()}}),e,this)})))}},{key:"getFrameSummary",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling getFrameSummary request for config: ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance(e);case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] forwarding getFrameSummary to frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.getFrameSummary,e,l.windowId);case 7:return a=i.sent,null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," responded with a valid summary, returning to caller")),i.abrupt("return",a);case 10:case"end":return i.stop()}}),i,this)})))}},{key:"getAllWorkspacesSummaries",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var i,l,a,u=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling getAllWorkspacesSummaries request")),i=this.framesController.getAll(),null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] sending getAllWorkspacesSummaries to all known frames: ").concat(i.join(", "))),e.next=5,Promise.all(i.map((function(e){return u.glueController.callFrame(u.operations.getAllWorkspacesSummaries,{},e.windowId)})));case 5:return l=e.sent,a=l.reduce((function(e,n){return e.push.apply(e,Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.a)(n.summaries)),e}),[]),null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] all frames responded, results were aggregated, returning to caller")),e.abrupt("return",{summaries:a});case 9:case"end":return e.stop()}}),e,this)})))}},{key:"getWorkspaceSnapshot",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling getWorkspaceSnapshot for config: ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance(e);case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] targeting frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.getWorkspaceSnapshot,e,l.windowId);case 7:return a=i.sent,null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," responded with a valid snapshot, retuning to caller")),i.abrupt("return",a);case 10:case"end":return i.stop()}}),i,this)})))}},{key:"getAllLayoutsSummaries",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var o,i;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling getAllLayoutsSummaries command")),e.next=3,this.ioc.layoutsController.handleGetAll({type:"Workspace"},n);case 3:return o=e.sent,i=o.summaries.map((function(e){return{name:e.name}})),null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] all layouts retrieved and mapped, returning to caller")),e.abrupt("return",{summaries:i});case 7:case"end":return e.stop()}}),e,this)})))}},{key:"openWorkspace",value:function(e,n){var t,r,o,i;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function l(){var a,u,s;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling openWorkspace command for name: ").concat(e.name)),a={frameId:null===(r=e.restoreOptions)||void 0===r?void 0:r.frameId,newFrame:null===(o=e.restoreOptions)||void 0===o?void 0:o.newFrame,itemId:null===(i=e.restoreOptions)||void 0===i?void 0:i.reuseWorkspaceId},l.next=4,this.framesController.getFrameInstance(a);case 4:return u=l.sent,l.next=7,this.glueController.callFrame(this.operations.openWorkspace,e,u.windowId);case 7:return s=l.sent,l.abrupt("return",s);case 9:case"end":return l.stop()}}),l,this)})))}},{key:"deleteLayout",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling deleteLayout request for name: ").concat(e.name)),o.next=3,this.ioc.layoutsController.handleRemove({name:e.name,type:"Workspace"},n);case 3:null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] layouts reported this layout as deleted, responding to caller"));case 4:case"end":return o.stop()}}),o,this)})))}},{key:"saveLayout",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling saveLayout request for workspace ").concat(e.workspaceId," and name ").concat(e.name)),i.next=3,this.framesController.getFrameInstance({itemId:e.workspaceId});case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] forwarding request to frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.saveLayout,e,l.windowId);case 7:return a=i.sent,null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," responded with a valid layout, returning to caller")),i.abrupt("return",a);case 10:case"end":return i.stop()}}),i,this)})))}},{key:"importLayout",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling importLayout command for layout ").concat(e.layout.name)),o.next=3,this.ioc.layoutsController.handleImport({layouts:[e.layout],mode:e.mode},n);case 3:null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] the layouts controller successfully imported the layout, responding to caller"));case 4:case"end":return o.stop()}}),o,this)})))}},{key:"exportAllLayouts",value:function(e,n){var t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling exportAllLayouts request")),e.next=3,this.ioc.layoutsController.handleExport({type:"Workspace"},n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"restoreItem",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling restoreItem request with config ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance(e);case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] targeting frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.restoreItem,e,l.windowId);case 7:null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," gave a success signal, responding to caller"));case 8:case"end":return i.stop()}}),i,this)})))}},{key:"maximizeItem",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling maximizeItem request with config ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance(e);case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] targeting frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.maximizeItem,e,l.windowId);case 7:null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," gave a success signal, responding to caller"));case 8:case"end":return i.stop()}}),i,this)})))}},{key:"focusItem",value:function(e,n){var t,r,o,i;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function l(){var a,u;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling focusItem request with config ").concat(JSON.stringify(e))),!(a=this.framesController.getAll().find((function(n){return n.windowId===e.itemId})))){l.next=6;break}return null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] this is targeted at a frame, focusing the frame")),window.open(void 0,a.windowId),l.abrupt("return");case 6:return l.next=8,this.framesController.getFrameInstance(e);case 8:return u=l.sent,null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] targeting frame ").concat(u.windowId)),l.next=12,this.glueController.callFrame(this.operations.focusItem,e,u.windowId);case 12:null===(i=this.logger)||void 0===i||i.trace("[".concat(n,"] frame ").concat(u.windowId," gave a success signal, responding to caller"));case 13:case"end":return l.stop()}}),l,this)})))}},{key:"resizeItem",value:function(e,n){var t,r,o,i,l;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function a(){var u,s,c;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling resizeItem request with config ").concat(JSON.stringify(e))),!(u=this.framesController.getAll().find((function(n){return n.windowId===e.itemId})))){a.next=9;break}return null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] detected targeted item is frame, building window resize config")),s={windowId:e.itemId,width:e.width,height:e.height,relative:e.relative},a.next=7,this.glueController.callWindow(this.ioc.windowsController.moveResizeOperation,s,u.windowId);case 7:return null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] window resize responded with success, returning to caller")),a.abrupt("return");case 9:return a.next=11,this.framesController.getFrameInstance(e);case 11:return c=a.sent,null===(i=this.logger)||void 0===i||i.trace("[".concat(n,"] targeted item is not a frame, it is located in frame ").concat(c.windowId)),a.next=15,this.glueController.callFrame(this.operations.resizeItem,e,c.windowId);case 15:null===(l=this.logger)||void 0===l||l.trace("[".concat(n,"] frame ").concat(c.windowId," gave a success signal, responding to caller"));case 16:case"end":return a.stop()}}),a,this)})))}},{key:"getFrameSnapshot",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling getFrameSnapshot request with config ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance(e);case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] targeting frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.getFrameSnapshot,e,l.windowId);case 7:return a=i.sent,null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," gave a success signal, responding to caller")),i.abrupt("return",a);case 10:case"end":return i.stop()}}),i,this)})))}},{key:"forceLoadWindow",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling forceLoadWindow request with config ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance(e);case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] targeting frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.forceLoadWindow,e,l.windowId);case 7:return a=i.sent,null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," gave a success signal, responding to caller")),i.abrupt("return",a);case 10:case"end":return i.stop()}}),i,this)})))}},{key:"ejectWindow",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling ejectWindow request with config ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance(e);case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] targeting frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.ejectWindow,e,l.windowId);case 7:return a=i.sent,null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," gave a success signal, responding to caller")),i.abrupt("return",a);case 10:case"end":return i.stop()}}),i,this)})))}},{key:"moveWindowTo",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling moveWindowTo request with config ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance(e);case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] targeting frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.moveWindowTo,e,l.windowId);case 7:null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," gave a success signal, responding to caller"));case 8:case"end":return i.stop()}}),i,this)})))}},{key:"addWindow",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling addWindow request with config ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance({itemId:e.parentId});case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] targeting frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.addWindow,e,l.windowId);case 7:return a=i.sent,null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," gave a success signal: ").concat(JSON.stringify(a),", responding to caller")),i.abrupt("return",a);case 10:case"end":return i.stop()}}),i,this)})))}},{key:"addContainer",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling addContainer request with config ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance({itemId:e.parentId});case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] targeting frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.addContainer,e,l.windowId);case 7:return a=i.sent,null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," gave a success signal: ").concat(JSON.stringify(a),", responding to caller")),i.abrupt("return",a);case 10:case"end":return i.stop()}}),i,this)})))}},{key:"bundleWorkspace",value:function(e,n){var t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling bundleWorkspace request with config ").concat(JSON.stringify(e))),i.next=3,this.framesController.getFrameInstance({itemId:e.workspaceId});case 3:return l=i.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] targeting frame ").concat(l.windowId)),i.next=7,this.glueController.callFrame(this.operations.bundleWorkspace,e,l.windowId);case 7:null===(o=this.logger)||void 0===o||o.trace("[".concat(n,"] frame ").concat(l.windowId," gave a success signal, responding to caller"));case 8:case"end":return i.stop()}}),i,this)})))}},{key:"changeFrameState",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Frame states are not supported in Glue42 Core");case 1:case"end":return e.stop()}}),e)})))}},{key:"getFrameState",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Frame states are not supported in Glue42 Core");case 1:case"end":return e.stop()}}),e)})))}},{key:"moveFrame",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i,l;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling moveFrame command with config: ").concat(JSON.stringify(e))),o.next=3,this.framesController.getFrameInstance({frameId:e.itemId});case 3:return i=o.sent,l={windowId:e.itemId,top:e.top,left:e.left,relative:e.relative},o.next=7,this.glueController.callWindow(this.ioc.windowsController.moveResizeOperation,l,i.windowId);case 7:null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] frame with id ").concat(i.windowId," was successfully moved, responding to caller"));case 8:case"end":return o.stop()}}),o,this)})))}},{key:"logger",get:function(){return logger.get("workspaces.controller")}}]),e}(),intentsOperationTypesDecoder$1=oneOf$1(constant$1("findIntent"),constant$1("getIntents"),constant$1("raiseIntent")),intentHandlerDecoder$1=object$1({applicationName:nonEmptyStringDecoder$1,applicationTitle:string$1(),applicationDescription:optional$1(string$1()),applicationIcon:optional$1(string$1()),type:oneOf$1(constant$1("app"),constant$1("instance")),displayName:optional$1(string$1()),contextTypes:optional$1(array$1(nonEmptyStringDecoder$1)),instanceId:optional$1(string$1()),instanceTitle:optional$1(string$1())}),intentDecoder$1=object$1({name:nonEmptyStringDecoder$1,handlers:array$1(intentHandlerDecoder$1)}),intentTargetDecoder$1=oneOf$1(constant$1("startNew"),constant$1("reuse"),object$1({app:optional$1(nonEmptyStringDecoder$1),instance:optional$1(nonEmptyStringDecoder$1)})),intentContextDecoder$1=object$1({type:optional$1(nonEmptyStringDecoder$1),data:optional$1(object$1())}),intentsDecoder$1=array$1(intentDecoder$1),wrappedIntentsDecoder$1=object$1({intents:intentsDecoder$1}),wrappedIntentFilterDecoder$1=object$1({filter:optional$1(object$1({name:optional$1(nonEmptyStringDecoder$1),contextType:optional$1(nonEmptyStringDecoder$1)}))}),intentRequestDecoder$1=object$1({intent:nonEmptyStringDecoder$1,target:optional$1(intentTargetDecoder$1),context:optional$1(intentContextDecoder$1),options:optional$1(windowOpenSettingsDecoder$1)}),intentResultDecoder$1=object$1({request:intentRequestDecoder$1,handler:intentHandlerDecoder$1,result:anyJson$1()}),IntentsController$1=function(){function e(n,t,r){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.glueController=n,this.sessionStorage=t,this.ioc=r,this.operations={getIntents:{name:"getIntents",resultDecoder:wrappedIntentsDecoder$1,execute:this.getWrappedIntents.bind(this)},findIntent:{name:"findIntent",dataDecoder:wrappedIntentFilterDecoder$1,resultDecoder:wrappedIntentsDecoder$1,execute:this.findIntent.bind(this)},raiseIntent:{name:"raiseIntent",dataDecoder:intentRequestDecoder$1,resultDecoder:intentResultDecoder$1,execute:this.raiseIntent.bind(this)}},this.started=!1}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"handleControl",value:function(e){var n,t,r,o;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function i(){var l,a,u,s,c,d,f;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.started,l=e.data,a=e.commandId,(u=intentsOperationTypesDecoder$1.run(e.operation)).ok){i.next=6;break}throw new Error("This intents request cannot be completed, because the operation name did not pass validation: ".concat(JSON.stringify(u.error)));case 6:if(s=u.result,!(c=null===(n=this.operations[s].dataDecoder)||void 0===n?void 0:n.run(l))||c.ok){i.next=10;break}throw new Error("Intents request for ".concat(s," rejected, because the provided arguments did not pass the validation: ").concat(JSON.stringify(c.error)));case 10:return null===(t=this.logger)||void 0===t||t.debug("[".concat(a,"] ").concat(s," command is valid with data: ").concat(JSON.stringify(l))),i.next=13,this.operations[s].execute(l,a);case 13:if(d=i.sent,!(f=null===(r=this.operations[s].resultDecoder)||void 0===r?void 0:r.run(d))||f.ok){i.next=17;break}throw new Error("Intents request for ".concat(s," could not be completed, because the operation result did not pass the validation: ").concat(JSON.stringify(f.error)));case 17:return null===(o=this.logger)||void 0===o||o.trace("[".concat(a,"] ").concat(s," command was executed successfully")),i.abrupt("return",d);case 19:case"end":return i.stop()}}),i,this)})))}},{key:"extractAppIntents",value:function(e){var n,t={},r=e.filter((function(e){return e.intents.length>0})),o=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(r);try{for(o.s();!(n=o.n()).done;){var i,l=n.value,a=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(l.intents);try{for(a.s();!(i=a.n()).done;){var u=i.value;t[u.name]||(t[u.name]=[]);var s={applicationName:l.name,applicationTitle:l.title,applicationDescription:l.caption,displayName:u.displayName,contextTypes:u.contexts,applicationIcon:l.icon,type:"app"};t[u.name].push(s)}}catch(err){a.e(err)}finally{a.f()}}}catch(err){o.e(err)}finally{o.f()}return t}},{key:"getInstanceIntents",value:function(e,n){var t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o,i,l,a,u=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o={},i=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(this.glueController.getServers()),r.prev=2,a=C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var i,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=l.value,a=((null===(t=i.getMethods)||void 0===t?void 0:t.call(i))||[]).filter((function(e){return e.name.startsWith(GlueWebIntentsPrefix)})),r.next=4,Promise.all(a.map((function(t){return __awaiter(u,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var l,a,u,s,c,d;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l=t.name.replace(GlueWebIntentsPrefix,""),o[l]||(o[l]=[]),a=t.flags.intent,(u=e.find((function(e){return e.name===i.application})))&&u.intents&&(s=u.intents.find((function(e){return e.name===l}))),!i.windowId){r.next=9;break}return r.next=8,this.ioc.windowsController.getWindowTitle(i.windowId,n);case 8:c=r.sent;case 9:d={instanceId:i.windowId||i.instance,applicationName:i.application||"",applicationIcon:a.icon||(null===u||void 0===u?void 0:u.icon),applicationTitle:(null===u||void 0===u?void 0:u.title)||"",applicationDescription:a.description||(null===u||void 0===u?void 0:u.caption),displayName:a.displayName||(null===s||void 0===s?void 0:s.displayName),contextTypes:a.contextTypes||(null===s||void 0===s?void 0:s.contexts),instanceTitle:c,type:"instance"},o[l].push(d);case 11:case"end":return r.stop()}}),r,this)})))})));case 4:case"end":return r.stop()}}),r)})),i.s();case 5:if((l=i.n()).done){r.next=9;break}return r.delegateYield(a(),"t0",7);case 7:r.next=5;break;case 9:r.next=14;break;case 11:r.prev=11,r.t1=r.catch(2),i.e(r.t1);case 14:return r.prev=14,i.f(),r.finish(14);case 17:return r.abrupt("return",o);case 18:case"end":return r.stop()}}),r,this,[[2,11,14,17]])})))}},{key:"mergeIntentStores",value:function(e,n){var t,r={},o=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(new Set([].concat(Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.a)(Object.keys(e)),Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.a)(Object.keys(n)))));try{for(o.s();!(t=o.n()).done;){var i=t.value;r[i]=[].concat(Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.a)(e[i]||[]),Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.a)(n[i]||[]))}}catch(err){o.e(err)}finally{o.f()}return r}},{key:"wrapIntents",value:function(e){return{intents:e}}},{key:"getIntents",value:function(e){var n,t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o,i,l,a,u;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=this.sessionStorage.getAllApps().map((function(e){return{name:e.name,title:e.title||"",icon:e.icon,caption:e.caption,intents:e.userProperties.intents||[]}})),i=this.extractAppIntents(o),null===(n=this.logger)||void 0===n||n.trace("[".concat(e,"] got app intents")),r.next=5,this.getInstanceIntents(o,e);case 5:return l=r.sent,null===(t=this.logger)||void 0===t||t.trace("[".concat(e,"] got instance intents")),a=this.mergeIntentStores(i,l),u=Object.keys(a).map((function(e){return{name:e,handlers:a[e]}})),r.abrupt("return",u);case 10:case"end":return r.stop()}}),r,this)})))}},{key:"getWrappedIntents",value:function(e){var n,t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null===(n=this.logger)||void 0===n||n.trace("[".concat(e,"] handling getIntents command")),r.next=3,this.getIntents(e);case 3:return o=r.sent,null===(t=this.logger)||void 0===t||t.trace("[".concat(e,"] getIntents command completed")),r.abrupt("return",this.wrapIntents(o));case 6:case"end":return r.stop()}}),r,this)})))}},{key:"findIntent",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i,l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling findIntent command")),i=e.filter,o.next=4,this.getIntents(n);case 4:if(l=o.sent,i){o.next=7;break}return o.abrupt("return",this.wrapIntents(l));case 7:if("string"!==typeof i){o.next=9;break}return o.abrupt("return",this.wrapIntents(l.filter((function(e){return e.name===i}))));case 9:return i.contextType&&(a=i.contextType.toLowerCase(),l=l.filter((function(e){return e.handlers.some((function(e){var n;return null===(n=e.contextTypes)||void 0===n?void 0:n.some((function(e){return e.toLowerCase()===a}))}))}))),i.name&&(l=l.filter((function(e){return e.name===i.name}))),null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] findIntent command completed")),o.abrupt("return",this.wrapIntents(l));case 13:case"end":return o.stop()}}),o,this)})))}},{key:"getIntent",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getIntents(n);case 2:return t.abrupt("return",t.sent.find((function(n){return n.name===e})));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"startApp",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ioc.applicationsController.handleApplicationStart(e,n);case 2:return r=t.sent,t.abrupt("return",r.id);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"waitForServer",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=function(n){t=o.glueController.subscribeForServerAdded((function(t){t.windowId!==e&&t.instance!==e||n(t)}))},n.abrupt("return",PromisePlus$3(r,3e4,"Can not find interop server for instance ".concat(e)).finally((function(){return t()})));case 2:case"end":return n.stop()}}),n)})))}},{key:"waitForMethod",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r,o,i=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(n){r=i.glueController.subscribeForMethodAdded((function(t){t.name===e&&n(t)}))},t.abrupt("return",PromisePlus$3(o,1e4,"Can not find interop method ".concat(e," for instance ").concat(n)).finally((function(){return r()})));case 2:case"end":return t.stop()}}),t)})))}},{key:"instanceIdToInteropInstance",value:function(e){var n;return null===(n=this.glueController.getServers().find((function(n){return n.windowId===e||n.instance===e})))||void 0===n?void 0:n.instance}},{key:"raiseIntentToInstance",value:function(e,n,t){var r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i,l,a;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i="".concat(GlueWebIntentsPrefix).concat(n),l=this.glueController.getServers().find((function(n){return n.windowId===e||n.instance===e}))){o.next=6;break}return o.next=5,this.waitForServer(e);case 5:l=o.sent;case 6:if(null===(r=l.getMethods)||void 0===r?void 0:r.call(l).find((function(e){return e.name===i}))){o.next=10;break}return o.next=10,this.waitForMethod(i,e);case 10:return o.next=12,this.glueController.invokeMethod(i,t,{instance:this.instanceIdToInteropInstance(e)});case 12:return a=o.sent,o.abrupt("return",a.returned);case 14:case"end":return o.stop()}}),o,this)})))}},{key:"raiseIntent",value:function(e,n){var t,r;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function o(){var i,l,a,u,s,c,d,f;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return null===(t=this.logger)||void 0===t||t.trace("[".concat(n,"] handling raiseIntent command")),i=e.intent,o.next=4,this.getIntent(i,n);case 4:if(l=o.sent){o.next=7;break}throw new Error("Intent ".concat(i," not found!"));case 7:if(a=!l.handlers.some((function(e){return"app"===e.type})),u=e.target||(a?"reuse":"startNew"),c=l.handlers.find((function(e){return"app"===e.type})),"startNew"!==u){o.next=14;break}s=c,o.next=28;break;case 14:if("reuse"!==u){o.next=19;break}d=l.handlers.find((function(e){return"instance"===e.type})),s=d||c,o.next=28;break;case 19:if(!u.instance){o.next=23;break}s=l.handlers.find((function(e){return"instance"===e.type&&e.instanceId===u.instance})),o.next=28;break;case 23:if(!u.app){o.next=27;break}s=l.handlers.find((function(e){return"app"===e.type&&e.applicationName===u.app})),o.next=28;break;case 27:throw new Error("Invalid intent target: ".concat(JSON.stringify(u)));case 28:if(s){o.next=30;break}throw new Error("Can not raise intent for request ".concat(JSON.stringify(e)," - can not find intent handler!"));case 30:if(s.instanceId,"app"!==s.type){o.next=35;break}return o.next=34,this.startApp(Object.assign({name:s.applicationName},e.options),n);case 34:s.instanceId=o.sent;case 35:if(s.instanceId){o.next=37;break}throw new Error("Can not raise intent for request ".concat(JSON.stringify(e)," - handler is missing instanceId!"));case 37:return o.next=39,this.raiseIntentToInstance(s.instanceId,i,e.context);case 39:return f=o.sent,null===(r=this.logger)||void 0===r||r.trace("[".concat(n,"] raiseIntent command completed")),o.abrupt("return",{request:e,handler:s,result:f});case 42:case"end":return o.stop()}}),o,this)})))}},{key:"logger",get:function(){return logger.get("intents.controller")}}]),e}(),ChannelsController$1=function(){function e(n){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.glueController=n}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e){var n,t;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){var o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.channels.definitions,null===(n=this.logger)||void 0===n||n.trace("initializing channels"),r.next=4,this.setupChannels(o);case 4:null===(t=this.logger)||void 0===t||t.trace("initialization is completed");case 5:case"end":return r.stop()}}),r,this)})))}},{key:"handleControl",value:function(){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function e(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},{key:"setupChannels",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(e.map((function(e){return t.addChannel(e)})));case 2:case"end":return n.stop()}}),n)})))}},{key:"addChannel",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={name:e.name,meta:e.meta,data:e.data||{}},r=this.createContextName(t.name),n.next=4,this.glueController.setContext(r,t);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"createContextName",value:function(e){return"".concat(ChannelContextPrefix).concat(e)}},{key:"logger",get:function(){return logger.get("channels.controller")}}]),e}(),FramesController=function(){function e(n,t,r){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.sessionController=n,this.glueController=t,this.ioc=r,this.locks={},this.defaultFrameHelloTimeoutMs=15e3}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"start",value:function(e,n,t){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function r(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:this.config=e,this.defaultBounds=n,this.frameSummaryOperation=t;case 3:case"end":return r.stop()}}),r,this)})))}},{key:"openFrame",value:function(e){var n,t,r,o,i;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function l(){var a,u,s,c,d,f;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(a="object"===typeof e&&null!==(n=e.bounds)&&void 0!==n?n:{},u={top:null!==(t=a.top)&&void 0!==t?t:this.defaultBounds.top,left:null!==(r=a.left)&&void 0!==r?r:this.defaultBounds.left,width:null!==(o=a.width)&&void 0!==o?o:this.defaultBounds.width,height:null!==(i=a.height)&&void 0!==i?i:this.defaultBounds.height},s=shortid$1.generate(),c={windowId:s,active:!1,isPlatform:!1},d="left=".concat(u.left,",top=").concat(u.top,",width=").concat(u.width,",height=").concat(u.height),f="".concat(this.config.src,"?emptyFrame=true"),window.open(f,c.windowId,d)){l.next=9;break}throw new Error("Cannot open a new workspace frame, because the user has not allowed popups or uses a blocker");case 9:return this.sessionController.saveFrameData(c),l.prev=10,l.next=13,this.waitHello(c.windowId);case 13:return l.abrupt("return",{windowId:c.windowId});case 16:throw l.prev=16,l.t0=l.catch(10),delete this.locks[c.windowId],new Error("Cannot open a new frame, because the workspace frame app did not send a hello in time");case 20:case"end":return l.stop()}}),l,this,[[10,16]])})))}},{key:"closeFrame",value:function(e){var n;return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.sessionController.getFrameData(e)){t.next=3;break}throw new Error("Cannot close a frame with id: ".concat(e,", because it is not known by the platform"));case 3:this.handleFrameDisappeared(e),null===(n=window.open(void 0,e))||void 0===n||n.close();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"processNewHello",value:function(e){var n;this.sessionController.getFrameData(e)&&(this.sessionController.setFrameActive(e),null===(n=this.locks[e])||void 0===n||n.lift())}},{key:"handleFrameDisappeared",value:function(e){var n=this;this.sessionController.getFrameData(e)&&(this.sessionController.removeFrameData(e),this.sessionController.pickWorkspaceClients((function(n){return n.frameId===e})).forEach((function(e){return n.ioc.applicationsController.unregisterWorkspaceApp({windowId:e.windowId})})))}},{key:"getAll",value:function(){return this.sessionController.getAllFrames().filter((function(e){return e.active})).map((function(e){return{windowId:e.windowId}}))}},{key:"getFrameInstance",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=["frameId","itemId","newFrame"],!e){n.next=5;break}if(!(t.reduce((function(n,t){return e[t]&&n.push(t),n}),[]).length>1)){n.next=5;break}throw new Error("Cannot retrieve the frame, because of over-specification: the provided selection object must have either 1 or none of the possible properties: ".concat(JSON.stringify(e)));case 5:if(r=this.getAll(),!(null===e||void 0===e?void 0:e.frameId)){n.next=11;break}if(o=r.find((function(n){return n.windowId===e.frameId}))){n.next=10;break}throw new Error("Cannot retrieve a frame with Id: ".concat(e.frameId,", because it is not known by the platform"));case 10:return n.abrupt("return",o);case 11:if(!(null===e||void 0===e?void 0:e.itemId)){n.next=13;break}return n.abrupt("return",this.getFrameByItemId(e.itemId,r));case 13:if(!(null===e||void 0===e?void 0:e.newFrame)){n.next=15;break}return n.abrupt("return",this.openFrame(e.newFrame));case 15:return n.abrupt("return",r.length?this.getLastOpenedFrame():this.openFrame());case 16:case"end":return n.stop()}}),n,this)})))}},{key:"waitHello",value:function(e){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t=this;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",PromisePlus$3((function(n){t.locks[e]={lift:n}}),this.defaultFrameHelloTimeoutMs,"Frame hello timed out"));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"getLastOpenedFrame",value:function(){var e=this.sessionController.getAllFrames().filter((function(e){return e.active}));return e[e.length-1]}},{key:"getFrameByItemId",value:function(e,n){return __awaiter(this,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function t(){var r,o,i;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.length){t.next=2;break}throw new Error("Cannot get frame by item id for: ".concat(e,", because not frames were found"));case 2:r=Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(n),t.prev=3,r.s();case 5:if((o=r.n()).done){t.next=14;break}return i=o.value,t.next=9,this.glueController.callFrame(this.frameSummaryOperation,{itemId:e},i.windowId);case 9:if("none"===t.sent.id){t.next=12;break}return t.abrupt("return",i);case 12:t.next=5;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),r.e(t.t0);case 19:return t.prev=19,r.f(),t.finish(19);case 22:throw new Error("Cannot find frame for item: ".concat(e));case 23:case"end":return t.stop()}}),t,this,[[3,16,19,22]])})))}}]),e}(),IoC$1=function(){function e(n){Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.config=n}return Object(C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_7__.a)(e,[{key:"createMessageChannel",value:function(){return new MessageChannel}},{key:"gateway",get:function(){return this._gatewayInstance||(this._gatewayInstance=new Gateway),this._gatewayInstance}},{key:"platform",get:function(){return this._platformInstance||(this._platformInstance=new Platform(this.controller,this.config)),this._platformInstance}},{key:"controller",get:function(){return this._mainController||(this._mainController=new PlatformController(this.glueController,this.windowsController,this.applicationsController,this.layoutsController,this.workspacesController,this.intentsController,this.channelsController,this.portsBridge,this.stateController)),this._mainController}},{key:"glueController",get:function(){return this._glueController||(this._glueController=new GlueController(this.portsBridge,this.sessionController)),this._glueController}},{key:"sessionController",get:function(){return this._sessionController||(this._sessionController=new SessionStorageController),this._sessionController}},{key:"stateController",get:function(){return this._stateChecker||(this._stateChecker=new StateController(this.sessionController)),this._stateChecker}},{key:"windowsController",get:function(){return this._windowsController||(this._windowsController=new WindowsController$1(this.glueController,this.sessionController,this.stateController,this)),this._windowsController}},{key:"applicationsController",get:function(){return this._applicationsController||(this._applicationsController=new ApplicationsController(this.glueController,this.sessionController,this.stateController,this)),this._applicationsController}},{key:"layoutsController",get:function(){return this._layoutsController||(this._layoutsController=new LayoutsController$1(this.glueController,this.idbStore,this.sessionController)),this._layoutsController}},{key:"workspacesController",get:function(){return this._workspacesController||(this._workspacesController=new WorkspacesController(this.framesController,this.glueController,this.stateController,this)),this._workspacesController}},{key:"intentsController",get:function(){return this._intentsController||(this._intentsController=new IntentsController$1(this.glueController,this.sessionController,this)),this._intentsController}},{key:"channelsController",get:function(){return this._channelsController||(this._channelsController=new ChannelsController$1(this.glueController)),this._channelsController}},{key:"framesController",get:function(){return this._framesController||(this._framesController=new FramesController(this.sessionController,this.glueController,this)),this._framesController}},{key:"idbStore",get:function(){return this._idbStore||(this._idbStore=new IdbStore),this._idbStore}},{key:"portsBridge",get:function(){return this._portsBridge||(this._portsBridge=new PortsBridge(this.gateway,this.sessionController,this)),this._portsBridge}}]),e}(),glueWebPlatformFactory=function(e){return __awaiter(void 0,void 0,void 0,C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.mark((function n(){var t,r,o;return C_ForTransfer_repos_github_Glue42Core_packages_dev_workspaces_frame_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5___default.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.glue42gd){n.next=2;break}return n.abrupt("return",fallbackToEnterprise(e));case 2:if(!(null===e||void 0===e?void 0:e.clientOnly)){n.next=14;break}if(!(null===e||void 0===e?void 0:e.glueFactory)){n.next=9;break}return n.next=6,null===e||void 0===e?void 0:e.glueFactory(null===e||void 0===e?void 0:e.glue);case 6:n.t0=n.sent,n.next=12;break;case 9:return n.next=11,glueWebFactory(null===e||void 0===e?void 0:e.glue);case 11:n.t0=n.sent;case 12:return t=n.t0,n.abrupt("return",{glue:t});case 14:return r=new IoC$1(e),n.next=17,r.platform.ready();case 17:return n.next=19,r.platform.getClientGlue();case 19:return o=n.sent,n.abrupt("return",{glue:o,platform:null===r||void 0===r?void 0:r.platform.exposeAPI()});case 21:case"end":return n.stop()}}),n)})))};"undefined"!==typeof window&&(window.GlueWebPlatform=glueWebPlatformFactory),__webpack_exports__.a=glueWebPlatformFactory}).call(this,__webpack_require__(14),__webpack_require__(34).Buffer,__webpack_require__(38))},31:function(e,n,t){},32:function(e,n,t){},33:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(8),o=t(1),i=t.n(o),l=t(11),a=t.n(l),u=(t(17),t(20)),s=(t(31),t(32),t(33),t(7)),c=function(){return window.glue=Object(o.useContext)(s.a),Object(r.jsx)(u.a,{})},d=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,i=n.getLCP,l=n.getTTFB;t(e),r(e),o(e),i(e),l(e)}))},f=t(5),p=t(4),h=t(0),_=t.n(h),g=t(2),m=t(3);function w(e,n,t,r){return new(t||(t=Promise))((function(o,i){function l(e){try{u(r.next(e))}catch(n){i(n)}}function a(e){try{u(r.throw(e))}catch(n){i(n)}}function u(e){e.done?o(e.value):new t((function(n){n(e.value)})).then(l,a)}u((r=r.apply(e,n||[])).next())}))}function v(e){if(e&&e.errorHandling&&"function"!==typeof e.errorHandling&&"log"!==e.errorHandling&&"silent"!==e.errorHandling&&"throw"!==e.errorHandling)throw new Error('Invalid options passed to createRegistry. Prop errorHandling should be ["log" | "silent" | "throw" | (err) => void], but '+typeof e.errorHandling+" was passed");var n=e&&"function"===typeof e.errorHandling&&e.errorHandling,t={};function r(t,r){var o=t instanceof Error?t:new Error(t);if(n)n(o);else{var i='[ERROR] callback-registry: User callback for key "'+r+'" failed: '+o.stack;if(e)switch(e.errorHandling){case"log":return console.error(i);case"silent":return;case"throw":throw new Error(i)}console.error(i)}}return{add:function(e,n){var r=t[e];return r||(r=[],t[e]=r),r.push(n),function(){var r=t[e];r&&(r=r.reduce((function(e,t,r){return t===n&&e.length===r||e.push(t),e}),[]),t[e]=r)}},execute:function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=t[e];if(!i||0===i.length)return[];var l=[];return i.forEach((function(t){try{var o=t.apply(void 0,n);l.push(o)}catch(k){l.push(void 0),r(k,e)}})),l},clear:function(){t={}},clearKey:function(e){t[e]&&delete t[e]}}}v.default=v;var b=v,y=function(e){return{ok:!0,result:e}},k=function(e){return{ok:!1,error:e}},C=function(e){return!0===e.ok?Promise.resolve(e.result):Promise.reject(e.error)},I=function(e,n){return!0===n.ok?n.result:e},x=function(e){if(!0===e.ok)return e.result;throw e.error},E=function(e,n){return!0===n.ok?y(e(n.result)):n},S=function(e,n,t){return!1===n.ok?n:!1===t.ok?t:y(e(n.result,t.result))},D=function(e,n){return!0===n.ok?n:k(e(n.error))},R=function(e,n){return!0===n.ok?e(n.result):n},O=(Object.freeze({ok:y,isOk:function(e){return!0===e.ok},err:k,isErr:function(e){return!1===e.ok},asPromise:C,withDefault:I,withException:x,successes:function(e){return e.reduce((function(e,n){return!0===n.ok?e.concat(n.result):e}),[])},map:E,map2:S,mapError:D,andThen:R}),function(){return(O=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)});function A(e,n){if(e===n)return!0;if(null===e&&null===n)return!0;if(typeof e!==typeof n)return!1;if("object"===typeof e){if(Array.isArray(e)){if(!Array.isArray(n))return!1;if(e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(!A(e[t],n[t]))return!1;return!0}var r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(t=0;t<r.length;t++){if(!n.hasOwnProperty(r[t]))return!1;if(!A(e[r[t]],n[r[t]]))return!1}return!0}}var T=function(e){return Array.isArray(e)},M=function(e){return"object"===typeof e&&null!==e&&!T(e)},P=function(e,n){return"expected "+e+", got "+function(e){switch(typeof e){case"string":return"a string";case"number":return"a number";case"boolean":return"a boolean";case"undefined":return"undefined";case"object":return e instanceof Array?"an array":null===e?"null":"an object";default:return JSON.stringify(e)}}(n)},j=function(e){return e.map((function(e){return"string"===typeof e?"."+e:"["+e+"]"})).join("")},$=function(e,n){var t=n.at,r=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}(n,["at"]);return O({at:e+(t||"")},r)},W=function(){function e(n){var t=this;this.decode=n,this.run=function(e){return D((function(n){return{kind:"DecoderError",input:e,at:"input"+(n.at||""),message:n.message||""}}),t.decode(e))},this.runPromise=function(e){return C(t.run(e))},this.runWithException=function(e){return x(t.run(e))},this.map=function(n){return new e((function(e){return E(n,t.decode(e))}))},this.andThen=function(n){return new e((function(e){return R((function(t){return n(t).decode(e)}),t.decode(e))}))},this.where=function(n,r){return t.andThen((function(t){return n(t)?e.succeed(t):e.fail(r)}))}}return e.string=function(){return new e((function(e){return"string"===typeof e?y(e):k({message:P("a string",e)})}))},e.number=function(){return new e((function(e){return"number"===typeof e?y(e):k({message:P("a number",e)})}))},e.boolean=function(){return new e((function(e){return"boolean"===typeof e?y(e):k({message:P("a boolean",e)})}))},e.constant=function(n){return new e((function(e){return A(e,n)?y(n):k({message:"expected "+JSON.stringify(n)+", got "+JSON.stringify(e)})}))},e.object=function(n){return new e((function(e){if(M(e)&&n){var t={};for(var r in n)if(n.hasOwnProperty(r)){var o=n[r].decode(e[r]);if(!0!==o.ok)return void 0===e[r]?k({message:"the key '"+r+"' is required but was not present"}):k($("."+r,o.error));void 0!==o.result&&(t[r]=o.result)}return y(t)}return M(e)?y(e):k({message:P("an object",e)})}))},e.array=function(n){return new e((function(e){if(T(e)&&n){return e.reduce((function(e,t,r){return S((function(e,n){return e.concat([n])}),e,function(e,t){return D((function(e){return $("["+t+"]",e)}),n.decode(e))}(t,r))}),y([]))}return T(e)?y(e):k({message:P("an array",e)})}))},e.tuple=function(n){return new e((function(e){if(T(e)){if(e.length!==n.length)return k({message:"expected a tuple of length "+n.length+", got one of length "+e.length});for(var t=[],r=0;r<n.length;r++){var o=n[r].decode(e[r]);if(!o.ok)return k($("["+r+"]",o.error));t[r]=o.result}return y(t)}return k({message:P("a tuple of length "+n.length,e)})}))},e.union=function(n,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.oneOf.apply(e,[n,t].concat(r))},e.intersection=function(n,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return new e((function(e){return[n,t].concat(r).reduce((function(n,t){return S(Object.assign,n,t.decode(e))}),y({}))}))},e.anyJson=function(){return new e((function(e){return y(e)}))},e.unknownJson=function(){return new e((function(e){return y(e)}))},e.dict=function(n){return new e((function(e){if(M(e)){var t={};for(var r in e)if(e.hasOwnProperty(r)){var o=n.decode(e[r]);if(!0!==o.ok)return k($("."+r,o.error));t[r]=o.result}return y(t)}return k({message:P("an object",e)})}))},e.optional=function(n){return new e((function(e){return void 0===e||null===e?y(void 0):n.decode(e)}))},e.oneOf=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return new e((function(e){for(var t=[],r=0;r<n.length;r++){var o=n[r].decode(e);if(!0===o.ok)return o;t[r]=o.error}var i=t.map((function(e){return"at error"+(e.at||"")+": "+e.message})).join('", "');return k({message:'expected a value matching one of the decoders, got the errors ["'+i+'"]'})}))},e.withDefault=function(n,t){return new e((function(e){return y(I(n,t.decode(e)))}))},e.valueAt=function(n,t){return new e((function(e){for(var r=e,o=0;o<n.length;o++){if(void 0===r)return k({at:j(n.slice(0,o+1)),message:"path does not exist"});if("string"===typeof n[o]&&!M(r))return k({at:j(n.slice(0,o+1)),message:P("an object",r)});if("number"===typeof n[o]&&!T(r))return k({at:j(n.slice(0,o+1)),message:P("an array",r)});r=r[n[o]]}return D((function(e){return void 0===r?{at:j(n),message:"path does not exist"}:$(j(n),e)}),t.decode(r))}))},e.succeed=function(n){return new e((function(e){return y(n)}))},e.fail=function(n){return new e((function(e){return k({message:n})}))},e.lazy=function(n){return new e((function(e){return n().decode(e)}))},e}(),Q=W.string,N=W.number,G=W.boolean,F=W.anyJson,L=W.constant,B=W.object,q=W.array,z=W.optional,J=W.oneOf,U=W.intersection,V=W.lazy,H=Q().where((function(e){return e.length>0}),"Expected a non-empty string"),K=N().where((function(e){return e>=0}),"Expected a non-negative number"),X=B({inWorkspace:G()}),Z=J(L("workspace"),L("row"),L("column"),L("group")),Y=J(L("row"),L("column"),L("group")),ee=J(L("maximized"),L("minimized"),L("normal")),ne=function(e,n){var t=typeof e;if(n&&"function"!==t&&"undefined"!==t)throw new Error("Provided argument must be either undefined or of type function, provided: ".concat(t));if(!n&&"function"!==t)throw new Error("Provided argument must be of type function, provided: ".concat(t))},te=z(B({saveLayout:z(G())})),re=B({name:H}),oe=B({type:z(L("window")),appName:z(H),windowId:z(H),context:z(F())}),ie=B({type:L("window"),appName:z(H),windowId:z(H),context:z(F())}),le=z(B({type:z(Y),children:z(V((function(){return q(J(oe,le))})))})),ae=B({type:Y,children:z(V((function(){return q(J(ie,ae))})))}),ue=(J(Q().where((function(e){return"maximized"===e.toLowerCase()}),"Expected a case insensitive variation of 'maximized'"),Q().where((function(e){return"normal"===e.toLowerCase()}),"Expected a case insensitive variation of 'normal'")),B({bounds:z(B({left:z(N()),top:z(N()),width:z(K),height:z(K)}))})),se=J(L("direct"),L("delayed"),L("lazy")),ce=z(B({app:z(H),context:z(F()),restoreType:z(se),title:z(H),reuseWorkspaceId:z(H),frameId:z(H),lockdown:z(G()),activateFrame:z(G()),newFrame:z(J(ue,G())),noTabHeader:z(G()),inMemoryLayout:z(G())})),de=B({name:H,restoreOptions:z(ce)}),fe=B({children:z(q(J(oe,le))),context:z(F()),config:z(B({title:z(H),position:z(K),isFocused:z(G()),noTabHeader:z(G()),reuseWorkspaceId:z(H)})),frame:z(B({reuseFrameId:z(H),newFrame:z(J(G(),ue))}))}),pe=B({type:Z,definition:z(J(fe,le))}),he=U(fe,B({saveConfig:z(B({saveLayout:z(G())}))})),_e=B({itemId:H}),ge=B({id:H}),me=(B({id:H,frameId:H,positionIndex:N(),title:H,focused:G(),layoutName:z(H)}),B({type:Y,id:H,frameId:H,workspaceId:H,positionIndex:N()}),J(L("frame"),L("workspace"),L("container"),L("window"))),we=B({type:me,branch:H}),ve=J(L("opened"),L("closing"),L("closed"),L("focus"),L("added"),L("loaded"),L("removed"),L("childrenUpdate"),L("containerChange"),L("maximized"),L("minimized"),L("normal"),L("selected")),be=B({frameId:H,title:H,positionIndex:K,name:H,layoutName:z(H)}),ye=B({frameId:H,workspaceId:H,positionIndex:N()}),ke=F(),Ce=U(ye,B({windowId:z(H),isMaximized:z(G()),isFocused:G(),title:z(Q()),appName:z(H)})),Ie=B({id:H,config:J(ke,Ce),children:z(V((function(){return q(Ie)}))),type:J(L("window"),L("row"),L("column"),L("group"))}),xe=B({id:H,config:be,children:q(Ie),frameSummary:ge}),Ee=B({id:z(H),config:J(ke,Ce),children:z(V((function(){return q(Ee)}))),type:J(L("window"),L("row"),L("column"),L("group"))}),Se=B({type:L("window"),config:B({appName:H,url:z(H),title:z(Q())})}),De=B({type:L("group"),config:F(),children:q(J(Se))}),Re=B({type:L("column"),config:F(),children:q(J(De,Se,V((function(){return Re})),V((function(){return Oe}))))}),Oe=B({type:L("row"),config:F(),children:q(J(Re,De,Se,V((function(){return Oe}))))}),Ae=B({name:H,type:L("Workspace"),metadata:z(F()),components:q(B({type:L("Workspace"),state:B({config:F(),context:F(),children:q(J(Oe,Re,De,Se))})}))}),Te=B({layout:Ae,mode:J(L("replace"),L("merge"))}),Me=B({layouts:q(Ae)}),Pe=B({id:H}),je=B({summaries:q(Pe)}),$e=B({id:H,config:be}),We=B({summaries:q($e)}),Qe=B({id:H,config:F(),workspaces:q(xe)}),Ne=B({name:H}),Ge=B({summaries:q(Ne)}),Fe=B({windowId:H}),Le=F(),Be=B({state:ee}),qe=B({width:z(K),height:z(K),relative:z(G())}),ze=B({top:z(N()),left:z(N()),relative:z(G())}),Je=B({itemId:H}),Ue=B({frameId:H,requestedState:ee}),Ve=B({itemId:H,title:H}),He=B({itemId:H,containerId:H}),Ke=U(Je,qe),Xe=U(Je,ze),Ze=(B({id:H,type:Y}),B({definition:oe,parentId:H,parentType:Z})),Ye=B({definition:ae,parentId:H,parentType:Z}),en=B({itemId:H,windowId:z(H)}),nn=B({live:G()}),tn=B({type:J(L("row"),L("column")),workspaceId:H}),rn=B({itemId:H,config:ke}),on=B({frameSummary:ge}),ln=B({workspaceSummary:$e,frameSummary:ge}),an=B({containerSummary:rn}),un=B({windowSummary:B({itemId:H,parentId:H,config:Ce})}),sn=B({name:H,workspaceId:H,saveContext:z(G())}),cn="T42.Web.Platform.Control",dn="T42.Web.Platform.WSP.Stream",fn={control:{name:"T42.Workspaces.Control",isStream:!1},frameStream:{name:"T42.Workspaces.Stream.Frame",isStream:!0},workspaceStream:{name:"T42.Workspaces.Stream.Workspace",isStream:!0},containerStream:{name:"T42.Workspaces.Stream.Container",isStream:!0},windowStream:{name:"T42.Workspaces.Stream.Window",isStream:!0}},pn={frame:{name:"T42.Workspaces.Stream.Frame",payloadDecoder:on},workspace:{name:"T42.Workspaces.Stream.Workspace",payloadDecoder:ln},container:{name:"T42.Workspaces.Stream.Container",payloadDecoder:an},window:{name:"T42.Workspaces.Stream.Window",payloadDecoder:un}},hn={ping:{name:"ping",resultDecoder:nn},isWindowInWorkspace:{name:"isWindowInWorkspace",argsDecoder:Je,resultDecoder:X},createWorkspace:{name:"createWorkspace",resultDecoder:xe,argsDecoder:he},getAllFramesSummaries:{name:"getAllFramesSummaries",resultDecoder:je},getFrameSummary:{name:"getFrameSummary",resultDecoder:ge,argsDecoder:_e},getAllWorkspacesSummaries:{name:"getAllWorkspacesSummaries",resultDecoder:We},getWorkspaceSnapshot:{name:"getWorkspaceSnapshot",resultDecoder:xe,argsDecoder:Je},getAllLayoutsSummaries:{name:"getAllLayoutsSummaries",resultDecoder:Ge},openWorkspace:{name:"openWorkspace",argsDecoder:de,resultDecoder:xe},deleteLayout:{name:"deleteLayout",resultDecoder:Le,argsDecoder:re},saveLayout:{name:"saveLayout",resultDecoder:Ae,argsDecoder:sn},importLayout:{name:"importLayout",resultDecoder:Le,argsDecoder:Te},exportAllLayouts:{name:"exportAllLayouts",resultDecoder:Me},restoreItem:{name:"restoreItem",argsDecoder:Je,resultDecoder:Le},maximizeItem:{name:"maximizeItem",argsDecoder:Je,resultDecoder:Le},focusItem:{name:"focusItem",argsDecoder:Je,resultDecoder:Le},closeItem:{name:"closeItem",argsDecoder:Je,resultDecoder:Le},resizeItem:{name:"resizeItem",argsDecoder:Ke,resultDecoder:Le},changeFrameState:{name:"changeFrameState",argsDecoder:Ue,resultDecoder:Le},getFrameState:{name:"getFrameState",argsDecoder:Je,resultDecoder:Be},moveFrame:{name:"moveFrame",argsDecoder:Xe,resultDecoder:Le},getFrameSnapshot:{name:"getFrameSnapshot",argsDecoder:Je,resultDecoder:Qe},forceLoadWindow:{name:"forceLoadWindow",argsDecoder:Je,resultDecoder:Fe},ejectWindow:{name:"ejectWindow",argsDecoder:Je,resultDecoder:Fe},setItemTitle:{name:"setItemTitle",argsDecoder:Ve,resultDecoder:Le},moveWindowTo:{name:"moveWindowTo",argsDecoder:He,resultDecoder:Le},addWindow:{name:"addWindow",argsDecoder:Ze,resultDecoder:en},addContainer:{name:"addContainer",argsDecoder:Ye,resultDecoder:en},bundleWorkspace:{name:"bundleWorkspace",argsDecoder:tn,resultDecoder:Le}},_n=function(){function e(n,t){Object(g.a)(this,e),this.transport=n,this.registry=t,this.activeSubscriptions=[]}return Object(m.a)(e,[{key:"createCoreEventSubscription",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.transport.coreSubscriptionReady(this.handleCoreEvent.bind(this));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"handleCoreSubscription",value:function(e){var n=this,t="".concat(e.eventType,"-").concat(e.action),r=e.scope,o=e.scopeId;return this.registry.add(t,(function(t){var i,l,a,u,s,c={type:r,id:o},d={frame:(null===(i=t.frameSummary)||void 0===i?void 0:i.id)||(null===(l=t.windowSummary)||void 0===l?void 0:l.config.frameId),workspace:(null===(a=t.workspaceSummary)||void 0===a?void 0:a.id)||(null===(u=t.windowSummary)||void 0===u?void 0:u.config.workspaceId),window:null===(s=t.windowSummary)||void 0===s?void 0:s.config.windowId};n.checkScopeMatch(c,d)&&e.callback(t)}))}},{key:"send",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){var r,o,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object.values(hn).find((function(n){return n.name===e}))){t.next=3;break}throw new Error("Cannot find definition for operation name: ".concat(e));case 3:if(!r.argsDecoder){t.next=11;break}t.prev=4,r.argsDecoder.runWithException(n),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(4),new Error("Unexpected internal outgoing validation error: ".concat(t.t0.message,", for input: ").concat(JSON.stringify(t.t0.input)));case 11:return t.prev=11,t.next=14,this.transport.transmitControl(r.name,n);case 14:i=t.sent,o=r.resultDecoder.runWithException(i),t.next=23;break;case 18:if(t.prev=18,t.t1=t.catch(11),!t.t1.kind){t.next=22;break}throw new Error("Unexpected internal incoming validation error: ".concat(t.t1.message,", for input: ").concat(JSON.stringify(t.t1.input)));case 22:throw new Error(t.t1.message);case 23:return t.abrupt("return",o);case 24:case"end":return t.stop()}}),t,this,[[4,8],[11,18]])})))}},{key:"subscribe",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i,l,a=this;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=this.getActiveSubscription(e),r=this.getRegistryKey(e),t){n.next=10;break}return o=pn[e.eventType],n.next=6,this.transport.subscribe(o.name,this.getBranchKey(e),e.eventType);case 6:(i=n.sent).onData((function(e){var n=e.data,t=we.run(e.requestArguments),r=ve.run(n.action);if(t.ok&&r.ok){var o=t.result.type,i=t.result.branch,l=pn[o].payloadDecoder.run(n.payload);if(l.ok){var u="".concat(o,"-").concat(i,"-").concat(r.result);a.registry.execute(u,l.result)}}})),t={streamType:e.eventType,level:e.scope,levelId:e.scopeId,callbacksCount:0,gdSub:i},this.activeSubscriptions.push(t);case 10:return l=this.registry.add(r,e.callback),++t.callbacksCount,n.abrupt("return",(function(){l(),--t.callbacksCount,0===t.callbacksCount&&(t.gdSub.close(),a.activeSubscriptions.splice(a.activeSubscriptions.indexOf(t),1))}));case 13:case"end":return n.stop()}}),n,this)})))}},{key:"checkScopeMatch",value:function(e,n){return"global"===e.type||("frame"===e.type&&e.id===n.frame||("workspace"===e.type&&e.id===n.workspace||"window"===e.type&&e.id===n.window))}},{key:"handleCoreEvent",value:function(e){var n=e.data;try{var t=ve.runWithException(n.action),r=me.runWithException(n.type),o=pn[r].payloadDecoder.runWithException(n.payload),i="".concat(r,"-").concat(t);this.registry.execute(i,o)}catch(l){console.warn("Cannot handle event with data ".concat(JSON.stringify(n),", because of validation error: ").concat(l.message))}}},{key:"getBranchKey",value:function(e){return"global"===e.scope?e.scope:"".concat(e.scope,"_").concat(e.scopeId)}},{key:"getRegistryKey",value:function(e){return"".concat(e.eventType,"-").concat(this.getBranchKey(e),"-").concat(e.action)}},{key:"getActiveSubscription",value:function(e){return this.activeSubscriptions.find((function(n){return n.streamType===e.eventType&&n.level===e.scope&&n.levelId===e.scopeId}))}}]),e}(),gn=function(){function e(n){Object(g.a)(this,e),this.agm=n,this.defaultTransportTimeout=3e4,this.coreEventMethodInitiated=!1}return Object(m.a)(e,[{key:"initiate",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t=this;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.glue42gd){n.next=4;break}return n.next=3,Promise.all(Object.values(fn).map((function(e){return t.verifyMethodLive(e.name)})));case 3:return n.abrupt("return");case 4:return n.next=6,Promise.all([this.verifyMethodLive(cn),this.verifyMethodLive(dn)]);case 6:return n.next=8,this.transmitControl("frameHello",{windowId:e});case 8:case"end":return n.stop()}}),n,this)})))}},{key:"coreSubscriptionReady",value:function(e){return this.coreEventMethodInitiated||this.subscribePlatform(e),this.corePlatformSubPromise}},{key:"subscribePlatform",value:function(e){this.coreEventMethodInitiated=!0,this.corePlatformSubPromise=this.agm.subscribe(dn),this.corePlatformSubPromise.then((function(n){n.onData((function(n){return e(n.data)}))}))}},{key:"subscribe",value:function(e,n,t){return w(this,void 0,void 0,_.a.mark((function r(){var o,i,l;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o={branch:n,type:t},r.prev=1,r.next=4,this.agm.subscribe(e,{arguments:o});case 4:i=r.sent,r.next=11;break;case 7:throw r.prev=7,r.t0=r.catch(1),l="Internal subscription error! Error details: stream - ".concat(e,", branch: ").concat(n,". Internal message: ").concat(r.t0.message),new Error(l);case 11:return r.abrupt("return",i);case 12:case"end":return r.stop()}}),r,this,[[1,7]])})))}},{key:"transmitControl",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){var r,o,i,l,a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=window.glue42gd?{operation:e,operationArguments:n}:{operation:e,domain:"workspaces",data:n},o=window.glue42gd?fn.control.name:cn,l="Internal Workspaces Communication Error. Attempted operation: ".concat(JSON.stringify(r),". "),t.prev=3,t.next=6,this.agm.invoke(o,r,"best",{methodResponseTimeoutMs:this.defaultTransportTimeout});case 6:if(i=t.sent){t.next=9;break}throw new Error("Received unsupported result from GD - empty result");case 9:if(Array.isArray(i.all_return_values)&&0!==i.all_return_values.length){t.next=11;break}throw new Error("Received unsupported result from GD - empty values collection");case 11:t.next=19;break;case 13:if(t.prev=13,t.t0=t.catch(3),!(t.t0&&t.t0.all_errors&&t.t0.all_errors.length)){t.next=18;break}throw a=t.t0.all_errors[0].message,new Error("".concat(l," -> Inner message: ").concat(a));case 18:throw new Error("".concat(l," -> Inner message: ").concat(t.t0.message));case 19:return t.abrupt("return",i.all_return_values[0].returned);case 20:case"end":return t.stop()}}),t,this,[[3,13]])})))}},{key:"verifyMethodLive",value:function(e){var n,t,r,o=this;return n=function(){return new Promise((function(n){if(o.agm.methods().some((function(n){return n.name===e})))n();else var t=o.agm.methodAdded((function(r){r.name===e&&(t?(t(),t=null):setTimeout((function(){t&&t()}),0),n())}))}))},t=15e3,r="Timeout waiting for the Workspaces communication channels",new Promise((function(e,o){var i=!0,l=setTimeout((function(){if(i){i=!1;var e=r||"Promise timeout hit: ".concat(t);o(e)}}),t);n().then((function(n){i&&(i=!1,clearTimeout(l),e(n))})).catch((function(e){i&&(i=!1,clearTimeout(l),o(e))}))}))}}]),e}(),mn=new WeakMap,wn=function(){function e(n,t){Object(g.a)(this,e);var r=t.wrapChildren(n.children);delete n.children,mn.set(this,{base:t,children:r,definition:n})}return Object(m.a)(e,[{key:"addColumn",value:function(e){return mn.get(this).base.add("column",mn.get(this).children,e)}},{key:"addRow",value:function(e){return mn.get(this).base.add("row",mn.get(this).children,e)}},{key:"addGroup",value:function(e){return mn.get(this).base.add("group",mn.get(this).children,e)}},{key:"addWindow",value:function(e){return mn.get(this).base.addWindow(mn.get(this).children,e),this}},{key:"serialize",value:function(){var e=mn.get(this).definition;return e.children=mn.get(this).base.serializeChildren(mn.get(this).children),e}},{key:"type",get:function(){return mn.get(this).definition.type}}]),e}(),vn=function(){function e(n){Object(g.a)(this,e),this.getBuilder=n}return Object(m.a)(e,[{key:"wrapChildren",value:function(e){var n=this;return e.map((function(e){return"window"===e.type?e:n.getBuilder({type:e.type,definition:e})}))}},{key:"add",value:function(e,n,t){var r=le.runWithException(t),o=this.getBuilder({type:e,definition:r});return n.push(o),o}},{key:"addWindow",value:function(e,n){var t=oe.runWithException(n);t.type="window",e.push(t)}},{key:"serializeChildren",value:function(e){return e.map((function(e){return e instanceof wn?e.serialize():e}))}}]),e}(),bn=new WeakMap,yn=function(){function e(n,t,r){Object(g.a)(this,e);var o=t.wrapChildren(n.children);delete n.children,bn.set(this,{base:t,children:o,definition:n,controller:r})}return Object(m.a)(e,[{key:"addColumn",value:function(e){var n=bn.get(this).children;if(!n.every((function(e){return e instanceof wn&&"column"===e.type})))throw new Error("Cannot add a column to this workspace, because there are already children of another type");return bn.get(this).base.add("column",n,e)}},{key:"addRow",value:function(e){var n=bn.get(this).children;if(!n.every((function(e){return e instanceof wn&&"row"===e.type})))throw new Error("Cannot add a row to this workspace, because there are already children of another type");return bn.get(this).base.add("row",n,e)}},{key:"addGroup",value:function(e){var n=bn.get(this).children;if(0!==n.length)throw new Error("Cannot add a group to this workspace, because there are already defined children.");return bn.get(this).base.add("group",n,e)}},{key:"addWindow",value:function(e){var n=bn.get(this).children;if(0!==n.length)throw new Error("Cannot add a window to this workspace, because there are already defined children.");return bn.get(this).base.addWindow(n,e),this}},{key:"getChildAt",value:function(e){return K.runWithException(e),bn.get(this).children[e]}},{key:"create",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=te.runWithException(e),(r=bn.get(this).definition).children=bn.get(this).base.serializeChildren(bn.get(this).children),o=bn.get(this).controller,n.abrupt("return",o.createWorkspace(r,t));case 5:case"end":return n.stop()}}),n,this)})))}}]),e}(),kn=new WeakMap,Cn=function(e){return kn.get(e).base},In=function(){function e(n){Object(g.a)(this,e),kn.set(this,{base:n})}return Object(m.a)(e,[{key:"addWindow",value:function(e){return Cn(this).addWindow(this,e,"row")}},{key:"addGroup",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===e||void 0===e?void 0:e.type)||"group"===e.type){n.next=2;break}throw new Error("Expected a group definition, but received ".concat(e.type));case 2:return n.abrupt("return",Cn(this).addParent(this,"group","row",e));case 3:case"end":return n.stop()}}),n,this)})))}},{key:"addColumn",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===e||void 0===e?void 0:e.type)||"column"===e.type){n.next=2;break}throw new Error("Expected a column definition, but received ".concat(e.type));case 2:return n.abrupt("return",Cn(this).addParent(this,"column","row",e));case 3:case"end":return n.stop()}}),n,this)})))}},{key:"addRow",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Adding rows as row children is not supported");case 1:case"end":return e.stop()}}),e)})))}},{key:"removeChild",value:function(e){return Cn(this).removeChild(this,e)}},{key:"maximize",value:function(){return Cn(this).maximize(this)}},{key:"restore",value:function(){return Cn(this).restore(this)}},{key:"close",value:function(){return Cn(this).close(this)}},{key:"type",get:function(){return"row"}},{key:"id",get:function(){return Cn(this).getId(this)}},{key:"frameId",get:function(){return Cn(this).getFrameId(this)}},{key:"workspaceId",get:function(){return Cn(this).getWorkspaceId(this)}},{key:"positionIndex",get:function(){return Cn(this).getPositionIndex(this)}},{key:"children",get:function(){return Cn(this).getAllChildren(this)}},{key:"parent",get:function(){return Cn(this).getMyParent(this)}},{key:"frame",get:function(){return Cn(this).getMyFrame(this)}},{key:"workspace",get:function(){return Cn(this).getMyWorkspace(this)}}]),e}(),xn=new WeakMap,En=function(e){return xn.get(e).base},Sn=function(){function e(n){Object(g.a)(this,e),xn.set(this,{base:n})}return Object(m.a)(e,[{key:"addWindow",value:function(e){return En(this).addWindow(this,e,"column")}},{key:"addGroup",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===e||void 0===e?void 0:e.type)||"group"===e.type){n.next=2;break}throw new Error("Expected a group definition, but received ".concat(e.type));case 2:return n.abrupt("return",En(this).addParent(this,"group","column",e));case 3:case"end":return n.stop()}}),n,this)})))}},{key:"addColumn",value:function(e){return w(this,void 0,void 0,_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Adding columns as column children is not supported");case 1:case"end":return e.stop()}}),e)})))}},{key:"addRow",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===e||void 0===e?void 0:e.type)||"row"===e.type){n.next=2;break}throw new Error("Expected a row definition, but received ".concat(e.type));case 2:return n.abrupt("return",En(this).addParent(this,"row","column",e));case 3:case"end":return n.stop()}}),n,this)})))}},{key:"removeChild",value:function(e){return En(this).removeChild(this,e)}},{key:"maximize",value:function(){return En(this).maximize(this)}},{key:"restore",value:function(){return En(this).restore(this)}},{key:"close",value:function(){return En(this).close(this)}},{key:"type",get:function(){return"column"}},{key:"id",get:function(){return En(this).getId(this)}},{key:"frameId",get:function(){return En(this).getFrameId(this)}},{key:"workspaceId",get:function(){return En(this).getWorkspaceId(this)}},{key:"positionIndex",get:function(){return En(this).getPositionIndex(this)}},{key:"children",get:function(){return En(this).getAllChildren(this)}},{key:"parent",get:function(){return En(this).getMyParent(this)}},{key:"frame",get:function(){return En(this).getMyFrame(this)}},{key:"workspace",get:function(){return En(this).getMyWorkspace(this)}}]),e}(),Dn=new WeakMap,Rn=function(e){return Dn.get(e).base},On=function(){function e(n){Object(g.a)(this,e),Dn.set(this,{base:n})}return Object(m.a)(e,[{key:"addWindow",value:function(e){return Rn(this).addWindow(this,e,"group")}},{key:"addGroup",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Adding groups as group child is not supported");case 1:case"end":return e.stop()}}),e)})))}},{key:"addColumn",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Adding columns as group child is not supported");case 1:case"end":return e.stop()}}),e)})))}},{key:"addRow",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Adding rows as group child is not supported");case 1:case"end":return e.stop()}}),e)})))}},{key:"removeChild",value:function(e){return Rn(this).removeChild(this,e)}},{key:"maximize",value:function(){return Rn(this).maximize(this)}},{key:"restore",value:function(){return Rn(this).restore(this)}},{key:"close",value:function(){return Rn(this).close(this)}},{key:"type",get:function(){return"group"}},{key:"id",get:function(){return Rn(this).getId(this)}},{key:"frameId",get:function(){return Rn(this).getFrameId(this)}},{key:"workspaceId",get:function(){return Rn(this).getWorkspaceId(this)}},{key:"positionIndex",get:function(){return Rn(this).getPositionIndex(this)}},{key:"children",get:function(){return Rn(this).getAllChildren(this)}},{key:"parent",get:function(){return Rn(this).getMyParent(this)}},{key:"frame",get:function(){return Rn(this).getMyFrame(this)}},{key:"workspace",get:function(){return Rn(this).getMyWorkspace(this)}}]),e}(),An=new WeakMap,Tn=function(e){return An.get(e).manager.getWorkspaceData(e)},Mn=function(e){return An.get(e).manager},Pn=function(){function e(n){Object(g.a)(this,e),An.set(this,{manager:n})}return Object(m.a)(e,[{key:"removeChild",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(ne(e),t=this.children.find(e)){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,t.close();case 6:return n.next=8,this.refreshReference();case 8:case"end":return n.stop()}}),n,this)})))}},{key:"remove",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Tn(this).controller,r=t.iterateFindChild(this.children,e),n.next=5,r.close();case 5:return n.next=7,this.refreshReference();case 7:case"end":return n.stop()}}),n,this)})))}},{key:"focus",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tn(this).controller.focusItem(this.id);case 2:return e.next=4,this.refreshReference();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n,t,r=this;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Tn(this).controller,e.next=3,Tn(this).frame.workspaces();case 3:if(t=e.sent,!(1===t.length&&t.every((function(e){return e.id===r.id})))){e.next=7;break}return e.abrupt("return",this.frame.close());case 7:return e.next=9,n.closeItem(this.id);case 9:case"end":return e.stop()}}),e,this)})))}},{key:"snapshot",value:function(){return Tn(this).controller.getSnapshot(this.id,"workspace")}},{key:"saveLayout",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return H.runWithException(e),t.next=3,Tn(this).controller.saveLayout({name:e,workspaceId:this.id,saveContext:null===n||void 0===n?void 0:n.saveContext});case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setTitle",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return H.runWithException(e),t=Tn(this).controller,n.next=4,t.setItemTitle(this.id,e);case 4:return n.next=6,this.refreshReference();case 6:case"end":return n.stop()}}),n,this)})))}},{key:"getContext",value:function(){return Tn(this).controller.getWorkspaceContext(this.id)}},{key:"setContext",value:function(e){return Tn(this).controller.setWorkspaceContext(this.id,e)}},{key:"updateContext",value:function(e){return Tn(this).controller.updateWorkspaceContext(this.id,e)}},{key:"onContextUpdated",value:function(e){return Tn(this).controller.subscribeWorkspaceContextUpdated(this.id,e)}},{key:"refreshReference",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n,t,r,o,i,l,a,u=this;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tn(this).controller.getSnapshot(this.id,"workspace");case 2:n=e.sent,t=n.children.reduce((function(e,n){var t;return(t="window"===n.type?u.getWindow((function(e){return e.id===n.id})):u.getBox((function(e){return e.id===n.id})))&&e.push(t),e}),[]),r=Tn(this).controller.refreshChildren({existingChildren:t,workspace:this,parent:this,children:n.children}),(o=this.frame).id===n.config.frameId?(Mn(this).remapFrame(o,n.frameSummary),i=o):(l={summary:n.frameSummary},a=Tn(this).ioc.getModel("frame",l),i=a),Mn(this).remapWorkspace(this,{config:n.config,children:r,frame:i});case 8:case"end":return e.stop()}}),e,this)})))}},{key:"getBox",value:function(e){ne(e);var n=Tn(this).children;return Tn(this).controller.iterateFindChild(n,(function(n){return"window"!==n.type&&e(n)}))}},{key:"getAllBoxes",value:function(e){ne(e,!0);var n=Tn(this).children,t=Tn(this).controller.iterateFilterChildren(n,(function(e){return"window"!==e.type}));return e?t.filter(e):t}},{key:"getRow",value:function(e){return ne(e),this.getBox((function(n){return"row"===n.type&&e(n)}))}},{key:"getAllRows",value:function(e){return ne(e,!0),e?this.getAllBoxes((function(n){return"row"===n.type&&e(n)})):this.getAllBoxes((function(e){return"row"===e.type}))}},{key:"getColumn",value:function(e){return ne(e),this.getBox((function(n){return"column"===n.type&&e(n)}))}},{key:"getAllColumns",value:function(e){return ne(e,!0),e?this.getAllBoxes((function(n){return"column"===n.type&&e(n)})):this.getAllBoxes((function(e){return"column"===e.type}))}},{key:"getGroup",value:function(e){return ne(e),this.getBox((function(n){return"group"===n.type&&e(n)}))}},{key:"getAllGroups",value:function(e){return ne(e,!0),e?this.getAllBoxes((function(n){return"group"===n.type&&e(n)})):this.getAllBoxes((function(e){return"group"===e.type}))}},{key:"getWindow",value:function(e){ne(e);var n=Tn(this).children;return Tn(this).controller.iterateFindChild(n,(function(n){return"window"===n.type&&e(n)}))}},{key:"getAllWindows",value:function(e){ne(e,!0);var n=Tn(this).children,t=Tn(this).controller.iterateFilterChildren(n,(function(e){return"window"===e.type}));return e?t.filter(e):t}},{key:"addRow",value:function(e){return Tn(this).base.addParent(this,"row","workspace",e)}},{key:"addColumn",value:function(e){return Tn(this).base.addParent(this,"column","workspace",e)}},{key:"addGroup",value:function(e){return Tn(this).base.addParent(this,"group","workspace",e)}},{key:"addWindow",value:function(e){return Tn(this).base.addWindow(this,e,"workspace")}},{key:"bundleToRow",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tn(this).controller.bundleTo("row",this.id);case 2:return e.next=4,this.refreshReference();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"bundleToColumn",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tn(this).controller.bundleTo("column",this.id);case 2:return e.next=4,this.refreshReference();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"onClosed",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i=this;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Tn(this).id,r={action:"closed",eventType:"workspace",scope:"workspace",scopeId:t,callback:function(){return w(i,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e();case 1:case"end":return n.stop()}}),n)})))}},n.next=6,Tn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onWindowAdded",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i=this;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Tn(this).id,r={action:"added",eventType:"window",scope:"workspace",scopeId:t,callback:function(n){return w(i,void 0,void 0,_.a.mark((function t(){var r,o;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.refreshReference();case 2:r=this.getBox((function(e){return e.id===n.windowSummary.parentId})),o=r.children.find((function(e){return"window"===e.type&&e.positionIndex===n.windowSummary.config.positionIndex})),e(o);case 5:case"end":return t.stop()}}),t,this)})))}},n.next=6,Tn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onWindowRemoved",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i=this;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Tn(this).id,r={action:"removed",eventType:"window",scope:"workspace",scopeId:t,callback:function(n){return w(i,void 0,void 0,_.a.mark((function t(){var r,o,i,l;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.refreshReference();case 2:r=n.windowSummary.config,o=r.windowId,i=r.workspaceId,l=r.frameId,e({windowId:o,workspaceId:i,frameId:l});case 4:case"end":return t.stop()}}),t,this)})))}},n.next=6,Tn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onWindowLoaded",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i=this;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Tn(this).id,r={action:"loaded",eventType:"window",scope:"workspace",scopeId:t,callback:function(n){return w(i,void 0,void 0,_.a.mark((function t(){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.refreshReference();case 2:r=this.getWindow((function(e){return e.id&&e.id===n.windowSummary.config.windowId})),e(r);case 4:case"end":return t.stop()}}),t,this)})))}},n.next=6,Tn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"id",get:function(){return Tn(this).id}},{key:"frameId",get:function(){return Tn(this).config.frameId}},{key:"positionIndex",get:function(){return Tn(this).config.positionIndex}},{key:"title",get:function(){return Tn(this).config.title}},{key:"layoutName",get:function(){return Tn(this).config.layoutName}},{key:"children",get:function(){return Tn(this).children}},{key:"frame",get:function(){return Tn(this).frame}}]),e}(),jn=new WeakMap,$n=function(e){return jn.get(e).manager.getWindowData(e)},Wn=function(){function e(n){Object(g.a)(this,e),jn.set(this,{manager:n})}return Object(m.a)(e,[{key:"forceLoad",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n,t,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLoaded){e.next=2;break}return e.abrupt("return");case 2:return n=$n(this).controller,t=$n(this).id,e.next=6,n.forceLoadWindow(t);case 6:r=e.sent,$n(this).config.windowId=r;case 8:case"end":return e.stop()}}),e,this)})))}},{key:"focus",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n,t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$n(this).id,t=$n(this).controller,e.next=4,t.focusItem(n);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n,t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$n(this).id,t=$n(this).controller,e.next=4,t.closeItem(n);case 4:return e.next=6,$n(this).parent.removeChild((function(e){return e.id===n}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"setTitle",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return H.runWithException(e),t=$n(this).id,r=$n(this).controller,n.next=5,r.setItemTitle(t,e);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"maximize",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n,t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$n(this).id,t=$n(this).controller,e.next=4,t.maximizeItem(n);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"restore",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n,t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$n(this).id,t=$n(this).controller,e.next=4,t.restoreItem(n);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"eject",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n,t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoaded){e.next=2;break}throw new Error("Cannot eject this window, because it is not loaded yet");case 2:return n=$n(this).id,e.next=5,$n(this).controller.ejectWindow(n);case 5:return t=e.sent,$n(this).config.windowId=t,e.abrupt("return",this.getGdWindow());case 8:case"end":return e.stop()}}),e,this)})))}},{key:"getGdWindow",value:function(){if(!this.isLoaded)throw new Error("Cannot fetch this GD window, because the window is not yet loaded");var e=$n(this).config.windowId;return $n(this).controller.getGDWindow(e)}},{key:"moveTo",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof In||e instanceof Sn||e instanceof On){n.next=2;break}throw new Error("Cannot add to the provided parent, because the provided parent is not an instance of Row, Column or Group");case 2:return t=$n(this).id,r=$n(this).controller,n.next=6,r.getParent((function(n){return n.id===e.id}));case 6:if(n.sent){n.next=9;break}throw new Error("Cannot move the window to the selected parent, because this parent does not exist.");case 9:return n.abrupt("return",r.moveWindowTo(t,e.id));case 10:case"end":return n.stop()}}),n,this)})))}},{key:"onRemoved",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i=this;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=$n(this).id,r={callback:function(){return w(i,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.workspace.refreshReference();case 2:e();case 3:case"end":return n.stop()}}),n,this)})))},action:"removed",eventType:"window",scope:"window"},n.next=6,$n(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"id",get:function(){return $n(this).config.windowId}},{key:"type",get:function(){return"window"}},{key:"frameId",get:function(){return $n(this).frame.id}},{key:"workspaceId",get:function(){return $n(this).workspace.id}},{key:"positionIndex",get:function(){return $n(this).config.positionIndex}},{key:"isMaximized",get:function(){return $n(this).config.isMaximized}},{key:"isLoaded",get:function(){return $n(this).controller.checkIsWindowLoaded(this.id)}},{key:"focused",get:function(){return $n(this).config.isFocused}},{key:"title",get:function(){return $n(this).config.title}},{key:"workspace",get:function(){return $n(this).workspace}},{key:"frame",get:function(){return $n(this).frame}},{key:"parent",get:function(){return $n(this).parent}},{key:"appName",get:function(){return $n(this).config.appName}}]),e}(),Qn=new WeakMap,Nn=function(e){return Qn.get(e).manager.getFrameData(e)},Gn=function(){function e(n){Object(g.a)(this,e),Qn.set(this,{manager:n})}return Object(m.a)(e,[{key:"resize",value:function(e){var n=qe.runWithException(e),t=Nn(this).summary.id;return Nn(this).controller.resizeItem(t,n)}},{key:"move",value:function(e){var n=ze.runWithException(e),t=Nn(this).summary.id;return Nn(this).controller.moveFrame(t,n)}},{key:"focus",value:function(){var e=Nn(this).summary.id;return Nn(this).controller.focusItem(e)}},{key:"state",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.glue42gd){e.next=2;break}throw new Error("State operations are not supported in Glue42 Core");case 2:return n=Nn(this).summary.id,e.abrupt("return",Nn(this).controller.getFrameState(n));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"minimize",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.glue42gd){e.next=2;break}throw new Error("State operations are not supported in Glue42 Core");case 2:return n=Nn(this).summary.id,e.abrupt("return",Nn(this).controller.changeFrameState(n,"minimized"));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"maximize",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.glue42gd){e.next=2;break}throw new Error("State operations are not supported in Glue42 Core");case 2:return n=Nn(this).summary.id,e.abrupt("return",Nn(this).controller.changeFrameState(n,"maximized"));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"restore",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.glue42gd){e.next=2;break}throw new Error("State operations are not supported in Glue42 Core");case 2:return n=Nn(this).summary.id,e.abrupt("return",Nn(this).controller.changeFrameState(n,"normal"));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){var e=Nn(this).summary.id;return Nn(this).controller.closeItem(e)}},{key:"snapshot",value:function(){var e=Nn(this).summary.id;return Nn(this).controller.getSnapshot(e,"frame")}},{key:"workspaces",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n,t=this;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Nn(this).controller,e.abrupt("return",n.getWorkspaces((function(e){return e.frameId===t.id})));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"restoreWorkspace",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return H.runWithException(e),r=ce.runWithException(n),t.abrupt("return",Nn(this).controller.restoreWorkspace(e,r));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"createWorkspace",value:function(e,n){var t=fe.runWithException(e),r=te.runWithException(n);return Nn(this).controller.createWorkspace(t,r)}},{key:"onClosed",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Nn(this).summary.id,r={callback:function(n){e({frameId:n.frameSummary.id})},action:"closed",eventType:"frame",scope:"frame"},n.next=6,Nn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onMaximized",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Nn(this).summary.id,r={callback:function(){e()},action:"maximized",eventType:"frame",scope:"frame"},n.next=6,Nn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onMinimized",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Nn(this).summary.id,r={callback:function(){e()},action:"minimized",eventType:"frame",scope:"frame"},n.next=6,Nn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onNormal",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Nn(this).summary.id,r={callback:function(){e()},action:"normal",eventType:"frame",scope:"frame"},n.next=6,Nn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onWorkspaceOpened",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i=this;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Nn(this).summary.id,r={callback:function(n){return w(i,void 0,void 0,_.a.mark((function t(){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nn(this).controller.getWorkspace((function(e){return e.id===n.workspaceSummary.id}));case 2:r=t.sent,e(r);case 4:case"end":return t.stop()}}),t,this)})))},action:"opened",eventType:"workspace",scope:"frame"},n.next=6,Nn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onWorkspaceSelected",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i=this;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Nn(this).summary.id,r={callback:function(n){return w(i,void 0,void 0,_.a.mark((function t(){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nn(this).controller.getWorkspace((function(e){return e.id===n.workspaceSummary.id}));case 2:r=t.sent,e(r);case 4:case"end":return t.stop()}}),t,this)})))},action:"selected",eventType:"workspace",scope:"frame"},n.next=6,Nn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onWorkspaceClosed",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Nn(this).summary.id,r={callback:function(n){e({frameId:n.frameSummary.id,workspaceId:n.workspaceSummary.id})},action:"closed",eventType:"workspace",scope:"frame"},n.next=6,Nn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onWindowAdded",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i=this;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Nn(this).summary.id,r={callback:function(n){return w(i,void 0,void 0,_.a.mark((function t(){var r,o;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nn(this).controller.getParent((function(e){return e.id===n.windowSummary.parentId}));case 2:r=t.sent,o=r.children.find((function(e){return"window"===e.type&&e.positionIndex===n.windowSummary.config.positionIndex})),e(o);case 5:case"end":return t.stop()}}),t,this)})))},action:"added",eventType:"window",scope:"frame"},n.next=6,Nn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onWindowRemoved",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Nn(this).summary.id,r={callback:function(n){var t=n.windowSummary.config,r=t.windowId,o=t.workspaceId,i=t.frameId;e({windowId:r,workspaceId:o,frameId:i})},action:"removed",eventType:"window",scope:"frame"},n.next=6,Nn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onWindowLoaded",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i=this;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),t=Nn(this).summary.id,r={callback:function(n){return w(i,void 0,void 0,_.a.mark((function t(){var r,o;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nn(this).controller.getParent((function(e){return e.id===n.windowSummary.parentId}));case 2:r=t.sent,o=r.children.find((function(e){return"window"===e.type&&e.positionIndex===n.windowSummary.config.positionIndex})),e(o);case 5:case"end":return t.stop()}}),t,this)})))},action:"loaded",eventType:"window",scope:"frame"},n.next=6,Nn(this).controller.processLocalSubscription(r,t);case 6:return o=n.sent,n.abrupt("return",o);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"id",get:function(){return Nn(this).summary.id}}]),e}(),Fn=function(){function e(){Object(g.a)(this,e),this.parentsData=new WeakMap,this.workspacesData=new WeakMap,this.windowsData=new WeakMap,this.framesData=new WeakMap,this.windowPlacementIdData={}}return Object(m.a)(e,[{key:"deleteData",value:function(e){var n=this;if(e instanceof Wn){var t=Object.keys(this.windowPlacementIdData).find((function(t){return n.windowPlacementIdData[t]===e}));t&&delete this.windowPlacementIdData[t],this.windowsData.delete(e)}e instanceof Pn&&this.workspacesData.delete(e),(e instanceof In||e instanceof Sn||e instanceof On)&&this.parentsData.delete(e),e instanceof Gn&&this.framesData.delete(e)}},{key:"setWindowData",value:function(e,n){this.windowPlacementIdData[n.id]=e,this.windowsData.set(e,n)}},{key:"setWorkspaceData",value:function(e,n){this.workspacesData.set(e,n)}},{key:"setParentData",value:function(e,n){this.parentsData.set(e,n)}},{key:"setFrameData",value:function(e,n){this.framesData.set(e,n)}},{key:"getWindowData",value:function(e){return this.windowsData.get(e)}},{key:"getWindowByPlacementId",value:function(e){return this.windowPlacementIdData[e]}},{key:"getWorkspaceData",value:function(e){return this.workspacesData.get(e)}},{key:"getParentData",value:function(e){return this.parentsData.get(e)}},{key:"getFrameData",value:function(e){return this.framesData.get(e)}},{key:"remapChild",value:function(e,n){if(e instanceof Wn){var t=this.windowsData.get(e);t.parent=n.parent||t.parent,t.config=n.config||t.config}if(e instanceof In||e instanceof Sn||e instanceof On){var r=this.parentsData.get(e);r.parent=n.parent||r.parent,r.config=n.config||r.config,r.children=n.children||r.children}}},{key:"remapFrame",value:function(e,n){this.framesData.get(e).summary=n}},{key:"remapWorkspace",value:function(e,n){var t=this.workspacesData.get(e);t.frame=n.frame||t.frame,t.config=n.config||t.config,t.children=n.children||t.children}}]),e}(),Ln=new WeakMap,Bn=function(e,n){var t=Ln.get(e).manager;return n instanceof Pn?t.getWorkspaceData(n):Ln.get(e).manager.getParentData(n)},qn=function(e,n){return Ln.get(e).manager.getWindowByPlacementId(n)},zn=function(){function e(n){Object(g.a)(this,e),Ln.set(this,{manager:n})}return Object(m.a)(e,[{key:"getId",value:function(e){return Bn(this,e).id}},{key:"getPositionIndex",value:function(e){return Bn(this,e).config.positionIndex}},{key:"getWorkspaceId",value:function(e){var n=Bn(this,e);return n.config.workspaceId||n.workspace.id}},{key:"getFrameId",value:function(e){return Bn(this,e).frame.id}},{key:"getAllChildren",value:function(e,n){ne(n,!0);var t=Bn(this,e).children;return"undefined"===typeof n?t:t.filter(n)}},{key:"getMyParent",value:function(e){if(!(e instanceof Pn))return Bn(this,e).parent}},{key:"getMyFrame",value:function(e){return Bn(this,e).frame}},{key:"getMyWorkspace",value:function(e){if(!(e instanceof Pn))return Bn(this,e).workspace}},{key:"addWindow",value:function(e,n,t){return w(this,void 0,void 0,_.a.mark((function r(){var o,i,l;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.appName||n.windowId){r.next=2;break}throw new Error("The window definition should contain either an appName or a windowId");case 2:return o=oe.runWithException(n),i=Bn(this,e).controller,r.next=6,i.add("window",Bn(this,e).id,t,o);case 6:if(l=r.sent,!(e instanceof Pn)){r.next=11;break}return r.next=10,e.refreshReference();case 10:return r.abrupt("return",qn(this,l.itemId));case 11:return r.next=13,this.getMyWorkspace(e).refreshReference();case 13:return r.abrupt("return",qn(this,l.itemId));case 14:case"end":return r.stop()}}),r,this)})))}},{key:"addParent",value:function(e,n,t,r){return w(this,void 0,void 0,_.a.mark((function o(){var i,l,a,u;return _.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=this.transformDefinition(n,r),l=Bn(this,e).controller,o.next=4,l.add("container",Bn(this,e).id,t,i);case 4:if(a=o.sent.itemId,!(e instanceof Pn)){o.next=9;break}return o.next=8,e.refreshReference();case 8:return o.abrupt("return",e.getBox((function(e){return e.id===a})));case 9:return u=this.getMyWorkspace(e),o.next=12,u.refreshReference();case 12:return o.abrupt("return",u.getBox((function(e){return e.id===a})));case 13:case"end":return o.stop()}}),o,this)})))}},{key:"removeChild",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ne(n),r=this.getAllChildren(e).find(n)){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,r.close();case 6:if(!(e instanceof Pn)){t.next=10;break}return t.next=9,e.refreshReference();case 9:return t.abrupt("return");case 10:return t.next=12,this.getMyWorkspace(e).refreshReference();case 12:case"end":return t.stop()}}),t,this)})))}},{key:"maximize",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Bn(this,e).controller,n.next=3,t.maximizeItem(Bn(this,e).id);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"restore",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Bn(this,e).controller,n.next=3,t.restoreItem(Bn(this,e).id);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"close",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Bn(this,e),r=Bn(this,e).controller,n.next=4,r.closeItem(t.id);case 4:if(!(t.parent instanceof Pn)){n.next=9;break}return n.next=7,t.parent.refreshReference();case 7:n.next=11;break;case 9:return n.next=11,this.getMyWorkspace(t.parent).refreshReference();case 11:case"end":return n.stop()}}),n,this)})))}},{key:"transformDefinition",value:function(e,n){var t;return"undefined"===typeof n?t={type:e,children:[]}:n instanceof wn?t=n.serialize():("undefined"===typeof n.type&&(n.type=e),(t=ae.runWithException(n)).children=t.children||[]),t}}]),e}(),Jn=function(){function e(n,t,r,o){Object(g.a)(this,e),this.ioc=n,this.windows=t,this.contexts=r,this.layouts=o}return Object(m.a)(e,[{key:"checkIsWindowLoaded",value:function(e){return e&&this.windows.list().some((function(n){return n.id===e}))}},{key:"createWorkspace",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.createWorkspace.name,e);case 2:return t=n.sent,r={summary:t.frameSummary},o=this.ioc.getModel("frame",r),i={frame:o,snapshot:t},n.abrupt("return",this.ioc.getModel("workspace",i));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"restoreWorkspace",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){var r,o,i,l,a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bridge.send(hn.openWorkspace.name,{name:e,restoreOptions:n});case 2:return r=t.sent,t.next=5,this.bridge.send(hn.getFrameSummary.name,{itemId:r.config.frameId});case 5:return o=t.sent,i={summary:o},l=this.ioc.getModel("frame",i),a={frame:l,snapshot:r},t.abrupt("return",this.ioc.getModel("workspace",a));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"add",value:function(e,n,t,r){return w(this,void 0,void 0,_.a.mark((function o(){var i,l;return _.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(l={definition:r,parentId:n,parentType:t},"window"!==e){o.next=5;break}i=hn.addWindow.name,o.next=10;break;case 5:if("container"!==e){o.next=9;break}i=hn.addContainer.name,o.next=10;break;case 9:throw new Error("Unrecognized add type: ".concat(e));case 10:return o.next=12,this.bridge.send(i,l);case 12:return o.abrupt("return",o.sent);case 13:case"end":return o.stop()}}),o,this)})))}},{key:"getFrame",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.getFrameSummary.name,{itemId:e});case 2:return t=n.sent,r={summary:t},n.abrupt("return",this.ioc.getModel("frame",r));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"getFrames",value:function(e,n){var t=this;return e.reduce((function(e,r){var o={summary:r},i=t.ioc.getModel("frame",o);return n&&!n(i)||e.push(i),e}),[])}},{key:"getAllWorkspaceSummaries",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=n.reduce((function(e,n){return e.push.apply(e,Object(p.a)(n.summaries)),e}),[]);return r.map((function(e){return{id:e.id,frameId:e.config.frameId,positionIndex:e.config.positionIndex,title:e.config.title,layoutName:e.config.layoutName}}))}},{key:"handleOnSaved",value:function(e){var n=function(n){"Workspace"===n.type&&e(n)},t=this.layouts.onAdded(n),r=this.layouts.onChanged(n);return function(){t(),r()}}},{key:"handleOnRemoved",value:function(e){return this.layouts.onRemoved((function(n){"Workspace"===n.type&&e(n)}))}},{key:"fetchWorkspace",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.getWorkspaceSnapshot.name,{itemId:e});case 2:return t=n.sent,r={summary:t.frameSummary},o=this.ioc.getModel("frame",r),i={frame:o,snapshot:t},n.abrupt("return",this.ioc.getModel("workspace",i));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"bundleTo",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bridge.send(hn.bundleWorkspace.name,{type:e,workspaceId:n});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getWorkspaceContext",value:function(e){var n="___workspace___".concat(e);return this.contexts.get(n)}},{key:"setWorkspaceContext",value:function(e,n){var t="___workspace___".concat(e);return this.contexts.set(t,n)}},{key:"updateWorkspaceContext",value:function(e,n){var t="___workspace___".concat(e);return this.contexts.update(t,n)}},{key:"subscribeWorkspaceContextUpdated",value:function(e,n){var t="___workspace___".concat(e);return this.contexts.subscribe(t,n)}},{key:"restoreItem",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.restoreItem.name,{itemId:e});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"maximizeItem",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.maximizeItem.name,{itemId:e});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"focusItem",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.focusItem.name,{itemId:e});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"closeItem",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.closeItem.name,{itemId:e});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"resizeItem",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bridge.send(hn.resizeItem.name,Object.assign({},{itemId:e},n));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"moveFrame",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bridge.send(hn.moveFrame.name,Object.assign({},{itemId:e},n));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getGDWindow",value:function(e){return this.windows.list().find((function(n){return n.id===e}))}},{key:"forceLoadWindow",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.forceLoadWindow.name,{itemId:e});case 2:return t=n.sent,n.abrupt("return",t.windowId);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"ejectWindow",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.ejectWindow.name,{itemId:e});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"moveWindowTo",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bridge.send(hn.moveWindowTo.name,{itemId:e,containerId:n});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getSnapshot",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("workspace"!==n){t.next=6;break}return t.next=3,this.bridge.send(hn.getWorkspaceSnapshot.name,{itemId:e});case 3:r=t.sent,t.next=10;break;case 6:if("frame"!==n){t.next=10;break}return t.next=9,this.bridge.send(hn.getFrameSnapshot.name,{itemId:e});case 9:r=t.sent;case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}}),t,this)})))}},{key:"setItemTitle",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bridge.send(hn.setItemTitle.name,{itemId:e,title:n});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"refreshChildren",value:function(e){var n=this,t=e.parent,r=e.children,o=e.existingChildren,i=e.workspace;if(!(t instanceof Wn)){var l=r.map((function(e){var r=o.find((function(n){return n.id===e.id})),l=e.type;if(r)n.privateDataManager.remapChild(r,{parent:t,children:[],config:e.config});else if("window"===l){var a={id:e.id,parent:t,frame:i.frame,workspace:i,config:e.config};r=n.ioc.getModel(l,a)}else{var u={id:e.id,children:[],parent:t,frame:i.frame,workspace:i,config:e.config};r=n.ioc.getModel(l,u)}return"window"!==l&&n.refreshChildren({workspace:i,existingChildren:o,children:e.children,parent:r}),r}));return t instanceof Pn||this.privateDataManager.remapChild(t,{children:l}),l}}},{key:"iterateFindChild",value:function(e,n){var t=this,r=e.find((function(e){return n(e)}));return r||(e.some((function(e){return!(e instanceof Wn)&&(!!(r=t.iterateFindChild(e.children,n))||void 0)})),r)}},{key:"iterateFilterChildren",value:function(e,n){var t=this,r=e.filter((function(e){return n(e)})),o=e.reduce((function(e,r){return r instanceof Wn||e.push.apply(e,Object(p.a)(t.iterateFilterChildren(r.children,n))),e}),[]);return r.push.apply(r,Object(p.a)(o)),r}},{key:"notifyWindowAdded",value:function(e){var n=this;return new Promise((function(t){if(n.windows.list().some((function(n){return n.id===e})))return t();var r=n.windows.onWindowAdded((function(n){n.id===e&&(r&&r(),t())}))}))}},{key:"bridge",get:function(){return this.ioc.bridge}},{key:"privateDataManager",get:function(){return this.ioc.privateDataManager}}]),e}(),Un=function(){function e(n,t){Object(g.a)(this,e),this.bridge=n,this.base=t}return Object(m.a)(e,[{key:"checkIsWindowLoaded",value:function(e){return this.base.checkIsWindowLoaded(e)}},{key:"checkIsInSwimlane",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.isWindowInWorkspace.name,{itemId:e});case 2:return t=n.sent,n.abrupt("return",t.inWorkspace);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"createWorkspace",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.assign({},e,{saveConfig:n}),t.next=3,this.base.createWorkspace(r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"restoreWorkspace",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){var r,o;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getLayoutSummaries();case 2:if(r=t.sent,r.some((function(n){return n.name===e}))){t.next=6;break}throw new Error("This layout: ".concat(e," cannot be restored, because it doesn't exist."));case 6:if(!(null===n||void 0===n?void 0:n.frameId)){t.next=13;break}return t.next=9,this.bridge.send(hn.getAllFramesSummaries.name);case 9:if(o=t.sent,o.summaries.some((function(e){return e.id===n.frameId}))){t.next=13;break}throw new Error("Cannot reuse the frame with id: ".concat(n.frameId,", because there is no frame with that ID found"));case 13:return t.next=15,this.base.restoreWorkspace(e,n);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,this)})))}},{key:"add",value:function(e,n,t,r){return w(this,void 0,void 0,_.a.mark((function o(){return _.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.base.add(e,n,t,r);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}}),o,this)})))}},{key:"processLocalSubscription",value:function(e,n){return window.glue42gd?this.handleEnterpriseLocalSubscription(e,n):this.handleCoreLocalSubscription(e,n)}},{key:"processGlobalSubscription",value:function(e,n,t){return window.glue42gd?this.handleEnterpriseGlobalSubscription(e,n,t):this.handleCoreGlobalSubscription(e,n,t)}},{key:"getFrame",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.windowId){n.next=4;break}return n.next=3,this.base.getFrame(e.windowId);case 3:return n.abrupt("return",n.sent);case 4:if(!e.predicate){n.next=8;break}return n.next=7,this.getFrames(e.predicate);case 7:return n.abrupt("return",n.sent[0]);case 8:throw new Error("The provided selector is not valid: ".concat(JSON.stringify(e)));case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getFrames",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.getAllFramesSummaries.name);case 2:return t=n.sent,n.abrupt("return",this.base.getFrames(t.summaries,e));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"getWorkspace",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.iterateWorkspaces((function(n,r){e(n)&&(t=n,r())}));case 2:return n.abrupt("return",t);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"getWorkspaces",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],n.next=3,this.iterateWorkspaces((function(n){e&&!e(n)||t.push(n)}));case 3:return n.abrupt("return",t);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"getAllWorkspaceSummaries",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bridge.send(hn.getAllWorkspacesSummaries.name,{});case 2:return n=e.sent,e.abrupt("return",this.base.getAllWorkspaceSummaries(n));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getWindow",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.iterateWorkspaces((function(n,r){var o=n.getWindow(e);o&&(t=o,r())}));case 2:return n.abrupt("return",t);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"getParent",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.iterateWorkspaces((function(n,r){var o=n.getBox(e);o&&(t=o,r())}));case 2:return n.abrupt("return",t);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"getLayoutSummaries",value:function(){return w(this,void 0,void 0,_.a.mark((function e(){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bridge.send(hn.getAllLayoutsSummaries.name);case 2:return n=e.sent,e.abrupt("return",n.summaries);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"deleteLayout",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.deleteLayout.name,{name:e});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"exportLayout",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.exportAllLayouts.name);case 2:return t=n.sent,n.abrupt("return",t.layouts.reduce((function(n,t){return e&&!e(t)||n.push(t),n}),[]));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"saveLayout",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.saveLayout.name,e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"importLayout",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){var r=this;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map((function(e){return r.bridge.send(hn.importLayout.name,{layout:e,mode:n})})));case 2:case"end":return t.stop()}}),t)})))}},{key:"handleOnSaved",value:function(e){return this.base.handleOnSaved(e)}},{key:"handleOnRemoved",value:function(e){return this.base.handleOnRemoved(e)}},{key:"bundleTo",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.base.bundleTo(e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getWorkspaceContext",value:function(e){return this.base.getWorkspaceContext(e)}},{key:"setWorkspaceContext",value:function(e,n){return this.base.setWorkspaceContext(e,n)}},{key:"updateWorkspaceContext",value:function(e,n){return this.base.updateWorkspaceContext(e,n)}},{key:"subscribeWorkspaceContextUpdated",value:function(e,n){return this.base.subscribeWorkspaceContextUpdated(e,n)}},{key:"restoreItem",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.base.restoreItem(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"maximizeItem",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.base.maximizeItem(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"focusItem",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.base.focusItem(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"changeFrameState",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bridge.send(hn.changeFrameState.name,{frameId:e,requestedState:n});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getFrameState",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.bridge.send(hn.getFrameState.name,{itemId:e});case 2:return t=n.sent,n.abrupt("return",t.state);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"closeItem",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.base.closeItem(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"resizeItem",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.base.resizeItem(e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"moveFrame",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.base.moveFrame(e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getGDWindow",value:function(e){return this.base.getGDWindow(e)}},{key:"forceLoadWindow",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.base.forceLoadWindow(e);case 2:return t=n.sent,n.next=5,this.base.notifyWindowAdded(t);case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"ejectWindow",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.base.ejectWindow(e);case 2:return t=n.sent.windowId,n.next=5,this.base.notifyWindowAdded(t);case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"moveWindowTo",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.base.moveWindowTo(e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getSnapshot",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.base.getSnapshot(e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setItemTitle",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.base.setItemTitle(e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"refreshChildren",value:function(e){return this.base.refreshChildren(e)}},{key:"iterateFindChild",value:function(e,n){return this.base.iterateFindChild(e,n)}},{key:"iterateFilterChildren",value:function(e,n){return this.base.iterateFilterChildren(e,n)}},{key:"handleCoreLocalSubscription",value:function(e,n){return w(this,void 0,void 0,_.a.mark((function t(){var r,o,i=this;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bridge.createCoreEventSubscription();case 2:return e.scopeId=e.scopeId||n,"window"===e.eventType&&"loaded"===e.action&&(r=e.callback,o=function(e){return w(i,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.base.notifyWindowAdded(e.windowSummary.config.windowId);case 2:r(e);case 3:case"end":return n.stop()}}),n,this)})))},e.callback=o),t.abrupt("return",this.bridge.handleCoreSubscription(e));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"handleEnterpriseLocalSubscription",value:function(e,n){var t=this;if(e.scopeId=e.scopeId||n,"window"===e.eventType&&"loaded"===e.action){var r=e.callback;e.callback=function(e){return w(t,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.base.notifyWindowAdded(e.windowSummary.config.windowId);case 2:r(e);case 3:case"end":return n.stop()}}),n,this)})))}}return this.bridge.subscribe(e)}},{key:"handleCoreGlobalSubscription",value:function(e,n,t){return w(this,void 0,void 0,_.a.mark((function r(){var o,i,l=this;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.bridge.createCoreEventSubscription();case 2:return o={eventType:n,callback:e,action:t,scope:"global"},"window"===n&&"loaded"===t&&(i=function(n){return w(l,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.base.notifyWindowAdded(n.windowSummary.config.windowId);case 2:e(n);case 3:case"end":return t.stop()}}),t,this)})))},o.callback=i),r.abrupt("return",this.bridge.handleCoreSubscription(o));case 5:case"end":return r.stop()}}),r,this)})))}},{key:"handleEnterpriseGlobalSubscription",value:function(e,n,t){var r=this,o={eventType:n,callback:e,action:t,scope:"global"};if("window"===n&&"loaded"===t){o.callback=function(n){return w(r,void 0,void 0,_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.base.notifyWindowAdded(n.windowSummary.config.windowId);case 2:e(n);case 3:case"end":return t.stop()}}),t,this)})))}}return this.bridge.subscribe(o)}},{key:"iterateWorkspaces",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){var t,r,o,i,l,a,u;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=!1,r=function(){t=!0},n.next=4,this.getAllWorkspaceSummaries();case 4:o=n.sent,i=Object(f.a)(o),n.prev=6,i.s();case 8:if((l=i.n()).done){n.next=18;break}if(a=l.value,!t){n.next=12;break}return n.abrupt("return");case 12:return n.next=14,this.base.fetchWorkspace(a.id);case 14:u=n.sent,e(u,r);case 16:n.next=8;break;case 18:n.next=23;break;case 20:n.prev=20,n.t0=n.catch(6),i.e(n.t0);case 23:return n.prev=23,i.f(),n.finish(23);case 26:case"end":return n.stop()}}),n,this,[[6,20,23,26]])})))}}]),e}(),Vn=function(){function e(n,t,r,o){Object(g.a)(this,e),this.agm=n,this.windows=t,this.layouts=r,this.contexts=o}return Object(m.a)(e,[{key:"initiate",value:function(e){return w(this,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.transport.initiate(e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"getModel",value:function(e,n){switch(e){case"frame":var t=new Gn(this.privateDataManager),r={summary:n.summary,controller:this.controller};return this.privateDataManager.setFrameData(t,r),t;case"window":var o=n.id,i=n.parent,l=n.frame,a=n.workspace,u=n.config,s={type:"window",controller:this.controller,config:u,id:o,parent:i,frame:l,workspace:a},c=new Wn(this.privateDataManager);return this.privateDataManager.setWindowData(c,s),c;case"row":case"column":case"group":var d=n.id,f=n.children,p=n.parent,h=n.frame,_=n.workspace,g=n.config,m="column"===e?new Sn(this.parentBase):"row"===e?new In(this.parentBase):new On(this.parentBase),w=this.buildChildren(f,h,_,m),v={id:d,parent:p,frame:h,workspace:_,config:g,type:e,controller:this.controller,children:w};return this.privateDataManager.setParentData(m,v),m;case"workspace":var b=n.snapshot,y=n.frame,k=new Pn(this.privateDataManager),C=this.buildChildren(b.children,y,k,k),I={id:b.id,type:"workspace",config:b.config,base:this.parentBase,controller:this.controller,children:C,frame:y,ioc:this};return this.privateDataManager.setWorkspaceData(k,I),k;default:throw new Error("Unrecognized type: ".concat(e))}}},{key:"getBuilder",value:function(e){e.definition=e.definition||{},Array.isArray(e.definition.children)||(e.definition.children=[]);var n=new vn(this.getBuilder.bind(this));switch(e.type){case"workspace":return new yn(e.definition,n,this.controller);case"row":case"column":case"group":return e.definition.type=e.type,new wn(e.definition,n);default:throw new Error("Unexpected Builder creation error, provided config: ".concat(JSON.stringify(e)))}}},{key:"buildChildren",value:function(e,n,t,r){var o=this;return e.map((function(e){switch(e.type){case"window":return o.getModel("window",{id:e.id,config:e.config,frame:n,workspace:t,parent:r});case"column":case"row":case"group":return o.getModel(e.type,{id:e.id,config:e.config,children:e.children,frame:n,workspace:t,parent:r});default:throw new Error("Unsupported child type: ".concat(e.type))}}))}},{key:"baseController",get:function(){return this._baseController||(this._baseController=new Jn(this,this.windows,this.contexts,this.layouts)),this._baseController}},{key:"controller",get:function(){return this._controllerInstance||(this._controllerInstance=new Un(this.bridge,this.baseController)),this._controllerInstance}},{key:"bridge",get:function(){return this._bridgeInstance||(this._bridgeInstance=new _n(this.transport,b())),this._bridgeInstance}},{key:"transport",get:function(){return this._transportInstance||(this._transportInstance=new gn(this.agm)),this._transportInstance}},{key:"privateDataManager",get:function(){return this._privateDataManagerInstance||(this._privateDataManagerInstance=new Fn),this._privateDataManagerInstance}},{key:"parentBase",get:function(){return this._parentBaseInstance||(this._parentBaseInstance=new zn(this.privateDataManager)),this._parentBaseInstance}}]),e}(),Hn=function(e,n){var t=n.controller;return{inWorkspace:function(){var n=e.windows.my().id;if(!n)throw new Error("Cannot get my frame, because my id is undefined.");return t.checkIsInSwimlane(n)},getBuilder:function(e){var t=pe.runWithException(e);return n.getBuilder(t)},getMyFrame:function(){return w(void 0,void 0,void 0,_.a.mark((function n(){var r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.windows.my().id){n.next=3;break}throw new Error("Cannot get my frame, because my id is undefined.");case 3:return n.next=5,t.checkIsInSwimlane(r);case 5:if(n.sent){n.next=8;break}throw new Error("Cannot fetch your frame, because this window is not in a workspace");case 8:return n.abrupt("return",t.getFrame({windowId:r}));case 9:case"end":return n.stop()}}),n)})))},getFrame:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),n.abrupt("return",t.getFrame({predicate:e}));case 2:case"end":return n.stop()}}),n)})))},getAllFrames:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e,!0),n.abrupt("return",t.getFrames(e));case 2:case"end":return n.stop()}}),n)})))},getAllWorkspacesSummaries:function(){return t.getAllWorkspaceSummaries()},getMyWorkspace:function(){return w(void 0,void 0,void 0,_.a.mark((function n(){var r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.windows.my().id){n.next=3;break}throw new Error("Cannot get my workspace, because my id is undefined.");case 3:return n.next=5,t.checkIsInSwimlane(r);case 5:if(n.sent){n.next=8;break}throw new Error("Cannot fetch your workspace, because this window is not in a workspace");case 8:return n.next=10,t.getWorkspaces((function(e){return!!e.getWindow((function(e){return e.id===r}))}));case 10:return n.abrupt("return",n.sent[0]);case 11:case"end":return n.stop()}}),n)})))},getWorkspace:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),n.next=3,t.getWorkspaces(e);case 3:return n.abrupt("return",n.sent[0]);case 4:case"end":return n.stop()}}),n)})))},getAllWorkspaces:function(e){return ne(e,!0),t.getWorkspaces(e)},getWindow:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),n.abrupt("return",t.getWindow(e));case 2:case"end":return n.stop()}}),n)})))},getBox:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),n.abrupt("return",t.getParent(e));case 2:case"end":return n.stop()}}),n)})))},restoreWorkspace:function(e,n){return w(void 0,void 0,void 0,_.a.mark((function r(){var o;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return H.runWithException(e),o=ce.runWithException(n),r.abrupt("return",t.restoreWorkspace(e,o));case 3:case"end":return r.stop()}}),r)})))},createWorkspace:function(e,n){return w(void 0,void 0,void 0,_.a.mark((function r(){var o,i;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=fe.runWithException(e),i=te.runWithException(n),r.abrupt("return",t.createWorkspace(o,i));case 3:case"end":return r.stop()}}),r)})))},layouts:{getSummaries:function(){return t.getLayoutSummaries()},delete:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return H.runWithException(e),n.abrupt("return",t.deleteLayout(e));case 2:case"end":return n.stop()}}),n)})))},export:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e,!0),n.abrupt("return",t.exportLayout(e));case 2:case"end":return n.stop()}}),n)})))},import:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace";return w(void 0,void 0,void 0,_.a.mark((function r(){return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(Array.isArray(e)){r.next=2;break}throw new Error("The provided layouts argument is not an array: ".concat(JSON.stringify(e)));case 2:return e.forEach((function(e){return Ae.runWithException(e)})),r.abrupt("return",t.importLayout(e,n));case 4:case"end":return r.stop()}}),r)})))},save:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){var r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=sn.runWithException(e),n.abrupt("return",t.saveLayout(r));case 2:case"end":return n.stop()}}),n)})))},onSaved:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),n.abrupt("return",t.handleOnSaved(e));case 2:case"end":return n.stop()}}),n)})))},onRemoved:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),n.abrupt("return",t.handleOnRemoved(e));case 2:case"end":return n.stop()}}),n)})))}},onFrameOpened:function(e){return w(void 0,void 0,void 0,_.a.mark((function r(){var o,i;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return ne(e),o=function(t){var r={summary:t.frameSummary},o=n.getModel("frame",r);e(o)},r.next=4,t.processGlobalSubscription(o,"frame","opened");case 4:return i=r.sent,r.abrupt("return",i);case 6:case"end":return r.stop()}}),r)})))},onFrameClosed:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){var r,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),r=function(n){e({frameId:n.frameSummary.id})},n.next=4,t.processGlobalSubscription(r,"frame","closed");case 4:return o=n.sent,n.abrupt("return",o);case 6:case"end":return n.stop()}}),n)})))},onWorkspaceOpened:function(e){return w(void 0,void 0,void 0,_.a.mark((function r(){var o,i;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return ne(e),o=function(r){return w(void 0,void 0,void 0,_.a.mark((function o(){var i,l,a,u,s;return _.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i={summary:r.frameSummary},l=n.getModel("frame",i),o.next=4,t.getSnapshot(r.workspaceSummary.id,"workspace");case 4:a=o.sent,u={frame:l,snapshot:a},s=n.getModel("workspace",u),e(s);case 8:case"end":return o.stop()}}),o)})))},r.next=4,t.processGlobalSubscription(o,"workspace","opened");case 4:return i=r.sent,r.abrupt("return",i);case 6:case"end":return r.stop()}}),r)})))},onWorkspaceClosed:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){var r,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),r=function(n){e({frameId:n.frameSummary.id,workspaceId:n.workspaceSummary.id})},n.next=4,t.processGlobalSubscription(r,"workspace","closed");case 4:return o=n.sent,n.abrupt("return",o);case 6:case"end":return n.stop()}}),n)})))},onWindowAdded:function(e){return w(void 0,void 0,void 0,_.a.mark((function r(){var o,i;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return ne(e),o=function(r){return w(void 0,void 0,void 0,_.a.mark((function o(){var i,l,a,u,s,c,d;return _.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.getSnapshot(r.windowSummary.config.workspaceId,"workspace");case 2:i=o.sent,l={summary:i.frameSummary},a=n.getModel("frame",l),u={frame:a,snapshot:i},s=n.getModel("workspace",u),c=s.getBox((function(e){return e.id===r.windowSummary.parentId})),d=c.children.find((function(e){return"window"===e.type&&e.positionIndex===r.windowSummary.config.positionIndex})),e(d);case 10:case"end":return o.stop()}}),o)})))},r.next=4,t.processGlobalSubscription(o,"window","added");case 4:return i=r.sent,r.abrupt("return",i);case 6:case"end":return r.stop()}}),r)})))},onWindowLoaded:function(e){return w(void 0,void 0,void 0,_.a.mark((function r(){var o,i;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return ne(e),o=function(r){return w(void 0,void 0,void 0,_.a.mark((function o(){var i,l,a,u,s,c;return _.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.getSnapshot(r.windowSummary.config.workspaceId,"workspace");case 2:i=o.sent,l={summary:i.frameSummary},a=n.getModel("frame",l),u={frame:a,snapshot:i},s=n.getModel("workspace",u),c=s.getWindow((function(e){return e.id&&e.id===r.windowSummary.config.windowId})),e(c);case 9:case"end":return o.stop()}}),o)})))},r.next=4,t.processGlobalSubscription(o,"window","loaded");case 4:return i=r.sent,r.abrupt("return",i);case 6:case"end":return r.stop()}}),r)})))},onWindowRemoved:function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){var r,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ne(e),r=function(n){var t=n.windowSummary.config,r=t.windowId,o=t.workspaceId,i=t.frameId;e({windowId:r,workspaceId:o,frameId:i})},n.next=4,t.processGlobalSubscription(r,"window","removed");case 4:return o=n.sent,n.abrupt("return",o);case 6:case"end":return n.stop()}}),n)})))}}},Kn=function(e){return w(void 0,void 0,void 0,_.a.mark((function n(){var t,r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new Vn(e.agm,e.windows,e.layouts,e.contexts),r=e.interop.instance.windowId,n.next=4,t.initiate(r);case 4:e.workspaces=Hn(e,t);case 5:case"end":return n.stop()}}),n)})))};"undefined"!==typeof window&&(window.GlueWorkspaces=Kn);var Xn=Kn,Zn=t(21);a.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(s.b,{glueFactory:function(e){var n={glue:{libraries:[Xn]},applications:{local:[{name:"SimpleOne",type:"window",title:"maybe",details:{url:"http://localhost:9200/"},customProperties:{includeInWorkspaces:!0}}]},layouts:{mode:"session",local:[{name:"example2",type:"Workspace",components:[{type:"Workspace",state:{config:{name:"second",title:"Untitled 1"},context:{},children:[{type:"column",config:{},children:[{type:"row",config:{},children:[{type:"group",config:{},children:[{type:"window",config:{appName:"SimpleOne",title:"asd"}}]},{type:"group",config:{},children:[{type:"window",config:{appName:"SimpleOne"}}]}]},{type:"group",config:{},children:[{type:"window",config:{appName:"SimpleOne"}}]}]}]}}],metadata:{}},{name:"not-example",type:"Workspace",components:[{type:"Workspace",state:{config:{name:"second",title:"Untitled 1"},context:{},children:[{type:"column",config:{},children:[{type:"row",config:{},children:[{type:"group",config:{},children:[{type:"window",config:{appName:"SimpleOne"}}]},{type:"group",config:{},children:[{type:"window",config:{appName:"SimpleOne"}}]}]},{type:"group",config:{},children:[{type:"window",config:{appName:"SimpleOne"}}]}]}]}}],metadata:{}},{name:"asd",type:"Workspace",metadata:{},components:[{type:"Workspace",state:{config:{name:"asd",title:"Untitled 1"},context:null,children:[{type:"column",config:{},children:[{type:"group",config:{},children:[{type:"window",config:{appName:"SimpleOne"}}]}]}]}}]}]},workspaces:{src:"/",isFrame:!0}};return Object(Zn.a)(n).then((function(e){return e.glue}))},children:Object(r.jsx)(c,{})})}),document.getElementById("root")),d()}},[[39,1,2]]]);
//# sourceMappingURL=main.d898473c.chunk.js.map