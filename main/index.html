<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main</title>
    <script src="./platform.web.umd.js"></script>
    <script src="./workspaces.umd.js"></script>
</head>

<body>
    <h1>Main</h1>
</body>

<!-- <iframe class="border rounded flex-grow-1" src="http://localhost:9100"></iframe> -->

<script>
    // POSSIBLE APPLICATIONS CONFIG:

    const applications = {
        local: [
            {
                name: "SimpleOne",
                type: "window",
                title: "SimpleOne",
                details: {
                    url: "http://localhost:9200/"
                },
                customProperties: {
                    includeInWorkspaces: true
                }
            }
        ]
    }


    // POSSIBLE LAYOUTS CONFIG:

    const layouts = {
        mode: "session",
        local: [
            { "name": "example2", "type": "Workspace", "components": [{ "type": "Workspace", "state": { "config": { "name": "second", "title": "Untitled 1" }, "context": {}, "children": [{ "type": "column", "config": {}, "children": [{ "type": "row", "config": {}, "children": [{ "type": "group", "config": {}, "children": [{ "type": "window", "config": { "appName": "SimpleOne", "title": "asd" } }] }, { "type": "group", "config": {}, "children": [{ "type": "window", "config": { "appName": "SimpleOne" } }] }] }, { "type": "group", "config": {}, "children": [{ "type": "window", "config": { "appName": "SimpleOne" } }] }] }] } }], "metadata": {} },
            { "name": "not-example", "type": "Workspace", "components": [{ "type": "Workspace", "state": { "config": { "name": "second", "title": "Untitled 1" }, "context": {}, "children": [{ "type": "column", "config": {}, "children": [{ "type": "row", "config": {}, "children": [{ "type": "group", "config": {}, "children": [{ "type": "window", "config": { "appName": "SimpleOne" } }] }, { "type": "group", "config": {}, "children": [{ "type": "window", "config": { "appName": "SimpleOne" } }] }] }, { "type": "group", "config": {}, "children": [{ "type": "window", "config": { "appName": "SimpleOne" } }] }] }] } }], "metadata": {} },
            {
                "name": "asd",
                "type": "Workspace",
                "metadata": {},
                "components": [
                    {
                        "type": "Workspace",
                        "state": {
                            "config": {
                                "name": "asd",
                                "title": "Untitled 1"
                            },
                            "context": null,
                            "children": [
                                {
                                    "type": "column",
                                    "config": {},
                                    "children": [
                                        {
                                            "type": "group",
                                            "config": {},
                                            "children": [
                                                {
                                                    "type": "window",
                                                    "config": {
                                                        "appName": "SimpleOne"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    }
                ]
            }
        ]
    };

    // const plugins = {
    //     definitions: [
    //         {
    //             name: "first-plugin",
    //             config: { test: 42 },
    //             start: (glue, config) => {
    //                 // WebSocket
    //                 // fetch
    //                 // glue
    //                 console.log("works believe me");
    //                 console.log(config);
    //                 console.log(glue.appManager.applications());
    //             }
    //         }
    //     ]
    // };

    const config = {
        glue: {
            libraries: [GlueWorkspaces],
            systemLogger: { level: "debug" }, // you can set this to trace for maximum console output,
        },
        layouts,
        applications,
        workspaces: {
            src: "http://localhost:9300"
        }
    }

    GlueWebPlatform(config)
        .then((data) => {
            window.glue = data.glue;
            console.log("done");
        })
        .then(() => console.log("test done"))
        .catch((err) => {
            console.warn(err);
        });
</script>

</html>